/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t,e,n,r,i,s={258:(t,e,n)=>{n.d(e,{Jn:()=>v,qX:()=>p,Xd:()=>m,Mq:()=>A,ZF:()=>w,KN:()=>b});var r=n(552),i=n(934),s=n(444);class o{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const a="@firebase/app",c="0.7.5",u=new i.Yd("@firebase/app"),l={[a]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},h=new Map,d=new Map;function f(t,e){try{t.container.addComponent(e)}catch(n){u.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function m(t){const e=t.name;if(d.has(e))return u.debug(`There were multiple attempts to register component ${e}.`),!1;d.set(e,t);for(const e of h.values())f(e,t);return!0}function p(t,e){return t.container.getProvider(e)}const g=new s.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class y{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw g.create("app-deleted",{appName:this._name})}}const v="9.2.0";function w(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},e),i=n.name;if("string"!=typeof i||!i)throw g.create("bad-app-name",{appName:String(i)});const o=h.get(i);if(o){if((0,s.vZ)(t,o.options)&&(0,s.vZ)(n,o.config))return o;throw g.create("duplicate-app",{appName:i})}const a=new r.H0(i);for(const t of d.values())a.addComponent(t);const c=new y(t,n,a);return h.set(i,c),c}function A(t="[DEFAULT]"){const e=h.get(t);if(!e)throw g.create("no-app",{appName:t});return e}function b(t,e,n){var i;let s=null!==(i=l[t])&&void 0!==i?i:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=[`Unable to register library "${s}" with version "${e}":`];return o&&t.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void u.warn(t.join(" "))}m(new r.wA(`${s}-version`,(()=>({library:s,version:e})),"VERSION"))}m(new r.wA("platform-logger",(t=>new o(t)),"PRIVATE")),b(a,c,""),b(a,c,"esm2017"),b("fire-js","")},552:(t,e,n)=>{function r(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function i(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function s(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}n.d(e,{wA:()=>a,H0:()=>l}),Object.create,Object.create;var o=n(444),a=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),c="[DEFAULT]",u=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new o.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:c})}catch(t){}try{for(var s=r(this.instancesDeferred.entries()),o=s.next();!o.done;o=s.next()){var a=i(o.value,2),u=a[0],l=a[1],h=this.normalizeInstanceIdentifier(u);try{var d=this.getOrInitializeService({instanceIdentifier:h});l.resolve(d)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=c),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return t=this,e=void 0,r=function(){var t;return function(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(s(s([],i(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),i(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}));var t,e,n,r},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=c),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=c),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var s=t.options,o=void 0===s?{}:s,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:a,options:o});try{for(var u=r(this.instancesDeferred.entries()),l=u.next();!l.done;l=u.next()){var h=i(l.value,2),d=h[0],f=h[1];a===this.normalizeInstanceIdentifier(d)&&f.resolve(c)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return c},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&t(s,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,s=this.onInitCallbacks.get(e);if(s)try{for(var o=r(s),a=o.next();!a.done;a=o.next()){var c=a.value;try{c(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===c?void 0:e),options:i}),this.instances.set(n,s),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(t){}return s||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=c),this.component?this.component.multipleInstances?t:c:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),l=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new u(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},934:(t,e,n)=>{n.d(e,{in:()=>i,Yd:()=>u});const r=[];var i;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},c=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=a[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class u{constructor(t){this.name=t,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in i))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?s[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}},444:(t,e,n)=>{n.d(e,{BH:()=>r,LL:()=>d,vZ:()=>m,m9:()=>g,ru:()=>o,d:()=>c,w1:()=>u,uI:()=>s,b$:()=>a,Mn:()=>l});class r{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function i(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function s(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(i())}function o(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function a(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function c(){return i().indexOf("Electron/")>=0}function u(){const t=i();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function l(){return i().indexOf("MSAppHost/")>=0}class h extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,h.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,d.prototype.create)}}class d{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],s=i?function(t,e){return t.replace(f,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new h(r,o,n)}}const f=/\{\$([^}]+)}/g;function m(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],s=e[i];if(p(n)&&p(s)){if(!m(n,s))return!1}else if(n!==s)return!1}for(const t of r)if(!n.includes(t))return!1;return!0}function p(t){return null!==t&&"object"==typeof t}function g(t){return t&&t._delegate?t._delegate:t}},609:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(537),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([t.id,"/* http://meyerweb.com/eric/tools/css/reset/\n   v5.0.1 | 20191019\n   License: none (public domain)\n*/\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, menu, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed,\nfigure, figcaption, footer, header, hgroup,\nmain, menu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure,\nfooter, header, hgroup, main, menu, nav, section {\n\tdisplay: block;\n}\n/* HTML5 hidden-attribute fix for newer browsers */\n*[hidden] {\n    display: none;\n}\nbody {\n\tline-height: 1;\n}\nmenu, ol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n","",{version:3,sources:["webpack://./node_modules/reset-css/reset.css"],names:[],mappings:"AAAA;;;CAGC;;AAED;;;;;;;;;;;;;CAaC,SAAS;CACT,UAAU;CACV,SAAS;CACT,eAAe;CACf,aAAa;CACb,wBAAwB;AACzB;AACA,gDAAgD;AAChD;;CAEC,cAAc;AACf;AACA,kDAAkD;AAClD;IACI,aAAa;AACjB;AACA;CACC,cAAc;AACf;AACA;CACC,gBAAgB;AACjB;AACA;CACC,YAAY;AACb;AACA;;CAEC,WAAW;CACX,aAAa;AACd;AACA;CACC,yBAAyB;CACzB,iBAAiB;AAClB",sourcesContent:["/* http://meyerweb.com/eric/tools/css/reset/\n   v5.0.1 | 20191019\n   License: none (public domain)\n*/\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, menu, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed,\nfigure, figcaption, footer, header, hgroup,\nmain, menu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure,\nfooter, header, hgroup, main, menu, nav, section {\n\tdisplay: block;\n}\n/* HTML5 hidden-attribute fix for newer browsers */\n*[hidden] {\n    display: none;\n}\nbody {\n\tline-height: 1;\n}\nmenu, ol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n"],sourceRoot:""}]);const a=o},424:(t,e,n)=>{n.d(e,{Z:()=>u});var r=n(537),i=n.n(r),s=n(645),o=n.n(s),a=n(609),c=o()(i());c.i(a.Z),c.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const u=c},935:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(537),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([t.id,"#home {\r\n    width: 80vw;\r\n    height: 100%;\r\n    margin: auto;\r\n}\r\n\r\n.home-controls {\r\n    box-sizing: border-box;\r\n    height: 10%;\r\n    margin: auto;\r\n    margin-bottom: 5px;\r\n    overflow: auto; \r\n    border: 5px solid orange;\r\n    border-radius: 5px;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n}\r\n\r\n.home-items {\r\n    box-sizing: border-box;\r\n    height: 85%;\r\n    margin: auto;\r\n    padding: 3px;\r\n    overflow: auto; \r\n    border: 5px solid red;\r\n    border-radius: 5px;\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.home-items-list {\r\n    box-sizing: inherit;\r\n    width: 100%;\r\n    margin: auto;\r\n    overflow: auto; \r\n    border: 5px solid purple;\r\n    border-radius: inherit;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: flex-start;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n.home-items-list > div {\r\n    margin: 3px;\r\n    width: 45%;\r\n}\r\n","",{version:3,sources:["webpack://./src/view/components/home.css"],names:[],mappings:"AAAA;IACI,WAAW;IACX,YAAY;IACZ,YAAY;AAChB;;AAEA;IACI,sBAAsB;IACtB,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,cAAc;IACd,wBAAwB;IACxB,kBAAkB;IAClB,aAAa;IACb,6BAA6B;IAC7B,mBAAmB;AACvB;;AAEA;IACI,sBAAsB;IACtB,WAAW;IACX,YAAY;IACZ,YAAY;IACZ,cAAc;IACd,qBAAqB;IACrB,kBAAkB;IAClB,aAAa;IACb,sBAAsB;AAC1B;;AAEA;IACI,mBAAmB;IACnB,WAAW;IACX,YAAY;IACZ,cAAc;IACd,wBAAwB;IACxB,sBAAsB;IACtB,aAAa;IACb,6BAA6B;IAC7B,uBAAuB;IACvB,eAAe;AACnB;;AAEA;IACI,WAAW;IACX,UAAU;AACd",sourcesContent:["#home {\r\n    width: 80vw;\r\n    height: 100%;\r\n    margin: auto;\r\n}\r\n\r\n.home-controls {\r\n    box-sizing: border-box;\r\n    height: 10%;\r\n    margin: auto;\r\n    margin-bottom: 5px;\r\n    overflow: auto; \r\n    border: 5px solid orange;\r\n    border-radius: 5px;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n}\r\n\r\n.home-items {\r\n    box-sizing: border-box;\r\n    height: 85%;\r\n    margin: auto;\r\n    padding: 3px;\r\n    overflow: auto; \r\n    border: 5px solid red;\r\n    border-radius: 5px;\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.home-items-list {\r\n    box-sizing: inherit;\r\n    width: 100%;\r\n    margin: auto;\r\n    overflow: auto; \r\n    border: 5px solid purple;\r\n    border-radius: inherit;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: flex-start;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n.home-items-list > div {\r\n    margin: 3px;\r\n    width: 45%;\r\n}\r\n"],sourceRoot:""}]);const a=o},86:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(537),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([t.id,'.item {\r\n  box-sizing: border-box;\r\n  border-radius: 5px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n}\r\n  \r\n.item > div {\r\n  padding: 1%;\r\n}\r\n  \r\n.item-title {\r\n  background-color: #eee;\r\n  color: #444;\r\n  text-align: left;\r\n  cursor: pointer;\r\n  outline: none;\r\n  margin: 1%;\r\n}\r\n  \r\n.title-active, .item-title:hover {\r\n  background-color: #ccc;\r\n}\r\n  \r\n.item-title:after {\r\n  content: \'\\02795\'; /* Unicode character for "plus" sign (+) */\r\n  font-size: 13px;\r\n  color: white;\r\n  float: right;\r\n  margin-left: 5px;\r\n}\r\n  \r\n.title-active:after {\r\n  content: "\\2796"; /* Unicode character for "minus" sign (-) */\r\n}\r\n  \r\n.item-content {\r\n  display: none;\r\n  background-color: #f1f1f1;\r\n  max-height: 0;\r\n  overflow: hidden;\r\n  transition: max-height 0.2s ease-out;\r\n}\r\n  \r\n.item-details, .item-controls {\r\n  width: 100%;\r\n  height: 20%;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n  \r\n.item-controls {\r\n  justify-content: flex-end;\r\n}\r\n  \r\n.item-details > div, .item-controls > div {\r\n  width: 50%;\r\n  height: 100%;\r\n  text-align: center;\r\n}\r\n  \r\n.item-controls > div {\r\n  width: calc(100%/3/3);\r\n}\r\n  \r\n.overdue {\r\n  -webkit-animation: overdue linear 1.5s infinite;\r\n  animation: overdue linear 1.5s infinite;\r\n}\r\n@-webkit-keyframes overdue {\r\n  50% { border-color: red; } \r\n}\r\n@keyframes overdue {\r\n  50% { border-color: red; } \r\n}\r\n\r\n.hasOverdue {\r\n  -webkit-animation: hasOverdue linear 1.5s infinite;\r\n  animation: hasOverdue linear 1.5s infinite;\r\n}\r\n@-webkit-keyframes hasOverdue {\r\n  50% { border-color: orange; } \r\n}\r\n@keyframes hasOverdue {\r\n  50% { border-color: orange; } \r\n}\r\n\r\n.done {\r\n  opacity: 0.3;\r\n}\r\n\r\n',"",{version:3,sources:["webpack://./src/view/components/item.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,kBAAkB;EAClB,aAAa;EACb,sBAAsB;EACtB,6BAA6B;AAC/B;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,sBAAsB;EACtB,WAAW;EACX,gBAAgB;EAChB,eAAe;EACf,aAAa;EACb,UAAU;AACZ;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,iBAAiB,EAAE,0CAA0C;EAC7D,eAAe;EACf,YAAY;EACZ,YAAY;EACZ,gBAAgB;AAClB;;AAEA;EACE,gBAAgB,EAAE,2CAA2C;AAC/D;;AAEA;EACE,aAAa;EACb,yBAAyB;EACzB,aAAa;EACb,gBAAgB;EAChB,oCAAoC;AACtC;;AAEA;EACE,WAAW;EACX,WAAW;EACX,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,UAAU;EACV,YAAY;EACZ,kBAAkB;AACpB;;AAEA;EACE,qBAAqB;AACvB;;AAEA;EACE,+CAA+C;EAC/C,uCAAuC;AACzC;AACA;EACE,MAAM,iBAAiB,EAAE;AAC3B;AACA;EACE,MAAM,iBAAiB,EAAE;AAC3B;;AAEA;EACE,kDAAkD;EAClD,0CAA0C;AAC5C;AACA;EACE,MAAM,oBAAoB,EAAE;AAC9B;AACA;EACE,MAAM,oBAAoB,EAAE;AAC9B;;AAEA;EACE,YAAY;AACd",sourcesContent:['.item {\r\n  box-sizing: border-box;\r\n  border-radius: 5px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n}\r\n  \r\n.item > div {\r\n  padding: 1%;\r\n}\r\n  \r\n.item-title {\r\n  background-color: #eee;\r\n  color: #444;\r\n  text-align: left;\r\n  cursor: pointer;\r\n  outline: none;\r\n  margin: 1%;\r\n}\r\n  \r\n.title-active, .item-title:hover {\r\n  background-color: #ccc;\r\n}\r\n  \r\n.item-title:after {\r\n  content: \'\\02795\'; /* Unicode character for "plus" sign (+) */\r\n  font-size: 13px;\r\n  color: white;\r\n  float: right;\r\n  margin-left: 5px;\r\n}\r\n  \r\n.title-active:after {\r\n  content: "\\2796"; /* Unicode character for "minus" sign (-) */\r\n}\r\n  \r\n.item-content {\r\n  display: none;\r\n  background-color: #f1f1f1;\r\n  max-height: 0;\r\n  overflow: hidden;\r\n  transition: max-height 0.2s ease-out;\r\n}\r\n  \r\n.item-details, .item-controls {\r\n  width: 100%;\r\n  height: 20%;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n  \r\n.item-controls {\r\n  justify-content: flex-end;\r\n}\r\n  \r\n.item-details > div, .item-controls > div {\r\n  width: 50%;\r\n  height: 100%;\r\n  text-align: center;\r\n}\r\n  \r\n.item-controls > div {\r\n  width: calc(100%/3/3);\r\n}\r\n  \r\n.overdue {\r\n  -webkit-animation: overdue linear 1.5s infinite;\r\n  animation: overdue linear 1.5s infinite;\r\n}\r\n@-webkit-keyframes overdue {\r\n  50% { border-color: red; } \r\n}\r\n@keyframes overdue {\r\n  50% { border-color: red; } \r\n}\r\n\r\n.hasOverdue {\r\n  -webkit-animation: hasOverdue linear 1.5s infinite;\r\n  animation: hasOverdue linear 1.5s infinite;\r\n}\r\n@-webkit-keyframes hasOverdue {\r\n  50% { border-color: orange; } \r\n}\r\n@keyframes hasOverdue {\r\n  50% { border-color: orange; } \r\n}\r\n\r\n.done {\r\n  opacity: 0.3;\r\n}\r\n\r\n'],sourceRoot:""}]);const a=o},912:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(537),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([t.id,".project {\r\n  border: 3px solid green;\r\n}\r\n","",{version:3,sources:["webpack://./src/view/components/project.css"],names:[],mappings:"AAAA;EACE,uBAAuB;AACzB",sourcesContent:[".project {\r\n  border: 3px solid green;\r\n}\r\n"],sourceRoot:""}]);const a=o},808:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(537),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([t.id,".form-add {\r\n    box-sizing: border-box;\r\n    margin: auto;\r\n    margin-top: 3px;\r\n    margin-bottom: 3px;\r\n    height: 90%;\r\n    border: 3px solid indianred;\r\n    border-radius: 10px;\r\n    background-color: #eee;\r\n    padding: 10px;\r\n}\r\n\r\n.form-add-project {\r\n    width: calc(100%/3);\r\n}\r\n\r\n.form-add-todo {\r\n    width: 100%;\r\n}\r\n\r\n::placeholder {\r\n    color: inherit;\r\n    font: inherit;\r\n  }\r\n\r\n.form-add div, .form-add input {\r\n    box-sizing: border-box;\r\n    position: relative;\r\n    margin: auto;\r\n    margin-top: 5px;\r\n    margin-bottom: 5px;\r\n    width: 100%;\r\n    height: calc(100%/4);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    text-align: center;\r\n}\r\n\r\n\r\n\r\n.form-edit {\r\n    box-sizing: border-box;\r\n    margin: auto;\r\n    margin-top: 3px;\r\n    margin-bottom: 3px;\r\n    height: 90%;\r\n    border: 3px solid indianred;\r\n    border-radius: 10px;\r\n    background-color: #eee;\r\n    padding: 10px;\r\n}\r\n\r\n.form-edit-home {\r\n    width: calc(100%/3);\r\n}\r\n\r\n.form-edit-todo {\r\n    width: 100%;\r\n}\r\n\r\n::placeholder {\r\n    color: inherit;\r\n    font: inherit;\r\n  }\r\n\r\n.form-edit div, .form-edit input {\r\n    box-sizing: border-box;\r\n    position: relative;\r\n    margin: auto;\r\n    margin-top: 5px;\r\n    margin-bottom: 5px;\r\n    width: 100%;\r\n    height: calc(100%/4);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    text-align: center;\r\n}\r\n\r\nlabel {\r\n    /* float: left; */\r\n    width: 20%;\r\n}\r\n\r\nselect {\r\n    float: right;\r\n    width: 80%;\r\n}\r\n","",{version:3,sources:["webpack://./src/view/forms/forms.css"],names:[],mappings:"AAAA;IACI,sBAAsB;IACtB,YAAY;IACZ,eAAe;IACf,kBAAkB;IAClB,WAAW;IACX,2BAA2B;IAC3B,mBAAmB;IACnB,sBAAsB;IACtB,aAAa;AACjB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,WAAW;AACf;;AAEA;IACI,cAAc;IACd,aAAa;EACf;;AAEF;IACI,sBAAsB;IACtB,kBAAkB;IAClB,YAAY;IACZ,eAAe;IACf,kBAAkB;IAClB,WAAW;IACX,oBAAoB;IACpB,aAAa;IACb,uBAAuB;IACvB,mBAAmB;IACnB,kBAAkB;AACtB;;;;AAIA;IACI,sBAAsB;IACtB,YAAY;IACZ,eAAe;IACf,kBAAkB;IAClB,WAAW;IACX,2BAA2B;IAC3B,mBAAmB;IACnB,sBAAsB;IACtB,aAAa;AACjB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,WAAW;AACf;;AAEA;IACI,cAAc;IACd,aAAa;EACf;;AAEF;IACI,sBAAsB;IACtB,kBAAkB;IAClB,YAAY;IACZ,eAAe;IACf,kBAAkB;IAClB,WAAW;IACX,oBAAoB;IACpB,aAAa;IACb,uBAAuB;IACvB,mBAAmB;IACnB,kBAAkB;AACtB;;AAEA;IACI,iBAAiB;IACjB,UAAU;AACd;;AAEA;IACI,YAAY;IACZ,UAAU;AACd",sourcesContent:[".form-add {\r\n    box-sizing: border-box;\r\n    margin: auto;\r\n    margin-top: 3px;\r\n    margin-bottom: 3px;\r\n    height: 90%;\r\n    border: 3px solid indianred;\r\n    border-radius: 10px;\r\n    background-color: #eee;\r\n    padding: 10px;\r\n}\r\n\r\n.form-add-project {\r\n    width: calc(100%/3);\r\n}\r\n\r\n.form-add-todo {\r\n    width: 100%;\r\n}\r\n\r\n::placeholder {\r\n    color: inherit;\r\n    font: inherit;\r\n  }\r\n\r\n.form-add div, .form-add input {\r\n    box-sizing: border-box;\r\n    position: relative;\r\n    margin: auto;\r\n    margin-top: 5px;\r\n    margin-bottom: 5px;\r\n    width: 100%;\r\n    height: calc(100%/4);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    text-align: center;\r\n}\r\n\r\n\r\n\r\n.form-edit {\r\n    box-sizing: border-box;\r\n    margin: auto;\r\n    margin-top: 3px;\r\n    margin-bottom: 3px;\r\n    height: 90%;\r\n    border: 3px solid indianred;\r\n    border-radius: 10px;\r\n    background-color: #eee;\r\n    padding: 10px;\r\n}\r\n\r\n.form-edit-home {\r\n    width: calc(100%/3);\r\n}\r\n\r\n.form-edit-todo {\r\n    width: 100%;\r\n}\r\n\r\n::placeholder {\r\n    color: inherit;\r\n    font: inherit;\r\n  }\r\n\r\n.form-edit div, .form-edit input {\r\n    box-sizing: border-box;\r\n    position: relative;\r\n    margin: auto;\r\n    margin-top: 5px;\r\n    margin-bottom: 5px;\r\n    width: 100%;\r\n    height: calc(100%/4);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    text-align: center;\r\n}\r\n\r\nlabel {\r\n    /* float: left; */\r\n    width: 20%;\r\n}\r\n\r\nselect {\r\n    float: right;\r\n    width: 80%;\r\n}\r\n"],sourceRoot:""}]);const a=o},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var u=0;u<t.length;u++){var l=[].concat(t[u]);r&&o[l[0]]||(void 0!==s&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=s),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),e.push(l))}},e}},537:t=>{t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),s="/*# ".concat(i," */"),o=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[e].concat(o).concat([s]).join("\n")}return[e].join("\n")}},882:(t,e,n)=>{function r(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}n.d(e,{Z:()=>r})},946:(t,e,n)=>{function r(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}n.d(e,{Z:()=>r})},562:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(946),i=n(13),s=n(882);function o(t,e){(0,s.Z)(2,arguments);var n=(0,i.Z)(t),o=(0,r.Z)(e);if(isNaN(o))return new Date(NaN);if(!o)return n;var a=n.getDate(),c=new Date(n.getTime());c.setMonth(n.getMonth()+o+1,0);var u=c.getDate();return a>=u?c:(n.setFullYear(c.getFullYear(),c.getMonth(),a),n)}function a(t,e){(0,s.Z)(2,arguments);var n=(0,r.Z)(e);return o(t,12*n)}},598:(t,e,n)=>{n.d(e,{Z:()=>rt});var r=n(882);function i(t){return(0,r.Z)(1,arguments),t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)}var s=n(13);function o(t){if((0,r.Z)(1,arguments),!i(t)&&"number"!=typeof t)return!1;var e=(0,s.Z)(t);return!isNaN(Number(e))}var a={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function c(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var u,l={date:c({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:c({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:c({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},h={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function d(t){return function(e,n){var r,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,o=i.width?String(i.width):s;r=t.formattingValues[o]||t.formattingValues[s]}else{var a=t.defaultWidth,c=i.width?String(i.width):t.defaultWidth;r=t.values[c]||t.values[a]}return r[t.argumentCallback?t.argumentCallback(e):e]}}function f(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o,a=s[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?p(c,(function(t){return t.test(a)})):m(c,(function(t){return t.test(a)}));o=t.valueCallback?t.valueCallback(u):u,o=n.valueCallback?n.valueCallback(o):o;var l=e.slice(a.length);return{value:o,rest:l}}}function m(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function p(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}const g={code:"en-US",formatDistance:function(t,e,n){var r,i=a[t];return r="string"==typeof i?i:1===e?i.one:i.other.replace("{{count}}",e.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:l,formatRelative:function(t,e,n,r){return h[t]},localize:{ordinalNumber:function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:d({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:d({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:d({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:d({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:d({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(u={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.match(u.matchPattern);if(!n)return null;var r=n[0],i=t.match(u.parsePattern);if(!i)return null;var s=u.valueCallback?u.valueCallback(i[0]):i[0];s=e.valueCallback?e.valueCallback(s):s;var o=t.slice(r.length);return{value:s,rest:o}}),era:f({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:f({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:f({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:f({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:f({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var y=n(946);function v(t,e){(0,r.Z)(2,arguments);var n=(0,s.Z)(t).getTime(),i=(0,y.Z)(e);return new Date(n+i)}function w(t,e){(0,r.Z)(2,arguments);var n=(0,y.Z)(e);return v(t,-n)}function A(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}const b=function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return A("yy"===e?r%100:r,e.length)},E=function(t,e){var n=t.getUTCMonth();return"M"===e?String(n+1):A(n+1,2)},T=function(t,e){return A(t.getUTCDate(),e.length)},I=function(t,e){return A(t.getUTCHours()%12||12,e.length)},C=function(t,e){return A(t.getUTCHours(),e.length)},S=function(t,e){return A(t.getUTCMinutes(),e.length)},k=function(t,e){return A(t.getUTCSeconds(),e.length)},D=function(t,e){var n=e.length,r=t.getUTCMilliseconds();return A(Math.floor(r*Math.pow(10,n-3)),e.length)};var N=864e5;function x(t){(0,r.Z)(1,arguments);var e=1,n=(0,s.Z)(t),i=n.getUTCDay(),o=(i<e?7:0)+i-e;return n.setUTCDate(n.getUTCDate()-o),n.setUTCHours(0,0,0,0),n}function _(t){(0,r.Z)(1,arguments);var e=(0,s.Z)(t),n=e.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(n+1,0,4),i.setUTCHours(0,0,0,0);var o=x(i),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var c=x(a);return e.getTime()>=o.getTime()?n+1:e.getTime()>=c.getTime()?n:n-1}function L(t){(0,r.Z)(1,arguments);var e=_(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var i=x(n);return i}var P=6048e5;function M(t,e){(0,r.Z)(1,arguments);var n=e||{},i=n.locale,o=i&&i.options&&i.options.weekStartsOn,a=null==o?0:(0,y.Z)(o),c=null==n.weekStartsOn?a:(0,y.Z)(n.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=(0,s.Z)(t),l=u.getUTCDay(),h=(l<c?7:0)+l-c;return u.setUTCDate(u.getUTCDate()-h),u.setUTCHours(0,0,0,0),u}function R(t,e){(0,r.Z)(1,arguments);var n=(0,s.Z)(t,e),i=n.getUTCFullYear(),o=e||{},a=o.locale,c=a&&a.options&&a.options.firstWeekContainsDate,u=null==c?1:(0,y.Z)(c),l=null==o.firstWeekContainsDate?u:(0,y.Z)(o.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var h=new Date(0);h.setUTCFullYear(i+1,0,l),h.setUTCHours(0,0,0,0);var d=M(h,e),f=new Date(0);f.setUTCFullYear(i,0,l),f.setUTCHours(0,0,0,0);var m=M(f,e);return n.getTime()>=d.getTime()?i+1:n.getTime()>=m.getTime()?i:i-1}function B(t,e){(0,r.Z)(1,arguments);var n=e||{},i=n.locale,s=i&&i.options&&i.options.firstWeekContainsDate,o=null==s?1:(0,y.Z)(s),a=null==n.firstWeekContainsDate?o:(0,y.Z)(n.firstWeekContainsDate),c=R(t,e),u=new Date(0);u.setUTCFullYear(c,0,a),u.setUTCHours(0,0,0,0);var l=M(u,e);return l}var O=6048e5;function j(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(0===s)return n+String(i);var o=e||"";return n+String(i)+o+A(s,2)}function U(t,e){return t%60==0?(t>0?"-":"+")+A(Math.abs(t)/60,2):F(t,e)}function F(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t);return r+A(Math.floor(i/60),2)+n+A(i%60,2)}const V={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if("yo"===e){var r=t.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return b(t,e)},Y:function(t,e,n,r){var i=R(t,r),s=i>0?i:1-i;return"YY"===e?A(s%100,2):"Yo"===e?n.ordinalNumber(s,{unit:"year"}):A(s,e.length)},R:function(t,e){return A(_(t),e.length)},u:function(t,e){return A(t.getUTCFullYear(),e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return A(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return A(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return E(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return A(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){var o=function(t,e){(0,r.Z)(1,arguments);var n=(0,s.Z)(t),i=M(n,e).getTime()-B(n,e).getTime();return Math.round(i/O)+1}(t,i);return"wo"===e?n.ordinalNumber(o,{unit:"week"}):A(o,e.length)},I:function(t,e,n){var i=function(t){(0,r.Z)(1,arguments);var e=(0,s.Z)(t),n=x(e).getTime()-L(e).getTime();return Math.round(n/P)+1}(t);return"Io"===e?n.ordinalNumber(i,{unit:"week"}):A(i,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):T(t,e)},D:function(t,e,n){var i=function(t){(0,r.Z)(1,arguments);var e=(0,s.Z)(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var i=e.getTime(),o=n-i;return Math.floor(o/N)+1}(t);return"Do"===e?n.ordinalNumber(i,{unit:"dayOfYear"}):A(i,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return A(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return A(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),i=0===r?7:r;switch(e){case"i":return String(i);case"ii":return A(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r,i=t.getUTCHours();switch(r=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r,i=t.getUTCHours();switch(r=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){var r=t.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return I(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):C(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(r,{unit:"hour"}):A(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return 0===r&&(r=24),"ko"===e?n.ordinalNumber(r,{unit:"hour"}):A(r,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):S(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):k(t,e)},S:function(t,e){return D(t,e)},X:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();if(0===i)return"Z";switch(e){case"X":return U(i);case"XXXX":case"XX":return F(i);default:return F(i,":")}},x:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"x":return U(i);case"xxxx":case"xx":return F(i);default:return F(i,":")}},O:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+j(i,":");default:return"GMT"+F(i,":")}},z:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+j(i,":");default:return"GMT"+F(i,":")}},t:function(t,e,n,r){var i=r._originalDate||t;return A(Math.floor(i.getTime()/1e3),e.length)},T:function(t,e,n,r){return A((r._originalDate||t).getTime(),e.length)}};function q(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}}function $(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}}var H={p:$,P:function(t,e){var n,r=t.match(/(P+)(p+)?/),i=r[1],s=r[2];if(!s)return q(t,e);switch(i){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",q(i,e)).replace("{{time}}",$(s,e))}};const z=H;function W(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}var K=["D","DD"],G=["YY","YYYY"];function Y(t){return-1!==K.indexOf(t)}function Z(t){return-1!==G.indexOf(t)}function Q(t,e,n){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===t)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===t)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===t)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var X=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,J=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tt=/^'([^]*?)'?$/,et=/''/g,nt=/[a-zA-Z]/;function rt(t,e,n){(0,r.Z)(2,arguments);var i=String(e),a=n||{},c=a.locale||g,u=c.options&&c.options.firstWeekContainsDate,l=null==u?1:(0,y.Z)(u),h=null==a.firstWeekContainsDate?l:(0,y.Z)(a.firstWeekContainsDate);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=c.options&&c.options.weekStartsOn,f=null==d?0:(0,y.Z)(d),m=null==a.weekStartsOn?f:(0,y.Z)(a.weekStartsOn);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!c.localize)throw new RangeError("locale must contain localize property");if(!c.formatLong)throw new RangeError("locale must contain formatLong property");var p=(0,s.Z)(t);if(!o(p))throw new RangeError("Invalid time value");var v=W(p),A=w(p,v),b={firstWeekContainsDate:h,weekStartsOn:m,locale:c,_originalDate:p},E=i.match(J).map((function(t){var e=t[0];return"p"===e||"P"===e?(0,z[e])(t,c.formatLong,b):t})).join("").match(X).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return it(n);var i=V[r];if(i)return!a.useAdditionalWeekYearTokens&&Z(n)&&Q(n,e,t),!a.useAdditionalDayOfYearTokens&&Y(n)&&Q(n,e,t),i(A,n,c.localize,b);if(r.match(nt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("");return E}function it(t){return t.match(tt)[1].replace(et,"'")}},13:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(882);function i(t){(0,r.Z)(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}},503:(t,e,n)=>{n.d(e,{ZF:()=>r.ZF});var r=n(258);(0,r.KN)("firebase","9.2.0","app")},591:(t,e,n)=>{n.d(e,{EK:()=>$r,ET:()=>gl,hJ:()=>Eu,oe:()=>pl,JU:()=>Tu,PL:()=>dl,ad:()=>Su,IO:()=>al,pl:()=>fl,r7:()=>ml,qs:()=>vl});var r,i=n(258),s=n(552),o=n(934),a=n(444),c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},u={},l=l||{},h=c||self;function d(){}function f(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function m(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var p="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:v).apply(null,arguments)}function A(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function b(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function E(){this.s=this.s,this.o=this.o}var T={};E.prototype.s=!1,E.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,p)&&t[p]||(t[p]=++g)}(this);delete T[t]}},E.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const I=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},C=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,i="string"==typeof t?t.split(""):t;for(let s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function S(t){return Array.prototype.concat.apply([],arguments)}function k(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function D(t){return/^[\s\xa0]*$/.test(t)}var N,x=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function _(t,e){return-1!=t.indexOf(e)}function L(t,e){return t<e?-1:t>e?1:0}t:{var P=h.navigator;if(P){var M=P.userAgent;if(M){N=M;break t}}N=""}function R(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function B(t){const e={};for(const n in t)e[n]=t[n];return e}var O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(t,e){let n,r;for(let e=1;e<arguments.length;e++){for(n in r=arguments[e],r)t[n]=r[n];for(let e=0;e<O.length;e++)n=O[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function U(t){return U[" "](t),t}U[" "]=d;var F,V,q=_(N,"Opera"),$=_(N,"Trident")||_(N,"MSIE"),H=_(N,"Edge"),z=H||$,W=_(N,"Gecko")&&!(_(N.toLowerCase(),"webkit")&&!_(N,"Edge"))&&!(_(N,"Trident")||_(N,"MSIE"))&&!_(N,"Edge"),K=_(N.toLowerCase(),"webkit")&&!_(N,"Edge");function G(){var t=h.document;return t?t.documentMode:void 0}t:{var Y="",Z=(V=N,W?/rv:([^\);]+)(\)|;)/.exec(V):H?/Edge\/([\d\.]+)/.exec(V):$?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(V):K?/WebKit\/(\S+)/.exec(V):q?/(?:Version)[ \/]?(\S+)/.exec(V):void 0);if(Z&&(Y=Z?Z[1]:""),$){var Q=G();if(null!=Q&&Q>parseFloat(Y)){F=String(Q);break t}}F=Y}var X,J={};function tt(){return t=J,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let t=0;const e=x(String(F)).split("."),n=x("9").split("."),r=Math.max(e.length,n.length);for(let o=0;0==t&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;t=L(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||L(0==i[2].length,0==s[2].length)||L(i[2],s[2]),i=i[3],s=s[3]}while(0==t)}return 0<=t}();var t}h.document&&$?X=G()||parseInt(F,10)||void 0:X=void 0;var et=X,nt=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{h.addEventListener("test",d,e),h.removeEventListener("test",d,e)}catch(t){}return t}();function rt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function it(t,e){if(rt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(W){t:{try{U(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:st[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&it.Z.h.call(this)}}rt.prototype.h=function(){this.defaultPrevented=!0},b(it,rt);var st={2:"touch",3:"pen",4:"mouse"};it.prototype.h=function(){it.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ot="closure_listenable_"+(1e6*Math.random()|0),at=0;function ct(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++at,this.ca=this.fa=!1}function ut(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function lt(t){this.src=t,this.g={},this.h=0}function ht(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=I(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(ut(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function dt(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}lt.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=dt(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new ct(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var ft="closure_lm_"+(1e6*Math.random()|0),mt={};function pt(t,e,n,r,i){if(r&&r.once)return yt(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)pt(t,e[s],n,r,i);return null}return n=It(n),t&&t[ot]?t.N(e,n,m(r)?!!r.capture:!!r,i):gt(t,e,n,!1,r,i)}function gt(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=m(i)?!!i.capture:!!i,a=Et(t);if(a||(t[ft]=a=new lt(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=bt;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)nt||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(At(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function yt(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)yt(t,e[s],n,r,i);return null}return n=It(n),t&&t[ot]?t.O(e,n,m(r)?!!r.capture:!!r,i):gt(t,e,n,!0,r,i)}function vt(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)vt(t,e[s],n,r,i);else r=m(r)?!!r.capture:!!r,n=It(n),t&&t[ot]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=dt(s=t.g[e],n,r,i))&&(ut(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=Et(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dt(e,n,r,i)),(n=-1<t?e[t]:null)&&wt(n))}function wt(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[ot])ht(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(At(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Et(e))?(ht(n,t),0==n.h&&(n.src=null,e[ft]=null)):ut(t)}}}function At(t){return t in mt?mt[t]:mt[t]="on"+t}function bt(t,e){if(t.ca)t=!0;else{e=new it(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&wt(t),t=n.call(r,e)}return t}function Et(t){return(t=t[ft])instanceof lt?t:null}var Tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function It(t){return"function"==typeof t?t:(t[Tt]||(t[Tt]=function(e){return t.handleEvent(e)}),t[Tt])}function Ct(){E.call(this),this.i=new lt(this),this.P=this,this.I=null}function St(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new rt(e,t);else if(e instanceof rt)e.target=e.target||t;else{var i=e;j(e=new rt(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=kt(o,r,!0,e)&&i}if(i=kt(o=e.g=t,r,!0,e)&&i,i=kt(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=kt(o=e.g=n[s],r,!1,e)&&i}function kt(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&ht(t.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}b(Ct,E),Ct.prototype[ot]=!0,Ct.prototype.removeEventListener=function(t,e,n,r){vt(this,t,e,n,r)},Ct.prototype.M=function(){if(Ct.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ut(n[r]);delete e.g[t],e.h--}}this.I=null},Ct.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Ct.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Dt=h.JSON.stringify;function Nt(){var t=Bt;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var xt,_t=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new Lt),(t=>t.reset()));class Lt{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Pt(t){h.setTimeout((()=>{throw t}),0)}function Mt(t,e){xt||function(){var t=h.Promise.resolve(void 0);xt=function(){t.then(Ot)}}(),Rt||(xt(),Rt=!0),Bt.add(t,e)}var Rt=!1,Bt=new class{constructor(){this.h=this.g=null}add(t,e){const n=_t.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function Ot(){for(var t;t=Nt();){try{t.h.call(t.g)}catch(t){Pt(t)}var e=_t;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Rt=!1}function jt(t,e){Ct.call(this),this.h=t||1,this.g=e||h,this.j=w(this.kb,this),this.l=Date.now()}function Ut(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Ft(t,e,n){if("function"==typeof t)n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:h.setTimeout(t,e||0)}function Vt(t){t.g=Ft((()=>{t.g=null,t.i&&(t.i=!1,Vt(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}b(jt,Ct),(r=jt.prototype).da=!1,r.S=null,r.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),St(this,"tick"),this.da&&(Ut(this),this.start()))}},r.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.M=function(){jt.Z.M.call(this),Ut(this),delete this.g};class qt extends E{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Vt(this)}M(){super.M(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $t(t){E.call(this),this.h=t,this.g={}}b($t,E);var Ht=[];function zt(t,e,n,r){Array.isArray(n)||(n&&(Ht[0]=n.toString()),n=Ht);for(var i=0;i<n.length;i++){var s=pt(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Wt(t){R(t.g,(function(t,e){this.g.hasOwnProperty(e)&&wt(t)}),t),t.g={}}function Kt(){this.g=!0}function Gt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Dt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}$t.prototype.M=function(){$t.Z.M.call(this),Wt(this)},$t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Kt.prototype.Aa=function(){this.g=!1},Kt.prototype.info=function(){};var Yt={},Zt=null;function Qt(){return Zt=Zt||new Ct}function Xt(t){rt.call(this,Yt.Ma,t)}function Jt(t){const e=Qt();St(e,new Xt(e,t))}function te(t,e){rt.call(this,Yt.STAT_EVENT,t),this.stat=e}function ee(t){const e=Qt();St(e,new te(e,t))}function ne(t,e){rt.call(this,Yt.Na,t),this.size=e}function re(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return h.setTimeout((function(){t()}),e)}Yt.Ma="serverreachability",b(Xt,rt),Yt.STAT_EVENT="statevent",b(te,rt),Yt.Na="timingevent",b(ne,rt);var ie={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},se={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function oe(){}function ae(t){return t.h||(t.h=t.i())}function ce(){}oe.prototype.h=null;var ue,le={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function he(){rt.call(this,"d")}function de(){rt.call(this,"c")}function fe(){}function me(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new $t(this),this.P=ge,t=z?125:void 0,this.W=new jt(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new pe}function pe(){this.i=null,this.g="",this.h=!1}b(he,rt),b(de,rt),b(fe,oe),fe.prototype.g=function(){return new XMLHttpRequest},fe.prototype.i=function(){return{}},ue=new fe;var ge=45e3,ye={},ve={};function we(t,e,n){t.K=1,t.v=qe(Be(e)),t.s=n,t.U=!0,Ae(t,null)}function Ae(t,e){t.F=Date.now(),Ie(t),t.A=Be(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),en(n.h,"t",r),t.C=0,n=t.l.H,t.h=new pe,t.g=nr(t.l,n?e:null,!t.s),0<t.O&&(t.L=new qt(w(t.Ia,t,t.g),t.O)),zt(t.V,t.g,"readystatechange",t.gb),e=t.H?B(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Jt(1),function(t,e,n,r,i,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function be(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Ee(t,e,n){let r,i=!0;for(;!t.I&&t.C<n.length;){if(r=Te(t,n),r==ve){4==e&&(t.o=4,ee(14),i=!1),Gt(t.j,t.m,null,"[Incomplete Response]");break}if(r==ye){t.o=4,ee(15),Gt(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Gt(t.j,t.m,r,null),Ne(t,r)}be(t)&&r!=ve&&r!=ye&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ee(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gn(e),e.L=!0,ee(11))):(Gt(t.j,t.m,n,"[Invalid Chunked Response]"),De(t),ke(t))}function Te(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?ve:(n=Number(e.substring(n,r)),isNaN(n)?ye:(r+=1)+n>e.length?ve:(e=e.substr(r,n),t.C=r+n,e))}function Ie(t){t.Y=Date.now()+t.P,Ce(t,t.P)}function Ce(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=re(w(t.eb,t),e)}function Se(t){t.B&&(h.clearTimeout(t.B),t.B=null)}function ke(t){0==t.l.G||t.I||Qn(t.l,t)}function De(t){Se(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Ut(t.W),Wt(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Ne(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||cn(n.i,t)))if(n.I=t.N,!t.J&&cn(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Zn(n),Un(n)}Kn(n),ee(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=re(w(n.ab,n),6e3));if(1>=an(n.i)&&n.ka){try{n.ka()}catch(t){}n.ka=void 0}}else Jn(n,11)}else if((t.J||n.g==t)&&Zn(n),!D(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.U=u[0],u=u[1],2==n.G)if("c"==u[0]){n.J=u[1],n.la=u[2];const e=u[3];null!=e&&(n.ma=e,n.h.info("VER="+n.ma));const i=u[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const l=u[5];null!=l&&"number"==typeof l&&0<l&&(r=1.5*l,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.i;!s.g&&(_(t,"spdy")||_(t,"quic")||_(t,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(un(s,s.h),s.h=null))}if(r.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.sa=t,Ve(r.F,r.D,t))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=t;if((r=n).oa=er(r,r.H?r.la:null,r.W),o.J){ln(r.i,o);var a=o,c=r.K;c&&a.setTimeout(c),a.B&&(Se(a),Ie(a)),r.g=o}else Wn(r);0<n.l.length&&qn(n)}else"stop"!=u[0]&&"close"!=u[0]||Jn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Jn(n,7):jn(n):"noop"!=u[0]&&n.j&&n.j.wa(u),n.A=0)}Jt(4)}catch(t){}}function xe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)C(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(f(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function _e(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof _e)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Le(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Pe(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Pe(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Pe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(r=me.prototype).setTimeout=function(t){this.P=t},r.gb=function(t){t=t.target;const e=this.L;e&&3==Pn(t)?e.l():this.Ia(t)},r.Ia=function(t){try{if(t==this.g)t:{const l=Pn(this.g);var e=this.g.Da();const d=this.g.ba();if(!(3>l)&&(3!=l||z||this.g&&(this.h.h||this.g.ga()||Mn(this.g)))){this.I||4!=l||7==e||Jt(8==e||0>=d?3:2),Se(this);var n=this.g.ba();this.N=n;e:if(be(this)){var r=Mn(this.g);t="";var i=r.length,s=4==Pn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){De(this),ke(this);var o="";break e}this.h.i=new h.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(a)){var u=a;break e}}u=null}if(!(n=u)){this.i=!1,this.o=3,ee(12),De(this),ke(this);break t}Gt(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ne(this,n)}this.U?(Ee(this,l,o),z&&this.i&&3==l&&(zt(this.V,this.W,"tick",this.fb),this.W.start())):(Gt(this.j,this.m,o,null),Ne(this,o)),4==l&&De(this),this.i&&!this.I&&(4==l?Qn(this.l,this):(this.i=!1,Ie(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,ee(12)):(this.o=0,ee(13)),De(this),ke(this)}}}catch(t){}},r.fb=function(){if(this.g){var t=Pn(this.g),e=this.g.ga();this.C<e.length&&(Se(this),Ee(this,t,e),this.i&&4!=t&&Ie(this))}},r.cancel=function(){this.I=!0,De(this)},r.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Jt(3),ee(17)),De(this),this.o=2,ke(this)):Ce(this,this.Y-t)},(r=_e.prototype).R=function(){Le(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},r.T=function(){return Le(this),this.g.concat()},r.get=function(t,e){return Pe(this.h,t)?this.h[t]:e},r.set=function(t,e){Pe(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},r.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var Me=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Re(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Re){this.g=void 0!==e?e:t.g,Oe(this,t.j),this.s=t.s,je(this,t.i),Ue(this,t.m),this.l=t.l,e=t.h;var n=new Qe;n.i=e.i,e.g&&(n.g=new _e(e.g),n.h=e.h),Fe(this,n),this.o=t.o}else t&&(n=String(t).match(Me))?(this.g=!!e,Oe(this,n[1]||"",!0),this.s=$e(n[2]||""),je(this,n[3]||"",!0),Ue(this,n[4]),this.l=$e(n[5]||"",!0),Fe(this,n[6]||"",!0),this.o=$e(n[7]||"")):(this.g=!!e,this.h=new Qe(null,this.g))}function Be(t){return new Re(t)}function Oe(t,e,n){t.j=n?$e(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function je(t,e,n){t.i=n?$e(e,!0):e}function Ue(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Fe(t,e,n){e instanceof Qe?(t.h=e,function(t,e){e&&!t.j&&(Xe(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Je(this,e),en(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=He(e,Ye)),t.h=new Qe(e,t.g))}function Ve(t,e,n){t.h.set(e,n)}function qe(t){return Ve(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function $e(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function He(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ze),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ze(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Re.prototype.toString=function(){var t=[],e=this.j;e&&t.push(He(e,We,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(He(e,We,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(He(n,"/"==n.charAt(0)?Ge:Ke,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",He(n,Ze)),t.join("")};var We=/[#\/\?@]/g,Ke=/[#\?:]/g,Ge=/[#\?]/g,Ye=/[#\?@]/g,Ze=/#/g;function Qe(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Xe(t){t.g||(t.g=new _e,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Je(t,e){Xe(t),e=nn(t,e),Pe(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Pe((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Le(t)))}function tn(t,e){return Xe(t),e=nn(t,e),Pe(t.g.h,e)}function en(t,e,n){Je(t,e),0<n.length&&(t.i=null,t.g.set(nn(t,e),k(n)),t.h+=n.length)}function nn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function rn(t){this.l=t||sn,t=h.PerformanceNavigationTiming?0<(t=h.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(h.g&&h.g.Ea&&h.g.Ea()&&h.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(r=Qe.prototype).add=function(t,e){Xe(this),this.i=null,t=nn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},r.forEach=function(t,e){Xe(this),this.g.forEach((function(n,r){C(n,(function(n){t.call(e,n,r,this)}),this)}),this)},r.T=function(){Xe(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},r.R=function(t){Xe(this);var e=[];if("string"==typeof t)tn(this,t)&&(e=S(e,this.g.get(nn(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=S(e,t[n])}return e},r.set=function(t,e){return Xe(this),this.i=null,tn(this,t=nn(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},r.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var sn=10;function on(t){return!!t.h||!!t.g&&t.g.size>=t.j}function an(t){return t.h?1:t.g?t.g.size:0}function cn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function un(t,e){t.g?t.g.add(e):t.h=e}function ln(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function hn(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return k(t.i)}function dn(){}function fn(){this.g=new dn}function mn(t,e,n){const r=n||"";try{xe(t,(function(t,n){let i=t;m(t)&&(i=Dt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function pn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function gn(t){this.l=t.$b||null,this.j=t.ib||!1}function yn(t,e){Ct.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=vn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rn.prototype.cancel=function(){if(this.i=hn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},dn.prototype.stringify=function(t){return h.JSON.stringify(t,void 0)},dn.prototype.parse=function(t){return h.JSON.parse(t,void 0)},b(gn,oe),gn.prototype.g=function(){return new yn(this.l,this.j)},gn.prototype.i=function(t){return function(){return t}}({}),b(yn,Ct);var vn=0;function wn(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function An(t){t.readyState=4,t.l=null,t.j=null,t.A=null,bn(t)}function bn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(r=yn.prototype).open=function(t,e){if(this.readyState!=vn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,bn(this)},r.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||h).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,An(this)),this.readyState=vn},r.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,bn(this)),this.g&&(this.readyState=3,bn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==h.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wn(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},r.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?An(this):bn(this),3==this.readyState&&wn(this)}},r.Ua=function(t){this.g&&(this.response=this.responseText=t,An(this))},r.Ta=function(t){this.g&&(this.response=t,An(this))},r.ha=function(){this.g&&An(this)},r.setRequestHeader=function(t,e){this.v.append(t,e)},r.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(yn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var En=h.JSON.parse;function Tn(t){Ct.call(this),this.headers=new _e,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=In,this.K=this.L=!1}b(Tn,Ct);var In="",Cn=/^https?$/i,Sn=["POST","PUT"];function kn(t){return"content-type"==t.toLowerCase()}function Dn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Nn(t),_n(t)}function Nn(t){t.D||(t.D=!0,St(t,"complete"),St(t,"error"))}function xn(t){if(t.h&&void 0!==l&&(!t.C[1]||4!=Pn(t)||2!=t.ba()))if(t.v&&4==Pn(t))Ft(t.Fa,0,t);else if(St(t,"readystatechange"),4==Pn(t)){t.h=!1;try{const a=t.ba();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===a){var i=String(t.H).match(Me)[1]||null;if(!i&&h.self&&h.self.location){var s=h.self.location.protocol;i=s.substr(0,s.length-1)}r=!Cn.test(i?i.toLowerCase():"")}n=r}if(n)St(t,"complete"),St(t,"success");else{t.m=6;try{var o=2<Pn(t)?t.g.statusText:""}catch(t){o=""}t.j=o+" ["+t.ba()+"]",Nn(t)}}finally{_n(t)}}}function _n(t,e){if(t.g){Ln(t);const n=t.g,r=t.C[0]?d:null;t.g=null,t.C=null,e||St(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Ln(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(h.clearTimeout(t.A),t.A=null)}function Pn(t){return t.g?t.g.readyState:0}function Mn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case In:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Rn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){let e="";return R(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ve(t,e,n))}function Bn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function On(t){this.za=0,this.l=[],this.h=new Kt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Bn("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Bn("baseRetryDelayMs",5e3,t),this.$a=Bn("retryDelaySeedMs",1e4,t),this.Ya=Bn("forwardChannelMaxRetries",2,t),this.ra=Bn("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new rn(t&&t.concurrentRequestLimit),this.Ca=new fn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function jn(t){if(Fn(t),3==t.G){var e=t.V++,n=Be(t.F);Ve(n,"SID",t.J),Ve(n,"RID",e),Ve(n,"TYPE","terminate"),Hn(t,n),(e=new me(t,t.h,e,void 0)).K=2,e.v=qe(Be(n)),n=!1,h.navigator&&h.navigator.sendBeacon&&(n=h.navigator.sendBeacon(e.v.toString(),"")),!n&&h.Image&&((new Image).src=e.v,n=!0),n||(e.g=nr(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ie(e)}tr(t)}function Un(t){t.g&&(Gn(t),t.g.cancel(),t.g=null)}function Fn(t){Un(t),t.u&&(h.clearTimeout(t.u),t.u=null),Zn(t),t.i.cancel(),t.m&&("number"==typeof t.m&&h.clearTimeout(t.m),t.m=null)}function Vn(t,e){t.l.push(new class{constructor(t,e){this.h=t,this.g=e}}(t.Za++,e)),3==t.G&&qn(t)}function qn(t){on(t.i)||t.m||(t.m=!0,Mt(t.Ha,t),t.C=0)}function $n(t,e){var n;n=e?e.m:t.V++;const r=Be(t.F);Ve(r,"SID",t.J),Ve(r,"RID",n),Ve(r,"AID",t.U),Hn(t,r),t.o&&t.s&&Rn(r,t.o,t.s),n=new me(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=zn(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),un(t.i,n),we(n,r,e)}function Hn(t,e){t.j&&xe({},(function(t,n){Ve(e,n,t)}))}function zn(t,e,n){n=Math.min(t.l.length,n);var r=t.j?w(t.j.Oa,t.j,t):null;t:{var i=t.l;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=e,0>n)e=Math.max(0,i[o].h-100),s=!1;else try{mn(a,t,"req"+n+"_")}catch(t){r&&r(a)}}if(s){r=t.join("&");break t}}}return t=t.l.splice(0,n),e.D=t,r}function Wn(t){t.g||t.u||(t.Y=1,Mt(t.Ga,t),t.A=0)}function Kn(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=re(w(t.Ga,t),Xn(t,t.A)),t.A++,0))}function Gn(t){null!=t.B&&(h.clearTimeout(t.B),t.B=null)}function Yn(t){t.g=new me(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Be(t.oa);Ve(e,"RID","rpc"),Ve(e,"SID",t.J),Ve(e,"CI",t.N?"0":"1"),Ve(e,"AID",t.U),Hn(t,e),Ve(e,"TYPE","xmlhttp"),t.o&&t.s&&Rn(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=qe(Be(e)),n.s=null,n.U=!0,Ae(n,t)}function Zn(t){null!=t.v&&(h.clearTimeout(t.v),t.v=null)}function Qn(t,e){var n=null;if(t.g==e){Zn(t),Gn(t),t.g=null;var r=2}else{if(!cn(t.i,e))return;n=e.D,ln(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;St(r=Qt(),new ne(r,n,e,i)),qn(t)}else Wn(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(an(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=re(w(t.Ha,t,e),Xn(t,t.C)),t.C++,0)))}(t,e)||2==r&&Kn(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Jn(t,5);break;case 4:Jn(t,10);break;case 3:Jn(t,6);break;default:Jn(t,2)}}function Xn(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Jn(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=w(t.jb,t);n||(n=new Re("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||Oe(n,"https"),qe(n)),function(t,e){const n=new Kt;if(h.Image){const r=new Image;r.onload=A(pn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=A(pn,n,r,"TestLoadImage: error",!1,e),r.onabort=A(pn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=A(pn,n,r,"TestLoadImage: timeout",!1,e),h.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ee(2);t.G=0,t.j&&t.j.va(e),tr(t),Fn(t)}function tr(t){t.G=0,t.I=-1,t.j&&(0==hn(t.i).length&&0==t.l.length||(t.i.i.length=0,k(t.l),t.l.length=0),t.j.ua())}function er(t,e,n){let r=function(t){return t instanceof Re?Be(t):new Re(t,void 0)}(n);if(""!=r.i)e&&je(r,e+"."+r.i),Ue(r,r.m);else{const t=h.location;r=function(t,e,n,r){var i=new Re(null,void 0);return t&&Oe(i,t),e&&je(i,e),n&&Ue(i,n),r&&(i.l=r),i}(t.protocol,e?e+"."+t.hostname:t.hostname,+t.port,n)}return t.aa&&R(t.aa,(function(t,e){Ve(r,e,t)})),e=t.D,n=t.sa,e&&n&&Ve(r,e,n),Ve(r,"VER",t.ma),Hn(t,r),r}function nr(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Tn(new gn({ib:!0})):new Tn(t.qa)).L=t.H,e}function rr(){}function ir(){if($&&!(10<=Number(et)))throw Error("Environmental error: no available transport.")}function sr(t,e){Ct.call(this),this.g=new On(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!D(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!D(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new cr(this)}function or(t){he.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function ar(){de.call(this),this.status=1}function cr(t){this.g=t}(r=Tn.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ue.g(),this.C=this.u?ae(this.u):ae(ue),this.g.onreadystatechange=w(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void Dn(this,t)}t=n||"";const i=new _e(this.headers);r&&xe(r,(function(t,e){i.set(e,t)})),r=function(t){t:{var e=kn;const n=t.length,r="string"==typeof t?t.split(""):t;for(let i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=h.FormData&&t instanceof h.FormData,!(0<=I(Sn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ln(this),0<this.B&&((this.K=function(t){return $&&tt()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=w(this.pa,this)):this.A=Ft(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Dn(this,t)}},r.pa=function(){void 0!==l&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,St(this,"timeout"),this.abort(8))},r.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,St(this,"complete"),St(this,"abort"),_n(this))},r.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_n(this,!0)),Tn.Z.M.call(this)},r.Fa=function(){this.s||(this.F||this.v||this.l?xn(this):this.cb())},r.cb=function(){xn(this)},r.ba=function(){try{return 2<Pn(this)?this.g.status:-1}catch(t){return-1}},r.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},r.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),En(e)}},r.Da=function(){return this.m},r.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(r=On.prototype).ma=8,r.G=1,r.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},r.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new me(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=B(s),j(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)t:{for(var e=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.l.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=zn(this,i,e),Ve(n=Be(this.F),"RID",t),Ve(n,"CVER",22),this.D&&Ve(n,"X-HTTP-Session-Id",this.D),Hn(this,n),this.o&&s&&Rn(n,this.o,s),un(this.i,i),this.Ra&&Ve(n,"TYPE","init"),this.ja?(Ve(n,"$req",e),Ve(n,"SID","null"),i.$=!0,we(i,n,null)):we(i,n,e),this.G=2}}else 3==this.G&&(t?$n(this,t):0==this.l.length||on(this.i)||$n(this))},r.Ga=function(){if(this.u=null,Yn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=re(w(this.bb,this),t)}},r.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ee(10),Un(this),Yn(this))},r.ab=function(){null!=this.v&&(this.v=null,Un(this),Kn(this),ee(19))},r.jb=function(t){t?(this.h.info("Successfully pinged google.com"),ee(2)):(this.h.info("Failed to ping google.com"),ee(1))},(r=rr.prototype).xa=function(){},r.wa=function(){},r.va=function(){},r.ua=function(){},r.Oa=function(){},ir.prototype.g=function(t,e){return new sr(t,e)},b(sr,Ct),sr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Mt(w(t.hb,t,e))),ee(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=er(t,null,t.W),qn(t)},sr.prototype.close=function(){jn(this.g)},sr.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Vn(this.g,e)}else this.v?((e={}).__data__=Dt(t),Vn(this.g,e)):Vn(this.g,t)},sr.prototype.M=function(){this.g.j=null,delete this.j,jn(this.g),delete this.g,sr.Z.M.call(this)},b(or,he),b(ar,de),b(cr,rr),cr.prototype.xa=function(){St(this.g,"a")},cr.prototype.wa=function(t){St(this.g,new or(t))},cr.prototype.va=function(t){St(this.g,new ar(t))},cr.prototype.ua=function(){St(this.g,"b")},ir.prototype.createWebChannel=ir.prototype.g,sr.prototype.send=sr.prototype.u,sr.prototype.open=sr.prototype.m,sr.prototype.close=sr.prototype.close,ie.NO_ERROR=0,ie.TIMEOUT=8,ie.HTTP_ERROR=6,se.COMPLETE="complete",ce.EventType=le,le.OPEN="a",le.CLOSE="b",le.ERROR="c",le.MESSAGE="d",Ct.prototype.listen=Ct.prototype.N,Tn.prototype.listenOnce=Tn.prototype.O,Tn.prototype.getLastError=Tn.prototype.La,Tn.prototype.getLastErrorCode=Tn.prototype.Da,Tn.prototype.getStatus=Tn.prototype.ba,Tn.prototype.getResponseJson=Tn.prototype.Qa,Tn.prototype.getResponseText=Tn.prototype.ga,Tn.prototype.send=Tn.prototype.ea;var ur=u.createWebChannelTransport=function(){return new ir},lr=u.getStatEventTarget=function(){return Qt()},hr=u.ErrorCode=ie,dr=u.EventType=se,fr=u.Event=Yt,mr=u.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},pr=u.FetchXmlHttpFactory=gn,gr=u.WebChannel=ce,yr=u.XhrIo=Tn;const vr="@firebase/firestore";class wr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}wr.UNAUTHENTICATED=new wr(null),wr.GOOGLE_CREDENTIALS=new wr("google-credentials-uid"),wr.FIRST_PARTY=new wr("first-party-uid"),wr.MOCK_USER=new wr("mock-user");let Ar="9.2.0";const br=new o.Yd("@firebase/firestore");function Er(){return br.logLevel}function Tr(t,...e){if(br.logLevel<=o.in.DEBUG){const n=e.map(Sr);br.debug(`Firestore (${Ar}): ${t}`,...n)}}function Ir(t,...e){if(br.logLevel<=o.in.ERROR){const n=e.map(Sr);br.error(`Firestore (${Ar}): ${t}`,...n)}}function Cr(t,...e){if(br.logLevel<=o.in.WARN){const n=e.map(Sr);br.warn(`Firestore (${Ar}): ${t}`,...n)}}function Sr(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function kr(t="Unexpected state"){const e=`FIRESTORE (${Ar}) INTERNAL ASSERTION FAILED: `+t;throw Ir(e),new Error(e)}function Dr(t,e){t||kr()}function Nr(t,e){return t}const xr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _r extends Error{constructor(t,e){super(e),this.code=t,this.message=e,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Pr{constructor(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${t}`}}class Mr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(wr.UNAUTHENTICATED)))}shutdown(){}}class Rr{constructor(t){this.t=t,this.currentUser=wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Lr,t.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},o=t=>{Tr("FirebaseCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Tr("FirebaseCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Lr)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Tr("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Dr("string"==typeof e.accessToken),new Pr(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Dr(null===t||"string"==typeof t),new wr(t)}}class Br{constructor(t,e,n){this.h=t,this.l=e,this.m=n,this.type="FirstParty",this.user=wr.FIRST_PARTY}get authHeaders(){const t={"X-Goog-AuthUser":this.l},e=this.h.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.m&&(t["X-Goog-Iam-Authorization-Token"]=this.m),t}}class Or{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new Br(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e(wr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class jr{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.g(t),this.p=t=>e.writeSequenceNumber(t))}g(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.p&&this.p(t),t}}function Ur(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}jr.T=-1;class Fr{static I(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const r=Ur(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length))}return n}}function Vr(t,e){return t<e?-1:t>e?1:0}function qr(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}class $r{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new _r(xr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new _r(xr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new _r(xr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _r(xr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return $r.fromMillis(Date.now())}static fromDate(t){return $r.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new $r(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Vr(this.nanoseconds,t.nanoseconds):Vr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Hr{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Hr(t)}static min(){return new Hr(new $r(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function zr(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Kr(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Gr{constructor(t,e,n){void 0===e?e=0:e>t.length&&kr(),void 0===n?n=t.length-e:n>t.length-e&&kr(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Gr.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Gr?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Yr extends Gr{construct(t,e,n){return new Yr(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new _r(xr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Yr(e)}static emptyPath(){return new Yr([])}}const Zr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qr extends Gr{construct(t,e,n){return new Qr(t,e,n)}static isValidIdentifier(t){return Zr.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qr.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qr(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new _r(xr.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new _r(xr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new _r(xr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new _r(xr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Qr(e)}static emptyPath(){return new Qr([])}}class Xr{constructor(t){this.fields=t,t.sort(Qr.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return qr(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Jr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Jr(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Jr(e)}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Vr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Jr.EMPTY_BYTE_STRING=new Jr("");const ti=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ei(t){if(Dr(!!t),"string"==typeof t){let e=0;const n=ti.exec(t);if(Dr(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ni(t.seconds),nanos:ni(t.nanos)}}function ni(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ri(t){return"string"==typeof t?Jr.fromBase64String(t):Jr.fromUint8Array(t)}function ii(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function si(t){const e=t.mapValue.fields.__previous_value__;return ii(e)?si(e):e}function oi(t){const e=ei(t.mapValue.fields.__local_write_time__.timestampValue);return new $r(e.seconds,e.nanos)}function ai(t){return null==t}function ci(t){return 0===t&&1/t==-1/0}class ui{constructor(t){this.path=t}static fromPath(t){return new ui(Yr.fromString(t))}static fromName(t){return new ui(Yr.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return null!==t&&0===Yr.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Yr.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ui(new Yr(t.slice()))}}function li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ii(t)?4:10:kr()}function hi(t,e){const n=li(t);if(n!==li(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return oi(t).isEqual(oi(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=ei(t.timestampValue),r=ei(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ri(t.bytesValue).isEqual(ri(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ni(t.geoPointValue.latitude)===ni(e.geoPointValue.latitude)&&ni(t.geoPointValue.longitude)===ni(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ni(t.integerValue)===ni(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=ni(t.doubleValue),r=ni(e.doubleValue);return n===r?ci(n)===ci(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return qr(t.arrayValue.values||[],e.arrayValue.values||[],hi);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(zr(n)!==zr(r))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===r[t]||!hi(n[t],r[t])))return!1;return!0}(t,e);default:return kr()}}function di(t,e){return void 0!==(t.values||[]).find((t=>hi(t,e)))}function fi(t,e){const n=li(t),r=li(e);if(n!==r)return Vr(n,r);switch(n){case 0:return 0;case 1:return Vr(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=ni(t.integerValue||t.doubleValue),r=ni(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return mi(t.timestampValue,e.timestampValue);case 4:return mi(oi(t),oi(e));case 5:return Vr(t.stringValue,e.stringValue);case 6:return function(t,e){const n=ri(t),r=ri(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let t=0;t<n.length&&t<r.length;t++){const e=Vr(n[t],r[t]);if(0!==e)return e}return Vr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Vr(ni(t.latitude),ni(e.latitude));return 0!==n?n:Vr(ni(t.longitude),ni(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let t=0;t<n.length&&t<r.length;++t){const e=fi(n[t],r[t]);if(e)return e}return Vr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let t=0;t<r.length&&t<s.length;++t){const e=Vr(r[t],s[t]);if(0!==e)return e;const o=fi(n[r[t]],i[s[t]]);if(0!==o)return o}return Vr(r.length,s.length)}(t.mapValue,e.mapValue);default:throw kr()}}function mi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Vr(t,e);const n=ei(t),r=ei(e),i=Vr(n.seconds,r.seconds);return 0!==i?i:Vr(n.nanos,r.nanos)}function pi(t){return gi(t)}function gi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=ei(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ri(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ui.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=gi(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${gi(t.fields[i])}`;return n+"}"}(t.mapValue):kr();var e,n}function yi(t){return!!t&&"integerValue"in t}function vi(t){return!!t&&"arrayValue"in t}function wi(t){return!!t&&"nullValue"in t}function Ai(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bi(t){return!!t&&"mapValue"in t}function Ei(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wr(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Ei(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ei(t.arrayValue.values[n]);return e}return Object.assign({},t)}class Ti{constructor(t){this.value=t}static empty(){return new Ti({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!bi(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ei(e)}setAll(t){let e=Qr.emptyPath(),n={},r=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=Ei(t):r.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());bi(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return hi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];bi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){Wr(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new Ti(Ei(this.value))}}function Ii(t){const e=[];return Wr(t.fields,((t,n)=>{const r=new Qr([t]);if(bi(n)){const t=Ii(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)})),new Xr(e)}class Ci{constructor(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(t){return new Ci(t,0,Hr.min(),Ti.empty(),0)}static newFoundDocument(t,e,n){return new Ci(t,1,e,n,0)}static newNoDocument(t,e){return new Ci(t,2,e,Ti.empty(),0)}static newUnknownDocument(t,e){return new Ci(t,3,e,Ti.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ti.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Ci&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}clone(){return new Ci(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Si{constructor(t,e=null,n=[],r=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.A=null}}function ki(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Si(t,e,n,r,i,s,o)}function Di(t){const e=Nr(t);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>function(t){return t.field.canonicalString()+t.op.toString()+pi(t.value)}(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),ai(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Vi(e.startAt)),e.endAt&&(t+="|ub:",t+=Vi(e.endAt)),e.A=t}return e.A}function Ni(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$i(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],r=e.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!hi(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zi(t.startAt,e.startAt)&&zi(t.endAt,e.endAt)}function xi(t){return ui.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class _i extends class{}{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.R(t,e,n):new Li(t,e,n):"array-contains"===e?new Bi(t,n):"in"===e?new Oi(t,n):"not-in"===e?new ji(t,n):"array-contains-any"===e?new Ui(t,n):new _i(t,e,n)}static R(t,e,n){return"in"===e?new Pi(t,n):new Mi(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.P(fi(e,this.value)):null!==e&&li(this.value)===li(e)&&this.P(fi(e,this.value))}P(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return kr()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Li extends _i{constructor(t,e,n){super(t,e,n),this.key=ui.fromName(n.referenceValue)}matches(t){const e=ui.comparator(t.key,this.key);return this.P(e)}}class Pi extends _i{constructor(t,e){super(t,"in",e),this.keys=Ri(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Mi extends _i{constructor(t,e){super(t,"not-in",e),this.keys=Ri(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Ri(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>ui.fromName(t.referenceValue)))}class Bi extends _i{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return vi(e)&&di(e.arrayValue,this.value)}}class Oi extends _i{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&di(this.value.arrayValue,e)}}class ji extends _i{constructor(t,e){super(t,"not-in",e)}matches(t){if(di(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!di(this.value.arrayValue,e)}}class Ui extends _i{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!vi(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>di(this.value.arrayValue,t)))}}class Fi{constructor(t,e){this.position=t,this.before=e}}function Vi(t){return`${t.before?"b":"a"}:${t.position.map((t=>pi(t))).join(",")}`}class qi{constructor(t,e="asc"){this.field=t,this.dir=e}}function $i(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Hi(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?ui.comparator(ui.fromName(o.referenceValue),n.key):fi(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function zi(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hi(t.position[n],e.position[n]))return!1;return!0}class Wi{constructor(t,e=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.V=null,this.S=null,this.startAt,this.endAt}}function Ki(t){return new Wi(t)}function Gi(t){return!ai(t.limit)&&"F"===t.limitType}function Yi(t){return!ai(t.limit)&&"L"===t.limitType}function Zi(t){const e=Nr(t);if(null===e.V){e.V=[];const t=function(t){for(const e of t.filters)if(e.v())return e.field;return null}(e),n=function(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==t&&null===n)t.isKeyField()||e.V.push(new qi(t)),e.V.push(new qi(Qr.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.V.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new qi(Qr.keyField(),t))}}}return e.V}function Qi(t){const e=Nr(t);if(!e.S)if("F"===e.limitType)e.S=ki(e.path,e.collectionGroup,Zi(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of Zi(e)){const e="desc"===n.dir?"asc":"desc";t.push(new qi(n.field,e))}const n=e.endAt?new Fi(e.endAt.position,!e.endAt.before):null,r=e.startAt?new Fi(e.startAt.position,!e.startAt.before):null;e.S=ki(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}return e.S}function Xi(t,e){return Ni(Qi(t),Qi(e))&&t.limitType===e.limitType}function Ji(t){return`${Di(Qi(t))}|lt:${t.limitType}`}function ts(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>{return`${(e=t).field.canonicalString()} ${e.op} ${pi(e.value)}`;var e})).join(", ")}]`),ai(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: "+Vi(t.startAt)),t.endAt&&(e+=", endAt: "+Vi(t.endAt)),`Target(${e})`}(Qi(t))}; limitType=${t.limitType})`}function es(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ui.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Hi(t.startAt,Zi(t),e)||t.endAt&&Hi(t.endAt,Zi(t),e))}(t,e)}function ns(t){return(e,n)=>{let r=!1;for(const i of Zi(t)){const t=rs(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function rs(t,e,n){const r=t.field.isKeyField()?ui.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?fi(r,i):kr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return kr()}}function is(t,e){if(t.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ci(e)?"-0":e}}function ss(t){return{integerValue:""+t}}function os(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!ci(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?ss(e):is(t,e)}class as{constructor(){this._=void 0}}function cs(t,e,n){return t instanceof hs?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ds?fs(t,e):t instanceof ms?ps(t,e):function(t,e){const n=ls(t,e),r=ys(n)+ys(t.C);return yi(n)&&yi(t.C)?ss(r):is(t.N,r)}(t,e)}function us(t,e,n){return t instanceof ds?fs(t,e):t instanceof ms?ps(t,e):n}function ls(t,e){return t instanceof gs?yi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class hs extends as{}class ds extends as{constructor(t){super(),this.elements=t}}function fs(t,e){const n=vs(e);for(const e of t.elements)n.some((t=>hi(t,e)))||n.push(e);return{arrayValue:{values:n}}}class ms extends as{constructor(t){super(),this.elements=t}}function ps(t,e){let n=vs(e);for(const e of t.elements)n=n.filter((t=>!hi(t,e)));return{arrayValue:{values:n}}}class gs extends as{constructor(t,e){super(),this.N=t,this.C=e}}function ys(t){return ni(t.integerValue||t.doubleValue)}function vs(t){return vi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class ws{constructor(t,e){this.version=t,this.transformResults=e}}class As{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new As}static exists(t){return new As(void 0,t)}static updateTime(t){return new As(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function bs(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Es{}function Ts(t,e,n){t instanceof Ds?function(t,e,n){const r=t.value.clone(),i=_s(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Ns?function(t,e,n){if(!bs(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=_s(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(xs(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Is(t,e,n){t instanceof Ds?function(t,e,n){if(!bs(t.precondition,e))return;const r=t.value.clone(),i=Ls(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(ks(e),r).setHasLocalMutations()}(t,e,n):t instanceof Ns?function(t,e,n){if(!bs(t.precondition,e))return;const r=Ls(t.fieldTransforms,n,e),i=e.data;i.setAll(xs(t)),i.setAll(r),e.convertToFoundDocument(ks(e),i).setHasLocalMutations()}(t,e,n):function(t,e){bs(t.precondition,e)&&e.convertToNoDocument(Hr.min())}(t,e)}function Cs(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),i=ls(r.transform,t||null);null!=i&&(null==n&&(n=Ti.empty()),n.set(r.field,i))}return n||null}function Ss(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&qr(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ds&&e instanceof ds||t instanceof ms&&e instanceof ms?qr(t.elements,e.elements,hi):t instanceof gs&&e instanceof gs?hi(t.C,e.C):t instanceof hs&&e instanceof hs}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function ks(t){return t.isFoundDocument()?t.version:Hr.min()}class Ds extends Es{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}}class Ns extends Es{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function xs(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function _s(t,e,n){const r=new Map;Dr(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,us(o,a,n[i]))}return r}function Ls(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,cs(t,s,e))}return r}class Ps extends Es{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class Ms extends Es{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class Rs{constructor(t){this.count=t}}var Bs,Os;function js(t){if(void 0===t)return Ir("GRPC error has no .code"),xr.UNKNOWN;switch(t){case Bs.OK:return xr.OK;case Bs.CANCELLED:return xr.CANCELLED;case Bs.UNKNOWN:return xr.UNKNOWN;case Bs.DEADLINE_EXCEEDED:return xr.DEADLINE_EXCEEDED;case Bs.RESOURCE_EXHAUSTED:return xr.RESOURCE_EXHAUSTED;case Bs.INTERNAL:return xr.INTERNAL;case Bs.UNAVAILABLE:return xr.UNAVAILABLE;case Bs.UNAUTHENTICATED:return xr.UNAUTHENTICATED;case Bs.INVALID_ARGUMENT:return xr.INVALID_ARGUMENT;case Bs.NOT_FOUND:return xr.NOT_FOUND;case Bs.ALREADY_EXISTS:return xr.ALREADY_EXISTS;case Bs.PERMISSION_DENIED:return xr.PERMISSION_DENIED;case Bs.FAILED_PRECONDITION:return xr.FAILED_PRECONDITION;case Bs.ABORTED:return xr.ABORTED;case Bs.OUT_OF_RANGE:return xr.OUT_OF_RANGE;case Bs.UNIMPLEMENTED:return xr.UNIMPLEMENTED;case Bs.DATA_LOSS:return xr.DATA_LOSS;default:return kr()}}(Os=Bs||(Bs={}))[Os.OK=0]="OK",Os[Os.CANCELLED=1]="CANCELLED",Os[Os.UNKNOWN=2]="UNKNOWN",Os[Os.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Os[Os.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Os[Os.NOT_FOUND=5]="NOT_FOUND",Os[Os.ALREADY_EXISTS=6]="ALREADY_EXISTS",Os[Os.PERMISSION_DENIED=7]="PERMISSION_DENIED",Os[Os.UNAUTHENTICATED=16]="UNAUTHENTICATED",Os[Os.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Os[Os.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Os[Os.ABORTED=10]="ABORTED",Os[Os.OUT_OF_RANGE=11]="OUT_OF_RANGE",Os[Os.UNIMPLEMENTED=12]="UNIMPLEMENTED",Os[Os.INTERNAL=13]="INTERNAL",Os[Os.UNAVAILABLE=14]="UNAVAILABLE",Os[Os.DATA_LOSS=15]="DATA_LOSS";class Us{constructor(t,e){this.comparator=t,this.root=e||Vs.EMPTY}insert(t,e){return new Us(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Vs.BLACK,null,null))}remove(t){return new Us(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Vs.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Fs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Fs(this.root,t,this.comparator,!1)}getReverseIterator(){return new Fs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Fs(this.root,t,this.comparator,!0)}}class Fs{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Vs{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Vs.RED,this.left=null!=r?r:Vs.EMPTY,this.right=null!=i?i:Vs.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new Vs(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Vs.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Vs.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Vs.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Vs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw kr();if(this.right.isRed())throw kr();const t=this.left.check();if(t!==this.right.check())throw kr();return t+(this.isRed()?0:1)}}Vs.EMPTY=null,Vs.RED=!0,Vs.BLACK=!1,Vs.EMPTY=new class{constructor(){this.size=0}get key(){throw kr()}get value(){throw kr()}get color(){throw kr()}get left(){throw kr()}get right(){throw kr()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Vs(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qs{constructor(t){this.comparator=t,this.data=new Us(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new $s(this.data.getIterator())}getIteratorFrom(t){return new $s(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof qs))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new qs(this.comparator);return e.data=t,e}}class $s{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Hs=new Us(ui.comparator);function zs(){return Hs}const Ws=new Us(ui.comparator);function Ks(){return Ws}const Gs=new Us(ui.comparator);const Ys=new qs(ui.comparator);function Zs(...t){let e=Ys;for(const n of t)e=e.add(n);return e}const Qs=new qs(Vr);function Xs(){return Qs}class Js{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e){const n=new Map;return n.set(t,to.createSynthesizedTargetChangeForCurrentChange(t,e)),new Js(Hr.min(),n,Xs(),zs(),Zs())}}class to{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e){return new to(Jr.EMPTY_BYTE_STRING,e,Zs(),Zs(),Zs())}}class eo{constructor(t,e,n,r){this.k=t,this.removedTargetIds=e,this.key=n,this.$=r}}class no{constructor(t,e){this.targetId=t,this.O=e}}class ro{constructor(t,e,n=Jr.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class io{constructor(){this.F=0,this.M=ao(),this.L=Jr.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(t){t.approximateByteSize()>0&&(this.U=!0,this.L=t)}W(){let t=Zs(),e=Zs(),n=Zs();return this.M.forEach(((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:kr()}})),new to(this.L,this.B,t,e,n)}G(){this.U=!1,this.M=ao()}H(t,e){this.U=!0,this.M=this.M.insert(t,e)}J(t){this.U=!0,this.M=this.M.remove(t)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class so{constructor(t){this.tt=t,this.et=new Map,this.nt=zs(),this.st=oo(),this.it=new qs(Vr)}rt(t){for(const e of t.k)t.$&&t.$.isFoundDocument()?this.ot(e,t.$):this.ct(e,t.key,t.$);for(const e of t.removedTargetIds)this.ct(e,t.key,t.$)}at(t){this.forEachTarget(t,(e=>{const n=this.ut(e);switch(t.state){case 0:this.ht(e)&&n.j(t.resumeToken);break;case 1:n.X(),n.q||n.G(),n.j(t.resumeToken);break;case 2:n.X(),n.q||this.removeTarget(e);break;case 3:this.ht(e)&&(n.Z(),n.j(t.resumeToken));break;case 4:this.ht(e)&&(this.lt(e),n.j(t.resumeToken));break;default:kr()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.et.forEach(((t,n)=>{this.ht(n)&&e(n)}))}ft(t){const e=t.targetId,n=t.O.count,r=this.dt(e);if(r){const t=r.target;if(xi(t))if(0===n){const n=new ui(t.path);this.ct(e,n,Ci.newNoDocument(n,Hr.min()))}else Dr(1===n);else this.wt(e)!==n&&(this.lt(e),this.it=this.it.add(e))}}_t(t){const e=new Map;this.et.forEach(((n,r)=>{const i=this.dt(r);if(i){if(n.current&&xi(i.target)){const e=new ui(i.target.path);null!==this.nt.get(e)||this.gt(r,e)||this.ct(r,e,Ci.newNoDocument(e,t))}n.K&&(e.set(r,n.W()),n.G())}}));let n=Zs();this.st.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.dt(t);return!e||2===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))}));const r=new Js(t,e,this.it,this.nt,n);return this.nt=zs(),this.st=oo(),this.it=new qs(Vr),r}ot(t,e){if(!this.ht(t))return;const n=this.gt(t,e.key)?2:0;this.ut(t).H(e.key,n),this.nt=this.nt.insert(e.key,e),this.st=this.st.insert(e.key,this.yt(e.key).add(t))}ct(t,e,n){if(!this.ht(t))return;const r=this.ut(t);this.gt(t,e)?r.H(e,1):r.J(e),this.st=this.st.insert(e,this.yt(e).delete(t)),n&&(this.nt=this.nt.insert(e,n))}removeTarget(t){this.et.delete(t)}wt(t){const e=this.ut(t).W();return this.tt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Y(t){this.ut(t).Y()}ut(t){let e=this.et.get(t);return e||(e=new io,this.et.set(t,e)),e}yt(t){let e=this.st.get(t);return e||(e=new qs(Vr),this.st=this.st.insert(t,e)),e}ht(t){const e=null!==this.dt(t);return e||Tr("WatchChangeAggregator","Detected inactive target",t),e}dt(t){const e=this.et.get(t);return e&&e.q?null:this.tt.Tt(t)}lt(t){this.et.set(t,new io),this.tt.getRemoteKeysForTarget(t).forEach((e=>{this.ct(t,e,null)}))}gt(t,e){return this.tt.getRemoteKeysForTarget(t).has(e)}}function oo(){return new Us(ui.comparator)}function ao(){return new Us(ui.comparator)}const co={asc:"ASCENDING",desc:"DESCENDING"},uo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class lo{constructor(t,e){this.databaseId=t,this.D=e}}function ho(t,e){return t.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fo(t,e){return t.D?e.toBase64():e.toUint8Array()}function mo(t,e){return ho(t,e.toTimestamp())}function po(t){return Dr(!!t),Hr.fromTimestamp(function(t){const e=ei(t);return new $r(e.seconds,e.nanos)}(t))}function go(t,e){return function(t){return new Yr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function yo(t){const e=Yr.fromString(t);return Dr(Oo(e)),e}function vo(t,e){return go(t.databaseId,e.path)}function wo(t,e){const n=yo(e);if(n.get(1)!==t.databaseId.projectId)throw new _r(xr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _r(xr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ui(Eo(n))}function Ao(t,e){return go(t.databaseId,e)}function bo(t){return new Yr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Eo(t){return Dr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function To(t,e,n){return{name:vo(t,e),fields:n.value.mapValue.fields}}function Io(t,e){return{documents:[Ao(t,e.path)]}}function Co(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ao(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ao(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(t){if(0===t.length)return;const e=t.map((t=>function(t){if("=="===t.op){if(Ai(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NAN"}};if(wi(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ai(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NOT_NAN"}};if(wi(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(t.field),op:_o(t.op),value:t.value}}}(t)));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Lo(t.field),direction:xo(t.dir)}}(t)))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(t,e){return t.D||ai(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=Do(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Do(e.endAt)),n}function So(t){let e=function(t){const e=yo(t);return 4===e.length?Yr.emptyPath():Eo(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Dr(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=ko(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new qi(Po(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,ai(e)?null:e}(n.limit));let c=null;n.startAt&&(c=No(n.startAt));let u=null;return n.endAt&&(u=No(n.endAt)),function(t,e,n,r,i,s,o,a){return new Wi(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",c,u)}function ko(t){return t?void 0!==t.unaryFilter?[Ro(t)]:void 0!==t.fieldFilter?[Mo(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((t=>ko(t))).reduce(((t,e)=>t.concat(e))):kr():[]}function Do(t){return{before:t.before,values:t.position}}function No(t){const e=!!t.before,n=t.values||[];return new Fi(n,e)}function xo(t){return co[t]}function _o(t){return uo[t]}function Lo(t){return{fieldPath:t.canonicalString()}}function Po(t){return Qr.fromServerFormat(t.fieldPath)}function Mo(t){return _i.create(Po(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return kr()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ro(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Po(t.unaryFilter.field);return _i.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Po(t.unaryFilter.field);return _i.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Po(t.unaryFilter.field);return _i.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Po(t.unaryFilter.field);return _i.create(i,"!=",{nullValue:"NULL_VALUE"});default:return kr()}}function Bo(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Oo(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function jo(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Fo(e)),e=Uo(t.get(n),e);return Fo(e)}function Uo(t,e){let n=e;const r=t.length;for(let e=0;e<r;e++){const r=t.charAt(e);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function Fo(t){return t+""}class Vo{constructor(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}}Vo.store="owner",Vo.key="owner";class qo{constructor(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}}qo.store="mutationQueues",qo.keyPath="userId";class $o{constructor(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}$o.store="mutations",$o.keyPath="batchId",$o.userMutationsIndex="userMutationsIndex",$o.userMutationsKeyPath=["userId","batchId"];class Ho{constructor(){}static prefixForUser(t){return[t]}static prefixForPath(t,e){return[t,jo(e)]}static key(t,e,n){return[t,jo(e),n]}}Ho.store="documentMutations",Ho.PLACEHOLDER=new Ho;class zo{constructor(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}zo.store="remoteDocuments",zo.readTimeIndex="readTimeIndex",zo.readTimeIndexPath="readTime",zo.collectionReadTimeIndex="collectionReadTimeIndex",zo.collectionReadTimeIndexPath=["parentPath","readTime"];class Wo{constructor(t){this.byteSize=t}}Wo.store="remoteDocumentGlobal",Wo.key="remoteDocumentGlobalKey";class Ko{constructor(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}Ko.store="targets",Ko.keyPath="targetId",Ko.queryTargetsIndexName="queryTargetsIndex",Ko.queryTargetsKeyPath=["canonicalId","targetId"];class Go{constructor(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n}}Go.store="targetDocuments",Go.keyPath=["targetId","path"],Go.documentTargetsIndex="documentTargetsIndex",Go.documentTargetsKeyPath=["path","targetId"];class Yo{constructor(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}Yo.key="targetGlobalKey",Yo.store="targetGlobal";class Zo{constructor(t,e){this.collectionId=t,this.parent=e}}Zo.store="collectionParents",Zo.keyPath=["collectionId","parent"];class Qo{constructor(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}}Qo.store="clientMetadata",Qo.keyPath="clientId";class Xo{constructor(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}}Xo.store="bundles",Xo.keyPath="bundleId";class Jo{constructor(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}}Jo.store="namedQueries",Jo.keyPath="name",qo.store,$o.store,Ho.store,zo.store,Ko.store,Vo.store,Yo.store,Go.store,Qo.store,Wo.store,Zo.store,Xo.store,Jo.store;class ta{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&kr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ta(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof ta?e:ta.resolve(e)}catch(t){return ta.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):ta.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):ta.reject(e)}static resolve(t){return new ta(((e,n)=>{e(t)}))}static reject(t){return new ta(((e,n)=>{n(t)}))}static waitFor(t){return new ta(((e,n)=>{let r=0,i=0,s=!1;t.forEach((t=>{++r,t.next((()=>{++i,s&&i===r&&e()}),(t=>n(t)))})),s=!0,i===r&&e()}))}static or(t){let e=ta.resolve(!1);for(const n of t)e=e.next((t=>t?ta.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}}function ea(t){return"IndexedDbTransactionError"===t.name}class na{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const r=this.mutations[e];r.key.isEqual(t.key)&&Ts(r,t,n[e])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&Is(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&Is(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach((e=>{const n=t.get(e.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(Hr.min())}))}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Zs())}isEqual(t){return this.batchId===t.batchId&&qr(this.mutations,t.mutations,((t,e)=>Ss(t,e)))&&qr(this.baseMutations,t.baseMutations,((t,e)=>Ss(t,e)))}}class ra{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){Dr(t.mutations.length===n.length);let r=Gs;const i=t.mutations;for(let t=0;t<i.length;t++)r=r.insert(i[t].key,n[t].version);return new ra(t,e,n,r)}}class ia{constructor(t,e,n,r,i=Hr.min(),s=Hr.min(),o=Jr.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(t){return new ia(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new ia(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class sa{constructor(t){this.Wt=t}}function oa(t){const e=So({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?function(t,e,n){return new Wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}(e,e.limit,"L"):e}class aa{constructor(){this.Gt=new ca}addToCollectionParentIndex(t,e){return this.Gt.add(e),ta.resolve()}getCollectionParents(t,e){return ta.resolve(this.Gt.getEntries(e))}}class ca{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new qs(Yr.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new qs(Yr.comparator)).toArray()}}class ua{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new ua(t,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}ua.DEFAULT_COLLECTION_PERCENTILE=10,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ua.DEFAULT=new ua(41943040,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ua.DISABLED=new ua(-1,0,0);class la{constructor(t){this.ne=t}next(){return this.ne+=2,this.ne}static se(){return new la(0)}static ie(){return new la(-1)}}async function ha(t){if(t.code!==xr.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;Tr("LocalStore","Unexpectedly lost primary lease")}class da{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,r]of n)if(this.equalsFn(e,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1}forEach(t){Wr(this.inner,((e,n)=>{for(const[e,r]of n)t(e,r)}))}isEmpty(){return Kr(this.inner)}}class fa{constructor(t,e,n){this.He=t,this.In=e,this.Ht=n}An(t,e){return this.In.getAllMutationBatchesAffectingDocumentKey(t,e).next((n=>this.Rn(t,e,n)))}Rn(t,e,n){return this.He.getEntry(t,e).next((t=>{for(const e of n)e.applyToLocalView(t);return t}))}bn(t,e){t.forEach(((t,n)=>{for(const t of e)t.applyToLocalView(n)}))}Pn(t,e){return this.He.getEntries(t,e).next((e=>this.vn(t,e).next((()=>e))))}vn(t,e){return this.In.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>this.bn(e,t)))}getDocumentsMatchingQuery(t,e,n){return function(t){return ui.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Vn(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.Sn(t,e,n):this.Dn(t,e,n)}Vn(t,e){return this.An(t,new ui(e)).next((t=>{let e=Ks();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}Sn(t,e,n){const r=e.collectionGroup;let i=Ks();return this.Ht.getCollectionParents(t,r).next((s=>ta.forEach(s,(s=>{const o=function(t,e){return new Wi(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(r));return this.Dn(t,o,n).next((t=>{t.forEach(((t,e)=>{i=i.insert(t,e)}))}))})).next((()=>i))))}Dn(t,e,n){let r,i;return this.He.getDocumentsMatchingQuery(t,e,n).next((n=>(r=n,this.In.getAllMutationBatchesAffectingQuery(t,e)))).next((e=>(i=e,this.Cn(t,i,r).next((t=>{r=t;for(const t of i)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=Ci.newInvalidDocument(n),r=r.insert(n,i)),Is(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))))).next((()=>(r.forEach(((t,n)=>{es(e,n)||(r=r.remove(t))})),r)))}Cn(t,e,n){let r=Zs();for(const t of e)for(const e of t.mutations)e instanceof Ns&&null===n.get(e.key)&&(r=r.add(e.key));let i=n;return this.He.getEntries(t,r).next((t=>(t.forEach(((t,e)=>{e.isFoundDocument()&&(i=i.insert(t,e))})),i)))}}class ma{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.Nn=n,this.xn=r}static kn(t,e){let n=Zs(),r=Zs();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:r=r.add(t.doc.key)}return new ma(t,e.fromCache,n,r)}}class pa{$n(t){this.On=t}getDocumentsMatchingQuery(t,e,n,r){return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Hr.min())?this.Fn(t,e):this.On.Pn(t,r).next((i=>{const s=this.Mn(e,i);return(Gi(e)||Yi(e))&&this.Ln(e.limitType,s,r,n)?this.Fn(t,e):(Er()<=o.in.DEBUG&&Tr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ts(e)),this.On.getDocumentsMatchingQuery(t,e,n).next((t=>(s.forEach((e=>{t=t.insert(e.key,e)})),t))))}))}Mn(t,e){let n=new qs(ns(t));return e.forEach(((e,r)=>{es(t,r)&&(n=n.add(r))})),n}Ln(t,e,n,r){if(n.size!==e.size)return!0;const i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Fn(t,e){return Er()<=o.in.DEBUG&&Tr("QueryEngine","Using full collection scan to execute query:",ts(e)),this.On.getDocumentsMatchingQuery(t,e,Hr.min())}}class ga{constructor(t,e,n,r){this.persistence=t,this.Bn=e,this.N=r,this.Un=new Us(Vr),this.qn=new da((t=>Di(t)),Ni),this.Kn=Hr.min(),this.In=t.getMutationQueue(n),this.jn=t.getRemoteDocumentCache(),this.ze=t.getTargetCache(),this.Qn=new fa(this.jn,this.In,this.persistence.getIndexManager()),this.Je=t.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Un)))}}async function ya(t,e){const n=Nr(t);let r=n.In,i=n.Qn;const s=await n.persistence.runTransaction("Handle user change","readonly",(t=>{let s;return n.In.getAllMutationBatches(t).next((o=>(s=o,r=n.persistence.getMutationQueue(e),i=new fa(n.jn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)))).next((e=>{const n=[],r=[];let o=Zs();for(const t of s){n.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return i.Pn(t,o).next((t=>({Wn:t,removedBatchIds:n,addedBatchIds:r})))}))}));return n.In=r,n.Qn=i,n.Bn.$n(n.Qn),s}function va(t){const e=Nr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.ze.getLastRemoteSnapshotVersion(t)))}function wa(t,e){const n=Nr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.In.getNextMutationBatchAfterBatchId(t,e))))}async function Aa(t,e,n){const r=Nr(t),i=r.Un.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!ea(t))throw t;Tr("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.Un=r.Un.remove(e),r.qn.delete(i.target)}function ba(t,e,n){const r=Nr(t);let i=Hr.min(),s=Zs();return r.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const r=Nr(t),i=r.qn.get(n);return void 0!==i?ta.resolve(r.Un.get(i)):r.ze.getTargetData(e,n)}(r,t,Qi(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>r.Bn.getDocumentsMatchingQuery(t,e,n?i:Hr.min(),n?s:Zs()))).next((t=>({documents:t,Gn:s})))))}class Ea{constructor(t){this.N=t,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(t,e){return ta.resolve(this.Yn.get(e))}saveBundleMetadata(t,e){var n;return this.Yn.set(e.id,{id:(n=e).id,version:n.version,createTime:po(n.createTime)}),ta.resolve()}getNamedQuery(t,e){return ta.resolve(this.Xn.get(e))}saveNamedQuery(t,e){return this.Xn.set(e.name,function(t){return{name:t.name,query:oa(t.bundledQuery),readTime:po(t.readTime)}}(e)),ta.resolve()}}class Ta{constructor(){this.Zn=new qs(Ia.ts),this.es=new qs(Ia.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(t,e){const n=new Ia(t,e);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.rs(new Ia(t,e))}os(t,e){t.forEach((t=>this.removeReference(t,e)))}cs(t){const e=new ui(new Yr([])),n=new Ia(e,t),r=new Ia(e,t+1),i=[];return this.es.forEachInRange([n,r],(t=>{this.rs(t),i.push(t.key)})),i}us(){this.Zn.forEach((t=>this.rs(t)))}rs(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}hs(t){const e=new ui(new Yr([])),n=new Ia(e,t),r=new Ia(e,t+1);let i=Zs();return this.es.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new Ia(t,0),n=this.Zn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Ia{constructor(t,e){this.key=t,this.ls=e}static ts(t,e){return ui.comparator(t.key,e.key)||Vr(t.ls,e.ls)}static ns(t,e){return Vr(t.ls,e.ls)||ui.comparator(t.key,e.key)}}class Ca{constructor(t,e){this.Ht=t,this.referenceDelegate=e,this.In=[],this.fs=1,this.ds=new qs(Ia.ts)}checkEmpty(t){return ta.resolve(0===this.In.length)}addMutationBatch(t,e,n,r){const i=this.fs;this.fs++,this.In.length>0&&this.In[this.In.length-1];const s=new na(i,e,n,r);this.In.push(s);for(const e of r)this.ds=this.ds.add(new Ia(e.key,i)),this.Ht.addToCollectionParentIndex(t,e.key.path.popLast());return ta.resolve(s)}lookupMutationBatch(t,e){return ta.resolve(this.ws(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this._s(n),i=r<0?0:r;return ta.resolve(this.In.length>i?this.In[i]:null)}getHighestUnacknowledgedBatchId(){return ta.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(t){return ta.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Ia(e,0),r=new Ia(e,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([n,r],(t=>{const e=this.ws(t.ls);i.push(e)})),ta.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new qs(Vr);return e.forEach((t=>{const e=new Ia(t,0),r=new Ia(t,Number.POSITIVE_INFINITY);this.ds.forEachInRange([e,r],(t=>{n=n.add(t.ls)}))})),ta.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;ui.isDocumentKey(i)||(i=i.child(""));const s=new Ia(new ui(i),0);let o=new qs(Vr);return this.ds.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.ls)),!0)}),s),ta.resolve(this.gs(o))}gs(t){const e=[];return t.forEach((t=>{const n=this.ws(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){Dr(0===this.ys(e.batchId,"removed")),this.In.shift();let n=this.ds;return ta.forEach(e.mutations,(r=>{const i=new Ia(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.ds=n}))}te(t){}containsKey(t,e){const n=new Ia(e,0),r=this.ds.firstAfterOrEqual(n);return ta.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.In.length,ta.resolve()}ys(t,e){return this._s(t)}_s(t){return 0===this.In.length?0:t-this.In[0].batchId}ws(t){const e=this._s(t);return e<0||e>=this.In.length?null:this.In[e]}}class Sa{constructor(t,e){this.Ht=t,this.ps=e,this.docs=new Us(ui.comparator),this.size=0}addEntry(t,e,n){const r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Ht.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return ta.resolve(n?n.document.clone():Ci.newInvalidDocument(e))}getEntries(t,e){let n=zs();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.clone():Ci.newInvalidDocument(t))})),ta.resolve(n)}getDocumentsMatchingQuery(t,e,n){let r=zs();const i=new ui(e.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:t,value:{document:i,readTime:o}}=s.getNext();if(!e.path.isPrefixOf(t.path))break;o.compareTo(n)<=0||es(e,i)&&(r=r.insert(i.key,i.clone()))}return ta.resolve(r)}Ts(t,e){return ta.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new ka(this)}getSize(t){return ta.resolve(this.size)}}class ka extends class{constructor(){this.changes=new da((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}getReadTime(t){const e=this.changes.get(t);return e?e.readTime:Hr.min()}addEntry(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})}removeEntry(t,e=null){this.assertNotApplied(),this.changes.set(t,{document:Ci.newInvalidDocument(t),readTime:e})}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?ta.resolve(n.document):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}{constructor(t){super(),this.Se=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.document.isValidDocument()?e.push(this.Se.addEntry(t,r.document,this.getReadTime(n))):this.Se.removeEntry(n)})),ta.waitFor(e)}getFromCache(t,e){return this.Se.getEntry(t,e)}getAllFromCache(t,e){return this.Se.getEntries(t,e)}}class Da{constructor(t){this.persistence=t,this.Es=new da((t=>Di(t)),Ni),this.lastRemoteSnapshotVersion=Hr.min(),this.highestTargetId=0,this.Is=0,this.As=new Ta,this.targetCount=0,this.Rs=la.se()}forEachTarget(t,e){return this.Es.forEach(((t,n)=>e(n))),ta.resolve()}getLastRemoteSnapshotVersion(t){return ta.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ta.resolve(this.Is)}allocateTargetId(t){return this.highestTargetId=this.Rs.next(),ta.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Is&&(this.Is=e),ta.resolve()}ce(t){this.Es.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Rs=new la(e),this.highestTargetId=e),t.sequenceNumber>this.Is&&(this.Is=t.sequenceNumber)}addTargetData(t,e){return this.ce(e),this.targetCount+=1,ta.resolve()}updateTargetData(t,e){return this.ce(e),ta.resolve()}removeTargetData(t,e){return this.Es.delete(e.target),this.As.cs(e.targetId),this.targetCount-=1,ta.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Es.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Es.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),ta.waitFor(i).next((()=>r))}getTargetCount(t){return ta.resolve(this.targetCount)}getTargetData(t,e){const n=this.Es.get(e)||null;return ta.resolve(n)}addMatchingKeys(t,e,n){return this.As.ss(e,n),ta.resolve()}removeMatchingKeys(t,e,n){this.As.os(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),ta.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.As.cs(e),ta.resolve()}getMatchingKeysForTargetId(t,e){const n=this.As.hs(e);return ta.resolve(n)}containsKey(t,e){return ta.resolve(this.As.containsKey(e))}}class Na{constructor(t,e){this.bs={},this.Le=new jr(0),this.Be=!1,this.Be=!0,this.referenceDelegate=t(this),this.ze=new Da(this),this.Ht=new aa,this.He=function(t,e){return new Sa(t,e)}(this.Ht,(t=>this.referenceDelegate.Ps(t))),this.N=new sa(e),this.Je=new Ea(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(t){let e=this.bs[t.toKey()];return e||(e=new Ca(this.Ht,this.referenceDelegate),this.bs[t.toKey()]=e),e}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(t,e,n){Tr("MemoryPersistence","Starting transaction:",t);const r=new xa(this.Le.next());return this.referenceDelegate.vs(),n(r).next((t=>this.referenceDelegate.Vs(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}Ss(t,e){return ta.or(Object.values(this.bs).map((n=>()=>n.containsKey(t,e))))}}class xa extends class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}{constructor(t){super(),this.currentSequenceNumber=t}}class _a{constructor(t){this.persistence=t,this.Ds=new Ta,this.Cs=null}static Ns(t){return new _a(t)}get xs(){if(this.Cs)return this.Cs;throw kr()}addReference(t,e,n){return this.Ds.addReference(n,e),this.xs.delete(n.toString()),ta.resolve()}removeReference(t,e,n){return this.Ds.removeReference(n,e),this.xs.add(n.toString()),ta.resolve()}markPotentiallyOrphaned(t,e){return this.xs.add(e.toString()),ta.resolve()}removeTarget(t,e){this.Ds.cs(e.targetId).forEach((t=>this.xs.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.xs.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}vs(){this.Cs=new Set}Vs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ta.forEach(this.xs,(n=>{const r=ui.fromPath(n);return this.ks(t,r).next((t=>{t||e.removeEntry(r)}))})).next((()=>(this.Cs=null,e.apply(t))))}updateLimboDocument(t,e){return this.ks(t,e).next((t=>{t?this.xs.delete(e.toString()):this.xs.add(e.toString())}))}Ps(t){return 0}ks(t,e){return ta.or([()=>ta.resolve(this.Ds.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ss(t,e)])}}class La{constructor(){this.activeTargetIds=Xs()}Fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ms(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Os(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Pa{constructor(){this.yi=new La,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.yi.Fs(t),this.pi[t]||"not-current"}updateQueryState(t,e,n){this.pi[t]=e}removeLocalQueryTarget(t){this.yi.Ms(t)}isLocalQueryTarget(t){return this.yi.activeTargetIds.has(t)}clearQueryState(t){delete this.pi[t]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(t){return this.yi.activeTargetIds.has(t)}start(){return this.yi=new La,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}class Ma{Ti(t){}shutdown(){}}class Ra{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(t){this.bi.push(t)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){Tr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.bi)t(0)}Ri(){Tr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.bi)t(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ba={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Oa{constructor(t){this.vi=t.vi,this.Vi=t.Vi}Si(t){this.Di=t}Ci(t){this.Ni=t}onMessage(t){this.xi=t}close(){this.Vi()}send(t){this.vi(t)}ki(){this.Di()}$i(t){this.Ni(t)}Oi(t){this.xi(t)}}class ja extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.Fi=e+"://"+t.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(t,e,n,r){const i=this.Bi(t,e);Tr("RestConnection","Sending: ",i,n);const s={};return this.Ui(s,r),this.qi(t,i,s,n).then((t=>(Tr("RestConnection","Received: ",t),t)),(e=>{throw Cr("RestConnection",`${t} failed with error: `,e,"url: ",i,"request:",n),e}))}Ki(t,e,n,r){return this.Li(t,e,n,r)}Ui(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/"+Ar,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(const n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])}Bi(t,e){const n=Ba[t];return`${this.Fi}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}qi(t,e,n,r){return new Promise(((i,s)=>{const o=new yr;o.listenOnce(dr.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case hr.NO_ERROR:const e=o.getResponseJson();Tr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case hr.TIMEOUT:Tr("Connection",'RPC "'+t+'" timed out'),s(new _r(xr.DEADLINE_EXCEEDED,"Request time out"));break;case hr.HTTP_ERROR:const n=o.getStatus();if(Tr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const t=o.getResponseJson().error;if(t&&t.status&&t.message){const e=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(xr).indexOf(e)>=0?e:xr.UNKNOWN}(t.status);s(new _r(e,t.message))}else s(new _r(xr.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new _r(xr.UNAVAILABLE,"Connection failed."));break;default:kr()}}finally{Tr("Connection",'RPC "'+t+'" completed.')}}));const a=JSON.stringify(r);o.send(e,"POST",a,n,15)}))}ji(t,e){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=ur(),i=lr(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new pr({})),this.Ui(s.initMessageHeaders,e),(0,a.uI)()||(0,a.b$)()||(0,a.d)()||(0,a.w1)()||(0,a.Mn)()||(0,a.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");const o=n.join("");Tr("Connection","Creating WebChannel: "+o,s);const c=r.createWebChannel(o,s);let u=!1,l=!1;const h=new Oa({vi:t=>{l?Tr("Connection","Not sending because WebChannel is closed:",t):(u||(Tr("Connection","Opening WebChannel transport."),c.open(),u=!0),Tr("Connection","WebChannel sending:",t),c.send(t))},Vi:()=>c.close()}),d=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return d(c,gr.EventType.OPEN,(()=>{l||Tr("Connection","WebChannel transport opened.")})),d(c,gr.EventType.CLOSE,(()=>{l||(l=!0,Tr("Connection","WebChannel transport closed"),h.$i())})),d(c,gr.EventType.ERROR,(t=>{l||(l=!0,Cr("Connection","WebChannel transport errored:",t),h.$i(new _r(xr.UNAVAILABLE,"The operation could not be completed")))})),d(c,gr.EventType.MESSAGE,(t=>{var e;if(!l){const n=t.data[0];Dr(!!n);const r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Tr("Connection","WebChannel received error:",i);const t=i.status;let e=function(t){const e=Bs[t];if(void 0!==e)return js(e)}(t),n=i.message;void 0===e&&(e=xr.INTERNAL,n="Unknown error status: "+t+" with message "+i.message),l=!0,h.$i(new _r(e,n)),c.close()}else Tr("Connection","WebChannel received:",n),h.Oi(n)}})),d(i,fr.STAT_EVENT,(t=>{t.stat===mr.PROXY?Tr("Connection","Detected buffering proxy"):t.stat===mr.NOPROXY&&Tr("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.ki()}),0),h}}function Ua(){return"undefined"!=typeof document?document:null}function Fa(t){return new lo(t,!0)}class Va{constructor(t,e,n=1e3,r=1.5,i=6e4){this.Oe=t,this.timerId=e,this.Qi=n,this.Wi=r,this.Gi=i,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(t){this.cancel();const e=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),r=Math.max(0,e-n);r>0&&Tr("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,(()=>(this.Ji=Date.now(),t()))),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class qa{constructor(t,e,n,r,i,s,o){this.Oe=t,this.er=n,this.nr=r,this.sr=i,this.credentialsProvider=s,this.listener=o,this.state=0,this.ir=0,this.rr=null,this.cr=null,this.stream=null,this.ar=new Va(t,e)}ur(){return 1===this.state||5===this.state||this.hr()}hr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.lr()}async stop(){this.ur()&&await this.close(0)}dr(){this.state=0,this.ar.reset()}wr(){this.hr()&&null===this.rr&&(this.rr=this.Oe.enqueueAfterDelay(this.er,6e4,(()=>this._r())))}mr(t){this.gr(),this.stream.send(t)}async _r(){if(this.hr())return this.close(0)}gr(){this.rr&&(this.rr.cancel(),this.rr=null)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}async close(t,e){this.gr(),this.yr(),this.ar.cancel(),this.ir++,4!==t?this.ar.reset():e&&e.code===xr.RESOURCE_EXHAUSTED?(Ir(e.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),this.ar.Yi()):e&&e.code===xr.UNAUTHENTICATED&&3!==this.state&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.pr(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ci(e)}pr(){}auth(){this.state=1;const t=this.Tr(this.ir),e=this.ir;this.credentialsProvider.getToken().then((t=>{this.ir===e&&this.Er(t)}),(e=>{t((()=>{const t=new _r(xr.UNKNOWN,"Fetching auth token failed: "+e.message);return this.Ir(t)}))}))}Er(t){const e=this.Tr(this.ir);this.stream=this.Ar(t),this.stream.Si((()=>{e((()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.nr,1e4,(()=>(this.hr()&&(this.state=3),Promise.resolve()))),this.listener.Si())))})),this.stream.Ci((t=>{e((()=>this.Ir(t)))})),this.stream.onMessage((t=>{e((()=>this.onMessage(t)))}))}lr(){this.state=5,this.ar.Xi((async()=>{this.state=0,this.start()}))}Ir(t){return Tr("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Tr(t){return e=>{this.Oe.enqueueAndForget((()=>this.ir===t?e():(Tr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $a extends qa{constructor(t,e,n,r,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i),this.N=r}Ar(t){return this.sr.ji("Listen",t)}onMessage(t){this.ar.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:kr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.D?(Dr(void 0===e||"string"==typeof e),Jr.fromBase64String(e||"")):(Dr(void 0===e||e instanceof Uint8Array),Jr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?xr.UNKNOWN:js(t.code);return new _r(e,t.message||"")}(o);n=new ro(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=wo(t,r.document.name),s=po(r.document.updateTime),o=new Ti({mapValue:{fields:r.document.fields}}),a=Ci.newFoundDocument(i,s,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new eo(c,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=wo(t,r.document),s=r.readTime?po(r.readTime):Hr.min(),o=Ci.newNoDocument(i,s),a=r.removedTargetIds||[];n=new eo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=wo(t,r.document),s=r.removedTargetIds||[];n=new eo([],s,i,null)}else{if(!("filter"in e))return kr();{e.filter;const t=e.filter;t.targetId;const r=t.count||0,i=new Rs(r),s=t.targetId;n=new no(s,i)}}return n}(this.N,t),n=function(t){if(!("targetChange"in t))return Hr.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Hr.min():e.readTime?po(e.readTime):Hr.min()}(t);return this.listener.Rr(e,n)}br(t){const e={};e.database=bo(this.N),e.addTarget=function(t,e){let n;const r=e.target;return n=xi(r)?{documents:Io(t,r)}:{query:Co(t,r)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=fo(t,e.resumeToken):e.snapshotVersion.compareTo(Hr.min())>0&&(n.readTime=ho(t,e.snapshotVersion.toTimestamp())),n}(this.N,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return kr()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.N,t);n&&(e.labels=n),this.mr(e)}Pr(t){const e={};e.database=bo(this.N),e.removeTarget=t,this.mr(e)}}class Ha extends qa{constructor(t,e,n,r,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i),this.N=r,this.vr=!1}get Vr(){return this.vr}start(){this.vr=!1,this.lastStreamToken=void 0,super.start()}pr(){this.vr&&this.Sr([])}Ar(t){return this.sr.ji("Write",t)}onMessage(t){if(Dr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.vr){this.ar.reset();const e=function(t,e){return t&&t.length>0?(Dr(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?po(t.updateTime):po(e);return n.isEqual(Hr.min())&&(n=po(e)),new ws(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=po(t.commitTime);return this.listener.Dr(n,e)}return Dr(!t.writeResults||0===t.writeResults.length),this.vr=!0,this.listener.Cr()}Nr(){const t={};t.database=bo(this.N),this.mr(t)}Sr(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof Ds)n={update:To(t,e.key,e.value)};else if(e instanceof Ps)n={delete:vo(t,e.key)};else if(e instanceof Ns)n={update:To(t,e.key,e.data),updateMask:Bo(e.fieldMask)};else{if(!(e instanceof Ms))return kr();n={verify:vo(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof hs)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ds)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ms)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof gs)return{fieldPath:e.field.canonicalString(),increment:n.C};throw kr()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:mo(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:kr()}(t,e.precondition)),n}(this.N,t)))};this.mr(e)}}class za extends class{}{constructor(t,e,n){super(),this.credentials=t,this.sr=e,this.N=n,this.kr=!1}$r(){if(this.kr)throw new _r(xr.FAILED_PRECONDITION,"The client has already been terminated.")}Li(t,e,n){return this.$r(),this.credentials.getToken().then((r=>this.sr.Li(t,e,n,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===xr.UNAUTHENTICATED&&this.credentials.invalidateToken(),t):new _r(xr.UNKNOWN,t.toString())}))}Ki(t,e,n){return this.$r(),this.credentials.getToken().then((r=>this.sr.Ki(t,e,n,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===xr.UNAUTHENTICATED&&this.credentials.invalidateToken(),t):new _r(xr.UNKNOWN,t.toString())}))}terminate(){this.kr=!0}}class Wa{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Or=0,this.Fr=null,this.Mr=!0}Lr(){0===this.Or&&(this.Br("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.Fr=null,this.Ur("Backend didn't respond within 10 seconds."),this.Br("Offline"),Promise.resolve()))))}qr(t){"Online"===this.state?this.Br("Unknown"):(this.Or++,this.Or>=1&&(this.Kr(),this.Ur(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.Br("Offline")))}set(t){this.Kr(),this.Or=0,"Online"===t&&(this.Mr=!1),this.Br(t)}Br(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}Ur(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Mr?(Ir(e),this.Mr=!1):Tr("OnlineStateTracker",e)}Kr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class Ka{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.jr=[],this.Qr=new Map,this.Wr=new Set,this.Gr=[],this.zr=i,this.zr.Ti((t=>{n.enqueueAndForget((async()=>{nc(this)&&(Tr("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Nr(t);e.Wr.add(4),await Ya(e),e.Hr.set("Unknown"),e.Wr.delete(4),await Ga(e)}(this))}))})),this.Hr=new Wa(n,r)}}async function Ga(t){if(nc(t))for(const e of t.Gr)await e(!0)}async function Ya(t){for(const e of t.Gr)await e(!1)}function Za(t,e){const n=Nr(t);n.Qr.has(e.targetId)||(n.Qr.set(e.targetId,e),ec(n)?tc(n):vc(n).hr()&&Xa(n,e))}function Qa(t,e){const n=Nr(t),r=vc(n);n.Qr.delete(e),r.hr()&&Ja(n,e),0===n.Qr.size&&(r.hr()?r.wr():nc(n)&&n.Hr.set("Unknown"))}function Xa(t,e){t.Jr.Y(e.targetId),vc(t).br(e)}function Ja(t,e){t.Jr.Y(e),vc(t).Pr(e)}function tc(t){t.Jr=new so({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>t.Qr.get(e)||null}),vc(t).start(),t.Hr.Lr()}function ec(t){return nc(t)&&!vc(t).ur()&&t.Qr.size>0}function nc(t){return 0===Nr(t).Wr.size}function rc(t){t.Jr=void 0}async function ic(t){t.Qr.forEach(((e,n)=>{Xa(t,e)}))}async function sc(t,e){rc(t),ec(t)?(t.Hr.qr(e),tc(t)):t.Hr.set("Unknown")}async function oc(t,e,n){if(t.Hr.set("Online"),e instanceof ro&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.Qr.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.Qr.delete(r),t.Jr.removeTarget(r))}(t,e)}catch(n){Tr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await ac(t,n)}else if(e instanceof eo?t.Jr.rt(e):e instanceof no?t.Jr.ft(e):t.Jr.at(e),!n.isEqual(Hr.min()))try{const e=await va(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Jr._t(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.Qr.get(r);i&&t.Qr.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((e=>{const n=t.Qr.get(e);if(!n)return;t.Qr.set(e,n.withResumeToken(Jr.EMPTY_BYTE_STRING,n.snapshotVersion)),Ja(t,e);const r=new ia(n.target,e,1,n.sequenceNumber);Xa(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Tr("RemoteStore","Failed to raise snapshot:",e),await ac(t,e)}}async function ac(t,e,n){if(!ea(e))throw e;t.Wr.add(1),await Ya(t),t.Hr.set("Offline"),n||(n=()=>va(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Tr("RemoteStore","Retrying IndexedDB access"),await n(),t.Wr.delete(1),await Ga(t)}))}function cc(t,e){return e().catch((n=>ac(t,n,e)))}async function uc(t){const e=Nr(t),n=wc(e);let r=e.jr.length>0?e.jr[e.jr.length-1].batchId:-1;for(;lc(e);)try{const t=await wa(e.localStore,r);if(null===t){0===e.jr.length&&n.wr();break}r=t.batchId,hc(e,t)}catch(t){await ac(e,t)}dc(e)&&fc(e)}function lc(t){return nc(t)&&t.jr.length<10}function hc(t,e){t.jr.push(e);const n=wc(t);n.hr()&&n.Vr&&n.Sr(e.mutations)}function dc(t){return nc(t)&&!wc(t).ur()&&t.jr.length>0}function fc(t){wc(t).start()}async function mc(t){wc(t).Nr()}async function pc(t){const e=wc(t);for(const n of t.jr)e.Sr(n.mutations)}async function gc(t,e,n){const r=t.jr.shift(),i=ra.from(r,e,n);await cc(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await uc(t)}async function yc(t,e){e&&wc(t).Vr&&await async function(t,e){if(function(t){switch(t){default:return kr();case xr.CANCELLED:case xr.UNKNOWN:case xr.DEADLINE_EXCEEDED:case xr.RESOURCE_EXHAUSTED:case xr.INTERNAL:case xr.UNAVAILABLE:case xr.UNAUTHENTICATED:return!1;case xr.INVALID_ARGUMENT:case xr.NOT_FOUND:case xr.ALREADY_EXISTS:case xr.PERMISSION_DENIED:case xr.FAILED_PRECONDITION:case xr.ABORTED:case xr.OUT_OF_RANGE:case xr.UNIMPLEMENTED:case xr.DATA_LOSS:return!0}}(n=e.code)&&n!==xr.ABORTED){const n=t.jr.shift();wc(t).dr(),await cc(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await uc(t)}var n}(t,e),dc(t)&&fc(t)}function vc(t){return t.Yr||(t.Yr=function(t,e,n){const r=Nr(t);return r.$r(),new $a(e,r.sr,r.credentials,r.N,n)}(t.datastore,t.asyncQueue,{Si:ic.bind(null,t),Ci:sc.bind(null,t),Rr:oc.bind(null,t)}),t.Gr.push((async e=>{e?(t.Yr.dr(),ec(t)?tc(t):t.Hr.set("Unknown")):(await t.Yr.stop(),rc(t))}))),t.Yr}function wc(t){return t.Xr||(t.Xr=function(t,e,n){const r=Nr(t);return r.$r(),new Ha(e,r.sr,r.credentials,r.N,n)}(t.datastore,t.asyncQueue,{Si:mc.bind(null,t),Ci:yc.bind(null,t),Cr:pc.bind(null,t),Dr:gc.bind(null,t)}),t.Gr.push((async e=>{e?(t.Xr.dr(),await uc(t)):(await t.Xr.stop(),t.jr.length>0&&(Tr("RemoteStore",`Stopping write stream with ${t.jr.length} pending writes`),t.jr=[]))}))),t.Xr}class Ac{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new Ac(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _r(xr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bc(t,e){if(Ir("AsyncQueue",`${e}: ${t}`),ea(t))return new _r(xr.UNAVAILABLE,`${e}: ${t}`);throw t}class Ec{constructor(t){this.comparator=t?(e,n)=>t(e,n)||ui.comparator(e.key,n.key):(t,e)=>ui.comparator(t.key,e.key),this.keyedMap=Ks(),this.sortedSet=new Us(this.comparator)}static emptySet(t){return new Ec(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Ec))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Ec;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class Tc{constructor(){this.Zr=new Us(ui.comparator)}track(t){const e=t.doc.key,n=this.Zr.get(e);n?0!==t.type&&3===n.type?this.Zr=this.Zr.insert(e,t):3===t.type&&1!==n.type?this.Zr=this.Zr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Zr=this.Zr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Zr=this.Zr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Zr=this.Zr.remove(e):1===t.type&&2===n.type?this.Zr=this.Zr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Zr=this.Zr.insert(e,{type:2,doc:t.doc}):kr():this.Zr=this.Zr.insert(e,t)}eo(){const t=[];return this.Zr.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Ic{constructor(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(t,e,n,r){const i=[];return e.forEach((t=>{i.push({type:0,doc:t})})),new Ic(t,e,Ec.emptySet(e),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Xi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class Cc{constructor(){this.no=void 0,this.listeners=[]}}class Sc{constructor(){this.queries=new da((t=>Ji(t)),Xi),this.onlineState="Unknown",this.so=new Set}}function kc(t,e){const n=Nr(t);let r=!1;for(const t of e){const e=t.query,i=n.queries.get(e);if(i){for(const e of i.listeners)e.ro(t)&&(r=!0);i.no=t}}r&&Nc(n)}function Dc(t,e,n){const r=Nr(t),i=r.queries.get(e);if(i)for(const t of i.listeners)t.onError(n);r.queries.delete(e)}function Nc(t){t.so.forEach((t=>{t.next()}))}class xc{constructor(t,e,n){this.query=t,this.oo=e,this.co=!1,this.ao=null,this.onlineState="Unknown",this.options=n||{}}ro(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Ic(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.co?this.uo(t)&&(this.oo.next(t),e=!0):this.ho(t,this.onlineState)&&(this.lo(t),e=!0),this.ao=t,e}onError(t){this.oo.error(t)}io(t){this.onlineState=t;let e=!1;return this.ao&&!this.co&&this.ho(this.ao,t)&&(this.lo(this.ao),e=!0),e}ho(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return!(this.options.fo&&n||t.docs.isEmpty()&&"Offline"!==e)}uo(t){if(t.docChanges.length>0)return!0;const e=this.ao&&this.ao.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}lo(t){t=Ic.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.co=!0,this.oo.next(t)}}class _c{constructor(t){this.key=t}}class Lc{constructor(t){this.key=t}}class Pc{constructor(t,e){this.query=t,this.po=e,this.To=null,this.current=!1,this.Eo=Zs(),this.mutatedKeys=Zs(),this.Io=ns(t),this.Ao=new Ec(this.Io)}get Ro(){return this.po}bo(t,e){const n=e?e.Po:new Tc,r=e?e.Ao:this.Ao;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=Gi(this.query)&&r.size===this.query.limit?r.last():null,c=Yi(this.query)&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const u=r.get(t),l=es(this.query,e)?e:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.vo(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.Io(l,a)>0||c&&this.Io(l,c)<0)&&(o=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))})),Gi(this.query)||Yi(this.query))for(;s.size>this.query.limit;){const t=Gi(this.query)?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{Ao:s,Po:n,Ln:o,mutatedKeys:i}}vo(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const r=this.Ao;this.Ao=t.Ao,this.mutatedKeys=t.mutatedKeys;const i=t.Po.eo();i.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kr()}};return n(t)-n(e)}(t.type,e.type)||this.Io(t.doc,e.doc))),this.Vo(n);const s=e?this.So():[],o=0===this.Eo.size&&this.current?1:0,a=o!==this.To;return this.To=o,0!==i.length||a?{snapshot:new Ic(this.query,t.Ao,r,i,t.mutatedKeys,0===o,a,!1),Do:s}:{Do:s}}io(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ao:this.Ao,Po:new Tc,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{Do:[]}}Co(t){return!this.po.has(t)&&!!this.Ao.has(t)&&!this.Ao.get(t).hasLocalMutations}Vo(t){t&&(t.addedDocuments.forEach((t=>this.po=this.po.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.po=this.po.delete(t))),this.current=t.current)}So(){if(!this.current)return[];const t=this.Eo;this.Eo=Zs(),this.Ao.forEach((t=>{this.Co(t.key)&&(this.Eo=this.Eo.add(t.key))}));const e=[];return t.forEach((t=>{this.Eo.has(t)||e.push(new Lc(t))})),this.Eo.forEach((n=>{t.has(n)||e.push(new _c(n))})),e}No(t){this.po=t.Gn,this.Eo=Zs();const e=this.bo(t.documents);return this.applyChanges(e,!0)}xo(){return Ic.fromInitialDocuments(this.query,this.Ao,this.mutatedKeys,0===this.To)}}class Mc{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Rc{constructor(t){this.key=t,this.ko=!1}}class Bc{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.$o={},this.Oo=new da((t=>Ji(t)),Xi),this.Fo=new Map,this.Mo=new Set,this.Lo=new Us(ui.comparator),this.Bo=new Map,this.Uo=new Ta,this.qo={},this.Ko=new Map,this.jo=la.ie(),this.onlineState="Unknown",this.Qo=void 0}get isPrimaryClient(){return!0===this.Qo}}async function Oc(t,e){const n=function(t){const e=Nr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Uc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jc.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Vc.bind(null,e),e.$o.Rr=kc.bind(null,e.eventManager),e.$o.Go=Dc.bind(null,e.eventManager),e}(t);let r,i;const s=n.Oo.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.xo();else{const t=await function(t,e){const n=Nr(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.ze.getTargetData(t,e).next((i=>i?(r=i,ta.resolve(r)):n.ze.allocateTargetId(t).next((i=>(r=new ia(e,i,0,t.currentSequenceNumber),n.ze.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.Un.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(t.targetId,t),n.qn.set(e,t.targetId)),t}))}(n.localStore,Qi(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);r=t.targetId,i=await async function(t,e,n,r){t.Wo=(e,n,r)=>async function(t,e,n,r){let i=e.view.bo(n);i.Ln&&(i=await ba(t.localStore,e.query,!1).then((({documents:t})=>e.view.bo(t,i))));const s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s);return Gc(t,e.targetId,o.Do),o.snapshot}(t,e,n,r);const i=await ba(t.localStore,e,!0),s=new Pc(e,i.Gn),o=s.bo(i.documents),a=to.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),c=s.applyChanges(o,t.isPrimaryClient,a);Gc(t,n,c.Do);const u=new Mc(e,n,s);return t.Oo.set(e,u),t.Fo.has(n)?t.Fo.get(n).push(e):t.Fo.set(n,[e]),c.snapshot}(n,e,r,"current"===s),n.isPrimaryClient&&Za(n.remoteStore,t)}return i}async function jc(t,e){const n=Nr(t),r=n.Oo.get(e),i=n.Fo.get(r.targetId);if(i.length>1)return n.Fo.set(r.targetId,i.filter((t=>!Xi(t,e)))),void n.Oo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Aa(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Qa(n.remoteStore,r.targetId),Wc(n,r.targetId)})).catch(ha)):(Wc(n,r.targetId),await Aa(n.localStore,r.targetId,!0))}async function Uc(t,e){const n=Nr(t);try{const t=await function(t,e){const n=Nr(t),r=e.snapshotVersion;let i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;const o=[];e.targetChanges.forEach(((e,s)=>{const a=i.get(s);if(!a)return;o.push(n.ze.removeMatchingKeys(t,e.removedDocuments,s).next((()=>n.ze.addMatchingKeys(t,e.addedDocuments,s))));const c=e.resumeToken;if(c.approximateByteSize()>0){const u=a.withResumeToken(c,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(s,u),function(t,e,n){return Dr(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,u,e)&&o.push(n.ze.updateTargetData(t,u))}}));let a=zs();if(e.documentUpdates.forEach(((r,i)=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(function(t,e,n,r,i){let s=Zs();return n.forEach((t=>s=s.add(t))),e.getEntries(t,s).next((t=>{let s=zs();return n.forEach(((n,o)=>{const a=t.get(n),c=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Hr.min())?(e.removeEntry(n,c),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,c),s=s.insert(n,o)):Tr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),s}))}(t,s,e.documentUpdates,r,void 0).next((t=>{a=t}))),!r.isEqual(Hr.min())){const e=n.ze.getLastRemoteSnapshotVersion(t).next((e=>n.ze.setTargetsMetadata(t,t.currentSequenceNumber,r)));o.push(e)}return ta.waitFor(o).next((()=>s.apply(t))).next((()=>n.Qn.vn(t,a))).next((()=>a))})).then((t=>(n.Un=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.Bo.get(e);r&&(Dr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.ko=!0:t.modifiedDocuments.size>0?Dr(r.ko):t.removedDocuments.size>0&&(Dr(r.ko),r.ko=!1))})),await Qc(n,t,e)}catch(t){await ha(t)}}function Fc(t,e,n){const r=Nr(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.Oo.forEach(((n,r)=>{const i=r.view.io(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=Nr(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.io(e)&&(r=!0)})),r&&Nc(n)}(r.eventManager,e),t.length&&r.$o.Rr(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Vc(t,e,n){const r=Nr(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Bo.get(e),s=i&&i.key;if(s){let t=new Us(ui.comparator);t=t.insert(s,Ci.newNoDocument(s,Hr.min()));const n=Zs().add(s),i=new Js(Hr.min(),new Map,new qs(Vr),t,n);await Uc(r,i),r.Lo=r.Lo.remove(s),r.Bo.delete(e),Zc(r)}else await Aa(r.localStore,e,!1).then((()=>Wc(r,e,n))).catch(ha)}async function qc(t,e){const n=Nr(t),r=e.batch.batchId;try{const t=await function(t,e){const n=Nr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const r=e.batch.keys(),i=n.jn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const i=n.batch,s=i.keys();let o=ta.resolve();return s.forEach((t=>{o=o.next((()=>r.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);Dr(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),o.next((()=>t.In.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n.In.performConsistencyCheck(t))).next((()=>n.Qn.Pn(t,r)))}))}(n.localStore,e);zc(n,r,null),Hc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qc(n,t)}catch(t){await ha(t)}}async function $c(t,e,n){const r=Nr(t);try{const t=await function(t,e){const n=Nr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let r;return n.In.lookupMutationBatch(t,e).next((e=>(Dr(null!==e),r=e.keys(),n.In.removeMutationBatch(t,e)))).next((()=>n.In.performConsistencyCheck(t))).next((()=>n.Qn.Pn(t,r)))}))}(r.localStore,e);zc(r,e,n),Hc(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Qc(r,t)}catch(n){await ha(n)}}function Hc(t,e){(t.Ko.get(e)||[]).forEach((t=>{t.resolve()})),t.Ko.delete(e)}function zc(t,e,n){const r=Nr(t);let i=r.qo[r.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.qo[r.currentUser.toKey()]=i}}function Wc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Fo.get(e))t.Oo.delete(r),n&&t.$o.Go(r,n);t.Fo.delete(e),t.isPrimaryClient&&t.Uo.cs(e).forEach((e=>{t.Uo.containsKey(e)||Kc(t,e)}))}function Kc(t,e){t.Mo.delete(e.path.canonicalString());const n=t.Lo.get(e);null!==n&&(Qa(t.remoteStore,n),t.Lo=t.Lo.remove(e),t.Bo.delete(n),Zc(t))}function Gc(t,e,n){for(const r of n)r instanceof _c?(t.Uo.addReference(r.key,e),Yc(t,r)):r instanceof Lc?(Tr("SyncEngine","Document no longer in limbo: "+r.key),t.Uo.removeReference(r.key,e),t.Uo.containsKey(r.key)||Kc(t,r.key)):kr()}function Yc(t,e){const n=e.key,r=n.path.canonicalString();t.Lo.get(n)||t.Mo.has(r)||(Tr("SyncEngine","New document in limbo: "+n),t.Mo.add(r),Zc(t))}function Zc(t){for(;t.Mo.size>0&&t.Lo.size<t.maxConcurrentLimboResolutions;){const e=t.Mo.values().next().value;t.Mo.delete(e);const n=new ui(Yr.fromString(e)),r=t.jo.next();t.Bo.set(r,new Rc(n)),t.Lo=t.Lo.insert(n,r),Za(t.remoteStore,new ia(Qi(Ki(n.path)),r,2,jr.T))}}async function Qc(t,e,n){const r=Nr(t),i=[],s=[],o=[];r.Oo.isEmpty()||(r.Oo.forEach(((t,a)=>{o.push(r.Wo(a,e,n).then((t=>{if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);const e=ma.kn(a.targetId,t);s.push(e)}})))})),await Promise.all(o),r.$o.Rr(i),await async function(t,e){const n=Nr(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>ta.forEach(e,(e=>ta.forEach(e.Nn,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>ta.forEach(e.xn,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!ea(t))throw t;Tr("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.Un.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Un=n.Un.insert(e,i)}}}(r.localStore,s))}async function Xc(t,e){const n=Nr(t);if(!n.currentUser.isEqual(e)){Tr("SyncEngine","User change. New user:",e.toKey());const t=await ya(n.localStore,e);n.currentUser=e,function(t,e){t.Ko.forEach((t=>{t.forEach((t=>{t.reject(new _r(xr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ko.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Qc(n,t.Wn)}}function Jc(t,e){const n=Nr(t),r=n.Bo.get(e);if(r&&r.ko)return Zs().add(r.key);{let t=Zs();const r=n.Fo.get(e);if(!r)return t;for(const e of r){const r=n.Oo.get(e);t=t.unionWith(r.view.Ro)}return t}}function tu(t){const e=Nr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qc.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$c.bind(null,e),e}class eu{constructor(){this.synchronizeTabs=!1}async initialize(t){this.N=Fa(t.databaseInfo.databaseId),this.sharedClientState=this.Ho(t),this.persistence=this.Jo(t),await this.persistence.start(),this.gcScheduler=this.Yo(t),this.localStore=this.Xo(t)}Yo(t){return null}Xo(t){return function(t,e,n,r){return new ga(t,e,n,r)}(this.persistence,new pa,t.initialUser,this.N)}Jo(t){return new Na(_a.Ns,this.N)}Ho(t){return new Pa}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class nu{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Fc(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xc.bind(null,this.syncEngine),await async function(t,e){const n=Nr(t);e?(n.Wr.delete(2),await Ga(n)):e||(n.Wr.add(2),await Ya(n),n.Hr.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Sc}createDatastore(t){const e=Fa(t.databaseInfo.databaseId),n=(r=t.databaseInfo,new ja(r));var r;return function(t,e,n){return new za(t,e,n)}(t.credentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=t=>Fc(this.syncEngine,t,0),s=Ra.bt()?new Ra:new Ma,new Ka(e,n,r,i,s);var e,n,r,i,s}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new Bc(t,e,n,r,i,s);return o&&(a.Qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=Nr(t);Tr("RemoteStore","RemoteStore shutting down."),e.Wr.add(5),await Ya(e),e.zr.shutdown(),e.Hr.set("Unknown")}(this.remoteStore)}}class ru{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.tc(this.observer.next,t)}error(t){this.observer.error?this.tc(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}ec(){this.muted=!0}tc(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class iu{constructor(t,e,n){this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=wr.UNAUTHENTICATED,this.clientId=Fr.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(e,(async t=>{Tr("FirestoreClient","Received user=",t.uid),await this.credentialListener(t),this.user=t}))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.credentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _r(xr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.shutdown(),t.resolve()}catch(e){const n=bc(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function su(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){return t.offlineComponents||(Tr("FirestoreClient","Using default OfflineComponentProvider"),await async function(t,e){t.asyncQueue.verifyOperationInProgress(),Tr("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await ya(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t.offlineComponents=e}(t,new eu)),t.offlineComponents}(t);Tr("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener((t=>async function(t,e){const n=Nr(t);n.asyncQueue.verifyOperationInProgress(),Tr("RemoteStore","RemoteStore received new credentials");const r=nc(n);n.Wr.add(3),await Ya(n),r&&n.Hr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Wr.delete(3),await Ga(n)}(e.remoteStore,t))),t.onlineComponents=e}async function ou(t){return t.onlineComponents||(Tr("FirestoreClient","Using default OnlineComponentProvider"),await su(t,new nu)),t.onlineComponents}async function au(t){const e=await ou(t),n=e.eventManager;return n.onListen=Oc.bind(null,e.syncEngine),n.onUnlisten=jc.bind(null,e.syncEngine),n}function cu(t,e,n={}){const r=new Lr;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new ru({next:n=>{e.enqueueAndForget((()=>async function(t,e){const n=Nr(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const t=s.listeners.indexOf(e);t>=0&&(s.listeners.splice(t,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}(t,o))),n.fromCache&&"server"===r.source?i.reject(new _r(xr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new xc(n,s,{includeMetadataChanges:!0,fo:!0});return async function(t,e){const n=Nr(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Cc),i)try{s.no=await n.onListen(r)}catch(t){const n=bc(t,`Initialization of query '${ts(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,s),s.listeners.push(e),e.io(n.onlineState),s.no&&e.ro(s.no)&&Nc(n)}(t,o)}(await au(t),t.asyncQueue,e,n,r))),r.promise}class uu{constructor(t,e,n,r,i,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class lu{constructor(t,e){this.projectId=t,this.database=e||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof lu&&t.projectId===this.projectId&&t.database===this.database}}const hu=new Map;function du(t,e,n){if(!n)throw new _r(xr.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fu(t){if(!ui.isDocumentKey(t))throw new _r(xr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mu(t){if(ui.isDocumentKey(t))throw new _r(xr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pu(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":kr()}function gu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _r(xr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pu(t);throw new _r(xr.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class yu{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new _r(xr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new _r(xr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(t,e,n,r){if(!0===e&&!0===r)throw new _r(xr.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class vu{constructor(t,e){this._credentials=e,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yu({}),this._settingsFrozen=!1,t instanceof lu?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new _r(xr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lu(t.options.projectId)}(t))}get app(){if(!this._app)throw new _r(xr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new _r(xr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yu(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Mr;switch(t.type){case"gapi":const e=t.client;return Dr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Or(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new _r(xr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=hu.get(t);e&&(Tr("ComponentProvider","Removing Datastore"),hu.delete(t),e.terminate())}(this),Promise.resolve()}}class wu{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new wu(this.firestore,t,this._key)}}class Au{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Au(this.firestore,t,this._query)}}class bu extends Au{constructor(t,e,n){super(t,e,Ki(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new wu(this.firestore,null,new ui(t))}withConverter(t){return new bu(this.firestore,t,this._path)}}function Eu(t,e,...n){if(t=(0,a.m9)(t),du("collection","path",e),t instanceof vu){const r=Yr.fromString(e,...n);return mu(r),new bu(t,null,r)}{if(!(t instanceof wu||t instanceof bu))throw new _r(xr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Yr.fromString(e,...n));return mu(r),new bu(t.firestore,null,r)}}function Tu(t,e,...n){if(t=(0,a.m9)(t),1===arguments.length&&(e=Fr.I()),du("doc","path",e),t instanceof vu){const r=Yr.fromString(e,...n);return fu(r),new wu(t,null,new ui(r))}{if(!(t instanceof wu||t instanceof bu))throw new _r(xr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Yr.fromString(e,...n));return fu(r),new wu(t.firestore,t instanceof bu?t.converter:null,new ui(r))}}class Iu{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Tc=null,this.Ec=!1,this.Ic=!1,this.Ac=[],this.ar=new Va(this,"async_queue_retry"),this.Rc=()=>{const t=Ua();t&&Tr("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ar.tr()};const t=Ua();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Rc)}get isShuttingDown(){return this.gc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.bc(),this.Pc(t)}enterRestrictedMode(t){if(!this.gc){this.gc=!0,this.Ic=t||!1;const e=Ua();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Rc)}}enqueue(t){if(this.bc(),this.gc)return new Promise((()=>{}));const e=new Lr;return this.Pc((()=>this.gc&&this.Ic?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.mc.push(t),this.vc())))}async vc(){if(0!==this.mc.length){try{await this.mc[0](),this.mc.shift(),this.ar.reset()}catch(t){if(!ea(t))throw t;Tr("AsyncQueue","Operation failed with retryable error: "+t)}this.mc.length>0&&this.ar.Xi((()=>this.vc()))}}Pc(t){const e=this._c.then((()=>(this.Ec=!0,t().catch((t=>{this.Tc=t,this.Ec=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw Ir("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Ec=!1,t))))));return this._c=e,e}enqueueAfterDelay(t,e,n){this.bc(),this.Ac.indexOf(t)>-1&&(e=0);const r=Ac.createAndSchedule(this,t,e,n,(t=>this.Vc(t)));return this.yc.push(r),r}bc(){this.Tc&&kr()}verifyOperationInProgress(){}async Sc(){let t;do{t=this._c,await t}while(t!==this._c)}Dc(t){for(const e of this.yc)if(e.timerId===t)return!0;return!1}Cc(t){return this.Sc().then((()=>{this.yc.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.yc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Sc()}))}Nc(t){this.Ac.push(t)}Vc(t){const e=this.yc.indexOf(t);this.yc.splice(e,1)}}class Cu extends vu{constructor(t,e){super(t,e),this.type="firestore",this._queue=new Iu,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Du(this),this._firestoreClient.terminate()}}function Su(t=(0,i.Mq)()){return(0,i.qX)(t,"firestore").getImmediate()}function ku(t){return t._firestoreClient||Du(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Du(t){var e;const n=t._freezeSettings(),r=function(t,e,n,r){return new uu(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new iu(t._credentials,t._queue,r)}class Nu{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new _r(xr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class xu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new xu(Jr.fromBase64String(t))}catch(t){throw new _r(xr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new xu(Jr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class _u{constructor(t){this._methodName=t}}class Lu{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new _r(xr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new _r(xr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Vr(this._lat,t._lat)||Vr(this._long,t._long)}}const Pu=/^__.*__$/;class Mu{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Ns(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ds(t,this.data,e,this.fieldTransforms)}}class Ru{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Ns(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Bu(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kr()}}class Ou{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.N=n,this.ignoreUndefinedProperties=r,void 0===i&&this.xc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get kc(){return this.settings.kc}$c(t){return new Ou(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.$c({path:n,Fc:!1});return r.Mc(t),r}Lc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.$c({path:n,Fc:!1});return r.xc(),r}Bc(t){return this.$c({path:void 0,Fc:!0})}Uc(t){return Qu(t,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Kc)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}xc(){if(this.path)for(let t=0;t<this.path.length;t++)this.Mc(this.path.get(t))}Mc(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(Bu(this.kc)&&Pu.test(t))throw this.Uc('Document fields cannot begin and end with "__"')}}class ju{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.N=n||Fa(t)}jc(t,e,n,r=!1){return new Ou({kc:t,methodName:e,Kc:n,path:Qr.emptyPath(),Fc:!1,qc:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Uu(t){const e=t._freezeSettings(),n=Fa(t._databaseId);return new ju(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Fu(t,e,n,r,i,s={}){const o=t.jc(s.merge||s.mergeFields?2:0,e,n,i);Ku("Data must be an object, but it was:",o,r);const a=zu(r,o);let c,u;if(s.merge)c=new Xr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const r of s.mergeFields){const i=Gu(e,r,n);if(!o.contains(i))throw new _r(xr.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Xu(t,i)||t.push(i)}c=new Xr(t),u=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,u=o.fieldTransforms;return new Mu(new Ti(a),c,u)}class Vu extends _u{_toFieldTransform(t){if(2!==t.kc)throw 1===t.kc?t.Uc(`${this._methodName}() can only appear at the top level of your update data`):t.Uc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Vu}}function qu(t,e,n,r){const i=t.jc(1,e,n);Ku("Data must be an object, but it was:",i,r);const s=[],o=Ti.empty();Wr(r,((t,r)=>{const c=Zu(e,t,n);r=(0,a.m9)(r);const u=i.Lc(c);if(r instanceof Vu)s.push(c);else{const t=Hu(r,u);null!=t&&(s.push(c),o.set(c,t))}}));const c=new Xr(s);return new Ru(o,c,i.fieldTransforms)}function $u(t,e,n,r,i,s){const o=t.jc(1,e,n),c=[Gu(e,r,n)],u=[i];if(s.length%2!=0)throw new _r(xr.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let t=0;t<s.length;t+=2)c.push(Gu(e,s[t])),u.push(s[t+1]);const l=[],h=Ti.empty();for(let t=c.length-1;t>=0;--t)if(!Xu(l,c[t])){const e=c[t];let n=u[t];n=(0,a.m9)(n);const r=o.Lc(e);if(n instanceof Vu)l.push(e);else{const t=Hu(n,r);null!=t&&(l.push(e),h.set(e,t))}}const d=new Xr(l);return new Ru(h,d,o.fieldTransforms)}function Hu(t,e){if(Wu(t=(0,a.m9)(t)))return Ku("Unsupported field value:",e,t),zu(t,e);if(t instanceof _u)return function(t,e){if(!Bu(e.kc))throw e.Uc(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Uc(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.kc)throw e.Uc("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=Hu(i,e.Bc(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,a.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return os(e.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=$r.fromDate(t);return{timestampValue:ho(e.N,n)}}if(t instanceof $r){const n=new $r(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ho(e.N,n)}}if(t instanceof Lu)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof xu)return{bytesValue:fo(e.N,t._byteString)};if(t instanceof wu){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Uc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:go(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc(`Unsupported field value: ${pu(t)}`)}(t,e)}function zu(t,e){const n={};return Kr(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wr(t,((t,r)=>{const i=Hu(r,e.Oc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Wu(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof $r||t instanceof Lu||t instanceof xu||t instanceof wu||t instanceof _u)}function Ku(t,e,n){if(!Wu(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=pu(n);throw"an object"===r?e.Uc(t+" a custom object"):e.Uc(t+" "+r)}}function Gu(t,e,n){if((e=(0,a.m9)(e))instanceof Nu)return e._internalPath;if("string"==typeof e)return Zu(t,e);throw Qu("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}const Yu=new RegExp("[~\\*/\\[\\]]");function Zu(t,e,n){if(e.search(Yu)>=0)throw Qu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Nu(...e.split("."))._internalPath}catch(r){throw Qu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new _r(xr.INVALID_ARGUMENT,a+t+c)}function Xu(t,e){return t.some((t=>t.isEqual(e)))}class Ju{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new wu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new tl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(el("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class tl extends Ju{data(){return super.data()}}function el(t,e){return"string"==typeof e?Zu(t,e):e instanceof Nu?e._internalPath:e._delegate._internalPath}class nl{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class rl extends Ju{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new il(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(el("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class il extends rl{data(t={}){return super.data(t)}}class sl{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new nl(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new il(this._firestore,this._userDataWriter,n.key,n,new nl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new _r(xr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>({type:"added",doc:new il(t._firestore,t._userDataWriter,n.doc.key,n.doc,new nl(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:e++})))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new il(t._firestore,t._userDataWriter,e.doc.key,e.doc,new nl(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:ol(e.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function ol(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kr()}}function al(t,...e){for(const n of e)t=n._apply(t);return t}function cl(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ul{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Uu(t)}set(t,e,n){this._verifyNotCommitted();const r=ll(t,this._firestore),i=cl(r.converter,e,n),s=Fu(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,As.none())),this}update(t,e,n,...r){this._verifyNotCommitted();const i=ll(t,this._firestore);let s;return s="string"==typeof(e=(0,a.m9)(e))||e instanceof Nu?$u(this._dataReader,"WriteBatch.update",i._key,e,n,r):qu(this._dataReader,"WriteBatch.update",i._key,e),this._mutations.push(s.toMutation(i._key,As.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=ll(t,this._firestore);return this._mutations=this._mutations.concat(new Ps(e._key,As.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _r(xr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ll(t,e){if((t=(0,a.m9)(t)).firestore!==e)throw new _r(xr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class hl extends class{convertValue(t,e="none"){switch(li(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ni(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ri(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw kr()}}convertObject(t,e){const n={};return Wr(t.fields,((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertGeoPoint(t){return new Lu(ni(t.latitude),ni(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=si(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(oi(t));default:return null}}convertTimestamp(t){const e=ei(t);return new $r(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Yr.fromString(t);Dr(Oo(n));const r=new lu(n.get(1),n.get(3)),i=new ui(n.popFirst(5));return r.isEqual(e)||Ir(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}{constructor(t){super(),this.firestore=t}convertBytes(t){return new xu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new wu(this.firestore,null,e)}}function dl(t){t=gu(t,Au);const e=gu(t.firestore,Cu),n=ku(e),r=new hl(e);return function(t){if(Yi(t)&&0===t.explicitOrderBy.length)throw new _r(xr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),cu(n,t._query).then((n=>new sl(e,r,t,n)))}function fl(t,e,n){t=gu(t,wu);const r=gu(t.firestore,Cu),i=cl(t.converter,e,n);return yl(r,[Fu(Uu(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,As.none())])}function ml(t,e,n,...r){t=gu(t,wu);const i=gu(t.firestore,Cu),s=Uu(i);let o;return o="string"==typeof(e=(0,a.m9)(e))||e instanceof Nu?$u(s,"updateDoc",t._key,e,n,r):qu(s,"updateDoc",t._key,e),yl(i,[o.toMutation(t._key,As.exists(!0))])}function pl(t){return yl(gu(t.firestore,Cu),[new Ps(t._key,As.none())])}function gl(t,e){const n=gu(t.firestore,Cu),r=Tu(t),i=cl(t.converter,e);return yl(n,[Fu(Uu(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,As.exists(!1))]).then((()=>r))}function yl(t,e){return function(t,e){const n=new Lr;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const r=tu(t);try{const t=await function(t,e){const n=Nr(t),r=$r.now(),i=e.reduce(((t,e)=>t.add(e.key)),Zs());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>n.Qn.Pn(t,i).next((i=>{s=i;const o=[];for(const t of e){const e=Cs(t,s.get(t.key));null!=e&&o.push(new Ns(t.key,e,Ii(e.value.mapValue),As.exists(!0)))}return n.In.addMutationBatch(t,r,o,e)})))).then((t=>(t.applyToLocalDocumentSet(s),{batchId:t.batchId,changes:s})))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.qo[t.currentUser.toKey()];r||(r=new Us(Vr)),r=r.insert(e,n),t.qo[t.currentUser.toKey()]=r}(r,t.batchId,n),await Qc(r,t.changes),await uc(r.remoteStore)}catch(t){const e=bc(t,"Failed to persist write");n.reject(e)}}(await function(t){return ou(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(ku(t),e)}function vl(t){return ku(t=gu(t,Cu)),new ul(t,(e=>yl(t,e)))}!function(t,e=!0){!function(t){Ar=t}(i.Jn),(0,i.Xd)(new s.wA("firestore",((t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=new Cu(r,new Rr(t.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:e},n),i._setSettings(n),i}),"PUBLIC")),(0,i.KN)(vr,"3.2.0",t),(0,i.KN)(vr,"3.2.0","esm2017")}()},548:(t,e,n)=>{var r=n(379),i=n.n(r),s=n(795),o=n.n(s),a=n(569),c=n.n(a),u=n(565),l=n.n(u),h=n(216),d=n.n(h),f=n(589),m=n.n(f),p=n(424),g={};g.styleTagTransform=m(),g.setAttributes=l(),g.insert=c().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d(),i()(p.Z,g),p.Z&&p.Z.locals&&p.Z.locals},547:(t,e,n)=>{var r=n(379),i=n.n(r),s=n(795),o=n.n(s),a=n(569),c=n.n(a),u=n(565),l=n.n(u),h=n(216),d=n.n(h),f=n(589),m=n.n(f),p=n(935),g={};g.styleTagTransform=m(),g.setAttributes=l(),g.insert=c().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d(),i()(p.Z,g),p.Z&&p.Z.locals&&p.Z.locals},163:(t,e,n)=>{var r=n(379),i=n.n(r),s=n(795),o=n.n(s),a=n(569),c=n.n(a),u=n(565),l=n.n(u),h=n(216),d=n.n(h),f=n(589),m=n.n(f),p=n(86),g={};g.styleTagTransform=m(),g.setAttributes=l(),g.insert=c().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d(),i()(p.Z,g),p.Z&&p.Z.locals&&p.Z.locals},25:(t,e,n)=>{var r=n(379),i=n.n(r),s=n(795),o=n.n(s),a=n(569),c=n.n(a),u=n(565),l=n.n(u),h=n(216),d=n.n(h),f=n(589),m=n.n(f),p=n(912),g={};g.styleTagTransform=m(),g.setAttributes=l(),g.insert=c().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d(),i()(p.Z,g),p.Z&&p.Z.locals&&p.Z.locals},57:(t,e,n)=>{var r=n(379),i=n.n(r),s=n(795),o=n.n(s),a=n(569),c=n.n(a),u=n(565),l=n.n(u),h=n(216),d=n.n(h),f=n(589),m=n.n(f),p=n(808),g={};g.styleTagTransform=m(),g.setAttributes=l(),g.insert=c().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d(),i()(p.Z,g),p.Z&&p.Z.locals&&p.Z.locals},379:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var s={},o=[],a=0;a<t.length;a++){var c=t[a],u=r.base?c[0]+r.base:c[0],l=s[u]||0,h="".concat(u," ").concat(l);s[u]=l+1;var d=n(h),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)e[d].references++,e[d].updater(f);else{var m=i(f,r);r.byIndex=a,e.splice(a,0,{identifier:h,updater:m,references:1})}o.push(h)}return o}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var s=r(t=t||[],i=i||{});return function(t){t=t||[];for(var o=0;o<s.length;o++){var a=n(s[o]);e[a].references--}for(var c=r(t,i),u=0;u<s.length;u++){var l=n(s[u]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}s=c}}},569:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},886:(t,e,n)=>{n.d(e,{Z:()=>r});const r={apiKey:"AIzaSyArZn8GEdJKwoNEfh5l4uNXUhd8XFu4878",authDomain:"odin-project-todo.firebaseapp.com",projectId:"odin-project-todo",storageBucket:"odin-project-todo.appspot.com",messagingSenderId:"421054148267",appId:"1:421054148267:web:959bd2fc01605b62ec91ee"}},138:(t,e,n)=>{n.a(t,(async t=>{var e=n(513),r=n(860),i=n(395),s=(n(548),t([i,e,r]));[i,e,r]=s.then?await s:s,(0,e.VN)("project","dueDate",!0),document.getElementById("home-controls-switch").addEventListener("click",e.Hy),document.getElementById("home-controls-add").addEventListener("click",r.w),(0,e.dB)(i.q.getProjects(),"project","dueDate",!0)}))},395:(t,e,n)=>{n.a(t,(async t=>{n.d(e,{ai:()=>l,iA:()=>h,dN:()=>d,mk:()=>f,CB:()=>m,P2:()=>p,yW:()=>g,s3:()=>y,M$:()=>v,q:()=>w});var r=n(503),i=n(591),s=n(886),o=n(816),a=n(259);(0,r.ZF)(s.Z);const c=(0,i.ad)(),u="todos",l=async(t,e)=>(await(0,i.oe)((0,i.JU)(c,u,t,"todos",e)),e),h=async t=>{const e=(0,i.IO)((0,i.hJ)(c,u,t,"todos"));return(await(0,i.PL)(e)).forEach((async e=>{await(0,i.oe)((0,i.JU)(c,u,t,"todos",e.id))})),await(0,i.oe)((0,i.JU)(c,u,t)),t},d=async(t,e=null,n)=>{const r="project"===t?(0,i.hJ)(c,u):(0,i.hJ)(c,u,e,"todos");return(await(0,i.ET)(r,{...n})).id},f=async(t,e)=>{const n=(0,i.JU)(c,u,t);return await(0,i.r7)(n,e),!0},m=async(t,e)=>{const n=(0,i.qs)(c),r=(0,i.JU)(c,u,t);return n.update(r,e),await n.commit(),!0},p=async(t,e,n)=>{const r=(0,i.JU)(c,u,t,"todos",e);return await(0,i.r7)(r,n),!0},g=async(t,e,n)=>{const r=(0,i.qs)(c),s=(0,i.JU)(c,u,t,"todos",e);return r.update(s,n),await r.commit(),!0},y=async(t,e)=>{const n=(0,i.hJ)(c,u,t,"todos"),r=await(0,i.PL)(n);return await(0,a.ML)(r,(async t=>await(0,i.r7)(t,e))),!0},v=async(t,e,n)=>(await(0,i.pl)((0,i.JU)(c,u,t,"todos",e),{...n}),!0),w=(0,o.p)(...await(async()=>{const t=await(async()=>{const t=(0,i.hJ)(c,u),e=[];return await(0,i.PL)(t).then((t=>{t.forEach((t=>{e.push({type:"project",id:t.id,...t.data(),todos:[]})}))})),e})();return await(0,a.ML)(t,(async t=>{const e=await(async(t,e)=>{const n=(0,i.hJ)(c,`todos/${t}/todos`),r=[];return await(0,i.PL)(n).then((n=>{n.docs.forEach((n=>{r.push({type:"todo",projectId:t,projectTitle:e,id:n.id,...n.data()})}))})),r})(t.id,t.title);t.todos=e})),t})());t()}),1)},6:(t,e,n)=>{n.a(t,(async t=>{n.d(e,{H:()=>c,G:()=>u});var r=n(395),i=n(392),s=t([r]);r=(s.then?await s:s)[0];const o=(t,e,n)=>{e=t.elements.namedItem(e);const r=document.createElement("div");return r.innerText=n,t.insertBefore(r,e),(0,i.si)(r,"form"),!0},a=(t,e)=>!t.includes(e),c=(t,e)=>{const n=[];return n.push(((t,e)=>{const n=r.q.getTodosProp(t,"title");return 0===n.length||!!a(n,e.target.title.value)||(o(e.target,"title","wrong title"),!1)})(t,e)),n.push(((t,e)=>!(!(r.q.getProjectProp(t,"dueDate").toDate()>=new Date(e.target.date.value))&&(o(e.target,"date","wrong date"),1)))(t,e)),!n.includes(!1)},u=(t,e)=>{switch(t){case"add-todo-home":{const t=r.q.getProjectIdByProp("title",e.target.project.value);return c(t,e)}case"add-project-home":return(t=>{const e=r.q.getProjectsProp("title");return!!a(e,t.target.title.value)||(o(t.target,"title","wrong title"),!1)})(e);case"add-todo-project":{const t=e.target.parentElement.closest("div[class~=project]").id;return c(t,e)}default:console.log(`validateForm: sorry, we are out of ${t}.`)}return!1}}))},897:(t,e,n)=>{n.a(t,(async t=>{n.d(e,{j:()=>u,w:()=>l});var r=n(610),i=n(468),s=n(196),o=n(395),a=n(875),c=t([s,i,r,o,a]);[s,i,r,o,a]=c.then?await c:c;const u=async(t,e,n=null)=>{const r=t.match(/(?<=-)\w+(?=-)/)[0],i=await(0,o.dN)(r,n,e);switch(e={type:t,id:i,...e},(0,a.fE)(e),e.type=r,r){case"project":o.q.addProject(e);break;case"todo":o.q.addTodo(n,{projectTitle:o.q.getProjectProp(n,"title"),...e});break;default:console.log(`AddItem: sorry, we are out of ${r}.`)}return i},l=async t=>{const{id:e,type:n}=t.target;switch(n){case"project":await(0,r.t)(e);break;case"todo":case"project-todo":{const{projectId:n}=t.target;await(0,i.a)(n,e);break}default:console.log(`deleteItem: sorry, we are out of ${n}.`)}const o=document.querySelector(`[itemid=${e}]`);if(null!==o){const e=o.getAttribute("location");switch(e){case"home":(0,s.x4)();break;case"project":(0,s.Ai)(t);break;default:console.log(`deleteItem: sorry, we are out of ${e}.`)}}return document.getElementById(e).remove(),e}}))},610:(t,e,n)=>{n.a(t,(async t=>{n.d(e,{t:()=>s});var r=n(395),i=t([r]);r=(i.then?await i:i)[0];const s=async t=>(await(0,r.iA)(t),r.q.deleteProject(t),t)}))},816:(t,e,n)=>{n.d(e,{p:()=>s});const r=(t,e)=>t.findIndex((t=>t.id===e)),i={projectId:"id",projectTitle:"title"},s=(...t)=>{const e=[...t];return Object.assign({},(t=>({get:()=>t}))(e),{set:t=>{}},(t=>({getProjects:()=>t,getProjectsProp:e=>{const n=[];return t.forEach((t=>n.push(t[e]))),n}}))(e),(t=>({getProject:e=>t.filter((t=>t.id===e))[0],getProjectProp:(e,n)=>t.filter((t=>t.id===e))[0][n],getProjectIdFromProp:(e,n)=>t.filter((t=>t[e]===n))[0].id,getProjectPropFromTodoId:(e,n)=>t.filter((t=>t.todos.filter((t=>t.id===e)).length>0))[0][n],getProjectPropsFromTodoId:(e,...n)=>{const r=t.filter((t=>t.todos.filter((t=>t.id===e)).length>0))[0],s={};return n.forEach((t=>{Object.keys(i).includes(t)?s[t]=r[i[t]]:s[t]=r[t]})),s},setProject:(e,n)=>{const i=r(t,e);return t[i]=n,!0},setProjectProp:(e,n,i)=>{const s=r(t,e);return t[s][n]=i,!0},setProjectProps:(e,n)=>{const i=r(t,e);return Object.keys(n).forEach((e=>{t[i][e]=n[e]})),!0},deleteProject:e=>{const n=r(t,e);return t.splice(n,1),e},addProject:e=>(t.push(e),e.id)}))(e),(t=>({getTodos:()=>{const e=[];return t.forEach((t=>t.todos.forEach((t=>e.push(t))))),e},getTodosProp:(e,n)=>{const i=[],s=r(t,e);return t[s].todos.forEach((t=>i.push(t[n]))),i},getTodoFromId:e=>t.forEach((t=>t.todos.forEach((t=>t.id===e))))}))(e),(t=>({getTodo:(e,n)=>{const i=r(t,e),s=t[i],o=r(s.todos,n);return t[i].todos[o]},getTodoProp:(e,n,i)=>{const s=r(t,e),o=t[s],a=r(o.todos,n);return t[s].todos[a][i]},setTodo:(e,n,i)=>{const s=r(t,e),o=t[s],a=r(o.todos,n);return t[s].todos[a]=i,!0},setTodoProp:(e,n,i,s)=>{const o=r(t,e),a=t[o],c=r(a.todos,n);return t[o].todos[c][i]=s,!0},setTodosProp:(e,n,i)=>{const s=r(t,e);return t[s].todos.forEach((t=>{t[n]=i})),!0},setTodoProps:(e,n,i)=>{const s=r(t,e),o=t[s],a=r(o.todos,n);return Object.keys(i).forEach((e=>{t[s].todos[a][e]=i[e]})),!0},addTodo:(e,n)=>{const i=r(t,e);return n.projectId=e,t[i].todos.push(n),n.id},deleteTodo:(e,n)=>{const i=r(t,e),s=t[i].todos.filter((t=>t.id!==n));return t[i].todos=s,!0}}))(e))}},468:(t,e,n)=>{n.a(t,(async t=>{n.d(e,{a:()=>s});var r=n(395),i=t([r]);r=(i.then?await i:i)[0];const s=async(t,e)=>(await(0,r.ai)(t,e),r.q.deleteTodo(t,e),e)}))},259:(t,e,n)=>{n.d(e,{DY:()=>r,ML:()=>i,e1:()=>s,wf:()=>o});const r=(t,e,n=!0)=>{switch(n){case!0:t.sort(((t,n)=>t[e]-n[e]));break;case!1:t.sort(((t,n)=>n[e]-t[e]));break;default:console.log("sort: something went wrong.")}return t},i=async(t,e)=>{for(let n=0;n<t.length;n++)await e(t[n],n,t);return!0},s=(t,e,n=!1)=>{let r=0,i=t.length;for(;r<i;){const s=r+i>>>1;switch(n){case!0:t[s]<e?r=s+1:i=s;break;case!1:t[s]>e?r=s+1:i=s;break;default:console.log("sortedIndex: something went wrong.")}}return r},o=(t,e)=>Array.from(t).filter((t=>e.includes(t)))},513:(t,e,n)=>{n.a(t,(async t=>{n.d(e,{dB:()=>d,VN:()=>f,oZ:()=>m,Xi:()=>p,em:()=>g,zl:()=>y,Hy:()=>v});var r=n(591),i=n(875),s=n(392),o=n(196),a=n(304),c=n(259),u=n(395),l=(n(547),t([u,o,a,i]));[u,o,a,i]=l.then?await l:l;const h=["todo","project"],d=(t,e,...n)=>(document.getElementById("home-items-list").innerHTML="",(t=(0,c.DY)(t,...n)).forEach((t=>{t.type=e,t=(0,i.oV)(t)})),!0),f=async(t,...e)=>{document.body.innerHTML="",(t=>{const e=document.createElement("div");e.id="home";const n=(t=>{const e=document.createElement("div");e.classList.add("home-controls"),t=h.filter((e=>e!==t))[0];const n=document.createElement("div");n.textContent=`${t}s`,n.id="home-controls-switch",n.type=t,e.appendChild(n);const r=document.createElement("div");return r.textContent="add",r.id="home-controls-add",e.appendChild(r),e})(t);e.appendChild(n);const r=(()=>{const t=document.createElement("div");t.id="home-items",t.classList.add("home-items");const e=document.createElement("div");return e.classList.add("home-items-list"),e.id="home-items-list",t.appendChild(e),t})();e.appendChild(r),document.body.appendChild(e)})(t);const n=document.getElementById("home");return n.type=t,[n.by,n.desc]=e,!0},m=()=>document.getElementById("home").type,p=t=>{const e=document.getElementById("home-items-list"),n=[];return Array.from(e.children).forEach((e=>n.push((0,i.fe)(e,t)))),n},g=t=>{const e=document.getElementById("home-items-list"),{by:n,desc:r}=(()=>{const t=document.getElementById("home");return{by:t.by,desc:t.desc}})(),s=(0,i.O_)(t,n),o=(0,i.k2)(t.type,n),a=(0,c.e1)(o,s,r),u=e.children[a];return t=(0,i.dS)(t),e.insertBefore(t,u),!0},y=(t,e)=>{const n=document.getElementById(t),i=n.classList[1];return["title","description","dueDate","priority"].forEach((t=>{n.querySelector(`[class*=${t}]`).textContent=e[t]})),e.dueDate=r.EK.fromDate(new Date(e.dueDate)),(0,a.kH)(e,n),"todo"===i&&(n.querySelector("[class*=project]").textContent=`project: ${e.project}`),!0},v=async t=>{const e=document.getElementById("home-controls-switch");let{type:n}=t.target,r=null;const i=document.getElementById("home-items"),a=i.querySelector("form");if(null!==a){const t=document.getElementById("home-controls-add"),e=a.classList[1].match(/(?<=-)\w+$/)[0];(0,o.s_)(t,e,!1),(0,s.Kj)(i,"form")}const{by:c,desc:l}=document.getElementById("home");switch(n){case"project":r=u.q.getProjects();break;case"todo":r=u.q.getTodos();break;default:console.log(`switchProjectsTodos: sorry, we are out of ${n}.`)}switch(d(r,n,c,l),(t=>{document.getElementById("home").type=t})(n),n){case"project":n="todo";break;case"todo":n="project";break;default:console.log(`switchProjectsTodos: sorry, we are out of ${n}.`)}return e.textContent=`${n}s`,e.type=n,!0}}))},875:(t,e,n)=>{n.a(t,(async t=>{n.d(e,{Sm:()=>p,dS:()=>v,oV:()=>w,fE:()=>A,fe:()=>b,O_:()=>E,k2:()=>T,JL:()=>I,UK:()=>C,$y:()=>S,$F:()=>k});var r=n(591),i=n(598),s=n(513),o=n(509),a=n(392),c=n(257),u=n(897),l=n(259),h=n(395),d=n(125),f=n(304),m=(n(163),t([o,h,s,f,u,d,c]));[o,h,s,f,u,d,c]=m.then?await m:m;const p=t=>{const e=t.querySelector("[class~=item-title]");(0,a.jm)(e,"title-active",!1);const n=t.querySelector("[class~=item-content]");return n.style.display="none",(0,a.si)(n,"div[class$=content]"),!0},g=t=>(0,a.es)("button","item-title",t,null,null,{type:"click",callback:a.f});function y(t,e,n,r=null,s,l,h,f=null){const m=(0,a.re)("item-content");n=(0,a.re)(`${t}-description`,n),m.appendChild(n);const p=((t,e,n)=>{const r=(0,a.re)("item-details");e=(0,i.Z)(e.toDate(),"yyyy-MM-dd");const s=(0,a.es)("div",`${t}-dueDate`,e);return r.appendChild(s),n=(0,a.es)("div",`${t}-priority`,n),r.appendChild(n),r})(t,s,l);m.appendChild(p);const g=((t,e,n,r)=>{const i=(0,a.re)("item-controls"),s=(0,a.re)(`${t}-edit`,"edit",t,null,{type:"click",callback:c.F});i.appendChild(s);const o=(0,a.re)(`${t}-status`,n,null,null,{type:"click",callback:d.V});i.appendChild(o);const l=(0,a.re)(`${t}-delete`,"delete",t,e,{type:"click",callback:u.w});return l.projectId=r,i.appendChild(l),i})(t,e,h,f);return m.appendChild(g),"project"===t&&(r=(0,o.Td)(r,"project"),m.appendChild(r)),m}const v=t=>{const e=t.type.match(/(?<=-)\w+(?=-)/)[0],n=t.type.match(/(?<=-)\w+$/)[0],{id:r,title:i,description:s,todos:o,dueDate:c,priority:u,status:l,projectId:h,projectTitle:d}=t,m=(0,a.re)("item",null,null,r);m.classList.add(e),m.appendChild(g(i));const p=y(e,r,s,null!==o?t.todos:[],c,u,l,h);if(m.appendChild(p),(0,f.ci)(t)&&(0,f.j0)(m),"todo"===e&&"home"===n){const t=(0,a.re)("todo-project",`project: ${d}`);m.appendChild(t)}return m},w=t=>{const{id:e,projectId:n,type:r}=t,i=(0,a.re)("item",null,null,e);i.classList.add(r);const s=g(t.title);i.appendChild(s);const o=y(r,e,t.description,"project"===r?t.todos:[],t.dueDate,t.priority,t.status,n);switch(i.appendChild(o),(0,a.jm)(i,"done","done"===t.status),(0,f.ci)(t)&&(0,f.j0)(i),r){case"project":(0,f.Em)(t)&&(0,f.wm)(i);break;case"todo":{const e=(0,a.re)("todo-project",`project: ${t.projectTitle}`);i.appendChild(e);break}}switch(r){case"project":case"todo":return document.getElementById("home-items-list").appendChild(i),!0}return i},A=t=>{const{type:e}=t;switch(e){case"add-todo-home":(0,s.em)(t);break;case"add-project-home":t.todos=[],(0,s.em)(t);break;case"add-todo-project":(0,o.n3)(t);break;default:console.log(`addItemToItemsList: sorry, we are out of ${e}.`)}return!0},b=(t,e)=>{let n=t.querySelector(`div[class$=${e}`).textContent;return/date/i.test(e)&&(n=Math.round(new Date(n).getTime()/1e3)),n},E=(t,e)=>{let n=t[e];return/date/i.test(e)&&(n=n.seconds),n},T=(t,e)=>{switch(t){case"add-todo-home":case"add-project-home":return(0,s.Xi)(e);default:console.log(`getItemSortValues: sorry, we are out of ${t}.`)}return!1},I=t=>{const e=(0,l.wf)(t.classList,a.V5);if(e.length>1)throw new Error(`getTypeFromDOMItem: more than one item found: ${e.join(", ")}.`);return e[0]},C=t=>{let e={title:null,description:null,dueDate:null,priority:null,status:null};Object.keys(e).forEach((n=>{const r=t.querySelector(`[class*=${n}]`).textContent;e[n]=r}));const n=I(t);switch(n){case"todo":case"project-todo":{const n=h.q.getProjectPropsFromTodoId(t.id,"projectId","projectTitle");e={...e,...n};break}case"project":e.todos=(0,o.yn)(t);break;default:console.log(`getPropsFromDOMItem: sorry, we are out of ${n}.`)}return null!==e.dueDate&&(e.dueDate=r.EK.fromDate(new Date(e.dueDate))),e.id=t.id,e},S=(t,e,n,r)=>(r?t.removeEventListener(e,n):t.addEventListener(e,n),!0),k=(t,e,n,r)=>{t.forEach((t=>S(t,e,n,r)))}}))},509:(t,e,n)=>{n.a(t,(async t=>{n.d(e,{Td:()=>u,n3:()=>l,qm:()=>h,yn:()=>d});var r=n(591),i=n(875),s=n(392),o=n(304),a=n(860),c=(n(25),t([i,o,a]));[i,o,a]=c.then?await c:c;const u=(t,e)=>{const n=(0,s.re)("project-todos");if("project"===e){const t=(()=>{const t=(0,s.re)("project-todos-header"),e=(0,s.re)("project-todos-header-text","In the pipe:");t.appendChild(e);const n=(0,s.re)("project-todos-header-button","add","todo","project-add-todo",{type:"click",callback:a.w});return t.appendChild(n),t})();n.appendChild(t)}const r=(t=>{const e=(0,s.re)("project-todos-list");return t.forEach((t=>{t.type="project-todo",t=(0,i.oV)(t),e.appendChild(t)})),e})(t);return n.appendChild(r),n},l=t=>{const e=document.getElementById(t.projectId).querySelector("div[class$=list]"),n=e.querySelector(".project-todo");return(t=(0,i.dS)(t)).classList.remove("todo"),t.classList.add("project-todo"),e.insertBefore(t,n),!0},h=(t,e)=>{const n=document.getElementById(t);return["title","description","dueDate","priority"].forEach((t=>{n.querySelector(`[class*=${t}]`).textContent=e[t]})),e.dueDate=r.EK.fromDate(new Date(e.dueDate)),(0,o.kH)(e,n),(0,o.bc)(t,e.dueDate),!0},d=t=>{const e=[];return Array.from(t.querySelectorAll(".project-todo")).forEach((t=>e.push((0,i.UK)(t)))),e}}))},860:(t,e,n)=>{n.a(t,(async t=>{n.d(e,{w:()=>h});var r=n(395),i=n(196),s=n(392),o=n(897),a=n(6),c=n(513),u=t([i,o,a,c,r]);[i,o,a,c,r]=u.then?await u:u;const l=t=>{const e=(()=>{const t=document.createElement("form"),e=(0,i.NF)("add","title","title","title");t.appendChild(e);const n=(0,i.NF)("add","description","description","description");t.appendChild(n);const r=(0,i.qN)("date","date");t.appendChild(r);const s=(0,i.ty)("priority","priority","priority: ",i.WS,i.WS[1]);t.appendChild(s);const o=(0,i.Lm)("add","add","add");return t.appendChild(o),t})();return e.name="add-item",e.classList.add("form-add"),e.classList.add(`form-add-${t}`),e.addEventListener("submit",d),e},h=t=>{let{type:e}=t.target;const n=t.target.id.match(/^\w+/)[0];switch(n){case"home":{e=(0,c.oZ)();const t=(t=>{const e=l("project");if("todo"===t){let t=r.q.getProjectsProp("title");t=(0,i.ty)("project","project","project: ",t),e.prepend(t)}return e.type=`add-${t}-home`,e})(e);(t=>{const e=document.getElementById("home-items"),n=document.getElementById("home-controls-add");(0,i.s_)(n,"home",!0),e.prepend(t),(0,s.si)(t,"div[class$=content]")})(t);break}case"project":((t,e)=>{const n=e.target.parentElement.closest("div[class$=header]").nextSibling,r=e.target;(0,i.s_)(r,"project",!0),n.prepend(t),(0,s.si)(t,"div[class$=content]")})((()=>{const t=l("todo");return t.type="add-todo-project",t})(),t);break;default:console.log(`showAddItem: sorry, we are out of ${n}.`)}return!0},d=async t=>{t.preventDefault();const{type:e}=t.target;let n=(0,i.zz)(t),r=null;if(!(0,a.G)(e,t))return!1;const s=e.match(/(?<=-)\w+$/)[0];/todo/.test(e)&&(n=(0,i.o3)(t,s,n),r=n.projectId);const c=await(0,o.j)(e,n,r);switch(s){case"home":(0,i.x4)();break;case"project":(0,i.Ai)(t);break;default:console.log(`processAddItem: sorry, we are out of ${s}.`)}return c}}))},257:(t,e,n)=>{n.a(t,(async t=>{n.d(e,{F:()=>f});var r=n(591),i=n(598),s=n(395),o=n(196),a=n(392),c=n(513),u=n(509),l=n(6),h=t([o,u,c,s,l]);[o,u,c,s,l]=h.then?await h:h;const d=(t,e,n)=>{const r=document.createElement("form");t=(0,o.NF)("edit","title","title",t),r.appendChild(t),e=(0,o.NF)("edit","description","description",e),r.appendChild(e),n=(0,o.ty)("priority","priority","priority: ",o.WS,n),r.appendChild(n);const i=(0,o.Lm)("edit","save","save");return r.appendChild(i),r},f=t=>{const{type:e}=t.target,{id:n}=t.target.parentElement.closest(`div[class*=${e}]`),r=(t=>{let e="home",n=document.getElementById(t).classList[1];/-/.test(n)&&(e=n.match(/^\w+(?=-)/)[0],n=n.match(/(?<=-)\w+$/)[0]);let r=null;switch(n){case"project":r=(t=>{const e=s.q.getProjectProp(t,"title"),n=s.q.getProjectProp(t,"description"),r=s.q.getProjectProp(t,"priority"),c=d(e,n,r);let u=s.q.getProjectProp(t,"dueDate");u=(0,o.qN)("date","date",(0,i.Z)(1e3*u.seconds,"yyyy-MM-dd"));const l=c.querySelector("input[id=description]");return(0,a.BE)(u,l),c.type="project",c.itemId=t,c})(t);break;case"todo":r=(t=>{const e=s.q.getProjectPropFromTodoId(t,"id"),n=s.q.getTodoProp(e,t,"title"),r=s.q.getTodoProp(e,t,"description"),c=s.q.getTodoProp(e,t,"priority"),u=d(n,r,c);let l=s.q.getProjectsProp("title");l=(0,o.ty)("project","project","project: ",l,s.q.getProjectPropFromTodoId(t,"title")),u.prepend(l);let h=s.q.getTodoProp(e,t,"dueDate");h=(0,o.qN)("date","date",(0,i.Z)(1e3*h.seconds,"yyyy-MM-dd"));const f=u.querySelector("input[id=description]");return(0,a.BE)(h,f),u.type="todo",u.itemId=t,u})(t);break;default:console.log(`makeEditItemForm: sorry, we are out of ${n}.`)}return Object.entries({name:"edit-item",location:e,itemId:t}).forEach((t=>{r.setAttribute(t[0],t[1])})),["form-edit",`form-edit-${e}`].forEach((t=>r.classList.add(t))),r.addEventListener("submit",m),r})(n),c=r.getAttribute("location");switch(c){case"home":(t=>{const e=document.getElementById("home-items"),n=document.getElementById("home-controls-add");(0,o.s_)(n,"home",!0),(0,a.Kj)(e,"form"),e.prepend(t),(0,a.si)(t,"div[class$=content]")})(r);break;case"project":(t=>{const e=document.getElementById(s.q.getProjectPropFromTodoId(t.itemId,"id")),n=e.querySelector(".project-todos-list"),r=e.querySelector("#project-add-todo");(0,o.s_)(r,"project",!0),(0,a.Kj)(n,"form"),n.prepend(t),(0,a.si)(t,"div[class$=content]")})(r);break;default:console.log(`showEditItem: sorry, we are out of ${c}.`)}return!0},m=async t=>{t.preventDefault();const{type:e}=t.target,n=t.target.getAttribute("itemId");switch(e){case"project":await(async(t,e)=>{const n=(0,o.sW)("project",t);return await(async(t,e)=>{const n=(0,o.sW)("project",t);return n.dueDate=new Date(n.dueDate),await(0,s.CB)(e,n),n.dueDate=r.EK.fromDate(n.dueDate),s.q.setProjectProps(e,n),e})(t,e),(0,c.zl)(e,n),(0,o.x4)(t),!0})(t,n);break;case"todo":(async(t,e)=>{const n=(0,o.sW)("todo",t),i=t.target.classList[1].match(/(?<=-)\w+$/)[0];switch(await(async(t,e)=>{let{project:n,...i}=(0,o.sW)("todo",t);const a=s.q.getProjectIdFromProp("title",n),c=s.q.getProjectPropFromTodoId(e,"id");if(a!==c){if(!(0,l.H)(a,t))return!1;i={status:s.q.getTodoProp(c,e,"status"),...i},i.dueDate=new Date(i.dueDate),await(0,s.M$)(a,e,i),i={projectTitle:n,...i},i.dueDate=r.EK.fromDate(i.dueDate),s.q.addTodo(a,i),await(0,s.ai)(c,e),s.q.deleteTodo(c,e)}else i.dueDate=new Date(i.dueDate),await(0,s.yW)(a,e,i),i.dueDate=r.EK.fromDate(i.dueDate),s.q.setTodoProps(a,e,i);return e})(t,e),i){case"home":(0,c.zl)(e,n),(0,o.x4)();break;case"project":(0,u.qm)(e,n),(0,o.Ai)(t);break;default:console.log(`editTodo: sorry, we are out of ${i}.`)}})(t,n);break;default:console.log(`processAddItem: sorry, we are out of ${e}.`)}return!0}}))},196:(t,e,n)=>{n.a(t,(async t=>{n.d(e,{WS:()=>l,sW:()=>h,NF:()=>d,ty:()=>f,qN:()=>m,Lm:()=>p,zz:()=>g,o3:()=>y,x4:()=>v,Ai:()=>w,s_:()=>A});var r=n(591),i=n(598),s=n(562),o=n(395),a=n(860),c=n(392),u=(n(57),t([a,o]));[a,o]=u.then?await u:u;const l=["high","moderate","low"],h=(t,e)=>{const n={};return"todo"===t&&(n.project=e.target.project.value),n.id=e.target.itemId,n.title=e.target.title.value,n.description=e.target.description.value,n.dueDate=e.target.date.value,n.priority=e.target.priority.value,n},d=(t,e,n,r)=>{const i=document.createElement("input");switch(i.type="text",i.id=e,i.name=n,t){case"add":i.placeholder=r;break;case"edit":i.value=r;break;default:console.log(`makeFormInputText: sorry, we are out of ${t}.`)}return i},f=(t,e,n,r,i=null)=>{const s=document.createElement("span"),o=document.createElement("label");o.textContent=n,o.for=e,s.appendChild(o);const a=document.createElement("select");return a.id=t,a.name=e,r.forEach((t=>{const e=document.createElement("option");e.value=t,t===i&&(e.selected=!0),e.textContent=t,a.appendChild(e)})),s.appendChild(a),s},m=(t,e,n=(0,i.Z)(new Date,"yyyy-MM-dd"),r=new Date,o=(0,s.Z)(new Date,1))=>{const a=document.createElement("input");return a.type="date",a.id=t,a.name=e,a.value=n,a.min=r,a.max=o,a},p=(t,e,n)=>{const r=document.createElement("div");r.id=`submit-${t}-form`;const i=document.createElement("input");return i.type="submit",i.id=e,i.value=n,r.appendChild(i),r},g=t=>({title:t.target.title.value,description:t.target.description.value,dueDate:r.EK.fromDate(new Date(t.target.date.value)),priority:t.target.priority.value,status:"open"}),y=(t,e,n)=>{let r=null;switch(e){case"home":{const e=t.target.project.value;n={projectTitle:e,...n},r=o.q.getProjectIdByProp("title",e);break}case"project":r=t.target.parentElement.closest("div[class~=project]").id;break;default:console.log(`addProjectIdToTodoItem: sorry, we are out of ${e}.`)}return{projectId:r,...n}},v=()=>{const t=document.getElementById("home-items"),e=document.getElementById("home-controls-add");return A(e,"home",!1),(0,c.Kj)(t,"form"),!0},w=t=>{const e=t.target.closest("[class~='project']").querySelector("[class*=project-todos-list]"),n=e.parentElement.querySelector(".project-todos-header-button");return A(n,"project",!1),(0,c.Kj)(e,"form"),!0},A=(t,e,n=!0)=>{switch(t.textContent=n?"cancel":"add",e){case"home":t.removeEventListener("click",n?a.w:v),t.addEventListener("click",n?v:a.w);break;case"project":t.removeEventListener("click",n?a.w:w),t.addEventListener("click",n?w:a.w);break;default:console.log(`switchItemControl: sorry, we are out of ${e}.`)}return!0}}))},304:(t,e,n)=>{n.a(t,(async t=>{n.d(e,{eG:()=>s,ci:()=>a,Em:()=>c,j0:()=>u,wm:()=>l,kH:()=>d,Uj:()=>f,bc:()=>m});var r=n(875),i=t([r]);r=(i.then?await i:i)[0];const s=["overdue","hasOverdue"],o=t=>(t=t.setHours(0,0,0,0))<(new Date).setHours(0,0,0,0),a=t=>{const e=new Date(1e3*t.dueDate.seconds);return o(e)},c=t=>{const e=(new Date).setHours(0,0,0,0);return t.todos.map((t=>new Date(1e3*t.dueDate.seconds).setHours(0,0,0,0)<e)).includes(!0)},u=t=>t.classList.add("overdue"),l=t=>t.classList.add("hasOverdue"),h=t=>t.classList.remove("hasOverdue"),d=(t,e)=>{const n=a(t);switch(n){case!0:u(e);break;case!1:e.classList.remove("overdue");break;default:console.log(`sortItemOverdueStatus: sorry, we are out of ${n}.`)}return!0},f=(t,e)=>{const n=c(t);switch(n){case!0:l(e);break;case!1:h(e);break;default:console.log(`sortItemOverdueStatus: sorry, we are out of ${n}.`)}const i=Array.from(e.querySelectorAll("[class~=project-todo]"));return i.length>0&&(t=>{t.forEach((t=>{const e=(0,r.UK)(t);d(e,t)}))})(i),!0},m=(t,e)=>{const n=document.getElementById(t).parentElement.closest("[class~=project]"),r=o(new Date(1e3*e.seconds));switch(r){case!0:l(n);break;case!1:h(n);break;default:console.log(`sortProjectOverdueStatus: sorry, we are out of ${r}.`)}return!0}}))},125:(t,e,n)=>{n.a(t,(async t=>{n.d(e,{V:()=>y});var r=n(304),i=n(392),s=n(875),o=n(860),a=n(257),c=n(196),u=n(897),l=n(395),h=t([s,r,c,l,a,o,u]);[s,r,c,l,a,o,u]=h.then?await h:h;const d=(t,e,n)=>{const r=t.querySelectorAll('[id*="add"]');(0,s.$F)(r,"click",o.w,n);const c=t.querySelectorAll('[class*="edit"]');return(0,s.$F)(c,"click",a.F,n),"project"===e&&((t,e)=>{t.forEach((t=>{const n=t.querySelector("[class~=item-title]");(0,s.$y)(n,"click",i.f,e);const r=t.querySelector("[class*=status]");(0,s.$y)(r,"click",y,e);const o=t.querySelector("[class*=delete]");(0,s.$y)(o,"click",u.w,e)}))})(t.querySelectorAll('[class^="item project-todo"]'),n),!0},f=async(t,e,n)=>{switch(e){case"project":await(0,l.mk)(t,n),await(0,l.s3)(t,n);break;case"todo":case"project-todo":{const e=l.q.getProjectPropFromTodoId(t,"id");await(0,l.P2)(e,t,n);break}default:console.log(`toggleStatusInFiresotre: sorry, we are out of ${e}.`)}return!0},m=async(t,e,n)=>{switch(e){case"project":l.q.setProjectProp(t,"status",n),l.q.setTodosProp(t,"status",n);break;case"todo":case"project-todo":{const e=l.q.getProjectPropFromTodoId(t,"id");l.q.setTodoProp(e,t,"status",n);break}default:console.log(`toggleStatusInProjects: sorry, we are out of ${e}.`)}return!0},p=async t=>{const e=t.target.parentElement.closest("[class~=item]"),n=(0,s.JL)(e);return((t,e,n)=>{const o=e.querySelectorAll("[class~=item]");switch(t.target.textContent="done",(0,c.x4)(),n){case"project":case"project-todo":o.forEach((t=>p({target:t.querySelector("[class$=status]")}))),(0,c.Ai)(t);break;default:console.log(`toggleDoneOnDOM: sorry, we are out of ${n}.`)}r.eG.forEach((t=>{(0,i.jm)(e,t,!1),(0,i.r7)(o,t,!1)})),e.classList.add("done"),d(e,n,!0),(0,s.Sm)(e)})(t,e,n),m(e.id,n,"done"),await f(e.id,n,{status:"done"}),!0},g=async t=>{const e=t.target.parentElement.closest("[class~=item]"),n=(0,s.JL)(e);return((t,e,n)=>{const i=(0,s.UK)(e);t.target.textContent="open",(0,c.x4)(),"project"!==n&&"project-todo"!==n||(0,c.Ai)(t),(0,r.kH)(i,e),"project"===n&&((0,r.Uj)(i,e),e.querySelectorAll("[class~=item]").forEach((t=>g({target:t.querySelector("[class$=status]")})))),e.classList.remove("done"),d(e,n,!1)})(t,e,n),m(e.id,n,"open"),await f(e.id,n,{status:"open"}),!0},y=t=>{const e=t.target.textContent;switch(e){case"open":p(t);break;case"done":g(t);break;default:console.log(`toggleStatus: sorry, we are out of ${e}.`)}return!0}}))},392:(t,e,n)=>{n.d(e,{V5:()=>r,es:()=>i,re:()=>s,si:()=>o,f:()=>a,BE:()=>c,Kj:()=>u,jm:()=>l,r7:()=>h});const r=["todo","project","project-todo"],i=(t,e=null,n=null,r=null,i=null,s={type:null,callback:null})=>{const o=document.createElement(t);return o.classList.add(e),null!==n&&(o.innerHTML=n),null!==r&&(o.type=r),null!==i&&(o.id=i),o.addEventListener(s.type,s.callback),o},s=(t,e,n,r,s)=>i("div",t,e,n,r,s),o=(t,e)=>{const n=t.parentElement.closest(e);return t.style.maxHeight>0?t.style.maxHeight=null:(t.style.maxHeight=`${t.scrollHeight}px`,n&&(n.style.maxHeight=`${n.scrollHeight+t.scrollHeight}px`)),t},a=t=>{t.target.classList.toggle("title-active");const e=t.target.nextElementSibling;var n;return(n=e).style.display="block"===n.style.display?"none":"block",o(e,"div[class$=content]"),!0},c=(t,e)=>{e.parentNode.insertBefore(t,e.nextSibling)},u=(t,e)=>(t.querySelectorAll(`:scope > ${e}`).forEach((t=>t.remove())),!0),l=(t,e,n)=>(n?t.classList.add(e):t.classList.remove(e),t),h=(t,e,n)=>(t.forEach((t=>l(t,e,n))),t)}},o={};function a(t){var e=o[t];if(void 0!==e)return e.exports;var n=o[t]={id:t,exports:{}};return s[t](n,n.exports,a),n.exports}t="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n=t=>{t&&(t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},r=t=>!--t.r&&t(),i=(t,e)=>t?t.push(e):r(e),a.a=(s,o,a)=>{var c,u,l,h=a&&[],d=s.exports,f=!0,m=!1,p=(e,n,r)=>{m||(m=!0,n.r+=e.length,e.map(((e,i)=>e[t](n,r))),m=!1)},g=new Promise(((t,e)=>{l=e,u=()=>(t(d),n(h),h=0)}));g[e]=d,g[t]=(t,e)=>{if(f)return r(t);c&&p(c,t,e),i(h,t),g.catch(e)},s.exports=g,o((s=>{if(!s)return u();var o,a;c=(s=>s.map((s=>{if(null!==s&&"object"==typeof s){if(s[t])return s;if(s.then){var o=[];s.then((t=>{a[e]=t,n(o),o=0}));var a={};return a[t]=(t,e)=>(i(o,t),s.catch(e)),a}}var c={};return c[t]=t=>r(t),c[e]=s,c})))(s);var l=new Promise(((t,n)=>{(o=()=>t(a=c.map((t=>t[e])))).r=0,p(c,o,n)}));return o.r?l:a})).then(u,l),f=!1},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a(138)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVEsQ0FBRS82RCxFQUFHKzZELElBQzVCQSxHQ0xSbkIsRUFBb0JycUQsRUFBSSxDQUFDeE8sRUFBU2s2RCxLQUNqQyxJQUFJLElBQUlyN0QsS0FBT3E3RCxFQUNYckIsRUFBb0J6bEUsRUFBRThtRSxFQUFZcjdELEtBQVNnNkQsRUFBb0J6bEUsRUFBRTRNLEVBQVNuQixJQUM1RXpOLE9BQU9rbEIsZUFBZXRXLEVBQVNuQixFQUFLLENBQUVzN0QsWUFBWSxFQUFNOW5FLElBQUs2bkUsRUFBV3I3RCxNQ0ozRWc2RCxFQUFvQjNnRSxFQUFJLFdBQ3ZCLEdBQTBCLGlCQUFmMGEsV0FBeUIsT0FBT0EsV0FDM0MsSUFDQyxPQUFPbGtCLE1BQVEsSUFBSStrQixTQUFTLGNBQWIsR0FDZCxNQUFPcmpCLEdBQ1IsR0FBc0IsaUJBQVg2TSxPQUFxQixPQUFPQSxRQUxqQixHQ0F4QjQ3RCxFQUFvQnpsRSxFQUFJLENBQUNvMEQsRUFBS2dELElBQVVwNUQsT0FBT3dELFVBQVU0UyxlQUFlOVQsS0FBSzh6RCxFQUFLZ0QsR0NHeERxTyxFQUFvQiIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8vd2VicGFjay9ydW50aW1lL2FzeW5jIG1vZHVsZSIsIndlYnBhY2s6Ly90b2RvLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2NvbXBvbmVudC9kaXN0L2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9sb2dnZXIvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvcmVzZXQtY3NzL3Jlc2V0LmNzcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2luZGV4LmNzcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3ZpZXcvY29tcG9uZW50cy9ob21lLmNzcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3ZpZXcvY29tcG9uZW50cy9pdGVtLmNzcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3ZpZXcvY29tcG9uZW50cy9wcm9qZWN0LmNzcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3ZpZXcvZm9ybXMvZm9ybXMuY3NzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qcyIsIndlYnBhY2s6Ly90b2RvLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL3RvSW50ZWdlci9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9hZGRNb250aHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vYWRkWWVhcnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNEYXRlL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVmFsaWQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vbG9jYWxlL2VuLVVTL19saWIvZm9ybWF0RGlzdGFuY2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vbG9jYWxlL19saWIvYnVpbGRGb3JtYXRMb25nRm4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vbG9jYWxlL2VuLVVTL19saWIvZm9ybWF0TG9uZy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9sb2NhbGUvX2xpYi9idWlsZE1hdGNoUGF0dGVybkZuL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2xvY2FsZS9lbi1VUy9fbGliL2Zvcm1hdFJlbGF0aXZlL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2xvY2FsZS9fbGliL2J1aWxkTG9jYWxpemVGbi9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9sb2NhbGUvX2xpYi9idWlsZE1hdGNoRm4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vbG9jYWxlL2VuLVVTL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2xvY2FsZS9lbi1VUy9fbGliL2xvY2FsaXplL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2xvY2FsZS9lbi1VUy9fbGliL21hdGNoL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2FkZE1pbGxpc2Vjb25kcy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9zdWJNaWxsaXNlY29uZHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9hZGRMZWFkaW5nWmVyb3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9mb3JtYXQvbGlnaHRGb3JtYXR0ZXJzL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvZ2V0VVRDRGF5T2ZZZWFyL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvc3RhcnRPZlVUQ0lTT1dlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9nZXRVVENJU09XZWVrWWVhci9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL3N0YXJ0T2ZVVENJU09XZWVrWWVhci9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL2dldFVUQ0lTT1dlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9zdGFydE9mVVRDV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL2dldFVUQ1dlZWtZZWFyL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvc3RhcnRPZlVUQ1dlZWtZZWFyL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvZ2V0VVRDV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL2Zvcm1hdC9mb3JtYXR0ZXJzL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvZm9ybWF0L2xvbmdGb3JtYXR0ZXJzL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL3Byb3RlY3RlZFRva2Vucy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9mb3JtYXQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vdG9EYXRlL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvYXBwL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlci9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZmlyZXN0b3JlL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2luZGV4LmNzcz9jZmU0Iiwid2VicGFjazovL3RvZG8vLi9zcmMvdmlldy9jb21wb25lbnRzL2hvbWUuY3NzP2I5ZmUiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy92aWV3L2NvbXBvbmVudHMvaXRlbS5jc3M/YjkzNCIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3ZpZXcvY29tcG9uZW50cy9wcm9qZWN0LmNzcz9lMmYzIiwid2VicGFjazovL3RvZG8vLi9zcmMvdmlldy9mb3Jtcy9mb3Jtcy5jc3M/ODFlOCIsIndlYnBhY2s6Ly90b2RvLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzIiwid2VicGFjazovL3RvZG8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qcyIsIndlYnBhY2s6Ly90b2RvLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvY29uZmlnL2ZpcmViYXNlLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9tb2RlbC9maXJlc3RvcmUuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9tb2RlbC9mb3Jtcy5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL21vZGVsL2l0ZW0uanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9tb2RlbC9wcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvbW9kZWwvcHJvamVjdHMuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9tb2RlbC90b2RvLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvbW9kZWwvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy92aWV3L2NvbXBvbmVudHMvaG9tZS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3ZpZXcvY29tcG9uZW50cy9pdGVtLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvdmlldy9jb21wb25lbnRzL3Byb2plY3QuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy92aWV3L2Zvcm1zL2FkZEl0ZW0uanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy92aWV3L2Zvcm1zL2VkaXRJdGVtLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvdmlldy9mb3Jtcy91dGlscy5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3ZpZXcvc3RhdGUvb3ZlcmR1ZS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3ZpZXcvc3RhdGUvc3RhdHVzLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvdmlldy91dGlscy5qcyIsIndlYnBhY2s6Ly90b2RvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvZG8vd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vdG9kby93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG9kby93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3RvZG8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90b2RvL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgd2VicGFja1RoZW4gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2woXCJ3ZWJwYWNrIHRoZW5cIikgOiBcIl9fd2VicGFja190aGVuX19cIjtcbnZhciB3ZWJwYWNrRXhwb3J0cyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbChcIndlYnBhY2sgZXhwb3J0c1wiKSA6IFwiX193ZWJwYWNrX2V4cG9ydHNfX1wiO1xudmFyIGNvbXBsZXRlUXVldWUgPSAocXVldWUpID0+IHtcblx0aWYocXVldWUpIHtcblx0XHRxdWV1ZS5mb3JFYWNoKChmbikgPT4gKGZuLnItLSkpO1xuXHRcdHF1ZXVlLmZvckVhY2goKGZuKSA9PiAoZm4uci0tID8gZm4ucisrIDogZm4oKSkpO1xuXHR9XG59XG52YXIgY29tcGxldGVGdW5jdGlvbiA9IChmbikgPT4gKCEtLWZuLnIgJiYgZm4oKSk7XG52YXIgcXVldWVGdW5jdGlvbiA9IChxdWV1ZSwgZm4pID0+IChxdWV1ZSA/IHF1ZXVlLnB1c2goZm4pIDogY29tcGxldGVGdW5jdGlvbihmbikpO1xudmFyIHdyYXBEZXBzID0gKGRlcHMpID0+IChkZXBzLm1hcCgoZGVwKSA9PiB7XG5cdGlmKGRlcCAhPT0gbnVsbCAmJiB0eXBlb2YgZGVwID09PSBcIm9iamVjdFwiKSB7XG5cdFx0aWYoZGVwW3dlYnBhY2tUaGVuXSkgcmV0dXJuIGRlcDtcblx0XHRpZihkZXAudGhlbikge1xuXHRcdFx0dmFyIHF1ZXVlID0gW107XG5cdFx0XHRkZXAudGhlbigocikgPT4ge1xuXHRcdFx0XHRvYmpbd2VicGFja0V4cG9ydHNdID0gcjtcblx0XHRcdFx0Y29tcGxldGVRdWV1ZShxdWV1ZSk7XG5cdFx0XHRcdHF1ZXVlID0gMDtcblx0XHRcdH0pO1xuXHRcdFx0dmFyIG9iaiA9IHt9O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRvYmpbd2VicGFja1RoZW5dID0gKGZuLCByZWplY3QpID0+IChxdWV1ZUZ1bmN0aW9uKHF1ZXVlLCBmbiksIGRlcC5jYXRjaChyZWplY3QpKTtcblx0XHRcdHJldHVybiBvYmo7XG5cdFx0fVxuXHR9XG5cdHZhciByZXQgPSB7fTtcblx0XHRcdFx0XHRcdHJldFt3ZWJwYWNrVGhlbl0gPSAoZm4pID0+IChjb21wbGV0ZUZ1bmN0aW9uKGZuKSk7XG5cdFx0XHRcdFx0XHRyZXRbd2VicGFja0V4cG9ydHNdID0gZGVwO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJldDtcbn0pKTtcbl9fd2VicGFja19yZXF1aXJlX18uYSA9IChtb2R1bGUsIGJvZHksIGhhc0F3YWl0KSA9PiB7XG5cdHZhciBxdWV1ZSA9IGhhc0F3YWl0ICYmIFtdO1xuXHR2YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzO1xuXHR2YXIgY3VycmVudERlcHM7XG5cdHZhciBvdXRlclJlc29sdmU7XG5cdHZhciByZWplY3Q7XG5cdHZhciBpc0V2YWx1YXRpbmcgPSB0cnVlO1xuXHR2YXIgbmVzdGVkID0gZmFsc2U7XG5cdHZhciB3aGVuQWxsID0gKGRlcHMsIG9uUmVzb2x2ZSwgb25SZWplY3QpID0+IHtcblx0XHRpZiAobmVzdGVkKSByZXR1cm47XG5cdFx0bmVzdGVkID0gdHJ1ZTtcblx0XHRvblJlc29sdmUuciArPSBkZXBzLmxlbmd0aDtcblx0XHRkZXBzLm1hcCgoZGVwLCBpKSA9PiAoZGVwW3dlYnBhY2tUaGVuXShvblJlc29sdmUsIG9uUmVqZWN0KSkpO1xuXHRcdG5lc3RlZCA9IGZhbHNlO1xuXHR9O1xuXHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWopID0+IHtcblx0XHRyZWplY3QgPSByZWo7XG5cdFx0b3V0ZXJSZXNvbHZlID0gKCkgPT4gKHJlc29sdmUoZXhwb3J0cyksIGNvbXBsZXRlUXVldWUocXVldWUpLCBxdWV1ZSA9IDApO1xuXHR9KTtcblx0cHJvbWlzZVt3ZWJwYWNrRXhwb3J0c10gPSBleHBvcnRzO1xuXHRwcm9taXNlW3dlYnBhY2tUaGVuXSA9IChmbiwgcmVqZWN0Rm4pID0+IHtcblx0XHRpZiAoaXNFdmFsdWF0aW5nKSB7IHJldHVybiBjb21wbGV0ZUZ1bmN0aW9uKGZuKTsgfVxuXHRcdGlmIChjdXJyZW50RGVwcykgd2hlbkFsbChjdXJyZW50RGVwcywgZm4sIHJlamVjdEZuKTtcblx0XHRxdWV1ZUZ1bmN0aW9uKHF1ZXVlLCBmbik7XG5cdFx0cHJvbWlzZS5jYXRjaChyZWplY3RGbik7XG5cdH07XG5cdG1vZHVsZS5leHBvcnRzID0gcHJvbWlzZTtcblx0Ym9keSgoZGVwcykgPT4ge1xuXHRcdGlmKCFkZXBzKSByZXR1cm4gb3V0ZXJSZXNvbHZlKCk7XG5cdFx0Y3VycmVudERlcHMgPSB3cmFwRGVwcyhkZXBzKTtcblx0XHR2YXIgZm4sIHJlc3VsdDtcblx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdGZuID0gKCkgPT4gKHJlc29sdmUocmVzdWx0ID0gY3VycmVudERlcHMubWFwKChkKSA9PiAoZFt3ZWJwYWNrRXhwb3J0c10pKSkpO1xuXHRcdFx0Zm4uciA9IDA7XG5cdFx0XHR3aGVuQWxsKGN1cnJlbnREZXBzLCBmbiwgcmVqZWN0KTtcblx0XHR9KTtcblx0XHRyZXR1cm4gZm4uciA/IHByb21pc2UgOiByZXN1bHQ7XG5cdH0pLnRoZW4ob3V0ZXJSZXNvbHZlLCByZWplY3QpO1xuXHRpc0V2YWx1YXRpbmcgPSBmYWxzZTtcbn07IiwiaW1wb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgc2V0VXNlckxvZ0hhbmRsZXIsIHNldExvZ0xldmVsIGFzIHNldExvZ0xldmVsJDEgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IEVycm9yRmFjdG9yeSwgZGVlcEVxdWFsIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuZXhwb3J0IHsgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIC8vIEluIGluaXRpYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd2lsbCBiZSBjYWxsZWQgYnkgaW5zdGFsbGF0aW9ucyBvblxyXG4gICAgLy8gYXV0aCB0b2tlbiByZWZyZXNoLCBhbmQgaW5zdGFsbGF0aW9ucyB3aWxsIHNlbmQgdGhpcyBzdHJpbmcuXHJcbiAgICBnZXRQbGF0Zm9ybUluZm9TdHJpbmcoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXJzID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXJzKCk7XHJcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHByb3ZpZGVycyBhbmQgZ2V0IGxpYnJhcnkvdmVyc2lvbiBwYWlycyBmcm9tIGFueSB0aGF0IGFyZVxyXG4gICAgICAgIC8vIHZlcnNpb24gY29tcG9uZW50cy5cclxuICAgICAgICByZXR1cm4gcHJvdmlkZXJzXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3NlcnZpY2UubGlicmFyeX0vJHtzZXJ2aWNlLnZlcnNpb259YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihsb2dTdHJpbmcgPT4gbG9nU3RyaW5nKVxyXG4gICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgY2hlY2sgaWYgdGhpcyBwcm92aWRlciBwcm92aWRlcyBhIFZlcnNpb25TZXJ2aWNlXHJcbiAqXHJcbiAqIE5PVEU6IFVzaW5nIFByb3ZpZGVyPCdhcHAtdmVyc2lvbic+IGlzIGEgaGFjayB0byBpbmRpY2F0ZSB0aGF0IHRoZSBwcm92aWRlclxyXG4gKiBwcm92aWRlcyBWZXJzaW9uU2VydmljZS4gVGhlIHByb3ZpZGVyIGlzIG5vdCBuZWNlc3NhcmlseSBhICdhcHAtdmVyc2lvbidcclxuICogcHJvdmlkZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudCA9IHByb3ZpZGVyLmdldENvbXBvbmVudCgpO1xyXG4gICAgcmV0dXJuIChjb21wb25lbnQgPT09IG51bGwgfHwgY29tcG9uZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb21wb25lbnQudHlwZSkgPT09IFwiVkVSU0lPTlwiIC8qIFZFUlNJT04gKi87XHJcbn1cblxuY29uc3QgbmFtZSRvID0gXCJAZmlyZWJhc2UvYXBwXCI7XG5jb25zdCB2ZXJzaW9uJDEgPSBcIjAuNy41XCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoJ0BmaXJlYmFzZS9hcHAnKTtcblxuY29uc3QgbmFtZSRuID0gXCJAZmlyZWJhc2UvYXBwLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJG0gPSBcIkBmaXJlYmFzZS9hbmFseXRpY3MtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkbCA9IFwiQGZpcmViYXNlL2FuYWx5dGljc1wiO1xuXG5jb25zdCBuYW1lJGsgPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2stY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkaiA9IFwiQGZpcmViYXNlL2FwcC1jaGVja1wiO1xuXG5jb25zdCBuYW1lJGkgPSBcIkBmaXJlYmFzZS9hdXRoXCI7XG5cbmNvbnN0IG5hbWUkaCA9IFwiQGZpcmViYXNlL2F1dGgtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkZyA9IFwiQGZpcmViYXNlL2RhdGFiYXNlXCI7XG5cbmNvbnN0IG5hbWUkZiA9IFwiQGZpcmViYXNlL2RhdGFiYXNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGUgPSBcIkBmaXJlYmFzZS9mdW5jdGlvbnNcIjtcblxuY29uc3QgbmFtZSRkID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGMgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zXCI7XG5cbmNvbnN0IG5hbWUkYiA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnMtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkYSA9IFwiQGZpcmViYXNlL21lc3NhZ2luZ1wiO1xuXG5jb25zdCBuYW1lJDkgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkOCA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlXCI7XG5cbmNvbnN0IG5hbWUkNyA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDYgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnXCI7XG5cbmNvbnN0IG5hbWUkNSA9IFwiQGZpcmViYXNlL3JlbW90ZS1jb25maWctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkNCA9IFwiQGZpcmViYXNlL3N0b3JhZ2VcIjtcblxuY29uc3QgbmFtZSQzID0gXCJAZmlyZWJhc2Uvc3RvcmFnZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQyID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbmNvbnN0IG5hbWUkMSA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjkuMi4wXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBhcHAgbmFtZVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xyXG5jb25zdCBQTEFURk9STV9MT0dfU1RSSU5HID0ge1xyXG4gICAgW25hbWUkb106ICdmaXJlLWNvcmUnLFxyXG4gICAgW25hbWUkbl06ICdmaXJlLWNvcmUtY29tcGF0JyxcclxuICAgIFtuYW1lJGxdOiAnZmlyZS1hbmFseXRpY3MnLFxyXG4gICAgW25hbWUkbV06ICdmaXJlLWFuYWx5dGljcy1jb21wYXQnLFxyXG4gICAgW25hbWUkal06ICdmaXJlLWFwcC1jaGVjaycsXHJcbiAgICBbbmFtZSRrXTogJ2ZpcmUtYXBwLWNoZWNrLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRpXTogJ2ZpcmUtYXV0aCcsXHJcbiAgICBbbmFtZSRoXTogJ2ZpcmUtYXV0aC1jb21wYXQnLFxyXG4gICAgW25hbWUkZ106ICdmaXJlLXJ0ZGInLFxyXG4gICAgW25hbWUkZl06ICdmaXJlLXJ0ZGItY29tcGF0JyxcclxuICAgIFtuYW1lJGVdOiAnZmlyZS1mbicsXHJcbiAgICBbbmFtZSRkXTogJ2ZpcmUtZm4tY29tcGF0JyxcclxuICAgIFtuYW1lJGNdOiAnZmlyZS1paWQnLFxyXG4gICAgW25hbWUkYl06ICdmaXJlLWlpZC1jb21wYXQnLFxyXG4gICAgW25hbWUkYV06ICdmaXJlLWZjbScsXHJcbiAgICBbbmFtZSQ5XTogJ2ZpcmUtZmNtLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ4XTogJ2ZpcmUtcGVyZicsXHJcbiAgICBbbmFtZSQ3XTogJ2ZpcmUtcGVyZi1jb21wYXQnLFxyXG4gICAgW25hbWUkNl06ICdmaXJlLXJjJyxcclxuICAgIFtuYW1lJDVdOiAnZmlyZS1yYy1jb21wYXQnLFxyXG4gICAgW25hbWUkNF06ICdmaXJlLWdjcycsXHJcbiAgICBbbmFtZSQzXTogJ2ZpcmUtZ2NzLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQyXTogJ2ZpcmUtZnN0JyxcclxuICAgIFtuYW1lJDFdOiAnZmlyZS1mc3QtY29tcGF0JyxcclxuICAgICdmaXJlLWpzJzogJ2ZpcmUtanMnLFxyXG4gICAgW25hbWVdOiAnZmlyZS1qcy1hbGwnXHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IF9hcHBzID0gbmV3IE1hcCgpO1xyXG4vKipcclxuICogUmVnaXN0ZXJlZCBjb21wb25lbnRzLlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmNvbnN0IF9jb21wb25lbnRzID0gbmV3IE1hcCgpO1xyXG4vKipcclxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgYmVpbmcgYWRkZWQgdG8gdGhpcyBhcHAncyBjb250YWluZXJcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWRkQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGFwcC5jb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZhaWxlZCB0byByZWdpc3RlciB3aXRoIEZpcmViYXNlQXBwICR7YXBwLm5hbWV9YCwgZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KSB7XHJcbiAgICBhcHAuY29udGFpbmVyLmFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IHRvIHJlZ2lzdGVyXHJcbiAqIEByZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBjb21wb25lbnQgaXMgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHlcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfcmVnaXN0ZXJDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICBjb25zdCBjb21wb25lbnROYW1lID0gY29tcG9uZW50Lm5hbWU7XHJcbiAgICBpZiAoX2NvbXBvbmVudHMuaGFzKGNvbXBvbmVudE5hbWUpKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBUaGVyZSB3ZXJlIG11bHRpcGxlIGF0dGVtcHRzIHRvIHJlZ2lzdGVyIGNvbXBvbmVudCAke2NvbXBvbmVudE5hbWV9LmApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIF9jb21wb25lbnRzLnNldChjb21wb25lbnROYW1lLCBjb21wb25lbnQpO1xyXG4gICAgLy8gYWRkIHRoZSBjb21wb25lbnQgdG8gZXhpc3RpbmcgYXBwIGluc3RhbmNlc1xyXG4gICAgZm9yIChjb25zdCBhcHAgb2YgX2FwcHMudmFsdWVzKCkpIHtcclxuICAgICAgICBfYWRkQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIG5hbWUgLSBzZXJ2aWNlIG5hbWVcclxuICpcclxuICogQHJldHVybnMgdGhlIHByb3ZpZGVyIGZvciB0aGUgc2VydmljZSB3aXRoIHRoZSBtYXRjaGluZyBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2dldFByb3ZpZGVyKGFwcCwgbmFtZSkge1xyXG4gICAgcmV0dXJuIGFwcC5jb250YWluZXIuZ2V0UHJvdmlkZXIobmFtZSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxyXG4gKiBAcGFyYW0gaW5zdGFuY2VJZGVudGlmaWVyIC0gc2VydmljZSBpbnN0YW5jZSBpZGVudGlmaWVyIGluIGNhc2UgdGhlIHNlcnZpY2Ugc3VwcG9ydHMgbXVsdGlwbGUgaW5zdGFuY2VzXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX3JlbW92ZVNlcnZpY2VJbnN0YW5jZShhcHAsIG5hbWUsIGluc3RhbmNlSWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgX2dldFByb3ZpZGVyKGFwcCwgbmFtZSkuY2xlYXJJbnN0YW5jZShpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG59XHJcbi8qKlxyXG4gKiBUZXN0IG9ubHlcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfY2xlYXJDb21wb25lbnRzKCkge1xyXG4gICAgX2NvbXBvbmVudHMuY2xlYXIoKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBFUlJPUlMgPSB7XHJcbiAgICBbXCJuby1hcHBcIiAvKiBOT19BUFAgKi9dOiBcIk5vIEZpcmViYXNlIEFwcCAneyRhcHBOYW1lfScgaGFzIGJlZW4gY3JlYXRlZCAtIFwiICtcclxuICAgICAgICAnY2FsbCBGaXJlYmFzZSBBcHAuaW5pdGlhbGl6ZUFwcCgpJyxcclxuICAgIFtcImJhZC1hcHAtbmFtZVwiIC8qIEJBRF9BUFBfTkFNRSAqL106IFwiSWxsZWdhbCBBcHAgbmFtZTogJ3skYXBwTmFtZX1cIixcclxuICAgIFtcImR1cGxpY2F0ZS1hcHBcIiAvKiBEVVBMSUNBVEVfQVBQICovXTogXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZXhpc3RzIHdpdGggZGlmZmVyZW50IG9wdGlvbnMgb3IgY29uZmlnXCIsXHJcbiAgICBbXCJhcHAtZGVsZXRlZFwiIC8qIEFQUF9ERUxFVEVEICovXTogXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZGVsZXRlZFwiLFxyXG4gICAgW1wiaW52YWxpZC1hcHAtYXJndW1lbnRcIiAvKiBJTlZBTElEX0FQUF9BUkdVTUVOVCAqL106ICdmaXJlYmFzZS57JGFwcE5hbWV9KCkgdGFrZXMgZWl0aGVyIG5vIGFyZ3VtZW50IG9yIGEgJyArXHJcbiAgICAgICAgJ0ZpcmViYXNlIEFwcCBpbnN0YW5jZS4nLFxyXG4gICAgW1wiaW52YWxpZC1sb2ctYXJndW1lbnRcIiAvKiBJTlZBTElEX0xPR19BUkdVTUVOVCAqL106ICdGaXJzdCBhcmd1bWVudCB0byBgb25Mb2dgIG11c3QgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLidcclxufTtcclxuY29uc3QgRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoJ2FwcCcsICdGaXJlYmFzZScsIEVSUk9SUyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEZpcmViYXNlQXBwSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuX2lzRGVsZXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKTtcclxuICAgICAgICB0aGlzLl9jb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWcpO1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBjb25maWcubmFtZTtcclxuICAgICAgICB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPVxyXG4gICAgICAgICAgICBjb25maWcuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDb21wb25lbnQobmV3IENvbXBvbmVudCgnYXBwJywgKCkgPT4gdGhpcywgXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pKTtcclxuICAgIH1cclxuICAgIGdldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XHJcbiAgICB9XHJcbiAgICBzZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKHZhbCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbmFtZSgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XHJcbiAgICB9XHJcbiAgICBnZXQgb3B0aW9ucygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBnZXQgY29uZmlnKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbnRhaW5lcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgZ2V0IGlzRGVsZXRlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNEZWxldGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGlzRGVsZXRlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBhbiBFcnJvciBpZiB0aGUgQXBwIGhhcyBhbHJlYWR5IGJlZW4gZGVsZXRlZCAtXHJcbiAgICAgKiB1c2UgYmVmb3JlIHBlcmZvcm1pbmcgQVBJIGFjdGlvbnMgb24gdGhlIEFwcC5cclxuICAgICAqL1xyXG4gICAgY2hlY2tEZXN0cm95ZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLWRlbGV0ZWRcIiAvKiBBUFBfREVMRVRFRCAqLywgeyBhcHBOYW1lOiB0aGlzLl9uYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGN1cnJlbnQgU0RLIHZlcnNpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFNES19WRVJTSU9OID0gdmVyc2lvbjtcclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUFwcChvcHRpb25zLCByYXdDb25maWcgPSB7fSkge1xyXG4gICAgaWYgKHR5cGVvZiByYXdDb25maWcgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IHJhd0NvbmZpZztcclxuICAgICAgICByYXdDb25maWcgPSB7IG5hbWUgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oeyBuYW1lOiBERUZBVUxUX0VOVFJZX05BTUUsIGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDogZmFsc2UgfSwgcmF3Q29uZmlnKTtcclxuICAgIGNvbnN0IG5hbWUgPSBjb25maWcubmFtZTtcclxuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgIW5hbWUpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImJhZC1hcHAtbmFtZVwiIC8qIEJBRF9BUFBfTkFNRSAqLywge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBTdHJpbmcobmFtZSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IGV4aXN0aW5nQXBwID0gX2FwcHMuZ2V0KG5hbWUpO1xyXG4gICAgaWYgKGV4aXN0aW5nQXBwKSB7XHJcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBleGlzdGluZyBhcHAgaWYgb3B0aW9ucyBhbmQgY29uZmlnIGRlZXAgZXF1YWwgdGhlIG9uZXMgaW4gdGhlIGV4aXN0aW5nIGFwcC5cclxuICAgICAgICBpZiAoZGVlcEVxdWFsKG9wdGlvbnMsIGV4aXN0aW5nQXBwLm9wdGlvbnMpICYmXHJcbiAgICAgICAgICAgIGRlZXBFcXVhbChjb25maWcsIGV4aXN0aW5nQXBwLmNvbmZpZykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nQXBwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJkdXBsaWNhdGUtYXBwXCIgLyogRFVQTElDQVRFX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IG5ldyBDb21wb25lbnRDb250YWluZXIobmFtZSk7XHJcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBfY29tcG9uZW50cy52YWx1ZXMoKSkge1xyXG4gICAgICAgIGNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNvbnN0IG5ld0FwcCA9IG5ldyBGaXJlYmFzZUFwcEltcGwob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpO1xyXG4gICAgX2FwcHMuc2V0KG5hbWUsIG5ld0FwcCk7XHJcbiAgICByZXR1cm4gbmV3QXBwO1xyXG59XHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgYSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIFdoZW4gY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuIFdoZW4gYW4gYXBwIG5hbWVcclxuICogaXMgcHJvdmlkZWQsIHRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGF0IG5hbWUgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gaWYgdGhlIGFwcCBiZWluZyByZXRyaWV2ZWQgaGFzIG5vdCB5ZXQgYmVlblxyXG4gKiBpbml0aWFsaXplZC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gdGhlIGRlZmF1bHQgYXBwXHJcbiAqIGNvbnN0IGFwcCA9IGdldEFwcCgpO1xyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gYSBuYW1lZCBhcHBcclxuICogY29uc3Qgb3RoZXJBcHAgPSBnZXRBcHAoXCJvdGhlckFwcFwiKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBuYW1lIC0gT3B0aW9uYWwgbmFtZSBvZiB0aGUgYXBwIHRvIHJldHVybi4gSWYgbm8gbmFtZSBpc1xyXG4gKiAgIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBpcyBgXCJbREVGQVVMVF1cImAuXHJcbiAqXHJcbiAqIEByZXR1cm5zIFRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvdmlkZWQgYXBwIG5hbWUuXHJcbiAqICAgSWYgbm8gYXBwIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IGFwcCBpcyByZXR1cm5lZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwKG5hbWUgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIGNvbnN0IGFwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmICghYXBwKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHBcIiAvKiBOT19BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBhcHA7XHJcbn1cclxuLyoqXHJcbiAqIEEgKHJlYWQtb25seSkgYXJyYXkgb2YgYWxsIGluaXRpYWxpemVkIGFwcHMuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcHMoKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShfYXBwcy52YWx1ZXMoKSk7XHJcbn1cclxuLyoqXHJcbiAqIFJlbmRlcnMgdGhpcyBhcHAgdW51c2FibGUgYW5kIGZyZWVzIHRoZSByZXNvdXJjZXMgb2YgYWxsIGFzc29jaWF0ZWRcclxuICogc2VydmljZXMuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogZGVsZXRlQXBwKGFwcClcclxuICogICAudGhlbihmdW5jdGlvbigpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiQXBwIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gKiAgIH0pXHJcbiAqICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAqICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGRlbGV0aW5nIGFwcDpcIiwgZXJyb3IpO1xyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQXBwKGFwcCkge1xyXG4gICAgY29uc3QgbmFtZSA9IGFwcC5uYW1lO1xyXG4gICAgaWYgKF9hcHBzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgIF9hcHBzLmRlbGV0ZShuYW1lKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChhcHAuY29udGFpbmVyXHJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcnMoKVxyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHByb3ZpZGVyLmRlbGV0ZSgpKSk7XHJcbiAgICAgICAgYXBwLmlzRGVsZXRlZCA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFJlZ2lzdGVycyBhIGxpYnJhcnkncyBuYW1lIGFuZCB2ZXJzaW9uIGZvciBwbGF0Zm9ybSBsb2dnaW5nIHB1cnBvc2VzLlxyXG4gKiBAcGFyYW0gbGlicmFyeSAtIE5hbWUgb2YgMXAgb3IgM3AgbGlicmFyeSAoZS5nLiBmaXJlc3RvcmUsIGFuZ3VsYXJmaXJlKVxyXG4gKiBAcGFyYW0gdmVyc2lvbiAtIEN1cnJlbnQgdmVyc2lvbiBvZiB0aGF0IGxpYnJhcnkuXHJcbiAqIEBwYXJhbSB2YXJpYW50IC0gQnVuZGxlIHZhcmlhbnQsIGUuZy4sIG5vZGUsIHJuLCBldGMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyVmVyc2lvbihsaWJyYXJ5S2V5T3JOYW1lLCB2ZXJzaW9uLCB2YXJpYW50KSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICAvLyBUT0RPOiBXZSBjYW4gdXNlIHRoaXMgY2hlY2sgdG8gd2hpdGVsaXN0IHN0cmluZ3Mgd2hlbi9pZiB3ZSBzZXQgdXBcclxuICAgIC8vIGEgZ29vZCB3aGl0ZWxpc3Qgc3lzdGVtLlxyXG4gICAgbGV0IGxpYnJhcnkgPSAoX2EgPSBQTEFURk9STV9MT0dfU1RSSU5HW2xpYnJhcnlLZXlPck5hbWVdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBsaWJyYXJ5S2V5T3JOYW1lO1xyXG4gICAgaWYgKHZhcmlhbnQpIHtcclxuICAgICAgICBsaWJyYXJ5ICs9IGAtJHt2YXJpYW50fWA7XHJcbiAgICB9XHJcbiAgICBjb25zdCBsaWJyYXJ5TWlzbWF0Y2ggPSBsaWJyYXJ5Lm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICBjb25zdCB2ZXJzaW9uTWlzbWF0Y2ggPSB2ZXJzaW9uLm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICBpZiAobGlicmFyeU1pc21hdGNoIHx8IHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgIGNvbnN0IHdhcm5pbmcgPSBbXHJcbiAgICAgICAgICAgIGBVbmFibGUgdG8gcmVnaXN0ZXIgbGlicmFyeSBcIiR7bGlicmFyeX1cIiB3aXRoIHZlcnNpb24gXCIke3ZlcnNpb259XCI6YFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYGxpYnJhcnkgbmFtZSBcIiR7bGlicmFyeX1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggJiYgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaCgnYW5kJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKGB2ZXJzaW9uIG5hbWUgXCIke3ZlcnNpb259XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsb2dnZXIud2Fybih3YXJuaW5nLmpvaW4oJyAnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoYCR7bGlicmFyeX0tdmVyc2lvbmAsICgpID0+ICh7IGxpYnJhcnksIHZlcnNpb24gfSksIFwiVkVSU0lPTlwiIC8qIFZFUlNJT04gKi8pKTtcclxufVxyXG4vKipcclxuICogU2V0cyBsb2cgaGFuZGxlciBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqIEBwYXJhbSBsb2dDYWxsYmFjayAtIEFuIG9wdGlvbmFsIGN1c3RvbSBsb2cgaGFuZGxlciB0aGF0IGV4ZWN1dGVzIHVzZXIgY29kZSB3aGVuZXZlclxyXG4gKiB0aGUgRmlyZWJhc2UgU0RLIG1ha2VzIGEgbG9nZ2luZyBjYWxsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBvbkxvZyhsb2dDYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgaWYgKGxvZ0NhbGxiYWNrICE9PSBudWxsICYmIHR5cGVvZiBsb2dDYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1sb2ctYXJndW1lbnRcIiAvKiBJTlZBTElEX0xPR19BUkdVTUVOVCAqLyk7XHJcbiAgICB9XHJcbiAgICBzZXRVc2VyTG9nSGFuZGxlcihsb2dDYWxsYmFjaywgb3B0aW9ucyk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGxldmVsIGZvciBhbGwgRmlyZWJhc2UgU0RLcy5cclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIGFyZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYGluZm9gLCBlcnJvcnMgYXJlIGxvZ2dlZCwgYnV0IGBkZWJ1Z2AgYW5kXHJcbiAqIGB2ZXJib3NlYCBsb2dzIGFyZSBub3QpLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsb2dMZXZlbCkge1xyXG4gICAgc2V0TG9nTGV2ZWwkMShsb2dMZXZlbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJDb3JlQ29tcG9uZW50cyh2YXJpYW50KSB7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgncGxhdGZvcm0tbG9nZ2VyJywgY29udGFpbmVyID0+IG5ldyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsKGNvbnRhaW5lciksIFwiUFJJVkFURVwiIC8qIFBSSVZBVEUgKi8pKTtcclxuICAgIC8vIFJlZ2lzdGVyIGBhcHBgIHBhY2thZ2UuXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsIHZhcmlhbnQpO1xyXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgJ2VzbTIwMTcnKTtcclxuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcclxufVxuXG4vKipcclxuICogRmlyZWJhc2UgQXBwXHJcbiAqXHJcbiAqIEByZW1hcmtzIFRoaXMgcGFja2FnZSBjb29yZGluYXRlcyB0aGUgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIHRoZSBkaWZmZXJlbnQgRmlyZWJhc2UgY29tcG9uZW50c1xyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoJycpO1xuXG5leHBvcnQgeyBTREtfVkVSU0lPTiwgREVGQVVMVF9FTlRSWV9OQU1FIGFzIF9ERUZBVUxUX0VOVFJZX05BTUUsIF9hZGRDb21wb25lbnQsIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCwgX2FwcHMsIF9jbGVhckNvbXBvbmVudHMsIF9jb21wb25lbnRzLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgZGVsZXRlQXBwLCBnZXRBcHAsIGdldEFwcHMsIGluaXRpYWxpemVBcHAsIG9uTG9nLCByZWdpc3RlclZlcnNpb24sIHNldExvZ0xldmVsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcclxufSkgOiBmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcclxuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcclxufVxyXG4iLCJpbXBvcnQgeyBfX3ZhbHVlcywgX19yZWFkLCBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yLCBfX3NwcmVhZEFycmF5IH0gZnJvbSAndHNsaWInO1xuaW1wb3J0IHsgRGVmZXJyZWQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxyXG4gKiBDb21wb25lbnQgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG52YXIgQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIHB1YmxpYyBzZXJ2aWNlIG5hbWUsIGUuZy4gYXBwLCBhdXRoLCBmaXJlc3RvcmUsIGRhdGFiYXNlXHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2VGYWN0b3J5IFNlcnZpY2UgZmFjdG9yeSByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIHB1YmxpYyBpbnRlcmZhY2VcclxuICAgICAqIEBwYXJhbSB0eXBlIHdoZXRoZXIgdGhlIHNlcnZpY2UgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBpcyBwdWJsaWMgb3IgcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBDb21wb25lbnQobmFtZSwgaW5zdGFuY2VGYWN0b3J5LCB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlRmFjdG9yeSA9IGluc3RhbmNlRmFjdG9yeTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIHRoZSBzZXJ2aWNlIG5hbWVzcGFjZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0ge307XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IFwiTEFaWVwiIC8qIExBWlkgKi87XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLnNldEluc3RhbnRpYXRpb25Nb2RlID0gZnVuY3Rpb24gKG1vZGUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gbW9kZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLnNldE11bHRpcGxlSW5zdGFuY2VzID0gZnVuY3Rpb24gKG11bHRpcGxlSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IG11bHRpcGxlSW5zdGFuY2VzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuc2V0U2VydmljZVByb3BzID0gZnVuY3Rpb24gKHByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSBwcm9wcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLnNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDb21wb25lbnQ7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBpbnN0YW5jZSBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gJ2F1dGgnLCAnYXV0aC1pbnRlcm5hbCdcclxuICogTmFtZVNlcnZpY2VNYXBwaW5nW1RdIGlzIGFuIGFsaWFzIGZvciB0aGUgdHlwZSBvZiB0aGUgaW5zdGFuY2VcclxuICovXHJcbnZhciBQcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFByb3ZpZGVyKG5hbWUsIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMub25Jbml0Q2FsbGJhY2tzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBIHByb3ZpZGVyIGNhbiBwcm92aWRlIG11bGl0cGxlIGluc3RhbmNlcyBvZiBhIHNlcnZpY2VcclxuICAgICAqIGlmIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzIGlzIHRydWUuXHJcbiAgICAgKi9cclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaWRlbnRpZmllcikge1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgdmFyIG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlc0RlZmVycmVkLmhhcyhub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBkZWZlcnJlZCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgdGhlIHNlcnZpY2UgaWYgaXQgY2FuIGJlIGF1dG8taW5pdGlhbGl6ZWRcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgZ2V0KCksIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IHJldHVybiB0aGUgdW5yZXNvbHZlZCBwcm9taXNlIGluIHRoaXMgY2FzZS5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpLnByb21pc2U7XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmdldEltbWVkaWF0ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgdmFyIG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmlkZW50aWZpZXIpO1xyXG4gICAgICAgIHZhciBvcHRpb25hbCA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vcHRpb25hbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJbiBjYXNlIGEgY29tcG9uZW50IGlzIG5vdCBpbml0aWFsaXplZCBhbmQgc2hvdWxkL2NhbiBub3QgYmUgYXV0by1pbml0aWFsaXplZCBhdCB0aGUgbW9tZW50LCByZXR1cm4gbnVsbCBpZiB0aGUgb3B0aW9uYWwgZmxhZyBpcyBzZXQsIG9yIHRocm93XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIlNlcnZpY2UgXCIgKyB0aGlzLm5hbWUgKyBcIiBpcyBub3QgYXZhaWxhYmxlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5nZXRDb21wb25lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50O1xyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5zZXRDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdmFyIGVfMSwgX2E7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudC5uYW1lICE9PSB0aGlzLm5hbWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJNaXNtYXRjaGluZyBDb21wb25lbnQgXCIgKyBjb21wb25lbnQubmFtZSArIFwiIGZvciBQcm92aWRlciBcIiArIHRoaXMubmFtZSArIFwiLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiQ29tcG9uZW50IGZvciBcIiArIHRoaXMubmFtZSArIFwiIGhhcyBhbHJlYWR5IGJlZW4gcHJvdmlkZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gY29tcG9uZW50O1xyXG4gICAgICAgIC8vIHJldHVybiBlYXJseSB3aXRob3V0IGF0dGVtcHRpbmcgdG8gaW5pdGlhbGl6ZSB0aGUgY29tcG9uZW50IGlmIHRoZSBjb21wb25lbnQgcmVxdWlyZXMgZXhwbGljaXQgaW5pdGlhbGl6YXRpb24gKGNhbGxpbmcgYFByb3ZpZGVyLmluaXRpYWxpemUoKWApXHJcbiAgICAgICAgaWYgKCF0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiB0aGUgc2VydmljZSBpcyBlYWdlciwgaW5pdGlhbGl6ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG4gICAgICAgIGlmIChpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllcjogREVGQVVMVF9FTlRSWV9OQU1FIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IGZvciBhbiBlYWdlciBDb21wb25lbnQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgdGhlIGVhZ2VyXHJcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXphdGlvbiwgaXQgc2hvdWxkIG5vdCBjYXVzZSBhIGZhdGFsIGVycm9yLlxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogSW52ZXN0aWdhdGUgaWYgd2UgbmVlZCB0byBtYWtlIGl0IGNvbmZpZ3VyYWJsZSwgYmVjYXVzZSBzb21lIGNvbXBvbmVudCBtYXkgd2FudCB0byBjYXVzZVxyXG4gICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvciBpbiB0aGlzIGNhc2U/XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHNlcnZpY2UgaW5zdGFuY2VzIGZvciB0aGUgcGVuZGluZyBwcm9taXNlcyBhbmQgcmVzb2x2ZSB0aGVtXHJcbiAgICAgICAgICAgIC8vIE5PVEU6IGlmIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgaXMgZmFsc2UsIG9ubHkgdGhlIGRlZmF1bHQgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkXHJcbiAgICAgICAgICAgIC8vIGFuZCBhbGwgcHJvbWlzZXMgd2l0aCByZXNvbHZlIHdpdGggaXQgcmVnYXJkbGVzcyBvZiB0aGUgaWRlbnRpZmllci5cclxuICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBfZCA9IF9fcmVhZChfYy52YWx1ZSwgMiksIGluc3RhbmNlSWRlbnRpZmllciA9IF9kWzBdLCBpbnN0YW5jZURlZmVycmVkID0gX2RbMV07XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBgZ2V0T3JJbml0aWFsaXplU2VydmljZSgpYCBzaG91bGQgYWx3YXlzIHJldHVybiBhIHZhbGlkIGluc3RhbmNlIHNpbmNlIGEgY29tcG9uZW50IGlzIGd1YXJhbnRlZWQuIHVzZSAhIHRvIG1ha2UgdHlwZXNjcmlwdCBoYXBweS5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCBsZWF2ZSB0aGUgcHJvbWlzZSB1bnJlc29sdmVkLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuY2xlYXJJbnN0YW5jZSA9IGZ1bmN0aW9uIChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgaWYgKGlkZW50aWZpZXIgPT09IHZvaWQgMCkgeyBpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FOyB9XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICB9O1xyXG4gICAgLy8gYXBwLmRlbGV0ZSgpIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBvbiBldmVyeSBwcm92aWRlciB0byBkZWxldGUgdGhlIHNlcnZpY2VzXHJcbiAgICAvLyBUT0RPOiBzaG91bGQgd2UgbWFyayB0aGUgcHJvdmlkZXIgYXMgZGVsZXRlZD9cclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgc2VydmljZXM7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VzID0gQXJyYXkuZnJvbSh0aGlzLmluc3RhbmNlcy52YWx1ZXMoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgX19yZWFkKHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoc2VydmljZSkgeyByZXR1cm4gJ0lOVEVSTkFMJyBpbiBzZXJ2aWNlOyB9KSAvLyBsZWdhY3kgc2VydmljZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHNlcnZpY2UpIHsgcmV0dXJuIHNlcnZpY2UuSU5URVJOQUwuZGVsZXRlKCk7IH0pKSksIF9fcmVhZChzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHNlcnZpY2UpIHsgcmV0dXJuICdfZGVsZXRlJyBpbiBzZXJ2aWNlOyB9KSAvLyBtb2R1bGFyaXplZCBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoc2VydmljZSkgeyByZXR1cm4gc2VydmljZS5fZGVsZXRlKCk7IH0pKSkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuaXNDb21wb25lbnRTZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50ICE9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmlzSW5pdGlhbGl6ZWQgPSBmdW5jdGlvbiAoaWRlbnRpZmllcikge1xyXG4gICAgICAgIGlmIChpZGVudGlmaWVyID09PSB2b2lkIDApIHsgaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRTsgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5oYXMoaWRlbnRpZmllcik7XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmdldE9wdGlvbnMgPSBmdW5jdGlvbiAoaWRlbnRpZmllcikge1xyXG4gICAgICAgIGlmIChpZGVudGlmaWVyID09PSB2b2lkIDApIHsgaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRTsgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc09wdGlvbnMuZ2V0KGlkZW50aWZpZXIpIHx8IHt9O1xyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKG9wdHMpIHtcclxuICAgICAgICB2YXIgZV8yLCBfYTtcclxuICAgICAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7IG9wdHMgPSB7fTsgfVxyXG4gICAgICAgIHZhciBfYiA9IG9wdHMub3B0aW9ucywgb3B0aW9ucyA9IF9iID09PSB2b2lkIDAgPyB7fSA6IF9iO1xyXG4gICAgICAgIHZhciBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdHMuaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcih0aGlzLm5hbWUgKyBcIihcIiArIG5vcm1hbGl6ZWRJZGVudGlmaWVyICsgXCIpIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiQ29tcG9uZW50IFwiICsgdGhpcy5uYW1lICsgXCIgaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQgeWV0XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyLFxyXG4gICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gcmVzb2x2ZSBhbnkgcGVuZGluZyBwcm9taXNlIHdhaXRpbmcgZm9yIHRoZSBzZXJ2aWNlIGluc3RhbmNlXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2UgPSBfX3JlYWQoX2QudmFsdWUsIDIpLCBpbnN0YW5jZUlkZW50aWZpZXIgPSBfZVswXSwgaW5zdGFuY2VEZWZlcnJlZCA9IF9lWzFdO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vcm1hbGl6ZWREZWZlcnJlZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRJZGVudGlmaWVyID09PSBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfVxyXG4gICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9kICYmICFfZC5kb25lICYmIChfYSA9IF9jLnJldHVybikpIF9hLmNhbGwoX2MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGludm9rZWQgIGFmdGVyIHRoZSBwcm92aWRlciBoYXMgYmVlbiBpbml0aWFsaXplZCBieSBjYWxsaW5nIHByb3ZpZGVyLmluaXRpYWxpemUoKS5cclxuICAgICAqIFRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIFNZTkNIUk9OT1VTTFksIHNvIGl0IHNob3VsZCBub3QgZXhlY3V0ZSBhbnkgbG9uZ3J1bm5pbmcgdGFza3MgaW4gb3JkZXIgdG8gbm90IGJsb2NrIHRoZSBwcm9ncmFtLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEFuIG9wdGlvbmFsIGluc3RhbmNlIGlkZW50aWZpZXJcclxuICAgICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gdG8gdW5yZWdpc3RlciB0aGUgY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLm9uSW5pdCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgaWRlbnRpZmllcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICB2YXIgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyKTtcclxuICAgICAgICB2YXIgZXhpc3RpbmdDYWxsYmFja3MgPSAoX2EgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXcgU2V0KCk7XHJcbiAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcy5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGV4aXN0aW5nQ2FsbGJhY2tzKTtcclxuICAgICAgICB2YXIgZXhpc3RpbmdJbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2soZXhpc3RpbmdJbnN0YW5jZSwgbm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbnZva2Ugb25Jbml0IGNhbGxiYWNrcyBzeW5jaHJvbm91c2x5XHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2UgdGhlIHNlcnZpY2UgaW5zdGFuY2VgXHJcbiAgICAgKi9cclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5pbnZva2VPbkluaXRDYWxsYmFja3MgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIGlkZW50aWZpZXIpIHtcclxuICAgICAgICB2YXIgZV8zLCBfYTtcclxuICAgICAgICB2YXIgY2FsbGJhY2tzID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZm9yICh2YXIgY2FsbGJhY2tzXzEgPSBfX3ZhbHVlcyhjYWxsYmFja3MpLCBjYWxsYmFja3NfMV8xID0gY2FsbGJhY2tzXzEubmV4dCgpOyAhY2FsbGJhY2tzXzFfMS5kb25lOyBjYWxsYmFja3NfMV8xID0gY2FsbGJhY2tzXzEubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBjYWxsYmFja3NfMV8xLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhpbnN0YW5jZSwgaWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoX2IpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3JzIGluIHRoZSBvbkluaXQgY2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZV8zXzEpIHsgZV8zID0geyBlcnJvcjogZV8zXzEgfTsgfVxyXG4gICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrc18xXzEgJiYgIWNhbGxiYWNrc18xXzEuZG9uZSAmJiAoX2EgPSBjYWxsYmFja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGNhbGxiYWNrc18xKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5nZXRPckluaXRpYWxpemVTZXJ2aWNlID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgdmFyIGluc3RhbmNlSWRlbnRpZmllciA9IF9hLmluc3RhbmNlSWRlbnRpZmllciwgX2IgPSBfYS5vcHRpb25zLCBvcHRpb25zID0gX2IgPT09IHZvaWQgMCA/IHt9IDogX2I7XHJcbiAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFpbnN0YW5jZSAmJiB0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZSA9IHRoaXMuY29tcG9uZW50Lmluc3RhbmNlRmFjdG9yeSh0aGlzLmNvbnRhaW5lciwge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpbnN0YW5jZUlkZW50aWZpZXIpLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uczogb3B0aW9uc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBJbnZva2Ugb25Jbml0IGxpc3RlbmVycy5cclxuICAgICAgICAgICAgICogTm90ZSB0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCBpcyBkaWZmZXJlbnQsIHdoaWNoIGlzIHVzZWQgYnkgdGhlIGNvbXBvbmVudCBjcmVhdG9yLFxyXG4gICAgICAgICAgICAgKiB3aGlsZSBvbkluaXQgbGlzdGVuZXJzIGFyZSByZWdpc3RlcmVkIGJ5IGNvbnN1bWVycyBvZiB0aGUgcHJvdmlkZXIuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB0aGlzLmludm9rZU9uSW5pdENhbGxiYWNrcyhpbnN0YW5jZSwgaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIE9yZGVyIGlzIGltcG9ydGFudFxyXG4gICAgICAgICAgICAgKiBvbkluc3RhbmNlQ3JlYXRlZCgpIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgdGhpcy5pbnN0YW5jZXMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpOyB3aGljaFxyXG4gICAgICAgICAgICAgKiBtYWtlcyBgaXNJbml0aWFsaXplZCgpYCByZXR1cm4gdHJ1ZS5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCh0aGlzLmNvbnRhaW5lciwgaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoX2MpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3JzIGluIHRoZSBvbkluc3RhbmNlQ3JlYXRlZENhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlIHx8IG51bGw7XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllciA9IGZ1bmN0aW9uIChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgaWYgKGlkZW50aWZpZXIgPT09IHZvaWQgMCkgeyBpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FOyB9XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyA/IGlkZW50aWZpZXIgOiBERUZBVUxUX0VOVFJZX05BTUU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gaWRlbnRpZmllcjsgLy8gYXNzdW1lIG11bHRpcGxlIGluc3RhbmNlcyBhcmUgc3VwcG9ydGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIHByb3ZpZGVkLlxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuc2hvdWxkQXV0b0luaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICghIXRoaXMuY29tcG9uZW50ICYmXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlICE9PSBcIkVYUExJQ0lUXCIgLyogRVhQTElDSVQgKi8pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQcm92aWRlcjtcclxufSgpKTtcclxuLy8gdW5kZWZpbmVkIHNob3VsZCBiZSBwYXNzZWQgdG8gdGhlIHNlcnZpY2UgZmFjdG9yeSBmb3IgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuZnVuY3Rpb24gbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaWRlbnRpZmllcikge1xyXG4gICAgcmV0dXJuIGlkZW50aWZpZXIgPT09IERFRkFVTFRfRU5UUllfTkFNRSA/IHVuZGVmaW5lZCA6IGlkZW50aWZpZXI7XHJcbn1cclxuZnVuY3Rpb24gaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpIHtcclxuICAgIHJldHVybiBjb21wb25lbnQuaW5zdGFudGlhdGlvbk1vZGUgPT09IFwiRUFHRVJcIiAvKiBFQUdFUiAqLztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ29tcG9uZW50Q29udGFpbmVyIHRoYXQgcHJvdmlkZXMgUHJvdmlkZXJzIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxudmFyIENvbXBvbmVudENvbnRhaW5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENvbXBvbmVudENvbnRhaW5lcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IGJlaW5nIGFkZGVkXHJcbiAgICAgKiBAcGFyYW0gb3ZlcndyaXRlIFdoZW4gYSBjb21wb25lbnQgd2l0aCB0aGUgc2FtZSBuYW1lIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCxcclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyB0cnVlOiBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGNvbXBvbmVudCB3aXRoIHRoZSBuZXcgY29tcG9uZW50IGFuZCBjcmVhdGUgYSBuZXdcclxuICAgICAqIHByb3ZpZGVyIHdpdGggdGhlIG5ldyBjb21wb25lbnQuIEl0IGNhbiBiZSB1c2VmdWwgaW4gdGVzdHMgd2hlcmUgeW91IHdhbnQgdG8gdXNlIGRpZmZlcmVudCBtb2Nrc1xyXG4gICAgICogZm9yIGRpZmZlcmVudCB0ZXN0cy5cclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyBmYWxzZTogdGhyb3cgYW4gZXhjZXB0aW9uXHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUuYWRkQ29tcG9uZW50ID0gZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG4gICAgICAgIHZhciBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbXBvbmVudCBcIiArIGNvbXBvbmVudC5uYW1lICsgXCIgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIHdpdGggXCIgKyB0aGlzLm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm92aWRlci5zZXRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH07XHJcbiAgICBDb21wb25lbnRDb250YWluZXIucHJvdG90eXBlLmFkZE9yT3ZlcndyaXRlQ29tcG9uZW50ID0gZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG4gICAgICAgIHZhciBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgZXhpc3RpbmcgcHJvdmlkZXIgZnJvbSB0aGUgY29udGFpbmVyLCBzbyB3ZSBjYW4gcmVnaXN0ZXIgdGhlIG5ldyBjb21wb25lbnRcclxuICAgICAgICAgICAgdGhpcy5wcm92aWRlcnMuZGVsZXRlKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIGdldFByb3ZpZGVyIHByb3ZpZGVzIGEgdHlwZSBzYWZlIGludGVyZmFjZSB3aGVyZSBpdCBjYW4gb25seSBiZSBjYWxsZWQgd2l0aCBhIGZpZWxkIG5hbWVcclxuICAgICAqIHByZXNlbnQgaW4gTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZS5cclxuICAgICAqXHJcbiAgICAgKiBGaXJlYmFzZSBTREtzIHByb3ZpZGluZyBzZXJ2aWNlcyBzaG91bGQgZXh0ZW5kIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UgdG8gcmVnaXN0ZXJcclxuICAgICAqIHRoZW1zZWx2ZXMuXHJcbiAgICAgKi9cclxuICAgIENvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUuZ2V0UHJvdmlkZXIgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3ZpZGVycy5oYXMobmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzLmdldChuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY3JlYXRlIGEgUHJvdmlkZXIgZm9yIGEgc2VydmljZSB0aGF0IGhhc24ndCByZWdpc3RlcmVkIHdpdGggRmlyZWJhc2VcclxuICAgICAgICB2YXIgcHJvdmlkZXIgPSBuZXcgUHJvdmlkZXIobmFtZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcnMuc2V0KG5hbWUsIHByb3ZpZGVyKTtcclxuICAgICAgICByZXR1cm4gcHJvdmlkZXI7XHJcbiAgICB9O1xyXG4gICAgQ29tcG9uZW50Q29udGFpbmVyLnByb3RvdHlwZS5nZXRQcm92aWRlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5wcm92aWRlcnMudmFsdWVzKCkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDb21wb25lbnRDb250YWluZXI7XHJcbn0oKSk7XG5cbmV4cG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyLCBQcm92aWRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgY29udGFpbmVyIGZvciBhbGwgb2YgdGhlIExvZ2dlciBpbnN0YW5jZXNcclxuICovXHJcbmNvbnN0IGluc3RhbmNlcyA9IFtdO1xyXG4vKipcclxuICogVGhlIEpTIFNESyBzdXBwb3J0cyA1IGxvZyBsZXZlbHMgYW5kIGFsc28gYWxsb3dzIGEgdXNlciB0aGUgYWJpbGl0eSB0b1xyXG4gKiBzaWxlbmNlIHRoZSBsb2dzIGFsdG9nZXRoZXIuXHJcbiAqXHJcbiAqIFRoZSBvcmRlciBpcyBhIGZvbGxvd3M6XHJcbiAqIERFQlVHIDwgVkVSQk9TRSA8IElORk8gPCBXQVJOIDwgRVJST1JcclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIHdpbGwgYmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBJTkZPYCwgZXJyb3JzIHdpbGwgc3RpbGwgYmUgbG9nZ2VkLCBidXQgYERFQlVHYCBhbmRcclxuICogYFZFUkJPU0VgIGxvZ3Mgd2lsbCBub3QpXHJcbiAqL1xyXG52YXIgTG9nTGV2ZWw7XHJcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiREVCVUdcIl0gPSAwXSA9IFwiREVCVUdcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiVkVSQk9TRVwiXSA9IDFdID0gXCJWRVJCT1NFXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIklORk9cIl0gPSAyXSA9IFwiSU5GT1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJXQVJOXCJdID0gM10gPSBcIldBUk5cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiRVJST1JcIl0gPSA0XSA9IFwiRVJST1JcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiU0lMRU5UXCJdID0gNV0gPSBcIlNJTEVOVFwiO1xyXG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xyXG5jb25zdCBsZXZlbFN0cmluZ1RvRW51bSA9IHtcclxuICAgICdkZWJ1Zyc6IExvZ0xldmVsLkRFQlVHLFxyXG4gICAgJ3ZlcmJvc2UnOiBMb2dMZXZlbC5WRVJCT1NFLFxyXG4gICAgJ2luZm8nOiBMb2dMZXZlbC5JTkZPLFxyXG4gICAgJ3dhcm4nOiBMb2dMZXZlbC5XQVJOLFxyXG4gICAgJ2Vycm9yJzogTG9nTGV2ZWwuRVJST1IsXHJcbiAgICAnc2lsZW50JzogTG9nTGV2ZWwuU0lMRU5UXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgbGV2ZWxcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dMZXZlbCA9IExvZ0xldmVsLklORk87XHJcbi8qKlxyXG4gKiBCeSBkZWZhdWx0LCBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGRpc3BsYXllZCBpbiB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgKGluXHJcbiAqIGNocm9tZSkuIFRvIGF2b2lkIGZvcmNpbmcgdXNlcnMgdG8gaGF2ZSB0byBvcHQtaW4gdG8gdGhlc2UgbG9ncyB0d2ljZVxyXG4gKiAoaS5lLiBvbmNlIGZvciBmaXJlYmFzZSwgYW5kIG9uY2UgaW4gdGhlIGNvbnNvbGUpLCB3ZSBhcmUgc2VuZGluZyBgREVCVUdgXHJcbiAqIGxvZ3MgdG8gdGhlIGBjb25zb2xlLmxvZ2AgZnVuY3Rpb24uXHJcbiAqL1xyXG5jb25zdCBDb25zb2xlTWV0aG9kID0ge1xyXG4gICAgW0xvZ0xldmVsLkRFQlVHXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuVkVSQk9TRV06ICdsb2cnLFxyXG4gICAgW0xvZ0xldmVsLklORk9dOiAnaW5mbycsXHJcbiAgICBbTG9nTGV2ZWwuV0FSTl06ICd3YXJuJyxcclxuICAgIFtMb2dMZXZlbC5FUlJPUl06ICdlcnJvcidcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBoYW5kbGVyIHdpbGwgZm9yd2FyZCBERUJVRywgVkVSQk9TRSwgSU5GTywgV0FSTiwgYW5kIEVSUk9SXHJcbiAqIG1lc3NhZ2VzIG9uIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgY29uc29sZSBjb3VudGVycGFydHMgKGlmIHRoZSBsb2cgbWV0aG9kXHJcbiAqIGlzIHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCBsb2cgbGV2ZWwpXHJcbiAqL1xyXG5jb25zdCBkZWZhdWx0TG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbG9nVHlwZSwgLi4uYXJncykgPT4ge1xyXG4gICAgaWYgKGxvZ1R5cGUgPCBpbnN0YW5jZS5sb2dMZXZlbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIGNvbnN0IG1ldGhvZCA9IENvbnNvbGVNZXRob2RbbG9nVHlwZV07XHJcbiAgICBpZiAobWV0aG9kKSB7XHJcbiAgICAgICAgY29uc29sZVttZXRob2RdKGBbJHtub3d9XSAgJHtpbnN0YW5jZS5uYW1lfTpgLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGxvZyBhIG1lc3NhZ2Ugd2l0aCBhbiBpbnZhbGlkIGxvZ1R5cGUgKHZhbHVlOiAke2xvZ1R5cGV9KWApO1xyXG4gICAgfVxyXG59O1xyXG5jbGFzcyBMb2dnZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlcyB5b3UgYW4gaW5zdGFuY2Ugb2YgYSBMb2dnZXIgdG8gY2FwdHVyZSBtZXNzYWdlcyBhY2NvcmRpbmcgdG9cclxuICAgICAqIEZpcmViYXNlJ3MgbG9nZ2luZyBzY2hlbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdGhhdCB0aGUgbG9ncyB3aWxsIGJlIGFzc29jaWF0ZWQgd2l0aFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbG9nIGxldmVsIG9mIHRoZSBnaXZlbiBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSBkZWZhdWx0TG9nTGV2ZWw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG1haW4gKGludGVybmFsKSBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKiBDYW4gYmUgc2V0IHRvIGEgbmV3IGZ1bmN0aW9uIGluIGludGVybmFsIHBhY2thZ2UgY29kZSBidXQgbm90IGJ5IHVzZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IGRlZmF1bHRMb2dIYW5kbGVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBvcHRpb25hbCwgYWRkaXRpb25hbCwgdXNlci1kZWZpbmVkIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXB0dXJlIHRoZSBjdXJyZW50IGluc3RhbmNlIGZvciBsYXRlciB1c2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBpbnN0YW5jZXMucHVzaCh0aGlzKTtcclxuICAgIH1cclxuICAgIGdldCBsb2dMZXZlbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nTGV2ZWw7XHJcbiAgICB9XHJcbiAgICBzZXQgbG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgaWYgKCEodmFsIGluIExvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHZhbHVlIFwiJHt2YWx9XCIgYXNzaWduZWQgdG8gXFxgbG9nTGV2ZWxcXGBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvLyBXb3JrYXJvdW5kIGZvciBzZXR0ZXIvZ2V0dGVyIGhhdmluZyB0byBiZSB0aGUgc2FtZSB0eXBlLlxyXG4gICAgc2V0TG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyA/IGxldmVsU3RyaW5nVG9FbnVtW3ZhbF0gOiB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCBsb2dIYW5kbGVyKHZhbCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIGFzc2lnbmVkIHRvIGBsb2dIYW5kbGVyYCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIGdldCB1c2VyTG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckxvZ0hhbmRsZXI7XHJcbiAgICB9XHJcbiAgICBzZXQgdXNlckxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgYXJlIGFsbCBiYXNlZCBvbiB0aGUgYGNvbnNvbGVgIGludGVyZmFjZVxyXG4gICAgICovXHJcbiAgICBkZWJ1ZyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgbG9nKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJlxyXG4gICAgICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgaW5mbyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIHdhcm4oLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLldBUk4sIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBlcnJvciguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XHJcbiAgICBpbnN0YW5jZXMuZm9yRWFjaChpbnN0ID0+IHtcclxuICAgICAgICBpbnN0LnNldExvZ0xldmVsKGxldmVsKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xyXG4gICAgICAgIGxldCBjdXN0b21Mb2dMZXZlbCA9IG51bGw7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sZXZlbCkge1xyXG4gICAgICAgICAgICBjdXN0b21Mb2dMZXZlbCA9IGxldmVsU3RyaW5nVG9FbnVtW29wdGlvbnMubGV2ZWxdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobG9nQ2FsbGJhY2sgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxldmVsLCAuLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXJnc1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoYXJnID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8IHR5cGVvZiBhcmcgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoaWdub3JlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYXJnID0+IGFyZylcclxuICAgICAgICAgICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID49IChjdXN0b21Mb2dMZXZlbCAhPT0gbnVsbCAmJiBjdXN0b21Mb2dMZXZlbCAhPT0gdm9pZCAwID8gY3VzdG9tTG9nTGV2ZWwgOiBpbnN0YW5jZS5sb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dDYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiBMb2dMZXZlbFtsZXZlbF0udG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaW5zdGFuY2UubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBMb2dMZXZlbCwgTG9nZ2VyLCBzZXRMb2dMZXZlbCwgc2V0VXNlckxvZ0hhbmRsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBGaXJlYmFzZSBjb25zdGFudHMuICBTb21lIG9mIHRoZXNlIChAZGVmaW5lcykgY2FuIGJlIG92ZXJyaWRkZW4gYXQgY29tcGlsZS10aW1lLlxyXG4gKi9cclxuY29uc3QgQ09OU1RBTlRTID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIGNsaWVudCBOb2RlLmpzIFNESy5cclxuICAgICAqL1xyXG4gICAgTk9ERV9DTElFTlQ6IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIEFkbWluIE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0FETUlOOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogRmlyZWJhc2UgU0RLIFZlcnNpb25cclxuICAgICAqL1xyXG4gICAgU0RLX1ZFUlNJT046ICcke0pTQ09SRV9WRVJTSU9OfSdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgcHJvdmlkZWQgYXNzZXJ0aW9uIGlzIGZhbHN5XHJcbiAqL1xyXG5jb25zdCBhc3NlcnQgPSBmdW5jdGlvbiAoYXNzZXJ0aW9uLCBtZXNzYWdlKSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIHRocm93IGFzc2VydGlvbkVycm9yKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBhbiBFcnJvciBvYmplY3Qgc3VpdGFibGUgZm9yIHRocm93aW5nLlxyXG4gKi9cclxuY29uc3QgYXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgcmV0dXJuIG5ldyBFcnJvcignRmlyZWJhc2UgRGF0YWJhc2UgKCcgK1xyXG4gICAgICAgIENPTlNUQU5UUy5TREtfVkVSU0lPTiArXHJcbiAgICAgICAgJykgSU5URVJOQUwgQVNTRVJUIEZBSUxFRDogJyArXHJcbiAgICAgICAgbWVzc2FnZSk7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5JDEgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgoYyAmIDB4ZmMwMCkgPT09IDB4ZDgwMCAmJlxyXG4gICAgICAgICAgICBpICsgMSA8IHN0ci5sZW5ndGggJiZcclxuICAgICAgICAgICAgKHN0ci5jaGFyQ29kZUF0KGkgKyAxKSAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkge1xyXG4gICAgICAgICAgICAvLyBTdXJyb2dhdGUgUGFpclxyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArICgoYyAmIDB4MDNmZikgPDwgMTApICsgKHN0ci5jaGFyQ29kZUF0KCsraSkgJiAweDAzZmYpO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogVHVybnMgYW4gYXJyYXkgb2YgbnVtYmVycyBpbnRvIHRoZSBzdHJpbmcgZ2l2ZW4gYnkgdGhlIGNvbmNhdGVuYXRpb24gb2YgdGhlXHJcbiAqIGNoYXJhY3RlcnMgdG8gd2hpY2ggdGhlIG51bWJlcnMgY29ycmVzcG9uZC5cclxuICogQHBhcmFtIGJ5dGVzIEFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGNoYXJhY3RlcnMuXHJcbiAqIEByZXR1cm4gU3RyaW5naWZpY2F0aW9uIG9mIHRoZSBhcnJheS5cclxuICovXHJcbmNvbnN0IGJ5dGVBcnJheVRvU3RyaW5nID0gZnVuY3Rpb24gKGJ5dGVzKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcG9zID0gMCwgYyA9IDA7XHJcbiAgICB3aGlsZSAocG9zIDwgYnl0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgYzEgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgaWYgKGMxIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZShjMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMTkxICYmIGMxIDwgMjI0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDMxKSA8PCA2KSB8IChjMiAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMjM5ICYmIGMxIDwgMzY1KSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzQgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IHUgPSAoKChjMSAmIDcpIDw8IDE4KSB8ICgoYzIgJiA2MykgPDwgMTIpIHwgKChjMyAmIDYzKSA8PCA2KSB8IChjNCAmIDYzKSkgLVxyXG4gICAgICAgICAgICAgICAgMHgxMDAwMDtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZDgwMCArICh1ID4+IDEwKSk7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGRjMDAgKyAodSAmIDEwMjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAxNSkgPDwgMTIpIHwgKChjMiAmIDYzKSA8PCA2KSB8IChjMyAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dC5qb2luKCcnKTtcclxufTtcclxuLy8gV2UgZGVmaW5lIGl0IGFzIGFuIG9iamVjdCBsaXRlcmFsIGluc3RlYWQgb2YgYSBjbGFzcyBiZWNhdXNlIGEgY2xhc3MgY29tcGlsZWQgZG93biB0byBlczUgY2FuJ3RcclxuLy8gYmUgdHJlZXNoYWtlZC4gaHR0cHM6Ly9naXRodWIuY29tL3JvbGx1cC9yb2xsdXAvaXNzdWVzLzE2OTFcclxuLy8gU3RhdGljIGxvb2t1cCBtYXBzLCBsYXppbHkgcG9wdWxhdGVkIGJ5IGluaXRfKClcclxuY29uc3QgYmFzZTY0ID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIGNoYXJhY3RlcnMuXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIHdlYnNhZmUgY2hhcmFjdGVycy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyB3ZWJzYWZlIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LCBzaGFyZWQgYmV0d2VlblxyXG4gICAgICogRU5DT0RFRF9WQUxTIGFuZCBFTkNPREVEX1ZBTFNfV0VCU0FGRVxyXG4gICAgICovXHJcbiAgICBFTkNPREVEX1ZBTFNfQkFTRTogJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJyArICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicgKyAnMDEyMzQ1Njc4OScsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LiBWYWx1ZSA2NCAoPSkgaXMgc3BlY2lhbDsgaXQgbWVhbnMgXCJub3RoaW5nLlwiXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnKy89JztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIE91ciB3ZWJzYWZlIGFscGhhYmV0LlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTX1dFQlNBRkUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnLV8uJztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdGhpcyBicm93c2VyIHN1cHBvcnRzIHRoZSBhdG9iIGFuZCBidG9hIGZ1bmN0aW9ucy4gVGhpcyBleHRlbnNpb25cclxuICAgICAqIHN0YXJ0ZWQgYXQgTW96aWxsYSBidXQgaXMgbm93IGltcGxlbWVudGVkIGJ5IG1hbnkgYnJvd3NlcnMuIFdlIHVzZSB0aGVcclxuICAgICAqIEFTU1VNRV8qIHZhcmlhYmxlcyB0byBhdm9pZCBwdWxsaW5nIGluIHRoZSBmdWxsIHVzZXJhZ2VudCBkZXRlY3Rpb24gbGlicmFyeVxyXG4gICAgICogYnV0IHN0aWxsIGFsbG93aW5nIHRoZSBzdGFuZGFyZCBwZXItYnJvd3NlciBjb21waWxhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBIQVNfTkFUSVZFX1NVUFBPUlQ6IHR5cGVvZiBhdG9iID09PSAnZnVuY3Rpb24nLFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGFuIGFycmF5IG9mIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBBbiBhcnJheSBvZiBieXRlcyAobnVtYmVycyB3aXRoXHJcbiAgICAgKiAgICAgdmFsdWUgaW4gWzAsIDI1NV0pIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIEJvb2xlYW4gaW5kaWNhdGluZyB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBlbmNvZGVCeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdlbmNvZGVCeXRlQXJyYXkgdGFrZXMgYW4gYXJyYXkgYXMgYSBwYXJhbWV0ZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGJ5dGVUb0NoYXJNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmJ5dGVUb0NoYXJNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpICs9IDMpIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBpbnB1dFtpXTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSArIDEgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUyID0gaGF2ZUJ5dGUyID8gaW5wdXRbaSArIDFdIDogMDtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSArIDIgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gaW5wdXRbaSArIDJdIDogMDtcclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSBieXRlMSA+PiAyO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTEgJiAweDAzKSA8PCA0KSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgbGV0IG91dEJ5dGUzID0gKChieXRlMiAmIDB4MGYpIDw8IDIpIHwgKGJ5dGUzID4+IDYpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTQgPSBieXRlMyAmIDB4M2Y7XHJcbiAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUzKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRCeXRlNCA9IDY0O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRCeXRlMyA9IDY0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTFdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUyXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlM10sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTRdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dC5qb2luKCcnKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEEgc3RyaW5nIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIElmIHRydWUsIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYnRvYShpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZUJ5dGVBcnJheShzdHJpbmdUb0J5dGVBcnJheSQxKGlucHV0KSwgd2ViU2FmZSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXRvYihpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBieXRlQXJyYXlUb1N0cmluZyh0aGlzLmRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEluIGJhc2UtNjQgZGVjb2RpbmcsIGdyb3VwcyBvZiBmb3VyIGNoYXJhY3RlcnMgYXJlIGNvbnZlcnRlZCBpbnRvIHRocmVlXHJcbiAgICAgKiBieXRlcy4gIElmIHRoZSBlbmNvZGVyIGRpZCBub3QgYXBwbHkgcGFkZGluZywgdGhlIGlucHV0IGxlbmd0aCBtYXkgbm90XHJcbiAgICAgKiBiZSBhIG11bHRpcGxlIG9mIDQuXHJcbiAgICAgKlxyXG4gICAgICogSW4gdGhpcyBjYXNlLCB0aGUgbGFzdCBncm91cCB3aWxsIGhhdmUgZmV3ZXIgdGhhbiA0IGNoYXJhY3RlcnMsIGFuZFxyXG4gICAgICogcGFkZGluZyB3aWxsIGJlIGluZmVycmVkLiAgSWYgdGhlIGdyb3VwIGhhcyBvbmUgb3IgdHdvIGNoYXJhY3RlcnMsIGl0IGRlY29kZXNcclxuICAgICAqIHRvIG9uZSBieXRlLiAgSWYgdGhlIGdyb3VwIGhhcyB0aHJlZSBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzIHRvIHR3byBieXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgSW5wdXQgdG8gZGVjb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZSB3ZWItc2FmZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBkZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIHRoaXMuaW5pdF8oKTtcclxuICAgICAgICBjb25zdCBjaGFyVG9CeXRlTWFwID0gd2ViU2FmZVxyXG4gICAgICAgICAgICA/IHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfXHJcbiAgICAgICAgICAgIDogdGhpcy5jaGFyVG9CeXRlTWFwXztcclxuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDspIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKyspXTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiAwO1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMyA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGU0ID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTQgPSBoYXZlQnl0ZTQgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTEgPT0gbnVsbCB8fCBieXRlMiA9PSBudWxsIHx8IGJ5dGUzID09IG51bGwgfHwgYnl0ZTQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IChieXRlMSA8PCAyKSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTEpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTMgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTIgPDwgNCkgJiAweGYwKSB8IChieXRlMyA+PiAyKTtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUyKTtcclxuICAgICAgICAgICAgICAgIGlmIChieXRlNCAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMyA9ICgoYnl0ZTMgPDwgNikgJiAweGMwKSB8IGJ5dGU0O1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogTGF6eSBzdGF0aWMgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uIENhbGxlZCBiZWZvcmVcclxuICAgICAqIGFjY2Vzc2luZyBhbnkgb2YgdGhlIHN0YXRpYyBtYXAgdmFyaWFibGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW5pdF8oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJ5dGVUb0NoYXJNYXBfKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICAvLyBXZSB3YW50IHF1aWNrIG1hcHBpbmdzIGJhY2sgYW5kIGZvcnRoLCBzbyB3ZSBwcmVjb21wdXRlIHR3byBtYXBzLlxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuRU5DT0RFRF9WQUxTLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIC8vIEJlIGZvcmdpdmluZyB3aGVuIGRlY29kaW5nIGFuZCBjb3JyZWN0bHkgZGVjb2RlIGJvdGggZW5jb2RpbmdzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmdcclxuICovXHJcbmNvbnN0IGJhc2U2NEVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGNvbnN0IHV0ZjhCeXRlcyA9IHN0cmluZ1RvQnl0ZUFycmF5JDEoc3RyKTtcclxuICAgIHJldHVybiBiYXNlNjQuZW5jb2RlQnl0ZUFycmF5KHV0ZjhCeXRlcywgdHJ1ZSk7XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmcgKHdpdGhvdXQgXCIuXCIgcGFkZGluZyBpbiB0aGUgZW5kKS5cclxuICogZS5nLiBVc2VkIGluIEpTT04gV2ViIFRva2VuIChKV1QpIHBhcnRzLlxyXG4gKi9cclxuY29uc3QgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBVc2UgYmFzZTY0dXJsIGVuY29kaW5nIGFuZCByZW1vdmUgcGFkZGluZyBpbiB0aGUgZW5kIChkb3QgY2hhcmFjdGVycykuXHJcbiAgICByZXR1cm4gYmFzZTY0RW5jb2RlKHN0cikucmVwbGFjZSgvXFwuL2csICcnKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBkZWNvZGluZ1xyXG4gKlxyXG4gKiBOT1RFOiBETyBOT1QgdXNlIHRoZSBnbG9iYWwgYXRvYigpIGZ1bmN0aW9uIC0gaXQgZG9lcyBOT1Qgc3VwcG9ydCB0aGVcclxuICogYmFzZTY0VXJsIHZhcmlhbnQgZW5jb2RpbmcuXHJcbiAqXHJcbiAqIEBwYXJhbSBzdHIgVG8gYmUgZGVjb2RlZFxyXG4gKiBAcmV0dXJuIERlY29kZWQgcmVzdWx0LCBpZiBwb3NzaWJsZVxyXG4gKi9cclxuY29uc3QgYmFzZTY0RGVjb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gYmFzZTY0LmRlY29kZVN0cmluZyhzdHIsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdiYXNlNjREZWNvZGUgZmFpbGVkOiAnLCBlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRG8gYSBkZWVwLWNvcHkgb2YgYmFzaWMgSmF2YVNjcmlwdCBPYmplY3RzIG9yIEFycmF5cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBDb3B5KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gZGVlcEV4dGVuZCh1bmRlZmluZWQsIHZhbHVlKTtcclxufVxyXG4vKipcclxuICogQ29weSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIHRvIHRhcmdldCAocmVjdXJzaXZlbHkgYWxsb3dzIGV4dGVuc2lvblxyXG4gKiBvZiBPYmplY3RzIGFuZCBBcnJheXMpLiAgU2NhbGFyIHZhbHVlcyBpbiB0aGUgdGFyZ2V0IGFyZSBvdmVyLXdyaXR0ZW4uXHJcbiAqIElmIHRhcmdldCBpcyB1bmRlZmluZWQsIGFuIG9iamVjdCBvZiB0aGUgYXBwcm9wcmlhdGUgdHlwZSB3aWxsIGJlIGNyZWF0ZWRcclxuICogKGFuZCByZXR1cm5lZCkuXHJcbiAqXHJcbiAqIFdlIHJlY3Vyc2l2ZWx5IGNvcHkgYWxsIGNoaWxkIHByb3BlcnRpZXMgb2YgcGxhaW4gT2JqZWN0cyBpbiB0aGUgc291cmNlLSBzb1xyXG4gKiB0aGF0IG5hbWVzcGFjZS0gbGlrZSBkaWN0aW9uYXJpZXMgYXJlIG1lcmdlZC5cclxuICpcclxuICogTm90ZSB0aGF0IHRoZSB0YXJnZXQgY2FuIGJlIGEgZnVuY3Rpb24sIGluIHdoaWNoIGNhc2UgdGhlIHByb3BlcnRpZXMgaW5cclxuICogdGhlIHNvdXJjZSBPYmplY3QgYXJlIGNvcGllZCBvbnRvIGl0IGFzIHN0YXRpYyBwcm9wZXJ0aWVzIG9mIHRoZSBGdW5jdGlvbi5cclxuICpcclxuICogTm90ZTogd2UgZG9uJ3QgbWVyZ2UgX19wcm90b19fIHRvIHByZXZlbnQgcHJvdG90eXBlIHBvbGx1dGlvblxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcEV4dGVuZCh0YXJnZXQsIHNvdXJjZSkge1xyXG4gICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgT2JqZWN0KSkge1xyXG4gICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHNvdXJjZS5jb25zdHJ1Y3Rvcikge1xyXG4gICAgICAgIGNhc2UgRGF0ZTpcclxuICAgICAgICAgICAgLy8gVHJlYXQgRGF0ZXMgbGlrZSBzY2FsYXJzOyBpZiB0aGUgdGFyZ2V0IGRhdGUgb2JqZWN0IGhhZCBhbnkgY2hpbGRcclxuICAgICAgICAgICAgLy8gcHJvcGVydGllcyAtIHRoZXkgd2lsbCBiZSBsb3N0IVxyXG4gICAgICAgICAgICBjb25zdCBkYXRlVmFsdWUgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlVmFsdWUuZ2V0VGltZSgpKTtcclxuICAgICAgICBjYXNlIE9iamVjdDpcclxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEFycmF5OlxyXG4gICAgICAgICAgICAvLyBBbHdheXMgY29weSB0aGUgYXJyYXkgc291cmNlIGFuZCBvdmVyd3JpdGUgdGhlIHRhcmdldC5cclxuICAgICAgICAgICAgdGFyZ2V0ID0gW107XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIC8vIE5vdCBhIHBsYWluIE9iamVjdCAtIHRyZWF0IGl0IGFzIGEgc2NhbGFyLlxyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBwcm9wIGluIHNvdXJjZSkge1xyXG4gICAgICAgIC8vIHVzZSBpc1ZhbGlkS2V5IHRvIGd1YXJkIGFnYWluc3QgcHJvdG90eXBlIHBvbGx1dGlvbi4gU2VlIGh0dHBzOi8vc255ay5pby92dWxuL1NOWUstSlMtTE9EQVNILTQ1MDIwMlxyXG4gICAgICAgIGlmICghc291cmNlLmhhc093blByb3BlcnR5KHByb3ApIHx8ICFpc1ZhbGlkS2V5KHByb3ApKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBkZWVwRXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXQ7XHJcbn1cclxuZnVuY3Rpb24gaXNWYWxpZEtleShrZXkpIHtcclxuICAgIHJldHVybiBrZXkgIT09ICdfX3Byb3RvX18nO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIERlZmVycmVkIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmVqZWN0ID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZSA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgQVBJIGludGVybmFscyBhcmUgbm90IHByb21pc2VpZmllZCBhbmQgY2Fubm90IGJlY2F1c2Ugb3VyIGNhbGxiYWNrIEFQSXMgaGF2ZSBzdWJ0bGUgZXhwZWN0YXRpb25zIGFyb3VuZFxyXG4gICAgICogaW52b2tpbmcgcHJvbWlzZXMgaW5saW5lLCB3aGljaCBQcm9taXNlcyBhcmUgZm9yYmlkZGVuIHRvIGRvLiBUaGlzIG1ldGhvZCBhY2NlcHRzIGFuIG9wdGlvbmFsIG5vZGUtc3R5bGUgY2FsbGJhY2tcclxuICAgICAqIGFuZCByZXR1cm5zIGEgbm9kZS1zdHlsZSBjYWxsYmFjayB3aGljaCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBEZWZlcnJlZCdzIHByb21pc2UuXHJcbiAgICAgKi9cclxuICAgIHdyYXBDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiAoZXJyb3IsIHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2hpbmcgbm9vcCBoYW5kbGVyIGp1c3QgaW4gY2FzZSBkZXZlbG9wZXIgd2Fzbid0IGV4cGVjdGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gU29tZSBvZiBvdXIgY2FsbGJhY2tzIGRvbid0IGV4cGVjdCBhIHZhbHVlIGFuZCBvdXIgb3duIHRlc3RzXHJcbiAgICAgICAgICAgICAgICAvLyBhc3NlcnQgdGhhdCB0aGUgcGFyYW1ldGVyIGxlbmd0aCBpcyAxXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTW9ja1VzZXJUb2tlbih0b2tlbiwgcHJvamVjdElkKSB7XHJcbiAgICBpZiAodG9rZW4udWlkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgXCJ1aWRcIiBmaWVsZCBpcyBubyBsb25nZXIgc3VwcG9ydGVkIGJ5IG1vY2tVc2VyVG9rZW4uIFBsZWFzZSB1c2UgXCJzdWJcIiBpbnN0ZWFkIGZvciBGaXJlYmFzZSBBdXRoIFVzZXIgSUQuJyk7XHJcbiAgICB9XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgXCJub25lXCIgYXMgdGhlIGFsZ29yaXRobS5cclxuICAgIGNvbnN0IGhlYWRlciA9IHtcclxuICAgICAgICBhbGc6ICdub25lJyxcclxuICAgICAgICB0eXBlOiAnSldUJ1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0SWQgfHwgJ2RlbW8tcHJvamVjdCc7XHJcbiAgICBjb25zdCBpYXQgPSB0b2tlbi5pYXQgfHwgMDtcclxuICAgIGNvbnN0IHN1YiA9IHRva2VuLnN1YiB8fCB0b2tlbi51c2VyX2lkO1xyXG4gICAgaWYgKCFzdWIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oeyBcclxuICAgICAgICAvLyBTZXQgYWxsIHJlcXVpcmVkIGZpZWxkcyB0byBkZWNlbnQgZGVmYXVsdHNcclxuICAgICAgICBpc3M6IGBodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vJHtwcm9qZWN0fWAsIGF1ZDogcHJvamVjdCwgaWF0LCBleHA6IGlhdCArIDM2MDAsIGF1dGhfdGltZTogaWF0LCBzdWIsIHVzZXJfaWQ6IHN1YiwgZmlyZWJhc2U6IHtcclxuICAgICAgICAgICAgc2lnbl9pbl9wcm92aWRlcjogJ2N1c3RvbScsXHJcbiAgICAgICAgICAgIGlkZW50aXRpZXM6IHt9XHJcbiAgICAgICAgfSB9LCB0b2tlbik7XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgdGhlIGVtcHR5IHN0cmluZyBhcyBhIHNpZ25hdHVyZS5cclxuICAgIGNvbnN0IHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShoZWFkZXIpKSxcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShwYXlsb2FkKSksXHJcbiAgICAgICAgc2lnbmF0dXJlXHJcbiAgICBdLmpvaW4oJy4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBuYXZpZ2F0b3IudXNlckFnZW50IHN0cmluZyBvciAnJyBpZiBpdCdzIG5vdCBkZWZpbmVkLlxyXG4gKiBAcmV0dXJuIHVzZXIgYWdlbnQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRVQSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQ29yZG92YSAvIFBob25lR2FwIC8gSW9uaWMgZnJhbWV3b3JrcyBvbiBhIG1vYmlsZSBkZXZpY2UuXHJcbiAqXHJcbiAqIERlbGliZXJhdGVseSBkb2VzIG5vdCByZWx5IG9uIGNoZWNraW5nIGBmaWxlOi8vYCBVUkxzIChhcyB0aGlzIGZhaWxzIFBob25lR2FwXHJcbiAqIGluIHRoZSBSaXBwbGUgZW11bGF0b3IpIG5vciBDb3Jkb3ZhIGBvbkRldmljZVJlYWR5YCwgd2hpY2ggd291bGQgbm9ybWFsbHlcclxuICogd2FpdCBmb3IgYSBjYWxsYmFjay5cclxuICovXHJcbmZ1bmN0aW9uIGlzTW9iaWxlQ29yZG92YSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFNldHRpbmcgdXAgYW4gYnJvYWRseSBhcHBsaWNhYmxlIGluZGV4IHNpZ25hdHVyZSBmb3IgV2luZG93XHJcbiAgICAgICAgLy8ganVzdCB0byBkZWFsIHdpdGggdGhpcyBjYXNlIHdvdWxkIHByb2JhYmx5IGJlIGEgYmFkIGlkZWEuXHJcbiAgICAgICAgISEod2luZG93Wydjb3Jkb3ZhJ10gfHwgd2luZG93WydwaG9uZWdhcCddIHx8IHdpbmRvd1snUGhvbmVHYXAnXSkgJiZcclxuICAgICAgICAvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdChnZXRVQSgpKSk7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBOb2RlLmpzLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgTm9kZS5qcyBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cclxuICovXHJcbi8vIE5vZGUgZGV0ZWN0aW9uIGxvZ2ljIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9pbGlha2FuL2RldGVjdC1ub2RlL1xyXG5mdW5jdGlvbiBpc05vZGUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQnJvd3NlciBFbnZpcm9ubWVudFxyXG4gKi9cclxuZnVuY3Rpb24gaXNCcm93c2VyKCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBzZWxmID09PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGY7XHJcbn1cclxuZnVuY3Rpb24gaXNCcm93c2VyRXh0ZW5zaW9uKCkge1xyXG4gICAgY29uc3QgcnVudGltZSA9IHR5cGVvZiBjaHJvbWUgPT09ICdvYmplY3QnXHJcbiAgICAgICAgPyBjaHJvbWUucnVudGltZVxyXG4gICAgICAgIDogdHlwZW9mIGJyb3dzZXIgPT09ICdvYmplY3QnXHJcbiAgICAgICAgICAgID8gYnJvd3Nlci5ydW50aW1lXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBydW50aW1lID09PSAnb2JqZWN0JyAmJiBydW50aW1lLmlkICE9PSB1bmRlZmluZWQ7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBSZWFjdCBOYXRpdmUuXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBSZWFjdE5hdGl2ZSBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzUmVhY3ROYXRpdmUoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmIG5hdmlnYXRvclsncHJvZHVjdCddID09PSAnUmVhY3ROYXRpdmUnKTtcclxufVxyXG4vKiogRGV0ZWN0cyBFbGVjdHJvbiBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc0VsZWN0cm9uKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignRWxlY3Ryb24vJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBJbnRlcm5ldCBFeHBsb3Jlci4gKi9cclxuZnVuY3Rpb24gaXNJRSgpIHtcclxuICAgIGNvbnN0IHVhID0gZ2V0VUEoKTtcclxuICAgIHJldHVybiB1YS5pbmRleE9mKCdNU0lFICcpID49IDAgfHwgdWEuaW5kZXhPZignVHJpZGVudC8nKSA+PSAwO1xyXG59XHJcbi8qKiBEZXRlY3RzIFVuaXZlcnNhbCBXaW5kb3dzIFBsYXRmb3JtIGFwcHMuICovXHJcbmZ1bmN0aW9uIGlzVVdQKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignTVNBcHBIb3N0LycpID49IDA7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCB3aGV0aGVyIHRoZSBjdXJyZW50IFNESyBidWlsZCBpcyB0aGUgTm9kZSB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaXQncyB0aGUgTm9kZSBTREsgYnVpbGQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc05vZGVTZGsoKSB7XHJcbiAgICByZXR1cm4gQ09OU1RBTlRTLk5PREVfQ0xJRU5UID09PSB0cnVlIHx8IENPTlNUQU5UUy5OT0RFX0FETUlOID09PSB0cnVlO1xyXG59XHJcbi8qKiBSZXR1cm5zIHRydWUgaWYgd2UgYXJlIHJ1bm5pbmcgaW4gU2FmYXJpLiAqL1xyXG5mdW5jdGlvbiBpc1NhZmFyaSgpIHtcclxuICAgIHJldHVybiAoIWlzTm9kZSgpICYmXHJcbiAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnU2FmYXJpJykgJiZcclxuICAgICAgICAhbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnQ2hyb21lJykpO1xyXG59XHJcbi8qKlxyXG4gKiBUaGlzIG1ldGhvZCBjaGVja3MgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKi9cclxuZnVuY3Rpb24gaXNJbmRleGVkREJBdmFpbGFibGUoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIGluZGV4ZWREQiA9PT0gJ29iamVjdCc7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIHZhbGlkYXRlcyBicm93c2VyL3N3IGNvbnRleHQgZm9yIGluZGV4ZWREQiBieSBvcGVuaW5nIGEgZHVtbXkgaW5kZXhlZERCIGRhdGFiYXNlIGFuZCByZWplY3RcclxuICogaWYgZXJyb3JzIG9jY3VyIGR1cmluZyB0aGUgZGF0YWJhc2Ugb3BlbiBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIEB0aHJvd3MgZXhjZXB0aW9uIGlmIGN1cnJlbnQgYnJvd3Nlci9zdyBjb250ZXh0IGNhbid0IHJ1biBpZGIub3BlbiAoZXg6IFNhZmFyaSBpZnJhbWUsIEZpcmVmb3hcclxuICogcHJpdmF0ZSBicm93c2luZylcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBwcmVFeGlzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IERCX0NIRUNLX05BTUUgPSAndmFsaWRhdGUtYnJvd3Nlci1jb250ZXh0LWZvci1pbmRleGVkZGItYW5hbHl0aWNzLW1vZHVsZSc7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzZWxmLmluZGV4ZWREQi5vcGVuKERCX0NIRUNLX05BTUUpO1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzdWx0LmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBkZWxldGUgZGF0YWJhc2Ugb25seSB3aGVuIGl0IGRvZXNuJ3QgcHJlLWV4aXN0XHJcbiAgICAgICAgICAgICAgICBpZiAoIXByZUV4aXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHByZUV4aXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgoKF9hID0gcmVxdWVzdC5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2UpIHx8ICcnKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyB3aGV0aGVyIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICogQHJldHVybiB0cnVlIGlmIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICovXHJcbmZ1bmN0aW9uIGFyZUNvb2tpZXNFbmFibGVkKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IuY29va2llRW5hYmxlZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKiBQb2x5ZmlsbCBmb3IgYGdsb2JhbFRoaXNgIG9iamVjdC5cclxuICogQHJldHVybnMgdGhlIGBnbG9iYWxUaGlzYCBvYmplY3QgZm9yIHRoZSBnaXZlbiBlbnZpcm9ubWVudC5cclxuICovXHJcbmZ1bmN0aW9uIGdldEdsb2JhbCgpIHtcclxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gc2VsZjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3c7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gZ2xvYmFsO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QuJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU3RhbmRhcmRpemVkIEZpcmViYXNlIEVycm9yLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICpcclxuICogICAvLyBUeXBlc2NyaXB0IHN0cmluZyBsaXRlcmFscyBmb3IgdHlwZS1zYWZlIGNvZGVzXHJcbiAqICAgdHlwZSBFcnIgPVxyXG4gKiAgICAgJ3Vua25vd24nIHxcclxuICogICAgICdvYmplY3Qtbm90LWZvdW5kJ1xyXG4gKiAgICAgO1xyXG4gKlxyXG4gKiAgIC8vIENsb3N1cmUgZW51bSBmb3IgdHlwZS1zYWZlIGVycm9yIGNvZGVzXHJcbiAqICAgLy8gYXQtZW51bSB7c3RyaW5nfVxyXG4gKiAgIHZhciBFcnIgPSB7XHJcbiAqICAgICBVTktOT1dOOiAndW5rbm93bicsXHJcbiAqICAgICBPQkpFQ1RfTk9UX0ZPVU5EOiAnb2JqZWN0LW5vdC1mb3VuZCcsXHJcbiAqICAgfVxyXG4gKlxyXG4gKiAgIGxldCBlcnJvcnM6IE1hcDxFcnIsIHN0cmluZz4gPSB7XHJcbiAqICAgICAnZ2VuZXJpYy1lcnJvcic6IFwiVW5rbm93biBlcnJvclwiLFxyXG4gKiAgICAgJ2ZpbGUtbm90LWZvdW5kJzogXCJDb3VsZCBub3QgZmluZCBmaWxlOiB7JGZpbGV9XCIsXHJcbiAqICAgfTtcclxuICpcclxuICogICAvLyBUeXBlLXNhZmUgZnVuY3Rpb24gLSBtdXN0IHBhc3MgYSB2YWxpZCBlcnJvciBjb2RlIGFzIHBhcmFtLlxyXG4gKiAgIGxldCBlcnJvciA9IG5ldyBFcnJvckZhY3Rvcnk8RXJyPignc2VydmljZScsICdTZXJ2aWNlJywgZXJyb3JzKTtcclxuICpcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkdFTkVSSUMpO1xyXG4gKiAgIC4uLlxyXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuRklMRV9OT1RfRk9VTkQsIHsnZmlsZSc6IGZpbGVOYW1lfSk7XHJcbiAqICAgLi4uXHJcbiAqICAgLy8gU2VydmljZTogQ291bGQgbm90IGZpbGUgZmlsZTogZm9vLnR4dCAoc2VydmljZS9maWxlLW5vdC1mb3VuZCkuXHJcbiAqXHJcbiAqICAgY2F0Y2ggKGUpIHtcclxuICogICAgIGFzc2VydChlLm1lc3NhZ2UgPT09IFwiQ291bGQgbm90IGZpbmQgZmlsZTogZm9vLnR4dC5cIik7XHJcbiAqICAgICBpZiAoZS5jb2RlID09PSAnc2VydmljZS9maWxlLW5vdC1mb3VuZCcpIHtcclxuICogICAgICAgY29uc29sZS5sb2coXCJDb3VsZCBub3QgcmVhZCBmaWxlOiBcIiArIGVbJ2ZpbGUnXSk7XHJcbiAqICAgICB9XHJcbiAqICAgfVxyXG4gKi9cclxuY29uc3QgRVJST1JfTkFNRSA9ICdGaXJlYmFzZUVycm9yJztcclxuLy8gQmFzZWQgb24gY29kZSBmcm9tOlxyXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNDdXN0b21fRXJyb3JfVHlwZXNcclxuY2xhc3MgRmlyZWJhc2VFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvZGUsIG1lc3NhZ2UsIGN1c3RvbURhdGEpIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IGN1c3RvbURhdGE7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gRVJST1JfTkFNRTtcclxuICAgICAgICAvLyBGaXggRm9yIEVTNVxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC13aWtpL2Jsb2IvbWFzdGVyL0JyZWFraW5nLUNoYW5nZXMubWQjZXh0ZW5kaW5nLWJ1aWx0LWlucy1saWtlLWVycm9yLWFycmF5LWFuZC1tYXAtbWF5LW5vLWxvbmdlci13b3JrXHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEZpcmViYXNlRXJyb3IucHJvdG90eXBlKTtcclxuICAgICAgICAvLyBNYWludGFpbnMgcHJvcGVyIHN0YWNrIHRyYWNlIGZvciB3aGVyZSBvdXIgZXJyb3Igd2FzIHRocm93bi5cclxuICAgICAgICAvLyBPbmx5IGF2YWlsYWJsZSBvbiBWOC5cclxuICAgICAgICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcclxuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgRXJyb3JGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5jbGFzcyBFcnJvckZhY3Rvcnkge1xyXG4gICAgY29uc3RydWN0b3Ioc2VydmljZSwgc2VydmljZU5hbWUsIGVycm9ycykge1xyXG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlTmFtZSA9IHNlcnZpY2VOYW1lO1xyXG4gICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xyXG4gICAgfVxyXG4gICAgY3JlYXRlKGNvZGUsIC4uLmRhdGEpIHtcclxuICAgICAgICBjb25zdCBjdXN0b21EYXRhID0gZGF0YVswXSB8fCB7fTtcclxuICAgICAgICBjb25zdCBmdWxsQ29kZSA9IGAke3RoaXMuc2VydmljZX0vJHtjb2RlfWA7XHJcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLmVycm9yc1tjb2RlXTtcclxuICAgICAgICBjb25zdCBtZXNzYWdlID0gdGVtcGxhdGUgPyByZXBsYWNlVGVtcGxhdGUodGVtcGxhdGUsIGN1c3RvbURhdGEpIDogJ0Vycm9yJztcclxuICAgICAgICAvLyBTZXJ2aWNlIE5hbWU6IEVycm9yIG1lc3NhZ2UgKHNlcnZpY2UvY29kZSkuXHJcbiAgICAgICAgY29uc3QgZnVsbE1lc3NhZ2UgPSBgJHt0aGlzLnNlcnZpY2VOYW1lfTogJHttZXNzYWdlfSAoJHtmdWxsQ29kZX0pLmA7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRmlyZWJhc2VFcnJvcihmdWxsQ29kZSwgZnVsbE1lc3NhZ2UsIGN1c3RvbURhdGEpO1xyXG4gICAgICAgIHJldHVybiBlcnJvcjtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiByZXBsYWNlVGVtcGxhdGUodGVtcGxhdGUsIGRhdGEpIHtcclxuICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKFBBVFRFUk4sIChfLCBrZXkpID0+IHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IGRhdGFba2V5XTtcclxuICAgICAgICByZXR1cm4gdmFsdWUgIT0gbnVsbCA/IFN0cmluZyh2YWx1ZSkgOiBgPCR7a2V5fT8+YDtcclxuICAgIH0pO1xyXG59XHJcbmNvbnN0IFBBVFRFUk4gPSAvXFx7XFwkKFtefV0rKX0vZztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEV2YWx1YXRlcyBhIEpTT04gc3RyaW5nIGludG8gYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciBBIHN0cmluZyBjb250YWluaW5nIEpTT04uXHJcbiAqIEByZXR1cm4geyp9IFRoZSBqYXZhc2NyaXB0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHNwZWNpZmllZCBKU09OLlxyXG4gKi9cclxuZnVuY3Rpb24ganNvbkV2YWwoc3RyKSB7XHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZShzdHIpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIEpTT04gcmVwcmVzZW50aW5nIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqIEBwYXJhbSB7Kn0gZGF0YSBKYXZhc2NyaXB0IG9iamVjdCB0byBiZSBzdHJpbmdpZmllZC5cclxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgSlNPTiBjb250ZW50cyBvZiB0aGUgb2JqZWN0LlxyXG4gKi9cclxuZnVuY3Rpb24gc3RyaW5naWZ5KGRhdGEpIHtcclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGludG8gY29uc3RpdHVlbnQgcGFydHMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gd2l0aCBpbnZhbGlkIC8gaW5jb21wbGV0ZSBjbGFpbXMgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBkZWNvZGUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGxldCBoZWFkZXIgPSB7fSwgY2xhaW1zID0ge30sIGRhdGEgPSB7fSwgc2lnbmF0dXJlID0gJyc7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBhcnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcclxuICAgICAgICBoZWFkZXIgPSBqc29uRXZhbChiYXNlNjREZWNvZGUocGFydHNbMF0pIHx8ICcnKTtcclxuICAgICAgICBjbGFpbXMgPSBqc29uRXZhbChiYXNlNjREZWNvZGUocGFydHNbMV0pIHx8ICcnKTtcclxuICAgICAgICBzaWduYXR1cmUgPSBwYXJ0c1syXTtcclxuICAgICAgICBkYXRhID0gY2xhaW1zWydkJ10gfHwge307XHJcbiAgICAgICAgZGVsZXRlIGNsYWltc1snZCddO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBoZWFkZXIsXHJcbiAgICAgICAgY2xhaW1zLFxyXG4gICAgICAgIGRhdGEsXHJcbiAgICAgICAgc2lnbmF0dXJlXHJcbiAgICB9O1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyB0aW1lLWJhc2VkIGNsYWltcy4gV2lsbCByZXR1cm4gdHJ1ZSBpZiB0aGVcclxuICogdG9rZW4gaXMgd2l0aGluIHRoZSB0aW1lIHdpbmRvdyBhdXRob3JpemVkIGJ5IHRoZSAnbmJmJyAobm90LWJlZm9yZSkgYW5kICdpYXQnIChpc3N1ZWQtYXQpIGNsYWltcy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNWYWxpZFRpbWVzdGFtcCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICBjb25zdCBub3cgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCk7XHJcbiAgICBsZXQgdmFsaWRTaW5jZSA9IDAsIHZhbGlkVW50aWwgPSAwO1xyXG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnbmJmJykpIHtcclxuICAgICAgICAgICAgdmFsaWRTaW5jZSA9IGNsYWltc1snbmJmJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcclxuICAgICAgICAgICAgdmFsaWRTaW5jZSA9IGNsYWltc1snaWF0J107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2V4cCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSBjbGFpbXNbJ2V4cCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gdG9rZW4gd2lsbCBleHBpcmUgYWZ0ZXIgMjRoIGJ5IGRlZmF1bHRcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IHZhbGlkU2luY2UgKyA4NjQwMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKCEhbm93ICYmXHJcbiAgICAgICAgISF2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgISF2YWxpZFVudGlsICYmXHJcbiAgICAgICAgbm93ID49IHZhbGlkU2luY2UgJiZcclxuICAgICAgICBub3cgPD0gdmFsaWRVbnRpbCk7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIHJldHVybnMgaXRzIGlzc3VlZCBhdCB0aW1lIGlmIHZhbGlkLCBudWxsIG90aGVyd2lzZS5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBudWxsIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNzdWVkQXRUaW1lID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIGNsYWltc1snaWF0J107XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgZm9ybWF0LiBFeHBlY3RzIGEgdmFsaWQgaXNzdWVkLWF0IHRpbWUuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzVmFsaWRGb3JtYXQgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBkZWNvZGUodG9rZW4pLCBjbGFpbXMgPSBkZWNvZGVkLmNsYWltcztcclxuICAgIHJldHVybiAhIWNsYWltcyAmJiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpO1xyXG59O1xyXG4vKipcclxuICogQXR0ZW1wdHMgdG8gcGVlciBpbnRvIGFuIGF1dGggdG9rZW4gYW5kIGRldGVybWluZSBpZiBpdCdzIGFuIGFkbWluIGF1dGggdG9rZW4gYnkgbG9va2luZyBhdCB0aGUgY2xhaW1zIHBvcnRpb24uXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzQWRtaW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltc1snYWRtaW4nXSA9PT0gdHJ1ZTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY29udGFpbnMob2JqLCBrZXkpIHtcclxuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xyXG59XHJcbmZ1bmN0aW9uIHNhZmVHZXQob2JqLCBrZXkpIHtcclxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgcmV0dXJuIG9ialtrZXldO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc0VtcHR5KG9iaikge1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIG1hcChvYmosIGZuLCBjb250ZXh0T2JqKSB7XHJcbiAgICBjb25zdCByZXMgPSB7fTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJlc1trZXldID0gZm4uY2FsbChjb250ZXh0T2JqLCBvYmpba2V5XSwga2V5LCBvYmopO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbn1cclxuLyoqXHJcbiAqIERlZXAgZXF1YWwgdHdvIG9iamVjdHMuIFN1cHBvcnQgQXJyYXlzIGFuZCBPYmplY3RzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcEVxdWFsKGEsIGIpIHtcclxuICAgIGlmIChhID09PSBiKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBjb25zdCBhS2V5cyA9IE9iamVjdC5rZXlzKGEpO1xyXG4gICAgY29uc3QgYktleXMgPSBPYmplY3Qua2V5cyhiKTtcclxuICAgIGZvciAoY29uc3QgayBvZiBhS2V5cykge1xyXG4gICAgICAgIGlmICghYktleXMuaW5jbHVkZXMoaykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhUHJvcCA9IGFba107XHJcbiAgICAgICAgY29uc3QgYlByb3AgPSBiW2tdO1xyXG4gICAgICAgIGlmIChpc09iamVjdChhUHJvcCkgJiYgaXNPYmplY3QoYlByb3ApKSB7XHJcbiAgICAgICAgICAgIGlmICghZGVlcEVxdWFsKGFQcm9wLCBiUHJvcCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhUHJvcCAhPT0gYlByb3ApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgayBvZiBiS2V5cykge1xyXG4gICAgICAgIGlmICghYUtleXMuaW5jbHVkZXMoaykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIGlzT2JqZWN0KHRoaW5nKSB7XHJcbiAgICByZXR1cm4gdGhpbmcgIT09IG51bGwgJiYgdHlwZW9mIHRoaW5nID09PSAnb2JqZWN0JztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIHF1ZXJ5c3RyaW5nLWZvcm1hdHRlZCBzdHJpbmcgKGUuZy4gJmFyZz12YWwmYXJnMj12YWwyKSBmcm9tIGFcclxuICogcGFyYW1zIG9iamVjdCAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICogTm90ZTogWW91IG11c3QgcHJlcGVuZCBpdCB3aXRoID8gd2hlbiBhZGRpbmcgaXQgdG8gYSBVUkwuXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZyhxdWVyeXN0cmluZ1BhcmFtcykge1xyXG4gICAgY29uc3QgcGFyYW1zID0gW107XHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhxdWVyeXN0cmluZ1BhcmFtcykpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChhcnJheVZhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtcy5sZW5ndGggPyAnJicgKyBwYXJhbXMuam9pbignJicpIDogJyc7XHJcbn1cclxuLyoqXHJcbiAqIERlY29kZXMgYSBxdWVyeXN0cmluZyAoZS5nLiA/YXJnPXZhbCZhcmcyPXZhbDIpIGludG8gYSBwYXJhbXMgb2JqZWN0XHJcbiAqIChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmdEZWNvZGUocXVlcnlzdHJpbmcpIHtcclxuICAgIGNvbnN0IG9iaiA9IHt9O1xyXG4gICAgY29uc3QgdG9rZW5zID0gcXVlcnlzdHJpbmcucmVwbGFjZSgvXlxcPy8sICcnKS5zcGxpdCgnJicpO1xyXG4gICAgdG9rZW5zLmZvckVhY2godG9rZW4gPT4ge1xyXG4gICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSB0b2tlbi5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICBvYmpbZGVjb2RlVVJJQ29tcG9uZW50KGtleSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBvYmo7XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3QgdGhlIHF1ZXJ5IHN0cmluZyBwYXJ0IG9mIGEgVVJMLCBpbmNsdWRpbmcgdGhlIGxlYWRpbmcgcXVlc3Rpb24gbWFyayAoaWYgcHJlc2VudCkuXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0UXVlcnlzdHJpbmcodXJsKSB7XHJcbiAgICBjb25zdCBxdWVyeVN0YXJ0ID0gdXJsLmluZGV4T2YoJz8nKTtcclxuICAgIGlmICghcXVlcnlTdGFydCkge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICAgIGNvbnN0IGZyYWdtZW50U3RhcnQgPSB1cmwuaW5kZXhPZignIycsIHF1ZXJ5U3RhcnQpO1xyXG4gICAgcmV0dXJuIHVybC5zdWJzdHJpbmcocXVlcnlTdGFydCwgZnJhZ21lbnRTdGFydCA+IDAgPyBmcmFnbWVudFN0YXJ0IDogdW5kZWZpbmVkKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2guXHJcbiAqIFZhcmlhYmxlIG5hbWVzIGZvbGxvdyB0aGUgbm90YXRpb24gaW4gRklQUyBQVUIgMTgwLTM6XHJcbiAqIGh0dHA6Ly9jc3JjLm5pc3QuZ292L3B1YmxpY2F0aW9ucy9maXBzL2ZpcHMxODAtMy9maXBzMTgwLTNfZmluYWwucGRmLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICogICB2YXIgc2hhMSA9IG5ldyBzaGExKCk7XHJcbiAqICAgc2hhMS51cGRhdGUoYnl0ZXMpO1xyXG4gKiAgIHZhciBoYXNoID0gc2hhMS5kaWdlc3QoKTtcclxuICpcclxuICogUGVyZm9ybWFuY2U6XHJcbiAqICAgQ2hyb21lIDIzOiAgIH40MDAgTWJpdC9zXHJcbiAqICAgRmlyZWZveCAxNjogIH4yNTAgTWJpdC9zXHJcbiAqXHJcbiAqL1xyXG4vKipcclxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxyXG4gKlxyXG4gKiBUaGUgcHJvcGVydGllcyBkZWNsYXJlZCBoZXJlIGFyZSBkaXNjdXNzZWQgaW4gdGhlIGFib3ZlIGFsZ29yaXRobSBkb2N1bWVudC5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBmaW5hbFxyXG4gKiBAc3RydWN0XHJcbiAqL1xyXG5jbGFzcyBTaGExIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhvbGRzIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgYWNjdW11bGF0ZWQgdmFyaWFibGVzIGEtZSBpbiB0aGUgY29tcHJlc3NfXHJcbiAgICAgICAgICogZnVuY3Rpb24uXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNoYWluXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgYnVmZmVyIGhvbGRpbmcgdGhlIHBhcnRpYWxseSBjb21wdXRlZCBoYXNoIHJlc3VsdC5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYnVmXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGFycmF5IG9mIDgwIGJ5dGVzLCBlYWNoIGEgcGFydCBvZiB0aGUgbWVzc2FnZSB0byBiZSBoYXNoZWQuICBSZWZlcnJlZCB0b1xyXG4gICAgICAgICAqIGFzIHRoZSBtZXNzYWdlIHNjaGVkdWxlIGluIHRoZSBkb2NzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5XXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnRhaW5zIGRhdGEgbmVlZGVkIHRvIHBhZCBtZXNzYWdlcyBsZXNzIHRoYW4gNjQgYnl0ZXMuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBhZF8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IDUxMiAvIDg7XHJcbiAgICAgICAgdGhpcy5wYWRfWzBdID0gMTI4O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5ibG9ja1NpemU7ICsraSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZF9baV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9IDB4Njc0NTIzMDE7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAweGVmY2RhYjg5O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gMHg5OGJhZGNmZTtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9IDB4MTAzMjU0NzY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAweGMzZDJlMWYwO1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGNvbXByZXNzIGhlbHBlciBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSBidWYgQmxvY2sgdG8gY29tcHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IE9mZnNldCBvZiB0aGUgYmxvY2sgaW4gdGhlIGJ1ZmZlci5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbXByZXNzXyhidWYsIG9mZnNldCkge1xyXG4gICAgICAgIGlmICghb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IFcgPSB0aGlzLldfO1xyXG4gICAgICAgIC8vIGdldCAxNiBiaWcgZW5kaWFuIHdvcmRzXHJcbiAgICAgICAgaWYgKHR5cGVvZiBidWYgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyh1c2VyKTogW2J1ZyA4MTQwMTIyXSBSZWNlbnQgdmVyc2lvbnMgb2YgU2FmYXJpIGZvciBNYWMgT1MgYW5kIGlPU1xyXG4gICAgICAgICAgICAgICAgLy8gaGF2ZSBhIGJ1ZyB0aGF0IHR1cm5zIHRoZSBwb3N0LWluY3JlbWVudCArKyBvcGVyYXRvciBpbnRvIHByZS1pbmNyZW1lbnRcclxuICAgICAgICAgICAgICAgIC8vIGR1cmluZyBKSVQgY29tcGlsYXRpb24uICBXZSBoYXZlIGNvZGUgdGhhdCBkZXBlbmRzIGhlYXZpbHkgb24gU0hBLTEgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBjb3JyZWN0bmVzcyBhbmQgd2hpY2ggaXMgYWZmZWN0ZWQgYnkgdGhpcyBidWcsIHNvIEkndmUgcmVtb3ZlZCBhbGwgdXNlc1xyXG4gICAgICAgICAgICAgICAgLy8gb2YgcG9zdC1pbmNyZW1lbnQgKysgaW4gd2hpY2ggdGhlIHJlc3VsdCB2YWx1ZSBpcyB1c2VkLiAgV2UgY2FuIHJldmVydFxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBjaGFuZ2Ugb25jZSB0aGUgU2FmYXJpIGJ1Z1xyXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDkwMzYpIGhhcyBiZWVuIGZpeGVkIGFuZFxyXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBjbGllbnRzIGhhdmUgYmVlbiB1cGRhdGVkLlxyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCkgPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDEpIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAyKSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDMpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXRdIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAyXSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZltvZmZzZXQgKyAzXTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGV4cGFuZCB0byA4MCB3b3Jkc1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxNjsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgdCA9IFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl07XHJcbiAgICAgICAgICAgIFdbaV0gPSAoKHQgPDwgMSkgfCAodCA+Pj4gMzEpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhID0gdGhpcy5jaGFpbl9bMF07XHJcbiAgICAgICAgbGV0IGIgPSB0aGlzLmNoYWluX1sxXTtcclxuICAgICAgICBsZXQgYyA9IHRoaXMuY2hhaW5fWzJdO1xyXG4gICAgICAgIGxldCBkID0gdGhpcy5jaGFpbl9bM107XHJcbiAgICAgICAgbGV0IGUgPSB0aGlzLmNoYWluX1s0XTtcclxuICAgICAgICBsZXQgZiwgaztcclxuICAgICAgICAvLyBUT0RPKHVzZXIpOiBUcnkgdG8gdW5yb2xsIHRoaXMgbG9vcCB0byBzcGVlZCB1cCB0aGUgY29tcHV0YXRpb24uXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChpIDwgNDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgMjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gZCBeIChiICYgKGMgXiBkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NWE4Mjc5OTk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDZlZDllYmExO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSAoYiAmIGMpIHwgKGQgJiAoYiB8IGMpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg4ZjFiYmNkYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4Y2E2MmMxZDY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgdCA9ICgoKGEgPDwgNSkgfCAoYSA+Pj4gMjcpKSArIGYgKyBlICsgayArIFdbaV0pICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgZSA9IGQ7XHJcbiAgICAgICAgICAgIGQgPSBjO1xyXG4gICAgICAgICAgICBjID0gKChiIDw8IDMwKSB8IChiID4+PiAyKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBiID0gYTtcclxuICAgICAgICAgICAgYSA9IHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gKHRoaXMuY2hhaW5fWzBdICsgYSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gKHRoaXMuY2hhaW5fWzFdICsgYikgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gKHRoaXMuY2hhaW5fWzJdICsgYykgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gKHRoaXMuY2hhaW5fWzNdICsgZCkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gKHRoaXMuY2hhaW5fWzRdICsgZSkgJiAweGZmZmZmZmZmO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKGJ5dGVzLCBsZW5ndGgpIHtcclxuICAgICAgICAvLyBUT0RPKGpvaG5sZW56KTogdGlnaHRlbiB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGFuZCByZW1vdmUgdGhpcyBjaGVja1xyXG4gICAgICAgIGlmIChieXRlcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoTWludXNCbG9jayA9IGxlbmd0aCAtIHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICAvLyBVc2luZyBsb2NhbCBpbnN0ZWFkIG9mIG1lbWJlciB2YXJpYWJsZXMgZ2l2ZXMgfjUlIHNwZWVkdXAgb24gRmlyZWZveCAxNi5cclxuICAgICAgICBjb25zdCBidWYgPSB0aGlzLmJ1Zl87XHJcbiAgICAgICAgbGV0IGluYnVmID0gdGhpcy5pbmJ1Zl87XHJcbiAgICAgICAgLy8gVGhlIG91dGVyIHdoaWxlIGxvb3Agc2hvdWxkIGV4ZWN1dGUgYXQgbW9zdCB0d2ljZS5cclxuICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgbm8gZGF0YSBpbiB0aGUgYmxvY2sgdG8gdG9wIHVwLCB3ZSBjYW4gZGlyZWN0bHkgcHJvY2VzcyB0aGVcclxuICAgICAgICAgICAgLy8gaW5wdXQgYnVmZmVyIChhc3N1bWluZyBpdCBjb250YWlucyBzdWZmaWNpZW50IGRhdGEpLiBUaGlzIGdpdmVzIH4yNSVcclxuICAgICAgICAgICAgLy8gc3BlZWR1cCBvbiBDaHJvbWUgMjMgYW5kIH4xNSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LCBidXQgcmVxdWlyZXMgdGhhdFxyXG4gICAgICAgICAgICAvLyB0aGUgZGF0YSBpcyBwcm92aWRlZCBpbiBsYXJnZSBjaHVua3MgKG9yIGluIG11bHRpcGxlcyBvZiA2NCBieXRlcykuXHJcbiAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPD0gbGVuZ3RoTWludXNCbG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ5dGVzLCBuKTtcclxuICAgICAgICAgICAgICAgICAgICBuICs9IHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlcy5jaGFyQ29kZUF0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzW25dO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluYnVmXyA9IGluYnVmO1xyXG4gICAgICAgIHRoaXMudG90YWxfICs9IGxlbmd0aDtcclxuICAgIH1cclxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cclxuICAgIGRpZ2VzdCgpIHtcclxuICAgICAgICBjb25zdCBkaWdlc3QgPSBbXTtcclxuICAgICAgICBsZXQgdG90YWxCaXRzID0gdGhpcy50b3RhbF8gKiA4O1xyXG4gICAgICAgIC8vIEFkZCBwYWQgMHg4MCAweDAwKi5cclxuICAgICAgICBpZiAodGhpcy5pbmJ1Zl8gPCA1Nikge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIDU2IC0gdGhpcy5pbmJ1Zl8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCB0aGlzLmJsb2NrU2l6ZSAtICh0aGlzLmluYnVmXyAtIDU2KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFkZCAjIGJpdHMuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuYmxvY2tTaXplIC0gMTsgaSA+PSA1NjsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmX1tpXSA9IHRvdGFsQml0cyAmIDI1NTtcclxuICAgICAgICAgICAgdG90YWxCaXRzIC89IDI1NjsgLy8gRG9uJ3QgdXNlIGJpdC1zaGlmdGluZyBoZXJlIVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXByZXNzXyh0aGlzLmJ1Zl8pO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7XHJcbiAgICAgICAgICAgICAgICBkaWdlc3Rbbl0gPSAodGhpcy5jaGFpbl9baV0gPj4gaikgJiAyNTU7XHJcbiAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRpZ2VzdDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogSGVscGVyIHRvIG1ha2UgYSBTdWJzY3JpYmUgZnVuY3Rpb24gKGp1c3QgbGlrZSBQcm9taXNlIGhlbHBzIG1ha2UgYVxyXG4gKiBUaGVuYWJsZSkuXHJcbiAqXHJcbiAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gKiAgICAgYXMgYSBwcm94eS5cclxuICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlU3Vic2NyaWJlKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICBjb25zdCBwcm94eSA9IG5ldyBPYnNlcnZlclByb3h5KGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKTtcclxuICAgIHJldHVybiBwcm94eS5zdWJzY3JpYmUuYmluZChwcm94eSk7XHJcbn1cclxuLyoqXHJcbiAqIEltcGxlbWVudCBmYW4tb3V0IGZvciBhbnkgbnVtYmVyIG9mIE9ic2VydmVycyBhdHRhY2hlZCB2aWEgYSBzdWJzY3JpYmVcclxuICogZnVuY3Rpb24uXHJcbiAqL1xyXG5jbGFzcyBPYnNlcnZlclByb3h5IHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAgICAgKiAgICAgYXMgYSBwcm94eS5cclxuICAgICAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVzID0gW107XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50ID0gMDtcclxuICAgICAgICAvLyBNaWNyby10YXNrIHNjaGVkdWxpbmcgYnkgY2FsbGluZyB0YXNrLnRoZW4oKS5cclxuICAgICAgICB0aGlzLnRhc2sgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IG9uTm9PYnNlcnZlcnM7XHJcbiAgICAgICAgLy8gQ2FsbCB0aGUgZXhlY3V0b3IgYXN5bmNocm9ub3VzbHkgc28gc3Vic2NyaWJlcnMgdGhhdCBhcmUgY2FsbGVkXHJcbiAgICAgICAgLy8gc3luY2hyb25vdXNseSBhZnRlciB0aGUgY3JlYXRpb24gb2YgdGhlIHN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICAgIC8vIGNhbiBzdGlsbCByZWNlaXZlIHRoZSB2ZXJ5IGZpcnN0IHZhbHVlIGdlbmVyYXRlZCBpbiB0aGUgZXhlY3V0b3IuXHJcbiAgICAgICAgdGhpcy50YXNrXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZXhlY3V0b3IodGhpcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgbmV4dCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKGVycm9yKTtcclxuICAgIH1cclxuICAgIGNvbXBsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIGFuIE9ic2VydmVyIHRvIHRoZSBmYW4tb3V0IGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICogLSBXZSByZXF1aXJlIHRoYXQgbm8gZXZlbnQgaXMgc2VudCB0byBhIHN1YnNjcmliZXIgc3ljaHJvbm91c2x5IHRvIHRoZWlyXHJcbiAgICAgKiAgIGNhbGwgdG8gc3Vic2NyaWJlKCkuXHJcbiAgICAgKi9cclxuICAgIHN1YnNjcmliZShuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XHJcbiAgICAgICAgbGV0IG9ic2VydmVyO1xyXG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGVycm9yID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgT2JzZXJ2ZXIuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFzc2VtYmxlIGFuIE9ic2VydmVyIG9iamVjdCB3aGVuIHBhc3NlZCBhcyBjYWxsYmFjayBmdW5jdGlvbnMuXHJcbiAgICAgICAgaWYgKGltcGxlbWVudHNBbnlNZXRob2RzKG5leHRPck9ic2VydmVyLCBbXHJcbiAgICAgICAgICAgICduZXh0JyxcclxuICAgICAgICAgICAgJ2Vycm9yJyxcclxuICAgICAgICAgICAgJ2NvbXBsZXRlJ1xyXG4gICAgICAgIF0pKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgIG5leHQ6IG5leHRPck9ic2VydmVyLFxyXG4gICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvciA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5jb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdW5zdWIgPSB0aGlzLnVuc3Vic2NyaWJlT25lLmJpbmQodGhpcywgdGhpcy5vYnNlcnZlcnMubGVuZ3RoKTtcclxuICAgICAgICAvLyBBdHRlbXB0IHRvIHN1YnNjcmliZSB0byBhIHRlcm1pbmF0ZWQgT2JzZXJ2YWJsZSAtIHdlXHJcbiAgICAgICAgLy8ganVzdCByZXNwb25kIHRvIHRoZSBPYnNlcnZlciB3aXRoIHRoZSBmaW5hbCBlcnJvciBvciBjb21wbGV0ZVxyXG4gICAgICAgIC8vIGV2ZW50LlxyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluYWxFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcih0aGlzLmZpbmFsRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdGhpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG4gICAgICAgIHJldHVybiB1bnN1YjtcclxuICAgIH1cclxuICAgIC8vIFVuc3Vic2NyaWJlIGlzIHN5bmNocm9ub3VzIC0gd2UgZ3VhcmFudGVlIHRoYXQgbm8gZXZlbnRzIGFyZSBzZW50IHRvXHJcbiAgICAvLyBhbnkgdW5zdWJzY3JpYmVkIE9ic2VydmVyLlxyXG4gICAgdW5zdWJzY3JpYmVPbmUoaSkge1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVycyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMub2JzZXJ2ZXJzW2ldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbaV07XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50IC09IDE7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJDb3VudCA9PT0gMCAmJiB0aGlzLm9uTm9PYnNlcnZlcnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnModGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yRWFjaE9ic2VydmVyKGZuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIEFscmVhZHkgY2xvc2VkIGJ5IHByZXZpb3VzIGV2ZW50Li4uLmp1c3QgZWF0IHRoZSBhZGRpdGlvbmFsIHZhbHVlcy5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTaW5jZSBzZW5kT25lIGNhbGxzIGFzeW5jaHJvbm91c2x5IC0gdGhlcmUgaXMgbm8gY2hhbmNlIHRoYXRcclxuICAgICAgICAvLyB0aGlzLm9ic2VydmVycyB3aWxsIGJlY29tZSB1bmRlZmluZWQuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRPbmUoaSwgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIENhbGwgdGhlIE9ic2VydmVyIHZpYSBvbmUgb2YgaXQncyBjYWxsYmFjayBmdW5jdGlvbi4gV2UgYXJlIGNhcmVmdWwgdG9cclxuICAgIC8vIGNvbmZpcm0gdGhhdCB0aGUgb2JzZXJ2ZSBoYXMgbm90IGJlZW4gdW5zdWJzY3JpYmVkIHNpbmNlIHRoaXMgYXN5bmNocm9ub3VzXHJcbiAgICAvLyBmdW5jdGlvbiBoYWQgYmVlbiBxdWV1ZWQuXHJcbiAgICBzZW5kT25lKGksIGZuKSB7XHJcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2sgYXN5bmNocm9ub3VzbHlcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm9ic2VydmVyc1tpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKHRoaXMub2JzZXJ2ZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGV4Y2VwdGlvbnMgcmFpc2VkIGluIE9ic2VydmVycyBvciBtaXNzaW5nIG1ldGhvZHMgb2YgYW5cclxuICAgICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2cgZXJyb3IgdG8gY29uc29sZS4gYi8zMTQwNDgwNlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoZXJyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmFsRXJyb3IgPSBlcnI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByb3h5IGlzIG5vIGxvbmdlciBuZWVkZWQgLSBnYXJiYWdlIGNvbGxlY3QgcmVmZXJlbmNlc1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqIFR1cm4gc3luY2hyb25vdXMgZnVuY3Rpb24gaW50byBvbmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5mdW5jdGlvbiBhc3luYyhmbiwgb25FcnJvcikge1xyXG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZm4oLi4uYXJncyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAob25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybiB0cnVlIGlmIHRoZSBvYmplY3QgcGFzc2VkIGluIGltcGxlbWVudHMgYW55IG9mIHRoZSBuYW1lZCBtZXRob2RzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBtZXRob2RzKSB7XHJcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xyXG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqICYmIHR5cGVvZiBvYmpbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gbm9vcCgpIHtcclxuICAgIC8vIGRvIG5vdGhpbmdcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBhcHByb3ByaWF0ZSBudW1iZXIgb2YgYXJndW1lbnRzIGFyZSBwcm92aWRlZCBmb3IgYSBwdWJsaWMgZnVuY3Rpb24uXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBmYWlscy5cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gbWluQ291bnQgVGhlIG1pbmltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIG1heENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBhcmd1bWVudCB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIGFyZ0NvdW50IFRoZSBhY3R1YWwgbnVtYmVyIG9mIGFyZ3VtZW50cyBwcm92aWRlZC5cclxuICovXHJcbmNvbnN0IHZhbGlkYXRlQXJnQ291bnQgPSBmdW5jdGlvbiAoZm5OYW1lLCBtaW5Db3VudCwgbWF4Q291bnQsIGFyZ0NvdW50KSB7XHJcbiAgICBsZXQgYXJnRXJyb3I7XHJcbiAgICBpZiAoYXJnQ291bnQgPCBtaW5Db3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gJ2F0IGxlYXN0ICcgKyBtaW5Db3VudDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFyZ0NvdW50ID4gbWF4Q291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9IG1heENvdW50ID09PSAwID8gJ25vbmUnIDogJ25vIG1vcmUgdGhhbiAnICsgbWF4Q291bnQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYXJnRXJyb3IpIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGZuTmFtZSArXHJcbiAgICAgICAgICAgICcgZmFpbGVkOiBXYXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGFyZ0NvdW50ICtcclxuICAgICAgICAgICAgKGFyZ0NvdW50ID09PSAxID8gJyBhcmd1bWVudC4nIDogJyBhcmd1bWVudHMuJykgK1xyXG4gICAgICAgICAgICAnIEV4cGVjdHMgJyArXHJcbiAgICAgICAgICAgIGFyZ0Vycm9yICtcclxuICAgICAgICAgICAgJy4nO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdG8gcHJlZml4IGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgZmFpbGVkIGFyZ3VtZW50IHZhbGlkYXRpb25cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gYXJnTmFtZSBUaGUgbmFtZSBvZiB0aGUgYXJndW1lbnRcclxuICogQHJldHVybiBUaGUgcHJlZml4IHRvIGFkZCB0byB0aGUgZXJyb3IgdGhyb3duIGZvciB2YWxpZGF0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmdOYW1lKSB7XHJcbiAgICByZXR1cm4gYCR7Zm5OYW1lfSBmYWlsZWQ6ICR7YXJnTmFtZX0gYXJndW1lbnQgYDtcclxufVxyXG4vKipcclxuICogQHBhcmFtIGZuTmFtZVxyXG4gKiBAcGFyYW0gYXJndW1lbnROdW1iZXJcclxuICogQHBhcmFtIG5hbWVzcGFjZVxyXG4gKiBAcGFyYW0gb3B0aW9uYWxcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZXNwYWNlKGZuTmFtZSwgbmFtZXNwYWNlLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFuYW1lc3BhY2UpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAvL1RPRE86IEkgc2hvdWxkIGRvIG1vcmUgdmFsaWRhdGlvbiBoZXJlLiBXZSBvbmx5IGFsbG93IGNlcnRhaW4gY2hhcnMgaW4gbmFtZXNwYWNlcy5cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCAnbmFtZXNwYWNlJykgKyAnbXVzdCBiZSBhIHZhbGlkIGZpcmViYXNlIG5hbWVzcGFjZS4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGZuTmFtZSwgYXJndW1lbnROYW1lLCBcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuY2FsbGJhY2ssIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGZ1bmN0aW9uLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ29udGV4dE9iamVjdChmbk5hbWUsIGFyZ3VtZW50TmFtZSwgY29udGV4dCwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY29udGV4dCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY29udGV4dCAhPT0gJ29iamVjdCcgfHwgY29udGV4dCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGNvbnRleHQgb2JqZWN0LicpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIENvZGUgb3JpZ2luYWxseSBjYW1lIGZyb20gZ29vZy5jcnlwdC5zdHJpbmdUb1V0ZjhCeXRlQXJyYXksIGJ1dCBmb3Igc29tZSByZWFzb24gdGhleVxyXG4vLyBhdXRvbWF0aWNhbGx5IHJlcGxhY2VkICdcXHJcXG4nIHdpdGggJ1xcbicsIGFuZCB0aGV5IGRpZG4ndCBoYW5kbGUgc3Vycm9nYXRlIHBhaXJzLFxyXG4vLyBzbyBpdCdzIGJlZW4gbW9kaWZpZWQuXHJcbi8vIE5vdGUgdGhhdCBub3QgYWxsIFVuaWNvZGUgY2hhcmFjdGVycyBhcHBlYXIgYXMgc2luZ2xlIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdCBzdHJpbmdzLlxyXG4vLyBmcm9tQ2hhckNvZGUgcmV0dXJucyB0aGUgVVRGLTE2IGVuY29kaW5nIG9mIGEgY2hhcmFjdGVyIC0gc28gc29tZSBVbmljb2RlIGNoYXJhY3RlcnNcclxuLy8gdXNlIDIgY2hhcmFjdGVycyBpbiBKYXZhc2NyaXB0LiAgQWxsIDQtYnl0ZSBVVEYtOCBjaGFyYWN0ZXJzIGJlZ2luIHdpdGggYSBmaXJzdFxyXG4vLyBjaGFyYWN0ZXIgaW4gdGhlIHJhbmdlIDB4RDgwMCAtIDB4REJGRiAodGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHNvLWNhbGxlZCBzdXJyb2dhdGVcclxuLy8gcGFpcikuXHJcbi8vIFNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNS4xLyNzZWMtMTUuMS4zXHJcbi8qKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge0FycmF5fVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAvLyBJcyB0aGlzIHRoZSBsZWFkIHN1cnJvZ2F0ZSBpbiBhIHN1cnJvZ2F0ZSBwYWlyP1xyXG4gICAgICAgIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICBjb25zdCBoaWdoID0gYyAtIDB4ZDgwMDsgLy8gdGhlIGhpZ2ggMTAgYml0cy5cclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICBhc3NlcnQoaSA8IHN0ci5sZW5ndGgsICdTdXJyb2dhdGUgcGFpciBtaXNzaW5nIHRyYWlsIHN1cnJvZ2F0ZS4nKTtcclxuICAgICAgICAgICAgY29uc3QgbG93ID0gc3RyLmNoYXJDb2RlQXQoaSkgLSAweGRjMDA7IC8vIHRoZSBsb3cgMTAgYml0cy5cclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoaGlnaCA8PCAxMCkgKyBsb3c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDY1NTM2KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgbGVuZ3RoIHdpdGhvdXQgYWN0dWFsbHkgY29udmVydGluZzsgdXNlZnVsIGZvciBkb2luZyBjaGVhcGVyIHZhbGlkYXRpb24uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7bnVtYmVyfVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nTGVuZ3RoID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgcCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBwICs9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIC8vIExlYWQgc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIuICBUaGUgcGFpciB0b2dldGhlciB3aWxsIHRha2UgNCBieXRlcyB0byByZXByZXNlbnQuXHJcbiAgICAgICAgICAgIHAgKz0gNDtcclxuICAgICAgICAgICAgaSsrOyAvLyBza2lwIHRyYWlsIHN1cnJvZ2F0ZS5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHAgKz0gMztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIGV4cG9uZW50aWFsbHkgaW5jcmVhc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XHJcbi8qKlxyXG4gKiBUaGUgZmFjdG9yIHRvIGJhY2tvZmYgYnkuXHJcbiAqIFNob3VsZCBiZSBhIG51bWJlciBncmVhdGVyIHRoYW4gMS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfQkFDS09GRl9GQUNUT1IgPSAyO1xyXG4vKipcclxuICogVGhlIG1heGltdW0gbWlsbGlzZWNvbmRzIHRvIGluY3JlYXNlIHRvLlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBNQVhfVkFMVUVfTUlMTElTID0gNCAqIDYwICogNjAgKiAxMDAwOyAvLyBGb3VyIGhvdXJzLCBsaWtlIGlPUyBhbmQgQW5kcm9pZC5cclxuLyoqXHJcbiAqIFRoZSBwZXJjZW50YWdlIG9mIGJhY2tvZmYgdGltZSB0byByYW5kb21pemUgYnkuXHJcbiAqIFNlZVxyXG4gKiBodHRwOi8vZ28vc2FmZS1jbGllbnQtYmVoYXZpb3Ijc3RlcC0xLWRldGVybWluZS10aGUtYXBwcm9wcmlhdGUtcmV0cnktaW50ZXJ2YWwtdG8taGFuZGxlLXNwaWtlLXRyYWZmaWNcclxuICogZm9yIGNvbnRleHQuXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbmNvbnN0IFJBTkRPTV9GQUNUT1IgPSAwLjU7XHJcbi8qKlxyXG4gKiBCYXNlZCBvbiB0aGUgYmFja29mZiBtZXRob2QgZnJvbVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtbGlicmFyeS9ibG9iL21hc3Rlci9jbG9zdXJlL2dvb2cvbWF0aC9leHBvbmVudGlhbGJhY2tvZmYuanMuXHJcbiAqIEV4dHJhY3RlZCBoZXJlIHNvIHdlIGRvbid0IG5lZWQgdG8gcGFzcyBtZXRhZGF0YSBhbmQgYSBzdGF0ZWZ1bCBFeHBvbmVudGlhbEJhY2tvZmYgb2JqZWN0IGFyb3VuZC5cclxuICovXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMoYmFja29mZkNvdW50LCBpbnRlcnZhbE1pbGxpcyA9IERFRkFVTFRfSU5URVJWQUxfTUlMTElTLCBiYWNrb2ZmRmFjdG9yID0gREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUikge1xyXG4gICAgLy8gQ2FsY3VsYXRlcyBhbiBleHBvbmVudGlhbGx5IGluY3JlYXNpbmcgdmFsdWUuXHJcbiAgICAvLyBEZXZpYXRpb246IGNhbGN1bGF0ZXMgdmFsdWUgZnJvbSBjb3VudCBhbmQgYSBjb25zdGFudCBpbnRlcnZhbCwgc28gd2Ugb25seSBuZWVkIHRvIHNhdmUgdmFsdWVcclxuICAgIC8vIGFuZCBjb3VudCB0byByZXN0b3JlIHN0YXRlLlxyXG4gICAgY29uc3QgY3VyckJhc2VWYWx1ZSA9IGludGVydmFsTWlsbGlzICogTWF0aC5wb3coYmFja29mZkZhY3RvciwgYmFja29mZkNvdW50KTtcclxuICAgIC8vIEEgcmFuZG9tIFwiZnV6elwiIHRvIGF2b2lkIHdhdmVzIG9mIHJldHJpZXMuXHJcbiAgICAvLyBEZXZpYXRpb246IHJhbmRvbUZhY3RvciBpcyByZXF1aXJlZC5cclxuICAgIGNvbnN0IHJhbmRvbVdhaXQgPSBNYXRoLnJvdW5kKFxyXG4gICAgLy8gQSBmcmFjdGlvbiBvZiB0aGUgYmFja29mZiB2YWx1ZSB0byBhZGQvc3VidHJhY3QuXHJcbiAgICAvLyBEZXZpYXRpb246IGNoYW5nZXMgbXVsdGlwbGljYXRpb24gb3JkZXIgdG8gaW1wcm92ZSByZWFkYWJpbGl0eS5cclxuICAgIFJBTkRPTV9GQUNUT1IgKlxyXG4gICAgICAgIGN1cnJCYXNlVmFsdWUgKlxyXG4gICAgICAgIC8vIEEgcmFuZG9tIGZsb2F0IChyb3VuZGVkIHRvIGludCBieSBNYXRoLnJvdW5kIGFib3ZlKSBpbiB0aGUgcmFuZ2UgWy0xLCAxXS4gRGV0ZXJtaW5lc1xyXG4gICAgICAgIC8vIGlmIHdlIGFkZCBvciBzdWJ0cmFjdC5cclxuICAgICAgICAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKlxyXG4gICAgICAgIDIpO1xyXG4gICAgLy8gTGltaXRzIGJhY2tvZmYgdG8gbWF4IHRvIGF2b2lkIGVmZmVjdGl2ZWx5IHBlcm1hbmVudCBiYWNrb2ZmLlxyXG4gICAgcmV0dXJuIE1hdGgubWluKE1BWF9WQUxVRV9NSUxMSVMsIGN1cnJCYXNlVmFsdWUgKyByYW5kb21XYWl0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZSBFbmdsaXNoIG9yZGluYWwgbGV0dGVycyBhZnRlciBhIG51bWJlclxyXG4gKi9cclxuZnVuY3Rpb24gb3JkaW5hbChpKSB7XHJcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpKSkge1xyXG4gICAgICAgIHJldHVybiBgJHtpfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaSArIGluZGljYXRvcihpKTtcclxufVxyXG5mdW5jdGlvbiBpbmRpY2F0b3IoaSkge1xyXG4gICAgaSA9IE1hdGguYWJzKGkpO1xyXG4gICAgY29uc3QgY2VudCA9IGkgJSAxMDA7XHJcbiAgICBpZiAoY2VudCA+PSAxMCAmJiBjZW50IDw9IDIwKSB7XHJcbiAgICAgICAgcmV0dXJuICd0aCc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWMgPSBpICUgMTA7XHJcbiAgICBpZiAoZGVjID09PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuICdzdCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuICduZCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAzKSB7XHJcbiAgICAgICAgcmV0dXJuICdyZCc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJ3RoJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRNb2R1bGFySW5zdGFuY2Uoc2VydmljZSkge1xyXG4gICAgaWYgKHNlcnZpY2UgJiYgc2VydmljZS5fZGVsZWdhdGUpIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZS5fZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDT05TVEFOVFMsIERlZmVycmVkLCBFcnJvckZhY3RvcnksIEZpcmViYXNlRXJyb3IsIE1BWF9WQUxVRV9NSUxMSVMsIFJBTkRPTV9GQUNUT1IsIFNoYTEsIGFyZUNvb2tpZXNFbmFibGVkLCBhc3NlcnQsIGFzc2VydGlvbkVycm9yLCBhc3luYywgYmFzZTY0LCBiYXNlNjREZWNvZGUsIGJhc2U2NEVuY29kZSwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMsIGNvbnRhaW5zLCBjcmVhdGVNb2NrVXNlclRva2VuLCBjcmVhdGVTdWJzY3JpYmUsIGRlY29kZSwgZGVlcENvcHksIGRlZXBFcXVhbCwgZGVlcEV4dGVuZCwgZXJyb3JQcmVmaXgsIGV4dHJhY3RRdWVyeXN0cmluZywgZ2V0R2xvYmFsLCBnZXRNb2R1bGFySW5zdGFuY2UsIGdldFVBLCBpc0FkbWluLCBpc0Jyb3dzZXIsIGlzQnJvd3NlckV4dGVuc2lvbiwgaXNFbGVjdHJvbiwgaXNFbXB0eSwgaXNJRSwgaXNJbmRleGVkREJBdmFpbGFibGUsIGlzTW9iaWxlQ29yZG92YSwgaXNOb2RlLCBpc05vZGVTZGssIGlzUmVhY3ROYXRpdmUsIGlzU2FmYXJpLCBpc1VXUCwgaXNWYWxpZEZvcm1hdCwgaXNWYWxpZFRpbWVzdGFtcCwgaXNzdWVkQXRUaW1lLCBqc29uRXZhbCwgbWFwLCBvcmRpbmFsLCBxdWVyeXN0cmluZywgcXVlcnlzdHJpbmdEZWNvZGUsIHNhZmVHZXQsIHN0cmluZ0xlbmd0aCwgc3RyaW5nVG9CeXRlQXJyYXksIHN0cmluZ2lmeSwgdmFsaWRhdGVBcmdDb3VudCwgdmFsaWRhdGVDYWxsYmFjaywgdmFsaWRhdGVDb250ZXh0T2JqZWN0LCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlLCB2YWxpZGF0ZU5hbWVzcGFjZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcIi8qIGh0dHA6Ly9tZXllcndlYi5jb20vZXJpYy90b29scy9jc3MvcmVzZXQvXFxuICAgdjUuMC4xIHwgMjAxOTEwMTlcXG4gICBMaWNlbnNlOiBub25lIChwdWJsaWMgZG9tYWluKVxcbiovXFxuXFxuaHRtbCwgYm9keSwgZGl2LCBzcGFuLCBhcHBsZXQsIG9iamVjdCwgaWZyYW1lLFxcbmgxLCBoMiwgaDMsIGg0LCBoNSwgaDYsIHAsIGJsb2NrcXVvdGUsIHByZSxcXG5hLCBhYmJyLCBhY3JvbnltLCBhZGRyZXNzLCBiaWcsIGNpdGUsIGNvZGUsXFxuZGVsLCBkZm4sIGVtLCBpbWcsIGlucywga2JkLCBxLCBzLCBzYW1wLFxcbnNtYWxsLCBzdHJpa2UsIHN0cm9uZywgc3ViLCBzdXAsIHR0LCB2YXIsXFxuYiwgdSwgaSwgY2VudGVyLFxcbmRsLCBkdCwgZGQsIG1lbnUsIG9sLCB1bCwgbGksXFxuZmllbGRzZXQsIGZvcm0sIGxhYmVsLCBsZWdlbmQsXFxudGFibGUsIGNhcHRpb24sIHRib2R5LCB0Zm9vdCwgdGhlYWQsIHRyLCB0aCwgdGQsXFxuYXJ0aWNsZSwgYXNpZGUsIGNhbnZhcywgZGV0YWlscywgZW1iZWQsXFxuZmlndXJlLCBmaWdjYXB0aW9uLCBmb290ZXIsIGhlYWRlciwgaGdyb3VwLFxcbm1haW4sIG1lbnUsIG5hdiwgb3V0cHV0LCBydWJ5LCBzZWN0aW9uLCBzdW1tYXJ5LFxcbnRpbWUsIG1hcmssIGF1ZGlvLCB2aWRlbyB7XFxuXFx0bWFyZ2luOiAwO1xcblxcdHBhZGRpbmc6IDA7XFxuXFx0Ym9yZGVyOiAwO1xcblxcdGZvbnQtc2l6ZTogMTAwJTtcXG5cXHRmb250OiBpbmhlcml0O1xcblxcdHZlcnRpY2FsLWFsaWduOiBiYXNlbGluZTtcXG59XFxuLyogSFRNTDUgZGlzcGxheS1yb2xlIHJlc2V0IGZvciBvbGRlciBicm93c2VycyAqL1xcbmFydGljbGUsIGFzaWRlLCBkZXRhaWxzLCBmaWdjYXB0aW9uLCBmaWd1cmUsXFxuZm9vdGVyLCBoZWFkZXIsIGhncm91cCwgbWFpbiwgbWVudSwgbmF2LCBzZWN0aW9uIHtcXG5cXHRkaXNwbGF5OiBibG9jaztcXG59XFxuLyogSFRNTDUgaGlkZGVuLWF0dHJpYnV0ZSBmaXggZm9yIG5ld2VyIGJyb3dzZXJzICovXFxuKltoaWRkZW5dIHtcXG4gICAgZGlzcGxheTogbm9uZTtcXG59XFxuYm9keSB7XFxuXFx0bGluZS1oZWlnaHQ6IDE7XFxufVxcbm1lbnUsIG9sLCB1bCB7XFxuXFx0bGlzdC1zdHlsZTogbm9uZTtcXG59XFxuYmxvY2txdW90ZSwgcSB7XFxuXFx0cXVvdGVzOiBub25lO1xcbn1cXG5ibG9ja3F1b3RlOmJlZm9yZSwgYmxvY2txdW90ZTphZnRlcixcXG5xOmJlZm9yZSwgcTphZnRlciB7XFxuXFx0Y29udGVudDogJyc7XFxuXFx0Y29udGVudDogbm9uZTtcXG59XFxudGFibGUge1xcblxcdGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XFxuXFx0Ym9yZGVyLXNwYWNpbmc6IDA7XFxufVxcblwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL25vZGVfbW9kdWxlcy9yZXNldC1jc3MvcmVzZXQuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBOzs7Q0FHQzs7QUFFRDs7Ozs7Ozs7Ozs7OztDQWFDLFNBQVM7Q0FDVCxVQUFVO0NBQ1YsU0FBUztDQUNULGVBQWU7Q0FDZixhQUFhO0NBQ2Isd0JBQXdCO0FBQ3pCO0FBQ0EsZ0RBQWdEO0FBQ2hEOztDQUVDLGNBQWM7QUFDZjtBQUNBLGtEQUFrRDtBQUNsRDtJQUNJLGFBQWE7QUFDakI7QUFDQTtDQUNDLGNBQWM7QUFDZjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxZQUFZO0FBQ2I7QUFDQTs7Q0FFQyxXQUFXO0NBQ1gsYUFBYTtBQUNkO0FBQ0E7Q0FDQyx5QkFBeUI7Q0FDekIsaUJBQWlCO0FBQ2xCXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIi8qIGh0dHA6Ly9tZXllcndlYi5jb20vZXJpYy90b29scy9jc3MvcmVzZXQvXFxuICAgdjUuMC4xIHwgMjAxOTEwMTlcXG4gICBMaWNlbnNlOiBub25lIChwdWJsaWMgZG9tYWluKVxcbiovXFxuXFxuaHRtbCwgYm9keSwgZGl2LCBzcGFuLCBhcHBsZXQsIG9iamVjdCwgaWZyYW1lLFxcbmgxLCBoMiwgaDMsIGg0LCBoNSwgaDYsIHAsIGJsb2NrcXVvdGUsIHByZSxcXG5hLCBhYmJyLCBhY3JvbnltLCBhZGRyZXNzLCBiaWcsIGNpdGUsIGNvZGUsXFxuZGVsLCBkZm4sIGVtLCBpbWcsIGlucywga2JkLCBxLCBzLCBzYW1wLFxcbnNtYWxsLCBzdHJpa2UsIHN0cm9uZywgc3ViLCBzdXAsIHR0LCB2YXIsXFxuYiwgdSwgaSwgY2VudGVyLFxcbmRsLCBkdCwgZGQsIG1lbnUsIG9sLCB1bCwgbGksXFxuZmllbGRzZXQsIGZvcm0sIGxhYmVsLCBsZWdlbmQsXFxudGFibGUsIGNhcHRpb24sIHRib2R5LCB0Zm9vdCwgdGhlYWQsIHRyLCB0aCwgdGQsXFxuYXJ0aWNsZSwgYXNpZGUsIGNhbnZhcywgZGV0YWlscywgZW1iZWQsXFxuZmlndXJlLCBmaWdjYXB0aW9uLCBmb290ZXIsIGhlYWRlciwgaGdyb3VwLFxcbm1haW4sIG1lbnUsIG5hdiwgb3V0cHV0LCBydWJ5LCBzZWN0aW9uLCBzdW1tYXJ5LFxcbnRpbWUsIG1hcmssIGF1ZGlvLCB2aWRlbyB7XFxuXFx0bWFyZ2luOiAwO1xcblxcdHBhZGRpbmc6IDA7XFxuXFx0Ym9yZGVyOiAwO1xcblxcdGZvbnQtc2l6ZTogMTAwJTtcXG5cXHRmb250OiBpbmhlcml0O1xcblxcdHZlcnRpY2FsLWFsaWduOiBiYXNlbGluZTtcXG59XFxuLyogSFRNTDUgZGlzcGxheS1yb2xlIHJlc2V0IGZvciBvbGRlciBicm93c2VycyAqL1xcbmFydGljbGUsIGFzaWRlLCBkZXRhaWxzLCBmaWdjYXB0aW9uLCBmaWd1cmUsXFxuZm9vdGVyLCBoZWFkZXIsIGhncm91cCwgbWFpbiwgbWVudSwgbmF2LCBzZWN0aW9uIHtcXG5cXHRkaXNwbGF5OiBibG9jaztcXG59XFxuLyogSFRNTDUgaGlkZGVuLWF0dHJpYnV0ZSBmaXggZm9yIG5ld2VyIGJyb3dzZXJzICovXFxuKltoaWRkZW5dIHtcXG4gICAgZGlzcGxheTogbm9uZTtcXG59XFxuYm9keSB7XFxuXFx0bGluZS1oZWlnaHQ6IDE7XFxufVxcbm1lbnUsIG9sLCB1bCB7XFxuXFx0bGlzdC1zdHlsZTogbm9uZTtcXG59XFxuYmxvY2txdW90ZSwgcSB7XFxuXFx0cXVvdGVzOiBub25lO1xcbn1cXG5ibG9ja3F1b3RlOmJlZm9yZSwgYmxvY2txdW90ZTphZnRlcixcXG5xOmJlZm9yZSwgcTphZnRlciB7XFxuXFx0Y29udGVudDogJyc7XFxuXFx0Y29udGVudDogbm9uZTtcXG59XFxudGFibGUge1xcblxcdGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XFxuXFx0Ym9yZGVyLXNwYWNpbmc6IDA7XFxufVxcblwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FUX1JVTEVfSU1QT1JUXzBfX18gZnJvbSBcIi0hLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vbm9kZV9tb2R1bGVzL3Jlc2V0LWNzcy9yZXNldC5jc3NcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLmkoX19fQ1NTX0xPQURFUl9BVF9SVUxFX0lNUE9SVF8wX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcIlwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJcIixcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcIiNob21lIHtcXHJcXG4gICAgd2lkdGg6IDgwdnc7XFxyXFxuICAgIGhlaWdodDogMTAwJTtcXHJcXG4gICAgbWFyZ2luOiBhdXRvO1xcclxcbn1cXHJcXG5cXHJcXG4uaG9tZS1jb250cm9scyB7XFxyXFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxyXFxuICAgIGhlaWdodDogMTAlO1xcclxcbiAgICBtYXJnaW46IGF1dG87XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDVweDtcXHJcXG4gICAgb3ZlcmZsb3c6IGF1dG87IFxcclxcbiAgICBib3JkZXI6IDVweCBzb2xpZCBvcmFuZ2U7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcXHJcXG4gICAgZGlzcGxheTogZmxleDtcXHJcXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XFxyXFxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxyXFxufVxcclxcblxcclxcbi5ob21lLWl0ZW1zIHtcXHJcXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXHJcXG4gICAgaGVpZ2h0OiA4NSU7XFxyXFxuICAgIG1hcmdpbjogYXV0bztcXHJcXG4gICAgcGFkZGluZzogM3B4O1xcclxcbiAgICBvdmVyZmxvdzogYXV0bzsgXFxyXFxuICAgIGJvcmRlcjogNXB4IHNvbGlkIHJlZDtcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xcclxcbiAgICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcclxcbn1cXHJcXG5cXHJcXG4uaG9tZS1pdGVtcy1saXN0IHtcXHJcXG4gICAgYm94LXNpemluZzogaW5oZXJpdDtcXHJcXG4gICAgd2lkdGg6IDEwMCU7XFxyXFxuICAgIG1hcmdpbjogYXV0bztcXHJcXG4gICAgb3ZlcmZsb3c6IGF1dG87IFxcclxcbiAgICBib3JkZXI6IDVweCBzb2xpZCBwdXJwbGU7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IGluaGVyaXQ7XFxyXFxuICAgIGRpc3BsYXk6IGZsZXg7XFxyXFxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xcclxcbiAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcXHJcXG4gICAgZmxleC13cmFwOiB3cmFwO1xcclxcbn1cXHJcXG5cXHJcXG4uaG9tZS1pdGVtcy1saXN0ID4gZGl2IHtcXHJcXG4gICAgbWFyZ2luOiAzcHg7XFxyXFxuICAgIHdpZHRoOiA0NSU7XFxyXFxufVxcclxcblwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy92aWV3L2NvbXBvbmVudHMvaG9tZS5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7SUFDSSxXQUFXO0lBQ1gsWUFBWTtJQUNaLFlBQVk7QUFDaEI7O0FBRUE7SUFDSSxzQkFBc0I7SUFDdEIsV0FBVztJQUNYLFlBQVk7SUFDWixrQkFBa0I7SUFDbEIsY0FBYztJQUNkLHdCQUF3QjtJQUN4QixrQkFBa0I7SUFDbEIsYUFBYTtJQUNiLDZCQUE2QjtJQUM3QixtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxzQkFBc0I7SUFDdEIsV0FBVztJQUNYLFlBQVk7SUFDWixZQUFZO0lBQ1osY0FBYztJQUNkLHFCQUFxQjtJQUNyQixrQkFBa0I7SUFDbEIsYUFBYTtJQUNiLHNCQUFzQjtBQUMxQjs7QUFFQTtJQUNJLG1CQUFtQjtJQUNuQixXQUFXO0lBQ1gsWUFBWTtJQUNaLGNBQWM7SUFDZCx3QkFBd0I7SUFDeEIsc0JBQXNCO0lBQ3RCLGFBQWE7SUFDYiw2QkFBNkI7SUFDN0IsdUJBQXVCO0lBQ3ZCLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSxXQUFXO0lBQ1gsVUFBVTtBQUNkXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIiNob21lIHtcXHJcXG4gICAgd2lkdGg6IDgwdnc7XFxyXFxuICAgIGhlaWdodDogMTAwJTtcXHJcXG4gICAgbWFyZ2luOiBhdXRvO1xcclxcbn1cXHJcXG5cXHJcXG4uaG9tZS1jb250cm9scyB7XFxyXFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxyXFxuICAgIGhlaWdodDogMTAlO1xcclxcbiAgICBtYXJnaW46IGF1dG87XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDVweDtcXHJcXG4gICAgb3ZlcmZsb3c6IGF1dG87IFxcclxcbiAgICBib3JkZXI6IDVweCBzb2xpZCBvcmFuZ2U7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcXHJcXG4gICAgZGlzcGxheTogZmxleDtcXHJcXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XFxyXFxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxyXFxufVxcclxcblxcclxcbi5ob21lLWl0ZW1zIHtcXHJcXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXHJcXG4gICAgaGVpZ2h0OiA4NSU7XFxyXFxuICAgIG1hcmdpbjogYXV0bztcXHJcXG4gICAgcGFkZGluZzogM3B4O1xcclxcbiAgICBvdmVyZmxvdzogYXV0bzsgXFxyXFxuICAgIGJvcmRlcjogNXB4IHNvbGlkIHJlZDtcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xcclxcbiAgICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcclxcbn1cXHJcXG5cXHJcXG4uaG9tZS1pdGVtcy1saXN0IHtcXHJcXG4gICAgYm94LXNpemluZzogaW5oZXJpdDtcXHJcXG4gICAgd2lkdGg6IDEwMCU7XFxyXFxuICAgIG1hcmdpbjogYXV0bztcXHJcXG4gICAgb3ZlcmZsb3c6IGF1dG87IFxcclxcbiAgICBib3JkZXI6IDVweCBzb2xpZCBwdXJwbGU7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IGluaGVyaXQ7XFxyXFxuICAgIGRpc3BsYXk6IGZsZXg7XFxyXFxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xcclxcbiAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcXHJcXG4gICAgZmxleC13cmFwOiB3cmFwO1xcclxcbn1cXHJcXG5cXHJcXG4uaG9tZS1pdGVtcy1saXN0ID4gZGl2IHtcXHJcXG4gICAgbWFyZ2luOiAzcHg7XFxyXFxuICAgIHdpZHRoOiA0NSU7XFxyXFxufVxcclxcblwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcIi5pdGVtIHtcXHJcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxyXFxuICBib3JkZXItcmFkaXVzOiA1cHg7XFxyXFxuICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXHJcXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xcclxcbn1cXHJcXG4gIFxcclxcbi5pdGVtID4gZGl2IHtcXHJcXG4gIHBhZGRpbmc6IDElO1xcclxcbn1cXHJcXG4gIFxcclxcbi5pdGVtLXRpdGxlIHtcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6ICNlZWU7XFxyXFxuICBjb2xvcjogIzQ0NDtcXHJcXG4gIHRleHQtYWxpZ246IGxlZnQ7XFxyXFxuICBjdXJzb3I6IHBvaW50ZXI7XFxyXFxuICBvdXRsaW5lOiBub25lO1xcclxcbiAgbWFyZ2luOiAxJTtcXHJcXG59XFxyXFxuICBcXHJcXG4udGl0bGUtYWN0aXZlLCAuaXRlbS10aXRsZTpob3ZlciB7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2NjO1xcclxcbn1cXHJcXG4gIFxcclxcbi5pdGVtLXRpdGxlOmFmdGVyIHtcXHJcXG4gIGNvbnRlbnQ6ICdcXFxcMDI3OTUnOyAvKiBVbmljb2RlIGNoYXJhY3RlciBmb3IgXFxcInBsdXNcXFwiIHNpZ24gKCspICovXFxyXFxuICBmb250LXNpemU6IDEzcHg7XFxyXFxuICBjb2xvcjogd2hpdGU7XFxyXFxuICBmbG9hdDogcmlnaHQ7XFxyXFxuICBtYXJnaW4tbGVmdDogNXB4O1xcclxcbn1cXHJcXG4gIFxcclxcbi50aXRsZS1hY3RpdmU6YWZ0ZXIge1xcclxcbiAgY29udGVudDogXFxcIlxcXFwyNzk2XFxcIjsgLyogVW5pY29kZSBjaGFyYWN0ZXIgZm9yIFxcXCJtaW51c1xcXCIgc2lnbiAoLSkgKi9cXHJcXG59XFxyXFxuICBcXHJcXG4uaXRlbS1jb250ZW50IHtcXHJcXG4gIGRpc3BsYXk6IG5vbmU7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjFmMWYxO1xcclxcbiAgbWF4LWhlaWdodDogMDtcXHJcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxyXFxuICB0cmFuc2l0aW9uOiBtYXgtaGVpZ2h0IDAuMnMgZWFzZS1vdXQ7XFxyXFxufVxcclxcbiAgXFxyXFxuLml0ZW0tZGV0YWlscywgLml0ZW0tY29udHJvbHMge1xcclxcbiAgd2lkdGg6IDEwMCU7XFxyXFxuICBoZWlnaHQ6IDIwJTtcXHJcXG4gIGRpc3BsYXk6IGZsZXg7XFxyXFxuICBmbGV4LWRpcmVjdGlvbjogcm93O1xcclxcbn1cXHJcXG4gIFxcclxcbi5pdGVtLWNvbnRyb2xzIHtcXHJcXG4gIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XFxyXFxufVxcclxcbiAgXFxyXFxuLml0ZW0tZGV0YWlscyA+IGRpdiwgLml0ZW0tY29udHJvbHMgPiBkaXYge1xcclxcbiAgd2lkdGg6IDUwJTtcXHJcXG4gIGhlaWdodDogMTAwJTtcXHJcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXHJcXG59XFxyXFxuICBcXHJcXG4uaXRlbS1jb250cm9scyA+IGRpdiB7XFxyXFxuICB3aWR0aDogY2FsYygxMDAlLzMvMyk7XFxyXFxufVxcclxcbiAgXFxyXFxuLm92ZXJkdWUge1xcclxcbiAgLXdlYmtpdC1hbmltYXRpb246IG92ZXJkdWUgbGluZWFyIDEuNXMgaW5maW5pdGU7XFxyXFxuICBhbmltYXRpb246IG92ZXJkdWUgbGluZWFyIDEuNXMgaW5maW5pdGU7XFxyXFxufVxcclxcbkAtd2Via2l0LWtleWZyYW1lcyBvdmVyZHVlIHtcXHJcXG4gIDUwJSB7IGJvcmRlci1jb2xvcjogcmVkOyB9IFxcclxcbn1cXHJcXG5Aa2V5ZnJhbWVzIG92ZXJkdWUge1xcclxcbiAgNTAlIHsgYm9yZGVyLWNvbG9yOiByZWQ7IH0gXFxyXFxufVxcclxcblxcclxcbi5oYXNPdmVyZHVlIHtcXHJcXG4gIC13ZWJraXQtYW5pbWF0aW9uOiBoYXNPdmVyZHVlIGxpbmVhciAxLjVzIGluZmluaXRlO1xcclxcbiAgYW5pbWF0aW9uOiBoYXNPdmVyZHVlIGxpbmVhciAxLjVzIGluZmluaXRlO1xcclxcbn1cXHJcXG5ALXdlYmtpdC1rZXlmcmFtZXMgaGFzT3ZlcmR1ZSB7XFxyXFxuICA1MCUgeyBib3JkZXItY29sb3I6IG9yYW5nZTsgfSBcXHJcXG59XFxyXFxuQGtleWZyYW1lcyBoYXNPdmVyZHVlIHtcXHJcXG4gIDUwJSB7IGJvcmRlci1jb2xvcjogb3JhbmdlOyB9IFxcclxcbn1cXHJcXG5cXHJcXG4uZG9uZSB7XFxyXFxuICBvcGFjaXR5OiAwLjM7XFxyXFxufVxcclxcblxcclxcblwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy92aWV3L2NvbXBvbmVudHMvaXRlbS5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7RUFDRSxzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsNkJBQTZCO0FBQy9COztBQUVBO0VBQ0UsV0FBVztBQUNiOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCxnQkFBZ0I7RUFDaEIsZUFBZTtFQUNmLGFBQWE7RUFDYixVQUFVO0FBQ1o7O0FBRUE7RUFDRSxzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxpQkFBaUIsRUFBRSwwQ0FBMEM7RUFDN0QsZUFBZTtFQUNmLFlBQVk7RUFDWixZQUFZO0VBQ1osZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsZ0JBQWdCLEVBQUUsMkNBQTJDO0FBQy9EOztBQUVBO0VBQ0UsYUFBYTtFQUNiLHlCQUF5QjtFQUN6QixhQUFhO0VBQ2IsZ0JBQWdCO0VBQ2hCLG9DQUFvQztBQUN0Qzs7QUFFQTtFQUNFLFdBQVc7RUFDWCxXQUFXO0VBQ1gsYUFBYTtFQUNiLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLHlCQUF5QjtBQUMzQjs7QUFFQTtFQUNFLFVBQVU7RUFDVixZQUFZO0VBQ1osa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UscUJBQXFCO0FBQ3ZCOztBQUVBO0VBQ0UsK0NBQStDO0VBQy9DLHVDQUF1QztBQUN6QztBQUNBO0VBQ0UsTUFBTSxpQkFBaUIsRUFBRTtBQUMzQjtBQUNBO0VBQ0UsTUFBTSxpQkFBaUIsRUFBRTtBQUMzQjs7QUFFQTtFQUNFLGtEQUFrRDtFQUNsRCwwQ0FBMEM7QUFDNUM7QUFDQTtFQUNFLE1BQU0sb0JBQW9CLEVBQUU7QUFDOUI7QUFDQTtFQUNFLE1BQU0sb0JBQW9CLEVBQUU7QUFDOUI7O0FBRUE7RUFDRSxZQUFZO0FBQ2RcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLml0ZW0ge1xcclxcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXHJcXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcXHJcXG4gIGRpc3BsYXk6IGZsZXg7XFxyXFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcclxcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XFxyXFxufVxcclxcbiAgXFxyXFxuLml0ZW0gPiBkaXYge1xcclxcbiAgcGFkZGluZzogMSU7XFxyXFxufVxcclxcbiAgXFxyXFxuLml0ZW0tdGl0bGUge1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTtcXHJcXG4gIGNvbG9yOiAjNDQ0O1xcclxcbiAgdGV4dC1hbGlnbjogbGVmdDtcXHJcXG4gIGN1cnNvcjogcG9pbnRlcjtcXHJcXG4gIG91dGxpbmU6IG5vbmU7XFxyXFxuICBtYXJnaW46IDElO1xcclxcbn1cXHJcXG4gIFxcclxcbi50aXRsZS1hY3RpdmUsIC5pdGVtLXRpdGxlOmhvdmVyIHtcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6ICNjY2M7XFxyXFxufVxcclxcbiAgXFxyXFxuLml0ZW0tdGl0bGU6YWZ0ZXIge1xcclxcbiAgY29udGVudDogJ1xcXFwwMjc5NSc7IC8qIFVuaWNvZGUgY2hhcmFjdGVyIGZvciBcXFwicGx1c1xcXCIgc2lnbiAoKykgKi9cXHJcXG4gIGZvbnQtc2l6ZTogMTNweDtcXHJcXG4gIGNvbG9yOiB3aGl0ZTtcXHJcXG4gIGZsb2F0OiByaWdodDtcXHJcXG4gIG1hcmdpbi1sZWZ0OiA1cHg7XFxyXFxufVxcclxcbiAgXFxyXFxuLnRpdGxlLWFjdGl2ZTphZnRlciB7XFxyXFxuICBjb250ZW50OiBcXFwiXFxcXDI3OTZcXFwiOyAvKiBVbmljb2RlIGNoYXJhY3RlciBmb3IgXFxcIm1pbnVzXFxcIiBzaWduICgtKSAqL1xcclxcbn1cXHJcXG4gIFxcclxcbi5pdGVtLWNvbnRlbnQge1xcclxcbiAgZGlzcGxheTogbm9uZTtcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmMWYxZjE7XFxyXFxuICBtYXgtaGVpZ2h0OiAwO1xcclxcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcXHJcXG4gIHRyYW5zaXRpb246IG1heC1oZWlnaHQgMC4ycyBlYXNlLW91dDtcXHJcXG59XFxyXFxuICBcXHJcXG4uaXRlbS1kZXRhaWxzLCAuaXRlbS1jb250cm9scyB7XFxyXFxuICB3aWR0aDogMTAwJTtcXHJcXG4gIGhlaWdodDogMjAlO1xcclxcbiAgZGlzcGxheTogZmxleDtcXHJcXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XFxyXFxufVxcclxcbiAgXFxyXFxuLml0ZW0tY29udHJvbHMge1xcclxcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcXHJcXG59XFxyXFxuICBcXHJcXG4uaXRlbS1kZXRhaWxzID4gZGl2LCAuaXRlbS1jb250cm9scyA+IGRpdiB7XFxyXFxuICB3aWR0aDogNTAlO1xcclxcbiAgaGVpZ2h0OiAxMDAlO1xcclxcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbn1cXHJcXG4gIFxcclxcbi5pdGVtLWNvbnRyb2xzID4gZGl2IHtcXHJcXG4gIHdpZHRoOiBjYWxjKDEwMCUvMy8zKTtcXHJcXG59XFxyXFxuICBcXHJcXG4ub3ZlcmR1ZSB7XFxyXFxuICAtd2Via2l0LWFuaW1hdGlvbjogb3ZlcmR1ZSBsaW5lYXIgMS41cyBpbmZpbml0ZTtcXHJcXG4gIGFuaW1hdGlvbjogb3ZlcmR1ZSBsaW5lYXIgMS41cyBpbmZpbml0ZTtcXHJcXG59XFxyXFxuQC13ZWJraXQta2V5ZnJhbWVzIG92ZXJkdWUge1xcclxcbiAgNTAlIHsgYm9yZGVyLWNvbG9yOiByZWQ7IH0gXFxyXFxufVxcclxcbkBrZXlmcmFtZXMgb3ZlcmR1ZSB7XFxyXFxuICA1MCUgeyBib3JkZXItY29sb3I6IHJlZDsgfSBcXHJcXG59XFxyXFxuXFxyXFxuLmhhc092ZXJkdWUge1xcclxcbiAgLXdlYmtpdC1hbmltYXRpb246IGhhc092ZXJkdWUgbGluZWFyIDEuNXMgaW5maW5pdGU7XFxyXFxuICBhbmltYXRpb246IGhhc092ZXJkdWUgbGluZWFyIDEuNXMgaW5maW5pdGU7XFxyXFxufVxcclxcbkAtd2Via2l0LWtleWZyYW1lcyBoYXNPdmVyZHVlIHtcXHJcXG4gIDUwJSB7IGJvcmRlci1jb2xvcjogb3JhbmdlOyB9IFxcclxcbn1cXHJcXG5Aa2V5ZnJhbWVzIGhhc092ZXJkdWUge1xcclxcbiAgNTAlIHsgYm9yZGVyLWNvbG9yOiBvcmFuZ2U7IH0gXFxyXFxufVxcclxcblxcclxcbi5kb25lIHtcXHJcXG4gIG9wYWNpdHk6IDAuMztcXHJcXG59XFxyXFxuXFxyXFxuXCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiLnByb2plY3Qge1xcclxcbiAgYm9yZGVyOiAzcHggc29saWQgZ3JlZW47XFxyXFxufVxcclxcblwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy92aWV3L2NvbXBvbmVudHMvcHJvamVjdC5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7RUFDRSx1QkFBdUI7QUFDekJcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLnByb2plY3Qge1xcclxcbiAgYm9yZGVyOiAzcHggc29saWQgZ3JlZW47XFxyXFxufVxcclxcblwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcIi5mb3JtLWFkZCB7XFxyXFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxyXFxuICAgIG1hcmdpbjogYXV0bztcXHJcXG4gICAgbWFyZ2luLXRvcDogM3B4O1xcclxcbiAgICBtYXJnaW4tYm90dG9tOiAzcHg7XFxyXFxuICAgIGhlaWdodDogOTAlO1xcclxcbiAgICBib3JkZXI6IDNweCBzb2xpZCBpbmRpYW5yZWQ7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWU7XFxyXFxuICAgIHBhZGRpbmc6IDEwcHg7XFxyXFxufVxcclxcblxcclxcbi5mb3JtLWFkZC1wcm9qZWN0IHtcXHJcXG4gICAgd2lkdGg6IGNhbGMoMTAwJS8zKTtcXHJcXG59XFxyXFxuXFxyXFxuLmZvcm0tYWRkLXRvZG8ge1xcclxcbiAgICB3aWR0aDogMTAwJTtcXHJcXG59XFxyXFxuXFxyXFxuOjpwbGFjZWhvbGRlciB7XFxyXFxuICAgIGNvbG9yOiBpbmhlcml0O1xcclxcbiAgICBmb250OiBpbmhlcml0O1xcclxcbiAgfVxcclxcblxcclxcbi5mb3JtLWFkZCBkaXYsIC5mb3JtLWFkZCBpbnB1dCB7XFxyXFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgbWFyZ2luOiBhdXRvO1xcclxcbiAgICBtYXJnaW4tdG9wOiA1cHg7XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDVweDtcXHJcXG4gICAgd2lkdGg6IDEwMCU7XFxyXFxuICAgIGhlaWdodDogY2FsYygxMDAlLzQpO1xcclxcbiAgICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXHJcXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXHJcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbn1cXHJcXG5cXHJcXG5cXHJcXG5cXHJcXG4uZm9ybS1lZGl0IHtcXHJcXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXHJcXG4gICAgbWFyZ2luOiBhdXRvO1xcclxcbiAgICBtYXJnaW4tdG9wOiAzcHg7XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDNweDtcXHJcXG4gICAgaGVpZ2h0OiA5MCU7XFxyXFxuICAgIGJvcmRlcjogM3B4IHNvbGlkIGluZGlhbnJlZDtcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTtcXHJcXG4gICAgcGFkZGluZzogMTBweDtcXHJcXG59XFxyXFxuXFxyXFxuLmZvcm0tZWRpdC1ob21lIHtcXHJcXG4gICAgd2lkdGg6IGNhbGMoMTAwJS8zKTtcXHJcXG59XFxyXFxuXFxyXFxuLmZvcm0tZWRpdC10b2RvIHtcXHJcXG4gICAgd2lkdGg6IDEwMCU7XFxyXFxufVxcclxcblxcclxcbjo6cGxhY2Vob2xkZXIge1xcclxcbiAgICBjb2xvcjogaW5oZXJpdDtcXHJcXG4gICAgZm9udDogaW5oZXJpdDtcXHJcXG4gIH1cXHJcXG5cXHJcXG4uZm9ybS1lZGl0IGRpdiwgLmZvcm0tZWRpdCBpbnB1dCB7XFxyXFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgbWFyZ2luOiBhdXRvO1xcclxcbiAgICBtYXJnaW4tdG9wOiA1cHg7XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDVweDtcXHJcXG4gICAgd2lkdGg6IDEwMCU7XFxyXFxuICAgIGhlaWdodDogY2FsYygxMDAlLzQpO1xcclxcbiAgICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXHJcXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXHJcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbn1cXHJcXG5cXHJcXG5sYWJlbCB7XFxyXFxuICAgIC8qIGZsb2F0OiBsZWZ0OyAqL1xcclxcbiAgICB3aWR0aDogMjAlO1xcclxcbn1cXHJcXG5cXHJcXG5zZWxlY3Qge1xcclxcbiAgICBmbG9hdDogcmlnaHQ7XFxyXFxuICAgIHdpZHRoOiA4MCU7XFxyXFxufVxcclxcblwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy92aWV3L2Zvcm1zL2Zvcm1zLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTtJQUNJLHNCQUFzQjtJQUN0QixZQUFZO0lBQ1osZUFBZTtJQUNmLGtCQUFrQjtJQUNsQixXQUFXO0lBQ1gsMkJBQTJCO0lBQzNCLG1CQUFtQjtJQUNuQixzQkFBc0I7SUFDdEIsYUFBYTtBQUNqQjs7QUFFQTtJQUNJLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLFdBQVc7QUFDZjs7QUFFQTtJQUNJLGNBQWM7SUFDZCxhQUFhO0VBQ2Y7O0FBRUY7SUFDSSxzQkFBc0I7SUFDdEIsa0JBQWtCO0lBQ2xCLFlBQVk7SUFDWixlQUFlO0lBQ2Ysa0JBQWtCO0lBQ2xCLFdBQVc7SUFDWCxvQkFBb0I7SUFDcEIsYUFBYTtJQUNiLHVCQUF1QjtJQUN2QixtQkFBbUI7SUFDbkIsa0JBQWtCO0FBQ3RCOzs7O0FBSUE7SUFDSSxzQkFBc0I7SUFDdEIsWUFBWTtJQUNaLGVBQWU7SUFDZixrQkFBa0I7SUFDbEIsV0FBVztJQUNYLDJCQUEyQjtJQUMzQixtQkFBbUI7SUFDbkIsc0JBQXNCO0lBQ3RCLGFBQWE7QUFDakI7O0FBRUE7SUFDSSxtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxXQUFXO0FBQ2Y7O0FBRUE7SUFDSSxjQUFjO0lBQ2QsYUFBYTtFQUNmOztBQUVGO0lBQ0ksc0JBQXNCO0lBQ3RCLGtCQUFrQjtJQUNsQixZQUFZO0lBQ1osZUFBZTtJQUNmLGtCQUFrQjtJQUNsQixXQUFXO0lBQ1gsb0JBQW9CO0lBQ3BCLGFBQWE7SUFDYix1QkFBdUI7SUFDdkIsbUJBQW1CO0lBQ25CLGtCQUFrQjtBQUN0Qjs7QUFFQTtJQUNJLGlCQUFpQjtJQUNqQixVQUFVO0FBQ2Q7O0FBRUE7SUFDSSxZQUFZO0lBQ1osVUFBVTtBQUNkXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIi5mb3JtLWFkZCB7XFxyXFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxyXFxuICAgIG1hcmdpbjogYXV0bztcXHJcXG4gICAgbWFyZ2luLXRvcDogM3B4O1xcclxcbiAgICBtYXJnaW4tYm90dG9tOiAzcHg7XFxyXFxuICAgIGhlaWdodDogOTAlO1xcclxcbiAgICBib3JkZXI6IDNweCBzb2xpZCBpbmRpYW5yZWQ7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWU7XFxyXFxuICAgIHBhZGRpbmc6IDEwcHg7XFxyXFxufVxcclxcblxcclxcbi5mb3JtLWFkZC1wcm9qZWN0IHtcXHJcXG4gICAgd2lkdGg6IGNhbGMoMTAwJS8zKTtcXHJcXG59XFxyXFxuXFxyXFxuLmZvcm0tYWRkLXRvZG8ge1xcclxcbiAgICB3aWR0aDogMTAwJTtcXHJcXG59XFxyXFxuXFxyXFxuOjpwbGFjZWhvbGRlciB7XFxyXFxuICAgIGNvbG9yOiBpbmhlcml0O1xcclxcbiAgICBmb250OiBpbmhlcml0O1xcclxcbiAgfVxcclxcblxcclxcbi5mb3JtLWFkZCBkaXYsIC5mb3JtLWFkZCBpbnB1dCB7XFxyXFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgbWFyZ2luOiBhdXRvO1xcclxcbiAgICBtYXJnaW4tdG9wOiA1cHg7XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDVweDtcXHJcXG4gICAgd2lkdGg6IDEwMCU7XFxyXFxuICAgIGhlaWdodDogY2FsYygxMDAlLzQpO1xcclxcbiAgICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXHJcXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXHJcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbn1cXHJcXG5cXHJcXG5cXHJcXG5cXHJcXG4uZm9ybS1lZGl0IHtcXHJcXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXHJcXG4gICAgbWFyZ2luOiBhdXRvO1xcclxcbiAgICBtYXJnaW4tdG9wOiAzcHg7XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDNweDtcXHJcXG4gICAgaGVpZ2h0OiA5MCU7XFxyXFxuICAgIGJvcmRlcjogM3B4IHNvbGlkIGluZGlhbnJlZDtcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTtcXHJcXG4gICAgcGFkZGluZzogMTBweDtcXHJcXG59XFxyXFxuXFxyXFxuLmZvcm0tZWRpdC1ob21lIHtcXHJcXG4gICAgd2lkdGg6IGNhbGMoMTAwJS8zKTtcXHJcXG59XFxyXFxuXFxyXFxuLmZvcm0tZWRpdC10b2RvIHtcXHJcXG4gICAgd2lkdGg6IDEwMCU7XFxyXFxufVxcclxcblxcclxcbjo6cGxhY2Vob2xkZXIge1xcclxcbiAgICBjb2xvcjogaW5oZXJpdDtcXHJcXG4gICAgZm9udDogaW5oZXJpdDtcXHJcXG4gIH1cXHJcXG5cXHJcXG4uZm9ybS1lZGl0IGRpdiwgLmZvcm0tZWRpdCBpbnB1dCB7XFxyXFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgbWFyZ2luOiBhdXRvO1xcclxcbiAgICBtYXJnaW4tdG9wOiA1cHg7XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDVweDtcXHJcXG4gICAgd2lkdGg6IDEwMCU7XFxyXFxuICAgIGhlaWdodDogY2FsYygxMDAlLzQpO1xcclxcbiAgICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXHJcXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXHJcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbn1cXHJcXG5cXHJcXG5sYWJlbCB7XFxyXFxuICAgIC8qIGZsb2F0OiBsZWZ0OyAqL1xcclxcbiAgICB3aWR0aDogMjAlO1xcclxcbn1cXHJcXG5cXHJcXG5zZWxlY3Qge1xcclxcbiAgICBmbG9hdDogcmlnaHQ7XFxyXFxuICAgIHdpZHRoOiA4MCU7XFxyXFxufVxcclxcblwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcpIHtcbiAgdmFyIGxpc3QgPSBbXTsgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gXCJcIjtcbiAgICAgIHZhciBuZWVkTGF5ZXIgPSB0eXBlb2YgaXRlbVs1XSAhPT0gXCJ1bmRlZmluZWRcIjtcblxuICAgICAgaWYgKGl0ZW1bNF0pIHtcbiAgICAgICAgY29udGVudCArPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KGl0ZW1bNF0sIFwiKSB7XCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICBjb250ZW50ICs9IFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAobmVlZExheWVyKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAbGF5ZXJcIi5jb25jYXQoaXRlbVs1XS5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KGl0ZW1bNV0pIDogXCJcIiwgXCIge1wiKTtcbiAgICAgIH1cblxuICAgICAgY29udGVudCArPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0pO1xuXG4gICAgICBpZiAobmVlZExheWVyKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG5cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG5cbiAgICAgIGlmIChpdGVtWzRdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oXCJcIik7XG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG5cblxuICBsaXN0LmkgPSBmdW5jdGlvbiBpKG1vZHVsZXMsIG1lZGlhLCBkZWR1cGUsIHN1cHBvcnRzLCBsYXllcikge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgdW5kZWZpbmVkXV07XG4gICAgfVxuXG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblxuICAgIGlmIChkZWR1cGUpIHtcbiAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCB0aGlzLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIgaWQgPSB0aGlzW19pXVswXTtcblxuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IG1vZHVsZXMubGVuZ3RoOyBfaTIrKykge1xuICAgICAgdmFyIGl0ZW0gPSBbXS5jb25jYXQobW9kdWxlc1tfaTJdKTtcblxuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGxheWVyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbVs1XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAbGF5ZXJcIi5jb25jYXQoaXRlbVs1XS5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KGl0ZW1bNV0pIDogXCJcIiwgXCIge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobWVkaWEpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc3VwcG9ydHMpIHtcbiAgICAgICAgaWYgKCFpdGVtWzRdKSB7XG4gICAgICAgICAgaXRlbVs0XSA9IFwiXCIuY29uY2F0KHN1cHBvcnRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChpdGVtWzRdLCBcIikge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bNF0gPSBzdXBwb3J0cztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBsaXN0O1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV07XG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblxuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIGlmICh0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGNzc01hcHBpbmcpKSkpO1xuICAgIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbiAgICB2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIi5jb25jYXQoY3NzTWFwcGluZy5zb3VyY2VSb290IHx8IFwiXCIpLmNvbmNhdChzb3VyY2UsIFwiICovXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oXCJcXG5cIik7XG4gIH1cblxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oXCJcXG5cIik7XG59OyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlcXVpcmVkQXJncyhyZXF1aXJlZCwgYXJncykge1xuICBpZiAoYXJncy5sZW5ndGggPCByZXF1aXJlZCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocmVxdWlyZWQgKyAnIGFyZ3VtZW50JyArIChyZXF1aXJlZCA+IDEgPyAncycgOiAnJykgKyAnIHJlcXVpcmVkLCBidXQgb25seSAnICsgYXJncy5sZW5ndGggKyAnIHByZXNlbnQnKTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvSW50ZWdlcihkaXJ0eU51bWJlcikge1xuICBpZiAoZGlydHlOdW1iZXIgPT09IG51bGwgfHwgZGlydHlOdW1iZXIgPT09IHRydWUgfHwgZGlydHlOdW1iZXIgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuXG4gIHZhciBudW1iZXIgPSBOdW1iZXIoZGlydHlOdW1iZXIpO1xuXG4gIGlmIChpc05hTihudW1iZXIpKSB7XG4gICAgcmV0dXJuIG51bWJlcjtcbiAgfVxuXG4gIHJldHVybiBudW1iZXIgPCAwID8gTWF0aC5jZWlsKG51bWJlcikgOiBNYXRoLmZsb29yKG51bWJlcik7XG59IiwiaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vX2xpYi90b0ludGVnZXIvaW5kZXguanNcIjtcbmltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgYWRkTW9udGhzXG4gKiBAY2F0ZWdvcnkgTW9udGggSGVscGVyc1xuICogQHN1bW1hcnkgQWRkIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIG1vbnRocyB0byB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFkZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBtb250aHMgdG8gdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gYmUgY2hhbmdlZFxuICogQHBhcmFtIHtOdW1iZXJ9IGFtb3VudCAtIHRoZSBhbW91bnQgb2YgbW9udGhzIHRvIGJlIGFkZGVkLiBQb3NpdGl2ZSBkZWNpbWFscyB3aWxsIGJlIHJvdW5kZWQgdXNpbmcgYE1hdGguZmxvb3JgLCBkZWNpbWFscyBsZXNzIHRoYW4gemVybyB3aWxsIGJlIHJvdW5kZWQgdXNpbmcgYE1hdGguY2VpbGAuXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIG5ldyBkYXRlIHdpdGggdGhlIG1vbnRocyBhZGRlZFxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBZGQgNSBtb250aHMgdG8gMSBTZXB0ZW1iZXIgMjAxNDpcbiAqIGNvbnN0IHJlc3VsdCA9IGFkZE1vbnRocyhuZXcgRGF0ZSgyMDE0LCA4LCAxKSwgNSlcbiAqIC8vPT4gU3VuIEZlYiAwMSAyMDE1IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWRkTW9udGhzKGRpcnR5RGF0ZSwgZGlydHlBbW91bnQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIHZhciBhbW91bnQgPSB0b0ludGVnZXIoZGlydHlBbW91bnQpO1xuXG4gIGlmIChpc05hTihhbW91bnQpKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cblxuICBpZiAoIWFtb3VudCkge1xuICAgIC8vIElmIDAgbW9udGhzLCBuby1vcCB0byBhdm9pZCBjaGFuZ2luZyB0aW1lcyBpbiB0aGUgaG91ciBiZWZvcmUgZW5kIG9mIERTVFxuICAgIHJldHVybiBkYXRlO1xuICB9XG5cbiAgdmFyIGRheU9mTW9udGggPSBkYXRlLmdldERhdGUoKTsgLy8gVGhlIEpTIERhdGUgb2JqZWN0IHN1cHBvcnRzIGRhdGUgbWF0aCBieSBhY2NlcHRpbmcgb3V0LW9mLWJvdW5kcyB2YWx1ZXMgZm9yXG4gIC8vIG1vbnRoLCBkYXksIGV0Yy4gRm9yIGV4YW1wbGUsIG5ldyBEYXRlKDIwMjAsIDAsIDApIHJldHVybnMgMzEgRGVjIDIwMTkgYW5kXG4gIC8vIG5ldyBEYXRlKDIwMjAsIDEzLCAxKSByZXR1cm5zIDEgRmViIDIwMjEuICBUaGlzIGlzICphbG1vc3QqIHRoZSBiZWhhdmlvciB3ZVxuICAvLyB3YW50IGV4Y2VwdCB0aGF0IGRhdGVzIHdpbGwgd3JhcCBhcm91bmQgdGhlIGVuZCBvZiBhIG1vbnRoLCBtZWFuaW5nIHRoYXRcbiAgLy8gbmV3IERhdGUoMjAyMCwgMTMsIDMxKSB3aWxsIHJldHVybiAzIE1hciAyMDIxIG5vdCAyOCBGZWIgMjAyMSBhcyBkZXNpcmVkLiBTb1xuICAvLyB3ZSdsbCBkZWZhdWx0IHRvIHRoZSBlbmQgb2YgdGhlIGRlc2lyZWQgbW9udGggYnkgYWRkaW5nIDEgdG8gdGhlIGRlc2lyZWRcbiAgLy8gbW9udGggYW5kIHVzaW5nIGEgZGF0ZSBvZiAwIHRvIGJhY2sgdXAgb25lIGRheSB0byB0aGUgZW5kIG9mIHRoZSBkZXNpcmVkXG4gIC8vIG1vbnRoLlxuXG4gIHZhciBlbmRPZkRlc2lyZWRNb250aCA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTtcbiAgZW5kT2ZEZXNpcmVkTW9udGguc2V0TW9udGgoZGF0ZS5nZXRNb250aCgpICsgYW1vdW50ICsgMSwgMCk7XG4gIHZhciBkYXlzSW5Nb250aCA9IGVuZE9mRGVzaXJlZE1vbnRoLmdldERhdGUoKTtcblxuICBpZiAoZGF5T2ZNb250aCA+PSBkYXlzSW5Nb250aCkge1xuICAgIC8vIElmIHdlJ3JlIGFscmVhZHkgYXQgdGhlIGVuZCBvZiB0aGUgbW9udGgsIHRoZW4gdGhpcyBpcyB0aGUgY29ycmVjdCBkYXRlXG4gICAgLy8gYW5kIHdlJ3JlIGRvbmUuXG4gICAgcmV0dXJuIGVuZE9mRGVzaXJlZE1vbnRoO1xuICB9IGVsc2Uge1xuICAgIC8vIE90aGVyd2lzZSwgd2Ugbm93IGtub3cgdGhhdCBzZXR0aW5nIHRoZSBvcmlnaW5hbCBkYXktb2YtbW9udGggdmFsdWUgd29uJ3RcbiAgICAvLyBjYXVzZSBhbiBvdmVyZmxvdywgc28gc2V0IHRoZSBkZXNpcmVkIGRheS1vZi1tb250aC4gTm90ZSB0aGF0IHdlIGNhbid0XG4gICAgLy8ganVzdCBzZXQgdGhlIGRhdGUgb2YgYGVuZE9mRGVzaXJlZE1vbnRoYCBiZWNhdXNlIHRoYXQgb2JqZWN0IG1heSBoYXZlIGhhZFxuICAgIC8vIGl0cyB0aW1lIGNoYW5nZWQgaW4gdGhlIHVudXN1YWwgY2FzZSB3aGVyZSB3aGVyZSBhIERTVCB0cmFuc2l0aW9uIHdhcyBvblxuICAgIC8vIHRoZSBsYXN0IGRheSBvZiB0aGUgbW9udGggYW5kIGl0cyBsb2NhbCB0aW1lIHdhcyBpbiB0aGUgaG91ciBza2lwcGVkIG9yXG4gICAgLy8gcmVwZWF0ZWQgbmV4dCB0byBhIERTVCB0cmFuc2l0aW9uLiAgU28gd2UgdXNlIGBkYXRlYCBpbnN0ZWFkIHdoaWNoIGlzXG4gICAgLy8gZ3VhcmFudGVlZCB0byBzdGlsbCBoYXZlIHRoZSBvcmlnaW5hbCB0aW1lLlxuICAgIGRhdGUuc2V0RnVsbFllYXIoZW5kT2ZEZXNpcmVkTW9udGguZ2V0RnVsbFllYXIoKSwgZW5kT2ZEZXNpcmVkTW9udGguZ2V0TW9udGgoKSwgZGF5T2ZNb250aCk7XG4gICAgcmV0dXJuIGRhdGU7XG4gIH1cbn0iLCJpbXBvcnQgdG9JbnRlZ2VyIGZyb20gXCIuLi9fbGliL3RvSW50ZWdlci9pbmRleC5qc1wiO1xuaW1wb3J0IGFkZE1vbnRocyBmcm9tIFwiLi4vYWRkTW9udGhzL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBhZGRZZWFyc1xuICogQGNhdGVnb3J5IFllYXIgSGVscGVyc1xuICogQHN1bW1hcnkgQWRkIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIHllYXJzIHRvIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQWRkIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIHllYXJzIHRvIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBkYXRlIHRvIGJlIGNoYW5nZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBhbW91bnQgLSB0aGUgYW1vdW50IG9mIHllYXJzIHRvIGJlIGFkZGVkLiBQb3NpdGl2ZSBkZWNpbWFscyB3aWxsIGJlIHJvdW5kZWQgdXNpbmcgYE1hdGguZmxvb3JgLCBkZWNpbWFscyBsZXNzIHRoYW4gemVybyB3aWxsIGJlIHJvdW5kZWQgdXNpbmcgYE1hdGguY2VpbGAuXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIG5ldyBkYXRlIHdpdGggdGhlIHllYXJzIGFkZGVkXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFkZCA1IHllYXJzIHRvIDEgU2VwdGVtYmVyIDIwMTQ6XG4gKiBjb25zdCByZXN1bHQgPSBhZGRZZWFycyhuZXcgRGF0ZSgyMDE0LCA4LCAxKSwgNSlcbiAqIC8vPT4gU3VuIFNlcCAwMSAyMDE5IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWRkWWVhcnMoZGlydHlEYXRlLCBkaXJ0eUFtb3VudCkge1xuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGFtb3VudCA9IHRvSW50ZWdlcihkaXJ0eUFtb3VudCk7XG4gIHJldHVybiBhZGRNb250aHMoZGlydHlEYXRlLCBhbW91bnQgKiAxMik7XG59IiwiaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgaXNEYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiB2YWx1ZSBhIGRhdGU/XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGFuIGluc3RhbmNlIG9mIERhdGUuIFRoZSBmdW5jdGlvbiB3b3JrcyBmb3IgZGF0ZXMgdHJhbnNmZXJyZWQgYWNyb3NzIGlmcmFtZXMuXG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIC0gdGhlIHZhbHVlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYSBkYXRlXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnRzIHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEZvciBhIHZhbGlkIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc0RhdGUobmV3IERhdGUoKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3IgYW4gaW52YWxpZCBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gaXNEYXRlKG5ldyBEYXRlKE5hTikpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIHNvbWUgdmFsdWU6XG4gKiBjb25zdCByZXN1bHQgPSBpc0RhdGUoJzIwMTQtMDItMzEnKVxuICogLy89PiBmYWxzZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3IgYW4gb2JqZWN0OlxuICogY29uc3QgcmVzdWx0ID0gaXNEYXRlKHt9KVxuICogLy89PiBmYWxzZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzRGF0ZSh2YWx1ZSkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IERhdGVdJztcbn0iLCJpbXBvcnQgaXNEYXRlIGZyb20gXCIuLi9pc0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgaXNWYWxpZFxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBJcyB0aGUgZ2l2ZW4gZGF0ZSB2YWxpZD9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybnMgZmFsc2UgaWYgYXJndW1lbnQgaXMgSW52YWxpZCBEYXRlIGFuZCB0cnVlIG90aGVyd2lzZS5cbiAqIEFyZ3VtZW50IGlzIGNvbnZlcnRlZCB0byBEYXRlIHVzaW5nIGB0b0RhdGVgLiBTZWUgW3RvRGF0ZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy90b0RhdGV9XG4gKiBJbnZhbGlkIERhdGUgaXMgYSBEYXRlLCB3aG9zZSB0aW1lIHZhbHVlIGlzIE5hTi5cbiAqXG4gKiBUaW1lIHZhbHVlIG9mIERhdGU6IGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuOS4xLjFcbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIC0gTm93IGBpc1ZhbGlkYCBkb2Vzbid0IHRocm93IGFuIGV4Y2VwdGlvblxuICogICBpZiB0aGUgZmlyc3QgYXJndW1lbnQgaXMgbm90IGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKiAgIEluc3RlYWQsIGFyZ3VtZW50IGlzIGNvbnZlcnRlZCBiZWZvcmVoYW5kIHVzaW5nIGB0b0RhdGVgLlxuICpcbiAqICAgRXhhbXBsZXM6XG4gKlxuICogICB8IGBpc1ZhbGlkYCBhcmd1bWVudCAgICAgICAgfCBCZWZvcmUgdjIuMC4wIHwgdjIuMC4wIG9ud2FyZCB8XG4gKiAgIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLXxcbiAqICAgfCBgbmV3IERhdGUoKWAgICAgICAgICAgICAgIHwgYHRydWVgICAgICAgICB8IGB0cnVlYCAgICAgICAgfFxuICogICB8IGBuZXcgRGF0ZSgnMjAxNi0wMS0wMScpYCAgfCBgdHJ1ZWAgICAgICAgIHwgYHRydWVgICAgICAgICB8XG4gKiAgIHwgYG5ldyBEYXRlKCcnKWAgICAgICAgICAgICB8IGBmYWxzZWAgICAgICAgfCBgZmFsc2VgICAgICAgIHxcbiAqICAgfCBgbmV3IERhdGUoMTQ4ODM3MDgzNTA4MSlgIHwgYHRydWVgICAgICAgICB8IGB0cnVlYCAgICAgICAgfFxuICogICB8IGBuZXcgRGF0ZShOYU4pYCAgICAgICAgICAgfCBgZmFsc2VgICAgICAgIHwgYGZhbHNlYCAgICAgICB8XG4gKiAgIHwgYCcyMDE2LTAxLTAxJ2AgICAgICAgICAgICB8IGBUeXBlRXJyb3JgICAgfCBgZmFsc2VgICAgICAgIHxcbiAqICAgfCBgJydgICAgICAgICAgICAgICAgICAgICAgIHwgYFR5cGVFcnJvcmAgICB8IGBmYWxzZWAgICAgICAgfFxuICogICB8IGAxNDg4MzcwODM1MDgxYCAgICAgICAgICAgfCBgVHlwZUVycm9yYCAgIHwgYHRydWVgICAgICAgICB8XG4gKiAgIHwgYE5hTmAgICAgICAgICAgICAgICAgICAgICB8IGBUeXBlRXJyb3JgICAgfCBgZmFsc2VgICAgICAgIHxcbiAqXG4gKiAgIFdlIGludHJvZHVjZSB0aGlzIGNoYW5nZSB0byBtYWtlICpkYXRlLWZucyogY29uc2lzdGVudCB3aXRoIEVDTUFTY3JpcHQgYmVoYXZpb3JcbiAqICAgdGhhdCB0cnkgdG8gY29lcmNlIGFyZ3VtZW50cyB0byB0aGUgZXhwZWN0ZWQgdHlwZVxuICogICAod2hpY2ggaXMgYWxzbyB0aGUgY2FzZSB3aXRoIG90aGVyICpkYXRlLWZucyogZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0geyp9IGRhdGUgLSB0aGUgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlIGlzIHZhbGlkXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIHRoZSB2YWxpZCBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gaXNWYWxpZChuZXcgRGF0ZSgyMDE0LCAxLCAzMSkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIHRoZSB2YWx1ZSwgY29udmVydGFibGUgaW50byBhIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc1ZhbGlkKDEzOTM4MDQ4MDAwMDApXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIHRoZSBpbnZhbGlkIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc1ZhbGlkKG5ldyBEYXRlKCcnKSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1ZhbGlkKGRpcnR5RGF0ZSkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcblxuICBpZiAoIWlzRGF0ZShkaXJ0eURhdGUpICYmIHR5cGVvZiBkaXJ0eURhdGUgIT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgcmV0dXJuICFpc05hTihOdW1iZXIoZGF0ZSkpO1xufSIsInZhciBmb3JtYXREaXN0YW5jZUxvY2FsZSA9IHtcbiAgbGVzc1RoYW5YU2Vjb25kczoge1xuICAgIG9uZTogJ2xlc3MgdGhhbiBhIHNlY29uZCcsXG4gICAgb3RoZXI6ICdsZXNzIHRoYW4ge3tjb3VudH19IHNlY29uZHMnXG4gIH0sXG4gIHhTZWNvbmRzOiB7XG4gICAgb25lOiAnMSBzZWNvbmQnLFxuICAgIG90aGVyOiAne3tjb3VudH19IHNlY29uZHMnXG4gIH0sXG4gIGhhbGZBTWludXRlOiAnaGFsZiBhIG1pbnV0ZScsXG4gIGxlc3NUaGFuWE1pbnV0ZXM6IHtcbiAgICBvbmU6ICdsZXNzIHRoYW4gYSBtaW51dGUnLFxuICAgIG90aGVyOiAnbGVzcyB0aGFuIHt7Y291bnR9fSBtaW51dGVzJ1xuICB9LFxuICB4TWludXRlczoge1xuICAgIG9uZTogJzEgbWludXRlJyxcbiAgICBvdGhlcjogJ3t7Y291bnR9fSBtaW51dGVzJ1xuICB9LFxuICBhYm91dFhIb3Vyczoge1xuICAgIG9uZTogJ2Fib3V0IDEgaG91cicsXG4gICAgb3RoZXI6ICdhYm91dCB7e2NvdW50fX0gaG91cnMnXG4gIH0sXG4gIHhIb3Vyczoge1xuICAgIG9uZTogJzEgaG91cicsXG4gICAgb3RoZXI6ICd7e2NvdW50fX0gaG91cnMnXG4gIH0sXG4gIHhEYXlzOiB7XG4gICAgb25lOiAnMSBkYXknLFxuICAgIG90aGVyOiAne3tjb3VudH19IGRheXMnXG4gIH0sXG4gIGFib3V0WFdlZWtzOiB7XG4gICAgb25lOiAnYWJvdXQgMSB3ZWVrJyxcbiAgICBvdGhlcjogJ2Fib3V0IHt7Y291bnR9fSB3ZWVrcydcbiAgfSxcbiAgeFdlZWtzOiB7XG4gICAgb25lOiAnMSB3ZWVrJyxcbiAgICBvdGhlcjogJ3t7Y291bnR9fSB3ZWVrcydcbiAgfSxcbiAgYWJvdXRYTW9udGhzOiB7XG4gICAgb25lOiAnYWJvdXQgMSBtb250aCcsXG4gICAgb3RoZXI6ICdhYm91dCB7e2NvdW50fX0gbW9udGhzJ1xuICB9LFxuICB4TW9udGhzOiB7XG4gICAgb25lOiAnMSBtb250aCcsXG4gICAgb3RoZXI6ICd7e2NvdW50fX0gbW9udGhzJ1xuICB9LFxuICBhYm91dFhZZWFyczoge1xuICAgIG9uZTogJ2Fib3V0IDEgeWVhcicsXG4gICAgb3RoZXI6ICdhYm91dCB7e2NvdW50fX0geWVhcnMnXG4gIH0sXG4gIHhZZWFyczoge1xuICAgIG9uZTogJzEgeWVhcicsXG4gICAgb3RoZXI6ICd7e2NvdW50fX0geWVhcnMnXG4gIH0sXG4gIG92ZXJYWWVhcnM6IHtcbiAgICBvbmU6ICdvdmVyIDEgeWVhcicsXG4gICAgb3RoZXI6ICdvdmVyIHt7Y291bnR9fSB5ZWFycydcbiAgfSxcbiAgYWxtb3N0WFllYXJzOiB7XG4gICAgb25lOiAnYWxtb3N0IDEgeWVhcicsXG4gICAgb3RoZXI6ICdhbG1vc3Qge3tjb3VudH19IHllYXJzJ1xuICB9XG59O1xuXG52YXIgZm9ybWF0RGlzdGFuY2UgPSBmdW5jdGlvbiAodG9rZW4sIGNvdW50LCBvcHRpb25zKSB7XG4gIHZhciByZXN1bHQ7XG4gIHZhciB0b2tlblZhbHVlID0gZm9ybWF0RGlzdGFuY2VMb2NhbGVbdG9rZW5dO1xuXG4gIGlmICh0eXBlb2YgdG9rZW5WYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXN1bHQgPSB0b2tlblZhbHVlO1xuICB9IGVsc2UgaWYgKGNvdW50ID09PSAxKSB7XG4gICAgcmVzdWx0ID0gdG9rZW5WYWx1ZS5vbmU7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gdG9rZW5WYWx1ZS5vdGhlci5yZXBsYWNlKCd7e2NvdW50fX0nLCBjb3VudC50b1N0cmluZygpKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zICE9PSBudWxsICYmIG9wdGlvbnMgIT09IHZvaWQgMCAmJiBvcHRpb25zLmFkZFN1ZmZpeCkge1xuICAgIGlmIChvcHRpb25zLmNvbXBhcmlzb24gJiYgb3B0aW9ucy5jb21wYXJpc29uID4gMCkge1xuICAgICAgcmV0dXJuICdpbiAnICsgcmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcmVzdWx0ICsgJyBhZ28nO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmb3JtYXREaXN0YW5jZTsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBidWlsZEZvcm1hdExvbmdGbihhcmdzKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIC8vIFRPRE86IFJlbW92ZSBTdHJpbmcoKVxuICAgIHZhciB3aWR0aCA9IG9wdGlvbnMud2lkdGggPyBTdHJpbmcob3B0aW9ucy53aWR0aCkgOiBhcmdzLmRlZmF1bHRXaWR0aDtcbiAgICB2YXIgZm9ybWF0ID0gYXJncy5mb3JtYXRzW3dpZHRoXSB8fCBhcmdzLmZvcm1hdHNbYXJncy5kZWZhdWx0V2lkdGhdO1xuICAgIHJldHVybiBmb3JtYXQ7XG4gIH07XG59IiwiaW1wb3J0IGJ1aWxkRm9ybWF0TG9uZ0ZuIGZyb20gXCIuLi8uLi8uLi9fbGliL2J1aWxkRm9ybWF0TG9uZ0ZuL2luZGV4LmpzXCI7XG52YXIgZGF0ZUZvcm1hdHMgPSB7XG4gIGZ1bGw6ICdFRUVFLCBNTU1NIGRvLCB5JyxcbiAgbG9uZzogJ01NTU0gZG8sIHknLFxuICBtZWRpdW06ICdNTU0gZCwgeScsXG4gIHNob3J0OiAnTU0vZGQveXl5eSdcbn07XG52YXIgdGltZUZvcm1hdHMgPSB7XG4gIGZ1bGw6ICdoOm1tOnNzIGEgenp6eicsXG4gIGxvbmc6ICdoOm1tOnNzIGEgeicsXG4gIG1lZGl1bTogJ2g6bW06c3MgYScsXG4gIHNob3J0OiAnaDptbSBhJ1xufTtcbnZhciBkYXRlVGltZUZvcm1hdHMgPSB7XG4gIGZ1bGw6IFwie3tkYXRlfX0gJ2F0JyB7e3RpbWV9fVwiLFxuICBsb25nOiBcInt7ZGF0ZX19ICdhdCcge3t0aW1lfX1cIixcbiAgbWVkaXVtOiAne3tkYXRlfX0sIHt7dGltZX19JyxcbiAgc2hvcnQ6ICd7e2RhdGV9fSwge3t0aW1lfX0nXG59O1xudmFyIGZvcm1hdExvbmcgPSB7XG4gIGRhdGU6IGJ1aWxkRm9ybWF0TG9uZ0ZuKHtcbiAgICBmb3JtYXRzOiBkYXRlRm9ybWF0cyxcbiAgICBkZWZhdWx0V2lkdGg6ICdmdWxsJ1xuICB9KSxcbiAgdGltZTogYnVpbGRGb3JtYXRMb25nRm4oe1xuICAgIGZvcm1hdHM6IHRpbWVGb3JtYXRzLFxuICAgIGRlZmF1bHRXaWR0aDogJ2Z1bGwnXG4gIH0pLFxuICBkYXRlVGltZTogYnVpbGRGb3JtYXRMb25nRm4oe1xuICAgIGZvcm1hdHM6IGRhdGVUaW1lRm9ybWF0cyxcbiAgICBkZWZhdWx0V2lkdGg6ICdmdWxsJ1xuICB9KVxufTtcbmV4cG9ydCBkZWZhdWx0IGZvcm1hdExvbmc7IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYnVpbGRNYXRjaFBhdHRlcm5GbihhcmdzKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIHZhciBtYXRjaFJlc3VsdCA9IHN0cmluZy5tYXRjaChhcmdzLm1hdGNoUGF0dGVybik7XG4gICAgaWYgKCFtYXRjaFJlc3VsdCkgcmV0dXJuIG51bGw7XG4gICAgdmFyIG1hdGNoZWRTdHJpbmcgPSBtYXRjaFJlc3VsdFswXTtcbiAgICB2YXIgcGFyc2VSZXN1bHQgPSBzdHJpbmcubWF0Y2goYXJncy5wYXJzZVBhdHRlcm4pO1xuICAgIGlmICghcGFyc2VSZXN1bHQpIHJldHVybiBudWxsO1xuICAgIHZhciB2YWx1ZSA9IGFyZ3MudmFsdWVDYWxsYmFjayA/IGFyZ3MudmFsdWVDYWxsYmFjayhwYXJzZVJlc3VsdFswXSkgOiBwYXJzZVJlc3VsdFswXTtcbiAgICB2YWx1ZSA9IG9wdGlvbnMudmFsdWVDYWxsYmFjayA/IG9wdGlvbnMudmFsdWVDYWxsYmFjayh2YWx1ZSkgOiB2YWx1ZTtcbiAgICB2YXIgcmVzdCA9IHN0cmluZy5zbGljZShtYXRjaGVkU3RyaW5nLmxlbmd0aCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIHJlc3Q6IHJlc3RcbiAgICB9O1xuICB9O1xufSIsInZhciBmb3JtYXRSZWxhdGl2ZUxvY2FsZSA9IHtcbiAgbGFzdFdlZWs6IFwiJ2xhc3QnIGVlZWUgJ2F0JyBwXCIsXG4gIHllc3RlcmRheTogXCIneWVzdGVyZGF5IGF0JyBwXCIsXG4gIHRvZGF5OiBcIid0b2RheSBhdCcgcFwiLFxuICB0b21vcnJvdzogXCIndG9tb3Jyb3cgYXQnIHBcIixcbiAgbmV4dFdlZWs6IFwiZWVlZSAnYXQnIHBcIixcbiAgb3RoZXI6ICdQJ1xufTtcblxudmFyIGZvcm1hdFJlbGF0aXZlID0gZnVuY3Rpb24gKHRva2VuLCBfZGF0ZSwgX2Jhc2VEYXRlLCBfb3B0aW9ucykge1xuICByZXR1cm4gZm9ybWF0UmVsYXRpdmVMb2NhbGVbdG9rZW5dO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZm9ybWF0UmVsYXRpdmU7IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYnVpbGRMb2NhbGl6ZUZuKGFyZ3MpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChkaXJ0eUluZGV4LCBkaXJ0eU9wdGlvbnMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGRpcnR5T3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgY29udGV4dCA9IG9wdGlvbnMuY29udGV4dCA/IFN0cmluZyhvcHRpb25zLmNvbnRleHQpIDogJ3N0YW5kYWxvbmUnO1xuICAgIHZhciB2YWx1ZXNBcnJheTtcblxuICAgIGlmIChjb250ZXh0ID09PSAnZm9ybWF0dGluZycgJiYgYXJncy5mb3JtYXR0aW5nVmFsdWVzKSB7XG4gICAgICB2YXIgZGVmYXVsdFdpZHRoID0gYXJncy5kZWZhdWx0Rm9ybWF0dGluZ1dpZHRoIHx8IGFyZ3MuZGVmYXVsdFdpZHRoO1xuICAgICAgdmFyIHdpZHRoID0gb3B0aW9ucy53aWR0aCA/IFN0cmluZyhvcHRpb25zLndpZHRoKSA6IGRlZmF1bHRXaWR0aDtcbiAgICAgIHZhbHVlc0FycmF5ID0gYXJncy5mb3JtYXR0aW5nVmFsdWVzW3dpZHRoXSB8fCBhcmdzLmZvcm1hdHRpbmdWYWx1ZXNbZGVmYXVsdFdpZHRoXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIF9kZWZhdWx0V2lkdGggPSBhcmdzLmRlZmF1bHRXaWR0aDtcblxuICAgICAgdmFyIF93aWR0aCA9IG9wdGlvbnMud2lkdGggPyBTdHJpbmcob3B0aW9ucy53aWR0aCkgOiBhcmdzLmRlZmF1bHRXaWR0aDtcblxuICAgICAgdmFsdWVzQXJyYXkgPSBhcmdzLnZhbHVlc1tfd2lkdGhdIHx8IGFyZ3MudmFsdWVzW19kZWZhdWx0V2lkdGhdO1xuICAgIH1cblxuICAgIHZhciBpbmRleCA9IGFyZ3MuYXJndW1lbnRDYWxsYmFjayA/IGFyZ3MuYXJndW1lbnRDYWxsYmFjayhkaXJ0eUluZGV4KSA6IGRpcnR5SW5kZXg7IC8vIEB0cy1pZ25vcmU6IEZvciBzb21lIHJlYXNvbiBUeXBlU2NyaXB0IGp1c3QgZG9uJ3Qgd2FudCB0byBtYXRjaCBpdCwgbm8gbWF0dGVyIGhvdyBoYXJkIHdlIHRyeS4gSSBjaGFsbGFuZ2UgeW91IHRvIHRyeSB0byByZW1vdmUgaXQhXG5cbiAgICByZXR1cm4gdmFsdWVzQXJyYXlbaW5kZXhdO1xuICB9O1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGJ1aWxkTWF0Y2hGbihhcmdzKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIHZhciB3aWR0aCA9IG9wdGlvbnMud2lkdGg7XG4gICAgdmFyIG1hdGNoUGF0dGVybiA9IHdpZHRoICYmIGFyZ3MubWF0Y2hQYXR0ZXJuc1t3aWR0aF0gfHwgYXJncy5tYXRjaFBhdHRlcm5zW2FyZ3MuZGVmYXVsdE1hdGNoV2lkdGhdO1xuICAgIHZhciBtYXRjaFJlc3VsdCA9IHN0cmluZy5tYXRjaChtYXRjaFBhdHRlcm4pO1xuXG4gICAgaWYgKCFtYXRjaFJlc3VsdCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIG1hdGNoZWRTdHJpbmcgPSBtYXRjaFJlc3VsdFswXTtcbiAgICB2YXIgcGFyc2VQYXR0ZXJucyA9IHdpZHRoICYmIGFyZ3MucGFyc2VQYXR0ZXJuc1t3aWR0aF0gfHwgYXJncy5wYXJzZVBhdHRlcm5zW2FyZ3MuZGVmYXVsdFBhcnNlV2lkdGhdO1xuICAgIHZhciBrZXkgPSBBcnJheS5pc0FycmF5KHBhcnNlUGF0dGVybnMpID8gZmluZEluZGV4KHBhcnNlUGF0dGVybnMsIGZ1bmN0aW9uIChwYXR0ZXJuKSB7XG4gICAgICByZXR1cm4gcGF0dGVybi50ZXN0KG1hdGNoZWRTdHJpbmcpO1xuICAgIH0pIDogZmluZEtleShwYXJzZVBhdHRlcm5zLCBmdW5jdGlvbiAocGF0dGVybikge1xuICAgICAgcmV0dXJuIHBhdHRlcm4udGVzdChtYXRjaGVkU3RyaW5nKTtcbiAgICB9KTtcbiAgICB2YXIgdmFsdWU7XG4gICAgdmFsdWUgPSBhcmdzLnZhbHVlQ2FsbGJhY2sgPyBhcmdzLnZhbHVlQ2FsbGJhY2soa2V5KSA6IGtleTtcbiAgICB2YWx1ZSA9IG9wdGlvbnMudmFsdWVDYWxsYmFjayA/IG9wdGlvbnMudmFsdWVDYWxsYmFjayh2YWx1ZSkgOiB2YWx1ZTtcbiAgICB2YXIgcmVzdCA9IHN0cmluZy5zbGljZShtYXRjaGVkU3RyaW5nLmxlbmd0aCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIHJlc3Q6IHJlc3RcbiAgICB9O1xuICB9O1xufVxuXG5mdW5jdGlvbiBmaW5kS2V5KG9iamVjdCwgcHJlZGljYXRlKSB7XG4gIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICBpZiAob2JqZWN0Lmhhc093blByb3BlcnR5KGtleSkgJiYgcHJlZGljYXRlKG9iamVjdFtrZXldKSkge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBmaW5kSW5kZXgoYXJyYXksIHByZWRpY2F0ZSkge1xuICBmb3IgKHZhciBrZXkgPSAwOyBrZXkgPCBhcnJheS5sZW5ndGg7IGtleSsrKSB7XG4gICAgaWYgKHByZWRpY2F0ZShhcnJheVtrZXldKSkge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufSIsImltcG9ydCBmb3JtYXREaXN0YW5jZSBmcm9tIFwiLi9fbGliL2Zvcm1hdERpc3RhbmNlL2luZGV4LmpzXCI7XG5pbXBvcnQgZm9ybWF0TG9uZyBmcm9tIFwiLi9fbGliL2Zvcm1hdExvbmcvaW5kZXguanNcIjtcbmltcG9ydCBmb3JtYXRSZWxhdGl2ZSBmcm9tIFwiLi9fbGliL2Zvcm1hdFJlbGF0aXZlL2luZGV4LmpzXCI7XG5pbXBvcnQgbG9jYWxpemUgZnJvbSBcIi4vX2xpYi9sb2NhbGl6ZS9pbmRleC5qc1wiO1xuaW1wb3J0IG1hdGNoIGZyb20gXCIuL19saWIvbWF0Y2gvaW5kZXguanNcIjtcblxuLyoqXG4gKiBAdHlwZSB7TG9jYWxlfVxuICogQGNhdGVnb3J5IExvY2FsZXNcbiAqIEBzdW1tYXJ5IEVuZ2xpc2ggbG9jYWxlIChVbml0ZWQgU3RhdGVzKS5cbiAqIEBsYW5ndWFnZSBFbmdsaXNoXG4gKiBAaXNvLTYzOS0yIGVuZ1xuICogQGF1dGhvciBTYXNoYSBLb3NzIFtAa29zc25vY29ycF17QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2tvc3Nub2NvcnB9XG4gKiBAYXV0aG9yIExlc2hhIEtvc3MgW0BsZXNoYWtvc3Nde0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9sZXNoYWtvc3N9XG4gKi9cbnZhciBsb2NhbGUgPSB7XG4gIGNvZGU6ICdlbi1VUycsXG4gIGZvcm1hdERpc3RhbmNlOiBmb3JtYXREaXN0YW5jZSxcbiAgZm9ybWF0TG9uZzogZm9ybWF0TG9uZyxcbiAgZm9ybWF0UmVsYXRpdmU6IGZvcm1hdFJlbGF0aXZlLFxuICBsb2NhbGl6ZTogbG9jYWxpemUsXG4gIG1hdGNoOiBtYXRjaCxcbiAgb3B0aW9uczoge1xuICAgIHdlZWtTdGFydHNPbjogMFxuICAgIC8qIFN1bmRheSAqL1xuICAgICxcbiAgICBmaXJzdFdlZWtDb250YWluc0RhdGU6IDFcbiAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IGxvY2FsZTsiLCJpbXBvcnQgYnVpbGRMb2NhbGl6ZUZuIGZyb20gXCIuLi8uLi8uLi9fbGliL2J1aWxkTG9jYWxpemVGbi9pbmRleC5qc1wiO1xudmFyIGVyYVZhbHVlcyA9IHtcbiAgbmFycm93OiBbJ0InLCAnQSddLFxuICBhYmJyZXZpYXRlZDogWydCQycsICdBRCddLFxuICB3aWRlOiBbJ0JlZm9yZSBDaHJpc3QnLCAnQW5ubyBEb21pbmknXVxufTtcbnZhciBxdWFydGVyVmFsdWVzID0ge1xuICBuYXJyb3c6IFsnMScsICcyJywgJzMnLCAnNCddLFxuICBhYmJyZXZpYXRlZDogWydRMScsICdRMicsICdRMycsICdRNCddLFxuICB3aWRlOiBbJzFzdCBxdWFydGVyJywgJzJuZCBxdWFydGVyJywgJzNyZCBxdWFydGVyJywgJzR0aCBxdWFydGVyJ11cbn07IC8vIE5vdGU6IGluIEVuZ2xpc2gsIHRoZSBuYW1lcyBvZiBkYXlzIG9mIHRoZSB3ZWVrIGFuZCBtb250aHMgYXJlIGNhcGl0YWxpemVkLlxuLy8gSWYgeW91IGFyZSBtYWtpbmcgYSBuZXcgbG9jYWxlIGJhc2VkIG9uIHRoaXMgb25lLCBjaGVjayBpZiB0aGUgc2FtZSBpcyB0cnVlIGZvciB0aGUgbGFuZ3VhZ2UgeW91J3JlIHdvcmtpbmcgb24uXG4vLyBHZW5lcmFsbHksIGZvcm1hdHRlZCBkYXRlcyBzaG91bGQgbG9vayBsaWtlIHRoZXkgYXJlIGluIHRoZSBtaWRkbGUgb2YgYSBzZW50ZW5jZSxcbi8vIGUuZy4gaW4gU3BhbmlzaCBsYW5ndWFnZSB0aGUgd2Vla2RheXMgYW5kIG1vbnRocyBzaG91bGQgYmUgaW4gdGhlIGxvd2VyY2FzZS5cblxudmFyIG1vbnRoVmFsdWVzID0ge1xuICBuYXJyb3c6IFsnSicsICdGJywgJ00nLCAnQScsICdNJywgJ0onLCAnSicsICdBJywgJ1MnLCAnTycsICdOJywgJ0QnXSxcbiAgYWJicmV2aWF0ZWQ6IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLCAnT2N0JywgJ05vdicsICdEZWMnXSxcbiAgd2lkZTogWydKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ11cbn07XG52YXIgZGF5VmFsdWVzID0ge1xuICBuYXJyb3c6IFsnUycsICdNJywgJ1QnLCAnVycsICdUJywgJ0YnLCAnUyddLFxuICBzaG9ydDogWydTdScsICdNbycsICdUdScsICdXZScsICdUaCcsICdGcicsICdTYSddLFxuICBhYmJyZXZpYXRlZDogWydTdW4nLCAnTW9uJywgJ1R1ZScsICdXZWQnLCAnVGh1JywgJ0ZyaScsICdTYXQnXSxcbiAgd2lkZTogWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddXG59O1xudmFyIGRheVBlcmlvZFZhbHVlcyA9IHtcbiAgbmFycm93OiB7XG4gICAgYW06ICdhJyxcbiAgICBwbTogJ3AnLFxuICAgIG1pZG5pZ2h0OiAnbWknLFxuICAgIG5vb246ICduJyxcbiAgICBtb3JuaW5nOiAnbW9ybmluZycsXG4gICAgYWZ0ZXJub29uOiAnYWZ0ZXJub29uJyxcbiAgICBldmVuaW5nOiAnZXZlbmluZycsXG4gICAgbmlnaHQ6ICduaWdodCdcbiAgfSxcbiAgYWJicmV2aWF0ZWQ6IHtcbiAgICBhbTogJ0FNJyxcbiAgICBwbTogJ1BNJyxcbiAgICBtaWRuaWdodDogJ21pZG5pZ2h0JyxcbiAgICBub29uOiAnbm9vbicsXG4gICAgbW9ybmluZzogJ21vcm5pbmcnLFxuICAgIGFmdGVybm9vbjogJ2FmdGVybm9vbicsXG4gICAgZXZlbmluZzogJ2V2ZW5pbmcnLFxuICAgIG5pZ2h0OiAnbmlnaHQnXG4gIH0sXG4gIHdpZGU6IHtcbiAgICBhbTogJ2EubS4nLFxuICAgIHBtOiAncC5tLicsXG4gICAgbWlkbmlnaHQ6ICdtaWRuaWdodCcsXG4gICAgbm9vbjogJ25vb24nLFxuICAgIG1vcm5pbmc6ICdtb3JuaW5nJyxcbiAgICBhZnRlcm5vb246ICdhZnRlcm5vb24nLFxuICAgIGV2ZW5pbmc6ICdldmVuaW5nJyxcbiAgICBuaWdodDogJ25pZ2h0J1xuICB9XG59O1xudmFyIGZvcm1hdHRpbmdEYXlQZXJpb2RWYWx1ZXMgPSB7XG4gIG5hcnJvdzoge1xuICAgIGFtOiAnYScsXG4gICAgcG06ICdwJyxcbiAgICBtaWRuaWdodDogJ21pJyxcbiAgICBub29uOiAnbicsXG4gICAgbW9ybmluZzogJ2luIHRoZSBtb3JuaW5nJyxcbiAgICBhZnRlcm5vb246ICdpbiB0aGUgYWZ0ZXJub29uJyxcbiAgICBldmVuaW5nOiAnaW4gdGhlIGV2ZW5pbmcnLFxuICAgIG5pZ2h0OiAnYXQgbmlnaHQnXG4gIH0sXG4gIGFiYnJldmlhdGVkOiB7XG4gICAgYW06ICdBTScsXG4gICAgcG06ICdQTScsXG4gICAgbWlkbmlnaHQ6ICdtaWRuaWdodCcsXG4gICAgbm9vbjogJ25vb24nLFxuICAgIG1vcm5pbmc6ICdpbiB0aGUgbW9ybmluZycsXG4gICAgYWZ0ZXJub29uOiAnaW4gdGhlIGFmdGVybm9vbicsXG4gICAgZXZlbmluZzogJ2luIHRoZSBldmVuaW5nJyxcbiAgICBuaWdodDogJ2F0IG5pZ2h0J1xuICB9LFxuICB3aWRlOiB7XG4gICAgYW06ICdhLm0uJyxcbiAgICBwbTogJ3AubS4nLFxuICAgIG1pZG5pZ2h0OiAnbWlkbmlnaHQnLFxuICAgIG5vb246ICdub29uJyxcbiAgICBtb3JuaW5nOiAnaW4gdGhlIG1vcm5pbmcnLFxuICAgIGFmdGVybm9vbjogJ2luIHRoZSBhZnRlcm5vb24nLFxuICAgIGV2ZW5pbmc6ICdpbiB0aGUgZXZlbmluZycsXG4gICAgbmlnaHQ6ICdhdCBuaWdodCdcbiAgfVxufTtcblxudmFyIG9yZGluYWxOdW1iZXIgPSBmdW5jdGlvbiAoZGlydHlOdW1iZXIsIF9vcHRpb25zKSB7XG4gIHZhciBudW1iZXIgPSBOdW1iZXIoZGlydHlOdW1iZXIpOyAvLyBJZiBvcmRpbmFsIG51bWJlcnMgZGVwZW5kIG9uIGNvbnRleHQsIGZvciBleGFtcGxlLFxuICAvLyBpZiB0aGV5IGFyZSBkaWZmZXJlbnQgZm9yIGRpZmZlcmVudCBncmFtbWF0aWNhbCBnZW5kZXJzLFxuICAvLyB1c2UgYG9wdGlvbnMudW5pdGAuXG4gIC8vXG4gIC8vIGB1bml0YCBjYW4gYmUgJ3llYXInLCAncXVhcnRlcicsICdtb250aCcsICd3ZWVrJywgJ2RhdGUnLCAnZGF5T2ZZZWFyJyxcbiAgLy8gJ2RheScsICdob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLlxuXG4gIHZhciByZW0xMDAgPSBudW1iZXIgJSAxMDA7XG5cbiAgaWYgKHJlbTEwMCA+IDIwIHx8IHJlbTEwMCA8IDEwKSB7XG4gICAgc3dpdGNoIChyZW0xMDAgJSAxMCkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJ3N0JztcblxuICAgICAgY2FzZSAyOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJ25kJztcblxuICAgICAgY2FzZSAzOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJ3JkJztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVtYmVyICsgJ3RoJztcbn07XG5cbnZhciBsb2NhbGl6ZSA9IHtcbiAgb3JkaW5hbE51bWJlcjogb3JkaW5hbE51bWJlcixcbiAgZXJhOiBidWlsZExvY2FsaXplRm4oe1xuICAgIHZhbHVlczogZXJhVmFsdWVzLFxuICAgIGRlZmF1bHRXaWR0aDogJ3dpZGUnXG4gIH0pLFxuICBxdWFydGVyOiBidWlsZExvY2FsaXplRm4oe1xuICAgIHZhbHVlczogcXVhcnRlclZhbHVlcyxcbiAgICBkZWZhdWx0V2lkdGg6ICd3aWRlJyxcbiAgICBhcmd1bWVudENhbGxiYWNrOiBmdW5jdGlvbiAocXVhcnRlcikge1xuICAgICAgcmV0dXJuIHF1YXJ0ZXIgLSAxO1xuICAgIH1cbiAgfSksXG4gIG1vbnRoOiBidWlsZExvY2FsaXplRm4oe1xuICAgIHZhbHVlczogbW9udGhWYWx1ZXMsXG4gICAgZGVmYXVsdFdpZHRoOiAnd2lkZSdcbiAgfSksXG4gIGRheTogYnVpbGRMb2NhbGl6ZUZuKHtcbiAgICB2YWx1ZXM6IGRheVZhbHVlcyxcbiAgICBkZWZhdWx0V2lkdGg6ICd3aWRlJ1xuICB9KSxcbiAgZGF5UGVyaW9kOiBidWlsZExvY2FsaXplRm4oe1xuICAgIHZhbHVlczogZGF5UGVyaW9kVmFsdWVzLFxuICAgIGRlZmF1bHRXaWR0aDogJ3dpZGUnLFxuICAgIGZvcm1hdHRpbmdWYWx1ZXM6IGZvcm1hdHRpbmdEYXlQZXJpb2RWYWx1ZXMsXG4gICAgZGVmYXVsdEZvcm1hdHRpbmdXaWR0aDogJ3dpZGUnXG4gIH0pXG59O1xuZXhwb3J0IGRlZmF1bHQgbG9jYWxpemU7IiwiaW1wb3J0IGJ1aWxkTWF0Y2hGbiBmcm9tIFwiLi4vLi4vLi4vX2xpYi9idWlsZE1hdGNoRm4vaW5kZXguanNcIjtcbmltcG9ydCBidWlsZE1hdGNoUGF0dGVybkZuIGZyb20gXCIuLi8uLi8uLi9fbGliL2J1aWxkTWF0Y2hQYXR0ZXJuRm4vaW5kZXguanNcIjtcbnZhciBtYXRjaE9yZGluYWxOdW1iZXJQYXR0ZXJuID0gL14oXFxkKykodGh8c3R8bmR8cmQpPy9pO1xudmFyIHBhcnNlT3JkaW5hbE51bWJlclBhdHRlcm4gPSAvXFxkKy9pO1xudmFyIG1hdGNoRXJhUGF0dGVybnMgPSB7XG4gIG5hcnJvdzogL14oYnxhKS9pLFxuICBhYmJyZXZpYXRlZDogL14oYlxcLj9cXHM/Y1xcLj98YlxcLj9cXHM/Y1xcLj9cXHM/ZVxcLj98YVxcLj9cXHM/ZFxcLj98Y1xcLj9cXHM/ZVxcLj8pL2ksXG4gIHdpZGU6IC9eKGJlZm9yZSBjaHJpc3R8YmVmb3JlIGNvbW1vbiBlcmF8YW5ubyBkb21pbml8Y29tbW9uIGVyYSkvaVxufTtcbnZhciBwYXJzZUVyYVBhdHRlcm5zID0ge1xuICBhbnk6IFsvXmIvaSwgL14oYXxjKS9pXVxufTtcbnZhciBtYXRjaFF1YXJ0ZXJQYXR0ZXJucyA9IHtcbiAgbmFycm93OiAvXlsxMjM0XS9pLFxuICBhYmJyZXZpYXRlZDogL15xWzEyMzRdL2ksXG4gIHdpZGU6IC9eWzEyMzRdKHRofHN0fG5kfHJkKT8gcXVhcnRlci9pXG59O1xudmFyIHBhcnNlUXVhcnRlclBhdHRlcm5zID0ge1xuICBhbnk6IFsvMS9pLCAvMi9pLCAvMy9pLCAvNC9pXVxufTtcbnZhciBtYXRjaE1vbnRoUGF0dGVybnMgPSB7XG4gIG5hcnJvdzogL15bamZtYXNvbmRdL2ksXG4gIGFiYnJldmlhdGVkOiAvXihqYW58ZmVifG1hcnxhcHJ8bWF5fGp1bnxqdWx8YXVnfHNlcHxvY3R8bm92fGRlYykvaSxcbiAgd2lkZTogL14oamFudWFyeXxmZWJydWFyeXxtYXJjaHxhcHJpbHxtYXl8anVuZXxqdWx5fGF1Z3VzdHxzZXB0ZW1iZXJ8b2N0b2Jlcnxub3ZlbWJlcnxkZWNlbWJlcikvaVxufTtcbnZhciBwYXJzZU1vbnRoUGF0dGVybnMgPSB7XG4gIG5hcnJvdzogWy9eai9pLCAvXmYvaSwgL15tL2ksIC9eYS9pLCAvXm0vaSwgL15qL2ksIC9eai9pLCAvXmEvaSwgL15zL2ksIC9eby9pLCAvXm4vaSwgL15kL2ldLFxuICBhbnk6IFsvXmphL2ksIC9eZi9pLCAvXm1hci9pLCAvXmFwL2ksIC9ebWF5L2ksIC9eanVuL2ksIC9eanVsL2ksIC9eYXUvaSwgL15zL2ksIC9eby9pLCAvXm4vaSwgL15kL2ldXG59O1xudmFyIG1hdGNoRGF5UGF0dGVybnMgPSB7XG4gIG5hcnJvdzogL15bc210d2ZdL2ksXG4gIHNob3J0OiAvXihzdXxtb3x0dXx3ZXx0aHxmcnxzYSkvaSxcbiAgYWJicmV2aWF0ZWQ6IC9eKHN1bnxtb258dHVlfHdlZHx0aHV8ZnJpfHNhdCkvaSxcbiAgd2lkZTogL14oc3VuZGF5fG1vbmRheXx0dWVzZGF5fHdlZG5lc2RheXx0aHVyc2RheXxmcmlkYXl8c2F0dXJkYXkpL2lcbn07XG52YXIgcGFyc2VEYXlQYXR0ZXJucyA9IHtcbiAgbmFycm93OiBbL15zL2ksIC9ebS9pLCAvXnQvaSwgL153L2ksIC9edC9pLCAvXmYvaSwgL15zL2ldLFxuICBhbnk6IFsvXnN1L2ksIC9ebS9pLCAvXnR1L2ksIC9edy9pLCAvXnRoL2ksIC9eZi9pLCAvXnNhL2ldXG59O1xudmFyIG1hdGNoRGF5UGVyaW9kUGF0dGVybnMgPSB7XG4gIG5hcnJvdzogL14oYXxwfG1pfG58KGluIHRoZXxhdCkgKG1vcm5pbmd8YWZ0ZXJub29ufGV2ZW5pbmd8bmlnaHQpKS9pLFxuICBhbnk6IC9eKFthcF1cXC4/XFxzP21cXC4/fG1pZG5pZ2h0fG5vb258KGluIHRoZXxhdCkgKG1vcm5pbmd8YWZ0ZXJub29ufGV2ZW5pbmd8bmlnaHQpKS9pXG59O1xudmFyIHBhcnNlRGF5UGVyaW9kUGF0dGVybnMgPSB7XG4gIGFueToge1xuICAgIGFtOiAvXmEvaSxcbiAgICBwbTogL15wL2ksXG4gICAgbWlkbmlnaHQ6IC9ebWkvaSxcbiAgICBub29uOiAvXm5vL2ksXG4gICAgbW9ybmluZzogL21vcm5pbmcvaSxcbiAgICBhZnRlcm5vb246IC9hZnRlcm5vb24vaSxcbiAgICBldmVuaW5nOiAvZXZlbmluZy9pLFxuICAgIG5pZ2h0OiAvbmlnaHQvaVxuICB9XG59O1xudmFyIG1hdGNoID0ge1xuICBvcmRpbmFsTnVtYmVyOiBidWlsZE1hdGNoUGF0dGVybkZuKHtcbiAgICBtYXRjaFBhdHRlcm46IG1hdGNoT3JkaW5hbE51bWJlclBhdHRlcm4sXG4gICAgcGFyc2VQYXR0ZXJuOiBwYXJzZU9yZGluYWxOdW1iZXJQYXR0ZXJuLFxuICAgIHZhbHVlQ2FsbGJhY2s6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgfVxuICB9KSxcbiAgZXJhOiBidWlsZE1hdGNoRm4oe1xuICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoRXJhUGF0dGVybnMsXG4gICAgZGVmYXVsdE1hdGNoV2lkdGg6ICd3aWRlJyxcbiAgICBwYXJzZVBhdHRlcm5zOiBwYXJzZUVyYVBhdHRlcm5zLFxuICAgIGRlZmF1bHRQYXJzZVdpZHRoOiAnYW55J1xuICB9KSxcbiAgcXVhcnRlcjogYnVpbGRNYXRjaEZuKHtcbiAgICBtYXRjaFBhdHRlcm5zOiBtYXRjaFF1YXJ0ZXJQYXR0ZXJucyxcbiAgICBkZWZhdWx0TWF0Y2hXaWR0aDogJ3dpZGUnLFxuICAgIHBhcnNlUGF0dGVybnM6IHBhcnNlUXVhcnRlclBhdHRlcm5zLFxuICAgIGRlZmF1bHRQYXJzZVdpZHRoOiAnYW55JyxcbiAgICB2YWx1ZUNhbGxiYWNrOiBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgIHJldHVybiBpbmRleCArIDE7XG4gICAgfVxuICB9KSxcbiAgbW9udGg6IGJ1aWxkTWF0Y2hGbih7XG4gICAgbWF0Y2hQYXR0ZXJuczogbWF0Y2hNb250aFBhdHRlcm5zLFxuICAgIGRlZmF1bHRNYXRjaFdpZHRoOiAnd2lkZScsXG4gICAgcGFyc2VQYXR0ZXJuczogcGFyc2VNb250aFBhdHRlcm5zLFxuICAgIGRlZmF1bHRQYXJzZVdpZHRoOiAnYW55J1xuICB9KSxcbiAgZGF5OiBidWlsZE1hdGNoRm4oe1xuICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoRGF5UGF0dGVybnMsXG4gICAgZGVmYXVsdE1hdGNoV2lkdGg6ICd3aWRlJyxcbiAgICBwYXJzZVBhdHRlcm5zOiBwYXJzZURheVBhdHRlcm5zLFxuICAgIGRlZmF1bHRQYXJzZVdpZHRoOiAnYW55J1xuICB9KSxcbiAgZGF5UGVyaW9kOiBidWlsZE1hdGNoRm4oe1xuICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoRGF5UGVyaW9kUGF0dGVybnMsXG4gICAgZGVmYXVsdE1hdGNoV2lkdGg6ICdhbnknLFxuICAgIHBhcnNlUGF0dGVybnM6IHBhcnNlRGF5UGVyaW9kUGF0dGVybnMsXG4gICAgZGVmYXVsdFBhcnNlV2lkdGg6ICdhbnknXG4gIH0pXG59O1xuZXhwb3J0IGRlZmF1bHQgbWF0Y2g7IiwiaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vX2xpYi90b0ludGVnZXIvaW5kZXguanNcIjtcbmltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgYWRkTWlsbGlzZWNvbmRzXG4gKiBAY2F0ZWdvcnkgTWlsbGlzZWNvbmQgSGVscGVyc1xuICogQHN1bW1hcnkgQWRkIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFkZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gYmUgY2hhbmdlZFxuICogQHBhcmFtIHtOdW1iZXJ9IGFtb3VudCAtIHRoZSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIGJlIGFkZGVkLiBQb3NpdGl2ZSBkZWNpbWFscyB3aWxsIGJlIHJvdW5kZWQgdXNpbmcgYE1hdGguZmxvb3JgLCBkZWNpbWFscyBsZXNzIHRoYW4gemVybyB3aWxsIGJlIHJvdW5kZWQgdXNpbmcgYE1hdGguY2VpbGAuXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIG5ldyBkYXRlIHdpdGggdGhlIG1pbGxpc2Vjb25kcyBhZGRlZFxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBZGQgNzUwIG1pbGxpc2Vjb25kcyB0byAxMCBKdWx5IDIwMTQgMTI6NDU6MzAuMDAwOlxuICogY29uc3QgcmVzdWx0ID0gYWRkTWlsbGlzZWNvbmRzKG5ldyBEYXRlKDIwMTQsIDYsIDEwLCAxMiwgNDUsIDMwLCAwKSwgNzUwKVxuICogLy89PiBUaHUgSnVsIDEwIDIwMTQgMTI6NDU6MzAuNzUwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWRkTWlsbGlzZWNvbmRzKGRpcnR5RGF0ZSwgZGlydHlBbW91bnQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciB0aW1lc3RhbXAgPSB0b0RhdGUoZGlydHlEYXRlKS5nZXRUaW1lKCk7XG4gIHZhciBhbW91bnQgPSB0b0ludGVnZXIoZGlydHlBbW91bnQpO1xuICByZXR1cm4gbmV3IERhdGUodGltZXN0YW1wICsgYW1vdW50KTtcbn0iLCJpbXBvcnQgdG9JbnRlZ2VyIGZyb20gXCIuLi9fbGliL3RvSW50ZWdlci9pbmRleC5qc1wiO1xuaW1wb3J0IGFkZE1pbGxpc2Vjb25kcyBmcm9tIFwiLi4vYWRkTWlsbGlzZWNvbmRzL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdWJNaWxsaXNlY29uZHNcbiAqIEBjYXRlZ29yeSBNaWxsaXNlY29uZCBIZWxwZXJzXG4gKiBAc3VtbWFyeSBTdWJ0cmFjdCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBtaWxsaXNlY29uZHMgZnJvbSB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFN1YnRyYWN0IHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBmcm9tIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBkYXRlIHRvIGJlIGNoYW5nZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBhbW91bnQgLSB0aGUgYW1vdW50IG9mIG1pbGxpc2Vjb25kcyB0byBiZSBzdWJ0cmFjdGVkLiBQb3NpdGl2ZSBkZWNpbWFscyB3aWxsIGJlIHJvdW5kZWQgdXNpbmcgYE1hdGguZmxvb3JgLCBkZWNpbWFscyBsZXNzIHRoYW4gemVybyB3aWxsIGJlIHJvdW5kZWQgdXNpbmcgYE1hdGguY2VpbGAuXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIG5ldyBkYXRlIHdpdGggdGhlIG1pbGxpc2Vjb25kcyBzdWJ0cmFjdGVkXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFN1YnRyYWN0IDc1MCBtaWxsaXNlY29uZHMgZnJvbSAxMCBKdWx5IDIwMTQgMTI6NDU6MzAuMDAwOlxuICogY29uc3QgcmVzdWx0ID0gc3ViTWlsbGlzZWNvbmRzKG5ldyBEYXRlKDIwMTQsIDYsIDEwLCAxMiwgNDUsIDMwLCAwKSwgNzUwKVxuICogLy89PiBUaHUgSnVsIDEwIDIwMTQgMTI6NDU6MjkuMjUwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3ViTWlsbGlzZWNvbmRzKGRpcnR5RGF0ZSwgZGlydHlBbW91bnQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBhbW91bnQgPSB0b0ludGVnZXIoZGlydHlBbW91bnQpO1xuICByZXR1cm4gYWRkTWlsbGlzZWNvbmRzKGRpcnR5RGF0ZSwgLWFtb3VudCk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWRkTGVhZGluZ1plcm9zKG51bWJlciwgdGFyZ2V0TGVuZ3RoKSB7XG4gIHZhciBzaWduID0gbnVtYmVyIDwgMCA/ICctJyA6ICcnO1xuICB2YXIgb3V0cHV0ID0gTWF0aC5hYnMobnVtYmVyKS50b1N0cmluZygpO1xuXG4gIHdoaWxlIChvdXRwdXQubGVuZ3RoIDwgdGFyZ2V0TGVuZ3RoKSB7XG4gICAgb3V0cHV0ID0gJzAnICsgb3V0cHV0O1xuICB9XG5cbiAgcmV0dXJuIHNpZ24gKyBvdXRwdXQ7XG59IiwiaW1wb3J0IGFkZExlYWRpbmdaZXJvcyBmcm9tIFwiLi4vLi4vYWRkTGVhZGluZ1plcm9zL2luZGV4LmpzXCI7XG4vKlxuICogfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCAgYSAgfCBBTSwgUE0gICAgICAgICAgICAgICAgICAgICAgICAgfCAgQSogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgZCAgfCBEYXkgb2YgbW9udGggICAgICAgICAgICAgICAgICAgfCAgRCAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgaCAgfCBIb3VyIFsxLTEyXSAgICAgICAgICAgICAgICAgICAgfCAgSCAgfCBIb3VyIFswLTIzXSAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgbSAgfCBNaW51dGUgICAgICAgICAgICAgICAgICAgICAgICAgfCAgTSAgfCBNb250aCAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgcyAgfCBTZWNvbmQgICAgICAgICAgICAgICAgICAgICAgICAgfCAgUyAgfCBGcmFjdGlvbiBvZiBzZWNvbmQgICAgICAgICAgICAgfFxuICogfCAgeSAgfCBZZWFyIChhYnMpICAgICAgICAgICAgICAgICAgICAgfCAgWSAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICpcbiAqIExldHRlcnMgbWFya2VkIGJ5ICogYXJlIG5vdCBpbXBsZW1lbnRlZCBidXQgcmVzZXJ2ZWQgYnkgVW5pY29kZSBzdGFuZGFyZC5cbiAqL1xuXG52YXIgZm9ybWF0dGVycyA9IHtcbiAgLy8gWWVhclxuICB5OiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4pIHtcbiAgICAvLyBGcm9tIGh0dHA6Ly93d3cudW5pY29kZS5vcmcvcmVwb3J0cy90cjM1L3RyMzUtMzEvdHIzNS1kYXRlcy5odG1sI0RhdGVfRm9ybWF0X3Rva2Vuc1xuICAgIC8vIHwgWWVhciAgICAgfCAgICAgeSB8IHl5IHwgICB5eXkgfCAgeXl5eSB8IHl5eXl5IHxcbiAgICAvLyB8LS0tLS0tLS0tLXwtLS0tLS0tfC0tLS18LS0tLS0tLXwtLS0tLS0tfC0tLS0tLS18XG4gICAgLy8gfCBBRCAxICAgICB8ICAgICAxIHwgMDEgfCAgIDAwMSB8ICAwMDAxIHwgMDAwMDEgfFxuICAgIC8vIHwgQUQgMTIgICAgfCAgICAxMiB8IDEyIHwgICAwMTIgfCAgMDAxMiB8IDAwMDEyIHxcbiAgICAvLyB8IEFEIDEyMyAgIHwgICAxMjMgfCAyMyB8ICAgMTIzIHwgIDAxMjMgfCAwMDEyMyB8XG4gICAgLy8gfCBBRCAxMjM0ICB8ICAxMjM0IHwgMzQgfCAgMTIzNCB8ICAxMjM0IHwgMDEyMzQgfFxuICAgIC8vIHwgQUQgMTIzNDUgfCAxMjM0NSB8IDQ1IHwgMTIzNDUgfCAxMjM0NSB8IDEyMzQ1IHxcbiAgICB2YXIgc2lnbmVkWWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTsgLy8gUmV0dXJucyAxIGZvciAxIEJDICh3aGljaCBpcyB5ZWFyIDAgaW4gSmF2YVNjcmlwdClcblxuICAgIHZhciB5ZWFyID0gc2lnbmVkWWVhciA+IDAgPyBzaWduZWRZZWFyIDogMSAtIHNpZ25lZFllYXI7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh0b2tlbiA9PT0gJ3l5JyA/IHllYXIgJSAxMDAgOiB5ZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuICAvLyBNb250aFxuICBNOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4pIHtcbiAgICB2YXIgbW9udGggPSBkYXRlLmdldFVUQ01vbnRoKCk7XG4gICAgcmV0dXJuIHRva2VuID09PSAnTScgPyBTdHJpbmcobW9udGggKyAxKSA6IGFkZExlYWRpbmdaZXJvcyhtb250aCArIDEsIDIpO1xuICB9LFxuICAvLyBEYXkgb2YgdGhlIG1vbnRoXG4gIGQ6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF0ZS5nZXRVVENEYXRlKCksIHRva2VuLmxlbmd0aCk7XG4gIH0sXG4gIC8vIEFNIG9yIFBNXG4gIGE6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbikge1xuICAgIHZhciBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXRlLmdldFVUQ0hvdXJzKCkgLyAxMiA+PSAxID8gJ3BtJyA6ICdhbSc7XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICBjYXNlICdhJzpcbiAgICAgIGNhc2UgJ2FhJzpcbiAgICAgICAgcmV0dXJuIGRheVBlcmlvZEVudW1WYWx1ZS50b1VwcGVyQ2FzZSgpO1xuXG4gICAgICBjYXNlICdhYWEnOlxuICAgICAgICByZXR1cm4gZGF5UGVyaW9kRW51bVZhbHVlO1xuXG4gICAgICBjYXNlICdhYWFhYSc6XG4gICAgICAgIHJldHVybiBkYXlQZXJpb2RFbnVtVmFsdWVbMF07XG5cbiAgICAgIGNhc2UgJ2FhYWEnOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGRheVBlcmlvZEVudW1WYWx1ZSA9PT0gJ2FtJyA/ICdhLm0uJyA6ICdwLm0uJztcbiAgICB9XG4gIH0sXG4gIC8vIEhvdXIgWzEtMTJdXG4gIGg6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF0ZS5nZXRVVENIb3VycygpICUgMTIgfHwgMTIsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG4gIC8vIEhvdXIgWzAtMjNdXG4gIEg6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF0ZS5nZXRVVENIb3VycygpLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuICAvLyBNaW51dGVcbiAgbTogZnVuY3Rpb24gKGRhdGUsIHRva2VuKSB7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXRlLmdldFVUQ01pbnV0ZXMoKSwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcbiAgLy8gU2Vjb25kXG4gIHM6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF0ZS5nZXRVVENTZWNvbmRzKCksIHRva2VuLmxlbmd0aCk7XG4gIH0sXG4gIC8vIEZyYWN0aW9uIG9mIHNlY29uZFxuICBTOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4pIHtcbiAgICB2YXIgbnVtYmVyT2ZEaWdpdHMgPSB0b2tlbi5sZW5ndGg7XG4gICAgdmFyIG1pbGxpc2Vjb25kcyA9IGRhdGUuZ2V0VVRDTWlsbGlzZWNvbmRzKCk7XG4gICAgdmFyIGZyYWN0aW9uYWxTZWNvbmRzID0gTWF0aC5mbG9vcihtaWxsaXNlY29uZHMgKiBNYXRoLnBvdygxMCwgbnVtYmVyT2ZEaWdpdHMgLSAzKSk7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhmcmFjdGlvbmFsU2Vjb25kcywgdG9rZW4ubGVuZ3RoKTtcbiAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IGZvcm1hdHRlcnM7IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbnZhciBNSUxMSVNFQ09ORFNfSU5fREFZID0gODY0MDAwMDA7IC8vIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBhIHBhcnQgb2YgcHVibGljIEFQSSB3aGVuIFVUQyBmdW5jdGlvbiB3aWxsIGJlIGltcGxlbWVudGVkLlxuLy8gU2VlIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvaXNzdWVzLzM3NlxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRVVENEYXlPZlllYXIoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICB2YXIgdGltZXN0YW1wID0gZGF0ZS5nZXRUaW1lKCk7XG4gIGRhdGUuc2V0VVRDTW9udGgoMCwgMSk7XG4gIGRhdGUuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7XG4gIHZhciBzdGFydE9mWWVhclRpbWVzdGFtcCA9IGRhdGUuZ2V0VGltZSgpO1xuICB2YXIgZGlmZmVyZW5jZSA9IHRpbWVzdGFtcCAtIHN0YXJ0T2ZZZWFyVGltZXN0YW1wO1xuICByZXR1cm4gTWF0aC5mbG9vcihkaWZmZXJlbmNlIC8gTUlMTElTRUNPTkRTX0lOX0RBWSkgKyAxO1xufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uLy4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7IC8vIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBhIHBhcnQgb2YgcHVibGljIEFQSSB3aGVuIFVUQyBmdW5jdGlvbiB3aWxsIGJlIGltcGxlbWVudGVkLlxuLy8gU2VlIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvaXNzdWVzLzM3NlxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGFydE9mVVRDSVNPV2VlayhkaXJ0eURhdGUpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciB3ZWVrU3RhcnRzT24gPSAxO1xuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICB2YXIgZGF5ID0gZGF0ZS5nZXRVVENEYXkoKTtcbiAgdmFyIGRpZmYgPSAoZGF5IDwgd2Vla1N0YXJ0c09uID8gNyA6IDApICsgZGF5IC0gd2Vla1N0YXJ0c09uO1xuICBkYXRlLnNldFVUQ0RhdGUoZGF0ZS5nZXRVVENEYXRlKCkgLSBkaWZmKTtcbiAgZGF0ZS5zZXRVVENIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgc3RhcnRPZlVUQ0lTT1dlZWsgZnJvbSBcIi4uL3N0YXJ0T2ZVVENJU09XZWVrL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjsgLy8gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGEgcGFydCBvZiBwdWJsaWMgQVBJIHdoZW4gVVRDIGZ1bmN0aW9uIHdpbGwgYmUgaW1wbGVtZW50ZWQuXG4vLyBTZWUgaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9pc3N1ZXMvMzc2XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFVUQ0lTT1dlZWtZZWFyKGRpcnR5RGF0ZSkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgdmFyIHllYXIgPSBkYXRlLmdldFVUQ0Z1bGxZZWFyKCk7XG4gIHZhciBmb3VydGhPZkphbnVhcnlPZk5leHRZZWFyID0gbmV3IERhdGUoMCk7XG4gIGZvdXJ0aE9mSmFudWFyeU9mTmV4dFllYXIuc2V0VVRDRnVsbFllYXIoeWVhciArIDEsIDAsIDQpO1xuICBmb3VydGhPZkphbnVhcnlPZk5leHRZZWFyLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApO1xuICB2YXIgc3RhcnRPZk5leHRZZWFyID0gc3RhcnRPZlVUQ0lTT1dlZWsoZm91cnRoT2ZKYW51YXJ5T2ZOZXh0WWVhcik7XG4gIHZhciBmb3VydGhPZkphbnVhcnlPZlRoaXNZZWFyID0gbmV3IERhdGUoMCk7XG4gIGZvdXJ0aE9mSmFudWFyeU9mVGhpc1llYXIuc2V0VVRDRnVsbFllYXIoeWVhciwgMCwgNCk7XG4gIGZvdXJ0aE9mSmFudWFyeU9mVGhpc1llYXIuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7XG4gIHZhciBzdGFydE9mVGhpc1llYXIgPSBzdGFydE9mVVRDSVNPV2Vlayhmb3VydGhPZkphbnVhcnlPZlRoaXNZZWFyKTtcblxuICBpZiAoZGF0ZS5nZXRUaW1lKCkgPj0gc3RhcnRPZk5leHRZZWFyLmdldFRpbWUoKSkge1xuICAgIHJldHVybiB5ZWFyICsgMTtcbiAgfSBlbHNlIGlmIChkYXRlLmdldFRpbWUoKSA+PSBzdGFydE9mVGhpc1llYXIuZ2V0VGltZSgpKSB7XG4gICAgcmV0dXJuIHllYXI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHllYXIgLSAxO1xuICB9XG59IiwiaW1wb3J0IGdldFVUQ0lTT1dlZWtZZWFyIGZyb20gXCIuLi9nZXRVVENJU09XZWVrWWVhci9pbmRleC5qc1wiO1xuaW1wb3J0IHN0YXJ0T2ZVVENJU09XZWVrIGZyb20gXCIuLi9zdGFydE9mVVRDSVNPV2Vlay9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7IC8vIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBhIHBhcnQgb2YgcHVibGljIEFQSSB3aGVuIFVUQyBmdW5jdGlvbiB3aWxsIGJlIGltcGxlbWVudGVkLlxuLy8gU2VlIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvaXNzdWVzLzM3NlxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGFydE9mVVRDSVNPV2Vla1llYXIoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgeWVhciA9IGdldFVUQ0lTT1dlZWtZZWFyKGRpcnR5RGF0ZSk7XG4gIHZhciBmb3VydGhPZkphbnVhcnkgPSBuZXcgRGF0ZSgwKTtcbiAgZm91cnRoT2ZKYW51YXJ5LnNldFVUQ0Z1bGxZZWFyKHllYXIsIDAsIDQpO1xuICBmb3VydGhPZkphbnVhcnkuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7XG4gIHZhciBkYXRlID0gc3RhcnRPZlVUQ0lTT1dlZWsoZm91cnRoT2ZKYW51YXJ5KTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgc3RhcnRPZlVUQ0lTT1dlZWsgZnJvbSBcIi4uL3N0YXJ0T2ZVVENJU09XZWVrL2luZGV4LmpzXCI7XG5pbXBvcnQgc3RhcnRPZlVUQ0lTT1dlZWtZZWFyIGZyb20gXCIuLi9zdGFydE9mVVRDSVNPV2Vla1llYXIvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xudmFyIE1JTExJU0VDT05EU19JTl9XRUVLID0gNjA0ODAwMDAwOyAvLyBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgYSBwYXJ0IG9mIHB1YmxpYyBBUEkgd2hlbiBVVEMgZnVuY3Rpb24gd2lsbCBiZSBpbXBsZW1lbnRlZC5cbi8vIFNlZSBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2lzc3Vlcy8zNzZcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0VVRDSVNPV2VlayhkaXJ0eURhdGUpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIHZhciBkaWZmID0gc3RhcnRPZlVUQ0lTT1dlZWsoZGF0ZSkuZ2V0VGltZSgpIC0gc3RhcnRPZlVUQ0lTT1dlZWtZZWFyKGRhdGUpLmdldFRpbWUoKTsgLy8gUm91bmQgdGhlIG51bWJlciBvZiBkYXlzIHRvIHRoZSBuZWFyZXN0IGludGVnZXJcbiAgLy8gYmVjYXVzZSB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpbiBhIHdlZWsgaXMgbm90IGNvbnN0YW50XG4gIC8vIChlLmcuIGl0J3MgZGlmZmVyZW50IGluIHRoZSB3ZWVrIG9mIHRoZSBkYXlsaWdodCBzYXZpbmcgdGltZSBjbG9jayBzaGlmdClcblxuICByZXR1cm4gTWF0aC5yb3VuZChkaWZmIC8gTUlMTElTRUNPTkRTX0lOX1dFRUspICsgMTtcbn0iLCJpbXBvcnQgdG9JbnRlZ2VyIGZyb20gXCIuLi90b0ludGVnZXIvaW5kZXguanNcIjtcbmltcG9ydCB0b0RhdGUgZnJvbSBcIi4uLy4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7IC8vIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBhIHBhcnQgb2YgcHVibGljIEFQSSB3aGVuIFVUQyBmdW5jdGlvbiB3aWxsIGJlIGltcGxlbWVudGVkLlxuLy8gU2VlIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvaXNzdWVzLzM3NlxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGFydE9mVVRDV2VlayhkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIG9wdGlvbnMgPSBkaXJ0eU9wdGlvbnMgfHwge307XG4gIHZhciBsb2NhbGUgPSBvcHRpb25zLmxvY2FsZTtcbiAgdmFyIGxvY2FsZVdlZWtTdGFydHNPbiA9IGxvY2FsZSAmJiBsb2NhbGUub3B0aW9ucyAmJiBsb2NhbGUub3B0aW9ucy53ZWVrU3RhcnRzT247XG4gIHZhciBkZWZhdWx0V2Vla1N0YXJ0c09uID0gbG9jYWxlV2Vla1N0YXJ0c09uID09IG51bGwgPyAwIDogdG9JbnRlZ2VyKGxvY2FsZVdlZWtTdGFydHNPbik7XG4gIHZhciB3ZWVrU3RhcnRzT24gPSBvcHRpb25zLndlZWtTdGFydHNPbiA9PSBudWxsID8gZGVmYXVsdFdlZWtTdGFydHNPbiA6IHRvSW50ZWdlcihvcHRpb25zLndlZWtTdGFydHNPbik7IC8vIFRlc3QgaWYgd2Vla1N0YXJ0c09uIGlzIGJldHdlZW4gMCBhbmQgNiBfYW5kXyBpcyBub3QgTmFOXG5cbiAgaWYgKCEod2Vla1N0YXJ0c09uID49IDAgJiYgd2Vla1N0YXJ0c09uIDw9IDYpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3dlZWtTdGFydHNPbiBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNiBpbmNsdXNpdmVseScpO1xuICB9XG5cbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgdmFyIGRheSA9IGRhdGUuZ2V0VVRDRGF5KCk7XG4gIHZhciBkaWZmID0gKGRheSA8IHdlZWtTdGFydHNPbiA/IDcgOiAwKSArIGRheSAtIHdlZWtTdGFydHNPbjtcbiAgZGF0ZS5zZXRVVENEYXRlKGRhdGUuZ2V0VVRDRGF0ZSgpIC0gZGlmZik7XG4gIGRhdGUuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7XG4gIHJldHVybiBkYXRlO1xufSIsImltcG9ydCB0b0ludGVnZXIgZnJvbSBcIi4uL3RvSW50ZWdlci9pbmRleC5qc1wiO1xuaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgc3RhcnRPZlVUQ1dlZWsgZnJvbSBcIi4uL3N0YXJ0T2ZVVENXZWVrL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjsgLy8gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGEgcGFydCBvZiBwdWJsaWMgQVBJIHdoZW4gVVRDIGZ1bmN0aW9uIHdpbGwgYmUgaW1wbGVtZW50ZWQuXG4vLyBTZWUgaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9pc3N1ZXMvMzc2XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFVUQ1dlZWtZZWFyKGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucyk7XG4gIHZhciB5ZWFyID0gZGF0ZS5nZXRVVENGdWxsWWVhcigpO1xuICB2YXIgb3B0aW9ucyA9IGRpcnR5T3B0aW9ucyB8fCB7fTtcbiAgdmFyIGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlO1xuICB2YXIgbG9jYWxlRmlyc3RXZWVrQ29udGFpbnNEYXRlID0gbG9jYWxlICYmIGxvY2FsZS5vcHRpb25zICYmIGxvY2FsZS5vcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZTtcbiAgdmFyIGRlZmF1bHRGaXJzdFdlZWtDb250YWluc0RhdGUgPSBsb2NhbGVGaXJzdFdlZWtDb250YWluc0RhdGUgPT0gbnVsbCA/IDEgOiB0b0ludGVnZXIobG9jYWxlRmlyc3RXZWVrQ29udGFpbnNEYXRlKTtcbiAgdmFyIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9IG9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlID09IG51bGwgPyBkZWZhdWx0Rmlyc3RXZWVrQ29udGFpbnNEYXRlIDogdG9JbnRlZ2VyKG9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlKTsgLy8gVGVzdCBpZiB3ZWVrU3RhcnRzT24gaXMgYmV0d2VlbiAxIGFuZCA3IF9hbmRfIGlzIG5vdCBOYU5cblxuICBpZiAoIShmaXJzdFdlZWtDb250YWluc0RhdGUgPj0gMSAmJiBmaXJzdFdlZWtDb250YWluc0RhdGUgPD0gNykpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZmlyc3RXZWVrQ29udGFpbnNEYXRlIG11c3QgYmUgYmV0d2VlbiAxIGFuZCA3IGluY2x1c2l2ZWx5Jyk7XG4gIH1cblxuICB2YXIgZmlyc3RXZWVrT2ZOZXh0WWVhciA9IG5ldyBEYXRlKDApO1xuICBmaXJzdFdlZWtPZk5leHRZZWFyLnNldFVUQ0Z1bGxZZWFyKHllYXIgKyAxLCAwLCBmaXJzdFdlZWtDb250YWluc0RhdGUpO1xuICBmaXJzdFdlZWtPZk5leHRZZWFyLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApO1xuICB2YXIgc3RhcnRPZk5leHRZZWFyID0gc3RhcnRPZlVUQ1dlZWsoZmlyc3RXZWVrT2ZOZXh0WWVhciwgZGlydHlPcHRpb25zKTtcbiAgdmFyIGZpcnN0V2Vla09mVGhpc1llYXIgPSBuZXcgRGF0ZSgwKTtcbiAgZmlyc3RXZWVrT2ZUaGlzWWVhci5zZXRVVENGdWxsWWVhcih5ZWFyLCAwLCBmaXJzdFdlZWtDb250YWluc0RhdGUpO1xuICBmaXJzdFdlZWtPZlRoaXNZZWFyLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApO1xuICB2YXIgc3RhcnRPZlRoaXNZZWFyID0gc3RhcnRPZlVUQ1dlZWsoZmlyc3RXZWVrT2ZUaGlzWWVhciwgZGlydHlPcHRpb25zKTtcblxuICBpZiAoZGF0ZS5nZXRUaW1lKCkgPj0gc3RhcnRPZk5leHRZZWFyLmdldFRpbWUoKSkge1xuICAgIHJldHVybiB5ZWFyICsgMTtcbiAgfSBlbHNlIGlmIChkYXRlLmdldFRpbWUoKSA+PSBzdGFydE9mVGhpc1llYXIuZ2V0VGltZSgpKSB7XG4gICAgcmV0dXJuIHllYXI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHllYXIgLSAxO1xuICB9XG59IiwiaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vdG9JbnRlZ2VyL2luZGV4LmpzXCI7XG5pbXBvcnQgZ2V0VVRDV2Vla1llYXIgZnJvbSBcIi4uL2dldFVUQ1dlZWtZZWFyL2luZGV4LmpzXCI7XG5pbXBvcnQgc3RhcnRPZlVUQ1dlZWsgZnJvbSBcIi4uL3N0YXJ0T2ZVVENXZWVrL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjsgLy8gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGEgcGFydCBvZiBwdWJsaWMgQVBJIHdoZW4gVVRDIGZ1bmN0aW9uIHdpbGwgYmUgaW1wbGVtZW50ZWQuXG4vLyBTZWUgaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9pc3N1ZXMvMzc2XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0YXJ0T2ZVVENXZWVrWWVhcihkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIG9wdGlvbnMgPSBkaXJ0eU9wdGlvbnMgfHwge307XG4gIHZhciBsb2NhbGUgPSBvcHRpb25zLmxvY2FsZTtcbiAgdmFyIGxvY2FsZUZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9IGxvY2FsZSAmJiBsb2NhbGUub3B0aW9ucyAmJiBsb2NhbGUub3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGU7XG4gIHZhciBkZWZhdWx0Rmlyc3RXZWVrQ29udGFpbnNEYXRlID0gbG9jYWxlRmlyc3RXZWVrQ29udGFpbnNEYXRlID09IG51bGwgPyAxIDogdG9JbnRlZ2VyKGxvY2FsZUZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7XG4gIHZhciBmaXJzdFdlZWtDb250YWluc0RhdGUgPSBvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9PSBudWxsID8gZGVmYXVsdEZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA6IHRvSW50ZWdlcihvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7XG4gIHZhciB5ZWFyID0gZ2V0VVRDV2Vla1llYXIoZGlydHlEYXRlLCBkaXJ0eU9wdGlvbnMpO1xuICB2YXIgZmlyc3RXZWVrID0gbmV3IERhdGUoMCk7XG4gIGZpcnN0V2Vlay5zZXRVVENGdWxsWWVhcih5ZWFyLCAwLCBmaXJzdFdlZWtDb250YWluc0RhdGUpO1xuICBmaXJzdFdlZWsuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7XG4gIHZhciBkYXRlID0gc3RhcnRPZlVUQ1dlZWsoZmlyc3RXZWVrLCBkaXJ0eU9wdGlvbnMpO1xuICByZXR1cm4gZGF0ZTtcbn0iLCJpbXBvcnQgdG9EYXRlIGZyb20gXCIuLi8uLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCBzdGFydE9mVVRDV2VlayBmcm9tIFwiLi4vc3RhcnRPZlVUQ1dlZWsvaW5kZXguanNcIjtcbmltcG9ydCBzdGFydE9mVVRDV2Vla1llYXIgZnJvbSBcIi4uL3N0YXJ0T2ZVVENXZWVrWWVhci9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG52YXIgTUlMTElTRUNPTkRTX0lOX1dFRUsgPSA2MDQ4MDAwMDA7IC8vIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBhIHBhcnQgb2YgcHVibGljIEFQSSB3aGVuIFVUQyBmdW5jdGlvbiB3aWxsIGJlIGltcGxlbWVudGVkLlxuLy8gU2VlIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvaXNzdWVzLzM3NlxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRVVENXZWVrKGRpcnR5RGF0ZSwgb3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgdmFyIGRpZmYgPSBzdGFydE9mVVRDV2VlayhkYXRlLCBvcHRpb25zKS5nZXRUaW1lKCkgLSBzdGFydE9mVVRDV2Vla1llYXIoZGF0ZSwgb3B0aW9ucykuZ2V0VGltZSgpOyAvLyBSb3VuZCB0aGUgbnVtYmVyIG9mIGRheXMgdG8gdGhlIG5lYXJlc3QgaW50ZWdlclxuICAvLyBiZWNhdXNlIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGluIGEgd2VlayBpcyBub3QgY29uc3RhbnRcbiAgLy8gKGUuZy4gaXQncyBkaWZmZXJlbnQgaW4gdGhlIHdlZWsgb2YgdGhlIGRheWxpZ2h0IHNhdmluZyB0aW1lIGNsb2NrIHNoaWZ0KVxuXG4gIHJldHVybiBNYXRoLnJvdW5kKGRpZmYgLyBNSUxMSVNFQ09ORFNfSU5fV0VFSykgKyAxO1xufSIsImltcG9ydCBsaWdodEZvcm1hdHRlcnMgZnJvbSBcIi4uL2xpZ2h0Rm9ybWF0dGVycy9pbmRleC5qc1wiO1xuaW1wb3J0IGdldFVUQ0RheU9mWWVhciBmcm9tIFwiLi4vLi4vLi4vX2xpYi9nZXRVVENEYXlPZlllYXIvaW5kZXguanNcIjtcbmltcG9ydCBnZXRVVENJU09XZWVrIGZyb20gXCIuLi8uLi8uLi9fbGliL2dldFVUQ0lTT1dlZWsvaW5kZXguanNcIjtcbmltcG9ydCBnZXRVVENJU09XZWVrWWVhciBmcm9tIFwiLi4vLi4vLi4vX2xpYi9nZXRVVENJU09XZWVrWWVhci9pbmRleC5qc1wiO1xuaW1wb3J0IGdldFVUQ1dlZWsgZnJvbSBcIi4uLy4uLy4uL19saWIvZ2V0VVRDV2Vlay9pbmRleC5qc1wiO1xuaW1wb3J0IGdldFVUQ1dlZWtZZWFyIGZyb20gXCIuLi8uLi8uLi9fbGliL2dldFVUQ1dlZWtZZWFyL2luZGV4LmpzXCI7XG5pbXBvcnQgYWRkTGVhZGluZ1plcm9zIGZyb20gXCIuLi8uLi9hZGRMZWFkaW5nWmVyb3MvaW5kZXguanNcIjtcbnZhciBkYXlQZXJpb2RFbnVtID0ge1xuICBhbTogJ2FtJyxcbiAgcG06ICdwbScsXG4gIG1pZG5pZ2h0OiAnbWlkbmlnaHQnLFxuICBub29uOiAnbm9vbicsXG4gIG1vcm5pbmc6ICdtb3JuaW5nJyxcbiAgYWZ0ZXJub29uOiAnYWZ0ZXJub29uJyxcbiAgZXZlbmluZzogJ2V2ZW5pbmcnLFxuICBuaWdodDogJ25pZ2h0J1xufTtcbi8qXG4gKiB8ICAgICB8IFVuaXQgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICB8IFVuaXQgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8ICBhICB8IEFNLCBQTSAgICAgICAgICAgICAgICAgICAgICAgICB8ICBBKiB8IE1pbGxpc2Vjb25kcyBpbiBkYXkgICAgICAgICAgICB8XG4gKiB8ICBiICB8IEFNLCBQTSwgbm9vbiwgbWlkbmlnaHQgICAgICAgICB8ICBCICB8IEZsZXhpYmxlIGRheSBwZXJpb2QgICAgICAgICAgICB8XG4gKiB8ICBjICB8IFN0YW5kLWFsb25lIGxvY2FsIGRheSBvZiB3ZWVrICB8ICBDKiB8IExvY2FsaXplZCBob3VyIHcvIGRheSBwZXJpb2QgICB8XG4gKiB8ICBkICB8IERheSBvZiBtb250aCAgICAgICAgICAgICAgICAgICB8ICBEICB8IERheSBvZiB5ZWFyICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICBlICB8IExvY2FsIGRheSBvZiB3ZWVrICAgICAgICAgICAgICB8ICBFICB8IERheSBvZiB3ZWVrICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICBmICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICBGKiB8IERheSBvZiB3ZWVrIGluIG1vbnRoICAgICAgICAgICB8XG4gKiB8ICBnKiB8IE1vZGlmaWVkIEp1bGlhbiBkYXkgICAgICAgICAgICB8ICBHICB8IEVyYSAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICBoICB8IEhvdXIgWzEtMTJdICAgICAgICAgICAgICAgICAgICB8ICBIICB8IEhvdXIgWzAtMjNdICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICBpISB8IElTTyBkYXkgb2Ygd2VlayAgICAgICAgICAgICAgICB8ICBJISB8IElTTyB3ZWVrIG9mIHllYXIgICAgICAgICAgICAgICB8XG4gKiB8ICBqKiB8IExvY2FsaXplZCBob3VyIHcvIGRheSBwZXJpb2QgICB8ICBKKiB8IExvY2FsaXplZCBob3VyIHcvbyBkYXkgcGVyaW9kICB8XG4gKiB8ICBrICB8IEhvdXIgWzEtMjRdICAgICAgICAgICAgICAgICAgICB8ICBLICB8IEhvdXIgWzAtMTFdICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICBsKiB8IChkZXByZWNhdGVkKSAgICAgICAgICAgICAgICAgICB8ICBMICB8IFN0YW5kLWFsb25lIG1vbnRoICAgICAgICAgICAgICB8XG4gKiB8ICBtICB8IE1pbnV0ZSAgICAgICAgICAgICAgICAgICAgICAgICB8ICBNICB8IE1vbnRoICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICBuICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICBOICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICBvISB8IE9yZGluYWwgbnVtYmVyIG1vZGlmaWVyICAgICAgICB8ICBPICB8IFRpbWV6b25lIChHTVQpICAgICAgICAgICAgICAgICB8XG4gKiB8ICBwISB8IExvbmcgbG9jYWxpemVkIHRpbWUgICAgICAgICAgICB8ICBQISB8IExvbmcgbG9jYWxpemVkIGRhdGUgICAgICAgICAgICB8XG4gKiB8ICBxICB8IFN0YW5kLWFsb25lIHF1YXJ0ZXIgICAgICAgICAgICB8ICBRICB8IFF1YXJ0ZXIgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICByKiB8IFJlbGF0ZWQgR3JlZ29yaWFuIHllYXIgICAgICAgICB8ICBSISB8IElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyICAgICAgICB8XG4gKiB8ICBzICB8IFNlY29uZCAgICAgICAgICAgICAgICAgICAgICAgICB8ICBTICB8IEZyYWN0aW9uIG9mIHNlY29uZCAgICAgICAgICAgICB8XG4gKiB8ICB0ISB8IFNlY29uZHMgdGltZXN0YW1wICAgICAgICAgICAgICB8ICBUISB8IE1pbGxpc2Vjb25kcyB0aW1lc3RhbXAgICAgICAgICB8XG4gKiB8ICB1ICB8IEV4dGVuZGVkIHllYXIgICAgICAgICAgICAgICAgICB8ICBVKiB8IEN5Y2xpYyB5ZWFyICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICB2KiB8IFRpbWV6b25lIChnZW5lcmljIG5vbi1sb2NhdC4pICB8ICBWKiB8IFRpbWV6b25lIChsb2NhdGlvbikgICAgICAgICAgICB8XG4gKiB8ICB3ICB8IExvY2FsIHdlZWsgb2YgeWVhciAgICAgICAgICAgICB8ICBXKiB8IFdlZWsgb2YgbW9udGggICAgICAgICAgICAgICAgICB8XG4gKiB8ICB4ICB8IFRpbWV6b25lIChJU08tODYwMSB3L28gWikgICAgICB8ICBYICB8IFRpbWV6b25lIChJU08tODYwMSkgICAgICAgICAgICB8XG4gKiB8ICB5ICB8IFllYXIgKGFicykgICAgICAgICAgICAgICAgICAgICB8ICBZICB8IExvY2FsIHdlZWstbnVtYmVyaW5nIHllYXIgICAgICB8XG4gKiB8ICB6ICB8IFRpbWV6b25lIChzcGVjaWZpYyBub24tbG9jYXQuKSB8ICBaKiB8IFRpbWV6b25lIChhbGlhc2VzKSAgICAgICAgICAgICB8XG4gKlxuICogTGV0dGVycyBtYXJrZWQgYnkgKiBhcmUgbm90IGltcGxlbWVudGVkIGJ1dCByZXNlcnZlZCBieSBVbmljb2RlIHN0YW5kYXJkLlxuICpcbiAqIExldHRlcnMgbWFya2VkIGJ5ICEgYXJlIG5vbi1zdGFuZGFyZCwgYnV0IGltcGxlbWVudGVkIGJ5IGRhdGUtZm5zOlxuICogLSBgb2AgbW9kaWZpZXMgdGhlIHByZXZpb3VzIHRva2VuIHRvIHR1cm4gaXQgaW50byBhbiBvcmRpbmFsIChzZWUgYGZvcm1hdGAgZG9jcylcbiAqIC0gYGlgIGlzIElTTyBkYXkgb2Ygd2Vlay4gRm9yIGBpYCBhbmQgYGlpYCBpcyByZXR1cm5zIG51bWVyaWMgSVNPIHdlZWsgZGF5cyxcbiAqICAgaS5lLiA3IGZvciBTdW5kYXksIDEgZm9yIE1vbmRheSwgZXRjLlxuICogLSBgSWAgaXMgSVNPIHdlZWsgb2YgeWVhciwgYXMgb3Bwb3NlZCB0byBgd2Agd2hpY2ggaXMgbG9jYWwgd2VlayBvZiB5ZWFyLlxuICogLSBgUmAgaXMgSVNPIHdlZWstbnVtYmVyaW5nIHllYXIsIGFzIG9wcG9zZWQgdG8gYFlgIHdoaWNoIGlzIGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXIuXG4gKiAgIGBSYCBpcyBzdXBwb3NlZCB0byBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYElgIGFuZCBgaWBcbiAqICAgZm9yIHVuaXZlcnNhbCBJU08gd2Vlay1udW1iZXJpbmcgZGF0ZSwgd2hlcmVhc1xuICogICBgWWAgaXMgc3VwcG9zZWQgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGB3YCBhbmQgYGVgXG4gKiAgIGZvciB3ZWVrLW51bWJlcmluZyBkYXRlIHNwZWNpZmljIHRvIHRoZSBsb2NhbGUuXG4gKiAtIGBQYCBpcyBsb25nIGxvY2FsaXplZCBkYXRlIGZvcm1hdFxuICogLSBgcGAgaXMgbG9uZyBsb2NhbGl6ZWQgdGltZSBmb3JtYXRcbiAqL1xuXG52YXIgZm9ybWF0dGVycyA9IHtcbiAgLy8gRXJhXG4gIEc6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICB2YXIgZXJhID0gZGF0ZS5nZXRVVENGdWxsWWVhcigpID4gMCA/IDEgOiAwO1xuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gQUQsIEJDXG4gICAgICBjYXNlICdHJzpcbiAgICAgIGNhc2UgJ0dHJzpcbiAgICAgIGNhc2UgJ0dHRyc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5lcmEoZXJhLCB7XG4gICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCdcbiAgICAgICAgfSk7XG4gICAgICAvLyBBLCBCXG5cbiAgICAgIGNhc2UgJ0dHR0dHJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmVyYShlcmEsIHtcbiAgICAgICAgICB3aWR0aDogJ25hcnJvdydcbiAgICAgICAgfSk7XG4gICAgICAvLyBBbm5vIERvbWluaSwgQmVmb3JlIENocmlzdFxuXG4gICAgICBjYXNlICdHR0dHJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5lcmEoZXJhLCB7XG4gICAgICAgICAgd2lkdGg6ICd3aWRlJ1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIC8vIFllYXJcbiAgeTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIC8vIE9yZGluYWwgbnVtYmVyXG4gICAgaWYgKHRva2VuID09PSAneW8nKSB7XG4gICAgICB2YXIgc2lnbmVkWWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTsgLy8gUmV0dXJucyAxIGZvciAxIEJDICh3aGljaCBpcyB5ZWFyIDAgaW4gSmF2YVNjcmlwdClcblxuICAgICAgdmFyIHllYXIgPSBzaWduZWRZZWFyID4gMCA/IHNpZ25lZFllYXIgOiAxIC0gc2lnbmVkWWVhcjtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHllYXIsIHtcbiAgICAgICAgdW5pdDogJ3llYXInXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLnkoZGF0ZSwgdG9rZW4pO1xuICB9LFxuICAvLyBMb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gIFk6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICB2YXIgc2lnbmVkV2Vla1llYXIgPSBnZXRVVENXZWVrWWVhcihkYXRlLCBvcHRpb25zKTsgLy8gUmV0dXJucyAxIGZvciAxIEJDICh3aGljaCBpcyB5ZWFyIDAgaW4gSmF2YVNjcmlwdClcblxuICAgIHZhciB3ZWVrWWVhciA9IHNpZ25lZFdlZWtZZWFyID4gMCA/IHNpZ25lZFdlZWtZZWFyIDogMSAtIHNpZ25lZFdlZWtZZWFyOyAvLyBUd28gZGlnaXQgeWVhclxuXG4gICAgaWYgKHRva2VuID09PSAnWVknKSB7XG4gICAgICB2YXIgdHdvRGlnaXRZZWFyID0gd2Vla1llYXIgJSAxMDA7XG4gICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHR3b0RpZ2l0WWVhciwgMik7XG4gICAgfSAvLyBPcmRpbmFsIG51bWJlclxuXG5cbiAgICBpZiAodG9rZW4gPT09ICdZbycpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHdlZWtZZWFyLCB7XG4gICAgICAgIHVuaXQ6ICd5ZWFyJ1xuICAgICAgfSk7XG4gICAgfSAvLyBQYWRkaW5nXG5cblxuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3Mod2Vla1llYXIsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG4gIC8vIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gIFI6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbikge1xuICAgIHZhciBpc29XZWVrWWVhciA9IGdldFVUQ0lTT1dlZWtZZWFyKGRhdGUpOyAvLyBQYWRkaW5nXG5cbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGlzb1dlZWtZZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuICAvLyBFeHRlbmRlZCB5ZWFyLiBUaGlzIGlzIGEgc2luZ2xlIG51bWJlciBkZXNpZ25hdGluZyB0aGUgeWVhciBvZiB0aGlzIGNhbGVuZGFyIHN5c3RlbS5cbiAgLy8gVGhlIG1haW4gZGlmZmVyZW5jZSBiZXR3ZWVuIGB5YCBhbmQgYHVgIGxvY2FsaXplcnMgYXJlIEIuQy4geWVhcnM6XG4gIC8vIHwgWWVhciB8IGB5YCB8IGB1YCB8XG4gIC8vIHwtLS0tLS18LS0tLS18LS0tLS18XG4gIC8vIHwgQUMgMSB8ICAgMSB8ICAgMSB8XG4gIC8vIHwgQkMgMSB8ICAgMSB8ICAgMCB8XG4gIC8vIHwgQkMgMiB8ICAgMiB8ICAtMSB8XG4gIC8vIEFsc28gYHl5YCBhbHdheXMgcmV0dXJucyB0aGUgbGFzdCB0d28gZGlnaXRzIG9mIGEgeWVhcixcbiAgLy8gd2hpbGUgYHV1YCBwYWRzIHNpbmdsZSBkaWdpdCB5ZWFycyB0byAyIGNoYXJhY3RlcnMgYW5kIHJldHVybnMgb3RoZXIgeWVhcnMgdW5jaGFuZ2VkLlxuICB1OiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4pIHtcbiAgICB2YXIgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHllYXIsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG4gIC8vIFF1YXJ0ZXJcbiAgUTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIHZhciBxdWFydGVyID0gTWF0aC5jZWlsKChkYXRlLmdldFVUQ01vbnRoKCkgKyAxKSAvIDMpO1xuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gMSwgMiwgMywgNFxuICAgICAgY2FzZSAnUSc6XG4gICAgICAgIHJldHVybiBTdHJpbmcocXVhcnRlcik7XG4gICAgICAvLyAwMSwgMDIsIDAzLCAwNFxuXG4gICAgICBjYXNlICdRUSc6XG4gICAgICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MocXVhcnRlciwgMik7XG4gICAgICAvLyAxc3QsIDJuZCwgM3JkLCA0dGhcblxuICAgICAgY2FzZSAnUW8nOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihxdWFydGVyLCB7XG4gICAgICAgICAgdW5pdDogJ3F1YXJ0ZXInXG4gICAgICAgIH0pO1xuICAgICAgLy8gUTEsIFEyLCBRMywgUTRcblxuICAgICAgY2FzZSAnUVFRJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLnF1YXJ0ZXIocXVhcnRlciwge1xuICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLFxuICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJ1xuICAgICAgICB9KTtcbiAgICAgIC8vIDEsIDIsIDMsIDQgKG5hcnJvdyBxdWFydGVyOyBjb3VsZCBiZSBub3QgbnVtZXJpY2FsKVxuXG4gICAgICBjYXNlICdRUVFRUSc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICB3aWR0aDogJ25hcnJvdycsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pO1xuICAgICAgLy8gMXN0IHF1YXJ0ZXIsIDJuZCBxdWFydGVyLCAuLi5cblxuICAgICAgY2FzZSAnUVFRUSc6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6ICd3aWRlJyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LFxuICAvLyBTdGFuZC1hbG9uZSBxdWFydGVyXG4gIHE6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICB2YXIgcXVhcnRlciA9IE1hdGguY2VpbCgoZGF0ZS5nZXRVVENNb250aCgpICsgMSkgLyAzKTtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIDEsIDIsIDMsIDRcbiAgICAgIGNhc2UgJ3EnOlxuICAgICAgICByZXR1cm4gU3RyaW5nKHF1YXJ0ZXIpO1xuICAgICAgLy8gMDEsIDAyLCAwMywgMDRcblxuICAgICAgY2FzZSAncXEnOlxuICAgICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHF1YXJ0ZXIsIDIpO1xuICAgICAgLy8gMXN0LCAybmQsIDNyZCwgNHRoXG5cbiAgICAgIGNhc2UgJ3FvJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIocXVhcnRlciwge1xuICAgICAgICAgIHVuaXQ6ICdxdWFydGVyJ1xuICAgICAgICB9KTtcbiAgICAgIC8vIFExLCBRMiwgUTMsIFE0XG5cbiAgICAgIGNhc2UgJ3FxcSc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJyxcbiAgICAgICAgICBjb250ZXh0OiAnc3RhbmRhbG9uZSdcbiAgICAgICAgfSk7XG4gICAgICAvLyAxLCAyLCAzLCA0IChuYXJyb3cgcXVhcnRlcjsgY291bGQgYmUgbm90IG51bWVyaWNhbClcblxuICAgICAgY2FzZSAncXFxcXEnOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6ICduYXJyb3cnLFxuICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJ1xuICAgICAgICB9KTtcbiAgICAgIC8vIDFzdCBxdWFydGVyLCAybmQgcXVhcnRlciwgLi4uXG5cbiAgICAgIGNhc2UgJ3FxcXEnOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLnF1YXJ0ZXIocXVhcnRlciwge1xuICAgICAgICAgIHdpZHRoOiAnd2lkZScsXG4gICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgLy8gTW9udGhcbiAgTTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIHZhciBtb250aCA9IGRhdGUuZ2V0VVRDTW9udGgoKTtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIGNhc2UgJ00nOlxuICAgICAgY2FzZSAnTU0nOlxuICAgICAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLk0oZGF0ZSwgdG9rZW4pO1xuICAgICAgLy8gMXN0LCAybmQsIC4uLiwgMTJ0aFxuXG4gICAgICBjYXNlICdNbyc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKG1vbnRoICsgMSwge1xuICAgICAgICAgIHVuaXQ6ICdtb250aCdcbiAgICAgICAgfSk7XG4gICAgICAvLyBKYW4sIEZlYiwgLi4uLCBEZWNcblxuICAgICAgY2FzZSAnTU1NJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pO1xuICAgICAgLy8gSiwgRiwgLi4uLCBEXG5cbiAgICAgIGNhc2UgJ01NTU1NJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgd2lkdGg6ICduYXJyb3cnLFxuICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJ1xuICAgICAgICB9KTtcbiAgICAgIC8vIEphbnVhcnksIEZlYnJ1YXJ5LCAuLi4sIERlY2VtYmVyXG5cbiAgICAgIGNhc2UgJ01NTU0nOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgd2lkdGg6ICd3aWRlJyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LFxuICAvLyBTdGFuZC1hbG9uZSBtb250aFxuICBMOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRVVENNb250aCgpO1xuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gMSwgMiwgLi4uLCAxMlxuICAgICAgY2FzZSAnTCc6XG4gICAgICAgIHJldHVybiBTdHJpbmcobW9udGggKyAxKTtcbiAgICAgIC8vIDAxLCAwMiwgLi4uLCAxMlxuXG4gICAgICBjYXNlICdMTCc6XG4gICAgICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MobW9udGggKyAxLCAyKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAuLi4sIDEydGhcblxuICAgICAgY2FzZSAnTG8nOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihtb250aCArIDEsIHtcbiAgICAgICAgICB1bml0OiAnbW9udGgnXG4gICAgICAgIH0pO1xuICAgICAgLy8gSmFuLCBGZWIsIC4uLiwgRGVjXG5cbiAgICAgIGNhc2UgJ0xMTCc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwge1xuICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLFxuICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJ1xuICAgICAgICB9KTtcbiAgICAgIC8vIEosIEYsIC4uLiwgRFxuXG4gICAgICBjYXNlICdMTExMTCc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwge1xuICAgICAgICAgIHdpZHRoOiAnbmFycm93JyxcbiAgICAgICAgICBjb250ZXh0OiAnc3RhbmRhbG9uZSdcbiAgICAgICAgfSk7XG4gICAgICAvLyBKYW51YXJ5LCBGZWJydWFyeSwgLi4uLCBEZWNlbWJlclxuXG4gICAgICBjYXNlICdMTExMJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwge1xuICAgICAgICAgIHdpZHRoOiAnd2lkZScsXG4gICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgLy8gTG9jYWwgd2VlayBvZiB5ZWFyXG4gIHc6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICB2YXIgd2VlayA9IGdldFVUQ1dlZWsoZGF0ZSwgb3B0aW9ucyk7XG5cbiAgICBpZiAodG9rZW4gPT09ICd3bycpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHdlZWssIHtcbiAgICAgICAgdW5pdDogJ3dlZWsnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHdlZWssIHRva2VuLmxlbmd0aCk7XG4gIH0sXG4gIC8vIElTTyB3ZWVrIG9mIHllYXJcbiAgSTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIHZhciBpc29XZWVrID0gZ2V0VVRDSVNPV2VlayhkYXRlKTtcblxuICAgIGlmICh0b2tlbiA9PT0gJ0lvJykge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaXNvV2Vlaywge1xuICAgICAgICB1bml0OiAnd2VlaydcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoaXNvV2VlaywgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcbiAgLy8gRGF5IG9mIHRoZSBtb250aFxuICBkOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgaWYgKHRva2VuID09PSAnZG8nKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihkYXRlLmdldFVUQ0RhdGUoKSwge1xuICAgICAgICB1bml0OiAnZGF0ZSdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBsaWdodEZvcm1hdHRlcnMuZChkYXRlLCB0b2tlbik7XG4gIH0sXG4gIC8vIERheSBvZiB5ZWFyXG4gIEQ6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICB2YXIgZGF5T2ZZZWFyID0gZ2V0VVRDRGF5T2ZZZWFyKGRhdGUpO1xuXG4gICAgaWYgKHRva2VuID09PSAnRG8nKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihkYXlPZlllYXIsIHtcbiAgICAgICAgdW5pdDogJ2RheU9mWWVhcidcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF5T2ZZZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuICAvLyBEYXkgb2Ygd2Vla1xuICBFOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgdmFyIGRheU9mV2VlayA9IGRhdGUuZ2V0VVRDRGF5KCk7XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBUdWVcbiAgICAgIGNhc2UgJ0UnOlxuICAgICAgY2FzZSAnRUUnOlxuICAgICAgY2FzZSAnRUVFJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG4gICAgICAvLyBUXG5cbiAgICAgIGNhc2UgJ0VFRUVFJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogJ25hcnJvdycsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pO1xuICAgICAgLy8gVHVcblxuICAgICAgY2FzZSAnRUVFRUVFJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogJ3Nob3J0JyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdWVzZGF5XG5cbiAgICAgIGNhc2UgJ0VFRUUnOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogJ3dpZGUnLFxuICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJ1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIC8vIExvY2FsIGRheSBvZiB3ZWVrXG4gIGU6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICB2YXIgZGF5T2ZXZWVrID0gZGF0ZS5nZXRVVENEYXkoKTtcbiAgICB2YXIgbG9jYWxEYXlPZldlZWsgPSAoZGF5T2ZXZWVrIC0gb3B0aW9ucy53ZWVrU3RhcnRzT24gKyA4KSAlIDcgfHwgNztcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIE51bWVyaWNhbCB2YWx1ZSAoTnRoIGRheSBvZiB3ZWVrIHdpdGggY3VycmVudCBsb2NhbGUgb3Igd2Vla1N0YXJ0c09uKVxuICAgICAgY2FzZSAnZSc6XG4gICAgICAgIHJldHVybiBTdHJpbmcobG9jYWxEYXlPZldlZWspO1xuICAgICAgLy8gUGFkZGVkIG51bWVyaWNhbCB2YWx1ZVxuXG4gICAgICBjYXNlICdlZSc6XG4gICAgICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MobG9jYWxEYXlPZldlZWssIDIpO1xuICAgICAgLy8gMXN0LCAybmQsIC4uLiwgN3RoXG5cbiAgICAgIGNhc2UgJ2VvJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIobG9jYWxEYXlPZldlZWssIHtcbiAgICAgICAgICB1bml0OiAnZGF5J1xuICAgICAgICB9KTtcblxuICAgICAgY2FzZSAnZWVlJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG4gICAgICAvLyBUXG5cbiAgICAgIGNhc2UgJ2VlZWVlJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogJ25hcnJvdycsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pO1xuICAgICAgLy8gVHVcblxuICAgICAgY2FzZSAnZWVlZWVlJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogJ3Nob3J0JyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdWVzZGF5XG5cbiAgICAgIGNhc2UgJ2VlZWUnOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogJ3dpZGUnLFxuICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJ1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIC8vIFN0YW5kLWFsb25lIGxvY2FsIGRheSBvZiB3ZWVrXG4gIGM6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICB2YXIgZGF5T2ZXZWVrID0gZGF0ZS5nZXRVVENEYXkoKTtcbiAgICB2YXIgbG9jYWxEYXlPZldlZWsgPSAoZGF5T2ZXZWVrIC0gb3B0aW9ucy53ZWVrU3RhcnRzT24gKyA4KSAlIDcgfHwgNztcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIE51bWVyaWNhbCB2YWx1ZSAoc2FtZSBhcyBpbiBgZWApXG4gICAgICBjYXNlICdjJzpcbiAgICAgICAgcmV0dXJuIFN0cmluZyhsb2NhbERheU9mV2Vlayk7XG4gICAgICAvLyBQYWRkZWQgbnVtZXJpY2FsIHZhbHVlXG5cbiAgICAgIGNhc2UgJ2NjJzpcbiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhsb2NhbERheU9mV2VlaywgdG9rZW4ubGVuZ3RoKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAuLi4sIDd0aFxuXG4gICAgICBjYXNlICdjbyc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGxvY2FsRGF5T2ZXZWVrLCB7XG4gICAgICAgICAgdW5pdDogJ2RheSdcbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgJ2NjYyc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsXG4gICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnXG4gICAgICAgIH0pO1xuICAgICAgLy8gVFxuXG4gICAgICBjYXNlICdjY2NjYyc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6ICduYXJyb3cnLFxuICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJ1xuICAgICAgICB9KTtcbiAgICAgIC8vIFR1XG5cbiAgICAgIGNhc2UgJ2NjY2NjYyc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6ICdzaG9ydCcsXG4gICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnXG4gICAgICAgIH0pO1xuICAgICAgLy8gVHVlc2RheVxuXG4gICAgICBjYXNlICdjY2NjJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6ICd3aWRlJyxcbiAgICAgICAgICBjb250ZXh0OiAnc3RhbmRhbG9uZSdcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LFxuICAvLyBJU08gZGF5IG9mIHdlZWtcbiAgaTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIHZhciBkYXlPZldlZWsgPSBkYXRlLmdldFVUQ0RheSgpO1xuICAgIHZhciBpc29EYXlPZldlZWsgPSBkYXlPZldlZWsgPT09IDAgPyA3IDogZGF5T2ZXZWVrO1xuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gMlxuICAgICAgY2FzZSAnaSc6XG4gICAgICAgIHJldHVybiBTdHJpbmcoaXNvRGF5T2ZXZWVrKTtcbiAgICAgIC8vIDAyXG5cbiAgICAgIGNhc2UgJ2lpJzpcbiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhpc29EYXlPZldlZWssIHRva2VuLmxlbmd0aCk7XG4gICAgICAvLyAybmRcblxuICAgICAgY2FzZSAnaW8nOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihpc29EYXlPZldlZWssIHtcbiAgICAgICAgICB1bml0OiAnZGF5J1xuICAgICAgICB9KTtcbiAgICAgIC8vIFR1ZVxuXG4gICAgICBjYXNlICdpaWknOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLFxuICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJ1xuICAgICAgICB9KTtcbiAgICAgIC8vIFRcblxuICAgICAgY2FzZSAnaWlpaWknOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiAnbmFycm93JyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdVxuXG4gICAgICBjYXNlICdpaWlpaWknOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiAnc2hvcnQnLFxuICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJ1xuICAgICAgICB9KTtcbiAgICAgIC8vIFR1ZXNkYXlcblxuICAgICAgY2FzZSAnaWlpaSc6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiAnd2lkZScsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgLy8gQU0gb3IgUE1cbiAgYTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIHZhciBob3VycyA9IGRhdGUuZ2V0VVRDSG91cnMoKTtcbiAgICB2YXIgZGF5UGVyaW9kRW51bVZhbHVlID0gaG91cnMgLyAxMiA+PSAxID8gJ3BtJyA6ICdhbSc7XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICBjYXNlICdhJzpcbiAgICAgIGNhc2UgJ2FhJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgJ2FhYSc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgIGNhc2UgJ2FhYWFhJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogJ25hcnJvdycsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlICdhYWFhJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6ICd3aWRlJyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LFxuICAvLyBBTSwgUE0sIG1pZG5pZ2h0LCBub29uXG4gIGI6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICB2YXIgaG91cnMgPSBkYXRlLmdldFVUQ0hvdXJzKCk7XG4gICAgdmFyIGRheVBlcmlvZEVudW1WYWx1ZTtcblxuICAgIGlmIChob3VycyA9PT0gMTIpIHtcbiAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGRheVBlcmlvZEVudW0ubm9vbjtcbiAgICB9IGVsc2UgaWYgKGhvdXJzID09PSAwKSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLm1pZG5pZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBob3VycyAvIDEyID49IDEgPyAncG0nIDogJ2FtJztcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICBjYXNlICdiJzpcbiAgICAgIGNhc2UgJ2JiJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgJ2JiYic6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgIGNhc2UgJ2JiYmJiJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogJ25hcnJvdycsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlICdiYmJiJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6ICd3aWRlJyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LFxuICAvLyBpbiB0aGUgbW9ybmluZywgaW4gdGhlIGFmdGVybm9vbiwgaW4gdGhlIGV2ZW5pbmcsIGF0IG5pZ2h0XG4gIEI6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICB2YXIgaG91cnMgPSBkYXRlLmdldFVUQ0hvdXJzKCk7XG4gICAgdmFyIGRheVBlcmlvZEVudW1WYWx1ZTtcblxuICAgIGlmIChob3VycyA+PSAxNykge1xuICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5ldmVuaW5nO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPj0gMTIpIHtcbiAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGRheVBlcmlvZEVudW0uYWZ0ZXJub29uO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPj0gNCkge1xuICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5tb3JuaW5nO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLm5pZ2h0O1xuICAgIH1cblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIGNhc2UgJ0InOlxuICAgICAgY2FzZSAnQkInOlxuICAgICAgY2FzZSAnQkJCJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgJ0JCQkJCJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogJ25hcnJvdycsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlICdCQkJCJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6ICd3aWRlJyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LFxuICAvLyBIb3VyIFsxLTEyXVxuICBoOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgaWYgKHRva2VuID09PSAnaG8nKSB7XG4gICAgICB2YXIgaG91cnMgPSBkYXRlLmdldFVUQ0hvdXJzKCkgJSAxMjtcbiAgICAgIGlmIChob3VycyA9PT0gMCkgaG91cnMgPSAxMjtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGhvdXJzLCB7XG4gICAgICAgIHVuaXQ6ICdob3VyJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5oKGRhdGUsIHRva2VuKTtcbiAgfSxcbiAgLy8gSG91ciBbMC0yM11cbiAgSDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGlmICh0b2tlbiA9PT0gJ0hvJykge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoZGF0ZS5nZXRVVENIb3VycygpLCB7XG4gICAgICAgIHVuaXQ6ICdob3VyJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5IKGRhdGUsIHRva2VuKTtcbiAgfSxcbiAgLy8gSG91ciBbMC0xMV1cbiAgSzogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIHZhciBob3VycyA9IGRhdGUuZ2V0VVRDSG91cnMoKSAlIDEyO1xuXG4gICAgaWYgKHRva2VuID09PSAnS28nKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihob3Vycywge1xuICAgICAgICB1bml0OiAnaG91cidcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoaG91cnMsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG4gIC8vIEhvdXIgWzEtMjRdXG4gIGs6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICB2YXIgaG91cnMgPSBkYXRlLmdldFVUQ0hvdXJzKCk7XG4gICAgaWYgKGhvdXJzID09PSAwKSBob3VycyA9IDI0O1xuXG4gICAgaWYgKHRva2VuID09PSAna28nKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihob3Vycywge1xuICAgICAgICB1bml0OiAnaG91cidcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoaG91cnMsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG4gIC8vIE1pbnV0ZVxuICBtOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgaWYgKHRva2VuID09PSAnbW8nKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihkYXRlLmdldFVUQ01pbnV0ZXMoKSwge1xuICAgICAgICB1bml0OiAnbWludXRlJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5tKGRhdGUsIHRva2VuKTtcbiAgfSxcbiAgLy8gU2Vjb25kXG4gIHM6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBpZiAodG9rZW4gPT09ICdzbycpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGRhdGUuZ2V0VVRDU2Vjb25kcygpLCB7XG4gICAgICAgIHVuaXQ6ICdzZWNvbmQnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLnMoZGF0ZSwgdG9rZW4pO1xuICB9LFxuICAvLyBGcmFjdGlvbiBvZiBzZWNvbmRcbiAgUzogZnVuY3Rpb24gKGRhdGUsIHRva2VuKSB7XG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5TKGRhdGUsIHRva2VuKTtcbiAgfSxcbiAgLy8gVGltZXpvbmUgKElTTy04NjAxLiBJZiBvZmZzZXQgaXMgMCwgb3V0cHV0IGlzIGFsd2F5cyBgJ1onYClcbiAgWDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICB2YXIgb3JpZ2luYWxEYXRlID0gb3B0aW9ucy5fb3JpZ2luYWxEYXRlIHx8IGRhdGU7XG4gICAgdmFyIHRpbWV6b25lT2Zmc2V0ID0gb3JpZ2luYWxEYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG5cbiAgICBpZiAodGltZXpvbmVPZmZzZXQgPT09IDApIHtcbiAgICAgIHJldHVybiAnWic7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gSG91cnMgYW5kIG9wdGlvbmFsIG1pbnV0ZXNcbiAgICAgIGNhc2UgJ1gnOlxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmVXaXRoT3B0aW9uYWxNaW51dGVzKHRpbWV6b25lT2Zmc2V0KTtcbiAgICAgIC8vIEhvdXJzLCBtaW51dGVzIGFuZCBvcHRpb25hbCBzZWNvbmRzIHdpdGhvdXQgYDpgIGRlbGltaXRlclxuICAgICAgLy8gTm90ZTogbmVpdGhlciBJU08tODYwMSBub3IgSmF2YVNjcmlwdCBzdXBwb3J0cyBzZWNvbmRzIGluIHRpbWV6b25lIG9mZnNldHNcbiAgICAgIC8vIHNvIHRoaXMgdG9rZW4gYWx3YXlzIGhhcyB0aGUgc2FtZSBvdXRwdXQgYXMgYFhYYFxuXG4gICAgICBjYXNlICdYWFhYJzpcbiAgICAgIGNhc2UgJ1hYJzpcbiAgICAgICAgLy8gSG91cnMgYW5kIG1pbnV0ZXMgd2l0aG91dCBgOmAgZGVsaW1pdGVyXG4gICAgICAgIHJldHVybiBmb3JtYXRUaW1lem9uZSh0aW1lem9uZU9mZnNldCk7XG4gICAgICAvLyBIb3VycywgbWludXRlcyBhbmQgb3B0aW9uYWwgc2Vjb25kcyB3aXRoIGA6YCBkZWxpbWl0ZXJcbiAgICAgIC8vIE5vdGU6IG5laXRoZXIgSVNPLTg2MDEgbm9yIEphdmFTY3JpcHQgc3VwcG9ydHMgc2Vjb25kcyBpbiB0aW1lem9uZSBvZmZzZXRzXG4gICAgICAvLyBzbyB0aGlzIHRva2VuIGFsd2F5cyBoYXMgdGhlIHNhbWUgb3V0cHV0IGFzIGBYWFhgXG5cbiAgICAgIGNhc2UgJ1hYWFhYJzpcbiAgICAgIGNhc2UgJ1hYWCc6IC8vIEhvdXJzIGFuZCBtaW51dGVzIHdpdGggYDpgIGRlbGltaXRlclxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsICc6Jyk7XG4gICAgfVxuICB9LFxuICAvLyBUaW1lem9uZSAoSVNPLTg2MDEuIElmIG9mZnNldCBpcyAwLCBvdXRwdXQgaXMgYCcrMDA6MDAnYCBvciBlcXVpdmFsZW50KVxuICB4OiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIF9sb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgIHZhciBvcmlnaW5hbERhdGUgPSBvcHRpb25zLl9vcmlnaW5hbERhdGUgfHwgZGF0ZTtcbiAgICB2YXIgdGltZXpvbmVPZmZzZXQgPSBvcmlnaW5hbERhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIEhvdXJzIGFuZCBvcHRpb25hbCBtaW51dGVzXG4gICAgICBjYXNlICd4JzpcbiAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWV6b25lV2l0aE9wdGlvbmFsTWludXRlcyh0aW1lem9uZU9mZnNldCk7XG4gICAgICAvLyBIb3VycywgbWludXRlcyBhbmQgb3B0aW9uYWwgc2Vjb25kcyB3aXRob3V0IGA6YCBkZWxpbWl0ZXJcbiAgICAgIC8vIE5vdGU6IG5laXRoZXIgSVNPLTg2MDEgbm9yIEphdmFTY3JpcHQgc3VwcG9ydHMgc2Vjb25kcyBpbiB0aW1lem9uZSBvZmZzZXRzXG4gICAgICAvLyBzbyB0aGlzIHRva2VuIGFsd2F5cyBoYXMgdGhlIHNhbWUgb3V0cHV0IGFzIGB4eGBcblxuICAgICAgY2FzZSAneHh4eCc6XG4gICAgICBjYXNlICd4eCc6XG4gICAgICAgIC8vIEhvdXJzIGFuZCBtaW51dGVzIHdpdGhvdXQgYDpgIGRlbGltaXRlclxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQpO1xuICAgICAgLy8gSG91cnMsIG1pbnV0ZXMgYW5kIG9wdGlvbmFsIHNlY29uZHMgd2l0aCBgOmAgZGVsaW1pdGVyXG4gICAgICAvLyBOb3RlOiBuZWl0aGVyIElTTy04NjAxIG5vciBKYXZhU2NyaXB0IHN1cHBvcnRzIHNlY29uZHMgaW4gdGltZXpvbmUgb2Zmc2V0c1xuICAgICAgLy8gc28gdGhpcyB0b2tlbiBhbHdheXMgaGFzIHRoZSBzYW1lIG91dHB1dCBhcyBgeHh4YFxuXG4gICAgICBjYXNlICd4eHh4eCc6XG4gICAgICBjYXNlICd4eHgnOiAvLyBIb3VycyBhbmQgbWludXRlcyB3aXRoIGA6YCBkZWxpbWl0ZXJcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0LCAnOicpO1xuICAgIH1cbiAgfSxcbiAgLy8gVGltZXpvbmUgKEdNVClcbiAgTzogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICB2YXIgb3JpZ2luYWxEYXRlID0gb3B0aW9ucy5fb3JpZ2luYWxEYXRlIHx8IGRhdGU7XG4gICAgdmFyIHRpbWV6b25lT2Zmc2V0ID0gb3JpZ2luYWxEYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBTaG9ydFxuICAgICAgY2FzZSAnTyc6XG4gICAgICBjYXNlICdPTyc6XG4gICAgICBjYXNlICdPT08nOlxuICAgICAgICByZXR1cm4gJ0dNVCcgKyBmb3JtYXRUaW1lem9uZVNob3J0KHRpbWV6b25lT2Zmc2V0LCAnOicpO1xuICAgICAgLy8gTG9uZ1xuXG4gICAgICBjYXNlICdPT09PJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAnR01UJyArIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0LCAnOicpO1xuICAgIH1cbiAgfSxcbiAgLy8gVGltZXpvbmUgKHNwZWNpZmljIG5vbi1sb2NhdGlvbilcbiAgejogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICB2YXIgb3JpZ2luYWxEYXRlID0gb3B0aW9ucy5fb3JpZ2luYWxEYXRlIHx8IGRhdGU7XG4gICAgdmFyIHRpbWV6b25lT2Zmc2V0ID0gb3JpZ2luYWxEYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBTaG9ydFxuICAgICAgY2FzZSAneic6XG4gICAgICBjYXNlICd6eic6XG4gICAgICBjYXNlICd6enonOlxuICAgICAgICByZXR1cm4gJ0dNVCcgKyBmb3JtYXRUaW1lem9uZVNob3J0KHRpbWV6b25lT2Zmc2V0LCAnOicpO1xuICAgICAgLy8gTG9uZ1xuXG4gICAgICBjYXNlICd6enp6JzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAnR01UJyArIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0LCAnOicpO1xuICAgIH1cbiAgfSxcbiAgLy8gU2Vjb25kcyB0aW1lc3RhbXBcbiAgdDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICB2YXIgb3JpZ2luYWxEYXRlID0gb3B0aW9ucy5fb3JpZ2luYWxEYXRlIHx8IGRhdGU7XG4gICAgdmFyIHRpbWVzdGFtcCA9IE1hdGguZmxvb3Iob3JpZ2luYWxEYXRlLmdldFRpbWUoKSAvIDEwMDApO1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3ModGltZXN0YW1wLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuICAvLyBNaWxsaXNlY29uZHMgdGltZXN0YW1wXG4gIFQ6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgX2xvY2FsaXplLCBvcHRpb25zKSB7XG4gICAgdmFyIG9yaWdpbmFsRGF0ZSA9IG9wdGlvbnMuX29yaWdpbmFsRGF0ZSB8fCBkYXRlO1xuICAgIHZhciB0aW1lc3RhbXAgPSBvcmlnaW5hbERhdGUuZ2V0VGltZSgpO1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3ModGltZXN0YW1wLCB0b2tlbi5sZW5ndGgpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBmb3JtYXRUaW1lem9uZVNob3J0KG9mZnNldCwgZGlydHlEZWxpbWl0ZXIpIHtcbiAgdmFyIHNpZ24gPSBvZmZzZXQgPiAwID8gJy0nIDogJysnO1xuICB2YXIgYWJzT2Zmc2V0ID0gTWF0aC5hYnMob2Zmc2V0KTtcbiAgdmFyIGhvdXJzID0gTWF0aC5mbG9vcihhYnNPZmZzZXQgLyA2MCk7XG4gIHZhciBtaW51dGVzID0gYWJzT2Zmc2V0ICUgNjA7XG5cbiAgaWYgKG1pbnV0ZXMgPT09IDApIHtcbiAgICByZXR1cm4gc2lnbiArIFN0cmluZyhob3Vycyk7XG4gIH1cblxuICB2YXIgZGVsaW1pdGVyID0gZGlydHlEZWxpbWl0ZXIgfHwgJyc7XG4gIHJldHVybiBzaWduICsgU3RyaW5nKGhvdXJzKSArIGRlbGltaXRlciArIGFkZExlYWRpbmdaZXJvcyhtaW51dGVzLCAyKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VGltZXpvbmVXaXRoT3B0aW9uYWxNaW51dGVzKG9mZnNldCwgZGlydHlEZWxpbWl0ZXIpIHtcbiAgaWYgKG9mZnNldCAlIDYwID09PSAwKSB7XG4gICAgdmFyIHNpZ24gPSBvZmZzZXQgPiAwID8gJy0nIDogJysnO1xuICAgIHJldHVybiBzaWduICsgYWRkTGVhZGluZ1plcm9zKE1hdGguYWJzKG9mZnNldCkgLyA2MCwgMik7XG4gIH1cblxuICByZXR1cm4gZm9ybWF0VGltZXpvbmUob2Zmc2V0LCBkaXJ0eURlbGltaXRlcik7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFRpbWV6b25lKG9mZnNldCwgZGlydHlEZWxpbWl0ZXIpIHtcbiAgdmFyIGRlbGltaXRlciA9IGRpcnR5RGVsaW1pdGVyIHx8ICcnO1xuICB2YXIgc2lnbiA9IG9mZnNldCA+IDAgPyAnLScgOiAnKyc7XG4gIHZhciBhYnNPZmZzZXQgPSBNYXRoLmFicyhvZmZzZXQpO1xuICB2YXIgaG91cnMgPSBhZGRMZWFkaW5nWmVyb3MoTWF0aC5mbG9vcihhYnNPZmZzZXQgLyA2MCksIDIpO1xuICB2YXIgbWludXRlcyA9IGFkZExlYWRpbmdaZXJvcyhhYnNPZmZzZXQgJSA2MCwgMik7XG4gIHJldHVybiBzaWduICsgaG91cnMgKyBkZWxpbWl0ZXIgKyBtaW51dGVzO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmb3JtYXR0ZXJzOyIsImZ1bmN0aW9uIGRhdGVMb25nRm9ybWF0dGVyKHBhdHRlcm4sIGZvcm1hdExvbmcpIHtcbiAgc3dpdGNoIChwYXR0ZXJuKSB7XG4gICAgY2FzZSAnUCc6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy5kYXRlKHtcbiAgICAgICAgd2lkdGg6ICdzaG9ydCdcbiAgICAgIH0pO1xuXG4gICAgY2FzZSAnUFAnOlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcuZGF0ZSh7XG4gICAgICAgIHdpZHRoOiAnbWVkaXVtJ1xuICAgICAgfSk7XG5cbiAgICBjYXNlICdQUFAnOlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcuZGF0ZSh7XG4gICAgICAgIHdpZHRoOiAnbG9uZydcbiAgICAgIH0pO1xuXG4gICAgY2FzZSAnUFBQUCc6XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmb3JtYXRMb25nLmRhdGUoe1xuICAgICAgICB3aWR0aDogJ2Z1bGwnXG4gICAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0aW1lTG9uZ0Zvcm1hdHRlcihwYXR0ZXJuLCBmb3JtYXRMb25nKSB7XG4gIHN3aXRjaCAocGF0dGVybikge1xuICAgIGNhc2UgJ3AnOlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcudGltZSh7XG4gICAgICAgIHdpZHRoOiAnc2hvcnQnXG4gICAgICB9KTtcblxuICAgIGNhc2UgJ3BwJzpcbiAgICAgIHJldHVybiBmb3JtYXRMb25nLnRpbWUoe1xuICAgICAgICB3aWR0aDogJ21lZGl1bSdcbiAgICAgIH0pO1xuXG4gICAgY2FzZSAncHBwJzpcbiAgICAgIHJldHVybiBmb3JtYXRMb25nLnRpbWUoe1xuICAgICAgICB3aWR0aDogJ2xvbmcnXG4gICAgICB9KTtcblxuICAgIGNhc2UgJ3BwcHAnOlxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy50aW1lKHtcbiAgICAgICAgd2lkdGg6ICdmdWxsJ1xuICAgICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGF0ZVRpbWVMb25nRm9ybWF0dGVyKHBhdHRlcm4sIGZvcm1hdExvbmcpIHtcbiAgdmFyIG1hdGNoUmVzdWx0ID0gcGF0dGVybi5tYXRjaCgvKFArKShwKyk/Lyk7XG4gIHZhciBkYXRlUGF0dGVybiA9IG1hdGNoUmVzdWx0WzFdO1xuICB2YXIgdGltZVBhdHRlcm4gPSBtYXRjaFJlc3VsdFsyXTtcblxuICBpZiAoIXRpbWVQYXR0ZXJuKSB7XG4gICAgcmV0dXJuIGRhdGVMb25nRm9ybWF0dGVyKHBhdHRlcm4sIGZvcm1hdExvbmcpO1xuICB9XG5cbiAgdmFyIGRhdGVUaW1lRm9ybWF0O1xuXG4gIHN3aXRjaCAoZGF0ZVBhdHRlcm4pIHtcbiAgICBjYXNlICdQJzpcbiAgICAgIGRhdGVUaW1lRm9ybWF0ID0gZm9ybWF0TG9uZy5kYXRlVGltZSh7XG4gICAgICAgIHdpZHRoOiAnc2hvcnQnXG4gICAgICB9KTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnUFAnOlxuICAgICAgZGF0ZVRpbWVGb3JtYXQgPSBmb3JtYXRMb25nLmRhdGVUaW1lKHtcbiAgICAgICAgd2lkdGg6ICdtZWRpdW0nXG4gICAgICB9KTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnUFBQJzpcbiAgICAgIGRhdGVUaW1lRm9ybWF0ID0gZm9ybWF0TG9uZy5kYXRlVGltZSh7XG4gICAgICAgIHdpZHRoOiAnbG9uZydcbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdQUFBQJzpcbiAgICBkZWZhdWx0OlxuICAgICAgZGF0ZVRpbWVGb3JtYXQgPSBmb3JtYXRMb25nLmRhdGVUaW1lKHtcbiAgICAgICAgd2lkdGg6ICdmdWxsJ1xuICAgICAgfSk7XG4gICAgICBicmVhaztcbiAgfVxuXG4gIHJldHVybiBkYXRlVGltZUZvcm1hdC5yZXBsYWNlKCd7e2RhdGV9fScsIGRhdGVMb25nRm9ybWF0dGVyKGRhdGVQYXR0ZXJuLCBmb3JtYXRMb25nKSkucmVwbGFjZSgne3t0aW1lfX0nLCB0aW1lTG9uZ0Zvcm1hdHRlcih0aW1lUGF0dGVybiwgZm9ybWF0TG9uZykpO1xufVxuXG52YXIgbG9uZ0Zvcm1hdHRlcnMgPSB7XG4gIHA6IHRpbWVMb25nRm9ybWF0dGVyLFxuICBQOiBkYXRlVGltZUxvbmdGb3JtYXR0ZXJcbn07XG5leHBvcnQgZGVmYXVsdCBsb25nRm9ybWF0dGVyczsiLCIvKipcbiAqIEdvb2dsZSBDaHJvbWUgYXMgb2YgNjcuMC4zMzk2Ljg3IGludHJvZHVjZWQgdGltZXpvbmVzIHdpdGggb2Zmc2V0IHRoYXQgaW5jbHVkZXMgc2Vjb25kcy5cbiAqIFRoZXkgdXN1YWxseSBhcHBlYXIgZm9yIGRhdGVzIHRoYXQgZGVub3RlIHRpbWUgYmVmb3JlIHRoZSB0aW1lem9uZXMgd2VyZSBpbnRyb2R1Y2VkXG4gKiAoZS5nLiBmb3IgJ0V1cm9wZS9QcmFndWUnIHRpbWV6b25lIHRoZSBvZmZzZXQgaXMgR01UKzAwOjU3OjQ0IGJlZm9yZSAxIE9jdG9iZXIgMTg5MVxuICogYW5kIEdNVCswMTowMDowMCBhZnRlciB0aGF0IGRhdGUpXG4gKlxuICogRGF0ZSNnZXRUaW1lem9uZU9mZnNldCByZXR1cm5zIHRoZSBvZmZzZXQgaW4gbWludXRlcyBhbmQgd291bGQgcmV0dXJuIDU3IGZvciB0aGUgZXhhbXBsZSBhYm92ZSxcbiAqIHdoaWNoIHdvdWxkIGxlYWQgdG8gaW5jb3JyZWN0IGNhbGN1bGF0aW9ucy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHRpbWV6b25lIG9mZnNldCBpbiBtaWxsaXNlY29uZHMgdGhhdCB0YWtlcyBzZWNvbmRzIGluIGFjY291bnQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMoZGF0ZSkge1xuICB2YXIgdXRjRGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpLCBkYXRlLmdldERhdGUoKSwgZGF0ZS5nZXRIb3VycygpLCBkYXRlLmdldE1pbnV0ZXMoKSwgZGF0ZS5nZXRTZWNvbmRzKCksIGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkpKTtcbiAgdXRjRGF0ZS5zZXRVVENGdWxsWWVhcihkYXRlLmdldEZ1bGxZZWFyKCkpO1xuICByZXR1cm4gZGF0ZS5nZXRUaW1lKCkgLSB1dGNEYXRlLmdldFRpbWUoKTtcbn0iLCJ2YXIgcHJvdGVjdGVkRGF5T2ZZZWFyVG9rZW5zID0gWydEJywgJ0REJ107XG52YXIgcHJvdGVjdGVkV2Vla1llYXJUb2tlbnMgPSBbJ1lZJywgJ1lZWVknXTtcbmV4cG9ydCBmdW5jdGlvbiBpc1Byb3RlY3RlZERheU9mWWVhclRva2VuKHRva2VuKSB7XG4gIHJldHVybiBwcm90ZWN0ZWREYXlPZlllYXJUb2tlbnMuaW5kZXhPZih0b2tlbikgIT09IC0xO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJvdGVjdGVkV2Vla1llYXJUb2tlbih0b2tlbikge1xuICByZXR1cm4gcHJvdGVjdGVkV2Vla1llYXJUb2tlbnMuaW5kZXhPZih0b2tlbikgIT09IC0xO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHRocm93UHJvdGVjdGVkRXJyb3IodG9rZW4sIGZvcm1hdCwgaW5wdXQpIHtcbiAgaWYgKHRva2VuID09PSAnWVlZWScpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlVzZSBgeXl5eWAgaW5zdGVhZCBvZiBgWVlZWWAgKGluIGBcIi5jb25jYXQoZm9ybWF0LCBcImApIGZvciBmb3JtYXR0aW5nIHllYXJzIHRvIHRoZSBpbnB1dCBgXCIpLmNvbmNhdChpbnB1dCwgXCJgOyBzZWU6IGh0dHBzOi8vZ2l0LmlvL2Z4Q3lyXCIpKTtcbiAgfSBlbHNlIGlmICh0b2tlbiA9PT0gJ1lZJykge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVXNlIGB5eWAgaW5zdGVhZCBvZiBgWVlgIChpbiBgXCIuY29uY2F0KGZvcm1hdCwgXCJgKSBmb3IgZm9ybWF0dGluZyB5ZWFycyB0byB0aGUgaW5wdXQgYFwiKS5jb25jYXQoaW5wdXQsIFwiYDsgc2VlOiBodHRwczovL2dpdC5pby9meEN5clwiKSk7XG4gIH0gZWxzZSBpZiAodG9rZW4gPT09ICdEJykge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVXNlIGBkYCBpbnN0ZWFkIG9mIGBEYCAoaW4gYFwiLmNvbmNhdChmb3JtYXQsIFwiYCkgZm9yIGZvcm1hdHRpbmcgZGF5cyBvZiB0aGUgbW9udGggdG8gdGhlIGlucHV0IGBcIikuY29uY2F0KGlucHV0LCBcImA7IHNlZTogaHR0cHM6Ly9naXQuaW8vZnhDeXJcIikpO1xuICB9IGVsc2UgaWYgKHRva2VuID09PSAnREQnKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJVc2UgYGRkYCBpbnN0ZWFkIG9mIGBERGAgKGluIGBcIi5jb25jYXQoZm9ybWF0LCBcImApIGZvciBmb3JtYXR0aW5nIGRheXMgb2YgdGhlIG1vbnRoIHRvIHRoZSBpbnB1dCBgXCIpLmNvbmNhdChpbnB1dCwgXCJgOyBzZWU6IGh0dHBzOi8vZ2l0LmlvL2Z4Q3lyXCIpKTtcbiAgfVxufSIsImltcG9ydCBpc1ZhbGlkIGZyb20gXCIuLi9pc1ZhbGlkL2luZGV4LmpzXCI7XG5pbXBvcnQgZGVmYXVsdExvY2FsZSBmcm9tIFwiLi4vbG9jYWxlL2VuLVVTL2luZGV4LmpzXCI7XG5pbXBvcnQgc3ViTWlsbGlzZWNvbmRzIGZyb20gXCIuLi9zdWJNaWxsaXNlY29uZHMvaW5kZXguanNcIjtcbmltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IGZvcm1hdHRlcnMgZnJvbSBcIi4uL19saWIvZm9ybWF0L2Zvcm1hdHRlcnMvaW5kZXguanNcIjtcbmltcG9ydCBsb25nRm9ybWF0dGVycyBmcm9tIFwiLi4vX2xpYi9mb3JtYXQvbG9uZ0Zvcm1hdHRlcnMvaW5kZXguanNcIjtcbmltcG9ydCBnZXRUaW1lem9uZU9mZnNldEluTWlsbGlzZWNvbmRzIGZyb20gXCIuLi9fbGliL2dldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMvaW5kZXguanNcIjtcbmltcG9ydCB7IGlzUHJvdGVjdGVkRGF5T2ZZZWFyVG9rZW4sIGlzUHJvdGVjdGVkV2Vla1llYXJUb2tlbiwgdGhyb3dQcm90ZWN0ZWRFcnJvciB9IGZyb20gXCIuLi9fbGliL3Byb3RlY3RlZFRva2Vucy9pbmRleC5qc1wiO1xuaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vX2xpYi90b0ludGVnZXIvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7IC8vIFRoaXMgUmVnRXhwIGNvbnNpc3RzIG9mIHRocmVlIHBhcnRzIHNlcGFyYXRlZCBieSBgfGA6XG4vLyAtIFt5WVFxTUx3SWREZWNpaEhLa21zXW8gbWF0Y2hlcyBhbnkgYXZhaWxhYmxlIG9yZGluYWwgbnVtYmVyIHRva2VuXG4vLyAgIChvbmUgb2YgdGhlIGNlcnRhaW4gbGV0dGVycyBmb2xsb3dlZCBieSBgb2ApXG4vLyAtIChcXHcpXFwxKiBtYXRjaGVzIGFueSBzZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGV0dGVyXG4vLyAtICcnIG1hdGNoZXMgdHdvIHF1b3RlIGNoYXJhY3RlcnMgaW4gYSByb3dcbi8vIC0gJygnJ3xbXiddKSsoJ3wkKSBtYXRjaGVzIGFueXRoaW5nIHN1cnJvdW5kZWQgYnkgdHdvIHF1b3RlIGNoYXJhY3RlcnMgKCcpLFxuLy8gICBleGNlcHQgYSBzaW5nbGUgcXVvdGUgc3ltYm9sLCB3aGljaCBlbmRzIHRoZSBzZXF1ZW5jZS5cbi8vICAgVHdvIHF1b3RlIGNoYXJhY3RlcnMgZG8gbm90IGVuZCB0aGUgc2VxdWVuY2UuXG4vLyAgIElmIHRoZXJlIGlzIG5vIG1hdGNoaW5nIHNpbmdsZSBxdW90ZVxuLy8gICB0aGVuIHRoZSBzZXF1ZW5jZSB3aWxsIGNvbnRpbnVlIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN0cmluZy5cbi8vIC0gLiBtYXRjaGVzIGFueSBzaW5nbGUgY2hhcmFjdGVyIHVubWF0Y2hlZCBieSBwcmV2aW91cyBwYXJ0cyBvZiB0aGUgUmVnRXhwc1xuXG52YXIgZm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cCA9IC9beVlRcU1Md0lkRGVjaWhIS2ttc11vfChcXHcpXFwxKnwnJ3wnKCcnfFteJ10pKygnfCQpfC4vZzsgLy8gVGhpcyBSZWdFeHAgY2F0Y2hlcyBzeW1ib2xzIGVzY2FwZWQgYnkgcXVvdGVzLCBhbmQgYWxzb1xuLy8gc2VxdWVuY2VzIG9mIHN5bWJvbHMgUCwgcCwgYW5kIHRoZSBjb21iaW5hdGlvbnMgbGlrZSBgUFBQUFBQUHBwcHBwYFxuXG52YXIgbG9uZ0Zvcm1hdHRpbmdUb2tlbnNSZWdFeHAgPSAvUCtwK3xQK3xwK3wnJ3wnKCcnfFteJ10pKygnfCQpfC4vZztcbnZhciBlc2NhcGVkU3RyaW5nUmVnRXhwID0gL14nKFteXSo/KSc/JC87XG52YXIgZG91YmxlUXVvdGVSZWdFeHAgPSAvJycvZztcbnZhciB1bmVzY2FwZWRMYXRpbkNoYXJhY3RlclJlZ0V4cCA9IC9bYS16QS1aXS87XG4vKipcbiAqIEBuYW1lIGZvcm1hdFxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBGb3JtYXQgdGhlIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIGZvcm1hdHRlZCBkYXRlIHN0cmluZyBpbiB0aGUgZ2l2ZW4gZm9ybWF0LiBUaGUgcmVzdWx0IG1heSB2YXJ5IGJ5IGxvY2FsZS5cbiAqXG4gKiA+IOKaoO+4jyBQbGVhc2Ugbm90ZSB0aGF0IHRoZSBgZm9ybWF0YCB0b2tlbnMgZGlmZmVyIGZyb20gTW9tZW50LmpzIGFuZCBvdGhlciBsaWJyYXJpZXMuXG4gKiA+IFNlZTogaHR0cHM6Ly9naXQuaW8vZnhDeXJcbiAqXG4gKiBUaGUgY2hhcmFjdGVycyB3cmFwcGVkIGJldHdlZW4gdHdvIHNpbmdsZSBxdW90ZXMgY2hhcmFjdGVycyAoJykgYXJlIGVzY2FwZWQuXG4gKiBUd28gc2luZ2xlIHF1b3RlcyBpbiBhIHJvdywgd2hldGhlciBpbnNpZGUgb3Igb3V0c2lkZSBhIHF1b3RlZCBzZXF1ZW5jZSwgcmVwcmVzZW50IGEgJ3JlYWwnIHNpbmdsZSBxdW90ZS5cbiAqIChzZWUgdGhlIGxhc3QgZXhhbXBsZSlcbiAqXG4gKiBGb3JtYXQgb2YgdGhlIHN0cmluZyBpcyBiYXNlZCBvbiBVbmljb2RlIFRlY2huaWNhbCBTdGFuZGFyZCAjMzU6XG4gKiBodHRwczovL3d3dy51bmljb2RlLm9yZy9yZXBvcnRzL3RyMzUvdHIzNS1kYXRlcy5odG1sI0RhdGVfRmllbGRfU3ltYm9sX1RhYmxlXG4gKiB3aXRoIGEgZmV3IGFkZGl0aW9ucyAoc2VlIG5vdGUgNyBiZWxvdyB0aGUgdGFibGUpLlxuICpcbiAqIEFjY2VwdGVkIHBhdHRlcm5zOlxuICogfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUGF0dGVybiB8IFJlc3VsdCBleGFtcGxlcyAgICAgICAgICAgICAgICAgICB8IE5vdGVzIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS18XG4gKiB8IEVyYSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBHLi5HR0cgIHwgQUQsIEJDICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgR0dHRyAgICB8IEFubm8gRG9taW5pLCBCZWZvcmUgQ2hyaXN0ICAgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEdHR0dHICAgfCBBLCBCICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IENhbGVuZGFyIHllYXIgICAgICAgICAgICAgICAgICAgfCB5ICAgICAgIHwgNDQsIDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeW8gICAgICB8IDQ0dGgsIDFzdCwgMHRoLCAxN3RoICAgICAgICAgICAgICB8IDUsNyAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHl5ICAgICAgfCA0NCwgMDEsIDAwLCAxNyAgICAgICAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB5eXkgICAgIHwgMDQ0LCAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeXl5eSAgICB8IDAwNDQsIDAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHl5eXl5ICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzLDUgICB8XG4gKiB8IExvY2FsIHdlZWstbnVtYmVyaW5nIHllYXIgICAgICAgfCBZICAgICAgIHwgNDQsIDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWW8gICAgICB8IDQ0dGgsIDFzdCwgMTkwMHRoLCAyMDE3dGggICAgICAgICB8IDUsNyAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFlZICAgICAgfCA0NCwgMDEsIDAwLCAxNyAgICAgICAgICAgICAgICAgICAgfCA1LDggICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBZWVkgICAgIHwgMDQ0LCAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWVlZWSAgICB8IDAwNDQsIDAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICB8IDUsOCAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFlZWVlZICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzLDUgICB8XG4gKiB8IElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyICAgICAgICAgfCBSICAgICAgIHwgLTQzLCAwLCAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgIHwgNSw3ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUlIgICAgICB8IC00MywgMDAsIDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICB8IDUsNyAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFJSUiAgICAgfCAtMDQzLCAwMDAsIDAwMSwgMTkwMCwgMjAxNyAgICAgICAgfCA1LDcgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBSUlJSICAgIHwgLTAwNDMsIDAwMDAsIDAwMDEsIDE5MDAsIDIwMTcgICAgIHwgNSw3ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUlJSUlIgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNSw3IHxcbiAqIHwgRXh0ZW5kZWQgeWVhciAgICAgICAgICAgICAgICAgICB8IHUgICAgICAgfCAtNDMsIDAsIDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB1dSAgICAgIHwgLTQzLCAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgdXV1ICAgICB8IC0wNDMsIDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHV1dXUgICAgfCAtMDA0MywgMDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB1dXV1dSAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyw1ICAgfFxuICogfCBRdWFydGVyIChmb3JtYXR0aW5nKSAgICAgICAgICAgIHwgUSAgICAgICB8IDEsIDIsIDMsIDQgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFFvICAgICAgfCAxc3QsIDJuZCwgM3JkLCA0dGggICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBRUSAgICAgIHwgMDEsIDAyLCAwMywgMDQgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUVFRICAgICB8IFExLCBRMiwgUTMsIFE0ICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFFRUVEgICAgfCAxc3QgcXVhcnRlciwgMm5kIHF1YXJ0ZXIsIC4uLiAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBRUVFRUSAgIHwgMSwgMiwgMywgNCAgICAgICAgICAgICAgICAgICAgICAgIHwgNCAgICAgfFxuICogfCBRdWFydGVyIChzdGFuZC1hbG9uZSkgICAgICAgICAgIHwgcSAgICAgICB8IDEsIDIsIDMsIDQgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHFvICAgICAgfCAxc3QsIDJuZCwgM3JkLCA0dGggICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBxcSAgICAgIHwgMDEsIDAyLCAwMywgMDQgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcXFxICAgICB8IFExLCBRMiwgUTMsIFE0ICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHFxcXEgICAgfCAxc3QgcXVhcnRlciwgMm5kIHF1YXJ0ZXIsIC4uLiAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBxcXFxcSAgIHwgMSwgMiwgMywgNCAgICAgICAgICAgICAgICAgICAgICAgIHwgNCAgICAgfFxuICogfCBNb250aCAoZm9ybWF0dGluZykgICAgICAgICAgICAgIHwgTSAgICAgICB8IDEsIDIsIC4uLiwgMTIgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE1vICAgICAgfCAxc3QsIDJuZCwgLi4uLCAxMnRoICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBNTSAgICAgIHwgMDEsIDAyLCAuLi4sIDEyICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTU1NICAgICB8IEphbiwgRmViLCAuLi4sIERlYyAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE1NTU0gICAgfCBKYW51YXJ5LCBGZWJydWFyeSwgLi4uLCBEZWNlbWJlciAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBNTU1NTSAgIHwgSiwgRiwgLi4uLCBEICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBNb250aCAoc3RhbmQtYWxvbmUpICAgICAgICAgICAgIHwgTCAgICAgICB8IDEsIDIsIC4uLiwgMTIgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IExvICAgICAgfCAxc3QsIDJuZCwgLi4uLCAxMnRoICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBMTCAgICAgIHwgMDEsIDAyLCAuLi4sIDEyICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTExMICAgICB8IEphbiwgRmViLCAuLi4sIERlYyAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IExMTEwgICAgfCBKYW51YXJ5LCBGZWJydWFyeSwgLi4uLCBEZWNlbWJlciAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBMTExMTCAgIHwgSiwgRiwgLi4uLCBEICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBMb2NhbCB3ZWVrIG9mIHllYXIgICAgICAgICAgICAgIHwgdyAgICAgICB8IDEsIDIsIC4uLiwgNTMgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHdvICAgICAgfCAxc3QsIDJuZCwgLi4uLCA1M3RoICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB3dyAgICAgIHwgMDEsIDAyLCAuLi4sIDUzICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBJU08gd2VlayBvZiB5ZWFyICAgICAgICAgICAgICAgIHwgSSAgICAgICB8IDEsIDIsIC4uLiwgNTMgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IElvICAgICAgfCAxc3QsIDJuZCwgLi4uLCA1M3RoICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBJSSAgICAgIHwgMDEsIDAyLCAuLi4sIDUzICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCBEYXkgb2YgbW9udGggICAgICAgICAgICAgICAgICAgIHwgZCAgICAgICB8IDEsIDIsIC4uLiwgMzEgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGRvICAgICAgfCAxc3QsIDJuZCwgLi4uLCAzMXN0ICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBkZCAgICAgIHwgMDEsIDAyLCAuLi4sIDMxICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBEYXkgb2YgeWVhciAgICAgICAgICAgICAgICAgICAgIHwgRCAgICAgICB8IDEsIDIsIC4uLiwgMzY1LCAzNjYgICAgICAgICAgICAgICB8IDkgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IERvICAgICAgfCAxc3QsIDJuZCwgLi4uLCAzNjV0aCwgMzY2dGggICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBERCAgICAgIHwgMDEsIDAyLCAuLi4sIDM2NSwgMzY2ICAgICAgICAgICAgIHwgOSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgREREICAgICB8IDAwMSwgMDAyLCAuLi4sIDM2NSwgMzY2ICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEREREQgICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzICAgICB8XG4gKiB8IERheSBvZiB3ZWVrIChmb3JtYXR0aW5nKSAgICAgICAgfCBFLi5FRUUgIHwgTW9uLCBUdWUsIFdlZCwgLi4uLCBTdW4gICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRUVFRSAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEVFRUVFICAgfCBNLCBULCBXLCBULCBGLCBTLCBTICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBFRUVFRUUgIHwgTW8sIFR1LCBXZSwgVGgsIEZyLCBTdSwgU2EgICAgICAgIHwgICAgICAgfFxuICogfCBJU08gZGF5IG9mIHdlZWsgKGZvcm1hdHRpbmcpICAgIHwgaSAgICAgICB8IDEsIDIsIDMsIC4uLiwgNyAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGlvICAgICAgfCAxc3QsIDJuZCwgLi4uLCA3dGggICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBpaSAgICAgIHwgMDEsIDAyLCAuLi4sIDA3ICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaWlpICAgICB8IE1vbiwgVHVlLCBXZWQsIC4uLiwgU3VuICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGlpaWkgICAgfCBNb25kYXksIFR1ZXNkYXksIC4uLiwgU3VuZGF5ICAgICAgfCAyLDcgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBpaWlpaSAgIHwgTSwgVCwgVywgVCwgRiwgUywgUyAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaWlpaWlpICB8IE1vLCBUdSwgV2UsIFRoLCBGciwgU3UsIFNhICAgICAgICB8IDcgICAgIHxcbiAqIHwgTG9jYWwgZGF5IG9mIHdlZWsgKGZvcm1hdHRpbmcpICB8IGUgICAgICAgfCAyLCAzLCA0LCAuLi4sIDEgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlbyAgICAgIHwgMm5kLCAzcmQsIC4uLiwgMXN0ICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWUgICAgICB8IDAyLCAwMywgLi4uLCAwMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVlZSAgICAgfCBNb24sIFR1ZSwgV2VkLCAuLi4sIFN1biAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlZWVlICAgIHwgTW9uZGF5LCBUdWVzZGF5LCAuLi4sIFN1bmRheSAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWVlZWUgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVlZWVlZSAgfCBNbywgVHUsIFdlLCBUaCwgRnIsIFN1LCBTYSAgICAgICAgfCAgICAgICB8XG4gKiB8IExvY2FsIGRheSBvZiB3ZWVrIChzdGFuZC1hbG9uZSkgfCBjICAgICAgIHwgMiwgMywgNCwgLi4uLCAxICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY28gICAgICB8IDJuZCwgM3JkLCAuLi4sIDFzdCAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNjICAgICAgfCAwMiwgMDMsIC4uLiwgMDEgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjY2MgICAgIHwgTW9uLCBUdWUsIFdlZCwgLi4uLCBTdW4gICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2NjYyAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNjY2NjICAgfCBNLCBULCBXLCBULCBGLCBTLCBTICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjY2NjY2MgIHwgTW8sIFR1LCBXZSwgVGgsIEZyLCBTdSwgU2EgICAgICAgIHwgICAgICAgfFxuICogfCBBTSwgUE0gICAgICAgICAgICAgICAgICAgICAgICAgIHwgYS4uYWEgICB8IEFNLCBQTSAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFhYSAgICAgfCBhbSwgcG0gICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhYWFhICAgIHwgYS5tLiwgcC5tLiAgICAgICAgICAgICAgICAgICAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWFhYWEgICB8IGEsIHAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgQU0sIFBNLCBub29uLCBtaWRuaWdodCAgICAgICAgICB8IGIuLmJiICAgfCBBTSwgUE0sIG5vb24sIG1pZG5pZ2h0ICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBiYmIgICAgIHwgYW0sIHBtLCBub29uLCBtaWRuaWdodCAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYmJiYiAgICB8IGEubS4sIHAubS4sIG5vb24sIG1pZG5pZ2h0ICAgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGJiYmJiICAgfCBhLCBwLCBuLCBtaSAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IEZsZXhpYmxlIGRheSBwZXJpb2QgICAgICAgICAgICAgfCBCLi5CQkIgIHwgYXQgbmlnaHQsIGluIHRoZSBtb3JuaW5nLCAuLi4gICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgQkJCQiAgICB8IGF0IG5pZ2h0LCBpbiB0aGUgbW9ybmluZywgLi4uICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEJCQkJCICAgfCBhdCBuaWdodCwgaW4gdGhlIG1vcm5pbmcsIC4uLiAgICAgfCAgICAgICB8XG4gKiB8IEhvdXIgWzEtMTJdICAgICAgICAgICAgICAgICAgICAgfCBoICAgICAgIHwgMSwgMiwgLi4uLCAxMSwgMTIgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDExdGgsIDEydGggICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGhoICAgICAgfCAwMSwgMDIsIC4uLiwgMTEsIDEyICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IEhvdXIgWzAtMjNdICAgICAgICAgICAgICAgICAgICAgfCBIICAgICAgIHwgMCwgMSwgMiwgLi4uLCAyMyAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSG8gICAgICB8IDB0aCwgMXN0LCAybmQsIC4uLiwgMjNyZCAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEhIICAgICAgfCAwMCwgMDEsIDAyLCAuLi4sIDIzICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IEhvdXIgWzAtMTFdICAgICAgICAgICAgICAgICAgICAgfCBLICAgICAgIHwgMSwgMiwgLi4uLCAxMSwgMCAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgS28gICAgICB8IDFzdCwgMm5kLCAuLi4sIDExdGgsIDB0aCAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEtLICAgICAgfCAwMSwgMDIsIC4uLiwgMTEsIDAwICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IEhvdXIgWzEtMjRdICAgICAgICAgICAgICAgICAgICAgfCBrICAgICAgIHwgMjQsIDEsIDIsIC4uLiwgMjMgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwga28gICAgICB8IDI0dGgsIDFzdCwgMm5kLCAuLi4sIDIzcmQgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGtrICAgICAgfCAyNCwgMDEsIDAyLCAuLi4sIDIzICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IE1pbnV0ZSAgICAgICAgICAgICAgICAgICAgICAgICAgfCBtICAgICAgIHwgMCwgMSwgLi4uLCA1OSAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgbW8gICAgICB8IDB0aCwgMXN0LCAuLi4sIDU5dGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IG1tICAgICAgfCAwMCwgMDEsIC4uLiwgNTkgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IFNlY29uZCAgICAgICAgICAgICAgICAgICAgICAgICAgfCBzICAgICAgIHwgMCwgMSwgLi4uLCA1OSAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgc28gICAgICB8IDB0aCwgMXN0LCAuLi4sIDU5dGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHNzICAgICAgfCAwMCwgMDEsIC4uLiwgNTkgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IEZyYWN0aW9uIG9mIHNlY29uZCAgICAgICAgICAgICAgfCBTICAgICAgIHwgMCwgMSwgLi4uLCA5ICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU1MgICAgICB8IDAwLCAwMSwgLi4uLCA5OSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFNTUyAgICAgfCAwMDAsIDAwMSwgLi4uLCA5OTkgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBTU1NTICAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyAgICAgfFxuICogfCBUaW1lem9uZSAoSVNPLTg2MDEgdy8gWikgICAgICAgIHwgWCAgICAgICB8IC0wOCwgKzA1MzAsIFogICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFhYICAgICAgfCAtMDgwMCwgKzA1MzAsIFogICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBYWFggICAgIHwgLTA4OjAwLCArMDU6MzAsIFogICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWFhYWCAgICB8IC0wODAwLCArMDUzMCwgWiwgKzEyMzQ1NiAgICAgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFhYWFhYICAgfCAtMDg6MDAsICswNTozMCwgWiwgKzEyOjM0OjU2ICAgICAgfCAgICAgICB8XG4gKiB8IFRpbWV6b25lIChJU08tODYwMSB3L28gWikgICAgICAgfCB4ICAgICAgIHwgLTA4LCArMDUzMCwgKzAwICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeHggICAgICB8IC0wODAwLCArMDUzMCwgKzAwMDAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHh4eCAgICAgfCAtMDg6MDAsICswNTozMCwgKzAwOjAwICAgICAgICAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB4eHh4ICAgIHwgLTA4MDAsICswNTMwLCArMDAwMCwgKzEyMzQ1NiAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeHh4eHggICB8IC0wODowMCwgKzA1OjMwLCArMDA6MDAsICsxMjozNDo1NiB8ICAgICAgIHxcbiAqIHwgVGltZXpvbmUgKEdNVCkgICAgICAgICAgICAgICAgICB8IE8uLi5PT08gfCBHTVQtOCwgR01UKzU6MzAsIEdNVCswICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBPT09PICAgIHwgR01ULTA4OjAwLCBHTVQrMDU6MzAsIEdNVCswMDowMCAgIHwgMiAgICAgfFxuICogfCBUaW1lem9uZSAoc3BlY2lmaWMgbm9uLWxvY2F0LikgIHwgei4uLnp6eiB8IEdNVC04LCBHTVQrNTozMCwgR01UKzAgICAgICAgICAgICB8IDYgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHp6enogICAgfCBHTVQtMDg6MDAsIEdNVCswNTozMCwgR01UKzAwOjAwICAgfCAyLDYgICB8XG4gKiB8IFNlY29uZHMgdGltZXN0YW1wICAgICAgICAgICAgICAgfCB0ICAgICAgIHwgNTEyOTY5NTIwICAgICAgICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgdHQgICAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNyAgIHxcbiAqIHwgTWlsbGlzZWNvbmRzIHRpbWVzdGFtcCAgICAgICAgICB8IFQgICAgICAgfCA1MTI5Njk1MjA5MDAgICAgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBUVCAgICAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyw3ICAgfFxuICogfCBMb25nIGxvY2FsaXplZCBkYXRlICAgICAgICAgICAgIHwgUCAgICAgICB8IDA0LzI5LzE0NTMgICAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFBQICAgICAgfCBBcHIgMjksIDE0NTMgICAgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBQUFAgICAgIHwgQXByaWwgMjl0aCwgMTQ1MyAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFBQUCAgICB8IEZyaWRheSwgQXByaWwgMjl0aCwgMTQ1MyAgICAgICAgICB8IDIsNyAgIHxcbiAqIHwgTG9uZyBsb2NhbGl6ZWQgdGltZSAgICAgICAgICAgICB8IHAgICAgICAgfCAxMjowMCBBTSAgICAgICAgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBwcCAgICAgIHwgMTI6MDA6MDAgQU0gICAgICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcHBwICAgICB8IDEyOjAwOjAwIEFNIEdNVCsyICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHBwcHAgICAgfCAxMjowMDowMCBBTSBHTVQrMDI6MDAgICAgICAgICAgICAgfCAyLDcgICB8XG4gKiB8IENvbWJpbmF0aW9uIG9mIGRhdGUgYW5kIHRpbWUgICAgfCBQcCAgICAgIHwgMDQvMjkvMTQ1MywgMTI6MDAgQU0gICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFBwcCAgICB8IEFwciAyOSwgMTQ1MywgMTI6MDA6MDAgQU0gICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFBQUHBwcCAgfCBBcHJpbCAyOXRoLCAxNDUzIGF0IC4uLiAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBQUFBQcHBwcHwgRnJpZGF5LCBBcHJpbCAyOXRoLCAxNDUzIGF0IC4uLiAgIHwgMiw3ICAgfFxuICogTm90ZXM6XG4gKiAxLiBcIkZvcm1hdHRpbmdcIiB1bml0cyAoZS5nLiBmb3JtYXR0aW5nIHF1YXJ0ZXIpIGluIHRoZSBkZWZhdWx0IGVuLVVTIGxvY2FsZVxuICogICAgYXJlIHRoZSBzYW1lIGFzIFwic3RhbmQtYWxvbmVcIiB1bml0cywgYnV0IGFyZSBkaWZmZXJlbnQgaW4gc29tZSBsYW5ndWFnZXMuXG4gKiAgICBcIkZvcm1hdHRpbmdcIiB1bml0cyBhcmUgZGVjbGluZWQgYWNjb3JkaW5nIHRvIHRoZSBydWxlcyBvZiB0aGUgbGFuZ3VhZ2VcbiAqICAgIGluIHRoZSBjb250ZXh0IG9mIGEgZGF0ZS4gXCJTdGFuZC1hbG9uZVwiIHVuaXRzIGFyZSBhbHdheXMgbm9taW5hdGl2ZSBzaW5ndWxhcjpcbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ2RvIExMTEwnLCB7bG9jYWxlOiBjc30pIC8vPT4gJzYuIGxpc3RvcGFkJ2BcbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ2RvIE1NTU0nLCB7bG9jYWxlOiBjc30pIC8vPT4gJzYuIGxpc3RvcGFkdSdgXG4gKlxuICogMi4gQW55IHNlcXVlbmNlIG9mIHRoZSBpZGVudGljYWwgbGV0dGVycyBpcyBhIHBhdHRlcm4sIHVubGVzcyBpdCBpcyBlc2NhcGVkIGJ5XG4gKiAgICB0aGUgc2luZ2xlIHF1b3RlIGNoYXJhY3RlcnMgKHNlZSBiZWxvdykuXG4gKiAgICBJZiB0aGUgc2VxdWVuY2UgaXMgbG9uZ2VyIHRoYW4gbGlzdGVkIGluIHRhYmxlIChlLmcuIGBFRUVFRUVFRUVFRWApXG4gKiAgICB0aGUgb3V0cHV0IHdpbGwgYmUgdGhlIHNhbWUgYXMgZGVmYXVsdCBwYXR0ZXJuIGZvciB0aGlzIHVuaXQsIHVzdWFsbHlcbiAqICAgIHRoZSBsb25nZXN0IG9uZSAoaW4gY2FzZSBvZiBJU08gd2Vla2RheXMsIGBFRUVFYCkuIERlZmF1bHQgcGF0dGVybnMgZm9yIHVuaXRzXG4gKiAgICBhcmUgbWFya2VkIHdpdGggXCIyXCIgaW4gdGhlIGxhc3QgY29sdW1uIG9mIHRoZSB0YWJsZS5cbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ01NTScpIC8vPT4gJ05vdidgXG4gKlxuICogICAgYGZvcm1hdChuZXcgRGF0ZSgyMDE3LCAxMCwgNiksICdNTU1NJykgLy89PiAnTm92ZW1iZXInYFxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnTU1NTU0nKSAvLz0+ICdOJ2BcbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ01NTU1NTScpIC8vPT4gJ05vdmVtYmVyJ2BcbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ01NTU1NTU0nKSAvLz0+ICdOb3ZlbWJlcidgXG4gKlxuICogMy4gU29tZSBwYXR0ZXJucyBjb3VsZCBiZSB1bmxpbWl0ZWQgbGVuZ3RoIChzdWNoIGFzIGB5eXl5eXl5eWApLlxuICogICAgVGhlIG91dHB1dCB3aWxsIGJlIHBhZGRlZCB3aXRoIHplcm9zIHRvIG1hdGNoIHRoZSBsZW5ndGggb2YgdGhlIHBhdHRlcm4uXG4gKlxuICogICAgYGZvcm1hdChuZXcgRGF0ZSgyMDE3LCAxMCwgNiksICd5eXl5eXl5eScpIC8vPT4gJzAwMDAyMDE3J2BcbiAqXG4gKiA0LiBgUVFRUVFgIGFuZCBgcXFxcXFgIGNvdWxkIGJlIG5vdCBzdHJpY3RseSBudW1lcmljYWwgaW4gc29tZSBsb2NhbGVzLlxuICogICAgVGhlc2UgdG9rZW5zIHJlcHJlc2VudCB0aGUgc2hvcnRlc3QgZm9ybSBvZiB0aGUgcXVhcnRlci5cbiAqXG4gKiA1LiBUaGUgbWFpbiBkaWZmZXJlbmNlIGJldHdlZW4gYHlgIGFuZCBgdWAgcGF0dGVybnMgYXJlIEIuQy4geWVhcnM6XG4gKlxuICogICAgfCBZZWFyIHwgYHlgIHwgYHVgIHxcbiAqICAgIHwtLS0tLS18LS0tLS18LS0tLS18XG4gKiAgICB8IEFDIDEgfCAgIDEgfCAgIDEgfFxuICogICAgfCBCQyAxIHwgICAxIHwgICAwIHxcbiAqICAgIHwgQkMgMiB8ICAgMiB8ICAtMSB8XG4gKlxuICogICAgQWxzbyBgeXlgIGFsd2F5cyByZXR1cm5zIHRoZSBsYXN0IHR3byBkaWdpdHMgb2YgYSB5ZWFyLFxuICogICAgd2hpbGUgYHV1YCBwYWRzIHNpbmdsZSBkaWdpdCB5ZWFycyB0byAyIGNoYXJhY3RlcnMgYW5kIHJldHVybnMgb3RoZXIgeWVhcnMgdW5jaGFuZ2VkOlxuICpcbiAqICAgIHwgWWVhciB8IGB5eWAgfCBgdXVgIHxcbiAqICAgIHwtLS0tLS18LS0tLS0tfC0tLS0tLXxcbiAqICAgIHwgMSAgICB8ICAgMDEgfCAgIDAxIHxcbiAqICAgIHwgMTQgICB8ICAgMTQgfCAgIDE0IHxcbiAqICAgIHwgMzc2ICB8ICAgNzYgfCAgMzc2IHxcbiAqICAgIHwgMTQ1MyB8ICAgNTMgfCAxNDUzIHxcbiAqXG4gKiAgICBUaGUgc2FtZSBkaWZmZXJlbmNlIGlzIHRydWUgZm9yIGxvY2FsIGFuZCBJU08gd2Vlay1udW1iZXJpbmcgeWVhcnMgKGBZYCBhbmQgYFJgKSxcbiAqICAgIGV4Y2VwdCBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFycyBhcmUgZGVwZW5kZW50IG9uIGBvcHRpb25zLndlZWtTdGFydHNPbmBcbiAqICAgIGFuZCBgb3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGVgIChjb21wYXJlIFtnZXRJU09XZWVrWWVhcl17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9nZXRJU09XZWVrWWVhcn1cbiAqICAgIGFuZCBbZ2V0V2Vla1llYXJde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvZ2V0V2Vla1llYXJ9KS5cbiAqXG4gKiA2LiBTcGVjaWZpYyBub24tbG9jYXRpb24gdGltZXpvbmVzIGFyZSBjdXJyZW50bHkgdW5hdmFpbGFibGUgaW4gYGRhdGUtZm5zYCxcbiAqICAgIHNvIHJpZ2h0IG5vdyB0aGVzZSB0b2tlbnMgZmFsbCBiYWNrIHRvIEdNVCB0aW1lem9uZXMuXG4gKlxuICogNy4gVGhlc2UgcGF0dGVybnMgYXJlIG5vdCBpbiB0aGUgVW5pY29kZSBUZWNobmljYWwgU3RhbmRhcmQgIzM1OlxuICogICAgLSBgaWA6IElTTyBkYXkgb2Ygd2Vla1xuICogICAgLSBgSWA6IElTTyB3ZWVrIG9mIHllYXJcbiAqICAgIC0gYFJgOiBJU08gd2Vlay1udW1iZXJpbmcgeWVhclxuICogICAgLSBgdGA6IHNlY29uZHMgdGltZXN0YW1wXG4gKiAgICAtIGBUYDogbWlsbGlzZWNvbmRzIHRpbWVzdGFtcFxuICogICAgLSBgb2A6IG9yZGluYWwgbnVtYmVyIG1vZGlmaWVyXG4gKiAgICAtIGBQYDogbG9uZyBsb2NhbGl6ZWQgZGF0ZVxuICogICAgLSBgcGA6IGxvbmcgbG9jYWxpemVkIHRpbWVcbiAqXG4gKiA4LiBgWVlgIGFuZCBgWVlZWWAgdG9rZW5zIHJlcHJlc2VudCB3ZWVrLW51bWJlcmluZyB5ZWFycyBidXQgdGhleSBhcmUgb2Z0ZW4gY29uZnVzZWQgd2l0aCB5ZWFycy5cbiAqICAgIFlvdSBzaG91bGQgZW5hYmxlIGBvcHRpb25zLnVzZUFkZGl0aW9uYWxXZWVrWWVhclRva2Vuc2AgdG8gdXNlIHRoZW0uIFNlZTogaHR0cHM6Ly9naXQuaW8vZnhDeXJcbiAqXG4gKiA5LiBgRGAgYW5kIGBERGAgdG9rZW5zIHJlcHJlc2VudCBkYXlzIG9mIHRoZSB5ZWFyIGJ1dCB0aGV5IGFyZSBvZnRoZW4gY29uZnVzZWQgd2l0aCBkYXlzIG9mIHRoZSBtb250aC5cbiAqICAgIFlvdSBzaG91bGQgZW5hYmxlIGBvcHRpb25zLnVzZUFkZGl0aW9uYWxEYXlPZlllYXJUb2tlbnNgIHRvIHVzZSB0aGVtLiBTZWU6IGh0dHBzOi8vZ2l0LmlvL2Z4Q3lyXG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiAtIFRoZSBzZWNvbmQgYXJndW1lbnQgaXMgbm93IHJlcXVpcmVkIGZvciB0aGUgc2FrZSBvZiBleHBsaWNpdG5lc3MuXG4gKlxuICogICBgYGBqYXZhc2NyaXB0XG4gKiAgIC8vIEJlZm9yZSB2Mi4wLjBcbiAqICAgZm9ybWF0KG5ldyBEYXRlKDIwMTYsIDAsIDEpKVxuICpcbiAqICAgLy8gdjIuMC4wIG9ud2FyZFxuICogICBmb3JtYXQobmV3IERhdGUoMjAxNiwgMCwgMSksIFwieXl5eS1NTS1kZCdUJ0hIOm1tOnNzLlNTU3h4eFwiKVxuICogICBgYGBcbiAqXG4gKiAtIE5ldyBmb3JtYXQgc3RyaW5nIEFQSSBmb3IgYGZvcm1hdGAgZnVuY3Rpb25cbiAqICAgd2hpY2ggaXMgYmFzZWQgb24gW1VuaWNvZGUgVGVjaG5pY2FsIFN0YW5kYXJkICMzNV0oaHR0cHM6Ly93d3cudW5pY29kZS5vcmcvcmVwb3J0cy90cjM1L3RyMzUtZGF0ZXMuaHRtbCNEYXRlX0ZpZWxkX1N5bWJvbF9UYWJsZSkuXG4gKiAgIFNlZSBbdGhpcyBwb3N0XShodHRwczovL2Jsb2cuZGF0ZS1mbnMub3JnL3Bvc3QvdW5pY29kZS10b2tlbnMtaW4tZGF0ZS1mbnMtdjItc3JlYXR5a2k5MWpnKSBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIC0gQ2hhcmFjdGVycyBhcmUgbm93IGVzY2FwZWQgdXNpbmcgc2luZ2xlIHF1b3RlIHN5bWJvbHMgKGAnYCkgaW5zdGVhZCBvZiBzcXVhcmUgYnJhY2tldHMuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0ge1N0cmluZ30gZm9ybWF0IC0gdGhlIHN0cmluZyBvZiB0b2tlbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zLlxuICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9XG4gKiBAcGFyYW0gezB8MXwyfDN8NHw1fDZ9IFtvcHRpb25zLndlZWtTdGFydHNPbj0wXSAtIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwIC0gU3VuZGF5KVxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZT0xXSAtIHRoZSBkYXkgb2YgSmFudWFyeSwgd2hpY2ggaXNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMudXNlQWRkaXRpb25hbFdlZWtZZWFyVG9rZW5zPWZhbHNlXSAtIGlmIHRydWUsIGFsbG93cyB1c2FnZSBvZiB0aGUgd2Vlay1udW1iZXJpbmcgeWVhciB0b2tlbnMgYFlZYCBhbmQgYFlZWVlgO1xuICogICBzZWU6IGh0dHBzOi8vZ2l0LmlvL2Z4Q3lyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnVzZUFkZGl0aW9uYWxEYXlPZlllYXJUb2tlbnM9ZmFsc2VdIC0gaWYgdHJ1ZSwgYWxsb3dzIHVzYWdlIG9mIHRoZSBkYXkgb2YgeWVhciB0b2tlbnMgYERgIGFuZCBgRERgO1xuICogICBzZWU6IGh0dHBzOi8vZ2l0LmlvL2Z4Q3lyXG4gKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgZm9ybWF0dGVkIGRhdGUgc3RyaW5nXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgZGF0ZWAgbXVzdCBub3QgYmUgSW52YWxpZCBEYXRlXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy5sb2NhbGVgIG11c3QgY29udGFpbiBgbG9jYWxpemVgIHByb3BlcnR5XG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy5sb2NhbGVgIG11c3QgY29udGFpbiBgZm9ybWF0TG9uZ2AgcHJvcGVydHlcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLndlZWtTdGFydHNPbmAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDZcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZWAgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDdcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IHVzZSBgeXl5eWAgaW5zdGVhZCBvZiBgWVlZWWAgZm9yIGZvcm1hdHRpbmcgeWVhcnMgdXNpbmcgW2Zvcm1hdCBwcm92aWRlZF0gdG8gdGhlIGlucHV0IFtpbnB1dCBwcm92aWRlZF07IHNlZTogaHR0cHM6Ly9naXQuaW8vZnhDeXJcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IHVzZSBgeXlgIGluc3RlYWQgb2YgYFlZYCBmb3IgZm9ybWF0dGluZyB5ZWFycyB1c2luZyBbZm9ybWF0IHByb3ZpZGVkXSB0byB0aGUgaW5wdXQgW2lucHV0IHByb3ZpZGVkXTsgc2VlOiBodHRwczovL2dpdC5pby9meEN5clxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gdXNlIGBkYCBpbnN0ZWFkIG9mIGBEYCBmb3IgZm9ybWF0dGluZyBkYXlzIG9mIHRoZSBtb250aCB1c2luZyBbZm9ybWF0IHByb3ZpZGVkXSB0byB0aGUgaW5wdXQgW2lucHV0IHByb3ZpZGVkXTsgc2VlOiBodHRwczovL2dpdC5pby9meEN5clxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gdXNlIGBkZGAgaW5zdGVhZCBvZiBgRERgIGZvciBmb3JtYXR0aW5nIGRheXMgb2YgdGhlIG1vbnRoIHVzaW5nIFtmb3JtYXQgcHJvdmlkZWRdIHRvIHRoZSBpbnB1dCBbaW5wdXQgcHJvdmlkZWRdOyBzZWU6IGh0dHBzOi8vZ2l0LmlvL2Z4Q3lyXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBmb3JtYXQgc3RyaW5nIGNvbnRhaW5zIGFuIHVuZXNjYXBlZCBsYXRpbiBhbHBoYWJldCBjaGFyYWN0ZXJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gUmVwcmVzZW50IDExIEZlYnJ1YXJ5IDIwMTQgaW4gbWlkZGxlLWVuZGlhbiBmb3JtYXQ6XG4gKiB2YXIgcmVzdWx0ID0gZm9ybWF0KG5ldyBEYXRlKDIwMTQsIDEsIDExKSwgJ01NL2RkL3l5eXknKVxuICogLy89PiAnMDIvMTEvMjAxNCdcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gUmVwcmVzZW50IDIgSnVseSAyMDE0IGluIEVzcGVyYW50bzpcbiAqIGltcG9ydCB7IGVvTG9jYWxlIH0gZnJvbSAnZGF0ZS1mbnMvbG9jYWxlL2VvJ1xuICogdmFyIHJlc3VsdCA9IGZvcm1hdChuZXcgRGF0ZSgyMDE0LCA2LCAyKSwgXCJkbyAnZGUnIE1NTU0geXl5eVwiLCB7XG4gKiAgIGxvY2FsZTogZW9Mb2NhbGVcbiAqIH0pXG4gKiAvLz0+ICcyLWEgZGUganVsaW8gMjAxNCdcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRXNjYXBlIHN0cmluZyBieSBzaW5nbGUgcXVvdGUgY2hhcmFjdGVyczpcbiAqIHZhciByZXN1bHQgPSBmb3JtYXQobmV3IERhdGUoMjAxNCwgNiwgMiwgMTUpLCBcImggJ28nJ2Nsb2NrJ1wiKVxuICogLy89PiBcIjMgbydjbG9ja1wiXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZm9ybWF0KGRpcnR5RGF0ZSwgZGlydHlGb3JtYXRTdHIsIGRpcnR5T3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGZvcm1hdFN0ciA9IFN0cmluZyhkaXJ0eUZvcm1hdFN0cik7XG4gIHZhciBvcHRpb25zID0gZGlydHlPcHRpb25zIHx8IHt9O1xuICB2YXIgbG9jYWxlID0gb3B0aW9ucy5sb2NhbGUgfHwgZGVmYXVsdExvY2FsZTtcbiAgdmFyIGxvY2FsZUZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9IGxvY2FsZS5vcHRpb25zICYmIGxvY2FsZS5vcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZTtcbiAgdmFyIGRlZmF1bHRGaXJzdFdlZWtDb250YWluc0RhdGUgPSBsb2NhbGVGaXJzdFdlZWtDb250YWluc0RhdGUgPT0gbnVsbCA/IDEgOiB0b0ludGVnZXIobG9jYWxlRmlyc3RXZWVrQ29udGFpbnNEYXRlKTtcbiAgdmFyIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9IG9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlID09IG51bGwgPyBkZWZhdWx0Rmlyc3RXZWVrQ29udGFpbnNEYXRlIDogdG9JbnRlZ2VyKG9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlKTsgLy8gVGVzdCBpZiB3ZWVrU3RhcnRzT24gaXMgYmV0d2VlbiAxIGFuZCA3IF9hbmRfIGlzIG5vdCBOYU5cblxuICBpZiAoIShmaXJzdFdlZWtDb250YWluc0RhdGUgPj0gMSAmJiBmaXJzdFdlZWtDb250YWluc0RhdGUgPD0gNykpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZmlyc3RXZWVrQ29udGFpbnNEYXRlIG11c3QgYmUgYmV0d2VlbiAxIGFuZCA3IGluY2x1c2l2ZWx5Jyk7XG4gIH1cblxuICB2YXIgbG9jYWxlV2Vla1N0YXJ0c09uID0gbG9jYWxlLm9wdGlvbnMgJiYgbG9jYWxlLm9wdGlvbnMud2Vla1N0YXJ0c09uO1xuICB2YXIgZGVmYXVsdFdlZWtTdGFydHNPbiA9IGxvY2FsZVdlZWtTdGFydHNPbiA9PSBudWxsID8gMCA6IHRvSW50ZWdlcihsb2NhbGVXZWVrU3RhcnRzT24pO1xuICB2YXIgd2Vla1N0YXJ0c09uID0gb3B0aW9ucy53ZWVrU3RhcnRzT24gPT0gbnVsbCA/IGRlZmF1bHRXZWVrU3RhcnRzT24gOiB0b0ludGVnZXIob3B0aW9ucy53ZWVrU3RhcnRzT24pOyAvLyBUZXN0IGlmIHdlZWtTdGFydHNPbiBpcyBiZXR3ZWVuIDAgYW5kIDYgX2FuZF8gaXMgbm90IE5hTlxuXG4gIGlmICghKHdlZWtTdGFydHNPbiA+PSAwICYmIHdlZWtTdGFydHNPbiA8PSA2KSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd3ZWVrU3RhcnRzT24gbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDYgaW5jbHVzaXZlbHknKTtcbiAgfVxuXG4gIGlmICghbG9jYWxlLmxvY2FsaXplKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2xvY2FsZSBtdXN0IGNvbnRhaW4gbG9jYWxpemUgcHJvcGVydHknKTtcbiAgfVxuXG4gIGlmICghbG9jYWxlLmZvcm1hdExvbmcpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignbG9jYWxlIG11c3QgY29udGFpbiBmb3JtYXRMb25nIHByb3BlcnR5Jyk7XG4gIH1cblxuICB2YXIgb3JpZ2luYWxEYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG5cbiAgaWYgKCFpc1ZhbGlkKG9yaWdpbmFsRGF0ZSkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCB0aW1lIHZhbHVlJyk7XG4gIH0gLy8gQ29udmVydCB0aGUgZGF0ZSBpbiBzeXN0ZW0gdGltZXpvbmUgdG8gdGhlIHNhbWUgZGF0ZSBpbiBVVEMrMDA6MDAgdGltZXpvbmUuXG4gIC8vIFRoaXMgZW5zdXJlcyB0aGF0IHdoZW4gVVRDIGZ1bmN0aW9ucyB3aWxsIGJlIGltcGxlbWVudGVkLCBsb2NhbGVzIHdpbGwgYmUgY29tcGF0aWJsZSB3aXRoIHRoZW0uXG4gIC8vIFNlZSBhbiBpc3N1ZSBhYm91dCBVVEMgZnVuY3Rpb25zOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvaXNzdWVzLzM3NlxuXG5cbiAgdmFyIHRpbWV6b25lT2Zmc2V0ID0gZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcyhvcmlnaW5hbERhdGUpO1xuICB2YXIgdXRjRGF0ZSA9IHN1Yk1pbGxpc2Vjb25kcyhvcmlnaW5hbERhdGUsIHRpbWV6b25lT2Zmc2V0KTtcbiAgdmFyIGZvcm1hdHRlck9wdGlvbnMgPSB7XG4gICAgZmlyc3RXZWVrQ29udGFpbnNEYXRlOiBmaXJzdFdlZWtDb250YWluc0RhdGUsXG4gICAgd2Vla1N0YXJ0c09uOiB3ZWVrU3RhcnRzT24sXG4gICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgX29yaWdpbmFsRGF0ZTogb3JpZ2luYWxEYXRlXG4gIH07XG4gIHZhciByZXN1bHQgPSBmb3JtYXRTdHIubWF0Y2gobG9uZ0Zvcm1hdHRpbmdUb2tlbnNSZWdFeHApLm1hcChmdW5jdGlvbiAoc3Vic3RyaW5nKSB7XG4gICAgdmFyIGZpcnN0Q2hhcmFjdGVyID0gc3Vic3RyaW5nWzBdO1xuXG4gICAgaWYgKGZpcnN0Q2hhcmFjdGVyID09PSAncCcgfHwgZmlyc3RDaGFyYWN0ZXIgPT09ICdQJykge1xuICAgICAgdmFyIGxvbmdGb3JtYXR0ZXIgPSBsb25nRm9ybWF0dGVyc1tmaXJzdENoYXJhY3Rlcl07XG4gICAgICByZXR1cm4gbG9uZ0Zvcm1hdHRlcihzdWJzdHJpbmcsIGxvY2FsZS5mb3JtYXRMb25nLCBmb3JtYXR0ZXJPcHRpb25zKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3Vic3RyaW5nO1xuICB9KS5qb2luKCcnKS5tYXRjaChmb3JtYXR0aW5nVG9rZW5zUmVnRXhwKS5tYXAoZnVuY3Rpb24gKHN1YnN0cmluZykge1xuICAgIC8vIFJlcGxhY2UgdHdvIHNpbmdsZSBxdW90ZSBjaGFyYWN0ZXJzIHdpdGggb25lIHNpbmdsZSBxdW90ZSBjaGFyYWN0ZXJcbiAgICBpZiAoc3Vic3RyaW5nID09PSBcIicnXCIpIHtcbiAgICAgIHJldHVybiBcIidcIjtcbiAgICB9XG5cbiAgICB2YXIgZmlyc3RDaGFyYWN0ZXIgPSBzdWJzdHJpbmdbMF07XG5cbiAgICBpZiAoZmlyc3RDaGFyYWN0ZXIgPT09IFwiJ1wiKSB7XG4gICAgICByZXR1cm4gY2xlYW5Fc2NhcGVkU3RyaW5nKHN1YnN0cmluZyk7XG4gICAgfVxuXG4gICAgdmFyIGZvcm1hdHRlciA9IGZvcm1hdHRlcnNbZmlyc3RDaGFyYWN0ZXJdO1xuXG4gICAgaWYgKGZvcm1hdHRlcikge1xuICAgICAgaWYgKCFvcHRpb25zLnVzZUFkZGl0aW9uYWxXZWVrWWVhclRva2VucyAmJiBpc1Byb3RlY3RlZFdlZWtZZWFyVG9rZW4oc3Vic3RyaW5nKSkge1xuICAgICAgICB0aHJvd1Byb3RlY3RlZEVycm9yKHN1YnN0cmluZywgZGlydHlGb3JtYXRTdHIsIGRpcnR5RGF0ZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghb3B0aW9ucy51c2VBZGRpdGlvbmFsRGF5T2ZZZWFyVG9rZW5zICYmIGlzUHJvdGVjdGVkRGF5T2ZZZWFyVG9rZW4oc3Vic3RyaW5nKSkge1xuICAgICAgICB0aHJvd1Byb3RlY3RlZEVycm9yKHN1YnN0cmluZywgZGlydHlGb3JtYXRTdHIsIGRpcnR5RGF0ZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmb3JtYXR0ZXIodXRjRGF0ZSwgc3Vic3RyaW5nLCBsb2NhbGUubG9jYWxpemUsIGZvcm1hdHRlck9wdGlvbnMpO1xuICAgIH1cblxuICAgIGlmIChmaXJzdENoYXJhY3Rlci5tYXRjaCh1bmVzY2FwZWRMYXRpbkNoYXJhY3RlclJlZ0V4cCkpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdGb3JtYXQgc3RyaW5nIGNvbnRhaW5zIGFuIHVuZXNjYXBlZCBsYXRpbiBhbHBoYWJldCBjaGFyYWN0ZXIgYCcgKyBmaXJzdENoYXJhY3RlciArICdgJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN1YnN0cmluZztcbiAgfSkuam9pbignJyk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGNsZWFuRXNjYXBlZFN0cmluZyhpbnB1dCkge1xuICByZXR1cm4gaW5wdXQubWF0Y2goZXNjYXBlZFN0cmluZ1JlZ0V4cClbMV0ucmVwbGFjZShkb3VibGVRdW90ZVJlZ0V4cCwgXCInXCIpO1xufSIsImltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHRvRGF0ZVxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgaXRzIGNsb25lLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhIG51bWJlciwgaXQgaXMgdHJlYXRlZCBhcyBhIHRpbWVzdGFtcC5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgbm9uZSBvZiB0aGUgYWJvdmUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIEludmFsaWQgRGF0ZS5cbiAqXG4gKiAqKk5vdGUqKjogKmFsbCogRGF0ZSBhcmd1bWVudHMgcGFzc2VkIHRvIGFueSAqZGF0ZS1mbnMqIGZ1bmN0aW9uIGlzIHByb2Nlc3NlZCBieSBgdG9EYXRlYC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBhcmd1bWVudCAtIHRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDbG9uZSB0aGUgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZShuZXcgRGF0ZSgyMDE0LCAxLCAxMSwgMTEsIDMwLCAzMCkpXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHRoZSB0aW1lc3RhbXAgdG8gZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZSgxMzkyMDk4NDMwMDAwKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b0RhdGUoYXJndW1lbnQpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBhcmdTdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnQpOyAvLyBDbG9uZSB0aGUgZGF0ZVxuXG4gIGlmIChhcmd1bWVudCBpbnN0YW5jZW9mIERhdGUgfHwgdHlwZW9mIGFyZ3VtZW50ID09PSAnb2JqZWN0JyAmJiBhcmdTdHIgPT09ICdbb2JqZWN0IERhdGVdJykge1xuICAgIC8vIFByZXZlbnQgdGhlIGRhdGUgdG8gbG9zZSB0aGUgbWlsbGlzZWNvbmRzIHdoZW4gcGFzc2VkIHRvIG5ldyBEYXRlKCkgaW4gSUUxMFxuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudC5nZXRUaW1lKCkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudCA9PT0gJ251bWJlcicgfHwgYXJnU3RyID09PSAnW29iamVjdCBOdW1iZXJdJykge1xuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudCk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCh0eXBlb2YgYXJndW1lbnQgPT09ICdzdHJpbmcnIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgU3RyaW5nXScpICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihcIlN0YXJ0aW5nIHdpdGggdjIuMC4wLWJldGEuMSBkYXRlLWZucyBkb2Vzbid0IGFjY2VwdCBzdHJpbmdzIGFzIGRhdGUgYXJndW1lbnRzLiBQbGVhc2UgdXNlIGBwYXJzZUlTT2AgdG8gcGFyc2Ugc3RyaW5ncy4gU2VlOiBodHRwczovL2dpdC5pby9manVsZVwiKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcblxuICAgICAgY29uc29sZS53YXJuKG5ldyBFcnJvcigpLnN0YWNrKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgfVxufSIsImltcG9ydCB7IHJlZ2lzdGVyVmVyc2lvbiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuZXhwb3J0ICogZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5cbnZhciBuYW1lID0gXCJmaXJlYmFzZVwiO1xudmFyIHZlcnNpb24gPSBcIjkuMi4wXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnYXBwJyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJ2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fTtcblxudmFyIGVzbSA9IHt9O1xuXG4vKlxuXG4gQ29weXJpZ2h0IFRoZSBDbG9zdXJlIExpYnJhcnkgQXV0aG9ycy5cbiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuKi9cbnZhciBrLGdvb2c9Z29vZ3x8e30sbD1jb21tb25qc0dsb2JhbHx8c2VsZjtmdW5jdGlvbiBhYSgpe31mdW5jdGlvbiBiYShhKXt2YXIgYj10eXBlb2YgYTtiPVwib2JqZWN0XCIhPWI/YjphP0FycmF5LmlzQXJyYXkoYSk/XCJhcnJheVwiOmI6XCJudWxsXCI7cmV0dXJuIFwiYXJyYXlcIj09Ynx8XCJvYmplY3RcIj09YiYmXCJudW1iZXJcIj09dHlwZW9mIGEubGVuZ3RofWZ1bmN0aW9uIHAoYSl7dmFyIGI9dHlwZW9mIGE7cmV0dXJuIFwib2JqZWN0XCI9PWImJm51bGwhPWF8fFwiZnVuY3Rpb25cIj09Yn1mdW5jdGlvbiBkYShhKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsZWEpJiZhW2VhXXx8KGFbZWFdPSsrZmEpfXZhciBlYT1cImNsb3N1cmVfdWlkX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApLGZhPTA7ZnVuY3Rpb24gaGEoYSxiLGMpe3JldHVybiBhLmNhbGwuYXBwbHkoYS5iaW5kLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBpYShhLGIsYyl7aWYoIWEpdGhyb3cgRXJyb3IoKTtpZigyPGFyZ3VtZW50cy5sZW5ndGgpe3ZhciBkPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO0FycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGUsZCk7cmV0dXJuIGEuYXBwbHkoYixlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYixhcmd1bWVudHMpfX1mdW5jdGlvbiBxKGEsYixjKXtGdW5jdGlvbi5wcm90b3R5cGUuYmluZCYmLTEhPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLnRvU3RyaW5nKCkuaW5kZXhPZihcIm5hdGl2ZSBjb2RlXCIpP3E9aGE6cT1pYTtyZXR1cm4gcS5hcHBseShudWxsLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBqYShhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7ZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKTtyZXR1cm4gYS5hcHBseSh0aGlzLGQpfX1mdW5jdGlvbiB0KGEsYil7ZnVuY3Rpb24gYygpe31jLnByb3RvdHlwZT1iLnByb3RvdHlwZTthLlo9Yi5wcm90b3R5cGU7YS5wcm90b3R5cGU9bmV3IGM7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YTthLlZiPWZ1bmN0aW9uKGQsZSxmKXtmb3IodmFyIGg9QXJyYXkoYXJndW1lbnRzLmxlbmd0aC0yKSxuPTI7bjxhcmd1bWVudHMubGVuZ3RoO24rKyloW24tMl09YXJndW1lbnRzW25dO3JldHVybiBiLnByb3RvdHlwZVtlXS5hcHBseShkLGgpfTt9ZnVuY3Rpb24gdigpe3RoaXMucz10aGlzLnM7dGhpcy5vPXRoaXMubzt9dmFyIGthPTAsbGE9e307di5wcm90b3R5cGUucz0hMTt2LnByb3RvdHlwZS5uYT1mdW5jdGlvbigpe2lmKCF0aGlzLnMmJih0aGlzLnM9ITAsdGhpcy5NKCksMCE9a2EpKXt2YXIgYT1kYSh0aGlzKTtkZWxldGUgbGFbYV07fX07di5wcm90b3R5cGUuTT1mdW5jdGlvbigpe2lmKHRoaXMubylmb3IoO3RoaXMuby5sZW5ndGg7KXRoaXMuby5zaGlmdCgpKCk7fTtjb25zdCBtYT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGEsYix2b2lkIDApfTpmdW5jdGlvbihhLGIpe2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gXCJzdHJpbmdcIiE9PXR5cGVvZiBifHwxIT1iLmxlbmd0aD8tMTphLmluZGV4T2YoYiwwKTtmb3IobGV0IGM9MDtjPGEubGVuZ3RoO2MrKylpZihjIGluIGEmJmFbY109PT1iKXJldHVybiBjO3JldHVybiAtMX0sbmE9QXJyYXkucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24oYSxiLGMpe0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxiLGMpO306ZnVuY3Rpb24oYSxiLGMpe2NvbnN0IGQ9YS5sZW5ndGgsZT1cInN0cmluZ1wiPT09dHlwZW9mIGE/YS5zcGxpdChcIlwiKTphO2ZvcihsZXQgZj0wO2Y8ZDtmKyspZiBpbiBlJiZiLmNhbGwoYyxlW2ZdLGYsYSk7fTtcbmZ1bmN0aW9uIG9hKGEpe2E6e3ZhciBiPXBhO2NvbnN0IGM9YS5sZW5ndGgsZD1cInN0cmluZ1wiPT09dHlwZW9mIGE/YS5zcGxpdChcIlwiKTphO2ZvcihsZXQgZT0wO2U8YztlKyspaWYoZSBpbiBkJiZiLmNhbGwodm9pZCAwLGRbZV0sZSxhKSl7Yj1lO2JyZWFrIGF9Yj0tMTt9cmV0dXJuIDA+Yj9udWxsOlwic3RyaW5nXCI9PT10eXBlb2YgYT9hLmNoYXJBdChiKTphW2JdfWZ1bmN0aW9uIHFhKGEpe3JldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGFyZ3VtZW50cyl9ZnVuY3Rpb24gcmEoYSl7Y29uc3QgYj1hLmxlbmd0aDtpZigwPGIpe2NvbnN0IGM9QXJyYXkoYik7Zm9yKGxldCBkPTA7ZDxiO2QrKyljW2RdPWFbZF07cmV0dXJuIGN9cmV0dXJuIFtdfWZ1bmN0aW9uIHNhKGEpe3JldHVybiAvXltcXHNcXHhhMF0qJC8udGVzdChhKX12YXIgdGE9U3RyaW5nLnByb3RvdHlwZS50cmltP2Z1bmN0aW9uKGEpe3JldHVybiBhLnRyaW0oKX06ZnVuY3Rpb24oYSl7cmV0dXJuIC9eW1xcc1xceGEwXSooW1xcc1xcU10qPylbXFxzXFx4YTBdKiQvLmV4ZWMoYSlbMV19O2Z1bmN0aW9uIHcoYSxiKXtyZXR1cm4gLTEhPWEuaW5kZXhPZihiKX1mdW5jdGlvbiB1YShhLGIpe3JldHVybiBhPGI/LTE6YT5iPzE6MH12YXIgeDthOnt2YXIgdmE9bC5uYXZpZ2F0b3I7aWYodmEpe3ZhciB3YT12YS51c2VyQWdlbnQ7aWYod2Epe3g9d2E7YnJlYWsgYX19eD1cIlwiO31mdW5jdGlvbiB4YShhLGIsYyl7Zm9yKGNvbnN0IGQgaW4gYSliLmNhbGwoYyxhW2RdLGQsYSk7fWZ1bmN0aW9uIHlhKGEpe2NvbnN0IGI9e307Zm9yKGNvbnN0IGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9dmFyIHphPVwiY29uc3RydWN0b3IgaGFzT3duUHJvcGVydHkgaXNQcm90b3R5cGVPZiBwcm9wZXJ0eUlzRW51bWVyYWJsZSB0b0xvY2FsZVN0cmluZyB0b1N0cmluZyB2YWx1ZU9mXCIuc3BsaXQoXCIgXCIpO2Z1bmN0aW9uIEFhKGEsYil7bGV0IGMsZDtmb3IobGV0IGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXtkPWFyZ3VtZW50c1tlXTtmb3IoYyBpbiBkKWFbY109ZFtjXTtmb3IobGV0IGY9MDtmPHphLmxlbmd0aDtmKyspYz16YVtmXSxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZCxjKSYmKGFbY109ZFtjXSk7fX1mdW5jdGlvbiBDYShhKXtDYVtcIiBcIl0oYSk7cmV0dXJuIGF9Q2FbXCIgXCJdPWFhO2Z1bmN0aW9uIEZhKGEpe3ZhciBiPUdhO3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiw5KT9iWzldOmJbOV09YSg5KX12YXIgSGE9dyh4LFwiT3BlcmFcIikseT13KHgsXCJUcmlkZW50XCIpfHx3KHgsXCJNU0lFXCIpLElhPXcoeCxcIkVkZ2VcIiksSmE9SWF8fHksS2E9dyh4LFwiR2Vja29cIikmJiEodyh4LnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiF3KHgsXCJFZGdlXCIpKSYmISh3KHgsXCJUcmlkZW50XCIpfHx3KHgsXCJNU0lFXCIpKSYmIXcoeCxcIkVkZ2VcIiksTGE9dyh4LnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiF3KHgsXCJFZGdlXCIpO2Z1bmN0aW9uIE1hKCl7dmFyIGE9bC5kb2N1bWVudDtyZXR1cm4gYT9hLmRvY3VtZW50TW9kZTp2b2lkIDB9dmFyIE5hO1xuYTp7dmFyIE9hPVwiXCIsUGE9ZnVuY3Rpb24oKXt2YXIgYT14O2lmKEthKXJldHVybiAvcnY6KFteXFwpO10rKShcXCl8OykvLmV4ZWMoYSk7aWYoSWEpcmV0dXJuIC9FZGdlXFwvKFtcXGRcXC5dKykvLmV4ZWMoYSk7aWYoeSlyZXR1cm4gL1xcYig/Ok1TSUV8cnYpWzogXShbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpO2lmKExhKXJldHVybiAvV2ViS2l0XFwvKFxcUyspLy5leGVjKGEpO2lmKEhhKXJldHVybiAvKD86VmVyc2lvbilbIFxcL10/KFxcUyspLy5leGVjKGEpfSgpO1BhJiYoT2E9UGE/UGFbMV06XCJcIik7aWYoeSl7dmFyIFFhPU1hKCk7aWYobnVsbCE9UWEmJlFhPnBhcnNlRmxvYXQoT2EpKXtOYT1TdHJpbmcoUWEpO2JyZWFrIGF9fU5hPU9hO312YXIgR2E9e307XG5mdW5jdGlvbiBSYSgpe3JldHVybiBGYShmdW5jdGlvbigpe2xldCBhPTA7Y29uc3QgYj10YShTdHJpbmcoTmEpKS5zcGxpdChcIi5cIiksYz10YShcIjlcIikuc3BsaXQoXCIuXCIpLGQ9TWF0aC5tYXgoYi5sZW5ndGgsYy5sZW5ndGgpO2ZvcihsZXQgaD0wOzA9PWEmJmg8ZDtoKyspe3ZhciBlPWJbaF18fFwiXCIsZj1jW2hdfHxcIlwiO2Rve2U9LyhcXGQqKShcXEQqKSguKikvLmV4ZWMoZSl8fFtcIlwiLFwiXCIsXCJcIixcIlwiXTtmPS8oXFxkKikoXFxEKikoLiopLy5leGVjKGYpfHxbXCJcIixcIlwiLFwiXCIsXCJcIl07aWYoMD09ZVswXS5sZW5ndGgmJjA9PWZbMF0ubGVuZ3RoKWJyZWFrO2E9dWEoMD09ZVsxXS5sZW5ndGg/MDpwYXJzZUludChlWzFdLDEwKSwwPT1mWzFdLmxlbmd0aD8wOnBhcnNlSW50KGZbMV0sMTApKXx8dWEoMD09ZVsyXS5sZW5ndGgsMD09ZlsyXS5sZW5ndGgpfHx1YShlWzJdLGZbMl0pO2U9ZVszXTtmPWZbM107fXdoaWxlKDA9PWEpfXJldHVybiAwPD1hfSl9dmFyIFNhO1xuaWYobC5kb2N1bWVudCYmeSl7dmFyIFRhPU1hKCk7U2E9VGE/VGE6cGFyc2VJbnQoTmEsMTApfHx2b2lkIDA7fWVsc2UgU2E9dm9pZCAwO3ZhciBVYT1TYTt2YXIgVmE9ZnVuY3Rpb24oKXtpZighbC5hZGRFdmVudExpc3RlbmVyfHwhT2JqZWN0LmRlZmluZVByb3BlcnR5KXJldHVybiAhMTt2YXIgYT0hMSxiPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcInBhc3NpdmVcIix7Z2V0OmZ1bmN0aW9uKCl7YT0hMDt9fSk7dHJ5e2wuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RcIixhYSxiKSxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsYWEsYik7fWNhdGNoKGMpe31yZXR1cm4gYX0oKTtmdW5jdGlvbiB6KGEsYil7dGhpcy50eXBlPWE7dGhpcy5nPXRoaXMudGFyZ2V0PWI7dGhpcy5kZWZhdWx0UHJldmVudGVkPSExO316LnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwO307ZnVuY3Rpb24gQShhLGIpe3ouY2FsbCh0aGlzLGE/YS50eXBlOlwiXCIpO3RoaXMucmVsYXRlZFRhcmdldD10aGlzLmc9dGhpcy50YXJnZXQ9bnVsbDt0aGlzLmJ1dHRvbj10aGlzLnNjcmVlblk9dGhpcy5zY3JlZW5YPXRoaXMuY2xpZW50WT10aGlzLmNsaWVudFg9MDt0aGlzLmtleT1cIlwiO3RoaXMubWV0YUtleT10aGlzLnNoaWZ0S2V5PXRoaXMuYWx0S2V5PXRoaXMuY3RybEtleT0hMTt0aGlzLnN0YXRlPW51bGw7dGhpcy5wb2ludGVySWQ9MDt0aGlzLnBvaW50ZXJUeXBlPVwiXCI7dGhpcy5pPW51bGw7aWYoYSl7dmFyIGM9dGhpcy50eXBlPWEudHlwZSxkPWEuY2hhbmdlZFRvdWNoZXMmJmEuY2hhbmdlZFRvdWNoZXMubGVuZ3RoP2EuY2hhbmdlZFRvdWNoZXNbMF06bnVsbDt0aGlzLnRhcmdldD1hLnRhcmdldHx8YS5zcmNFbGVtZW50O3RoaXMuZz1iO2lmKGI9YS5yZWxhdGVkVGFyZ2V0KXtpZihLYSl7YTp7dHJ5e0NhKGIubm9kZU5hbWUpO3ZhciBlPSEwO2JyZWFrIGF9Y2F0Y2goZil7fWU9XG4hMTt9ZXx8KGI9bnVsbCk7fX1lbHNlIFwibW91c2VvdmVyXCI9PWM/Yj1hLmZyb21FbGVtZW50OlwibW91c2VvdXRcIj09YyYmKGI9YS50b0VsZW1lbnQpO3RoaXMucmVsYXRlZFRhcmdldD1iO2Q/KHRoaXMuY2xpZW50WD12b2lkIDAhPT1kLmNsaWVudFg/ZC5jbGllbnRYOmQucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWQuY2xpZW50WT9kLmNsaWVudFk6ZC5wYWdlWSx0aGlzLnNjcmVlblg9ZC5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1kLnNjcmVlbll8fDApOih0aGlzLmNsaWVudFg9dm9pZCAwIT09YS5jbGllbnRYP2EuY2xpZW50WDphLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1hLmNsaWVudFk/YS5jbGllbnRZOmEucGFnZVksdGhpcy5zY3JlZW5YPWEuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9YS5zY3JlZW5ZfHwwKTt0aGlzLmJ1dHRvbj1hLmJ1dHRvbjt0aGlzLmtleT1hLmtleXx8XCJcIjt0aGlzLmN0cmxLZXk9YS5jdHJsS2V5O3RoaXMuYWx0S2V5PWEuYWx0S2V5O3RoaXMuc2hpZnRLZXk9XG5hLnNoaWZ0S2V5O3RoaXMubWV0YUtleT1hLm1ldGFLZXk7dGhpcy5wb2ludGVySWQ9YS5wb2ludGVySWR8fDA7dGhpcy5wb2ludGVyVHlwZT1cInN0cmluZ1wiPT09dHlwZW9mIGEucG9pbnRlclR5cGU/YS5wb2ludGVyVHlwZTpXYVthLnBvaW50ZXJUeXBlXXx8XCJcIjt0aGlzLnN0YXRlPWEuc3RhdGU7dGhpcy5pPWE7YS5kZWZhdWx0UHJldmVudGVkJiZBLlouaC5jYWxsKHRoaXMpO319dChBLHopO3ZhciBXYT17MjpcInRvdWNoXCIsMzpcInBlblwiLDQ6XCJtb3VzZVwifTtBLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7QS5aLmguY2FsbCh0aGlzKTt2YXIgYT10aGlzLmk7YS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMTt9O3ZhciBCPVwiY2xvc3VyZV9saXN0ZW5hYmxlX1wiKygxRTYqTWF0aC5yYW5kb20oKXwwKTt2YXIgWGE9MDtmdW5jdGlvbiBZYShhLGIsYyxkLGUpe3RoaXMubGlzdGVuZXI9YTt0aGlzLnByb3h5PW51bGw7dGhpcy5zcmM9Yjt0aGlzLnR5cGU9Yzt0aGlzLmNhcHR1cmU9ISFkO3RoaXMuaWE9ZTt0aGlzLmtleT0rK1hhO3RoaXMuY2E9dGhpcy5mYT0hMTt9ZnVuY3Rpb24gWmEoYSl7YS5jYT0hMDthLmxpc3RlbmVyPW51bGw7YS5wcm94eT1udWxsO2Euc3JjPW51bGw7YS5pYT1udWxsO31mdW5jdGlvbiAkYShhKXt0aGlzLnNyYz1hO3RoaXMuZz17fTt0aGlzLmg9MDt9JGEucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWEudG9TdHJpbmcoKTthPXRoaXMuZ1tmXTthfHwoYT10aGlzLmdbZl09W10sdGhpcy5oKyspO3ZhciBoPWFiKGEsYixkLGUpOy0xPGg/KGI9YVtoXSxjfHwoYi5mYT0hMSkpOihiPW5ldyBZYShiLHRoaXMuc3JjLGYsISFkLGUpLGIuZmE9YyxhLnB1c2goYikpO3JldHVybiBifTtmdW5jdGlvbiBiYihhLGIpe3ZhciBjPWIudHlwZTtpZihjIGluIGEuZyl7dmFyIGQ9YS5nW2NdLGU9bWEoZCxiKSxmOyhmPTA8PWUpJiZBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZCxlLDEpO2YmJihaYShiKSwwPT1hLmdbY10ubGVuZ3RoJiYoZGVsZXRlIGEuZ1tjXSxhLmgtLSkpO319XG5mdW5jdGlvbiBhYihhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGEubGVuZ3RoOysrZSl7dmFyIGY9YVtlXTtpZighZi5jYSYmZi5saXN0ZW5lcj09YiYmZi5jYXB0dXJlPT0hIWMmJmYuaWE9PWQpcmV0dXJuIGV9cmV0dXJuIC0xfXZhciBjYj1cImNsb3N1cmVfbG1fXCIrKDFFNipNYXRoLnJhbmRvbSgpfDApLGRiPXt9O2Z1bmN0aW9uIGZiKGEsYixjLGQsZSl7aWYoZCYmZC5vbmNlKXJldHVybiBnYihhLGIsYyxkLGUpO2lmKEFycmF5LmlzQXJyYXkoYikpe2Zvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKWZiKGEsYltmXSxjLGQsZSk7cmV0dXJuIG51bGx9Yz1oYihjKTtyZXR1cm4gYSYmYVtCXT9hLk4oYixjLHAoZCk/ISFkLmNhcHR1cmU6ISFkLGUpOmliKGEsYixjLCExLGQsZSl9XG5mdW5jdGlvbiBpYihhLGIsYyxkLGUsZil7aWYoIWIpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHR5cGVcIik7dmFyIGg9cChlKT8hIWUuY2FwdHVyZTohIWUsbj1qYihhKTtufHwoYVtjYl09bj1uZXcgJGEoYSkpO2M9bi5hZGQoYixjLGQsaCxmKTtpZihjLnByb3h5KXJldHVybiBjO2Q9a2IoKTtjLnByb3h5PWQ7ZC5zcmM9YTtkLmxpc3RlbmVyPWM7aWYoYS5hZGRFdmVudExpc3RlbmVyKVZhfHwoZT1oKSx2b2lkIDA9PT1lJiYoZT0hMSksYS5hZGRFdmVudExpc3RlbmVyKGIudG9TdHJpbmcoKSxkLGUpO2Vsc2UgaWYoYS5hdHRhY2hFdmVudClhLmF0dGFjaEV2ZW50KGxiKGIudG9TdHJpbmcoKSksZCk7ZWxzZSBpZihhLmFkZExpc3RlbmVyJiZhLnJlbW92ZUxpc3RlbmVyKWEuYWRkTGlzdGVuZXIoZCk7ZWxzZSB0aHJvdyBFcnJvcihcImFkZEV2ZW50TGlzdGVuZXIgYW5kIGF0dGFjaEV2ZW50IGFyZSB1bmF2YWlsYWJsZS5cIik7cmV0dXJuIGN9XG5mdW5jdGlvbiBrYigpe2Z1bmN0aW9uIGEoYyl7cmV0dXJuIGIuY2FsbChhLnNyYyxhLmxpc3RlbmVyLGMpfXZhciBiPW1iO3JldHVybiBhfWZ1bmN0aW9uIGdiKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspZ2IoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPWhiKGMpO3JldHVybiBhJiZhW0JdP2EuTyhiLGMscChkKT8hIWQuY2FwdHVyZTohIWQsZSk6aWIoYSxiLGMsITAsZCxlKX1cbmZ1bmN0aW9uIG5iKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSlmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKyluYihhLGJbZl0sYyxkLGUpO2Vsc2UgKGQ9cChkKT8hIWQuY2FwdHVyZTohIWQsYz1oYihjKSxhJiZhW0JdKT8oYT1hLmksYj1TdHJpbmcoYikudG9TdHJpbmcoKSxiIGluIGEuZyYmKGY9YS5nW2JdLGM9YWIoZixjLGQsZSksLTE8YyYmKFphKGZbY10pLEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChmLGMsMSksMD09Zi5sZW5ndGgmJihkZWxldGUgYS5nW2JdLGEuaC0tKSkpKTphJiYoYT1qYihhKSkmJihiPWEuZ1tiLnRvU3RyaW5nKCldLGE9LTEsYiYmKGE9YWIoYixjLGQsZSkpLChjPS0xPGE/YlthXTpudWxsKSYmb2IoYykpO31cbmZ1bmN0aW9uIG9iKGEpe2lmKFwibnVtYmVyXCIhPT10eXBlb2YgYSYmYSYmIWEuY2Epe3ZhciBiPWEuc3JjO2lmKGImJmJbQl0pYmIoYi5pLGEpO2Vsc2Uge3ZhciBjPWEudHlwZSxkPWEucHJveHk7Yi5yZW1vdmVFdmVudExpc3RlbmVyP2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGQsYS5jYXB0dXJlKTpiLmRldGFjaEV2ZW50P2IuZGV0YWNoRXZlbnQobGIoYyksZCk6Yi5hZGRMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lcihkKTsoYz1qYihiKSk/KGJiKGMsYSksMD09Yy5oJiYoYy5zcmM9bnVsbCxiW2NiXT1udWxsKSk6WmEoYSk7fX19ZnVuY3Rpb24gbGIoYSl7cmV0dXJuIGEgaW4gZGI/ZGJbYV06ZGJbYV09XCJvblwiK2F9ZnVuY3Rpb24gbWIoYSxiKXtpZihhLmNhKWE9ITA7ZWxzZSB7Yj1uZXcgQShiLHRoaXMpO3ZhciBjPWEubGlzdGVuZXIsZD1hLmlhfHxhLnNyYzthLmZhJiZvYihhKTthPWMuY2FsbChkLGIpO31yZXR1cm4gYX1cbmZ1bmN0aW9uIGpiKGEpe2E9YVtjYl07cmV0dXJuIGEgaW5zdGFuY2VvZiAkYT9hOm51bGx9dmFyIHBiPVwiX19jbG9zdXJlX2V2ZW50c19mbl9cIisoMUU5Kk1hdGgucmFuZG9tKCk+Pj4wKTtmdW5jdGlvbiBoYihhKXtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSlyZXR1cm4gYTthW3BiXXx8KGFbcGJdPWZ1bmN0aW9uKGIpe3JldHVybiBhLmhhbmRsZUV2ZW50KGIpfSk7cmV0dXJuIGFbcGJdfWZ1bmN0aW9uIEMoKXt2LmNhbGwodGhpcyk7dGhpcy5pPW5ldyAkYSh0aGlzKTt0aGlzLlA9dGhpczt0aGlzLkk9bnVsbDt9dChDLHYpO0MucHJvdG90eXBlW0JdPSEwO0MucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7bmIodGhpcyxhLGIsYyxkKTt9O1xuZnVuY3Rpb24gRChhLGIpe3ZhciBjLGQ9YS5JO2lmKGQpZm9yKGM9W107ZDtkPWQuSSljLnB1c2goZCk7YT1hLlA7ZD1iLnR5cGV8fGI7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBiKWI9bmV3IHooYixhKTtlbHNlIGlmKGIgaW5zdGFuY2VvZiB6KWIudGFyZ2V0PWIudGFyZ2V0fHxhO2Vsc2Uge3ZhciBlPWI7Yj1uZXcgeihkLGEpO0FhKGIsZSk7fWU9ITA7aWYoYylmb3IodmFyIGY9Yy5sZW5ndGgtMTswPD1mO2YtLSl7dmFyIGg9Yi5nPWNbZl07ZT1xYihoLGQsITAsYikmJmU7fWg9Yi5nPWE7ZT1xYihoLGQsITAsYikmJmU7ZT1xYihoLGQsITEsYikmJmU7aWYoYylmb3IoZj0wO2Y8Yy5sZW5ndGg7ZisrKWg9Yi5nPWNbZl0sZT1xYihoLGQsITEsYikmJmU7fVxuQy5wcm90b3R5cGUuTT1mdW5jdGlvbigpe0MuWi5NLmNhbGwodGhpcyk7aWYodGhpcy5pKXt2YXIgYT10aGlzLmksYztmb3IoYyBpbiBhLmcpe2Zvcih2YXIgZD1hLmdbY10sZT0wO2U8ZC5sZW5ndGg7ZSsrKVphKGRbZV0pO2RlbGV0ZSBhLmdbY107YS5oLS07fX10aGlzLkk9bnVsbDt9O0MucHJvdG90eXBlLk49ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuaS5hZGQoU3RyaW5nKGEpLGIsITEsYyxkKX07Qy5wcm90b3R5cGUuTz1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5pLmFkZChTdHJpbmcoYSksYiwhMCxjLGQpfTtcbmZ1bmN0aW9uIHFiKGEsYixjLGQpe2I9YS5pLmdbU3RyaW5nKGIpXTtpZighYilyZXR1cm4gITA7Yj1iLmNvbmNhdCgpO2Zvcih2YXIgZT0hMCxmPTA7ZjxiLmxlbmd0aDsrK2Ype3ZhciBoPWJbZl07aWYoaCYmIWguY2EmJmguY2FwdHVyZT09Yyl7dmFyIG49aC5saXN0ZW5lcix1PWguaWF8fGguc3JjO2guZmEmJmJiKGEuaSxoKTtlPSExIT09bi5jYWxsKHUsZCkmJmU7fX1yZXR1cm4gZSYmIWQuZGVmYXVsdFByZXZlbnRlZH12YXIgcmI9bC5KU09OLnN0cmluZ2lmeTtmdW5jdGlvbiBzYigpe3ZhciBhPXRiO2xldCBiPW51bGw7YS5nJiYoYj1hLmcsYS5nPWEuZy5uZXh0LGEuZ3x8KGEuaD1udWxsKSxiLm5leHQ9bnVsbCk7cmV0dXJuIGJ9Y2xhc3MgdWJ7Y29uc3RydWN0b3IoKXt0aGlzLmg9dGhpcy5nPW51bGw7fWFkZChhLGIpe2NvbnN0IGM9dmIuZ2V0KCk7Yy5zZXQoYSxiKTt0aGlzLmg/dGhpcy5oLm5leHQ9Yzp0aGlzLmc9Yzt0aGlzLmg9Yzt9fXZhciB2Yj1uZXcgY2xhc3N7Y29uc3RydWN0b3IoYSxiKXt0aGlzLmk9YTt0aGlzLmo9Yjt0aGlzLmg9MDt0aGlzLmc9bnVsbDt9Z2V0KCl7bGV0IGE7MDx0aGlzLmg/KHRoaXMuaC0tLGE9dGhpcy5nLHRoaXMuZz1hLm5leHQsYS5uZXh0PW51bGwpOmE9dGhpcy5pKCk7cmV0dXJuIGF9fSgoKT0+bmV3IHdiLGE9PmEucmVzZXQoKSk7XG5jbGFzcyB3Yntjb25zdHJ1Y3Rvcigpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fXNldChhLGIpe3RoaXMuaD1hO3RoaXMuZz1iO3RoaXMubmV4dD1udWxsO31yZXNldCgpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fX1mdW5jdGlvbiB5YihhKXtsLnNldFRpbWVvdXQoKCk9Pnt0aHJvdyBhO30sMCk7fWZ1bmN0aW9uIHpiKGEsYil7QWJ8fEJiKCk7Q2J8fChBYigpLENiPSEwKTt0Yi5hZGQoYSxiKTt9dmFyIEFiO2Z1bmN0aW9uIEJiKCl7dmFyIGE9bC5Qcm9taXNlLnJlc29sdmUodm9pZCAwKTtBYj1mdW5jdGlvbigpe2EudGhlbihEYik7fTt9dmFyIENiPSExLHRiPW5ldyB1YjtmdW5jdGlvbiBEYigpe2Zvcih2YXIgYTthPXNiKCk7KXt0cnl7YS5oLmNhbGwoYS5nKTt9Y2F0Y2goYyl7eWIoYyk7fXZhciBiPXZiO2IuaihhKTsxMDA+Yi5oJiYoYi5oKyssYS5uZXh0PWIuZyxiLmc9YSk7fUNiPSExO31mdW5jdGlvbiBFYihhLGIpe0MuY2FsbCh0aGlzKTt0aGlzLmg9YXx8MTt0aGlzLmc9Ynx8bDt0aGlzLmo9cSh0aGlzLmtiLHRoaXMpO3RoaXMubD1EYXRlLm5vdygpO310KEViLEMpO2s9RWIucHJvdG90eXBlO2suZGE9ITE7ay5TPW51bGw7ay5rYj1mdW5jdGlvbigpe2lmKHRoaXMuZGEpe3ZhciBhPURhdGUubm93KCktdGhpcy5sOzA8YSYmYTwuOCp0aGlzLmg/dGhpcy5TPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgtYSk6KHRoaXMuUyYmKHRoaXMuZy5jbGVhclRpbWVvdXQodGhpcy5TKSx0aGlzLlM9bnVsbCksRCh0aGlzLFwidGlja1wiKSx0aGlzLmRhJiYoRmIodGhpcyksdGhpcy5zdGFydCgpKSk7fX07ay5zdGFydD1mdW5jdGlvbigpe3RoaXMuZGE9ITA7dGhpcy5TfHwodGhpcy5TPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgpLHRoaXMubD1EYXRlLm5vdygpKTt9O1xuZnVuY3Rpb24gRmIoYSl7YS5kYT0hMTthLlMmJihhLmcuY2xlYXJUaW1lb3V0KGEuUyksYS5TPW51bGwpO31rLk09ZnVuY3Rpb24oKXtFYi5aLk0uY2FsbCh0aGlzKTtGYih0aGlzKTtkZWxldGUgdGhpcy5nO307ZnVuY3Rpb24gR2IoYSxiLGMpe2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKWMmJihhPXEoYSxjKSk7ZWxzZSBpZihhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmhhbmRsZUV2ZW50KWE9cShhLmhhbmRsZUV2ZW50LGEpO2Vsc2UgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGxpc3RlbmVyIGFyZ3VtZW50XCIpO3JldHVybiAyMTQ3NDgzNjQ3PE51bWJlcihiKT8tMTpsLnNldFRpbWVvdXQoYSxifHwwKX1mdW5jdGlvbiBIYihhKXthLmc9R2IoKCk9PnthLmc9bnVsbDthLmkmJihhLmk9ITEsSGIoYSkpO30sYS5qKTtjb25zdCBiPWEuaDthLmg9bnVsbDthLm0uYXBwbHkobnVsbCxiKTt9Y2xhc3MgSWIgZXh0ZW5kcyB2e2NvbnN0cnVjdG9yKGEsYil7c3VwZXIoKTt0aGlzLm09YTt0aGlzLmo9Yjt0aGlzLmg9bnVsbDt0aGlzLmk9ITE7dGhpcy5nPW51bGw7fWwoYSl7dGhpcy5oPWFyZ3VtZW50czt0aGlzLmc/dGhpcy5pPSEwOkhiKHRoaXMpO31NKCl7c3VwZXIuTSgpO3RoaXMuZyYmKGwuY2xlYXJUaW1lb3V0KHRoaXMuZyksdGhpcy5nPW51bGwsdGhpcy5pPSExLHRoaXMuaD1udWxsKTt9fWZ1bmN0aW9uIEUoYSl7di5jYWxsKHRoaXMpO3RoaXMuaD1hO3RoaXMuZz17fTt9dChFLHYpO3ZhciBKYj1bXTtmdW5jdGlvbiBLYihhLGIsYyxkKXtBcnJheS5pc0FycmF5KGMpfHwoYyYmKEpiWzBdPWMudG9TdHJpbmcoKSksYz1KYik7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWZiKGIsY1tlXSxkfHxhLmhhbmRsZUV2ZW50LCExLGEuaHx8YSk7aWYoIWYpYnJlYWs7YS5nW2Yua2V5XT1mO319ZnVuY3Rpb24gTGIoYSl7eGEoYS5nLGZ1bmN0aW9uKGIsYyl7dGhpcy5nLmhhc093blByb3BlcnR5KGMpJiZvYihiKTt9LGEpO2EuZz17fTt9RS5wcm90b3R5cGUuTT1mdW5jdGlvbigpe0UuWi5NLmNhbGwodGhpcyk7TGIodGhpcyk7fTtFLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbigpe3Rocm93IEVycm9yKFwiRXZlbnRIYW5kbGVyLmhhbmRsZUV2ZW50IG5vdCBpbXBsZW1lbnRlZFwiKTt9O2Z1bmN0aW9uIE1iKCl7dGhpcy5nPSEwO31NYi5wcm90b3R5cGUuQWE9ZnVuY3Rpb24oKXt0aGlzLmc9ITE7fTtmdW5jdGlvbiBOYihhLGIsYyxkLGUsZil7YS5pbmZvKGZ1bmN0aW9uKCl7aWYoYS5nKWlmKGYpe3ZhciBoPVwiXCI7Zm9yKHZhciBuPWYuc3BsaXQoXCImXCIpLHU9MDt1PG4ubGVuZ3RoO3UrKyl7dmFyIG09blt1XS5zcGxpdChcIj1cIik7aWYoMTxtLmxlbmd0aCl7dmFyIHI9bVswXTttPW1bMV07dmFyIEc9ci5zcGxpdChcIl9cIik7aD0yPD1HLmxlbmd0aCYmXCJ0eXBlXCI9PUdbMV0/aCsocitcIj1cIittK1wiJlwiKTpoKyhyK1wiPXJlZGFjdGVkJlwiKTt9fX1lbHNlIGg9bnVsbDtlbHNlIGg9ZjtyZXR1cm4gXCJYTUxIVFRQIFJFUSAoXCIrZCtcIikgW2F0dGVtcHQgXCIrZStcIl06IFwiK2IrXCJcXG5cIitjK1wiXFxuXCIraH0pO31cbmZ1bmN0aW9uIE9iKGEsYixjLGQsZSxmLGgpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgUkVTUCAoXCIrZCtcIikgWyBhdHRlbXB0IFwiK2UrXCJdOiBcIitiK1wiXFxuXCIrYytcIlxcblwiK2YrXCIgXCIraH0pO31mdW5jdGlvbiBGKGEsYixjLGQpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgVEVYVCAoXCIrYitcIik6IFwiK1BiKGEsYykrKGQ/XCIgXCIrZDpcIlwiKX0pO31mdW5jdGlvbiBRYihhLGIpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlRJTUVPVVQ6IFwiK2J9KTt9TWIucHJvdG90eXBlLmluZm89ZnVuY3Rpb24oKXt9O1xuZnVuY3Rpb24gUGIoYSxiKXtpZighYS5nKXJldHVybiBiO2lmKCFiKXJldHVybiBudWxsO3RyeXt2YXIgYz1KU09OLnBhcnNlKGIpO2lmKGMpZm9yKGE9MDthPGMubGVuZ3RoO2ErKylpZihBcnJheS5pc0FycmF5KGNbYV0pKXt2YXIgZD1jW2FdO2lmKCEoMj5kLmxlbmd0aCkpe3ZhciBlPWRbMV07aWYoQXJyYXkuaXNBcnJheShlKSYmISgxPmUubGVuZ3RoKSl7dmFyIGY9ZVswXTtpZihcIm5vb3BcIiE9ZiYmXCJzdG9wXCIhPWYmJlwiY2xvc2VcIiE9Zilmb3IodmFyIGg9MTtoPGUubGVuZ3RoO2grKyllW2hdPVwiXCI7fX19cmV0dXJuIHJiKGMpfWNhdGNoKG4pe3JldHVybiBifX12YXIgSD17fSxSYj1udWxsO2Z1bmN0aW9uIFNiKCl7cmV0dXJuIFJiPVJifHxuZXcgQ31ILk1hPVwic2VydmVycmVhY2hhYmlsaXR5XCI7ZnVuY3Rpb24gVGIoYSl7ei5jYWxsKHRoaXMsSC5NYSxhKTt9dChUYix6KTtmdW5jdGlvbiBJKGEpe2NvbnN0IGI9U2IoKTtEKGIsbmV3IFRiKGIsYSkpO31ILlNUQVRfRVZFTlQ9XCJzdGF0ZXZlbnRcIjtmdW5jdGlvbiBVYihhLGIpe3ouY2FsbCh0aGlzLEguU1RBVF9FVkVOVCxhKTt0aGlzLnN0YXQ9Yjt9dChVYix6KTtmdW5jdGlvbiBKKGEpe2NvbnN0IGI9U2IoKTtEKGIsbmV3IFViKGIsYSkpO31ILk5hPVwidGltaW5nZXZlbnRcIjtmdW5jdGlvbiBWYihhLGIpe3ouY2FsbCh0aGlzLEguTmEsYSk7dGhpcy5zaXplPWI7fXQoVmIseik7XG5mdW5jdGlvbiBLKGEsYil7aWYoXCJmdW5jdGlvblwiIT09dHlwZW9mIGEpdGhyb3cgRXJyb3IoXCJGbiBtdXN0IG5vdCBiZSBudWxsIGFuZCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIGwuc2V0VGltZW91dChmdW5jdGlvbigpe2EoKTt9LGIpfXZhciBXYj17Tk9fRVJST1I6MCxsYjoxLHliOjIseGI6MyxzYjo0LHdiOjUsemI6NixKYTo3LFRJTUVPVVQ6OCxDYjo5fTt2YXIgWGI9e3FiOlwiY29tcGxldGVcIixNYjpcInN1Y2Nlc3NcIixLYTpcImVycm9yXCIsSmE6XCJhYm9ydFwiLEViOlwicmVhZHlcIixGYjpcInJlYWR5c3RhdGVjaGFuZ2VcIixUSU1FT1VUOlwidGltZW91dFwiLEFiOlwiaW5jcmVtZW50YWxkYXRhXCIsRGI6XCJwcm9ncmVzc1wiLHRiOlwiZG93bmxvYWRwcm9ncmVzc1wiLFViOlwidXBsb2FkcHJvZ3Jlc3NcIn07ZnVuY3Rpb24gWWIoKXt9WWIucHJvdG90eXBlLmg9bnVsbDtmdW5jdGlvbiBaYihhKXtyZXR1cm4gYS5ofHwoYS5oPWEuaSgpKX1mdW5jdGlvbiAkYigpe312YXIgTD17T1BFTjpcImFcIixwYjpcImJcIixLYTpcImNcIixCYjpcImRcIn07ZnVuY3Rpb24gYWMoKXt6LmNhbGwodGhpcyxcImRcIik7fXQoYWMseik7ZnVuY3Rpb24gYmMoKXt6LmNhbGwodGhpcyxcImNcIik7fXQoYmMseik7dmFyIGNjO2Z1bmN0aW9uIGRjKCl7fXQoZGMsWWIpO2RjLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH07ZGMucHJvdG90eXBlLmk9ZnVuY3Rpb24oKXtyZXR1cm4ge319O2NjPW5ldyBkYztmdW5jdGlvbiBNKGEsYixjLGQpe3RoaXMubD1hO3RoaXMuaj1iO3RoaXMubT1jO3RoaXMuWD1kfHwxO3RoaXMuVj1uZXcgRSh0aGlzKTt0aGlzLlA9ZWM7YT1KYT8xMjU6dm9pZCAwO3RoaXMuVz1uZXcgRWIoYSk7dGhpcy5IPW51bGw7dGhpcy5pPSExO3RoaXMucz10aGlzLkE9dGhpcy52PXRoaXMuSz10aGlzLkY9dGhpcy5ZPXRoaXMuQj1udWxsO3RoaXMuRD1bXTt0aGlzLmc9bnVsbDt0aGlzLkM9MDt0aGlzLm89dGhpcy51PW51bGw7dGhpcy5OPS0xO3RoaXMuST0hMTt0aGlzLk89MDt0aGlzLkw9bnVsbDt0aGlzLmFhPXRoaXMuSj10aGlzLiQ9dGhpcy5VPSExO3RoaXMuaD1uZXcgZmM7fWZ1bmN0aW9uIGZjKCl7dGhpcy5pPW51bGw7dGhpcy5nPVwiXCI7dGhpcy5oPSExO312YXIgZWM9NDVFMyxnYz17fSxoYz17fTtrPU0ucHJvdG90eXBlO2suc2V0VGltZW91dD1mdW5jdGlvbihhKXt0aGlzLlA9YTt9O1xuZnVuY3Rpb24gaWMoYSxiLGMpe2EuSz0xO2Eudj1qYyhOKGIpKTthLnM9YzthLlU9ITA7a2MoYSxudWxsKTt9ZnVuY3Rpb24ga2MoYSxiKXthLkY9RGF0ZS5ub3coKTtsYyhhKTthLkE9TihhLnYpO3ZhciBjPWEuQSxkPWEuWDtBcnJheS5pc0FycmF5KGQpfHwoZD1bU3RyaW5nKGQpXSk7bWMoYy5oLFwidFwiLGQpO2EuQz0wO2M9YS5sLkg7YS5oPW5ldyBmYzthLmc9bmMoYS5sLGM/YjpudWxsLCFhLnMpOzA8YS5PJiYoYS5MPW5ldyBJYihxKGEuSWEsYSxhLmcpLGEuTykpO0tiKGEuVixhLmcsXCJyZWFkeXN0YXRlY2hhbmdlXCIsYS5nYik7Yj1hLkg/eWEoYS5IKTp7fTthLnM/KGEudXx8KGEudT1cIlBPU1RcIiksYltcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLGEuZy5lYShhLkEsYS51LGEucyxiKSk6KGEudT1cIkdFVFwiLGEuZy5lYShhLkEsYS51LG51bGwsYikpO0koMSk7TmIoYS5qLGEudSxhLkEsYS5tLGEuWCxhLnMpO31cbmsuZ2I9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDtjb25zdCBiPXRoaXMuTDtiJiYzPT1PKGEpP2IubCgpOnRoaXMuSWEoYSk7fTtcbmsuSWE9ZnVuY3Rpb24oYSl7dHJ5e2lmKGE9PXRoaXMuZylhOntjb25zdCByPU8odGhpcy5nKTt2YXIgYj10aGlzLmcuRGEoKTtjb25zdCBHPXRoaXMuZy5iYSgpO2lmKCEoMz5yKSYmKDMhPXJ8fEphfHx0aGlzLmcmJih0aGlzLmguaHx8dGhpcy5nLmdhKCl8fG9jKHRoaXMuZykpKSl7dGhpcy5JfHw0IT1yfHw3PT1ifHwoOD09Ynx8MD49Rz9JKDMpOkkoMikpO3BjKHRoaXMpO3ZhciBjPXRoaXMuZy5iYSgpO3RoaXMuTj1jO2I6aWYocWModGhpcykpe3ZhciBkPW9jKHRoaXMuZyk7YT1cIlwiO3ZhciBlPWQubGVuZ3RoLGY9ND09Tyh0aGlzLmcpO2lmKCF0aGlzLmguaSl7aWYoXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBUZXh0RGVjb2Rlcil7UCh0aGlzKTtyYyh0aGlzKTt2YXIgaD1cIlwiO2JyZWFrIGJ9dGhpcy5oLmk9bmV3IGwuVGV4dERlY29kZXI7fWZvcihiPTA7YjxlO2IrKyl0aGlzLmguaD0hMCxhKz10aGlzLmguaS5kZWNvZGUoZFtiXSx7c3RyZWFtOmYmJmI9PWUtMX0pO2Quc3BsaWNlKDAsXG5lKTt0aGlzLmguZys9YTt0aGlzLkM9MDtoPXRoaXMuaC5nO31lbHNlIGg9dGhpcy5nLmdhKCk7dGhpcy5pPTIwMD09YztPYih0aGlzLmosdGhpcy51LHRoaXMuQSx0aGlzLm0sdGhpcy5YLHIsYyk7aWYodGhpcy5pKXtpZih0aGlzLiQmJiF0aGlzLkope2I6e2lmKHRoaXMuZyl7dmFyIG4sdT10aGlzLmc7aWYoKG49dS5nP3UuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtSFRUUC1Jbml0aWFsLVJlc3BvbnNlXCIpOm51bGwpJiYhc2Eobikpe3ZhciBtPW47YnJlYWsgYn19bT1udWxsO31pZihjPW0pRih0aGlzLmosdGhpcy5tLGMsXCJJbml0aWFsIGhhbmRzaGFrZSByZXNwb25zZSB2aWEgWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIiksdGhpcy5KPSEwLHNjKHRoaXMsYyk7ZWxzZSB7dGhpcy5pPSExO3RoaXMubz0zO0ooMTIpO1AodGhpcyk7cmModGhpcyk7YnJlYWsgYX19dGhpcy5VPyh0Yyh0aGlzLHIsaCksSmEmJnRoaXMuaSYmMz09ciYmKEtiKHRoaXMuVix0aGlzLlcsXCJ0aWNrXCIsdGhpcy5mYiksXG50aGlzLlcuc3RhcnQoKSkpOihGKHRoaXMuaix0aGlzLm0saCxudWxsKSxzYyh0aGlzLGgpKTs0PT1yJiZQKHRoaXMpO3RoaXMuaSYmIXRoaXMuSSYmKDQ9PXI/dWModGhpcy5sLHRoaXMpOih0aGlzLmk9ITEsbGModGhpcykpKTt9ZWxzZSA0MDA9PWMmJjA8aC5pbmRleE9mKFwiVW5rbm93biBTSURcIik/KHRoaXMubz0zLEooMTIpKToodGhpcy5vPTAsSigxMykpLFAodGhpcykscmModGhpcyk7fX19Y2F0Y2gocil7fWZpbmFsbHl7fX07ZnVuY3Rpb24gcWMoYSl7cmV0dXJuIGEuZz9cIkdFVFwiPT1hLnUmJjIhPWEuSyYmYS5sLkJhOiExfVxuZnVuY3Rpb24gdGMoYSxiLGMpe2xldCBkPSEwLGU7Zm9yKDshYS5JJiZhLkM8Yy5sZW5ndGg7KWlmKGU9dmMoYSxjKSxlPT1oYyl7ND09YiYmKGEubz00LEooMTQpLGQ9ITEpO0YoYS5qLGEubSxudWxsLFwiW0luY29tcGxldGUgUmVzcG9uc2VdXCIpO2JyZWFrfWVsc2UgaWYoZT09Z2Mpe2Eubz00O0ooMTUpO0YoYS5qLGEubSxjLFwiW0ludmFsaWQgQ2h1bmtdXCIpO2Q9ITE7YnJlYWt9ZWxzZSBGKGEuaixhLm0sZSxudWxsKSxzYyhhLGUpO3FjKGEpJiZlIT1oYyYmZSE9Z2MmJihhLmguZz1cIlwiLGEuQz0wKTs0IT1ifHwwIT1jLmxlbmd0aHx8YS5oLmh8fChhLm89MSxKKDE2KSxkPSExKTthLmk9YS5pJiZkO2Q/MDxjLmxlbmd0aCYmIWEuYWEmJihhLmFhPSEwLGI9YS5sLGIuZz09YSYmYi4kJiYhYi5MJiYoYi5oLmluZm8oXCJHcmVhdCwgbm8gYnVmZmVyaW5nIHByb3h5IGRldGVjdGVkLiBCeXRlcyByZWNlaXZlZDogXCIrYy5sZW5ndGgpLHdjKGIpLGIuTD0hMCxKKDExKSkpOihGKGEuaixhLm0sXG5jLFwiW0ludmFsaWQgQ2h1bmtlZCBSZXNwb25zZV1cIiksUChhKSxyYyhhKSk7fWsuZmI9ZnVuY3Rpb24oKXtpZih0aGlzLmcpe3ZhciBhPU8odGhpcy5nKSxiPXRoaXMuZy5nYSgpO3RoaXMuQzxiLmxlbmd0aCYmKHBjKHRoaXMpLHRjKHRoaXMsYSxiKSx0aGlzLmkmJjQhPWEmJmxjKHRoaXMpKTt9fTtmdW5jdGlvbiB2YyhhLGIpe3ZhciBjPWEuQyxkPWIuaW5kZXhPZihcIlxcblwiLGMpO2lmKC0xPT1kKXJldHVybiBoYztjPU51bWJlcihiLnN1YnN0cmluZyhjLGQpKTtpZihpc05hTihjKSlyZXR1cm4gZ2M7ZCs9MTtpZihkK2M+Yi5sZW5ndGgpcmV0dXJuIGhjO2I9Yi5zdWJzdHIoZCxjKTthLkM9ZCtjO3JldHVybiBifWsuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5JPSEwO1AodGhpcyk7fTtmdW5jdGlvbiBsYyhhKXthLlk9RGF0ZS5ub3coKSthLlA7eGMoYSxhLlApO31cbmZ1bmN0aW9uIHhjKGEsYil7aWYobnVsbCE9YS5CKXRocm93IEVycm9yKFwiV2F0Y2hEb2cgdGltZXIgbm90IG51bGxcIik7YS5CPUsocShhLmViLGEpLGIpO31mdW5jdGlvbiBwYyhhKXthLkImJihsLmNsZWFyVGltZW91dChhLkIpLGEuQj1udWxsKTt9ay5lYj1mdW5jdGlvbigpe3RoaXMuQj1udWxsO2NvbnN0IGE9RGF0ZS5ub3coKTswPD1hLXRoaXMuWT8oUWIodGhpcy5qLHRoaXMuQSksMiE9dGhpcy5LJiYoSSgzKSxKKDE3KSksUCh0aGlzKSx0aGlzLm89MixyYyh0aGlzKSk6eGModGhpcyx0aGlzLlktYSk7fTtmdW5jdGlvbiByYyhhKXswPT1hLmwuR3x8YS5JfHx1YyhhLmwsYSk7fWZ1bmN0aW9uIFAoYSl7cGMoYSk7dmFyIGI9YS5MO2ImJlwiZnVuY3Rpb25cIj09dHlwZW9mIGIubmEmJmIubmEoKTthLkw9bnVsbDtGYihhLlcpO0xiKGEuVik7YS5nJiYoYj1hLmcsYS5nPW51bGwsYi5hYm9ydCgpLGIubmEoKSk7fVxuZnVuY3Rpb24gc2MoYSxiKXt0cnl7dmFyIGM9YS5sO2lmKDAhPWMuRyYmKGMuZz09YXx8eWMoYy5pLGEpKSlpZihjLkk9YS5OLCFhLkomJnljKGMuaSxhKSYmMz09Yy5HKXt0cnl7dmFyIGQ9Yy5DYS5nLnBhcnNlKGIpO31jYXRjaChtKXtkPW51bGw7fWlmKEFycmF5LmlzQXJyYXkoZCkmJjM9PWQubGVuZ3RoKXt2YXIgZT1kO2lmKDA9PWVbMF0pYTp7aWYoIWMudSl7aWYoYy5nKWlmKGMuZy5GKzNFMzxhLkYpemMoYyksQWMoYyk7ZWxzZSBicmVhayBhO0JjKGMpO0ooMTgpO319ZWxzZSBjLnRhPWVbMV0sMDxjLnRhLWMuVSYmMzc1MDA+ZVsyXSYmYy5OJiYwPT1jLkEmJiFjLnYmJihjLnY9SyhxKGMuYWIsYyksNkUzKSk7aWYoMT49Q2MoYy5pKSYmYy5rYSl7dHJ5e2Mua2EoKTt9Y2F0Y2gobSl7fWMua2E9dm9pZCAwO319ZWxzZSBRKGMsMTEpO31lbHNlIGlmKChhLkp8fGMuZz09YSkmJnpjKGMpLCFzYShiKSlmb3IoZT1jLkNhLmcucGFyc2UoYiksYj0wO2I8ZS5sZW5ndGg7YisrKXtsZXQgbT1lW2JdO1xuYy5VPW1bMF07bT1tWzFdO2lmKDI9PWMuRylpZihcImNcIj09bVswXSl7Yy5KPW1bMV07Yy5sYT1tWzJdO2NvbnN0IHI9bVszXTtudWxsIT1yJiYoYy5tYT1yLGMuaC5pbmZvKFwiVkVSPVwiK2MubWEpKTtjb25zdCBHPW1bNF07bnVsbCE9RyYmKGMuemE9RyxjLmguaW5mbyhcIlNWRVI9XCIrYy56YSkpO2NvbnN0IERhPW1bNV07bnVsbCE9RGEmJlwibnVtYmVyXCI9PT10eXBlb2YgRGEmJjA8RGEmJihkPTEuNSpEYSxjLks9ZCxjLmguaW5mbyhcImJhY2tDaGFubmVsUmVxdWVzdFRpbWVvdXRNc189XCIrZCkpO2Q9Yztjb25zdCBjYT1hLmc7aWYoY2Epe2NvbnN0IEVhPWNhLmc/Y2EuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIik6bnVsbDtpZihFYSl7dmFyIGY9ZC5pOyFmLmcmJih3KEVhLFwic3BkeVwiKXx8dyhFYSxcInF1aWNcIil8fHcoRWEsXCJoMlwiKSkmJihmLmo9Zi5sLGYuZz1uZXcgU2V0LGYuaCYmKERjKGYsZi5oKSxmLmg9bnVsbCkpO31pZihkLkQpe2NvbnN0IHhiPVxuY2EuZz9jYS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1IVFRQLVNlc3Npb24tSWRcIik6bnVsbDt4YiYmKGQuc2E9eGIsUihkLkYsZC5ELHhiKSk7fX1jLkc9MztjLmomJmMuai54YSgpO2MuJCYmKGMuTz1EYXRlLm5vdygpLWEuRixjLmguaW5mbyhcIkhhbmRzaGFrZSBSVFQ6IFwiK2MuTytcIm1zXCIpKTtkPWM7dmFyIGg9YTtkLm9hPUVjKGQsZC5IP2QubGE6bnVsbCxkLlcpO2lmKGguSil7RmMoZC5pLGgpO3ZhciBuPWgsdT1kLks7dSYmbi5zZXRUaW1lb3V0KHUpO24uQiYmKHBjKG4pLGxjKG4pKTtkLmc9aDt9ZWxzZSBHYyhkKTswPGMubC5sZW5ndGgmJkhjKGMpO31lbHNlIFwic3RvcFwiIT1tWzBdJiZcImNsb3NlXCIhPW1bMF18fFEoYyw3KTtlbHNlIDM9PWMuRyYmKFwic3RvcFwiPT1tWzBdfHxcImNsb3NlXCI9PW1bMF0/XCJzdG9wXCI9PW1bMF0/UShjLDcpOkljKGMpOlwibm9vcFwiIT1tWzBdJiZjLmomJmMuai53YShtKSxjLkE9MCk7fUkoNCk7fWNhdGNoKG0pe319ZnVuY3Rpb24gSmMoYSl7aWYoYS5SJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlIpcmV0dXJuIGEuUigpO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gYS5zcGxpdChcIlwiKTtpZihiYShhKSl7Zm9yKHZhciBiPVtdLGM9YS5sZW5ndGgsZD0wO2Q8YztkKyspYi5wdXNoKGFbZF0pO3JldHVybiBifWI9W107Yz0wO2ZvcihkIGluIGEpYltjKytdPWFbZF07cmV0dXJuIGJ9XG5mdW5jdGlvbiBLYyhhLGIpe2lmKGEuZm9yRWFjaCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5mb3JFYWNoKWEuZm9yRWFjaChiLHZvaWQgMCk7ZWxzZSBpZihiYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKW5hKGEsYix2b2lkIDApO2Vsc2Uge2lmKGEuVCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5UKXZhciBjPWEuVCgpO2Vsc2UgaWYoYS5SJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlIpYz12b2lkIDA7ZWxzZSBpZihiYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKXtjPVtdO2Zvcih2YXIgZD1hLmxlbmd0aCxlPTA7ZTxkO2UrKyljLnB1c2goZSk7fWVsc2UgZm9yKGUgaW4gYz1bXSxkPTAsYSljW2QrK109ZTtkPUpjKGEpO2U9ZC5sZW5ndGg7Zm9yKHZhciBmPTA7ZjxlO2YrKyliLmNhbGwodm9pZCAwLGRbZl0sYyYmY1tmXSxhKTt9fWZ1bmN0aW9uIFMoYSxiKXt0aGlzLmg9e307dGhpcy5nPVtdO3RoaXMuaT0wO3ZhciBjPWFyZ3VtZW50cy5sZW5ndGg7aWYoMTxjKXtpZihjJTIpdGhyb3cgRXJyb3IoXCJVbmV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50c1wiKTtmb3IodmFyIGQ9MDtkPGM7ZCs9Mil0aGlzLnNldChhcmd1bWVudHNbZF0sYXJndW1lbnRzW2QrMV0pO31lbHNlIGlmKGEpaWYoYSBpbnN0YW5jZW9mIFMpZm9yKGM9YS5UKCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXRoaXMuc2V0KGNbZF0sYS5nZXQoY1tkXSkpO2Vsc2UgZm9yKGQgaW4gYSl0aGlzLnNldChkLGFbZF0pO31rPVMucHJvdG90eXBlO2suUj1mdW5jdGlvbigpe0xjKHRoaXMpO2Zvcih2YXIgYT1bXSxiPTA7Yjx0aGlzLmcubGVuZ3RoO2IrKylhLnB1c2godGhpcy5oW3RoaXMuZ1tiXV0pO3JldHVybiBhfTtrLlQ9ZnVuY3Rpb24oKXtMYyh0aGlzKTtyZXR1cm4gdGhpcy5nLmNvbmNhdCgpfTtcbmZ1bmN0aW9uIExjKGEpe2lmKGEuaSE9YS5nLmxlbmd0aCl7Zm9yKHZhciBiPTAsYz0wO2I8YS5nLmxlbmd0aDspe3ZhciBkPWEuZ1tiXTtUKGEuaCxkKSYmKGEuZ1tjKytdPWQpO2IrKzt9YS5nLmxlbmd0aD1jO31pZihhLmkhPWEuZy5sZW5ndGgpe3ZhciBlPXt9O2ZvcihjPWI9MDtiPGEuZy5sZW5ndGg7KWQ9YS5nW2JdLFQoZSxkKXx8KGEuZ1tjKytdPWQsZVtkXT0xKSxiKys7YS5nLmxlbmd0aD1jO319ay5nZXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVCh0aGlzLmgsYSk/dGhpcy5oW2FdOmJ9O2suc2V0PWZ1bmN0aW9uKGEsYil7VCh0aGlzLmgsYSl8fCh0aGlzLmkrKyx0aGlzLmcucHVzaChhKSk7dGhpcy5oW2FdPWI7fTtrLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5UKCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdLGY9dGhpcy5nZXQoZSk7YS5jYWxsKGIsZixlLHRoaXMpO319O1xuZnVuY3Rpb24gVChhLGIpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxiKX12YXIgTWM9L14oPzooW146Lz8jLl0rKTopPyg/OlxcL1xcLyg/OihbXlxcXFwvPyNdKilAKT8oW15cXFxcLz8jXSo/KSg/OjooWzAtOV0rKSk/KD89W1xcXFwvPyNdfCQpKT8oW14/I10rKT8oPzpcXD8oW14jXSopKT8oPzojKFtcXHNcXFNdKikpPyQvO2Z1bmN0aW9uIE5jKGEsYil7aWYoYSl7YT1hLnNwbGl0KFwiJlwiKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YVtjXS5pbmRleE9mKFwiPVwiKSxlPW51bGw7aWYoMDw9ZCl7dmFyIGY9YVtjXS5zdWJzdHJpbmcoMCxkKTtlPWFbY10uc3Vic3RyaW5nKGQrMSk7fWVsc2UgZj1hW2NdO2IoZixlP2RlY29kZVVSSUNvbXBvbmVudChlLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSk6XCJcIik7fX19ZnVuY3Rpb24gVShhLGIpe3RoaXMuaT10aGlzLnM9dGhpcy5qPVwiXCI7dGhpcy5tPW51bGw7dGhpcy5vPXRoaXMubD1cIlwiO3RoaXMuZz0hMTtpZihhIGluc3RhbmNlb2YgVSl7dGhpcy5nPXZvaWQgMCE9PWI/YjphLmc7T2ModGhpcyxhLmopO3RoaXMucz1hLnM7UGModGhpcyxhLmkpO1FjKHRoaXMsYS5tKTt0aGlzLmw9YS5sO2I9YS5oO3ZhciBjPW5ldyBSYztjLmk9Yi5pO2IuZyYmKGMuZz1uZXcgUyhiLmcpLGMuaD1iLmgpO1NjKHRoaXMsYyk7dGhpcy5vPWEubzt9ZWxzZSBhJiYoYz1TdHJpbmcoYSkubWF0Y2goTWMpKT8odGhpcy5nPSEhYixPYyh0aGlzLGNbMV18fFwiXCIsITApLHRoaXMucz1UYyhjWzJdfHxcIlwiKSxQYyh0aGlzLGNbM118fFwiXCIsITApLFFjKHRoaXMsY1s0XSksdGhpcy5sPVRjKGNbNV18fFwiXCIsITApLFNjKHRoaXMsY1s2XXx8XCJcIiwhMCksdGhpcy5vPVRjKGNbN118fFwiXCIpKToodGhpcy5nPSEhYix0aGlzLmg9bmV3IFJjKG51bGwsdGhpcy5nKSk7fVxuVS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXMuajtiJiZhLnB1c2goVWMoYixWYywhMCksXCI6XCIpO3ZhciBjPXRoaXMuaTtpZihjfHxcImZpbGVcIj09YilhLnB1c2goXCIvL1wiKSwoYj10aGlzLnMpJiZhLnB1c2goVWMoYixWYywhMCksXCJAXCIpLGEucHVzaChlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGM9dGhpcy5tLG51bGwhPWMmJmEucHVzaChcIjpcIixTdHJpbmcoYykpO2lmKGM9dGhpcy5sKXRoaXMuaSYmXCIvXCIhPWMuY2hhckF0KDApJiZhLnB1c2goXCIvXCIpLGEucHVzaChVYyhjLFwiL1wiPT1jLmNoYXJBdCgwKT9XYzpYYywhMCkpOyhjPXRoaXMuaC50b1N0cmluZygpKSYmYS5wdXNoKFwiP1wiLGMpOyhjPXRoaXMubykmJmEucHVzaChcIiNcIixVYyhjLFljKSk7cmV0dXJuIGEuam9pbihcIlwiKX07ZnVuY3Rpb24gTihhKXtyZXR1cm4gbmV3IFUoYSl9XG5mdW5jdGlvbiBPYyhhLGIsYyl7YS5qPWM/VGMoYiwhMCk6YjthLmomJihhLmo9YS5qLnJlcGxhY2UoLzokLyxcIlwiKSk7fWZ1bmN0aW9uIFBjKGEsYixjKXthLmk9Yz9UYyhiLCEwKTpiO31mdW5jdGlvbiBRYyhhLGIpe2lmKGIpe2I9TnVtYmVyKGIpO2lmKGlzTmFOKGIpfHwwPmIpdGhyb3cgRXJyb3IoXCJCYWQgcG9ydCBudW1iZXIgXCIrYik7YS5tPWI7fWVsc2UgYS5tPW51bGw7fWZ1bmN0aW9uIFNjKGEsYixjKXtiIGluc3RhbmNlb2YgUmM/KGEuaD1iLFpjKGEuaCxhLmcpKTooY3x8KGI9VWMoYiwkYykpLGEuaD1uZXcgUmMoYixhLmcpKTt9ZnVuY3Rpb24gUihhLGIsYyl7YS5oLnNldChiLGMpO31mdW5jdGlvbiBqYyhhKXtSKGEsXCJ6eFwiLE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKS50b1N0cmluZygzNikrTWF0aC5hYnMoTWF0aC5mbG9vcigyMTQ3NDgzNjQ4Kk1hdGgucmFuZG9tKCkpXkRhdGUubm93KCkpLnRvU3RyaW5nKDM2KSk7cmV0dXJuIGF9XG5mdW5jdGlvbiBhZChhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFU/TihhKTpuZXcgVShhLHZvaWQgMCl9ZnVuY3Rpb24gYmQoYSxiLGMsZCl7dmFyIGU9bmV3IFUobnVsbCx2b2lkIDApO2EmJk9jKGUsYSk7YiYmUGMoZSxiKTtjJiZRYyhlLGMpO2QmJihlLmw9ZCk7cmV0dXJuIGV9ZnVuY3Rpb24gVGMoYSxiKXtyZXR1cm4gYT9iP2RlY29kZVVSSShhLnJlcGxhY2UoLyUyNS9nLFwiJTI1MjVcIikpOmRlY29kZVVSSUNvbXBvbmVudChhKTpcIlwifWZ1bmN0aW9uIFVjKGEsYixjKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiBhPyhhPWVuY29kZVVSSShhKS5yZXBsYWNlKGIsY2QpLGMmJihhPWEucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxhKTpudWxsfWZ1bmN0aW9uIGNkKGEpe2E9YS5jaGFyQ29kZUF0KDApO3JldHVybiBcIiVcIisoYT4+NCYxNSkudG9TdHJpbmcoMTYpKyhhJjE1KS50b1N0cmluZygxNil9XG52YXIgVmM9L1sjXFwvXFw/QF0vZyxYYz0vWyNcXD86XS9nLFdjPS9bI1xcP10vZywkYz0vWyNcXD9AXS9nLFljPS8jL2c7ZnVuY3Rpb24gUmMoYSxiKXt0aGlzLmg9dGhpcy5nPW51bGw7dGhpcy5pPWF8fG51bGw7dGhpcy5qPSEhYjt9ZnVuY3Rpb24gVihhKXthLmd8fChhLmc9bmV3IFMsYS5oPTAsYS5pJiZOYyhhLmksZnVuY3Rpb24oYixjKXthLmFkZChkZWNvZGVVUklDb21wb25lbnQoYi5yZXBsYWNlKC9cXCsvZyxcIiBcIikpLGMpO30pKTt9az1SYy5wcm90b3R5cGU7ay5hZGQ9ZnVuY3Rpb24oYSxiKXtWKHRoaXMpO3RoaXMuaT1udWxsO2E9Vyh0aGlzLGEpO3ZhciBjPXRoaXMuZy5nZXQoYSk7Y3x8dGhpcy5nLnNldChhLGM9W10pO2MucHVzaChiKTt0aGlzLmgrPTE7cmV0dXJuIHRoaXN9O1xuZnVuY3Rpb24gZGQoYSxiKXtWKGEpO2I9VyhhLGIpO1QoYS5nLmgsYikmJihhLmk9bnVsbCxhLmgtPWEuZy5nZXQoYikubGVuZ3RoLGE9YS5nLFQoYS5oLGIpJiYoZGVsZXRlIGEuaFtiXSxhLmktLSxhLmcubGVuZ3RoPjIqYS5pJiZMYyhhKSkpO31mdW5jdGlvbiBlZChhLGIpe1YoYSk7Yj1XKGEsYik7cmV0dXJuIFQoYS5nLmgsYil9ay5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7Vih0aGlzKTt0aGlzLmcuZm9yRWFjaChmdW5jdGlvbihjLGQpe25hKGMsZnVuY3Rpb24oZSl7YS5jYWxsKGIsZSxkLHRoaXMpO30sdGhpcyk7fSx0aGlzKTt9O2suVD1mdW5jdGlvbigpe1YodGhpcyk7Zm9yKHZhciBhPXRoaXMuZy5SKCksYj10aGlzLmcuVCgpLGM9W10sZD0wO2Q8Yi5sZW5ndGg7ZCsrKWZvcih2YXIgZT1hW2RdLGY9MDtmPGUubGVuZ3RoO2YrKyljLnB1c2goYltkXSk7cmV0dXJuIGN9O1xuay5SPWZ1bmN0aW9uKGEpe1YodGhpcyk7dmFyIGI9W107aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKWVkKHRoaXMsYSkmJihiPXFhKGIsdGhpcy5nLmdldChXKHRoaXMsYSkpKSk7ZWxzZSB7YT10aGlzLmcuUigpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWI9cWEoYixhW2NdKTt9cmV0dXJuIGJ9O2suc2V0PWZ1bmN0aW9uKGEsYil7Vih0aGlzKTt0aGlzLmk9bnVsbDthPVcodGhpcyxhKTtlZCh0aGlzLGEpJiYodGhpcy5oLT10aGlzLmcuZ2V0KGEpLmxlbmd0aCk7dGhpcy5nLnNldChhLFtiXSk7dGhpcy5oKz0xO3JldHVybiB0aGlzfTtrLmdldD1mdW5jdGlvbihhLGIpe2lmKCFhKXJldHVybiBiO2E9dGhpcy5SKGEpO3JldHVybiAwPGEubGVuZ3RoP1N0cmluZyhhWzBdKTpifTtmdW5jdGlvbiBtYyhhLGIsYyl7ZGQoYSxiKTswPGMubGVuZ3RoJiYoYS5pPW51bGwsYS5nLnNldChXKGEsYikscmEoYykpLGEuaCs9Yy5sZW5ndGgpO31cbmsudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmkpcmV0dXJuIHRoaXMuaTtpZighdGhpcy5nKXJldHVybiBcIlwiO2Zvcih2YXIgYT1bXSxiPXRoaXMuZy5UKCksYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdLGU9ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhkKSk7ZD10aGlzLlIoZCk7Zm9yKHZhciBmPTA7ZjxkLmxlbmd0aDtmKyspe3ZhciBoPWU7XCJcIiE9PWRbZl0mJihoKz1cIj1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGRbZl0pKSk7YS5wdXNoKGgpO319cmV0dXJuIHRoaXMuaT1hLmpvaW4oXCImXCIpfTtmdW5jdGlvbiBXKGEsYil7Yj1TdHJpbmcoYik7YS5qJiYoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifWZ1bmN0aW9uIFpjKGEsYil7YiYmIWEuaiYmKFYoYSksYS5pPW51bGwsYS5nLmZvckVhY2goZnVuY3Rpb24oYyxkKXt2YXIgZT1kLnRvTG93ZXJDYXNlKCk7ZCE9ZSYmKGRkKHRoaXMsZCksbWModGhpcyxlLGMpKTt9LGEpKTthLmo9Yjt9dmFyIGZkPWNsYXNze2NvbnN0cnVjdG9yKGEsYil7dGhpcy5oPWE7dGhpcy5nPWI7fX07ZnVuY3Rpb24gZ2QoYSl7dGhpcy5sPWF8fGhkO2wuUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nPyhhPWwucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcIm5hdmlnYXRpb25cIiksYT0wPGEubGVuZ3RoJiYoXCJocVwiPT1hWzBdLm5leHRIb3BQcm90b2NvbHx8XCJoMlwiPT1hWzBdLm5leHRIb3BQcm90b2NvbCkpOmE9ISEobC5nJiZsLmcuRWEmJmwuZy5FYSgpJiZsLmcuRWEoKS5aYik7dGhpcy5qPWE/dGhpcy5sOjE7dGhpcy5nPW51bGw7MTx0aGlzLmomJih0aGlzLmc9bmV3IFNldCk7dGhpcy5oPW51bGw7dGhpcy5pPVtdO312YXIgaGQ9MTA7ZnVuY3Rpb24gaWQoYSl7cmV0dXJuIGEuaD8hMDphLmc/YS5nLnNpemU+PWEuajohMX1mdW5jdGlvbiBDYyhhKXtyZXR1cm4gYS5oPzE6YS5nP2EuZy5zaXplOjB9ZnVuY3Rpb24geWMoYSxiKXtyZXR1cm4gYS5oP2EuaD09YjphLmc/YS5nLmhhcyhiKTohMX1mdW5jdGlvbiBEYyhhLGIpe2EuZz9hLmcuYWRkKGIpOmEuaD1iO31cbmZ1bmN0aW9uIEZjKGEsYil7YS5oJiZhLmg9PWI/YS5oPW51bGw6YS5nJiZhLmcuaGFzKGIpJiZhLmcuZGVsZXRlKGIpO31nZC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5pPWpkKHRoaXMpO2lmKHRoaXMuaCl0aGlzLmguY2FuY2VsKCksdGhpcy5oPW51bGw7ZWxzZSBpZih0aGlzLmcmJjAhPT10aGlzLmcuc2l6ZSl7Zm9yKGNvbnN0IGEgb2YgdGhpcy5nLnZhbHVlcygpKWEuY2FuY2VsKCk7dGhpcy5nLmNsZWFyKCk7fX07ZnVuY3Rpb24gamQoYSl7aWYobnVsbCE9YS5oKXJldHVybiBhLmkuY29uY2F0KGEuaC5EKTtpZihudWxsIT1hLmcmJjAhPT1hLmcuc2l6ZSl7bGV0IGI9YS5pO2Zvcihjb25zdCBjIG9mIGEuZy52YWx1ZXMoKSliPWIuY29uY2F0KGMuRCk7cmV0dXJuIGJ9cmV0dXJuIHJhKGEuaSl9ZnVuY3Rpb24ga2QoKXt9a2QucHJvdG90eXBlLnN0cmluZ2lmeT1mdW5jdGlvbihhKXtyZXR1cm4gbC5KU09OLnN0cmluZ2lmeShhLHZvaWQgMCl9O2tkLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihhKXtyZXR1cm4gbC5KU09OLnBhcnNlKGEsdm9pZCAwKX07ZnVuY3Rpb24gbGQoKXt0aGlzLmc9bmV3IGtkO31mdW5jdGlvbiBtZChhLGIsYyl7Y29uc3QgZD1jfHxcIlwiO3RyeXtLYyhhLGZ1bmN0aW9uKGUsZil7bGV0IGg9ZTtwKGUpJiYoaD1yYihlKSk7Yi5wdXNoKGQrZitcIj1cIitlbmNvZGVVUklDb21wb25lbnQoaCkpO30pO31jYXRjaChlKXt0aHJvdyBiLnB1c2goZCtcInR5cGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiX2JhZG1hcFwiKSksZTt9fWZ1bmN0aW9uIG5kKGEsYil7Y29uc3QgYz1uZXcgTWI7aWYobC5JbWFnZSl7Y29uc3QgZD1uZXcgSW1hZ2U7ZC5vbmxvYWQ9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogbG9hZGVkXCIsITAsYik7ZC5vbmVycm9yPWphKG9kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGVycm9yXCIsITEsYik7ZC5vbmFib3J0PWphKG9kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGFib3J0XCIsITEsYik7ZC5vbnRpbWVvdXQ9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogdGltZW91dFwiLCExLGIpO2wuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGQub250aW1lb3V0KWQub250aW1lb3V0KCk7fSwxRTQpO2Quc3JjPWE7fWVsc2UgYighMSk7fWZ1bmN0aW9uIG9kKGEsYixjLGQsZSl7dHJ5e2Iub25sb2FkPW51bGwsYi5vbmVycm9yPW51bGwsYi5vbmFib3J0PW51bGwsYi5vbnRpbWVvdXQ9bnVsbCxlKGQpO31jYXRjaChmKXt9fWZ1bmN0aW9uIHBkKGEpe3RoaXMubD1hLiRifHxudWxsO3RoaXMuaj1hLmlifHwhMTt9dChwZCxZYik7cGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHFkKHRoaXMubCx0aGlzLmopfTtwZC5wcm90b3R5cGUuaT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYX19KHt9KTtmdW5jdGlvbiBxZChhLGIpe0MuY2FsbCh0aGlzKTt0aGlzLkQ9YTt0aGlzLnU9Yjt0aGlzLm09dm9pZCAwO3RoaXMucmVhZHlTdGF0ZT1yZDt0aGlzLnN0YXR1cz0wO3RoaXMucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUZXh0PXRoaXMucmVzcG9uc2U9dGhpcy5zdGF0dXNUZXh0PVwiXCI7dGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5oPW51bGw7dGhpcy5DPVwiR0VUXCI7dGhpcy5CPVwiXCI7dGhpcy5nPSExO3RoaXMuQT10aGlzLmo9dGhpcy5sPW51bGw7fXQocWQsQyk7dmFyIHJkPTA7az1xZC5wcm90b3R5cGU7XG5rLm9wZW49ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnJlYWR5U3RhdGUhPXJkKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIkVycm9yIHJlb3BlbmluZyBhIGNvbm5lY3Rpb25cIik7dGhpcy5DPWE7dGhpcy5CPWI7dGhpcy5yZWFkeVN0YXRlPTE7c2QodGhpcyk7fTtrLnNlbmQ9ZnVuY3Rpb24oYSl7aWYoMSE9dGhpcy5yZWFkeVN0YXRlKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIm5lZWQgdG8gY2FsbCBvcGVuKCkgZmlyc3QuIFwiKTt0aGlzLmc9ITA7Y29uc3QgYj17aGVhZGVyczp0aGlzLnYsbWV0aG9kOnRoaXMuQyxjcmVkZW50aWFsczp0aGlzLm0sY2FjaGU6dm9pZCAwfTthJiYoYi5ib2R5PWEpOyh0aGlzLkR8fGwpLmZldGNoKG5ldyBSZXF1ZXN0KHRoaXMuQixiKSkudGhlbih0aGlzLlZhLmJpbmQodGhpcyksdGhpcy5oYS5iaW5kKHRoaXMpKTt9O1xuay5hYm9ydD1mdW5jdGlvbigpe3RoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9XCJcIjt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5zdGF0dXM9MDt0aGlzLmomJnRoaXMuai5jYW5jZWwoXCJSZXF1ZXN0IHdhcyBhYm9ydGVkLlwiKTsxPD10aGlzLnJlYWR5U3RhdGUmJnRoaXMuZyYmNCE9dGhpcy5yZWFkeVN0YXRlJiYodGhpcy5nPSExLHRkKHRoaXMpKTt0aGlzLnJlYWR5U3RhdGU9cmQ7fTtcbmsuVmE9ZnVuY3Rpb24oYSl7aWYodGhpcy5nJiYodGhpcy5sPWEsdGhpcy5ofHwodGhpcy5zdGF0dXM9dGhpcy5sLnN0YXR1cyx0aGlzLnN0YXR1c1RleHQ9dGhpcy5sLnN0YXR1c1RleHQsdGhpcy5oPWEuaGVhZGVycyx0aGlzLnJlYWR5U3RhdGU9MixzZCh0aGlzKSksdGhpcy5nJiYodGhpcy5yZWFkeVN0YXRlPTMsc2QodGhpcyksdGhpcy5nKSkpaWYoXCJhcnJheWJ1ZmZlclwiPT09dGhpcy5yZXNwb25zZVR5cGUpYS5hcnJheUJ1ZmZlcigpLnRoZW4odGhpcy5UYS5iaW5kKHRoaXMpLHRoaXMuaGEuYmluZCh0aGlzKSk7ZWxzZSBpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGwuUmVhZGFibGVTdHJlYW0mJlwiYm9keVwiaW4gYSl7dGhpcy5qPWEuYm9keS5nZXRSZWFkZXIoKTtpZih0aGlzLnUpe2lmKHRoaXMucmVzcG9uc2VUeXBlKXRocm93IEVycm9yKCdyZXNwb25zZVR5cGUgbXVzdCBiZSBlbXB0eSBmb3IgXCJzdHJlYW1CaW5hcnlDaHVua3NcIiBtb2RlIHJlc3BvbnNlcy4nKTt0aGlzLnJlc3BvbnNlPVxuW107fWVsc2UgdGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD1cIlwiLHRoaXMuQT1uZXcgVGV4dERlY29kZXI7dWQodGhpcyk7fWVsc2UgYS50ZXh0KCkudGhlbih0aGlzLlVhLmJpbmQodGhpcyksdGhpcy5oYS5iaW5kKHRoaXMpKTt9O2Z1bmN0aW9uIHVkKGEpe2Euai5yZWFkKCkudGhlbihhLlNhLmJpbmQoYSkpLmNhdGNoKGEuaGEuYmluZChhKSk7fWsuU2E9ZnVuY3Rpb24oYSl7aWYodGhpcy5nKXtpZih0aGlzLnUmJmEudmFsdWUpdGhpcy5yZXNwb25zZS5wdXNoKGEudmFsdWUpO2Vsc2UgaWYoIXRoaXMudSl7dmFyIGI9YS52YWx1ZT9hLnZhbHVlOm5ldyBVaW50OEFycmF5KDApO2lmKGI9dGhpcy5BLmRlY29kZShiLHtzdHJlYW06IWEuZG9uZX0pKXRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQrPWI7fWEuZG9uZT90ZCh0aGlzKTpzZCh0aGlzKTszPT10aGlzLnJlYWR5U3RhdGUmJnVkKHRoaXMpO319O1xuay5VYT1mdW5jdGlvbihhKXt0aGlzLmcmJih0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PWEsdGQodGhpcykpO307ay5UYT1mdW5jdGlvbihhKXt0aGlzLmcmJih0aGlzLnJlc3BvbnNlPWEsdGQodGhpcykpO307ay5oYT1mdW5jdGlvbigpe3RoaXMuZyYmdGQodGhpcyk7fTtmdW5jdGlvbiB0ZChhKXthLnJlYWR5U3RhdGU9NDthLmw9bnVsbDthLmo9bnVsbDthLkE9bnVsbDtzZChhKTt9ay5zZXRSZXF1ZXN0SGVhZGVyPWZ1bmN0aW9uKGEsYil7dGhpcy52LmFwcGVuZChhLGIpO307ay5nZXRSZXNwb25zZUhlYWRlcj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oP3RoaXMuaC5nZXQoYS50b0xvd2VyQ2FzZSgpKXx8XCJcIjpcIlwifTtcbmsuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaClyZXR1cm4gXCJcIjtjb25zdCBhPVtdLGI9dGhpcy5oLmVudHJpZXMoKTtmb3IodmFyIGM9Yi5uZXh0KCk7IWMuZG9uZTspYz1jLnZhbHVlLGEucHVzaChjWzBdK1wiOiBcIitjWzFdKSxjPWIubmV4dCgpO3JldHVybiBhLmpvaW4oXCJcXHJcXG5cIil9O2Z1bmN0aW9uIHNkKGEpe2Eub25yZWFkeXN0YXRlY2hhbmdlJiZhLm9ucmVhZHlzdGF0ZWNoYW5nZS5jYWxsKGEpO31PYmplY3QuZGVmaW5lUHJvcGVydHkocWQucHJvdG90eXBlLFwid2l0aENyZWRlbnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBcImluY2x1ZGVcIj09PXRoaXMubX0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMubT1hP1wiaW5jbHVkZVwiOlwic2FtZS1vcmlnaW5cIjt9fSk7dmFyIHZkPWwuSlNPTi5wYXJzZTtmdW5jdGlvbiBYKGEpe0MuY2FsbCh0aGlzKTt0aGlzLmhlYWRlcnM9bmV3IFM7dGhpcy51PWF8fG51bGw7dGhpcy5oPSExO3RoaXMuQz10aGlzLmc9bnVsbDt0aGlzLkg9XCJcIjt0aGlzLm09MDt0aGlzLmo9XCJcIjt0aGlzLmw9dGhpcy5GPXRoaXMudj10aGlzLkQ9ITE7dGhpcy5CPTA7dGhpcy5BPW51bGw7dGhpcy5KPXdkO3RoaXMuSz10aGlzLkw9ITE7fXQoWCxDKTt2YXIgd2Q9XCJcIix4ZD0vXmh0dHBzPyQvaSx5ZD1bXCJQT1NUXCIsXCJQVVRcIl07az1YLnByb3RvdHlwZTtcbmsuZWE9ZnVuY3Rpb24oYSxiLGMsZCl7aWYodGhpcy5nKXRocm93IEVycm9yKFwiW2dvb2cubmV0LlhocklvXSBPYmplY3QgaXMgYWN0aXZlIHdpdGggYW5vdGhlciByZXF1ZXN0PVwiK3RoaXMuSCtcIjsgbmV3VXJpPVwiK2EpO2I9Yj9iLnRvVXBwZXJDYXNlKCk6XCJHRVRcIjt0aGlzLkg9YTt0aGlzLmo9XCJcIjt0aGlzLm09MDt0aGlzLkQ9ITE7dGhpcy5oPSEwO3RoaXMuZz10aGlzLnU/dGhpcy51LmcoKTpjYy5nKCk7dGhpcy5DPXRoaXMudT9aYih0aGlzLnUpOlpiKGNjKTt0aGlzLmcub25yZWFkeXN0YXRlY2hhbmdlPXEodGhpcy5GYSx0aGlzKTt0cnl7dGhpcy5GPSEwLHRoaXMuZy5vcGVuKGIsU3RyaW5nKGEpLCEwKSx0aGlzLkY9ITE7fWNhdGNoKGYpe3pkKHRoaXMsZik7cmV0dXJufWE9Y3x8XCJcIjtjb25zdCBlPW5ldyBTKHRoaXMuaGVhZGVycyk7ZCYmS2MoZCxmdW5jdGlvbihmLGgpe2Uuc2V0KGgsZik7fSk7ZD1vYShlLlQoKSk7Yz1sLkZvcm1EYXRhJiZhIGluc3RhbmNlb2YgbC5Gb3JtRGF0YTtcbiEoMDw9bWEoeWQsYikpfHxkfHxjfHxlLnNldChcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLThcIik7ZS5mb3JFYWNoKGZ1bmN0aW9uKGYsaCl7dGhpcy5nLnNldFJlcXVlc3RIZWFkZXIoaCxmKTt9LHRoaXMpO3RoaXMuSiYmKHRoaXMuZy5yZXNwb25zZVR5cGU9dGhpcy5KKTtcIndpdGhDcmVkZW50aWFsc1wiaW4gdGhpcy5nJiZ0aGlzLmcud2l0aENyZWRlbnRpYWxzIT09dGhpcy5MJiYodGhpcy5nLndpdGhDcmVkZW50aWFscz10aGlzLkwpO3RyeXtBZCh0aGlzKSwwPHRoaXMuQiYmKCh0aGlzLks9QmQodGhpcy5nKSk/KHRoaXMuZy50aW1lb3V0PXRoaXMuQix0aGlzLmcub250aW1lb3V0PXEodGhpcy5wYSx0aGlzKSk6dGhpcy5BPUdiKHRoaXMucGEsdGhpcy5CLHRoaXMpKSx0aGlzLnY9ITAsdGhpcy5nLnNlbmQoYSksdGhpcy52PSExO31jYXRjaChmKXt6ZCh0aGlzLGYpO319O1xuZnVuY3Rpb24gQmQoYSl7cmV0dXJuIHkmJlJhKCkmJlwibnVtYmVyXCI9PT10eXBlb2YgYS50aW1lb3V0JiZ2b2lkIDAhPT1hLm9udGltZW91dH1mdW5jdGlvbiBwYShhKXtyZXR1cm4gXCJjb250ZW50LXR5cGVcIj09YS50b0xvd2VyQ2FzZSgpfWsucGE9ZnVuY3Rpb24oKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmdGhpcy5nJiYodGhpcy5qPVwiVGltZWQgb3V0IGFmdGVyIFwiK3RoaXMuQitcIm1zLCBhYm9ydGluZ1wiLHRoaXMubT04LEQodGhpcyxcInRpbWVvdXRcIiksdGhpcy5hYm9ydCg4KSk7fTtmdW5jdGlvbiB6ZChhLGIpe2EuaD0hMTthLmcmJihhLmw9ITAsYS5nLmFib3J0KCksYS5sPSExKTthLmo9YjthLm09NTtDZChhKTtEZChhKTt9ZnVuY3Rpb24gQ2QoYSl7YS5EfHwoYS5EPSEwLEQoYSxcImNvbXBsZXRlXCIpLEQoYSxcImVycm9yXCIpKTt9XG5rLmFib3J0PWZ1bmN0aW9uKGEpe3RoaXMuZyYmdGhpcy5oJiYodGhpcy5oPSExLHRoaXMubD0hMCx0aGlzLmcuYWJvcnQoKSx0aGlzLmw9ITEsdGhpcy5tPWF8fDcsRCh0aGlzLFwiY29tcGxldGVcIiksRCh0aGlzLFwiYWJvcnRcIiksRGQodGhpcykpO307ay5NPWZ1bmN0aW9uKCl7dGhpcy5nJiYodGhpcy5oJiYodGhpcy5oPSExLHRoaXMubD0hMCx0aGlzLmcuYWJvcnQoKSx0aGlzLmw9ITEpLERkKHRoaXMsITApKTtYLlouTS5jYWxsKHRoaXMpO307ay5GYT1mdW5jdGlvbigpe3RoaXMuc3x8KHRoaXMuRnx8dGhpcy52fHx0aGlzLmw/RWQodGhpcyk6dGhpcy5jYigpKTt9O2suY2I9ZnVuY3Rpb24oKXtFZCh0aGlzKTt9O1xuZnVuY3Rpb24gRWQoYSl7aWYoYS5oJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmKCFhLkNbMV18fDQhPU8oYSl8fDIhPWEuYmEoKSkpaWYoYS52JiY0PT1PKGEpKUdiKGEuRmEsMCxhKTtlbHNlIGlmKEQoYSxcInJlYWR5c3RhdGVjaGFuZ2VcIiksND09TyhhKSl7YS5oPSExO3RyeXtjb25zdCBuPWEuYmEoKTthOnN3aXRjaChuKXtjYXNlIDIwMDpjYXNlIDIwMTpjYXNlIDIwMjpjYXNlIDIwNDpjYXNlIDIwNjpjYXNlIDMwNDpjYXNlIDEyMjM6dmFyIGI9ITA7YnJlYWsgYTtkZWZhdWx0OmI9ITE7fXZhciBjO2lmKCEoYz1iKSl7dmFyIGQ7aWYoZD0wPT09bil7dmFyIGU9U3RyaW5nKGEuSCkubWF0Y2goTWMpWzFdfHxudWxsO2lmKCFlJiZsLnNlbGYmJmwuc2VsZi5sb2NhdGlvbil7dmFyIGY9bC5zZWxmLmxvY2F0aW9uLnByb3RvY29sO2U9Zi5zdWJzdHIoMCxmLmxlbmd0aC0xKTt9ZD0heGQudGVzdChlP2UudG9Mb3dlckNhc2UoKTpcIlwiKTt9Yz1kO31pZihjKUQoYSxcImNvbXBsZXRlXCIpLEQoYSxcblwic3VjY2Vzc1wiKTtlbHNlIHthLm09Njt0cnl7dmFyIGg9MjxPKGEpP2EuZy5zdGF0dXNUZXh0OlwiXCI7fWNhdGNoKHUpe2g9XCJcIjt9YS5qPWgrXCIgW1wiK2EuYmEoKStcIl1cIjtDZChhKTt9fWZpbmFsbHl7RGQoYSk7fX19ZnVuY3Rpb24gRGQoYSxiKXtpZihhLmcpe0FkKGEpO2NvbnN0IGM9YS5nLGQ9YS5DWzBdP2FhOm51bGw7YS5nPW51bGw7YS5DPW51bGw7Ynx8RChhLFwicmVhZHlcIik7dHJ5e2Mub25yZWFkeXN0YXRlY2hhbmdlPWQ7fWNhdGNoKGUpe319fWZ1bmN0aW9uIEFkKGEpe2EuZyYmYS5LJiYoYS5nLm9udGltZW91dD1udWxsKTthLkEmJihsLmNsZWFyVGltZW91dChhLkEpLGEuQT1udWxsKTt9ZnVuY3Rpb24gTyhhKXtyZXR1cm4gYS5nP2EuZy5yZWFkeVN0YXRlOjB9ay5iYT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gMjxPKHRoaXMpP3RoaXMuZy5zdGF0dXM6LTF9Y2F0Y2goYSl7cmV0dXJuIC0xfX07XG5rLmdhPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmc/dGhpcy5nLnJlc3BvbnNlVGV4dDpcIlwifWNhdGNoKGEpe3JldHVybiBcIlwifX07ay5RYT1mdW5jdGlvbihhKXtpZih0aGlzLmcpe3ZhciBiPXRoaXMuZy5yZXNwb25zZVRleHQ7YSYmMD09Yi5pbmRleE9mKGEpJiYoYj1iLnN1YnN0cmluZyhhLmxlbmd0aCkpO3JldHVybiB2ZChiKX19O2Z1bmN0aW9uIG9jKGEpe3RyeXtpZighYS5nKXJldHVybiBudWxsO2lmKFwicmVzcG9uc2VcImluIGEuZylyZXR1cm4gYS5nLnJlc3BvbnNlO3N3aXRjaChhLkope2Nhc2Ugd2Q6Y2FzZSBcInRleHRcIjpyZXR1cm4gYS5nLnJlc3BvbnNlVGV4dDtjYXNlIFwiYXJyYXlidWZmZXJcIjppZihcIm1velJlc3BvbnNlQXJyYXlCdWZmZXJcImluIGEuZylyZXR1cm4gYS5nLm1velJlc3BvbnNlQXJyYXlCdWZmZXJ9cmV0dXJuIG51bGx9Y2F0Y2goYil7cmV0dXJuIG51bGx9fWsuRGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tfTtcbmsuTGE9ZnVuY3Rpb24oKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiB0aGlzLmo/dGhpcy5qOlN0cmluZyh0aGlzLmopfTtmdW5jdGlvbiBGZChhKXtsZXQgYj1cIlwiO3hhKGEsZnVuY3Rpb24oYyxkKXtiKz1kO2IrPVwiOlwiO2IrPWM7Yis9XCJcXHJcXG5cIjt9KTtyZXR1cm4gYn1mdW5jdGlvbiBHZChhLGIsYyl7YTp7Zm9yKGQgaW4gYyl7dmFyIGQ9ITE7YnJlYWsgYX1kPSEwO31kfHwoYz1GZChjKSxcInN0cmluZ1wiPT09dHlwZW9mIGE/KG51bGwhPWMmJmVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpKTpSKGEsYixjKSk7fWZ1bmN0aW9uIEhkKGEsYixjKXtyZXR1cm4gYyYmYy5pbnRlcm5hbENoYW5uZWxQYXJhbXM/Yy5pbnRlcm5hbENoYW5uZWxQYXJhbXNbYV18fGI6Yn1cbmZ1bmN0aW9uIElkKGEpe3RoaXMuemE9MDt0aGlzLmw9W107dGhpcy5oPW5ldyBNYjt0aGlzLmxhPXRoaXMub2E9dGhpcy5GPXRoaXMuVz10aGlzLmc9dGhpcy5zYT10aGlzLkQ9dGhpcy5hYT10aGlzLm89dGhpcy5QPXRoaXMucz1udWxsO3RoaXMuWmE9dGhpcy5WPTA7dGhpcy5YYT1IZChcImZhaWxGYXN0XCIsITEsYSk7dGhpcy5OPXRoaXMudj10aGlzLnU9dGhpcy5tPXRoaXMuaj1udWxsO3RoaXMuWD0hMDt0aGlzLkk9dGhpcy50YT10aGlzLlU9LTE7dGhpcy5ZPXRoaXMuQT10aGlzLkM9MDt0aGlzLlBhPUhkKFwiYmFzZVJldHJ5RGVsYXlNc1wiLDVFMyxhKTt0aGlzLiRhPUhkKFwicmV0cnlEZWxheVNlZWRNc1wiLDFFNCxhKTt0aGlzLllhPUhkKFwiZm9yd2FyZENoYW5uZWxNYXhSZXRyaWVzXCIsMixhKTt0aGlzLnJhPUhkKFwiZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zXCIsMkU0LGEpO3RoaXMucWE9YSYmYS54bWxIdHRwRmFjdG9yeXx8dm9pZCAwO3RoaXMuQmE9YSYmYS5ZYnx8ITE7XG50aGlzLks9dm9pZCAwO3RoaXMuSD1hJiZhLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMuSj1cIlwiO3RoaXMuaT1uZXcgZ2QoYSYmYS5jb25jdXJyZW50UmVxdWVzdExpbWl0KTt0aGlzLkNhPW5ldyBsZDt0aGlzLmphPWEmJmEuZmFzdEhhbmRzaGFrZXx8ITE7dGhpcy5SYT1hJiZhLldifHwhMTthJiZhLkFhJiZ0aGlzLmguQWEoKTthJiZhLmZvcmNlTG9uZ1BvbGxpbmcmJih0aGlzLlg9ITEpO3RoaXMuJD0hdGhpcy5qYSYmdGhpcy5YJiZhJiZhLmRldGVjdEJ1ZmZlcmluZ1Byb3h5fHwhMTt0aGlzLmthPXZvaWQgMDt0aGlzLk89MDt0aGlzLkw9ITE7dGhpcy5CPW51bGw7dGhpcy5XYT0hYXx8ITEhPT1hLlhiO31rPUlkLnByb3RvdHlwZTtrLm1hPTg7ay5HPTE7XG5mdW5jdGlvbiBJYyhhKXtKZChhKTtpZigzPT1hLkcpe3ZhciBiPWEuVisrLGM9TihhLkYpO1IoYyxcIlNJRFwiLGEuSik7UihjLFwiUklEXCIsYik7UihjLFwiVFlQRVwiLFwidGVybWluYXRlXCIpO0tkKGEsYyk7Yj1uZXcgTShhLGEuaCxiLHZvaWQgMCk7Yi5LPTI7Yi52PWpjKE4oYykpO2M9ITE7bC5uYXZpZ2F0b3ImJmwubmF2aWdhdG9yLnNlbmRCZWFjb24mJihjPWwubmF2aWdhdG9yLnNlbmRCZWFjb24oYi52LnRvU3RyaW5nKCksXCJcIikpOyFjJiZsLkltYWdlJiYoKG5ldyBJbWFnZSkuc3JjPWIudixjPSEwKTtjfHwoYi5nPW5jKGIubCxudWxsKSxiLmcuZWEoYi52KSk7Yi5GPURhdGUubm93KCk7bGMoYik7fUxkKGEpO31rLmhiPWZ1bmN0aW9uKGEpe3RyeXt0aGlzLmguaW5mbyhcIk9yaWdpbiBUcmlhbHMgaW52b2tlZDogXCIrYSk7fWNhdGNoKGIpe319O2Z1bmN0aW9uIEFjKGEpe2EuZyYmKHdjKGEpLGEuZy5jYW5jZWwoKSxhLmc9bnVsbCk7fVxuZnVuY3Rpb24gSmQoYSl7QWMoYSk7YS51JiYobC5jbGVhclRpbWVvdXQoYS51KSxhLnU9bnVsbCk7emMoYSk7YS5pLmNhbmNlbCgpO2EubSYmKFwibnVtYmVyXCI9PT10eXBlb2YgYS5tJiZsLmNsZWFyVGltZW91dChhLm0pLGEubT1udWxsKTt9ZnVuY3Rpb24gTWQoYSxiKXthLmwucHVzaChuZXcgZmQoYS5aYSsrLGIpKTszPT1hLkcmJkhjKGEpO31mdW5jdGlvbiBIYyhhKXtpZChhLmkpfHxhLm18fChhLm09ITAsemIoYS5IYSxhKSxhLkM9MCk7fWZ1bmN0aW9uIE5kKGEsYil7aWYoQ2MoYS5pKT49YS5pLmotKGEubT8xOjApKXJldHVybiAhMTtpZihhLm0pcmV0dXJuIGEubD1iLkQuY29uY2F0KGEubCksITA7aWYoMT09YS5HfHwyPT1hLkd8fGEuQz49KGEuWGE/MDphLllhKSlyZXR1cm4gITE7YS5tPUsocShhLkhhLGEsYiksT2QoYSxhLkMpKTthLkMrKztyZXR1cm4gITB9XG5rLkhhPWZ1bmN0aW9uKGEpe2lmKHRoaXMubSlpZih0aGlzLm09bnVsbCwxPT10aGlzLkcpe2lmKCFhKXt0aGlzLlY9TWF0aC5mbG9vcigxRTUqTWF0aC5yYW5kb20oKSk7YT10aGlzLlYrKztjb25zdCBlPW5ldyBNKHRoaXMsdGhpcy5oLGEsdm9pZCAwKTtsZXQgZj10aGlzLnM7dGhpcy5QJiYoZj8oZj15YShmKSxBYShmLHRoaXMuUCkpOmY9dGhpcy5QKTtudWxsPT09dGhpcy5vJiYoZS5IPWYpO2lmKHRoaXMuamEpYTp7dmFyIGI9MDtmb3IodmFyIGM9MDtjPHRoaXMubC5sZW5ndGg7YysrKXtiOnt2YXIgZD10aGlzLmxbY107aWYoXCJfX2RhdGFfX1wiaW4gZC5nJiYoZD1kLmcuX19kYXRhX18sXCJzdHJpbmdcIj09PXR5cGVvZiBkKSl7ZD1kLmxlbmd0aDticmVhayBifWQ9dm9pZCAwO31pZih2b2lkIDA9PT1kKWJyZWFrO2IrPWQ7aWYoNDA5NjxiKXtiPWM7YnJlYWsgYX1pZig0MDk2PT09Ynx8Yz09PXRoaXMubC5sZW5ndGgtMSl7Yj1jKzE7YnJlYWsgYX19Yj0xRTM7fWVsc2UgYj0xRTM7Yj1cblBkKHRoaXMsZSxiKTtjPU4odGhpcy5GKTtSKGMsXCJSSURcIixhKTtSKGMsXCJDVkVSXCIsMjIpO3RoaXMuRCYmUihjLFwiWC1IVFRQLVNlc3Npb24tSWRcIix0aGlzLkQpO0tkKHRoaXMsYyk7dGhpcy5vJiZmJiZHZChjLHRoaXMubyxmKTtEYyh0aGlzLmksZSk7dGhpcy5SYSYmUihjLFwiVFlQRVwiLFwiaW5pdFwiKTt0aGlzLmphPyhSKGMsXCIkcmVxXCIsYiksUihjLFwiU0lEXCIsXCJudWxsXCIpLGUuJD0hMCxpYyhlLGMsbnVsbCkpOmljKGUsYyxiKTt0aGlzLkc9Mjt9fWVsc2UgMz09dGhpcy5HJiYoYT9RZCh0aGlzLGEpOjA9PXRoaXMubC5sZW5ndGh8fGlkKHRoaXMuaSl8fFFkKHRoaXMpKTt9O1xuZnVuY3Rpb24gUWQoYSxiKXt2YXIgYztiP2M9Yi5tOmM9YS5WKys7Y29uc3QgZD1OKGEuRik7UihkLFwiU0lEXCIsYS5KKTtSKGQsXCJSSURcIixjKTtSKGQsXCJBSURcIixhLlUpO0tkKGEsZCk7YS5vJiZhLnMmJkdkKGQsYS5vLGEucyk7Yz1uZXcgTShhLGEuaCxjLGEuQysxKTtudWxsPT09YS5vJiYoYy5IPWEucyk7YiYmKGEubD1iLkQuY29uY2F0KGEubCkpO2I9UGQoYSxjLDFFMyk7Yy5zZXRUaW1lb3V0KE1hdGgucm91bmQoLjUqYS5yYSkrTWF0aC5yb3VuZCguNSphLnJhKk1hdGgucmFuZG9tKCkpKTtEYyhhLmksYyk7aWMoYyxkLGIpO31mdW5jdGlvbiBLZChhLGIpe2EuaiYmS2Moe30sZnVuY3Rpb24oYyxkKXtSKGIsZCxjKTt9KTt9XG5mdW5jdGlvbiBQZChhLGIsYyl7Yz1NYXRoLm1pbihhLmwubGVuZ3RoLGMpO3ZhciBkPWEuaj9xKGEuai5PYSxhLmosYSk6bnVsbDthOnt2YXIgZT1hLmw7bGV0IGY9LTE7Zm9yKDs7KXtjb25zdCBoPVtcImNvdW50PVwiK2NdOy0xPT1mPzA8Yz8oZj1lWzBdLmgsaC5wdXNoKFwib2ZzPVwiK2YpKTpmPTA6aC5wdXNoKFwib2ZzPVwiK2YpO2xldCBuPSEwO2ZvcihsZXQgdT0wO3U8Yzt1Kyspe2xldCBtPWVbdV0uaDtjb25zdCByPWVbdV0uZzttLT1mO2lmKDA+bSlmPU1hdGgubWF4KDAsZVt1XS5oLTEwMCksbj0hMTtlbHNlIHRyeXttZChyLGgsXCJyZXFcIittK1wiX1wiKTt9Y2F0Y2goRyl7ZCYmZChyKTt9fWlmKG4pe2Q9aC5qb2luKFwiJlwiKTticmVhayBhfX19YT1hLmwuc3BsaWNlKDAsYyk7Yi5EPWE7cmV0dXJuIGR9ZnVuY3Rpb24gR2MoYSl7YS5nfHxhLnV8fChhLlk9MSx6YihhLkdhLGEpLGEuQT0wKTt9XG5mdW5jdGlvbiBCYyhhKXtpZihhLmd8fGEudXx8Mzw9YS5BKXJldHVybiAhMTthLlkrKzthLnU9SyhxKGEuR2EsYSksT2QoYSxhLkEpKTthLkErKztyZXR1cm4gITB9ay5HYT1mdW5jdGlvbigpe3RoaXMudT1udWxsO1JkKHRoaXMpO2lmKHRoaXMuJCYmISh0aGlzLkx8fG51bGw9PXRoaXMuZ3x8MD49dGhpcy5PKSl7dmFyIGE9Mip0aGlzLk87dGhpcy5oLmluZm8oXCJCUCBkZXRlY3Rpb24gdGltZXIgZW5hYmxlZDogXCIrYSk7dGhpcy5CPUsocSh0aGlzLmJiLHRoaXMpLGEpO319O2suYmI9ZnVuY3Rpb24oKXt0aGlzLkImJih0aGlzLkI9bnVsbCx0aGlzLmguaW5mbyhcIkJQIGRldGVjdGlvbiB0aW1lb3V0IHJlYWNoZWQuXCIpLHRoaXMuaC5pbmZvKFwiQnVmZmVyaW5nIHByb3h5IGRldGVjdGVkIGFuZCBzd2l0Y2ggdG8gbG9uZy1wb2xsaW5nIVwiKSx0aGlzLk49ITEsdGhpcy5MPSEwLEooMTApLEFjKHRoaXMpLFJkKHRoaXMpKTt9O1xuZnVuY3Rpb24gd2MoYSl7bnVsbCE9YS5CJiYobC5jbGVhclRpbWVvdXQoYS5CKSxhLkI9bnVsbCk7fWZ1bmN0aW9uIFJkKGEpe2EuZz1uZXcgTShhLGEuaCxcInJwY1wiLGEuWSk7bnVsbD09PWEubyYmKGEuZy5IPWEucyk7YS5nLk89MDt2YXIgYj1OKGEub2EpO1IoYixcIlJJRFwiLFwicnBjXCIpO1IoYixcIlNJRFwiLGEuSik7UihiLFwiQ0lcIixhLk4/XCIwXCI6XCIxXCIpO1IoYixcIkFJRFwiLGEuVSk7S2QoYSxiKTtSKGIsXCJUWVBFXCIsXCJ4bWxodHRwXCIpO2EubyYmYS5zJiZHZChiLGEubyxhLnMpO2EuSyYmYS5nLnNldFRpbWVvdXQoYS5LKTt2YXIgYz1hLmc7YT1hLmxhO2MuSz0xO2Mudj1qYyhOKGIpKTtjLnM9bnVsbDtjLlU9ITA7a2MoYyxhKTt9ay5hYj1mdW5jdGlvbigpe251bGwhPXRoaXMudiYmKHRoaXMudj1udWxsLEFjKHRoaXMpLEJjKHRoaXMpLEooMTkpKTt9O2Z1bmN0aW9uIHpjKGEpe251bGwhPWEudiYmKGwuY2xlYXJUaW1lb3V0KGEudiksYS52PW51bGwpO31cbmZ1bmN0aW9uIHVjKGEsYil7dmFyIGM9bnVsbDtpZihhLmc9PWIpe3pjKGEpO3djKGEpO2EuZz1udWxsO3ZhciBkPTI7fWVsc2UgaWYoeWMoYS5pLGIpKWM9Yi5ELEZjKGEuaSxiKSxkPTE7ZWxzZSByZXR1cm47YS5JPWIuTjtpZigwIT1hLkcpaWYoYi5pKWlmKDE9PWQpe2M9Yi5zP2Iucy5sZW5ndGg6MDtiPURhdGUubm93KCktYi5GO3ZhciBlPWEuQztkPVNiKCk7RChkLG5ldyBWYihkLGMsYixlKSk7SGMoYSk7fWVsc2UgR2MoYSk7ZWxzZSBpZihlPWIubywzPT1lfHwwPT1lJiYwPGEuSXx8ISgxPT1kJiZOZChhLGIpfHwyPT1kJiZCYyhhKSkpc3dpdGNoKGMmJjA8Yy5sZW5ndGgmJihiPWEuaSxiLmk9Yi5pLmNvbmNhdChjKSksZSl7Y2FzZSAxOlEoYSw1KTticmVhaztjYXNlIDQ6UShhLDEwKTticmVhaztjYXNlIDM6UShhLDYpO2JyZWFrO2RlZmF1bHQ6UShhLDIpO319XG5mdW5jdGlvbiBPZChhLGIpe2xldCBjPWEuUGErTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmEuJGEpO2Euanx8KGMqPTIpO3JldHVybiBjKmJ9ZnVuY3Rpb24gUShhLGIpe2EuaC5pbmZvKFwiRXJyb3IgY29kZSBcIitiKTtpZigyPT1iKXt2YXIgYz1udWxsO2EuaiYmKGM9bnVsbCk7dmFyIGQ9cShhLmpiLGEpO2N8fChjPW5ldyBVKFwiLy93d3cuZ29vZ2xlLmNvbS9pbWFnZXMvY2xlYXJkb3QuZ2lmXCIpLGwubG9jYXRpb24mJlwiaHR0cFwiPT1sLmxvY2F0aW9uLnByb3RvY29sfHxPYyhjLFwiaHR0cHNcIiksamMoYykpO25kKGMudG9TdHJpbmcoKSxkKTt9ZWxzZSBKKDIpO2EuRz0wO2EuaiYmYS5qLnZhKGIpO0xkKGEpO0pkKGEpO31rLmpiPWZ1bmN0aW9uKGEpe2E/KHRoaXMuaC5pbmZvKFwiU3VjY2Vzc2Z1bGx5IHBpbmdlZCBnb29nbGUuY29tXCIpLEooMikpOih0aGlzLmguaW5mbyhcIkZhaWxlZCB0byBwaW5nIGdvb2dsZS5jb21cIiksSigxKSk7fTtcbmZ1bmN0aW9uIExkKGEpe2EuRz0wO2EuST0tMTtpZihhLmope2lmKDAhPWpkKGEuaSkubGVuZ3RofHwwIT1hLmwubGVuZ3RoKWEuaS5pLmxlbmd0aD0wLHJhKGEubCksYS5sLmxlbmd0aD0wO2Euai51YSgpO319ZnVuY3Rpb24gRWMoYSxiLGMpe2xldCBkPWFkKGMpO2lmKFwiXCIhPWQuaSliJiZQYyhkLGIrXCIuXCIrZC5pKSxRYyhkLGQubSk7ZWxzZSB7Y29uc3QgZT1sLmxvY2F0aW9uO2Q9YmQoZS5wcm90b2NvbCxiP2IrXCIuXCIrZS5ob3N0bmFtZTplLmhvc3RuYW1lLCtlLnBvcnQsYyk7fWEuYWEmJnhhKGEuYWEsZnVuY3Rpb24oZSxmKXtSKGQsZixlKTt9KTtiPWEuRDtjPWEuc2E7YiYmYyYmUihkLGIsYyk7UihkLFwiVkVSXCIsYS5tYSk7S2QoYSxkKTtyZXR1cm4gZH1cbmZ1bmN0aW9uIG5jKGEsYixjKXtpZihiJiYhYS5IKXRocm93IEVycm9yKFwiQ2FuJ3QgY3JlYXRlIHNlY29uZGFyeSBkb21haW4gY2FwYWJsZSBYaHJJbyBvYmplY3QuXCIpO2I9YyYmYS5CYSYmIWEucWE/bmV3IFgobmV3IHBkKHtpYjohMH0pKTpuZXcgWChhLnFhKTtiLkw9YS5IO3JldHVybiBifWZ1bmN0aW9uIFNkKCl7fWs9U2QucHJvdG90eXBlO2sueGE9ZnVuY3Rpb24oKXt9O2sud2E9ZnVuY3Rpb24oKXt9O2sudmE9ZnVuY3Rpb24oKXt9O2sudWE9ZnVuY3Rpb24oKXt9O2suT2E9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIFRkKCl7aWYoeSYmISgxMDw9TnVtYmVyKFVhKSkpdGhyb3cgRXJyb3IoXCJFbnZpcm9ubWVudGFsIGVycm9yOiBubyBhdmFpbGFibGUgdHJhbnNwb3J0LlwiKTt9VGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFkoYSxiKX07XG5mdW5jdGlvbiBZKGEsYil7Qy5jYWxsKHRoaXMpO3RoaXMuZz1uZXcgSWQoYik7dGhpcy5sPWE7dGhpcy5oPWImJmIubWVzc2FnZVVybFBhcmFtc3x8bnVsbDthPWImJmIubWVzc2FnZUhlYWRlcnN8fG51bGw7YiYmYi5jbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkJiYoYT9hW1wiWC1DbGllbnQtUHJvdG9jb2xcIl09XCJ3ZWJjaGFubmVsXCI6YT17XCJYLUNsaWVudC1Qcm90b2NvbFwiOlwid2ViY2hhbm5lbFwifSk7dGhpcy5nLnM9YTthPWImJmIuaW5pdE1lc3NhZ2VIZWFkZXJzfHxudWxsO2ImJmIubWVzc2FnZUNvbnRlbnRUeXBlJiYoYT9hW1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiXT1iLm1lc3NhZ2VDb250ZW50VHlwZTphPXtcIlgtV2ViQ2hhbm5lbC1Db250ZW50LVR5cGVcIjpiLm1lc3NhZ2VDb250ZW50VHlwZX0pO2ImJmIueWEmJihhP2FbXCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIl09Yi55YTphPXtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiOmIueWF9KTt0aGlzLmcuUD1cbmE7KGE9YiYmYi5odHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtKSYmIXNhKGEpJiYodGhpcy5nLm89YSk7dGhpcy5BPWImJmIuc3VwcG9ydHNDcm9zc0RvbWFpblhocnx8ITE7dGhpcy52PWImJmIuc2VuZFJhd0pzb258fCExOyhiPWImJmIuaHR0cFNlc3Npb25JZFBhcmFtKSYmIXNhKGIpJiYodGhpcy5nLkQ9YixhPXRoaXMuaCxudWxsIT09YSYmYiBpbiBhJiYoYT10aGlzLmgsYiBpbiBhJiZkZWxldGUgYVtiXSkpO3RoaXMuaj1uZXcgWih0aGlzKTt9dChZLEMpO1kucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt0aGlzLmcuaj10aGlzLmo7dGhpcy5BJiYodGhpcy5nLkg9ITApO3ZhciBhPXRoaXMuZyxiPXRoaXMubCxjPXRoaXMuaHx8dm9pZCAwO2EuV2EmJihhLmguaW5mbyhcIk9yaWdpbiBUcmlhbHMgZW5hYmxlZC5cIiksemIocShhLmhiLGEsYikpKTtKKDApO2EuVz1iO2EuYWE9Y3x8e307YS5OPWEuWDthLkY9RWMoYSxudWxsLGEuVyk7SGMoYSk7fTtZLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe0ljKHRoaXMuZyk7fTtcblkucHJvdG90eXBlLnU9ZnVuY3Rpb24oYSl7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXt2YXIgYj17fTtiLl9fZGF0YV9fPWE7TWQodGhpcy5nLGIpO31lbHNlIHRoaXMudj8oYj17fSxiLl9fZGF0YV9fPXJiKGEpLE1kKHRoaXMuZyxiKSk6TWQodGhpcy5nLGEpO307WS5wcm90b3R5cGUuTT1mdW5jdGlvbigpe3RoaXMuZy5qPW51bGw7ZGVsZXRlIHRoaXMuajtJYyh0aGlzLmcpO2RlbGV0ZSB0aGlzLmc7WS5aLk0uY2FsbCh0aGlzKTt9O2Z1bmN0aW9uIFVkKGEpe2FjLmNhbGwodGhpcyk7dmFyIGI9YS5fX3NtX187aWYoYil7YTp7Zm9yKGNvbnN0IGMgaW4gYil7YT1jO2JyZWFrIGF9YT12b2lkIDA7fWlmKHRoaXMuaT1hKWE9dGhpcy5pLGI9bnVsbCE9PWImJmEgaW4gYj9iW2FdOnZvaWQgMDt0aGlzLmRhdGE9Yjt9ZWxzZSB0aGlzLmRhdGE9YTt9dChVZCxhYyk7ZnVuY3Rpb24gVmQoKXtiYy5jYWxsKHRoaXMpO3RoaXMuc3RhdHVzPTE7fXQoVmQsYmMpO2Z1bmN0aW9uIFooYSl7dGhpcy5nPWE7fVxudChaLFNkKTtaLnByb3RvdHlwZS54YT1mdW5jdGlvbigpe0QodGhpcy5nLFwiYVwiKTt9O1oucHJvdG90eXBlLndhPWZ1bmN0aW9uKGEpe0QodGhpcy5nLG5ldyBVZChhKSk7fTtaLnByb3RvdHlwZS52YT1mdW5jdGlvbihhKXtEKHRoaXMuZyxuZXcgVmQoYSkpO307Wi5wcm90b3R5cGUudWE9ZnVuY3Rpb24oKXtEKHRoaXMuZyxcImJcIik7fTsvKlxuXG4gQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuXG4gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG4gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuVGQucHJvdG90eXBlLmNyZWF0ZVdlYkNoYW5uZWw9VGQucHJvdG90eXBlLmc7WS5wcm90b3R5cGUuc2VuZD1ZLnByb3RvdHlwZS51O1kucHJvdG90eXBlLm9wZW49WS5wcm90b3R5cGUubTtZLnByb3RvdHlwZS5jbG9zZT1ZLnByb3RvdHlwZS5jbG9zZTtXYi5OT19FUlJPUj0wO1diLlRJTUVPVVQ9ODtXYi5IVFRQX0VSUk9SPTY7WGIuQ09NUExFVEU9XCJjb21wbGV0ZVwiOyRiLkV2ZW50VHlwZT1MO0wuT1BFTj1cImFcIjtMLkNMT1NFPVwiYlwiO0wuRVJST1I9XCJjXCI7TC5NRVNTQUdFPVwiZFwiO0MucHJvdG90eXBlLmxpc3Rlbj1DLnByb3RvdHlwZS5OO1gucHJvdG90eXBlLmxpc3Rlbk9uY2U9WC5wcm90b3R5cGUuTztYLnByb3RvdHlwZS5nZXRMYXN0RXJyb3I9WC5wcm90b3R5cGUuTGE7WC5wcm90b3R5cGUuZ2V0TGFzdEVycm9yQ29kZT1YLnByb3RvdHlwZS5EYTtYLnByb3RvdHlwZS5nZXRTdGF0dXM9WC5wcm90b3R5cGUuYmE7WC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VKc29uPVgucHJvdG90eXBlLlFhO1xuWC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VUZXh0PVgucHJvdG90eXBlLmdhO1gucHJvdG90eXBlLnNlbmQ9WC5wcm90b3R5cGUuZWE7dmFyIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQgPSBlc20uY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydD1mdW5jdGlvbigpe3JldHVybiBuZXcgVGR9O3ZhciBnZXRTdGF0RXZlbnRUYXJnZXQgPSBlc20uZ2V0U3RhdEV2ZW50VGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIFNiKCl9O3ZhciBFcnJvckNvZGUgPSBlc20uRXJyb3JDb2RlPVdiO3ZhciBFdmVudFR5cGUgPSBlc20uRXZlbnRUeXBlPVhiO3ZhciBFdmVudCA9IGVzbS5FdmVudD1IO3ZhciBTdGF0ID0gZXNtLlN0YXQ9e3JiOjAsdWI6MSx2YjoyLE9iOjMsVGI6NCxRYjo1LFJiOjYsUGI6NyxOYjo4LFNiOjksUFJPWFk6MTAsTk9QUk9YWToxMSxMYjoxMixIYjoxMyxJYjoxNCxHYjoxNSxKYjoxNixLYjoxNyxuYjoxOCxtYjoxOSxvYjoyMH07dmFyIEZldGNoWG1sSHR0cEZhY3RvcnkgPSBlc20uRmV0Y2hYbWxIdHRwRmFjdG9yeT1wZDt2YXIgV2ViQ2hhbm5lbCA9IGVzbS5XZWJDaGFubmVsPSRiO1xudmFyIFhocklvID0gZXNtLlhocklvPVg7XG5cbmV4cG9ydCB7IEVycm9yQ29kZSwgRXZlbnQsIEV2ZW50VHlwZSwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgU3RhdCwgV2ViQ2hhbm5lbCwgWGhySW8sIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGVzbSBhcyBkZWZhdWx0LCBnZXRTdGF0RXZlbnRUYXJnZXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiwgX2dldFByb3ZpZGVyLCBnZXRBcHAsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIFNES19WRVJTSU9OIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGdldE1vZHVsYXJJbnN0YW5jZSwgZGVlcEVxdWFsLCBnZXRVQSwgaXNJbmRleGVkREJBdmFpbGFibGUsIGlzU2FmYXJpLCBpc01vYmlsZUNvcmRvdmEsIGlzUmVhY3ROYXRpdmUsIGlzRWxlY3Ryb24sIGlzSUUsIGlzVVdQLCBpc0Jyb3dzZXJFeHRlbnNpb24gfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBYaHJJbywgRXZlbnRUeXBlLCBFcnJvckNvZGUsIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGdldFN0YXRFdmVudFRhcmdldCwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgV2ViQ2hhbm5lbCwgRXZlbnQsIFN0YXQgfSBmcm9tICdAZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyJztcblxuY29uc3QgUyA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTaW1wbGUgd3JhcHBlciBhcm91bmQgYSBudWxsYWJsZSBVSUQuIE1vc3RseSBleGlzdHMgdG8gbWFrZSBjb2RlIG1vcmVcbiAqIHJlYWRhYmxlLlxuICovXG5jbGFzcyBEIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudWlkID0gdDtcbiAgICB9XG4gICAgaXNBdXRoZW50aWNhdGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPSB0aGlzLnVpZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGtleSByZXByZXNlbnRpbmcgdGhpcyB1c2VyLCBzdWl0YWJsZSBmb3IgaW5jbHVzaW9uIGluIGFcbiAgICAgKiBkaWN0aW9uYXJ5LlxuICAgICAqLyAgICB0b0tleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNBdXRoZW50aWNhdGVkKCkgPyBcInVpZDpcIiArIHRoaXMudWlkIDogXCJhbm9ueW1vdXMtdXNlclwiO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQudWlkID09PSB0aGlzLnVpZDtcbiAgICB9XG59XG5cbi8qKiBBIHVzZXIgd2l0aCBhIG51bGwgVUlELiAqLyBELlVOQVVUSEVOVElDQVRFRCA9IG5ldyBEKG51bGwpLCBcbi8vIFRPRE8obWlrZWxlaGVuKTogTG9vayBpbnRvIGdldHRpbmcgYSBwcm9wZXIgdWlkLWVxdWl2YWxlbnQgZm9yXG4vLyBub24tRmlyZWJhc2VBdXRoIHByb3ZpZGVycy5cbkQuR09PR0xFX0NSRURFTlRJQUxTID0gbmV3IEQoXCJnb29nbGUtY3JlZGVudGlhbHMtdWlkXCIpLCBELkZJUlNUX1BBUlRZID0gbmV3IEQoXCJmaXJzdC1wYXJ0eS11aWRcIiksIFxuRC5NT0NLX1VTRVIgPSBuZXcgRChcIm1vY2stdXNlclwiKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmxldCBDID0gXCI5LjIuMFwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgTiA9IG5ldyBMb2dnZXIoXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCIpO1xuXG4vLyBIZWxwZXIgbWV0aG9kcyBhcmUgbmVlZGVkIGJlY2F1c2UgdmFyaWFibGVzIGNhbid0IGJlIGV4cG9ydGVkIGFzIHJlYWQvd3JpdGVcbmZ1bmN0aW9uIHgoKSB7XG4gICAgcmV0dXJuIE4ubG9nTGV2ZWw7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdmVyYm9zaXR5IG9mIENsb3VkIEZpcmVzdG9yZSBsb2dzIChkZWJ1ZywgZXJyb3IsIG9yIHNpbGVudCkuXG4gKlxuICogQHBhcmFtIGxvZ0xldmVsIC0gVGhlIHZlcmJvc2l0eSB5b3Ugc2V0IGZvciBhY3Rpdml0eSBhbmQgZXJyb3IgbG9nZ2luZy4gQ2FuXG4gKiAgIGJlIGFueSBvZiB0aGUgZm9sbG93aW5nIHZhbHVlczpcbiAqXG4gKiAgIDx1bD5cbiAqICAgICA8bGk+YGRlYnVnYCBmb3IgdGhlIG1vc3QgdmVyYm9zZSBsb2dnaW5nIGxldmVsLCBwcmltYXJpbHkgZm9yXG4gKiAgICAgZGVidWdnaW5nLjwvbGk+XG4gKiAgICAgPGxpPmBlcnJvcmAgdG8gbG9nIGVycm9ycyBvbmx5LjwvbGk+XG4gKiAgICAgPGxpPjxjb2RlPmBzaWxlbnRgIHRvIHR1cm4gb2ZmIGxvZ2dpbmcuPC9saT5cbiAqICAgPC91bD5cbiAqLyBmdW5jdGlvbiBrKHQpIHtcbiAgICBOLnNldExvZ0xldmVsKHQpO1xufVxuXG5mdW5jdGlvbiAkKHQsIC4uLmUpIHtcbiAgICBpZiAoTi5sb2dMZXZlbCA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgICBjb25zdCBuID0gZS5tYXAoTSk7XG4gICAgICAgIE4uZGVidWcoYEZpcmVzdG9yZSAoJHtDfSk6ICR7dH1gLCAuLi5uKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE8odCwgLi4uZSkge1xuICAgIGlmIChOLmxvZ0xldmVsIDw9IExvZ0xldmVsLkVSUk9SKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcChNKTtcbiAgICAgICAgTi5lcnJvcihgRmlyZXN0b3JlICgke0N9KTogJHt0fWAsIC4uLm4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBGKHQsIC4uLmUpIHtcbiAgICBpZiAoTi5sb2dMZXZlbCA8PSBMb2dMZXZlbC5XQVJOKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcChNKTtcbiAgICAgICAgTi53YXJuKGBGaXJlc3RvcmUgKCR7Q30pOiAke3R9YCwgLi4ubik7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFkZGl0aW9uYWwgbG9nIHBhcmFtZXRlciB0byBhIHN0cmluZyByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBNKHQpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHQ7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGUgPSB0LCBKU09OLnN0cmluZ2lmeShlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIENvbnZlcnRpbmcgdG8gSlNPTiBmYWlsZWQsIGp1c3QgbG9nIHRoZSBvYmplY3QgZGlyZWN0bHlcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqIEZvcm1hdHMgYW4gb2JqZWN0IGFzIGEgSlNPTiBzdHJpbmcsIHN1aXRhYmxlIGZvciBsb2dnaW5nLiAqL1xuICAgIHZhciBlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBVbmNvbmRpdGlvbmFsbHkgZmFpbHMsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXG4gKiBNZXNzYWdlcyBhcmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gKlxuICogUmV0dXJucyBgbmV2ZXJgIGFuZCBjYW4gYmUgdXNlZCBpbiBleHByZXNzaW9uczpcbiAqIEBleGFtcGxlXG4gKiBsZXQgZnV0dXJlVmFyID0gZmFpbCgnbm90IGltcGxlbWVudGVkIHlldCcpO1xuICovIGZ1bmN0aW9uIEwodCA9IFwiVW5leHBlY3RlZCBzdGF0ZVwiKSB7XG4gICAgLy8gTG9nIHRoZSBmYWlsdXJlIGluIGFkZGl0aW9uIHRvIHRocm93IGFuIGV4Y2VwdGlvbiwganVzdCBpbiBjYXNlIHRoZVxuICAgIC8vIGV4Y2VwdGlvbiBpcyBzd2FsbG93ZWQuXG4gICAgY29uc3QgZSA9IGBGSVJFU1RPUkUgKCR7Q30pIElOVEVSTkFMIEFTU0VSVElPTiBGQUlMRUQ6IGAgKyB0O1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IHVzZSBGaXJlc3RvcmVFcnJvciBoZXJlIGJlY2F1c2UgdGhlc2UgYXJlIGludGVybmFsIGZhaWx1cmVzXG4gICAgLy8gdGhhdCBjYW5ub3QgYmUgaGFuZGxlZCBieSB0aGUgdXNlci4gKEFsc28gaXQgd291bGQgY3JlYXRlIGEgY2lyY3VsYXJcbiAgICAvLyBkZXBlbmRlbmN5IGJldHdlZW4gdGhlIGVycm9yIGFuZCBhc3NlcnQgbW9kdWxlcyB3aGljaCBkb2Vzbid0IHdvcmsuKVxuICAgIHRocm93IE8oZSksIG5ldyBFcnJvcihlKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIE1lc3NhZ2VzIGFyZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAqLyBmdW5jdGlvbiBCKHQsIGUpIHtcbiAgICB0IHx8IEwoKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIFRoZSBjb2RlIG9mIGNhbGxzaXRlcyBpbnZva2luZyB0aGlzIGZ1bmN0aW9uIGFyZSBzdHJpcHBlZCBvdXQgaW4gcHJvZHVjdGlvblxuICogYnVpbGRzLiBBbnkgc2lkZS1lZmZlY3RzIG9mIGNvZGUgd2l0aGluIHRoZSBkZWJ1Z0Fzc2VydCgpIGludm9jYXRpb24gd2lsbCBub3RcbiAqIGhhcHBlbiBpbiB0aGlzIGNhc2UuXG4gKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gVSh0LCBlKSB7XG4gICAgdCB8fCBMKCk7XG59XG5cbi8qKlxuICogQ2FzdHMgYG9iamAgdG8gYFRgLiBJbiBub24tcHJvZHVjdGlvbiBidWlsZHMsIHZlcmlmaWVzIHRoYXQgYG9iamAgaXMgYW5cbiAqIGluc3RhbmNlIG9mIGBUYCBiZWZvcmUgY2FzdGluZy5cbiAqLyBmdW5jdGlvbiBxKHQsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmUpIHtcbiAgICByZXR1cm4gdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgSyA9IHtcbiAgICAvLyBDYXVzZXMgYXJlIGNvcGllZCBmcm9tOlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ncnBjL2dycGMvYmxvYi9iY2VlYzk0ZWE0ZmM1ZjAwODVkODEyMzVkOGUxYzA2Nzk4ZGMzNDFhL2luY2x1ZGUvZ3JwYyUyQiUyQi9pbXBsL2NvZGVnZW4vc3RhdHVzX2NvZGVfZW51bS5oXG4gICAgLyoqIE5vdCBhbiBlcnJvcjsgcmV0dXJuZWQgb24gc3VjY2Vzcy4gKi9cbiAgICBPSzogXCJva1wiLFxuICAgIC8qKiBUaGUgb3BlcmF0aW9uIHdhcyBjYW5jZWxsZWQgKHR5cGljYWxseSBieSB0aGUgY2FsbGVyKS4gKi9cbiAgICBDQU5DRUxMRUQ6IFwiY2FuY2VsbGVkXCIsXG4gICAgLyoqIFVua25vd24gZXJyb3Igb3IgYW4gZXJyb3IgZnJvbSBhIGRpZmZlcmVudCBlcnJvciBkb21haW4uICovXG4gICAgVU5LTk9XTjogXCJ1bmtub3duXCIsXG4gICAgLyoqXG4gICAgICogQ2xpZW50IHNwZWNpZmllZCBhbiBpbnZhbGlkIGFyZ3VtZW50LiBOb3RlIHRoYXQgdGhpcyBkaWZmZXJzIGZyb21cbiAgICAgKiBGQUlMRURfUFJFQ09ORElUSU9OLiBJTlZBTElEX0FSR1VNRU5UIGluZGljYXRlcyBhcmd1bWVudHMgdGhhdCBhcmVcbiAgICAgKiBwcm9ibGVtYXRpYyByZWdhcmRsZXNzIG9mIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtIChlLmcuLCBhIG1hbGZvcm1lZCBmaWxlXG4gICAgICogbmFtZSkuXG4gICAgICovXG4gICAgSU5WQUxJRF9BUkdVTUVOVDogXCJpbnZhbGlkLWFyZ3VtZW50XCIsXG4gICAgLyoqXG4gICAgICogRGVhZGxpbmUgZXhwaXJlZCBiZWZvcmUgb3BlcmF0aW9uIGNvdWxkIGNvbXBsZXRlLiBGb3Igb3BlcmF0aW9ucyB0aGF0XG4gICAgICogY2hhbmdlIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtLCB0aGlzIGVycm9yIG1heSBiZSByZXR1cm5lZCBldmVuIGlmIHRoZVxuICAgICAqIG9wZXJhdGlvbiBoYXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4gRm9yIGV4YW1wbGUsIGEgc3VjY2Vzc2Z1bCByZXNwb25zZVxuICAgICAqIGZyb20gYSBzZXJ2ZXIgY291bGQgaGF2ZSBiZWVuIGRlbGF5ZWQgbG9uZyBlbm91Z2ggZm9yIHRoZSBkZWFkbGluZSB0b1xuICAgICAqIGV4cGlyZS5cbiAgICAgKi9cbiAgICBERUFETElORV9FWENFRURFRDogXCJkZWFkbGluZS1leGNlZWRlZFwiLFxuICAgIC8qKiBTb21lIHJlcXVlc3RlZCBlbnRpdHkgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSB3YXMgbm90IGZvdW5kLiAqL1xuICAgIE5PVF9GT1VORDogXCJub3QtZm91bmRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIGVudGl0eSB0aGF0IHdlIGF0dGVtcHRlZCB0byBjcmVhdGUgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSBhbHJlYWR5XG4gICAgICogZXhpc3RzLlxuICAgICAqL1xuICAgIEFMUkVBRFlfRVhJU1RTOiBcImFscmVhZHktZXhpc3RzXCIsXG4gICAgLyoqXG4gICAgICogVGhlIGNhbGxlciBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gZXhlY3V0ZSB0aGUgc3BlY2lmaWVkIG9wZXJhdGlvbi5cbiAgICAgKiBQRVJNSVNTSU9OX0RFTklFRCBtdXN0IG5vdCBiZSB1c2VkIGZvciByZWplY3Rpb25zIGNhdXNlZCBieSBleGhhdXN0aW5nXG4gICAgICogc29tZSByZXNvdXJjZSAodXNlIFJFU09VUkNFX0VYSEFVU1RFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgaWYgdGhlIGNhbGxlciBjYW4gbm90IGJlIGlkZW50aWZpZWRcbiAgICAgKiAodXNlIFVOQVVUSEVOVElDQVRFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqL1xuICAgIFBFUk1JU1NJT05fREVOSUVEOiBcInBlcm1pc3Npb24tZGVuaWVkXCIsXG4gICAgLyoqXG4gICAgICogVGhlIHJlcXVlc3QgZG9lcyBub3QgaGF2ZSB2YWxpZCBhdXRoZW50aWNhdGlvbiBjcmVkZW50aWFscyBmb3IgdGhlXG4gICAgICogb3BlcmF0aW9uLlxuICAgICAqL1xuICAgIFVOQVVUSEVOVElDQVRFRDogXCJ1bmF1dGhlbnRpY2F0ZWRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIHJlc291cmNlIGhhcyBiZWVuIGV4aGF1c3RlZCwgcGVyaGFwcyBhIHBlci11c2VyIHF1b3RhLCBvciBwZXJoYXBzIHRoZVxuICAgICAqIGVudGlyZSBmaWxlIHN5c3RlbSBpcyBvdXQgb2Ygc3BhY2UuXG4gICAgICovXG4gICAgUkVTT1VSQ0VfRVhIQVVTVEVEOiBcInJlc291cmNlLWV4aGF1c3RlZFwiLFxuICAgIC8qKlxuICAgICAqIE9wZXJhdGlvbiB3YXMgcmVqZWN0ZWQgYmVjYXVzZSB0aGUgc3lzdGVtIGlzIG5vdCBpbiBhIHN0YXRlIHJlcXVpcmVkIGZvclxuICAgICAqIHRoZSBvcGVyYXRpb24ncyBleGVjdXRpb24uIEZvciBleGFtcGxlLCBkaXJlY3RvcnkgdG8gYmUgZGVsZXRlZCBtYXkgYmVcbiAgICAgKiBub24tZW1wdHksIGFuIHJtZGlyIG9wZXJhdGlvbiBpcyBhcHBsaWVkIHRvIGEgbm9uLWRpcmVjdG9yeSwgZXRjLlxuICAgICAqXG4gICAgICogQSBsaXRtdXMgdGVzdCB0aGF0IG1heSBoZWxwIGEgc2VydmljZSBpbXBsZW1lbnRvciBpbiBkZWNpZGluZ1xuICAgICAqIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCwgYW5kIFVOQVZBSUxBQkxFOlxuICAgICAqICAoYSkgVXNlIFVOQVZBSUxBQkxFIGlmIHRoZSBjbGllbnQgY2FuIHJldHJ5IGp1c3QgdGhlIGZhaWxpbmcgY2FsbC5cbiAgICAgKiAgKGIpIFVzZSBBQk9SVEVEIGlmIHRoZSBjbGllbnQgc2hvdWxkIHJldHJ5IGF0IGEgaGlnaGVyLWxldmVsXG4gICAgICogICAgICAoZS5nLiwgcmVzdGFydGluZyBhIHJlYWQtbW9kaWZ5LXdyaXRlIHNlcXVlbmNlKS5cbiAgICAgKiAgKGMpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bnRpbFxuICAgICAqICAgICAgdGhlIHN5c3RlbSBzdGF0ZSBoYXMgYmVlbiBleHBsaWNpdGx5IGZpeGVkLiBFLmcuLCBpZiBhbiBcInJtZGlyXCJcbiAgICAgKiAgICAgIGZhaWxzIGJlY2F1c2UgdGhlIGRpcmVjdG9yeSBpcyBub24tZW1wdHksIEZBSUxFRF9QUkVDT05ESVRJT05cbiAgICAgKiAgICAgIHNob3VsZCBiZSByZXR1cm5lZCBzaW5jZSB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW5sZXNzXG4gICAgICogICAgICB0aGV5IGhhdmUgZmlyc3QgZml4ZWQgdXAgdGhlIGRpcmVjdG9yeSBieSBkZWxldGluZyBmaWxlcyBmcm9tIGl0LlxuICAgICAqICAoZCkgVXNlIEZBSUxFRF9QUkVDT05ESVRJT04gaWYgdGhlIGNsaWVudCBwZXJmb3JtcyBjb25kaXRpb25hbFxuICAgICAqICAgICAgUkVTVCBHZXQvVXBkYXRlL0RlbGV0ZSBvbiBhIHJlc291cmNlIGFuZCB0aGUgcmVzb3VyY2Ugb24gdGhlXG4gICAgICogICAgICBzZXJ2ZXIgZG9lcyBub3QgbWF0Y2ggdGhlIGNvbmRpdGlvbi4gRS5nLiwgY29uZmxpY3RpbmdcbiAgICAgKiAgICAgIHJlYWQtbW9kaWZ5LXdyaXRlIG9uIHRoZSBzYW1lIHJlc291cmNlLlxuICAgICAqL1xuICAgIEZBSUxFRF9QUkVDT05ESVRJT046IFwiZmFpbGVkLXByZWNvbmRpdGlvblwiLFxuICAgIC8qKlxuICAgICAqIFRoZSBvcGVyYXRpb24gd2FzIGFib3J0ZWQsIHR5cGljYWxseSBkdWUgdG8gYSBjb25jdXJyZW5jeSBpc3N1ZSBsaWtlXG4gICAgICogc2VxdWVuY2VyIGNoZWNrIGZhaWx1cmVzLCB0cmFuc2FjdGlvbiBhYm9ydHMsIGV0Yy5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBBQk9SVEVEOiBcImFib3J0ZWRcIixcbiAgICAvKipcbiAgICAgKiBPcGVyYXRpb24gd2FzIGF0dGVtcHRlZCBwYXN0IHRoZSB2YWxpZCByYW5nZS4gRS5nLiwgc2Vla2luZyBvciByZWFkaW5nXG4gICAgICogcGFzdCBlbmQgb2YgZmlsZS5cbiAgICAgKlxuICAgICAqIFVubGlrZSBJTlZBTElEX0FSR1VNRU5ULCB0aGlzIGVycm9yIGluZGljYXRlcyBhIHByb2JsZW0gdGhhdCBtYXkgYmUgZml4ZWRcbiAgICAgKiBpZiB0aGUgc3lzdGVtIHN0YXRlIGNoYW5nZXMuIEZvciBleGFtcGxlLCBhIDMyLWJpdCBmaWxlIHN5c3RlbSB3aWxsXG4gICAgICogZ2VuZXJhdGUgSU5WQUxJRF9BUkdVTUVOVCBpZiBhc2tlZCB0byByZWFkIGF0IGFuIG9mZnNldCB0aGF0IGlzIG5vdCBpbiB0aGVcbiAgICAgKiByYW5nZSBbMCwyXjMyLTFdLCBidXQgaXQgd2lsbCBnZW5lcmF0ZSBPVVRfT0ZfUkFOR0UgaWYgYXNrZWQgdG8gcmVhZCBmcm9tXG4gICAgICogYW4gb2Zmc2V0IHBhc3QgdGhlIGN1cnJlbnQgZmlsZSBzaXplLlxuICAgICAqXG4gICAgICogVGhlcmUgaXMgYSBmYWlyIGJpdCBvZiBvdmVybGFwIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgKiBPVVRfT0ZfUkFOR0UuIFdlIHJlY29tbWVuZCB1c2luZyBPVVRfT0ZfUkFOR0UgKHRoZSBtb3JlIHNwZWNpZmljIGVycm9yKVxuICAgICAqIHdoZW4gaXQgYXBwbGllcyBzbyB0aGF0IGNhbGxlcnMgd2hvIGFyZSBpdGVyYXRpbmcgdGhyb3VnaCBhIHNwYWNlIGNhblxuICAgICAqIGVhc2lseSBsb29rIGZvciBhbiBPVVRfT0ZfUkFOR0UgZXJyb3IgdG8gZGV0ZWN0IHdoZW4gdGhleSBhcmUgZG9uZS5cbiAgICAgKi9cbiAgICBPVVRfT0ZfUkFOR0U6IFwib3V0LW9mLXJhbmdlXCIsXG4gICAgLyoqIE9wZXJhdGlvbiBpcyBub3QgaW1wbGVtZW50ZWQgb3Igbm90IHN1cHBvcnRlZC9lbmFibGVkIGluIHRoaXMgc2VydmljZS4gKi9cbiAgICBVTklNUExFTUVOVEVEOiBcInVuaW1wbGVtZW50ZWRcIixcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBlcnJvcnMuIE1lYW5zIHNvbWUgaW52YXJpYW50cyBleHBlY3RlZCBieSB1bmRlcmx5aW5nIFN5c3RlbSBoYXNcbiAgICAgKiBiZWVuIGJyb2tlbi4gSWYgeW91IHNlZSBvbmUgb2YgdGhlc2UgZXJyb3JzLCBTb21ldGhpbmcgaXMgdmVyeSBicm9rZW4uXG4gICAgICovXG4gICAgSU5URVJOQUw6IFwiaW50ZXJuYWxcIixcbiAgICAvKipcbiAgICAgKiBUaGUgc2VydmljZSBpcyBjdXJyZW50bHkgdW5hdmFpbGFibGUuIFRoaXMgaXMgYSBtb3N0IGxpa2VseSBhIHRyYW5zaWVudFxuICAgICAqIGNvbmRpdGlvbiBhbmQgbWF5IGJlIGNvcnJlY3RlZCBieSByZXRyeWluZyB3aXRoIGEgYmFja29mZi5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBVTkFWQUlMQUJMRTogXCJ1bmF2YWlsYWJsZVwiLFxuICAgIC8qKiBVbnJlY292ZXJhYmxlIGRhdGEgbG9zcyBvciBjb3JydXB0aW9uLiAqL1xuICAgIERBVEFfTE9TUzogXCJkYXRhLWxvc3NcIlxufTtcblxuLyoqIEFuIGVycm9yIHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIG9wZXJhdGlvbi4gKi8gY2xhc3MgaiBleHRlbmRzIEVycm9yIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBiYWNrZW5kIGVycm9yIGNvZGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZXJyb3IuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogQSBjdXN0b20gZXJyb3IgZGVzY3JpcHRpb24uXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICBzdXBlcihlKSwgdGhpcy5jb2RlID0gdCwgdGhpcy5tZXNzYWdlID0gZSwgXG4gICAgICAgIC8qKiBUaGUgY3VzdG9tIG5hbWUgZm9yIGFsbCBGaXJlc3RvcmVFcnJvcnMuICovXG4gICAgICAgIHRoaXMubmFtZSA9IFwiRmlyZWJhc2VFcnJvclwiLCBcbiAgICAgICAgLy8gSEFDSzogV2Ugd3JpdGUgYSB0b1N0cmluZyBwcm9wZXJ0eSBkaXJlY3RseSBiZWNhdXNlIEVycm9yIGlzIG5vdCBhIHJlYWxcbiAgICAgICAgLy8gY2xhc3MgYW5kIHNvIGluaGVyaXRhbmNlIGRvZXMgbm90IHdvcmsgY29ycmVjdGx5LiBXZSBjb3VsZCBhbHRlcm5hdGl2ZWx5XG4gICAgICAgIC8vIGRvIHRoZSBzYW1lIFwiYmFjay1kb29yIGluaGVyaXRhbmNlXCIgdHJpY2sgdGhhdCBGaXJlYmFzZUVycm9yIGRvZXMuXG4gICAgICAgIHRoaXMudG9TdHJpbmcgPSAoKSA9PiBgJHt0aGlzLm5hbWV9OiBbY29kZT0ke3RoaXMuY29kZX1dOiAke3RoaXMubWVzc2FnZX1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgUSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gdCwgdGhpcy5yZWplY3QgPSBlO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBXIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudXNlciA9IGUsIHRoaXMudHlwZSA9IFwiT0F1dGhcIiwgdGhpcy5hdXRoSGVhZGVycyA9IHt9LCBcbiAgICAgICAgLy8gU2V0IHRoZSBoZWFkZXJzIHVzaW5nIE9iamVjdCBMaXRlcmFsIG5vdGF0aW9uIHRvIGF2b2lkIG1pbmlmaWNhdGlvblxuICAgICAgICB0aGlzLmF1dGhIZWFkZXJzLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7dH1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIENyZWRlbnRpYWxzUHJvdmlkZXIgdGhhdCBhbHdheXMgeWllbGRzIGFuIGVtcHR5IHRva2VuLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgRyB7XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxuICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IGUoRC5VTkFVVEhFTlRJQ0FURUQpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbn1cblxuLyoqXG4gKiBBIENyZWRlbnRpYWxzUHJvdmlkZXIgdGhhdCBhbHdheXMgcmV0dXJucyBhIGNvbnN0YW50IHRva2VuLiBVc2VkIGZvclxuICogZW11bGF0b3IgdG9rZW4gbW9ja2luZy5cbiAqLyBjbGFzcyB6IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudG9rZW4gPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0b3JlcyB0aGUgbGlzdGVuZXIgcmVnaXN0ZXJlZCB3aXRoIHNldENoYW5nZUxpc3RlbmVyKClcbiAgICAgICAgICogVGhpcyBpc24ndCBhY3R1YWxseSBuZWNlc3Nhcnkgc2luY2UgdGhlIFVJRCBuZXZlciBjaGFuZ2VzLCBidXQgd2UgdXNlIHRoaXNcbiAgICAgICAgICogdG8gdmVyaWZ5IHRoZSBsaXN0ZW4gY29udHJhY3QgaXMgYWRoZXJlZCB0byBpbiB0ZXN0cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnRva2VuKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBlLCBcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdXNlci5cbiAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBlKHRoaXMudG9rZW4udXNlcikpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xuICAgIH1cbn1cblxuY2xhc3MgSCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnQgPSB0LCBcbiAgICAgICAgLyoqIFRyYWNrcyB0aGUgY3VycmVudCBVc2VyLiAqL1xuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gRC5VTkFVVEhFTlRJQ0FURUQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ291bnRlciB1c2VkIHRvIGRldGVjdCBpZiB0aGUgdG9rZW4gY2hhbmdlZCB3aGlsZSBhIGdldFRva2VuIHJlcXVlc3Qgd2FzXG4gICAgICAgICAqIG91dHN0YW5kaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pID0gMCwgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hdXRoID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICBsZXQgbiA9IHRoaXMuaTtcbiAgICAgICAgLy8gQSBjaGFuZ2UgbGlzdGVuZXIgdGhhdCBwcmV2ZW50cyBkb3VibGUtZmlyaW5nIGZvciB0aGUgc2FtZSB0b2tlbiBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHQgPT4gdGhpcy5pICE9PSBuID8gKG4gPSB0aGlzLmksIGUodCkpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIC8vIEEgcHJvbWlzZSB0aGF0IGNhbiBiZSB3YWl0ZWQgb24gdG8gYmxvY2sgb24gdGhlIG5leHQgdG9rZW4gY2hhbmdlLlxuICAgICAgICAvLyBUaGlzIHByb21pc2UgaXMgcmUtY3JlYXRlZCBhZnRlciBlYWNoIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBsZXQgaSA9IG5ldyBRO1xuICAgICAgICB0aGlzLm8gPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmkrKywgdGhpcy5jdXJyZW50VXNlciA9IHRoaXMudSgpLCBpLnJlc29sdmUoKSwgaSA9IG5ldyBRLCB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IHModGhpcy5jdXJyZW50VXNlcikpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgciA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBpO1xuICAgICAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZS5wcm9taXNlLCBhd2FpdCBzKHRoaXMuY3VycmVudFVzZXIpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9LCBvID0gdCA9PiB7XG4gICAgICAgICAgICAkKFwiRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBkZXRlY3RlZFwiKSwgdGhpcy5hdXRoID0gdCwgdGhpcy5hdXRoLmFkZEF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyksIFxuICAgICAgICAgICAgcigpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnQub25Jbml0KCh0ID0+IG8odCkpKSwgXG4gICAgICAgIC8vIE91ciB1c2VycyBjYW4gaW5pdGlhbGl6ZSBBdXRoIHJpZ2h0IGFmdGVyIEZpcmVzdG9yZSwgc28gd2UgZ2l2ZSBpdFxuICAgICAgICAvLyBhIGNoYW5jZSB0byByZWdpc3RlciBpdHNlbGYgd2l0aCB0aGUgY29tcG9uZW50IGZyYW1ld29yayBiZWZvcmUgd2VcbiAgICAgICAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdG8gc3RhcnQgdXAgaW4gdW5hdXRoZW50aWNhdGVkIG1vZGUuXG4gICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hdXRoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMudC5nZXRJbW1lZGlhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0ID8gbyh0KSA6IChcbiAgICAgICAgICAgICAgICAvLyBJZiBhdXRoIGlzIHN0aWxsIG5vdCBhdmFpbGFibGUsIHByb2NlZWQgd2l0aCBgbnVsbGAgdXNlclxuICAgICAgICAgICAgICAgICQoXCJGaXJlYmFzZUNyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJBdXRoIG5vdCB5ZXQgZGV0ZWN0ZWRcIiksIGkucmVzb2x2ZSgpLCBpID0gbmV3IFEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgMCksIHIoKTtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIC8vIFRha2Ugbm90ZSBvZiB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgdG9rZW5Db3VudGVyIHNvIHRoYXQgdGhpcyBtZXRob2RcbiAgICAgICAgLy8gY2FuIGZhaWwgKHdpdGggYW4gQUJPUlRFRCBlcnJvcikgaWYgdGhlcmUgaXMgYSB0b2tlbiBjaGFuZ2Ugd2hpbGUgdGhlXG4gICAgICAgIC8vIHJlcXVlc3QgaXMgb3V0c3RhbmRpbmcuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmksIGUgPSB0aGlzLmZvcmNlUmVmcmVzaDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXV0aCA/IHRoaXMuYXV0aC5nZXRUb2tlbihlKS50aGVuKChlID0+IFxuICAgICAgICAvLyBDYW5jZWwgdGhlIHJlcXVlc3Qgc2luY2UgdGhlIHRva2VuIGNoYW5nZWQgd2hpbGUgdGhlIHJlcXVlc3Qgd2FzXG4gICAgICAgIC8vIG91dHN0YW5kaW5nIHNvIHRoZSByZXNwb25zZSBpcyBwb3RlbnRpYWxseSBmb3IgYSBwcmV2aW91cyB1c2VyICh3aGljaFxuICAgICAgICAvLyB1c2VyLCB3ZSBjYW4ndCBiZSBzdXJlKS5cbiAgICAgICAgdGhpcy5pICE9PSB0ID8gKCQoXCJGaXJlYmFzZUNyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJnZXRUb2tlbiBhYm9ydGVkIGR1ZSB0byB0b2tlbiBjaGFuZ2UuXCIpLCBcbiAgICAgICAgdGhpcy5nZXRUb2tlbigpKSA6IGUgPyAoQihcInN0cmluZ1wiID09IHR5cGVvZiBlLmFjY2Vzc1Rva2VuKSwgbmV3IFcoZS5hY2Nlc3NUb2tlbiwgdGhpcy5jdXJyZW50VXNlcikpIDogbnVsbCkpIDogUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7XG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gITA7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmF1dGggJiYgdGhpcy5hdXRoLnJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgfVxuICAgIC8vIEF1dGguZ2V0VWlkKCkgY2FuIHJldHVybiBudWxsIGV2ZW4gd2l0aCBhIHVzZXIgbG9nZ2VkIGluLiBJdCBpcyBiZWNhdXNlXG4gICAgLy8gZ2V0VWlkKCkgaXMgc3luY2hyb25vdXMsIGJ1dCB0aGUgYXV0aCBjb2RlIHBvcHVsYXRpbmcgVWlkIGlzIGFzeW5jaHJvbm91cy5cbiAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgaW4gdGhlIEF1dGhUb2tlbkxpc3RlbmVyIGNhbGxiYWNrXG4gICAgLy8gdG8gZ3VhcmFudGVlIHRvIGdldCB0aGUgYWN0dWFsIHVzZXIuXG4gICAgdSgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuYXV0aCAmJiB0aGlzLmF1dGguZ2V0VWlkKCk7XG4gICAgICAgIHJldHVybiBCKG51bGwgPT09IHQgfHwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCksIG5ldyBEKHQpO1xuICAgIH1cbn1cblxuLypcbiAqIEZpcnN0UGFydHlUb2tlbiBwcm92aWRlcyBhIGZyZXNoIHRva2VuIGVhY2ggdGltZSBpdHMgdmFsdWVcbiAqIGlzIHJlcXVlc3RlZCwgYmVjYXVzZSBpZiB0aGUgdG9rZW4gaXMgdG9vIG9sZCwgcmVxdWVzdHMgd2lsbCBiZSByZWplY3RlZC5cbiAqIFRlY2huaWNhbGx5IHRoaXMgbWF5IG5vIGxvbmdlciBiZSBuZWNlc3Nhcnkgc2luY2UgdGhlIFNESyBzaG91bGQgZ3JhY2VmdWxseVxuICogcmVjb3ZlciBmcm9tIHVuYXV0aGVudGljYXRlZCBlcnJvcnMgKHNlZSBiLzMzMTQ3ODE4IGZvciBjb250ZXh0KSwgYnV0IGl0J3NcbiAqIHNhZmVyIHRvIGtlZXAgdGhlIGltcGxlbWVudGF0aW9uIGFzLWlzLlxuICovIGNsYXNzIEoge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5oID0gdCwgdGhpcy5sID0gZSwgdGhpcy5tID0gbiwgdGhpcy50eXBlID0gXCJGaXJzdFBhcnR5XCIsIHRoaXMudXNlciA9IEQuRklSU1RfUEFSVFk7XG4gICAgfVxuICAgIGdldCBhdXRoSGVhZGVycygpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIFwiWC1Hb29nLUF1dGhVc2VyXCI6IHRoaXMubFxuICAgICAgICB9LCBlID0gdGhpcy5oLmF1dGguZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eShbXSk7XG4gICAgICAgIC8vIFVzZSBhcnJheSBub3RhdGlvbiB0byBwcmV2ZW50IG1pbmlmaWNhdGlvblxuICAgICAgICAgICAgICAgIHJldHVybiBlICYmICh0LkF1dGhvcml6YXRpb24gPSBlKSwgdGhpcy5tICYmICh0W1wiWC1Hb29nLUlhbS1BdXRob3JpemF0aW9uLVRva2VuXCJdID0gdGhpcy5tKSwgXG4gICAgICAgIHQ7XG4gICAgfVxufVxuXG4vKlxuICogUHJvdmlkZXMgdXNlciBjcmVkZW50aWFscyByZXF1aXJlZCBmb3IgdGhlIEZpcmVzdG9yZSBKYXZhU2NyaXB0IFNES1xuICogdG8gYXV0aGVudGljYXRlIHRoZSB1c2VyLCB1c2luZyB0ZWNobmlxdWUgdGhhdCBpcyBvbmx5IGF2YWlsYWJsZVxuICogdG8gYXBwbGljYXRpb25zIGhvc3RlZCBieSBHb29nbGUuXG4gKi8gY2xhc3MgWSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmggPSB0LCB0aGlzLmwgPSBlLCB0aGlzLm0gPSBuO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgSih0aGlzLmgsIHRoaXMubCwgdGhpcy5tKSk7XG4gICAgfVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdWlkLlxuICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IGUoRC5GSVJTVF9QQVJUWSkpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG59XG5cbi8qKlxuICogQnVpbGRzIGEgQ3JlZGVudGlhbHNQcm92aWRlciBkZXBlbmRpbmcgb24gdGhlIHR5cGUgb2ZcbiAqIHRoZSBjcmVkZW50aWFscyBwYXNzZWQgaW4uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIGBMaXN0ZW5TZXF1ZW5jZWAgaXMgYSBtb25vdG9uaWMgc2VxdWVuY2UuIEl0IGlzIGluaXRpYWxpemVkIHdpdGggYSBtaW5pbXVtIHZhbHVlIHRvXG4gKiBleGNlZWQuIEFsbCBzdWJzZXF1ZW50IGNhbGxzIHRvIG5leHQgd2lsbCByZXR1cm4gaW5jcmVhc2luZyB2YWx1ZXMuIElmIHByb3ZpZGVkIHdpdGggYVxuICogYFNlcXVlbmNlTnVtYmVyU3luY2VyYCwgaXQgd2lsbCBhZGRpdGlvbmFsbHkgYnVtcCBpdHMgbmV4dCB2YWx1ZSB3aGVuIHRvbGQgb2YgYSBuZXcgdmFsdWUsIGFzXG4gKiB3ZWxsIGFzIHdyaXRlIG91dCBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgaXQgcHJvZHVjZXMgdmlhIGBuZXh0KClgLlxuICovXG5jbGFzcyBYIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IHQsIGUgJiYgKGUuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gdCA9PiB0aGlzLmcodCksIHRoaXMucCA9IHQgPT4gZS53cml0ZVNlcXVlbmNlTnVtYmVyKHQpKTtcbiAgICB9XG4gICAgZyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZXZpb3VzVmFsdWUgPSBNYXRoLm1heCh0LCB0aGlzLnByZXZpb3VzVmFsdWUpLCB0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSArK3RoaXMucHJldmlvdXNWYWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXMucCAmJiB0aGlzLnAodCksIHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgYG5CeXRlc2Agb2YgcmFuZG9tIGJ5dGVzLlxuICpcbiAqIElmIGBuQnl0ZXMgPCAwYCAsIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuICovXG5mdW5jdGlvbiBaKHQpIHtcbiAgICAvLyBQb2x5ZmlsbHMgZm9yIElFIGFuZCBXZWJXb3JrZXIgYnkgdXNpbmcgYHNlbGZgIGFuZCBgbXNDcnlwdG9gIHdoZW4gYGNyeXB0b2AgaXMgbm90IGF2YWlsYWJsZS5cbiAgICBjb25zdCBlID0gXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBzZWxmICYmIChzZWxmLmNyeXB0byB8fCBzZWxmLm1zQ3J5cHRvKSwgbiA9IG5ldyBVaW50OEFycmF5KHQpO1xuICAgIGlmIChlICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZS5nZXRSYW5kb21WYWx1ZXMpIGUuZ2V0UmFuZG9tVmFsdWVzKG4pOyBlbHNlIFxuICAgIC8vIEZhbGxzIGJhY2sgdG8gTWF0aC5yYW5kb21cbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQ7IGUrKykgbltlXSA9IE1hdGguZmxvb3IoMjU2ICogTWF0aC5yYW5kb20oKSk7XG4gICAgcmV0dXJuIG47XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIFguVCA9IC0xO1xuXG5jbGFzcyB0dCB7XG4gICAgc3RhdGljIEkoKSB7XG4gICAgICAgIC8vIEFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzXG4gICAgICAgIGNvbnN0IHQgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCIsIGUgPSBNYXRoLmZsb29yKDI1NiAvIHQubGVuZ3RoKSAqIHQubGVuZ3RoO1xuICAgICAgICAvLyBUaGUgbGFyZ2VzdCBieXRlIHZhbHVlIHRoYXQgaXMgYSBtdWx0aXBsZSBvZiBgY2hhci5sZW5ndGhgLlxuICAgICAgICAgICAgICAgIGxldCBuID0gXCJcIjtcbiAgICAgICAgZm9yICg7bi5sZW5ndGggPCAyMDsgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gWig0MCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMubGVuZ3RoOyArK2kpIFxuICAgICAgICAgICAgLy8gT25seSBhY2NlcHQgdmFsdWVzIHRoYXQgYXJlIFswLCBtYXhNdWx0aXBsZSksIHRoaXMgZW5zdXJlcyB0aGV5IGNhblxuICAgICAgICAgICAgLy8gYmUgZXZlbmx5IG1hcHBlZCB0byBpbmRpY2VzIG9mIGBjaGFyc2AgdmlhIGEgbW9kdWxvIG9wZXJhdGlvbi5cbiAgICAgICAgICAgIG4ubGVuZ3RoIDwgMjAgJiYgc1tpXSA8IGUgJiYgKG4gKz0gdC5jaGFyQXQoc1tpXSAlIHQubGVuZ3RoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxufVxuXG5mdW5jdGlvbiBldCh0LCBlKSB7XG4gICAgcmV0dXJuIHQgPCBlID8gLTEgOiB0ID4gZSA/IDEgOiAwO1xufVxuXG4vKiogSGVscGVyIHRvIGNvbXBhcmUgYXJyYXlzIHVzaW5nIGlzRXF1YWwoKS4gKi8gZnVuY3Rpb24gbnQodCwgZSwgbikge1xuICAgIHJldHVybiB0Lmxlbmd0aCA9PT0gZS5sZW5ndGggJiYgdC5ldmVyeSgoKHQsIHMpID0+IG4odCwgZVtzXSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbW1lZGlhdGUgbGV4aWNvZ3JhcGhpY2FsbHktZm9sbG93aW5nIHN0cmluZy4gVGhpcyBpcyB1c2VmdWwgdG9cbiAqIGNvbnN0cnVjdCBhbiBpbmNsdXNpdmUgcmFuZ2UgZm9yIGluZGV4ZWRkYiBpdGVyYXRvcnMuXG4gKi8gZnVuY3Rpb24gc3QodCkge1xuICAgIC8vIFJldHVybiB0aGUgaW5wdXQgc3RyaW5nLCB3aXRoIGFuIGFkZGl0aW9uYWwgTlVMIGJ5dGUgYXBwZW5kZWQuXG4gICAgcmV0dXJuIHQgKyBcIlxcMFwiO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVGhlIGVhcmxpZXN0IGRhdGUgc3VwcG9ydGVkIGJ5IEZpcmVzdG9yZSB0aW1lc3RhbXBzICgwMDAxLTAxLTAxVDAwOjAwOjAwWikuXG4vKipcbiAqIEEgYFRpbWVzdGFtcGAgcmVwcmVzZW50cyBhIHBvaW50IGluIHRpbWUgaW5kZXBlbmRlbnQgb2YgYW55IHRpbWUgem9uZSBvclxuICogY2FsZW5kYXIsIHJlcHJlc2VudGVkIGFzIHNlY29uZHMgYW5kIGZyYWN0aW9ucyBvZiBzZWNvbmRzIGF0IG5hbm9zZWNvbmRcbiAqIHJlc29sdXRpb24gaW4gVVRDIEVwb2NoIHRpbWUuXG4gKlxuICogSXQgaXMgZW5jb2RlZCB1c2luZyB0aGUgUHJvbGVwdGljIEdyZWdvcmlhbiBDYWxlbmRhciB3aGljaCBleHRlbmRzIHRoZVxuICogR3JlZ29yaWFuIGNhbGVuZGFyIGJhY2t3YXJkcyB0byB5ZWFyIG9uZS4gSXQgaXMgZW5jb2RlZCBhc3N1bWluZyBhbGwgbWludXRlc1xuICogYXJlIDYwIHNlY29uZHMgbG9uZywgaS5lLiBsZWFwIHNlY29uZHMgYXJlIFwic21lYXJlZFwiIHNvIHRoYXQgbm8gbGVhcCBzZWNvbmRcbiAqIHRhYmxlIGlzIG5lZWRlZCBmb3IgaW50ZXJwcmV0YXRpb24uIFJhbmdlIGlzIGZyb20gMDAwMS0wMS0wMVQwMDowMDowMFogdG9cbiAqIDk5OTktMTItMzFUMjM6NTk6NTkuOTk5OTk5OTk5Wi5cbiAqXG4gKiBGb3IgZXhhbXBsZXMgYW5kIGZ1cnRoZXIgc3BlY2lmaWNhdGlvbnMsIHJlZmVyIHRvIHRoZVxuICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvcHJvdG9idWYvYmxvYi9tYXN0ZXIvc3JjL2dvb2dsZS9wcm90b2J1Zi90aW1lc3RhbXAucHJvdG8gfCBUaW1lc3RhbXAgZGVmaW5pdGlvbn0uXG4gKi9cbmNsYXNzIGl0IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZWNvbmRzIC0gVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAgICAgMTk3MC0wMS0wMVQwMDowMDowMFouIE11c3QgYmUgZnJvbSAwMDAxLTAxLTAxVDAwOjAwOjAwWiB0b1xuICAgICAqICAgICA5OTk5LTEyLTMxVDIzOjU5OjU5WiBpbmNsdXNpdmUuXG4gICAgICogQHBhcmFtIG5hbm9zZWNvbmRzIC0gVGhlIG5vbi1uZWdhdGl2ZSBmcmFjdGlvbnMgb2YgYSBzZWNvbmQgYXQgbmFub3NlY29uZFxuICAgICAqICAgICByZXNvbHV0aW9uLiBOZWdhdGl2ZSBzZWNvbmQgdmFsdWVzIHdpdGggZnJhY3Rpb25zIG11c3Qgc3RpbGwgaGF2ZVxuICAgICAqICAgICBub24tbmVnYXRpdmUgbmFub3NlY29uZHMgdmFsdWVzIHRoYXQgY291bnQgZm9yd2FyZCBpbiB0aW1lLiBNdXN0IGJlXG4gICAgICogICAgIGZyb20gMCB0byA5OTksOTk5LDk5OSBpbmNsdXNpdmUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kIHJlc29sdXRpb24uKlxuICAgICAqL1xuICAgIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc2Vjb25kcyA9IHQsIHRoaXMubmFub3NlY29uZHMgPSBlLCBlIDwgMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgZSk7XG4gICAgICAgIGlmIChlID49IDFlOSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgZSk7XG4gICAgICAgIGlmICh0IDwgLTYyMTM1NTk2ODAwKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIHQpO1xuICAgICAgICAvLyBUaGlzIHdpbGwgYnJlYWsgaW4gdGhlIHllYXIgMTAsMDAwLlxuICAgICAgICAgICAgICAgIGlmICh0ID49IDI1MzQwMjMwMDgwMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBzZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgd2l0aCB0aGUgY3VycmVudCBkYXRlLCB3aXRoIG1pbGxpc2Vjb25kIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGEgbmV3IHRpbWVzdGFtcCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgZGF0ZS5cbiAgICAgKi8gICAgc3RhdGljIG5vdygpIHtcbiAgICAgICAgcmV0dXJuIGl0LmZyb21NaWxsaXMoRGF0ZS5ub3coKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIGZyb20gdGhlIGdpdmVuIGRhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0ZSAtIFRoZSBkYXRlIHRvIGluaXRpYWxpemUgdGhlIGBUaW1lc3RhbXBgIGZyb20uXG4gICAgICogQHJldHVybnMgQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXMgdGhlIGdpdmVuXG4gICAgICogICAgIGRhdGUuXG4gICAgICovICAgIHN0YXRpYyBmcm9tRGF0ZSh0KSB7XG4gICAgICAgIHJldHVybiBpdC5mcm9tTWlsbGlzKHQuZ2V0VGltZSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgZnJvbSB0aGUgZ2l2ZW4gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtaWxsaXNlY29uZHMgLSBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAgICAgMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICogQHJldHVybnMgQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXMgdGhlIGdpdmVuXG4gICAgICogICAgIG51bWJlciBvZiBtaWxsaXNlY29uZHMuXG4gICAgICovICAgIHN0YXRpYyBmcm9tTWlsbGlzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IE1hdGguZmxvb3IodCAvIDFlMyksIG4gPSBNYXRoLmZsb29yKDFlNiAqICh0IC0gMWUzICogZSkpO1xuICAgICAgICByZXR1cm4gbmV3IGl0KGUsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGBUaW1lc3RhbXBgIHRvIGEgSmF2YVNjcmlwdCBgRGF0ZWAgb2JqZWN0LiBUaGlzIGNvbnZlcnNpb25cbiAgICAgKiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbiBzaW5jZSBgRGF0ZWAgb2JqZWN0cyBvbmx5IHN1cHBvcnQgbWlsbGlzZWNvbmRcbiAgICAgKiBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBKYXZhU2NyaXB0IGBEYXRlYCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXNcbiAgICAgKiAgICAgdGhpcyBgVGltZXN0YW1wYCwgd2l0aCBtaWxsaXNlY29uZCBwcmVjaXNpb24uXG4gICAgICovICAgIHRvRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMudG9NaWxsaXMoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgYFRpbWVzdGFtcGAgdG8gYSBudW1lcmljIHRpbWVzdGFtcCAoaW4gbWlsbGlzZWNvbmRzIHNpbmNlXG4gICAgICogZXBvY2gpLiBUaGlzIG9wZXJhdGlvbiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBwb2ludCBpbiB0aW1lIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyB0aW1lc3RhbXAsIHJlcHJlc2VudGVkIGFzXG4gICAgICogICAgIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovICAgIHRvTWlsbGlzKCkge1xuICAgICAgICByZXR1cm4gMWUzICogdGhpcy5zZWNvbmRzICsgdGhpcy5uYW5vc2Vjb25kcyAvIDFlNjtcbiAgICB9XG4gICAgX2NvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlY29uZHMgPT09IHQuc2Vjb25kcyA/IGV0KHRoaXMubmFub3NlY29uZHMsIHQubmFub3NlY29uZHMpIDogZXQodGhpcy5zZWNvbmRzLCB0LnNlY29uZHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgVGltZXN0YW1wYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBUaW1lc3RhbXBgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYFRpbWVzdGFtcGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0LnNlY29uZHMgPT09IHRoaXMuc2Vjb25kcyAmJiB0Lm5hbm9zZWNvbmRzID09PSB0aGlzLm5hbm9zZWNvbmRzO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHRleHR1YWwgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgVGltZXN0YW1wYC4gKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIlRpbWVzdGFtcChzZWNvbmRzPVwiICsgdGhpcy5zZWNvbmRzICsgXCIsIG5hbm9zZWNvbmRzPVwiICsgdGhpcy5uYW5vc2Vjb25kcyArIFwiKVwiO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYFRpbWVzdGFtcGAuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlY29uZHM6IHRoaXMuc2Vjb25kcyxcbiAgICAgICAgICAgIG5hbm9zZWNvbmRzOiB0aGlzLm5hbm9zZWNvbmRzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgb2JqZWN0IHRvIGEgcHJpbWl0aXZlIHN0cmluZywgd2hpY2ggYWxsb3dzIGBUaW1lc3RhbXBgIG9iamVjdHNcbiAgICAgKiB0byBiZSBjb21wYXJlZCB1c2luZyB0aGUgYD5gLCBgPD1gLCBgPj1gIGFuZCBgPmAgb3BlcmF0b3JzLlxuICAgICAqLyAgICB2YWx1ZU9mKCkge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCByZXR1cm5zIGEgc3RyaW5nIG9mIHRoZSBmb3JtIDxzZWNvbmRzPi48bmFub3NlY29uZHM+IHdoZXJlXG4gICAgICAgIC8vIDxzZWNvbmRzPiBpcyB0cmFuc2xhdGVkIHRvIGhhdmUgYSBub24tbmVnYXRpdmUgdmFsdWUgYW5kIGJvdGggPHNlY29uZHM+XG4gICAgICAgIC8vIGFuZCA8bmFub3NlY29uZHM+IGFyZSBsZWZ0LXBhZGRlZCB3aXRoIHplcm9lcyB0byBiZSBhIGNvbnNpc3RlbnQgbGVuZ3RoLlxuICAgICAgICAvLyBTdHJpbmdzIHdpdGggdGhpcyBmb3JtYXQgdGhlbiBoYXZlIGEgbGV4aW9ncmFwaGljYWwgb3JkZXJpbmcgdGhhdCBtYXRjaGVzXG4gICAgICAgIC8vIHRoZSBleHBlY3RlZCBvcmRlcmluZy4gVGhlIDxzZWNvbmRzPiB0cmFuc2xhdGlvbiBpcyBkb25lIHRvIGF2b2lkIGhhdmluZ1xuICAgICAgICAvLyBhIGxlYWRpbmcgbmVnYXRpdmUgc2lnbiAoaS5lLiBhIGxlYWRpbmcgJy0nIGNoYXJhY3RlcikgaW4gaXRzIHN0cmluZ1xuICAgICAgICAvLyByZXByZXNlbnRhdGlvbiwgd2hpY2ggd291bGQgYWZmZWN0IGl0cyBsZXhpb2dyYXBoaWNhbCBvcmRlcmluZy5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMuc2Vjb25kcyAtIC02MjEzNTU5NjgwMDtcbiAgICAgICAgLy8gTm90ZTogVXAgdG8gMTIgZGVjaW1hbCBkaWdpdHMgYXJlIHJlcXVpcmVkIHRvIHJlcHJlc2VudCBhbGwgdmFsaWRcbiAgICAgICAgLy8gJ3NlY29uZHMnIHZhbHVlcy5cbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKHQpLnBhZFN0YXJ0KDEyLCBcIjBcIikgKyBcIi5cIiArIFN0cmluZyh0aGlzLm5hbm9zZWNvbmRzKS5wYWRTdGFydCg5LCBcIjBcIik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHZlcnNpb24gb2YgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUuIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIHZlcnNpb25cbiAqIHRpbWVzdGFtcCwgc3VjaCBhcyB1cGRhdGVfdGltZSBvciByZWFkX3RpbWUuXG4gKi8gY2xhc3MgcnQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVRpbWVzdGFtcCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgcnQodCk7XG4gICAgfVxuICAgIHN0YXRpYyBtaW4oKSB7XG4gICAgICAgIHJldHVybiBuZXcgcnQobmV3IGl0KDAsIDApKTtcbiAgICB9XG4gICAgY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLl9jb21wYXJlVG8odC50aW1lc3RhbXApO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLmlzRXF1YWwodC50aW1lc3RhbXApO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIG51bWJlciByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVyc2lvbiBmb3IgdXNlIGluIHNwZWMgdGVzdHMuICovICAgIHRvTWljcm9zZWNvbmRzKCkge1xuICAgICAgICAvLyBDb252ZXJ0IHRvIG1pY3Jvc2Vjb25kcy5cbiAgICAgICAgcmV0dXJuIDFlNiAqIHRoaXMudGltZXN0YW1wLnNlY29uZHMgKyB0aGlzLnRpbWVzdGFtcC5uYW5vc2Vjb25kcyAvIDFlMztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIlNuYXBzaG90VmVyc2lvbihcIiArIHRoaXMudGltZXN0YW1wLnRvU3RyaW5nKCkgKyBcIilcIjtcbiAgICB9XG4gICAgdG9UaW1lc3RhbXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIG90KHQpIHtcbiAgICBsZXQgZSA9IDA7XG4gICAgZm9yIChjb25zdCBuIGluIHQpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBuKSAmJiBlKys7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGN0KHQsIGUpIHtcbiAgICBmb3IgKGNvbnN0IG4gaW4gdCkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIG4pICYmIGUobiwgdFtuXSk7XG59XG5cbmZ1bmN0aW9uIGF0KHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgaW4gdCkgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBlKSkgcmV0dXJuICExO1xuICAgIHJldHVybiAhMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUGF0aCByZXByZXNlbnRzIGFuIG9yZGVyZWQgc2VxdWVuY2Ugb2Ygc3RyaW5nIHNlZ21lbnRzLlxuICovXG5jbGFzcyB1dCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB2b2lkIDAgPT09IGUgPyBlID0gMCA6IGUgPiB0Lmxlbmd0aCAmJiBMKCksIHZvaWQgMCA9PT0gbiA/IG4gPSB0Lmxlbmd0aCAtIGUgOiBuID4gdC5sZW5ndGggLSBlICYmIEwoKSwgXG4gICAgICAgIHRoaXMuc2VnbWVudHMgPSB0LCB0aGlzLm9mZnNldCA9IGUsIHRoaXMubGVuID0gbjtcbiAgICB9XG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVuO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHV0LmNvbXBhcmF0b3IodGhpcywgdCk7XG4gICAgfVxuICAgIGNoaWxkKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc2VnbWVudHMuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMubGltaXQoKSk7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgdXQgPyB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZS5wdXNoKHQpO1xuICAgICAgICB9KSkgOiBlLnB1c2godCksIHRoaXMuY29uc3RydWN0KGUpO1xuICAgIH1cbiAgICAvKiogVGhlIGluZGV4IG9mIG9uZSBwYXN0IHRoZSBsYXN0IHNlZ21lbnQgb2YgdGhlIHBhdGguICovICAgIGxpbWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vZmZzZXQgKyB0aGlzLmxlbmd0aDtcbiAgICB9XG4gICAgcG9wRmlyc3QodCkge1xuICAgICAgICByZXR1cm4gdCA9IHZvaWQgMCA9PT0gdCA/IDEgOiB0LCB0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLCB0aGlzLm9mZnNldCArIHQsIHRoaXMubGVuZ3RoIC0gdCk7XG4gICAgfVxuICAgIHBvcExhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLCB0aGlzLm9mZnNldCwgdGhpcy5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgZmlyc3RTZWdtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldF07XG4gICAgfVxuICAgIGxhc3RTZWdtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQodGhpcy5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHNbdGhpcy5vZmZzZXQgKyB0XTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHRoaXMubGVuZ3RoO1xuICAgIH1cbiAgICBpc1ByZWZpeE9mKHQpIHtcbiAgICAgICAgaWYgKHQubGVuZ3RoIDwgdGhpcy5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLmxlbmd0aDsgZSsrKSBpZiAodGhpcy5nZXQoZSkgIT09IHQuZ2V0KGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgaXNJbW1lZGlhdGVQYXJlbnRPZih0KSB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCArIDEgIT09IHQubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5sZW5ndGg7IGUrKykgaWYgKHRoaXMuZ2V0KGUpICE9PSB0LmdldChlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGZvckVhY2godCkge1xuICAgICAgICBmb3IgKGxldCBlID0gdGhpcy5vZmZzZXQsIG4gPSB0aGlzLmxpbWl0KCk7IGUgPCBuOyBlKyspIHQodGhpcy5zZWdtZW50c1tlXSk7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmxpbWl0KCkpO1xuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyYXRvcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBNYXRoLm1pbih0Lmxlbmd0aCwgZS5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IG47IHMrKykge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZ2V0KHMpLCBpID0gZS5nZXQocyk7XG4gICAgICAgICAgICBpZiAobiA8IGkpIHJldHVybiAtMTtcbiAgICAgICAgICAgIGlmIChuID4gaSkgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQubGVuZ3RoIDwgZS5sZW5ndGggPyAtMSA6IHQubGVuZ3RoID4gZS5sZW5ndGggPyAxIDogMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBzbGFzaC1zZXBhcmF0ZWQgcGF0aCBmb3IgbmF2aWdhdGluZyByZXNvdXJjZXMgKGRvY3VtZW50cyBhbmQgY29sbGVjdGlvbnMpXG4gKiB3aXRoaW4gRmlyZXN0b3JlLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIGh0IGV4dGVuZHMgdXQge1xuICAgIGNvbnN0cnVjdCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgaHQodCwgZSwgbik7XG4gICAgfVxuICAgIGNhbm9uaWNhbFN0cmluZygpIHtcbiAgICAgICAgLy8gTk9URTogVGhlIGNsaWVudCBpcyBpZ25vcmFudCBvZiBhbnkgcGF0aCBzZWdtZW50cyBjb250YWluaW5nIGVzY2FwZVxuICAgICAgICAvLyBzZXF1ZW5jZXMgKGUuZy4gX19pZDEyM19fKSBhbmQganVzdCBwYXNzZXMgdGhlbSB0aHJvdWdoIHJhdyAodGhleSBleGlzdFxuICAgICAgICAvLyBmb3IgbGVnYWN5IHJlYXNvbnMgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBmcmVxdWVudGx5KS5cbiAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLmpvaW4oXCIvXCIpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSByZXNvdXJjZSBwYXRoIGZyb20gdGhlIGdpdmVuIHNsYXNoLWRlbGltaXRlZCBzdHJpbmcuIElmIG11bHRpcGxlXG4gICAgICogYXJndW1lbnRzIGFyZSBwcm92aWRlZCwgYWxsIGNvbXBvbmVudHMgYXJlIGNvbWJpbmVkLiBMZWFkaW5nIGFuZCB0cmFpbGluZ1xuICAgICAqIHNsYXNoZXMgZnJvbSBhbGwgY29tcG9uZW50cyBhcmUgaWdub3JlZC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21TdHJpbmcoLi4udCkge1xuICAgICAgICAvLyBOT1RFOiBUaGUgY2xpZW50IGlzIGlnbm9yYW50IG9mIGFueSBwYXRoIHNlZ21lbnRzIGNvbnRhaW5pbmcgZXNjYXBlXG4gICAgICAgIC8vIHNlcXVlbmNlcyAoZS5nLiBfX2lkMTIzX18pIGFuZCBqdXN0IHBhc3NlcyB0aGVtIHRocm91Z2ggcmF3ICh0aGV5IGV4aXN0XG4gICAgICAgIC8vIGZvciBsZWdhY3kgcmVhc29ucyBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGZyZXF1ZW50bHkpLlxuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSB7XG4gICAgICAgICAgICBpZiAobi5pbmRleE9mKFwiLy9cIikgPj0gMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBzZWdtZW50ICgke259KS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiAvLyBpbiB0aGVtLmApO1xuICAgICAgICAgICAgLy8gU3RyaXAgbGVhZGluZyBhbmQgdHJhbGluZyBzbGFzaGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wdXNoKC4uLm4uc3BsaXQoXCIvXCIpLmZpbHRlcigodCA9PiB0Lmxlbmd0aCA+IDApKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBodChlKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5UGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBodChbXSk7XG4gICAgfVxufVxuXG5jb25zdCBsdCA9IC9eW19hLXpBLVpdW19hLXpBLVowLTldKiQvO1xuXG4vKipcbiAqIEEgZG90LXNlcGFyYXRlZCBwYXRoIGZvciBuYXZpZ2F0aW5nIHN1Yi1vYmplY3RzIHdpdGhpbiBhIGRvY3VtZW50LlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgZnQgZXh0ZW5kcyB1dCB7XG4gICAgY29uc3RydWN0KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBmdCh0LCBlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzdHJpbmcgY291bGQgYmUgdXNlZCBhcyBhIHNlZ21lbnQgaW4gYSBmaWVsZCBwYXRoXG4gICAgICogd2l0aG91dCBlc2NhcGluZy5cbiAgICAgKi8gICAgc3RhdGljIGlzVmFsaWRJZGVudGlmaWVyKHQpIHtcbiAgICAgICAgcmV0dXJuIGx0LnRlc3QodCk7XG4gICAgfVxuICAgIGNhbm9uaWNhbFN0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLm1hcCgodCA9PiAodCA9IHQucmVwbGFjZSgvXFxcXC9nLCBcIlxcXFxcXFxcXCIpLnJlcGxhY2UoL2AvZywgXCJcXFxcYFwiKSwgXG4gICAgICAgIGZ0LmlzVmFsaWRJZGVudGlmaWVyKHQpIHx8ICh0ID0gXCJgXCIgKyB0ICsgXCJgXCIpLCB0KSkpLmpvaW4oXCIuXCIpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGZpZWxkIHJlZmVyZW5jZXMgdGhlIGtleSBvZiBhIGRvY3VtZW50LlxuICAgICAqLyAgICBpc0tleUZpZWxkKCkge1xuICAgICAgICByZXR1cm4gMSA9PT0gdGhpcy5sZW5ndGggJiYgXCJfX25hbWVfX1wiID09PSB0aGlzLmdldCgwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpZWxkIGRlc2lnbmF0aW5nIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cbiAgICAgKi8gICAgc3RhdGljIGtleUZpZWxkKCkge1xuICAgICAgICByZXR1cm4gbmV3IGZ0KFsgXCJfX25hbWVfX1wiIF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBmaWVsZCBzdHJpbmcgZnJvbSB0aGUgZ2l2ZW4gc2VydmVyLWZvcm1hdHRlZCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiAtIFNwbGl0dGluZyB0aGUgZW1wdHkgc3RyaW5nIGlzIG5vdCBhbGxvd2VkIChmb3Igbm93IGF0IGxlYXN0KS5cbiAgICAgKiAtIEVtcHR5IHNlZ21lbnRzIHdpdGhpbiB0aGUgc3RyaW5nIChlLmcuIGlmIHRoZXJlIGFyZSB0d28gY29uc2VjdXRpdmVcbiAgICAgKiAgIHNlcGFyYXRvcnMpIGFyZSBub3QgYWxsb3dlZC5cbiAgICAgKlxuICAgICAqIFRPRE8oYi8zNzI0NDE1Nyk6IHdlIHNob3VsZCBtYWtlIHRoaXMgbW9yZSBzdHJpY3QuIFJpZ2h0IG5vdywgaXQgYWxsb3dzXG4gICAgICogbm9uLWlkZW50aWZpZXIgcGF0aCBjb21wb25lbnRzLCBldmVuIGlmIHRoZXkgYXJlbid0IGVzY2FwZWQuXG4gICAgICovICAgIHN0YXRpYyBmcm9tU2VydmVyRm9ybWF0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBsZXQgbiA9IFwiXCIsIHMgPSAwO1xuICAgICAgICBjb25zdCBpID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKDAgPT09IG4ubGVuZ3RoKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7dH0pLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nYCk7XG4gICAgICAgICAgICBlLnB1c2gobiksIG4gPSBcIlwiO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgciA9ICExO1xuICAgICAgICBmb3IgKDtzIDwgdC5sZW5ndGg7ICkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRbc107XG4gICAgICAgICAgICBpZiAoXCJcXFxcXCIgPT09IGUpIHtcbiAgICAgICAgICAgICAgICBpZiAocyArIDEgPT09IHQubGVuZ3RoKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiUGF0aCBoYXMgdHJhaWxpbmcgZXNjYXBlIGNoYXJhY3RlcjogXCIgKyB0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdFtzICsgMV07XG4gICAgICAgICAgICAgICAgaWYgKFwiXFxcXFwiICE9PSBlICYmIFwiLlwiICE9PSBlICYmIFwiYFwiICE9PSBlKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiUGF0aCBoYXMgaW52YWxpZCBlc2NhcGUgc2VxdWVuY2U6IFwiICsgdCk7XG4gICAgICAgICAgICAgICAgbiArPSBlLCBzICs9IDI7XG4gICAgICAgICAgICB9IGVsc2UgXCJgXCIgPT09IGUgPyAociA9ICFyLCBzKyspIDogXCIuXCIgIT09IGUgfHwgciA/IChuICs9IGUsIHMrKykgOiAoaSgpLCBzKyspO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpKCksIHIpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJVbnRlcm1pbmF0ZWQgYCBpbiBwYXRoOiBcIiArIHQpO1xuICAgICAgICByZXR1cm4gbmV3IGZ0KGUpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHlQYXRoKCkge1xuICAgICAgICByZXR1cm4gbmV3IGZ0KFtdKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2V0IG9mIGZpZWxkcyB0aGF0IGNhbiBiZSB1c2VkIHRvIHBhcnRpYWxseSBwYXRjaCBhIGRvY3VtZW50LlxuICogRmllbGRNYXNrIGlzIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBPYmplY3RWYWx1ZS5cbiAqIEV4YW1wbGVzOlxuICogICBmb28gLSBPdmVyd3JpdGVzIGZvbyBlbnRpcmVseSB3aXRoIHRoZSBwcm92aWRlZCB2YWx1ZS4gSWYgZm9vIGlzIG5vdFxuICogICAgICAgICBwcmVzZW50IGluIHRoZSBjb21wYW5pb24gT2JqZWN0VmFsdWUsIHRoZSBmaWVsZCBpcyBkZWxldGVkLlxuICogICBmb28uYmFyIC0gT3ZlcndyaXRlcyBvbmx5IHRoZSBmaWVsZCBiYXIgb2YgdGhlIG9iamVjdCBmb28uXG4gKiAgICAgICAgICAgICBJZiBmb28gaXMgbm90IGFuIG9iamVjdCwgZm9vIGlzIHJlcGxhY2VkIHdpdGggYW4gb2JqZWN0XG4gKiAgICAgICAgICAgICBjb250YWluaW5nIGZvb1xuICovIGNsYXNzIGR0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZmllbGRzID0gdCwgXG4gICAgICAgIC8vIFRPRE8oZGltb25kKTogdmFsaWRhdGlvbiBvZiBGaWVsZE1hc2tcbiAgICAgICAgLy8gU29ydCB0aGUgZmllbGQgbWFzayB0byBzdXBwb3J0IGBGaWVsZE1hc2suaXNFcXVhbCgpYCBhbmQgYXNzZXJ0IGJlbG93LlxuICAgICAgICB0LnNvcnQoZnQuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgYGZpZWxkUGF0aGAgaXMgaW5jbHVkZWQgYnkgYXQgbGVhc3Qgb25lIGZpZWxkIGluIHRoaXMgZmllbGRcbiAgICAgKiBtYXNrLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBhbiBPKG4pIG9wZXJhdGlvbiwgd2hlcmUgYG5gIGlzIHRoZSBzaXplIG9mIHRoZSBmaWVsZCBtYXNrLlxuICAgICAqLyAgICBjb3ZlcnModCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5maWVsZHMpIGlmIChlLmlzUHJlZml4T2YodCkpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIG50KHRoaXMuZmllbGRzLCB0LmZpZWxkcywgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQ29udmVydHMgYSBCYXNlNjQgZW5jb2RlZCBzdHJpbmcgdG8gYSBiaW5hcnkgc3RyaW5nLiAqL1xuLyoqIFRydWUgaWYgYW5kIG9ubHkgaWYgdGhlIEJhc2U2NCBjb252ZXJzaW9uIGZ1bmN0aW9ucyBhcmUgYXZhaWxhYmxlLiAqL1xuZnVuY3Rpb24gd3QoKSB7XG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGF0b2I7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltbXV0YWJsZSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBcInByb3RvXCIgYnl0ZSBzdHJpbmcuXG4gKlxuICogUHJvdG8gYnl0ZSBzdHJpbmdzIGNhbiBlaXRoZXIgYmUgQmFzZTY0LWVuY29kZWQgc3RyaW5ncyBvciBVaW50OEFycmF5cyB3aGVuXG4gKiBzZW50IG9uIHRoZSB3aXJlLiBUaGlzIGNsYXNzIGFic3RyYWN0cyBhd2F5IHRoaXMgZGlmZmVyZW50aWF0aW9uIGJ5IGhvbGRpbmdcbiAqIHRoZSBwcm90byBieXRlIHN0cmluZyBpbiBhIGNvbW1vbiBjbGFzcyB0aGF0IG11c3QgYmUgY29udmVydGVkIGludG8gYSBzdHJpbmdcbiAqIGJlZm9yZSBiZWluZyBzZW50IGFzIGEgcHJvdG8uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBfdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmJpbmFyeVN0cmluZyA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGF0b2IodCk7XG4gICAgICAgIHJldHVybiBuZXcgX3QoZSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tVWludDhBcnJheSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBcbiAgICAgICAgLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBhbiBVaW50OGFycmF5IHRvIGEgYmluYXJ5IHN0cmluZy5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBsZXQgZSA9IFwiXCI7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyArK24pIGUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh0W25dKTtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBiaW5hcnkgc3RyaW5nIHRvIGFuIFVpbnQ4QXJyYXkuXG4gKi8gKHQpO1xuICAgICAgICByZXR1cm4gbmV3IF90KGUpO1xuICAgIH1cbiAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIHQgPSB0aGlzLmJpbmFyeVN0cmluZywgYnRvYSh0KTtcbiAgICAgICAgLyoqIENvbnZlcnRzIGEgYmluYXJ5IHN0cmluZyB0byBhIEJhc2U2NCBlbmNvZGVkIHN0cmluZy4gKi9cbiAgICAgICAgdmFyIHQ7XG4gICAgfVxuICAgIHRvVWludDhBcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgVWludDhBcnJheSh0Lmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyBuKyspIGVbbl0gPSB0LmNoYXJDb2RlQXQobik7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvLyBBIFJlZ0V4cCBtYXRjaGluZyBJU08gODYwMSBVVEMgdGltZXN0YW1wcyB3aXRoIG9wdGlvbmFsIGZyYWN0aW9uLlxuICAgICAgICAodGhpcy5iaW5hcnlTdHJpbmcpO1xuICAgIH1cbiAgICBhcHByb3hpbWF0ZUJ5dGVTaXplKCkge1xuICAgICAgICByZXR1cm4gMiAqIHRoaXMuYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgICB9XG4gICAgY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIGV0KHRoaXMuYmluYXJ5U3RyaW5nLCB0LmJpbmFyeVN0cmluZyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5hcnlTdHJpbmcgPT09IHQuYmluYXJ5U3RyaW5nO1xuICAgIH1cbn1cblxuX3QuRU1QVFlfQllURV9TVFJJTkcgPSBuZXcgX3QoXCJcIik7XG5cbmNvbnN0IG10ID0gbmV3IFJlZ0V4cCgvXlxcZHs0fS1cXGRcXGQtXFxkXFxkVFxcZFxcZDpcXGRcXGQ6XFxkXFxkKD86XFwuKFxcZCspKT9aJC8pO1xuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB2YWx1ZXMgZm9yIGEgdGltZXN0YW1wIHZhbHVlIGludG8gYSBcInNlY29uZHMgYW5kXG4gKiBuYW5vc1wiIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIGd0KHQpIHtcbiAgICAvLyBUaGUganNvbiBpbnRlcmZhY2UgKGZvciB0aGUgYnJvd3Nlcikgd2lsbCByZXR1cm4gYW4gaXNvIHRpbWVzdGFtcCBzdHJpbmcsXG4gICAgLy8gd2hpbGUgdGhlIHByb3RvIGpzIGxpYnJhcnkgKGZvciBub2RlKSB3aWxsIHJldHVybiBhXG4gICAgLy8gZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCBpbnN0YW5jZS5cbiAgICBpZiAoQighIXQpLCBcInN0cmluZ1wiID09IHR5cGVvZiB0KSB7XG4gICAgICAgIC8vIFRoZSBkYXRlIHN0cmluZyBjYW4gaGF2ZSBoaWdoZXIgcHJlY2lzaW9uIChuYW5vcykgdGhhbiB0aGUgRGF0ZSBjbGFzc1xuICAgICAgICAvLyAobWlsbGlzKSwgc28gd2UgZG8gc29tZSBjdXN0b20gcGFyc2luZyBoZXJlLlxuICAgICAgICAvLyBQYXJzZSB0aGUgbmFub3MgcmlnaHQgb3V0IG9mIHRoZSBzdHJpbmcuXG4gICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgY29uc3QgbiA9IG10LmV4ZWModCk7XG4gICAgICAgIGlmIChCKCEhbiksIG5bMV0pIHtcbiAgICAgICAgICAgIC8vIFBhZCB0aGUgZnJhY3Rpb24gb3V0IHRvIDkgZGlnaXRzIChuYW5vcykuXG4gICAgICAgICAgICBsZXQgdCA9IG5bMV07XG4gICAgICAgICAgICB0ID0gKHQgKyBcIjAwMDAwMDAwMFwiKS5zdWJzdHIoMCwgOSksIGUgPSBOdW1iZXIodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUGFyc2UgdGhlIGRhdGUgdG8gZ2V0IHRoZSBzZWNvbmRzLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgRGF0ZSh0KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlY29uZHM6IE1hdGguZmxvb3Iocy5nZXRUaW1lKCkgLyAxZTMpLFxuICAgICAgICAgICAgbmFub3M6IGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2Vjb25kczogeXQodC5zZWNvbmRzKSxcbiAgICAgICAgbmFub3M6IHl0KHQubmFub3MpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdHlwZXMgZm9yIG51bWJlcnMgaW50byBhIEphdmFTY3JpcHQgbnVtYmVyLlxuICogUmV0dXJucyAwIGlmIHRoZSB2YWx1ZSBpcyBub3QgbnVtZXJpYy5cbiAqLyBmdW5jdGlvbiB5dCh0KSB7XG4gICAgLy8gVE9ETyhiam9ybmljayk6IEhhbmRsZSBpbnQ2NCBncmVhdGVyIHRoYW4gNTMgYml0cy5cbiAgICByZXR1cm4gXCJudW1iZXJcIiA9PSB0eXBlb2YgdCA/IHQgOiBcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gTnVtYmVyKHQpIDogMDtcbn1cblxuLyoqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB0eXBlcyBmb3IgQmxvYnMgaW50byBhIEJ5dGVTdHJpbmcuICovIGZ1bmN0aW9uIHB0KHQpIHtcbiAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IF90LmZyb21CYXNlNjRTdHJpbmcodCkgOiBfdC5mcm9tVWludDhBcnJheSh0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGxvY2FsbHktYXBwbGllZCBTZXJ2ZXJUaW1lc3RhbXAuXG4gKlxuICogU2VydmVyIFRpbWVzdGFtcHMgYXJlIGJhY2tlZCBieSBNYXBWYWx1ZXMgdGhhdCBjb250YWluIGFuIGludGVybmFsIGZpZWxkXG4gKiBgX190eXBlX19gIHdpdGggYSB2YWx1ZSBvZiBgc2VydmVyX3RpbWVzdGFtcGAuIFRoZSBwcmV2aW91cyB2YWx1ZSBhbmQgbG9jYWxcbiAqIHdyaXRlIHRpbWUgYXJlIHN0b3JlZCBpbiBpdHMgYF9fcHJldmlvdXNfdmFsdWVfX2AgYW5kIGBfX2xvY2FsX3dyaXRlX3RpbWVfX2BcbiAqIGZpZWxkcyByZXNwZWN0aXZlbHkuXG4gKlxuICogTm90ZXM6XG4gKiAtIFNlcnZlclRpbWVzdGFtcFZhbHVlIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBhcyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGFcbiAqICAgdHJhbnNmb3JtLiBUaGV5IGNhbiBvbmx5IGV4aXN0IGluIHRoZSBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQuIFRoZXJlZm9yZVxuICogICB0aGV5IGRvIG5vdCBuZWVkIHRvIGJlIHBhcnNlZCBvciBzZXJpYWxpemVkLlxuICogLSBXaGVuIGV2YWx1YXRlZCBsb2NhbGx5IChlLmcuIGZvciBzbmFwc2hvdC5kYXRhKCkpLCB0aGV5IGJ5IGRlZmF1bHRcbiAqICAgZXZhbHVhdGUgdG8gYG51bGxgLiBUaGlzIGJlaGF2aW9yIGNhbiBiZSBjb25maWd1cmVkIGJ5IHBhc3NpbmcgY3VzdG9tXG4gKiAgIEZpZWxkVmFsdWVPcHRpb25zIHRvIHZhbHVlKCkuXG4gKiAtIFdpdGggcmVzcGVjdCB0byBvdGhlciBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZXMsIHRoZXkgc29ydCBieSB0aGVpclxuICogICBsb2NhbFdyaXRlVGltZS5cbiAqLyBmdW5jdGlvbiBUdCh0KSB7XG4gICAgdmFyIGUsIG47XG4gICAgcmV0dXJuIFwic2VydmVyX3RpbWVzdGFtcFwiID09PSAobnVsbCA9PT0gKG4gPSAoKG51bGwgPT09IChlID0gbnVsbCA9PSB0ID8gdm9pZCAwIDogdC5tYXBWYWx1ZSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5maWVsZHMpIHx8IHt9KS5fX3R5cGVfXykgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5zdHJpbmdWYWx1ZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBTZXJ2ZXJUaW1lc3RhbXAgcHJvdG8gdmFsdWUgKHVzaW5nIHRoZSBpbnRlcm5hbCBmb3JtYXQpLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBmaWVsZCBiZWZvcmUgdGhpcyBTZXJ2ZXJUaW1lc3RhbXAgd2FzIHNldC5cbiAqXG4gKiBQcmVzZXJ2aW5nIHRoZSBwcmV2aW91cyB2YWx1ZXMgYWxsb3dzIHRoZSB1c2VyIHRvIGRpc3BsYXkgdGhlIGxhc3QgcmVzb2xlZFxuICogdmFsdWUgdW50aWwgdGhlIGJhY2tlbmQgcmVzcG9uZHMgd2l0aCB0aGUgdGltZXN0YW1wLlxuICovXG5mdW5jdGlvbiBFdCh0KSB7XG4gICAgY29uc3QgZSA9IHQubWFwVmFsdWUuZmllbGRzLl9fcHJldmlvdXNfdmFsdWVfXztcbiAgICByZXR1cm4gVHQoZSkgPyBFdChlKSA6IGU7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbG9jYWwgdGltZSBhdCB3aGljaCB0aGlzIHRpbWVzdGFtcCB3YXMgZmlyc3Qgc2V0LlxuICovIGZ1bmN0aW9uIEl0KHQpIHtcbiAgICBjb25zdCBlID0gZ3QodC5tYXBWYWx1ZS5maWVsZHMuX19sb2NhbF93cml0ZV90aW1lX18udGltZXN0YW1wVmFsdWUpO1xuICAgIHJldHVybiBuZXcgaXQoZS5zZWNvbmRzLCBlLm5hbm9zKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBTZW50aW5lbCB2YWx1ZSB0aGF0IHNvcnRzIGJlZm9yZSBhbnkgTXV0YXRpb24gQmF0Y2ggSUQuICovXG4vKipcbiAqIFJldHVybnMgd2hldGhlciBhIHZhcmlhYmxlIGlzIGVpdGhlciB1bmRlZmluZWQgb3IgbnVsbC5cbiAqL1xuZnVuY3Rpb24gQXQodCkge1xuICAgIHJldHVybiBudWxsID09IHQ7XG59XG5cbi8qKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHZhbHVlIHJlcHJlc2VudHMgLTAuICovIGZ1bmN0aW9uIFJ0KHQpIHtcbiAgICAvLyBEZXRlY3QgaWYgdGhlIHZhbHVlIGlzIC0wLjAuIEJhc2VkIG9uIHBvbHlmaWxsIGZyb21cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvaXNcbiAgICByZXR1cm4gMCA9PT0gdCAmJiAxIC8gdCA9PSAtMSAvIDA7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFsdWUgaXMgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgaW50ZWdlciByYW5nZVxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHRlc3QgZm9yIGJlaW5nIGFuIGludGVnZXIgYW5kIGluIHRoZSBzYWZlIHJhbmdlXG4gKi8gZnVuY3Rpb24gYnQodCkge1xuICAgIHJldHVybiBcIm51bWJlclwiID09IHR5cGVvZiB0ICYmIE51bWJlci5pc0ludGVnZXIodCkgJiYgIVJ0KHQpICYmIHQgPD0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgJiYgdCA+PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgUHQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gdDtcbiAgICB9XG4gICAgc3RhdGljIGZyb21QYXRoKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQdChodC5mcm9tU3RyaW5nKHQpKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21OYW1lKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQdChodC5mcm9tU3RyaW5nKHQpLnBvcEZpcnN0KDUpKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZG9jdW1lbnQgaXMgaW4gdGhlIHNwZWNpZmllZCBjb2xsZWN0aW9uSWQuICovICAgIGhhc0NvbGxlY3Rpb25JZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgubGVuZ3RoID49IDIgJiYgdGhpcy5wYXRoLmdldCh0aGlzLnBhdGgubGVuZ3RoIC0gMikgPT09IHQ7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdCAmJiAwID09PSBodC5jb21wYXJhdG9yKHRoaXMucGF0aCwgdC5wYXRoKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmF0b3IodCwgZSkge1xuICAgICAgICByZXR1cm4gaHQuY29tcGFyYXRvcih0LnBhdGgsIGUucGF0aCk7XG4gICAgfVxuICAgIHN0YXRpYyBpc0RvY3VtZW50S2V5KHQpIHtcbiAgICAgICAgcmV0dXJuIHQubGVuZ3RoICUgMiA9PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGRvY3VtZW50IGtleSB3aXRoIHRoZSBnaXZlbiBzZWdtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZWdtZW50cyAtIFRoZSBzZWdtZW50cyBvZiB0aGUgcGF0aCB0byB0aGUgZG9jdW1lbnRcbiAgICAgKiBAcmV0dXJucyBBIG5ldyBpbnN0YW5jZSBvZiBEb2N1bWVudEtleVxuICAgICAqLyAgICBzdGF0aWMgZnJvbVNlZ21lbnRzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQdChuZXcgaHQodC5zbGljZSgpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEV4dHJhY3RzIHRoZSBiYWNrZW5kJ3MgdHlwZSBvcmRlciBmb3IgdGhlIHByb3ZpZGVkIHZhbHVlLiAqLyBmdW5jdGlvbiB2dCh0KSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gdCA/IDAgLyogTnVsbFZhbHVlICovIDogXCJib29sZWFuVmFsdWVcIiBpbiB0ID8gMSAvKiBCb29sZWFuVmFsdWUgKi8gOiBcImludGVnZXJWYWx1ZVwiIGluIHQgfHwgXCJkb3VibGVWYWx1ZVwiIGluIHQgPyAyIC8qIE51bWJlclZhbHVlICovIDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIHQgPyAzIC8qIFRpbWVzdGFtcFZhbHVlICovIDogXCJzdHJpbmdWYWx1ZVwiIGluIHQgPyA1IC8qIFN0cmluZ1ZhbHVlICovIDogXCJieXRlc1ZhbHVlXCIgaW4gdCA/IDYgLyogQmxvYlZhbHVlICovIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIHQgPyA3IC8qIFJlZlZhbHVlICovIDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gdCA/IDggLyogR2VvUG9pbnRWYWx1ZSAqLyA6IFwiYXJyYXlWYWx1ZVwiIGluIHQgPyA5IC8qIEFycmF5VmFsdWUgKi8gOiBcIm1hcFZhbHVlXCIgaW4gdCA/IFR0KHQpID8gNCAvKiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6IDEwIC8qIE9iamVjdFZhbHVlICovIDogTCgpO1xufVxuXG4vKiogVGVzdHMgYGxlZnRgIGFuZCBgcmlnaHRgIGZvciBlcXVhbGl0eSBiYXNlZCBvbiB0aGUgYmFja2VuZCBzZW1hbnRpY3MuICovIGZ1bmN0aW9uIFZ0KHQsIGUpIHtcbiAgICBjb25zdCBuID0gdnQodCk7XG4gICAgaWYgKG4gIT09IHZ0KGUpKSByZXR1cm4gITE7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDAgLyogTnVsbFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDEgLyogQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHQuYm9vbGVhblZhbHVlID09PSBlLmJvb2xlYW5WYWx1ZTtcblxuICAgICAgY2FzZSA0IC8qIFNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIEl0KHQpLmlzRXF1YWwoSXQoZSkpO1xuXG4gICAgICBjYXNlIDMgLyogVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQudGltZXN0YW1wVmFsdWUgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS50aW1lc3RhbXBWYWx1ZSAmJiB0LnRpbWVzdGFtcFZhbHVlLmxlbmd0aCA9PT0gZS50aW1lc3RhbXBWYWx1ZS5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gVXNlIHN0cmluZyBlcXVhbGl0eSBmb3IgSVNPIDg2MDEgdGltZXN0YW1wc1xuICAgICAgICAgICAgcmV0dXJuIHQudGltZXN0YW1wVmFsdWUgPT09IGUudGltZXN0YW1wVmFsdWU7XG4gICAgICAgICAgICBjb25zdCBuID0gZ3QodC50aW1lc3RhbXBWYWx1ZSksIHMgPSBndChlLnRpbWVzdGFtcFZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuLnNlY29uZHMgPT09IHMuc2Vjb25kcyAmJiBuLm5hbm9zID09PSBzLm5hbm9zO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDUgLyogU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5zdHJpbmdWYWx1ZSA9PT0gZS5zdHJpbmdWYWx1ZTtcblxuICAgICAgY2FzZSA2IC8qIEJsb2JWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gcHQodC5ieXRlc1ZhbHVlKS5pc0VxdWFsKHB0KGUuYnl0ZXNWYWx1ZSkpO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDcgLyogUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5yZWZlcmVuY2VWYWx1ZSA9PT0gZS5yZWZlcmVuY2VWYWx1ZTtcblxuICAgICAgY2FzZSA4IC8qIEdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIHl0KHQuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgPT09IHl0KGUuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgJiYgeXQodC5nZW9Qb2ludFZhbHVlLmxvbmdpdHVkZSkgPT09IHl0KGUuZ2VvUG9pbnRWYWx1ZS5sb25naXR1ZGUpO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDIgLyogTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKFwiaW50ZWdlclZhbHVlXCIgaW4gdCAmJiBcImludGVnZXJWYWx1ZVwiIGluIGUpIHJldHVybiB5dCh0LmludGVnZXJWYWx1ZSkgPT09IHl0KGUuaW50ZWdlclZhbHVlKTtcbiAgICAgICAgICAgIGlmIChcImRvdWJsZVZhbHVlXCIgaW4gdCAmJiBcImRvdWJsZVZhbHVlXCIgaW4gZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB5dCh0LmRvdWJsZVZhbHVlKSwgcyA9IHl0KGUuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuID09PSBzID8gUnQobikgPT09IFJ0KHMpIDogaXNOYU4obikgJiYgaXNOYU4ocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgOSAvKiBBcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIG50KHQuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10sIGUuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10sIFZ0KTtcblxuICAgICAgY2FzZSAxMCAvKiBPYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5tYXBWYWx1ZS5maWVsZHMgfHwge30sIHMgPSBlLm1hcFZhbHVlLmZpZWxkcyB8fCB7fTtcbiAgICAgICAgICAgIGlmIChvdChuKSAhPT0gb3QocykpIHJldHVybiAhMTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBpbiBuKSBpZiAobi5oYXNPd25Qcm9wZXJ0eSh0KSAmJiAodm9pZCAwID09PSBzW3RdIHx8ICFWdChuW3RdLCBzW3RdKSkpIHJldHVybiAhMTtcbiAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBBcnJheVZhbHVlIGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgZWxlbWVudC4gKi8gKHQsIGUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gU3QodCwgZSkge1xuICAgIHJldHVybiB2b2lkIDAgIT09ICh0LnZhbHVlcyB8fCBbXSkuZmluZCgodCA9PiBWdCh0LCBlKSkpO1xufVxuXG5mdW5jdGlvbiBEdCh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHZ0KHQpLCBzID0gdnQoZSk7XG4gICAgaWYgKG4gIT09IHMpIHJldHVybiBldChuLCBzKTtcbiAgICBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgMCAvKiBOdWxsVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gMDtcblxuICAgICAgY2FzZSAxIC8qIEJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBldCh0LmJvb2xlYW5WYWx1ZSwgZS5ib29sZWFuVmFsdWUpO1xuXG4gICAgICBjYXNlIDIgLyogTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHl0KHQuaW50ZWdlclZhbHVlIHx8IHQuZG91YmxlVmFsdWUpLCBzID0geXQoZS5pbnRlZ2VyVmFsdWUgfHwgZS5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbiA8IHMgPyAtMSA6IG4gPiBzID8gMSA6IG4gPT09IHMgPyAwIDogXG4gICAgICAgICAgICAvLyBvbmUgb3IgYm90aCBhcmUgTmFOLlxuICAgICAgICAgICAgaXNOYU4obikgPyBpc05hTihzKSA/IDAgOiAtMSA6IDE7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgMyAvKiBUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBDdCh0LnRpbWVzdGFtcFZhbHVlLCBlLnRpbWVzdGFtcFZhbHVlKTtcblxuICAgICAgY2FzZSA0IC8qIFNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIEN0KEl0KHQpLCBJdChlKSk7XG5cbiAgICAgIGNhc2UgNSAvKiBTdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBldCh0LnN0cmluZ1ZhbHVlLCBlLnN0cmluZ1ZhbHVlKTtcblxuICAgICAgY2FzZSA2IC8qIEJsb2JWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gcHQodCksIHMgPSBwdChlKTtcbiAgICAgICAgICAgIHJldHVybiBuLmNvbXBhcmVUbyhzKTtcbiAgICAgICAgfSh0LmJ5dGVzVmFsdWUsIGUuYnl0ZXNWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNyAvKiBSZWZWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5zcGxpdChcIi9cIiksIHMgPSBlLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgbi5sZW5ndGggJiYgdCA8IHMubGVuZ3RoOyB0KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gZXQoblt0XSwgc1t0XSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IGUpIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGV0KG4ubGVuZ3RoLCBzLmxlbmd0aCk7XG4gICAgICAgIH0odC5yZWZlcmVuY2VWYWx1ZSwgZS5yZWZlcmVuY2VWYWx1ZSk7XG5cbiAgICAgIGNhc2UgOCAvKiBHZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBldCh5dCh0LmxhdGl0dWRlKSwgeXQoZS5sYXRpdHVkZSkpO1xuICAgICAgICAgICAgaWYgKDAgIT09IG4pIHJldHVybiBuO1xuICAgICAgICAgICAgcmV0dXJuIGV0KHl0KHQubG9uZ2l0dWRlKSwgeXQoZS5sb25naXR1ZGUpKTtcbiAgICAgICAgfSh0Lmdlb1BvaW50VmFsdWUsIGUuZ2VvUG9pbnRWYWx1ZSk7XG5cbiAgICAgIGNhc2UgOSAvKiBBcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnZhbHVlcyB8fCBbXSwgcyA9IGUudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBuLmxlbmd0aCAmJiB0IDwgcy5sZW5ndGg7ICsrdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBEdChuW3RdLCBzW3RdKTtcbiAgICAgICAgICAgICAgICBpZiAoZSkgcmV0dXJuIGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZXQobi5sZW5ndGgsIHMubGVuZ3RoKTtcbiAgICAgICAgfSh0LmFycmF5VmFsdWUsIGUuYXJyYXlWYWx1ZSk7XG5cbiAgICAgIGNhc2UgMTAgLyogT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZmllbGRzIHx8IHt9LCBzID0gT2JqZWN0LmtleXMobiksIGkgPSBlLmZpZWxkcyB8fCB7fSwgciA9IE9iamVjdC5rZXlzKGkpO1xuICAgICAgICAgICAgLy8gRXZlbiB0aG91Z2ggTWFwVmFsdWVzIGFyZSBsaWtlbHkgc29ydGVkIGNvcnJlY3RseSBiYXNlZCBvbiB0aGVpciBpbnNlcnRpb25cbiAgICAgICAgICAgIC8vIG9yZGVyIChlLmcuIHdoZW4gcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZCksIGxvY2FsIG1vZGlmaWNhdGlvbnMgY2FuIGJyaW5nXG4gICAgICAgICAgICAvLyBlbGVtZW50cyBvdXQgb2Ygb3JkZXIuIFdlIG5lZWQgdG8gcmUtc29ydCB0aGUgZWxlbWVudHMgdG8gZW5zdXJlIHRoYXRcbiAgICAgICAgICAgIC8vIGNhbm9uaWNhbCBJRHMgYXJlIGluZGVwZW5kZW50IG9mIGluc2VydGlvbiBvcmRlci5cbiAgICAgICAgICAgIHMuc29ydCgpLCByLnNvcnQoKTtcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgcy5sZW5ndGggJiYgdCA8IHIubGVuZ3RoOyArK3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gZXQoc1t0XSwgclt0XSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IGUpIHJldHVybiBlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBEdChuW3NbdF1dLCBpW3JbdF1dKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gbykgcmV0dXJuIG87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZXQocy5sZW5ndGgsIHIubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEdlbmVyYXRlcyB0aGUgY2Fub25pY2FsIElEIGZvciB0aGUgcHJvdmlkZWQgZmllbGQgdmFsdWUgKGFzIHVzZWQgaW4gVGFyZ2V0XG4gKiBzZXJpYWxpemF0aW9uKS5cbiAqLyAodC5tYXBWYWx1ZSwgZS5tYXBWYWx1ZSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEN0KHQsIGUpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIHQubGVuZ3RoID09PSBlLmxlbmd0aCkgcmV0dXJuIGV0KHQsIGUpO1xuICAgIGNvbnN0IG4gPSBndCh0KSwgcyA9IGd0KGUpLCBpID0gZXQobi5zZWNvbmRzLCBzLnNlY29uZHMpO1xuICAgIHJldHVybiAwICE9PSBpID8gaSA6IGV0KG4ubmFub3MsIHMubmFub3MpO1xufVxuXG5mdW5jdGlvbiBOdCh0KSB7XG4gICAgcmV0dXJuIHh0KHQpO1xufVxuXG5mdW5jdGlvbiB4dCh0KSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gdCA/IFwibnVsbFwiIDogXCJib29sZWFuVmFsdWVcIiBpbiB0ID8gXCJcIiArIHQuYm9vbGVhblZhbHVlIDogXCJpbnRlZ2VyVmFsdWVcIiBpbiB0ID8gXCJcIiArIHQuaW50ZWdlclZhbHVlIDogXCJkb3VibGVWYWx1ZVwiIGluIHQgPyBcIlwiICsgdC5kb3VibGVWYWx1ZSA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiB0ID8gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gZ3QodCk7XG4gICAgICAgIHJldHVybiBgdGltZSgke2Uuc2Vjb25kc30sJHtlLm5hbm9zfSlgO1xuICAgIH0odC50aW1lc3RhbXBWYWx1ZSkgOiBcInN0cmluZ1ZhbHVlXCIgaW4gdCA/IHQuc3RyaW5nVmFsdWUgOiBcImJ5dGVzVmFsdWVcIiBpbiB0ID8gcHQodC5ieXRlc1ZhbHVlKS50b0Jhc2U2NCgpIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIHQgPyAobiA9IHQucmVmZXJlbmNlVmFsdWUsIFxuICAgIFB0LmZyb21OYW1lKG4pLnRvU3RyaW5nKCkpIDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gdCA/IGBnZW8oJHsoZSA9IHQuZ2VvUG9pbnRWYWx1ZSkubGF0aXR1ZGV9LCR7ZS5sb25naXR1ZGV9KWAgOiBcImFycmF5VmFsdWVcIiBpbiB0ID8gZnVuY3Rpb24odCkge1xuICAgICAgICBsZXQgZSA9IFwiW1wiLCBuID0gITA7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiB0LnZhbHVlcyB8fCBbXSkgbiA/IG4gPSAhMSA6IGUgKz0gXCIsXCIsIGUgKz0geHQocyk7XG4gICAgICAgIHJldHVybiBlICsgXCJdXCI7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHZhbHVlIGZvciB0aGUgcHJvdmlkZWQgZGF0YWJhc2UgYW5kIGtleS4gKi8gKHQuYXJyYXlWYWx1ZSkgOiBcIm1hcFZhbHVlXCIgaW4gdCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgLy8gSXRlcmF0aW9uIG9yZGVyIGluIEphdmFTY3JpcHQgaXMgbm90IGd1YXJhbnRlZWQuIFRvIGVuc3VyZSB0aGF0IHdlIGdlbmVyYXRlXG4gICAgICAgIC8vIG1hdGNoaW5nIGNhbm9uaWNhbCBJRHMgZm9yIGlkZW50aWNhbCBtYXBzLCB3ZSBuZWVkIHRvIHNvcnQgdGhlIGtleXMuXG4gICAgICAgIGNvbnN0IGUgPSBPYmplY3Qua2V5cyh0LmZpZWxkcyB8fCB7fSkuc29ydCgpO1xuICAgICAgICBsZXQgbiA9IFwie1wiLCBzID0gITA7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBlKSBzID8gcyA9ICExIDogbiArPSBcIixcIiwgbiArPSBgJHtpfToke3h0KHQuZmllbGRzW2ldKX1gO1xuICAgICAgICByZXR1cm4gbiArIFwifVwiO1xuICAgIH0odC5tYXBWYWx1ZSkgOiBMKCk7XG4gICAgdmFyIGUsIG47XG59XG5cbmZ1bmN0aW9uIGt0KHQsIGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZWZlcmVuY2VWYWx1ZTogYHByb2plY3RzLyR7dC5wcm9qZWN0SWR9L2RhdGFiYXNlcy8ke3QuZGF0YWJhc2V9L2RvY3VtZW50cy8ke2UucGF0aC5jYW5vbmljYWxTdHJpbmcoKX1gXG4gICAgfTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIEludGVnZXJWYWx1ZSAuICovIGZ1bmN0aW9uICR0KHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwiaW50ZWdlclZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgRG91YmxlVmFsdWUuICovXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYW4gQXJyYXlWYWx1ZS4gKi9cbmZ1bmN0aW9uIE90KHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwiYXJyYXlWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIE51bGxWYWx1ZS4gKi8gZnVuY3Rpb24gRnQodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJudWxsVmFsdWVcIiBpbiB0O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgTmFOLiAqLyBmdW5jdGlvbiBNdCh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcImRvdWJsZVZhbHVlXCIgaW4gdCAmJiBpc05hTihOdW1iZXIodC5kb3VibGVWYWx1ZSkpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBNYXBWYWx1ZS4gKi8gZnVuY3Rpb24gTHQodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJtYXBWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBDcmVhdGVzIGEgZGVlcCBjb3B5IG9mIGBzb3VyY2VgLiAqLyBmdW5jdGlvbiBCdCh0KSB7XG4gICAgaWYgKHQuZ2VvUG9pbnRWYWx1ZSkgcmV0dXJuIHtcbiAgICAgICAgZ2VvUG9pbnRWYWx1ZTogT2JqZWN0LmFzc2lnbih7fSwgdC5nZW9Qb2ludFZhbHVlKVxuICAgIH07XG4gICAgaWYgKHQudGltZXN0YW1wVmFsdWUgJiYgXCJvYmplY3RcIiA9PSB0eXBlb2YgdC50aW1lc3RhbXBWYWx1ZSkgcmV0dXJuIHtcbiAgICAgICAgdGltZXN0YW1wVmFsdWU6IE9iamVjdC5hc3NpZ24oe30sIHQudGltZXN0YW1wVmFsdWUpXG4gICAgfTtcbiAgICBpZiAodC5tYXBWYWx1ZSkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBjdCh0Lm1hcFZhbHVlLmZpZWxkcywgKCh0LCBuKSA9PiBlLm1hcFZhbHVlLmZpZWxkc1t0XSA9IEJ0KG4pKSksIGU7XG4gICAgfVxuICAgIGlmICh0LmFycmF5VmFsdWUpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IFtdXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgKHQuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10pLmxlbmd0aDsgKytuKSBlLmFycmF5VmFsdWUudmFsdWVzW25dID0gQnQodC5hcnJheVZhbHVlLnZhbHVlc1tuXSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIE9iamVjdFZhbHVlIHJlcHJlc2VudHMgYSBNYXBWYWx1ZSBpbiB0aGUgRmlyZXN0b3JlIFByb3RvIGFuZCBvZmZlcnMgdGhlXG4gKiBhYmlsaXR5IHRvIGFkZCBhbmQgcmVtb3ZlIGZpZWxkcyAodmlhIHRoZSBPYmplY3RWYWx1ZUJ1aWxkZXIpLlxuICovIGNsYXNzIFV0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVXQoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBhdCB0aGUgZ2l2ZW4gcGF0aCBvciBudWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSB0aGUgcGF0aCB0byBzZWFyY2hcbiAgICAgKiBAcmV0dXJucyBUaGUgdmFsdWUgYXQgdGhlIHBhdGggb3IgbnVsbCBpZiB0aGUgcGF0aCBpcyBub3Qgc2V0LlxuICAgICAqLyAgICBmaWVsZCh0KSB7XG4gICAgICAgIGlmICh0LmlzRW1wdHkoKSkgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCBlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGggLSAxOyArK24pIGlmIChlID0gKGUubWFwVmFsdWUuZmllbGRzIHx8IHt9KVt0LmdldChuKV0sIFxuICAgICAgICAgICAgIUx0KGUpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBlID0gKGUubWFwVmFsdWUuZmllbGRzIHx8IHt9KVt0Lmxhc3RTZWdtZW50KCldLCBlIHx8IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZmllbGQgdG8gdGhlIHByb3ZpZGVkIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSBUaGUgZmllbGQgcGF0aCB0byBzZXQuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHNldC5cbiAgICAgKi8gICAgc2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5nZXRGaWVsZHNNYXAodC5wb3BMYXN0KCkpW3QubGFzdFNlZ21lbnQoKV0gPSBCdChlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcHJvdmlkZWQgZmllbGRzIHRvIHRoZSBwcm92aWRlZCB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YSAtIEEgbWFwIG9mIGZpZWxkcyB0byB2YWx1ZXMgKG9yIG51bGwgZm9yIGRlbGV0ZXMpLlxuICAgICAqLyAgICBzZXRBbGwodCkge1xuICAgICAgICBsZXQgZSA9IGZ0LmVtcHR5UGF0aCgpLCBuID0ge30sIHMgPSBbXTtcbiAgICAgICAgdC5mb3JFYWNoKCgodCwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFlLmlzSW1tZWRpYXRlUGFyZW50T2YoaSkpIHtcbiAgICAgICAgICAgICAgICAvLyBJbnNlcnQgdGhlIGFjY3VtdWxhdGVkIGNoYW5nZXMgYXQgdGhpcyBwYXJlbnQgbG9jYXRpb25cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXRGaWVsZHNNYXAoZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseUNoYW5nZXModCwgbiwgcyksIG4gPSB7fSwgcyA9IFtdLCBlID0gaS5wb3BMYXN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ID8gbltpLmxhc3RTZWdtZW50KCldID0gQnQodCkgOiBzLnB1c2goaS5sYXN0U2VnbWVudCgpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5nZXRGaWVsZHNNYXAoZSk7XG4gICAgICAgIHRoaXMuYXBwbHlDaGFuZ2VzKGksIG4sIHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBmaWVsZCBhdCB0aGUgc3BlY2lmaWVkIHBhdGguIElmIHRoZXJlIGlzIG5vIGZpZWxkIGF0IHRoZVxuICAgICAqIHNwZWNpZmllZCBwYXRoLCBub3RoaW5nIGlzIGNoYW5nZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIFRoZSBmaWVsZCBwYXRoIHRvIHJlbW92ZS5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZmllbGQodC5wb3BMYXN0KCkpO1xuICAgICAgICBMdChlKSAmJiBlLm1hcFZhbHVlLmZpZWxkcyAmJiBkZWxldGUgZS5tYXBWYWx1ZS5maWVsZHNbdC5sYXN0U2VnbWVudCgpXTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiBWdCh0aGlzLnZhbHVlLCB0LnZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWFwIHRoYXQgY29udGFpbnMgdGhlIGxlYWYgZWxlbWVudCBvZiBgcGF0aGAuIElmIHRoZSBwYXJlbnRcbiAgICAgKiBlbnRyeSBkb2VzIG5vdCB5ZXQgZXhpc3QsIG9yIGlmIGl0IGlzIG5vdCBhIG1hcCwgYSBuZXcgbWFwIHdpbGwgYmUgY3JlYXRlZC5cbiAgICAgKi8gICAgZ2V0RmllbGRzTWFwKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnZhbHVlO1xuICAgICAgICBlLm1hcFZhbHVlLmZpZWxkcyB8fCAoZS5tYXBWYWx1ZSA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7ICsrbikge1xuICAgICAgICAgICAgbGV0IHMgPSBlLm1hcFZhbHVlLmZpZWxkc1t0LmdldChuKV07XG4gICAgICAgICAgICBMdChzKSAmJiBzLm1hcFZhbHVlLmZpZWxkcyB8fCAocyA9IHtcbiAgICAgICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZS5tYXBWYWx1ZS5maWVsZHNbdC5nZXQobildID0gcyksIGUgPSBzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlLm1hcFZhbHVlLmZpZWxkcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgYGZpZWxkc01hcGAgYnkgYWRkaW5nLCByZXBsYWNpbmcgb3IgZGVsZXRpbmcgdGhlIHNwZWNpZmllZFxuICAgICAqIGVudHJpZXMuXG4gICAgICovICAgIGFwcGx5Q2hhbmdlcyh0LCBlLCBuKSB7XG4gICAgICAgIGN0KGUsICgoZSwgbikgPT4gdFtlXSA9IG4pKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIG4pIGRlbGV0ZSB0W2VdO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVdChCdCh0aGlzLnZhbHVlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBGaWVsZE1hc2sgYnVpbHQgZnJvbSBhbGwgZmllbGRzIGluIGEgTWFwVmFsdWUuXG4gKi8gZnVuY3Rpb24gcXQodCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICByZXR1cm4gY3QodC5maWVsZHMsICgodCwgbikgPT4ge1xuICAgICAgICBjb25zdCBzID0gbmV3IGZ0KFsgdCBdKTtcbiAgICAgICAgaWYgKEx0KG4pKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcXQobi5tYXBWYWx1ZSkuZmllbGRzO1xuICAgICAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSBcbiAgICAgICAgICAgIC8vIFByZXNlcnZlIHRoZSBlbXB0eSBtYXAgYnkgYWRkaW5nIGl0IHRvIHRoZSBGaWVsZE1hc2suXG4gICAgICAgICAgICBlLnB1c2gocyk7IGVsc2UgXG4gICAgICAgICAgICAvLyBGb3IgbmVzdGVkIGFuZCBub24tZW1wdHkgT2JqZWN0VmFsdWVzLCBhZGQgdGhlIEZpZWxkUGF0aCBvZiB0aGVcbiAgICAgICAgICAgIC8vIGxlYWYgbm9kZXMuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZS5wdXNoKHMuY2hpbGQobikpO1xuICAgICAgICB9IGVsc2UgXG4gICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZSBsZWFmXG4gICAgICAgIC8vIG5vZGVzLlxuICAgICAgICBlLnB1c2gocyk7XG4gICAgfSkpLCBuZXcgZHQoZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUgd2l0aCBhIGtleSwgdmVyc2lvbiwgZGF0YSBhbmQgd2hldGhlciBpdFxuICogaGFzIGxvY2FsIG11dGF0aW9ucyBhcHBsaWVkIHRvIGl0LlxuICpcbiAqIERvY3VtZW50cyBjYW4gdHJhbnNpdGlvbiBiZXR3ZWVuIHN0YXRlcyB2aWEgYGNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQoKWAsXG4gKiBgY29udmVydFRvTm9Eb2N1bWVudCgpYCBhbmQgYGNvbnZlcnRUb1Vua25vd25Eb2N1bWVudCgpYC4gSWYgYSBkb2N1bWVudCBkb2VzXG4gKiBub3QgdHJhbnNpdGlvbiB0byBvbmUgb2YgdGhlc2Ugc3RhdGVzIGV2ZW4gYWZ0ZXIgYWxsIG11dGF0aW9ucyBoYXZlIGJlZW5cbiAqIGFwcGxpZWQsIGBpc1ZhbGlkRG9jdW1lbnQoKWAgcmV0dXJucyBmYWxzZSBhbmQgdGhlIGRvY3VtZW50IHNob3VsZCBiZSByZW1vdmVkXG4gKiBmcm9tIGFsbCB2aWV3cy5cbiAqLyBjbGFzcyBLdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLmtleSA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gZSwgdGhpcy52ZXJzaW9uID0gbiwgdGhpcy5kYXRhID0gcywgdGhpcy5kb2N1bWVudFN0YXRlID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGRvY3VtZW50IHdpdGggbm8ga25vd24gdmVyc2lvbiBvciBkYXRhLCBidXQgd2hpY2ggY2FuIHNlcnZlIGFzXG4gICAgICogYmFzZSBkb2N1bWVudCBmb3IgbXV0YXRpb25zLlxuICAgICAqLyAgICBzdGF0aWMgbmV3SW52YWxpZERvY3VtZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBLdCh0LCAwIC8qIElOVkFMSUQgKi8gLCBydC5taW4oKSwgVXQuZW1wdHkoKSwgMCAvKiBTWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3Qgd2l0aCB0aGUgZ2l2ZW4gZGF0YSBhdCB0aGVcbiAgICAgKiBnaXZlbiB2ZXJzaW9uLlxuICAgICAqLyAgICBzdGF0aWMgbmV3Rm91bmREb2N1bWVudCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgS3QodCwgMSAvKiBGT1VORF9ET0NVTUVOVCAqLyAsIGUsIG4sIDAgLyogU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBub3QgZXhpc3QgYXQgdGhlIGdpdmVuIHZlcnNpb24uICovICAgIHN0YXRpYyBuZXdOb0RvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBLdCh0LCAyIC8qIE5PX0RPQ1VNRU5UICovICwgZSwgVXQuZW1wdHkoKSwgMCAvKiBTWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3QgYXQgdGhlIGdpdmVuIHZlcnNpb24gYnV0XG4gICAgICogd2hvc2UgZGF0YSBpcyBub3Qga25vd24gKGUuZy4gYSBkb2N1bWVudCB0aGF0IHdhcyB1cGRhdGVkIHdpdGhvdXQgYSBrbm93blxuICAgICAqIGJhc2UgZG9jdW1lbnQpLlxuICAgICAqLyAgICBzdGF0aWMgbmV3VW5rbm93bkRvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBLdCh0LCAzIC8qIFVOS05PV05fRE9DVU1FTlQgKi8gLCBlLCBVdC5lbXB0eSgpLCAyIC8qIEhBU19DT01NSVRURURfTVVUQVRJT05TICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGV4aXN0cyBhbmQgdGhhdCBpdHMgdmVyc2lvblxuICAgICAqIGFuZCBkYXRhIGFyZSBrbm93bi5cbiAgICAgKi8gICAgY29udmVydFRvRm91bmREb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLmRvY3VtZW50VHlwZSA9IDEgLyogRk9VTkRfRE9DVU1FTlQgKi8gLCB0aGlzLmRhdGEgPSBlLCBcbiAgICAgICAgdGhpcy5kb2N1bWVudFN0YXRlID0gMCAvKiBTWU5DRUQgKi8gLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZG9lc24ndCBleGlzdCBhdCB0aGUgZ2l2ZW5cbiAgICAgKiB2ZXJzaW9uLlxuICAgICAqLyAgICBjb252ZXJ0VG9Ob0RvY3VtZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMiAvKiBOT19ET0NVTUVOVCAqLyAsIHRoaXMuZGF0YSA9IFV0LmVtcHR5KCksIFxuICAgICAgICB0aGlzLmRvY3VtZW50U3RhdGUgPSAwIC8qIFNZTkNFRCAqLyAsIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBleGlzdHMgYXQgYSBnaXZlbiB2ZXJzaW9uIGJ1dFxuICAgICAqIHRoYXQgaXRzIGRhdGEgaXMgbm90IGtub3duIChlLmcuIGEgZG9jdW1lbnQgdGhhdCB3YXMgdXBkYXRlZCB3aXRob3V0IGEga25vd25cbiAgICAgKiBiYXNlIGRvY3VtZW50KS5cbiAgICAgKi8gICAgY29udmVydFRvVW5rbm93bkRvY3VtZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMyAvKiBVTktOT1dOX0RPQ1VNRU5UICovICwgdGhpcy5kYXRhID0gVXQuZW1wdHkoKSwgXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDIgLyogSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gLCB0aGlzO1xuICAgIH1cbiAgICBzZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50U3RhdGUgPSAyIC8qIEhBU19DT01NSVRURURfTVVUQVRJT05TICovICwgdGhpcztcbiAgICB9XG4gICAgc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50U3RhdGUgPSAxIC8qIEhBU19MT0NBTF9NVVRBVElPTlMgKi8gLCB0aGlzO1xuICAgIH1cbiAgICBnZXQgaGFzTG9jYWxNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIEhBU19MT0NBTF9NVVRBVElPTlMgKi8gPT09IHRoaXMuZG9jdW1lbnRTdGF0ZTtcbiAgICB9XG4gICAgZ2V0IGhhc0NvbW1pdHRlZE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gPT09IHRoaXMuZG9jdW1lbnRTdGF0ZTtcbiAgICB9XG4gICAgZ2V0IGhhc1BlbmRpbmdXcml0ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc0xvY2FsTXV0YXRpb25zIHx8IHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xuICAgIH1cbiAgICBpc1ZhbGlkRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAwIC8qIElOVkFMSUQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc0ZvdW5kRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIEZPVU5EX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNOb0RvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMiAvKiBOT19ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzVW5rbm93bkRvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMyAvKiBVTktOT1dOX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgS3QgJiYgdGhpcy5rZXkuaXNFcXVhbCh0LmtleSkgJiYgdGhpcy52ZXJzaW9uLmlzRXF1YWwodC52ZXJzaW9uKSAmJiB0aGlzLmRvY3VtZW50VHlwZSA9PT0gdC5kb2N1bWVudFR5cGUgJiYgdGhpcy5kb2N1bWVudFN0YXRlID09PSB0LmRvY3VtZW50U3RhdGUgJiYgdGhpcy5kYXRhLmlzRXF1YWwodC5kYXRhKTtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgS3QodGhpcy5rZXksIHRoaXMuZG9jdW1lbnRUeXBlLCB0aGlzLnZlcnNpb24sIHRoaXMuZGF0YS5jbG9uZSgpLCB0aGlzLmRvY3VtZW50U3RhdGUpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBEb2N1bWVudCgke3RoaXMua2V5fSwgJHt0aGlzLnZlcnNpb259LCAke0pTT04uc3RyaW5naWZ5KHRoaXMuZGF0YS52YWx1ZSl9LCB7ZG9jdW1lbnRUeXBlOiAke3RoaXMuZG9jdW1lbnRUeXBlfX0pLCB7ZG9jdW1lbnRTdGF0ZTogJHt0aGlzLmRvY3VtZW50U3RhdGV9fSlgO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb21wYXJlcyB0aGUgdmFsdWUgZm9yIGZpZWxkIGBmaWVsZGAgaW4gdGhlIHByb3ZpZGVkIGRvY3VtZW50cy4gVGhyb3dzIGlmXG4gKiB0aGUgZmllbGQgZG9lcyBub3QgZXhpc3QgaW4gYm90aCBkb2N1bWVudHMuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBqdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSA9IG51bGwsIG4gPSBbXSwgcyA9IFtdLCBpID0gbnVsbCwgciA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gZSwgdGhpcy5vcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gcywgdGhpcy5saW1pdCA9IGksIFxuICAgICAgICB0aGlzLnN0YXJ0QXQgPSByLCB0aGlzLmVuZEF0ID0gbywgdGhpcy5BID0gbnVsbDtcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYSBUYXJnZXQgd2l0aCBhIHBhdGggYW5kIG9wdGlvbmFsIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXG4gKiBQYXRoIG11c3QgY3VycmVudGx5IGJlIGVtcHR5IGlmIHRoaXMgaXMgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5LlxuICpcbiAqIE5PVEU6IHlvdSBzaG91bGQgYWx3YXlzIGNvbnN0cnVjdCBgVGFyZ2V0YCBmcm9tIGBRdWVyeS50b1RhcmdldGAgaW5zdGVhZCBvZlxuICogdXNpbmcgdGhpcyBmYWN0b3J5IG1ldGhvZCwgYmVjYXVzZSBgUXVlcnlgIHByb3ZpZGVzIGFuIGltcGxpY2l0IGBvcmRlckJ5YFxuICogcHJvcGVydHkuXG4gKi8gZnVuY3Rpb24gUXQodCwgZSA9IG51bGwsIG4gPSBbXSwgcyA9IFtdLCBpID0gbnVsbCwgciA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgcmV0dXJuIG5ldyBqdCh0LCBlLCBuLCBzLCBpLCByLCBvKTtcbn1cblxuZnVuY3Rpb24gV3QodCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIGlmIChudWxsID09PSBlLkEpIHtcbiAgICAgICAgbGV0IHQgPSBlLnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgICAgIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwICYmICh0ICs9IFwifGNnOlwiICsgZS5jb2xsZWN0aW9uR3JvdXApLCB0ICs9IFwifGY6XCIsIHQgKz0gZS5maWx0ZXJzLm1hcCgodCA9PiBZdCh0KSkpLmpvaW4oXCIsXCIpLCBcbiAgICAgICAgdCArPSBcInxvYjpcIiwgdCArPSBlLm9yZGVyQnkubWFwKCh0ID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IE1ha2UgdGhpcyBjb2xsaXNpb24gcm9idXN0LlxuICAgICAgICAgICAgcmV0dXJuIHQuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkgKyB0LmRpcjtcbiAgICAgICAgfSh0KSkpLmpvaW4oXCIsXCIpLCBBdChlLmxpbWl0KSB8fCAodCArPSBcInxsOlwiLCB0ICs9IGUubGltaXQpLCBlLnN0YXJ0QXQgJiYgKHQgKz0gXCJ8bGI6XCIsIFxuICAgICAgICB0ICs9IGNlKGUuc3RhcnRBdCkpLCBlLmVuZEF0ICYmICh0ICs9IFwifHViOlwiLCB0ICs9IGNlKGUuZW5kQXQpKSwgZS5BID0gdDtcbiAgICB9XG4gICAgcmV0dXJuIGUuQTtcbn1cblxuZnVuY3Rpb24gR3QodCkge1xuICAgIGxldCBlID0gdC5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIHJldHVybiBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAoZSArPSBcIiBjb2xsZWN0aW9uR3JvdXA9XCIgKyB0LmNvbGxlY3Rpb25Hcm91cCksIFxuICAgIHQuZmlsdGVycy5sZW5ndGggPiAwICYmIChlICs9IGAsIGZpbHRlcnM6IFske3QuZmlsdGVycy5tYXAoKHQgPT4ge1xuICAgICAgICByZXR1cm4gYCR7KGUgPSB0KS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKX0gJHtlLm9wfSAke050KGUudmFsdWUpfWA7XG4gICAgICAgIC8qKiBSZXR1cm5zIGEgZGVidWcgZGVzY3JpcHRpb24gZm9yIGBmaWx0ZXJgLiAqL1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyAoaS5lLiAnX19uYW1lX18nKS4gKi8gICAgfSkpLmpvaW4oXCIsIFwiKX1dYCksIFxuICAgIEF0KHQubGltaXQpIHx8IChlICs9IFwiLCBsaW1pdDogXCIgKyB0LmxpbWl0KSwgdC5vcmRlckJ5Lmxlbmd0aCA+IDAgJiYgKGUgKz0gYCwgb3JkZXJCeTogWyR7dC5vcmRlckJ5Lm1hcCgodCA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBgJHt0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpfSAoJHt0LmRpcn0pYDtcbiAgICB9KHQpKSkuam9pbihcIiwgXCIpfV1gKSwgdC5zdGFydEF0ICYmIChlICs9IFwiLCBzdGFydEF0OiBcIiArIGNlKHQuc3RhcnRBdCkpLCB0LmVuZEF0ICYmIChlICs9IFwiLCBlbmRBdDogXCIgKyBjZSh0LmVuZEF0KSksIFxuICAgIGBUYXJnZXQoJHtlfSlgO1xufVxuXG5mdW5jdGlvbiB6dCh0LCBlKSB7XG4gICAgaWYgKHQubGltaXQgIT09IGUubGltaXQpIHJldHVybiAhMTtcbiAgICBpZiAodC5vcmRlckJ5Lmxlbmd0aCAhPT0gZS5vcmRlckJ5Lmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5vcmRlckJ5Lmxlbmd0aDsgbisrKSBpZiAoIXVlKHQub3JkZXJCeVtuXSwgZS5vcmRlckJ5W25dKSkgcmV0dXJuICExO1xuICAgIGlmICh0LmZpbHRlcnMubGVuZ3RoICE9PSBlLmZpbHRlcnMubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0LmZpbHRlcnMubGVuZ3RoOyBpKyspIGlmIChuID0gdC5maWx0ZXJzW2ldLCBzID0gZS5maWx0ZXJzW2ldLCBcbiAgICBuLm9wICE9PSBzLm9wIHx8ICFuLmZpZWxkLmlzRXF1YWwocy5maWVsZCkgfHwgIVZ0KG4udmFsdWUsIHMudmFsdWUpKSByZXR1cm4gITE7XG4gICAgdmFyIG4sIHM7XG4gICAgcmV0dXJuIHQuY29sbGVjdGlvbkdyb3VwID09PSBlLmNvbGxlY3Rpb25Hcm91cCAmJiAoISF0LnBhdGguaXNFcXVhbChlLnBhdGgpICYmICghIWxlKHQuc3RhcnRBdCwgZS5zdGFydEF0KSAmJiBsZSh0LmVuZEF0LCBlLmVuZEF0KSkpO1xufVxuXG5mdW5jdGlvbiBIdCh0KSB7XG4gICAgcmV0dXJuIFB0LmlzRG9jdW1lbnRLZXkodC5wYXRoKSAmJiBudWxsID09PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAwID09PSB0LmZpbHRlcnMubGVuZ3RoO1xufVxuXG5jbGFzcyBKdCBleHRlbmRzIGNsYXNzIHt9IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmllbGQgPSB0LCB0aGlzLm9wID0gZSwgdGhpcy52YWx1ZSA9IG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmaWx0ZXIgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGFyZ3VtZW50cy5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0LmlzS2V5RmllbGQoKSA/IFwiaW5cIiAvKiBJTiAqLyA9PT0gZSB8fCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA9PT0gZSA/IHRoaXMuUih0LCBlLCBuKSA6IG5ldyBYdCh0LCBlLCBuKSA6IFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyA9PT0gZSA/IG5ldyBuZSh0LCBuKSA6IFwiaW5cIiAvKiBJTiAqLyA9PT0gZSA/IG5ldyBzZSh0LCBuKSA6IFwibm90LWluXCIgLyogTk9UX0lOICovID09PSBlID8gbmV3IGllKHQsIG4pIDogXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IGUgPyBuZXcgcmUodCwgbikgOiBuZXcgSnQodCwgZSwgbik7XG4gICAgfVxuICAgIHN0YXRpYyBSKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIFwiaW5cIiAvKiBJTiAqLyA9PT0gZSA/IG5ldyBadCh0LCBuKSA6IG5ldyB0ZSh0LCBuKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIC8vIFR5cGVzIGRvIG5vdCBoYXZlIHRvIG1hdGNoIGluIE5PVF9FUVVBTCBmaWx0ZXJzLlxuICAgICAgICAgICAgICAgIHJldHVybiBcIiE9XCIgLyogTk9UX0VRVUFMICovID09PSB0aGlzLm9wID8gbnVsbCAhPT0gZSAmJiB0aGlzLlAoRHQoZSwgdGhpcy52YWx1ZSkpIDogbnVsbCAhPT0gZSAmJiB2dCh0aGlzLnZhbHVlKSA9PT0gdnQoZSkgJiYgdGhpcy5QKER0KGUsIHRoaXMudmFsdWUpKTtcbiAgICAgICAgLy8gT25seSBjb21wYXJlIHR5cGVzIHdpdGggbWF0Y2hpbmcgYmFja2VuZCBvcmRlciAoc3VjaCBhcyBkb3VibGUgYW5kIGludCkuXG4gICAgICAgIH1cbiAgICBQKHQpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLm9wKSB7XG4gICAgICAgICAgY2FzZSBcIjxcIiAvKiBMRVNTX1RIQU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPCAwO1xuXG4gICAgICAgICAgY2FzZSBcIjw9XCIgLyogTEVTU19USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiB0IDw9IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBFUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gdDtcblxuICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gMCAhPT0gdDtcblxuICAgICAgICAgIGNhc2UgXCI+XCIgLyogR1JFQVRFUl9USEFOICovIDpcbiAgICAgICAgICAgIHJldHVybiB0ID4gMDtcblxuICAgICAgICAgIGNhc2UgXCI+PVwiIC8qIEdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA+PSAwO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBMKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdigpIHtcbiAgICAgICAgcmV0dXJuIFsgXCI8XCIgLyogTEVTU19USEFOICovICwgXCI8PVwiIC8qIExFU1NfVEhBTl9PUl9FUVVBTCAqLyAsIFwiPlwiIC8qIEdSRUFURVJfVEhBTiAqLyAsIFwiPj1cIiAvKiBHUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gLCBcIiE9XCIgLyogTk9UX0VRVUFMICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gXS5pbmRleE9mKHRoaXMub3ApID49IDA7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBZdCh0KSB7XG4gICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogVGVjaG5pY2FsbHksIHRoaXMgd29uJ3QgYmUgdW5pcXVlIGlmIHR3byB2YWx1ZXMgaGF2ZVxuICAgIC8vIHRoZSBzYW1lIGRlc2NyaXB0aW9uLCBzdWNoIGFzIHRoZSBpbnQgMyBhbmQgdGhlIHN0cmluZyBcIjNcIi4gU28gd2Ugc2hvdWxkXG4gICAgLy8gYWRkIHRoZSB0eXBlcyBpbiBoZXJlIHNvbWVob3csIHRvby5cbiAgICByZXR1cm4gdC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIHQub3AudG9TdHJpbmcoKSArIE50KHQudmFsdWUpO1xufVxuXG5jbGFzcyBYdCBleHRlbmRzIEp0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4pLCB0aGlzLmtleSA9IFB0LmZyb21OYW1lKG4ucmVmZXJlbmNlVmFsdWUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFB0LmNvbXBhcmF0b3IodC5rZXksIHRoaXMua2V5KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuUChlKTtcbiAgICB9XG59XG5cbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgd2l0aGluIGFuIGFycmF5LiAqLyBjbGFzcyBadCBleHRlbmRzIEp0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiaW5cIiAvKiBJTiAqLyAsIGUpLCB0aGlzLmtleXMgPSBlZShcImluXCIgLyogSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleXMuc29tZSgoZSA9PiBlLmlzRXF1YWwodC5rZXkpKSk7XG4gICAgfVxufVxuXG4vKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIG5vdCBwcmVzZW50IHdpdGhpbiBhbiBhcnJheS4gKi8gY2xhc3MgdGUgZXh0ZW5kcyBKdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAsIGUpLCB0aGlzLmtleXMgPSBlZShcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmtleXMuc29tZSgoZSA9PiBlLmlzRXF1YWwodC5rZXkpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBlZSh0LCBlKSB7XG4gICAgdmFyIG47XG4gICAgcmV0dXJuICgobnVsbCA9PT0gKG4gPSBlLmFycmF5VmFsdWUpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4udmFsdWVzKSB8fCBbXSkubWFwKCh0ID0+IFB0LmZyb21OYW1lKHQucmVmZXJlbmNlVmFsdWUpKSk7XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zIG9wZXJhdG9yLiAqLyBjbGFzcyBuZSBleHRlbmRzIEp0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIE90KGUpICYmIFN0KGUuYXJyYXlWYWx1ZSwgdGhpcy52YWx1ZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBJTiBvcGVyYXRvci4gKi8gY2xhc3Mgc2UgZXh0ZW5kcyBKdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImluXCIgLyogSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlICYmIFN0KHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBub3QtaW4gb3BlcmF0b3IuICovIGNsYXNzIGllIGV4dGVuZHMgSnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGlmIChTdCh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfSkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUgJiYgIVN0KHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBhcnJheS1jb250YWlucy1hbnkgb3BlcmF0b3IuICovIGNsYXNzIHJlIGV4dGVuZHMgSnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiAhKCFPdChlKSB8fCAhZS5hcnJheVZhbHVlLnZhbHVlcykgJiYgZS5hcnJheVZhbHVlLnZhbHVlcy5zb21lKCh0ID0+IFN0KHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgdCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGJvdW5kIG9mIGEgcXVlcnkuXG4gKlxuICogVGhlIGJvdW5kIGlzIHNwZWNpZmllZCB3aXRoIHRoZSBnaXZlbiBjb21wb25lbnRzIHJlcHJlc2VudGluZyBhIHBvc2l0aW9uIGFuZFxuICogd2hldGhlciBpdCdzIGp1c3QgYmVmb3JlIG9yIGp1c3QgYWZ0ZXIgdGhlIHBvc2l0aW9uIChyZWxhdGl2ZSB0byB3aGF0ZXZlciB0aGVcbiAqIHF1ZXJ5IG9yZGVyIGlzKS5cbiAqXG4gKiBUaGUgcG9zaXRpb24gcmVwcmVzZW50cyBhIGxvZ2ljYWwgaW5kZXggcG9zaXRpb24gZm9yIGEgcXVlcnkuIEl0J3MgYSBwcmVmaXhcbiAqIG9mIHZhbHVlcyBmb3IgdGhlIChwb3RlbnRpYWxseSBpbXBsaWNpdCkgb3JkZXIgYnkgY2xhdXNlcyBvZiBhIHF1ZXJ5LlxuICpcbiAqIEJvdW5kIHByb3ZpZGVzIGEgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBkb2N1bWVudCBjb21lcyBiZWZvcmUgb3JcbiAqIGFmdGVyIGEgYm91bmQuIFRoaXMgaXMgaW5mbHVlbmNlZCBieSB3aGV0aGVyIHRoZSBwb3NpdGlvbiBpcyBqdXN0IGJlZm9yZSBvclxuICoganVzdCBhZnRlciB0aGUgcHJvdmlkZWQgdmFsdWVzLlxuICovIGNsYXNzIG9lIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB0LCB0aGlzLmJlZm9yZSA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjZSh0KSB7XG4gICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogTWFrZSB0aGlzIGNvbGxpc2lvbiByb2J1c3QuXG4gICAgcmV0dXJuIGAke3QuYmVmb3JlID8gXCJiXCIgOiBcImFcIn06JHt0LnBvc2l0aW9uLm1hcCgodCA9PiBOdCh0KSkpLmpvaW4oXCIsXCIpfWA7XG59XG5cbi8qKlxuICogQW4gb3JkZXJpbmcgb24gYSBmaWVsZCwgaW4gc29tZSBEaXJlY3Rpb24uIERpcmVjdGlvbiBkZWZhdWx0cyB0byBBU0NFTkRJTkcuXG4gKi8gY2xhc3MgYWUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSBcImFzY1wiIC8qIEFTQ0VORElORyAqLykge1xuICAgICAgICB0aGlzLmZpZWxkID0gdCwgdGhpcy5kaXIgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdWUodCwgZSkge1xuICAgIHJldHVybiB0LmRpciA9PT0gZS5kaXIgJiYgdC5maWVsZC5pc0VxdWFsKGUuZmllbGQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIGRvY3VtZW50IHNvcnRzIGJlZm9yZSBhIGJvdW5kIHVzaW5nIHRoZSBwcm92aWRlZCBzb3J0XG4gKiBvcmRlci5cbiAqLyBmdW5jdGlvbiBoZSh0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdC5wb3NpdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCByID0gZVtpXSwgbyA9IHQucG9zaXRpb25baV07XG4gICAgICAgIGlmIChyLmZpZWxkLmlzS2V5RmllbGQoKSkgcyA9IFB0LmNvbXBhcmF0b3IoUHQuZnJvbU5hbWUoby5yZWZlcmVuY2VWYWx1ZSksIG4ua2V5KTsgZWxzZSB7XG4gICAgICAgICAgICBzID0gRHQobywgbi5kYXRhLmZpZWxkKHIuZmllbGQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJkZXNjXCIgLyogREVTQ0VORElORyAqLyA9PT0gci5kaXIgJiYgKHMgKj0gLTEpLCAwICE9PSBzKSBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHQuYmVmb3JlID8gcyA8PSAwIDogcyA8IDA7XG59XG5cbmZ1bmN0aW9uIGxlKHQsIGUpIHtcbiAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuIG51bGwgPT09IGU7XG4gICAgaWYgKG51bGwgPT09IGUpIHJldHVybiAhMTtcbiAgICBpZiAodC5iZWZvcmUgIT09IGUuYmVmb3JlIHx8IHQucG9zaXRpb24ubGVuZ3RoICE9PSBlLnBvc2l0aW9uLmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5wb3NpdGlvbi5sZW5ndGg7IG4rKykge1xuICAgICAgICBpZiAoIVZ0KHQucG9zaXRpb25bbl0sIGUucG9zaXRpb25bbl0pKSByZXR1cm4gITE7XG4gICAgfVxuICAgIHJldHVybiAhMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUXVlcnkgZW5jYXBzdWxhdGVzIGFsbCB0aGUgcXVlcnkgYXR0cmlidXRlcyB3ZSBzdXBwb3J0IGluIHRoZSBTREsuIEl0IGNhblxuICogYmUgcnVuIGFnYWluc3QgdGhlIExvY2FsU3RvcmUsIGFzIHdlbGwgYXMgYmUgY29udmVydGVkIHRvIGEgYFRhcmdldGAgdG9cbiAqIHF1ZXJ5IHRoZSBSZW1vdGVTdG9yZSByZXN1bHRzLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi8gY2xhc3MgZmUge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGEgUXVlcnkgd2l0aCBhIHBhdGggYW5kIG9wdGlvbmFsIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXG4gICAgICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlID0gbnVsbCwgbiA9IFtdLCBzID0gW10sIGkgPSBudWxsLCByID0gXCJGXCIgLyogRmlyc3QgKi8gLCBvID0gbnVsbCwgYyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gdCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAgPSBlLCB0aGlzLmV4cGxpY2l0T3JkZXJCeSA9IG4sIHRoaXMuZmlsdGVycyA9IHMsIFxuICAgICAgICB0aGlzLmxpbWl0ID0gaSwgdGhpcy5saW1pdFR5cGUgPSByLCB0aGlzLnN0YXJ0QXQgPSBvLCB0aGlzLmVuZEF0ID0gYywgdGhpcy5WID0gbnVsbCwgXG4gICAgICAgIC8vIFRoZSBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIG9mIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZS5cbiAgICAgICAgdGhpcy5TID0gbnVsbCwgdGhpcy5zdGFydEF0LCB0aGlzLmVuZEF0O1xuICAgIH1cbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgUXVlcnkgaW5zdGFuY2Ugd2l0aCB0aGUgb3B0aW9ucyBwcm92aWRlZC4gKi8gZnVuY3Rpb24gZGUodCwgZSwgbiwgcywgaSwgciwgbywgYykge1xuICAgIHJldHVybiBuZXcgZmUodCwgZSwgbiwgcywgaSwgciwgbywgYyk7XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGZvciBhIHF1ZXJ5IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzIGF0IGBwYXRoYCAqLyBmdW5jdGlvbiB3ZSh0KSB7XG4gICAgcmV0dXJuIG5ldyBmZSh0KTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gY29udmVydCBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkgaW50byBhIGNvbGxlY3Rpb24gcXVlcnkgYXQgYVxuICogc3BlY2lmaWMgcGF0aC4gVGhpcyBpcyB1c2VkIHdoZW4gZXhlY3V0aW5nIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcmllcywgc2luY2VcbiAqIHdlIGhhdmUgdG8gc3BsaXQgdGhlIHF1ZXJ5IGludG8gYSBzZXQgb2YgY29sbGVjdGlvbiBxdWVyaWVzIGF0IG11bHRpcGxlXG4gKiBwYXRocy5cbiAqLyBmdW5jdGlvbiBfZSh0KSB7XG4gICAgcmV0dXJuICFBdCh0LmxpbWl0KSAmJiBcIkZcIiAvKiBGaXJzdCAqLyA9PT0gdC5saW1pdFR5cGU7XG59XG5cbmZ1bmN0aW9uIG1lKHQpIHtcbiAgICByZXR1cm4gIUF0KHQubGltaXQpICYmIFwiTFwiIC8qIExhc3QgKi8gPT09IHQubGltaXRUeXBlO1xufVxuXG5mdW5jdGlvbiBnZSh0KSB7XG4gICAgcmV0dXJuIHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDAgPyB0LmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZCA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIHllKHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5maWx0ZXJzKSBpZiAoZS52KCkpIHJldHVybiBlLmZpZWxkO1xuICAgIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhbnkgb2YgdGhlIHByb3ZpZGVkIE9wZXJhdG9ycyBhcmUgaW5jbHVkZWQgaW4gdGhlIHF1ZXJ5IGFuZFxuICogcmV0dXJucyB0aGUgZmlyc3Qgb25lIHRoYXQgaXMsIG9yIG51bGwgaWYgbm9uZSBhcmUuXG4gKi9cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBxdWVyeSBtYXRjaGVzIGEgY29sbGVjdGlvbiBncm91cCByYXRoZXIgdGhhbiBhIHNwZWNpZmljXG4gKiBjb2xsZWN0aW9uLlxuICovXG5mdW5jdGlvbiBwZSh0KSB7XG4gICAgcmV0dXJuIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGltcGxpY2l0IG9yZGVyIGJ5IGNvbnN0cmFpbnQgdGhhdCBpcyB1c2VkIHRvIGV4ZWN1dGUgdGhlIFF1ZXJ5LFxuICogd2hpY2ggY2FuIGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmRlciBieSBjb25zdHJhaW50cyB0aGUgdXNlciBwcm92aWRlZCAoZS5nLlxuICogdGhlIFNESyBhbmQgYmFja2VuZCBhbHdheXMgb3JkZXJzIGJ5IGBfX25hbWVfX2ApLlxuICovIGZ1bmN0aW9uIFRlKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KTtcbiAgICBpZiAobnVsbCA9PT0gZS5WKSB7XG4gICAgICAgIGUuViA9IFtdO1xuICAgICAgICBjb25zdCB0ID0geWUoZSksIG4gPSBnZShlKTtcbiAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgbnVsbCA9PT0gbikgXG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGltcGxpY2l0bHkgYWRkIGtleSBvcmRlcmluZywgd2UgbXVzdCBhbHNvIGFkZCB0aGVcbiAgICAgICAgLy8gaW5lcXVhbGl0eSBmaWx0ZXIgZmllbGQgZm9yIGl0IHRvIGJlIGEgdmFsaWQgcXVlcnkuXG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGUgZGVmYXVsdCBpbmVxdWFsaXR5IGZpZWxkIGFuZCBrZXkgb3JkZXJpbmcgaXMgYXNjZW5kaW5nLlxuICAgICAgICB0LmlzS2V5RmllbGQoKSB8fCBlLlYucHVzaChuZXcgYWUodCkpLCBlLlYucHVzaChuZXcgYWUoZnQua2V5RmllbGQoKSwgXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi8pKTsgZWxzZSB7XG4gICAgICAgICAgICBsZXQgdCA9ICExO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIGUuZXhwbGljaXRPcmRlckJ5KSBlLlYucHVzaChuKSwgbi5maWVsZC5pc0tleUZpZWxkKCkgJiYgKHQgPSAhMCk7XG4gICAgICAgICAgICBpZiAoIXQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgb3JkZXIgb2YgdGhlIGltcGxpY2l0IGtleSBvcmRlcmluZyBhbHdheXMgbWF0Y2hlcyB0aGUgbGFzdFxuICAgICAgICAgICAgICAgIC8vIGV4cGxpY2l0IG9yZGVyIGJ5XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDAgPyBlLmV4cGxpY2l0T3JkZXJCeVtlLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggLSAxXS5kaXIgOiBcImFzY1wiIC8qIEFTQ0VORElORyAqLztcbiAgICAgICAgICAgICAgICBlLlYucHVzaChuZXcgYWUoZnQua2V5RmllbGQoKSwgdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlLlY7XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhpcyBgUXVlcnlgIGluc3RhbmNlIHRvIGl0J3MgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBFZSh0KSB7XG4gICAgY29uc3QgZSA9IHEodCk7XG4gICAgaWYgKCFlLlMpIGlmIChcIkZcIiAvKiBGaXJzdCAqLyA9PT0gZS5saW1pdFR5cGUpIGUuUyA9IFF0KGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIFRlKGUpLCBlLmZpbHRlcnMsIGUubGltaXQsIGUuc3RhcnRBdCwgZS5lbmRBdCk7IGVsc2Uge1xuICAgICAgICAvLyBGbGlwIHRoZSBvcmRlckJ5IGRpcmVjdGlvbnMgc2luY2Ugd2Ugd2FudCB0aGUgbGFzdCByZXN1bHRzXG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIFRlKGUpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gXCJkZXNjXCIgLyogREVTQ0VORElORyAqLyA9PT0gbi5kaXIgPyBcImFzY1wiIC8qIEFTQ0VORElORyAqLyA6IFwiZGVzY1wiIC8qIERFU0NFTkRJTkcgKi87XG4gICAgICAgICAgICB0LnB1c2gobmV3IGFlKG4uZmllbGQsIGUpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBuZWVkIHRvIHN3YXAgdGhlIGN1cnNvcnMgdG8gbWF0Y2ggdGhlIG5vdy1mbGlwcGVkIHF1ZXJ5IG9yZGVyaW5nLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLmVuZEF0ID8gbmV3IG9lKGUuZW5kQXQucG9zaXRpb24sICFlLmVuZEF0LmJlZm9yZSkgOiBudWxsLCBzID0gZS5zdGFydEF0ID8gbmV3IG9lKGUuc3RhcnRBdC5wb3NpdGlvbiwgIWUuc3RhcnRBdC5iZWZvcmUpIDogbnVsbDtcbiAgICAgICAgLy8gTm93IHJldHVybiBhcyBhIExpbWl0VHlwZS5GaXJzdCBxdWVyeS5cbiAgICAgICAgZS5TID0gUXQoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgdCwgZS5maWx0ZXJzLCBlLmxpbWl0LCBuLCBzKTtcbiAgICB9XG4gICAgcmV0dXJuIGUuUztcbn1cblxuZnVuY3Rpb24gSWUodCwgZSwgbikge1xuICAgIHJldHVybiBuZXcgZmUodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIGUsIG4sIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG59XG5cbmZ1bmN0aW9uIEFlKHQsIGUpIHtcbiAgICByZXR1cm4genQoRWUodCksIEVlKGUpKSAmJiB0LmxpbWl0VHlwZSA9PT0gZS5saW1pdFR5cGU7XG59XG5cbi8vIFRPRE8oYi8yOTE4MzE2NSk6IFRoaXMgaXMgdXNlZCB0byBnZXQgYSB1bmlxdWUgc3RyaW5nIGZyb20gYSBxdWVyeSB0bywgZm9yXG4vLyBleGFtcGxlLCB1c2UgYXMgYSBkaWN0aW9uYXJ5IGtleSwgYnV0IHRoZSBpbXBsZW1lbnRhdGlvbiBpcyBzdWJqZWN0IHRvXG4vLyBjb2xsaXNpb25zLiBNYWtlIGl0IGNvbGxpc2lvbi1mcmVlLlxuZnVuY3Rpb24gUmUodCkge1xuICAgIHJldHVybiBgJHtXdChFZSh0KSl9fGx0OiR7dC5saW1pdFR5cGV9YDtcbn1cblxuZnVuY3Rpb24gYmUodCkge1xuICAgIHJldHVybiBgUXVlcnkodGFyZ2V0PSR7R3QoRWUodCkpfTsgbGltaXRUeXBlPSR7dC5saW1pdFR5cGV9KWA7XG59XG5cbi8qKiBSZXR1cm5zIHdoZXRoZXIgYGRvY2AgbWF0Y2hlcyB0aGUgY29uc3RyYWludHMgb2YgYHF1ZXJ5YC4gKi8gZnVuY3Rpb24gUGUodCwgZSkge1xuICAgIHJldHVybiBlLmlzRm91bmREb2N1bWVudCgpICYmIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUua2V5LnBhdGg7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cCA/IGUua2V5Lmhhc0NvbGxlY3Rpb25JZCh0LmNvbGxlY3Rpb25Hcm91cCkgJiYgdC5wYXRoLmlzUHJlZml4T2YobikgOiBQdC5pc0RvY3VtZW50S2V5KHQucGF0aCkgPyB0LnBhdGguaXNFcXVhbChuKSA6IHQucGF0aC5pc0ltbWVkaWF0ZVBhcmVudE9mKG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEEgZG9jdW1lbnQgbXVzdCBoYXZlIGEgdmFsdWUgZm9yIGV2ZXJ5IG9yZGVyaW5nIGNsYXVzZSBpbiBvcmRlciB0byBzaG93IHVwXG4gKiBpbiB0aGUgcmVzdWx0cy5cbiAqLyAodCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5leHBsaWNpdE9yZGVyQnkpIFxuICAgICAgICAvLyBvcmRlciBieSBrZXkgYWx3YXlzIG1hdGNoZXNcbiAgICAgICAgaWYgKCFuLmZpZWxkLmlzS2V5RmllbGQoKSAmJiBudWxsID09PSBlLmRhdGEuZmllbGQobi5maWVsZCkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH0odCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5maWx0ZXJzKSBpZiAoIW4ubWF0Y2hlcyhlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIC8qKiBNYWtlcyBzdXJlIGEgZG9jdW1lbnQgaXMgd2l0aGluIHRoZSBib3VuZHMsIGlmIHByb3ZpZGVkLiAqLyAodCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBpZiAodC5zdGFydEF0ICYmICFoZSh0LnN0YXJ0QXQsIFRlKHQpLCBlKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodC5lbmRBdCAmJiBoZSh0LmVuZEF0LCBUZSh0KSwgZSkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYSBuZXcgY29tcGFyYXRvciBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbXBhcmUgdHdvIGRvY3VtZW50c1xuICogYmFzZWQgb24gdGhlIFF1ZXJ5J3Mgb3JkZXJpbmcgY29uc3RyYWludC5cbiAqLyAodCwgZSk7XG59XG5cbmZ1bmN0aW9uIHZlKHQpIHtcbiAgICByZXR1cm4gKGUsIG4pID0+IHtcbiAgICAgICAgbGV0IHMgPSAhMTtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIFRlKHQpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gVmUoaSwgZSwgbik7XG4gICAgICAgICAgICBpZiAoMCAhPT0gdCkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBzID0gcyB8fCBpLmZpZWxkLmlzS2V5RmllbGQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBWZSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHQuZmllbGQuaXNLZXlGaWVsZCgpID8gUHQuY29tcGFyYXRvcihlLmtleSwgbi5rZXkpIDogZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gZS5kYXRhLmZpZWxkKHQpLCBpID0gbi5kYXRhLmZpZWxkKHQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gcyAmJiBudWxsICE9PSBpID8gRHQocywgaSkgOiBMKCk7XG4gICAgfSh0LmZpZWxkLCBlLCBuKTtcbiAgICBzd2l0Y2ggKHQuZGlyKSB7XG4gICAgICBjYXNlIFwiYXNjXCIgLyogQVNDRU5ESU5HICovIDpcbiAgICAgICAgcmV0dXJuIHM7XG5cbiAgICAgIGNhc2UgXCJkZXNjXCIgLyogREVTQ0VORElORyAqLyA6XG4gICAgICAgIHJldHVybiAtMSAqIHM7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBMKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGFuIERvdWJsZVZhbHVlIGZvciBgdmFsdWVgIHRoYXQgaXMgZW5jb2RlZCBiYXNlZCB0aGUgc2VyaWFsaXplcidzXG4gKiBgdXNlUHJvdG8zSnNvbmAgc2V0dGluZy5cbiAqLyBmdW5jdGlvbiBTZSh0LCBlKSB7XG4gICAgaWYgKHQuRCkge1xuICAgICAgICBpZiAoaXNOYU4oZSkpIHJldHVybiB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogXCJOYU5cIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoZSA9PT0gMSAvIDApIHJldHVybiB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogXCJJbmZpbml0eVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChlID09PSAtMSAvIDApIHJldHVybiB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogXCItSW5maW5pdHlcIlxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBkb3VibGVWYWx1ZTogUnQoZSkgPyBcIi0wXCIgOiBlXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIEludGVnZXJWYWx1ZSBmb3IgYHZhbHVlYC5cbiAqLyBmdW5jdGlvbiBEZSh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW50ZWdlclZhbHVlOiBcIlwiICsgdFxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIG51bWJlciB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG8gYSBwcm90by5cbiAqIFRoZSByZXR1cm4gdmFsdWUgaXMgYW4gSW50ZWdlclZhbHVlIGlmIGl0IGNhbiBzYWZlbHkgcmVwcmVzZW50IHRoZSB2YWx1ZSxcbiAqIG90aGVyd2lzZSBhIERvdWJsZVZhbHVlIGlzIHJldHVybmVkLlxuICovIGZ1bmN0aW9uIENlKHQsIGUpIHtcbiAgICByZXR1cm4gYnQoZSkgPyBEZShlKSA6IFNlKHQsIGUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFVzZWQgdG8gcmVwcmVzZW50IGEgZmllbGQgdHJhbnNmb3JtIG9uIGEgbXV0YXRpb24uICovIGNsYXNzIE5lIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIHN0cnVjdHVyYWwgdHlwZSBvZiBgVHJhbnNmb3JtT3BlcmF0aW9uYCBpcyB1bmlxdWUuXG4gICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzU0NTFcbiAgICAgICAgdGhpcy5fID0gdm9pZCAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgbG9jYWwgdHJhbnNmb3JtIHJlc3VsdCBhZ2FpbnN0IHRoZSBwcm92aWRlZCBgcHJldmlvdXNWYWx1ZWAsXG4gKiBvcHRpb25hbGx5IHVzaW5nIHRoZSBwcm92aWRlZCBsb2NhbFdyaXRlVGltZS5cbiAqLyBmdW5jdGlvbiB4ZSh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBPZSA/IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIF9fdHlwZV9fOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiBcInNlcnZlcl90aW1lc3RhbXBcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgX19sb2NhbF93cml0ZV90aW1lX186IHtcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHM6IHQuc2Vjb25kcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbm9zOiB0Lm5hbm9zZWNvbmRzXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBlICYmIChuLmZpZWxkcy5fX3ByZXZpb3VzX3ZhbHVlX18gPSBlKSwge1xuICAgICAgICAgICAgbWFwVmFsdWU6IG5cbiAgICAgICAgfTtcbiAgICB9KG4sIGUpIDogdCBpbnN0YW5jZW9mIEZlID8gTWUodCwgZSkgOiB0IGluc3RhbmNlb2YgTGUgPyBCZSh0LCBlKSA6IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBTaW5jZSBKYXZhU2NyaXB0J3MgaW50ZWdlciBhcml0aG1ldGljIGlzIGxpbWl0ZWQgdG8gNTMgYml0XG4gICAgICAgIC8vIHByZWNpc2lvbiBhbmQgcmVzb2x2ZXMgb3ZlcmZsb3dzIGJ5IHJlZHVjaW5nIHByZWNpc2lvbiwgd2UgZG8gbm90XG4gICAgICAgIC8vIG1hbnVhbGx5IGNhcCBvdmVyZmxvd3MgYXQgMl42My5cbiAgICAgICAgY29uc3QgbiA9ICRlKHQsIGUpLCBzID0gcWUobikgKyBxZSh0LkMpO1xuICAgICAgICByZXR1cm4gJHQobikgJiYgJHQodC5DKSA/IERlKHMpIDogU2UodC5OLCBzKTtcbiAgICB9KHQsIGUpO1xufVxuXG4vKipcbiAqIENvbXB1dGVzIGEgZmluYWwgdHJhbnNmb3JtIHJlc3VsdCBhZnRlciB0aGUgdHJhbnNmb3JtIGhhcyBiZWVuIGFja25vd2xlZGdlZFxuICogYnkgdGhlIHNlcnZlciwgcG90ZW50aWFsbHkgdXNpbmcgdGhlIHNlcnZlci1wcm92aWRlZCB0cmFuc2Zvcm1SZXN1bHQuXG4gKi8gZnVuY3Rpb24ga2UodCwgZSwgbikge1xuICAgIC8vIFRoZSBzZXJ2ZXIganVzdCBzZW5kcyBudWxsIGFzIHRoZSB0cmFuc2Zvcm0gcmVzdWx0IGZvciBhcnJheSBvcGVyYXRpb25zLFxuICAgIC8vIHNvIHdlIGhhdmUgdG8gY2FsY3VsYXRlIGEgcmVzdWx0IHRoZSBzYW1lIGFzIHdlIGRvIGZvciBsb2NhbFxuICAgIC8vIGFwcGxpY2F0aW9ucy5cbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIEZlID8gTWUodCwgZSkgOiB0IGluc3RhbmNlb2YgTGUgPyBCZSh0LCBlKSA6IG47XG59XG5cbi8qKlxuICogSWYgdGhpcyB0cmFuc2Zvcm0gb3BlcmF0aW9uIGlzIG5vdCBpZGVtcG90ZW50LCByZXR1cm5zIHRoZSBiYXNlIHZhbHVlIHRvXG4gKiBwZXJzaXN0IGZvciB0aGlzIHRyYW5zZm9ybS4gSWYgYSBiYXNlIHZhbHVlIGlzIHJldHVybmVkLCB0aGUgdHJhbnNmb3JtXG4gKiBvcGVyYXRpb24gaXMgYWx3YXlzIGFwcGxpZWQgdG8gdGhpcyBiYXNlIHZhbHVlLCBldmVuIGlmIGRvY3VtZW50IGhhc1xuICogYWxyZWFkeSBiZWVuIHVwZGF0ZWQuXG4gKlxuICogQmFzZSB2YWx1ZXMgcHJvdmlkZSBjb25zaXN0ZW50IGJlaGF2aW9yIGZvciBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1zIGFuZFxuICogYWxsb3cgdXMgdG8gcmV0dXJuIHRoZSBzYW1lIGxhdGVuY3ktY29tcGVuc2F0ZWQgdmFsdWUgZXZlbiBpZiB0aGUgYmFja2VuZFxuICogaGFzIGFscmVhZHkgYXBwbGllZCB0aGUgdHJhbnNmb3JtIG9wZXJhdGlvbi4gVGhlIGJhc2UgdmFsdWUgaXMgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgdHJhbnNmb3JtcywgYXMgdGhleSBjYW4gYmUgcmUtcGxheWVkIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzXG4gKiBhbHJlYWR5IGFwcGxpZWQgdGhlbS5cbiAqXG4gKiBAcmV0dXJucyBhIGJhc2UgdmFsdWUgdG8gc3RvcmUgYWxvbmcgd2l0aCB0aGUgbXV0YXRpb24sIG9yIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IHRyYW5zZm9ybXMuXG4gKi8gZnVuY3Rpb24gJGUodCwgZSkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgVWUgPyAkdChuID0gZSkgfHwgZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gISF0ICYmIFwiZG91YmxlVmFsdWVcIiBpbiB0O1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgZWl0aGVyIGFuIEludGVnZXJWYWx1ZSBvciBhIERvdWJsZVZhbHVlLiAqLyAobikgPyBlIDoge1xuICAgICAgICBpbnRlZ2VyVmFsdWU6IDBcbiAgICB9IDogbnVsbDtcbiAgICB2YXIgbjtcbn1cblxuLyoqIFRyYW5zZm9ybXMgYSB2YWx1ZSBpbnRvIGEgc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAuICovXG5jbGFzcyBPZSBleHRlbmRzIE5lIHt9XG5cbi8qKiBUcmFuc2Zvcm1zIGFuIGFycmF5IHZhbHVlIHZpYSBhIHVuaW9uIG9wZXJhdGlvbi4gKi8gY2xhc3MgRmUgZXh0ZW5kcyBOZSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmVsZW1lbnRzID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE1lKHQsIGUpIHtcbiAgICBjb25zdCBuID0gS2UoZSk7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuZWxlbWVudHMpIG4uc29tZSgodCA9PiBWdCh0LCBlKSkpIHx8IG4ucHVzaChlKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKiBUcmFuc2Zvcm1zIGFuIGFycmF5IHZhbHVlIHZpYSBhIHJlbW92ZSBvcGVyYXRpb24uICovIGNsYXNzIExlIGV4dGVuZHMgTmUge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5lbGVtZW50cyA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBCZSh0LCBlKSB7XG4gICAgbGV0IG4gPSBLZShlKTtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5lbGVtZW50cykgbiA9IG4uZmlsdGVyKCh0ID0+ICFWdCh0LCBlKSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSBiYWNrZW5kIHNlbWFudGljcyBmb3IgbG9jYWxseSBjb21wdXRlZCBOVU1FUklDX0FERCAoaW5jcmVtZW50KVxuICogdHJhbnNmb3Jtcy4gQ29udmVydHMgYWxsIGZpZWxkIHZhbHVlcyB0byBpbnRlZ2VycyBvciBkb3VibGVzLCBidXQgdW5saWtlIHRoZVxuICogYmFja2VuZCBkb2VzIG5vdCBjYXAgaW50ZWdlciB2YWx1ZXMgYXQgMl42My4gSW5zdGVhZCwgSmF2YVNjcmlwdCBudW1iZXJcbiAqIGFyaXRobWV0aWMgaXMgdXNlZCBhbmQgcHJlY2lzaW9uIGxvc3MgY2FuIG9jY3VyIGZvciB2YWx1ZXMgZ3JlYXRlciB0aGFuIDJeNTMuXG4gKi8gY2xhc3MgVWUgZXh0ZW5kcyBOZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLk4gPSB0LCB0aGlzLkMgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcWUodCkge1xuICAgIHJldHVybiB5dCh0LmludGVnZXJWYWx1ZSB8fCB0LmRvdWJsZVZhbHVlKTtcbn1cblxuZnVuY3Rpb24gS2UodCkge1xuICAgIHJldHVybiBPdCh0KSAmJiB0LmFycmF5VmFsdWUudmFsdWVzID8gdC5hcnJheVZhbHVlLnZhbHVlcy5zbGljZSgpIDogW107XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQSBmaWVsZCBwYXRoIGFuZCB0aGUgVHJhbnNmb3JtT3BlcmF0aW9uIHRvIHBlcmZvcm0gdXBvbiBpdC4gKi8gY2xhc3MgamUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5maWVsZCA9IHQsIHRoaXMudHJhbnNmb3JtID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFFlKHQsIGUpIHtcbiAgICByZXR1cm4gdC5maWVsZC5pc0VxdWFsKGUuZmllbGQpICYmIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBGZSAmJiBlIGluc3RhbmNlb2YgRmUgfHwgdCBpbnN0YW5jZW9mIExlICYmIGUgaW5zdGFuY2VvZiBMZSA/IG50KHQuZWxlbWVudHMsIGUuZWxlbWVudHMsIFZ0KSA6IHQgaW5zdGFuY2VvZiBVZSAmJiBlIGluc3RhbmNlb2YgVWUgPyBWdCh0LkMsIGUuQykgOiB0IGluc3RhbmNlb2YgT2UgJiYgZSBpbnN0YW5jZW9mIE9lO1xuICAgIH0odC50cmFuc2Zvcm0sIGUudHJhbnNmb3JtKTtcbn1cblxuLyoqIFRoZSByZXN1bHQgb2Ygc3VjY2Vzc2Z1bGx5IGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gdGhlIGJhY2tlbmQuICovXG5jbGFzcyBXZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHZlcnNpb24gYXQgd2hpY2ggdGhlIG11dGF0aW9uIHdhcyBjb21taXR0ZWQ6XG4gICAgICpcbiAgICAgKiAtIEZvciBtb3N0IG9wZXJhdGlvbnMsIHRoaXMgaXMgdGhlIHVwZGF0ZVRpbWUgaW4gdGhlIFdyaXRlUmVzdWx0LlxuICAgICAqIC0gRm9yIGRlbGV0ZXMsIHRoZSBjb21taXRUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIChiZWNhdXNlIGRlbGV0ZXMgYXJlXG4gICAgICogICBub3Qgc3RvcmVkIGFuZCBoYXZlIG5vIHVwZGF0ZVRpbWUpLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoZXNlIHZlcnNpb25zIGNhbiBiZSBkaWZmZXJlbnQ6IE5vLW9wIHdyaXRlcyB3aWxsIG5vdCBjaGFuZ2VcbiAgICAgKiB0aGUgdXBkYXRlVGltZSBldmVuIHRob3VnaCB0aGUgY29tbWl0VGltZSBhZHZhbmNlcy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzdWx0aW5nIGZpZWxkcyByZXR1cm5lZCBmcm9tIHRoZSBiYWNrZW5kIGFmdGVyIGEgbXV0YXRpb25cbiAgICAgKiBjb250YWluaW5nIGZpZWxkIHRyYW5zZm9ybXMgaGFzIGJlZW4gY29tbWl0dGVkLiBDb250YWlucyBvbmUgRmllbGRWYWx1ZVxuICAgICAqIGZvciBlYWNoIEZpZWxkVHJhbnNmb3JtIHRoYXQgd2FzIGluIHRoZSBtdXRhdGlvbi5cbiAgICAgKlxuICAgICAqIFdpbGwgYmUgZW1wdHkgaWYgdGhlIG11dGF0aW9uIGRpZCBub3QgY29udGFpbiBhbnkgZmllbGQgdHJhbnNmb3Jtcy5cbiAgICAgKi9cbiAgICBlKSB7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMudHJhbnNmb3JtUmVzdWx0cyA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEVuY29kZXMgYSBwcmVjb25kaXRpb24gZm9yIGEgbXV0YXRpb24uIFRoaXMgZm9sbG93cyB0aGUgbW9kZWwgdGhhdCB0aGVcbiAqIGJhY2tlbmQgYWNjZXB0cyB3aXRoIHRoZSBzcGVjaWFsIGNhc2Ugb2YgYW4gZXhwbGljaXQgXCJlbXB0eVwiIHByZWNvbmRpdGlvblxuICogKG1lYW5pbmcgbm8gcHJlY29uZGl0aW9uKS5cbiAqLyBjbGFzcyBHZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVRpbWUgPSB0LCB0aGlzLmV4aXN0cyA9IGU7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IGVtcHR5IFByZWNvbmRpdGlvbi4gKi8gICAgc3RhdGljIG5vbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgR2U7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IFByZWNvbmRpdGlvbiB3aXRoIGFuIGV4aXN0cyBmbGFnLiAqLyAgICBzdGF0aWMgZXhpc3RzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHZSh2b2lkIDAsIHQpO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBQcmVjb25kaXRpb24gYmFzZWQgb24gYSB2ZXJzaW9uIGEgZG9jdW1lbnQgZXhpc3RzIGF0LiAqLyAgICBzdGF0aWMgdXBkYXRlVGltZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgR2UodCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBQcmVjb25kaXRpb24gaXMgZW1wdHkuICovICAgIGdldCBpc05vbmUoKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgPT09IHRoaXMudXBkYXRlVGltZSAmJiB2b2lkIDAgPT09IHRoaXMuZXhpc3RzO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhpc3RzID09PSB0LmV4aXN0cyAmJiAodGhpcy51cGRhdGVUaW1lID8gISF0LnVwZGF0ZVRpbWUgJiYgdGhpcy51cGRhdGVUaW1lLmlzRXF1YWwodC51cGRhdGVUaW1lKSA6ICF0LnVwZGF0ZVRpbWUpO1xuICAgIH1cbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJlY29uZGl0aW9ucyBpcyB2YWxpZCBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LiAqLyBmdW5jdGlvbiB6ZSh0LCBlKSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gdC51cGRhdGVUaW1lID8gZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiBlLnZlcnNpb24uaXNFcXVhbCh0LnVwZGF0ZVRpbWUpIDogdm9pZCAwID09PSB0LmV4aXN0cyB8fCB0LmV4aXN0cyA9PT0gZS5pc0ZvdW5kRG9jdW1lbnQoKTtcbn1cblxuLyoqXG4gKiBBIG11dGF0aW9uIGRlc2NyaWJlcyBhIHNlbGYtY29udGFpbmVkIGNoYW5nZSB0byBhIGRvY3VtZW50LiBNdXRhdGlvbnMgY2FuXG4gKiBjcmVhdGUsIHJlcGxhY2UsIGRlbGV0ZSwgYW5kIHVwZGF0ZSBzdWJzZXRzIG9mIGRvY3VtZW50cy5cbiAqXG4gKiBNdXRhdGlvbnMgbm90IG9ubHkgYWN0IG9uIHRoZSB2YWx1ZSBvZiB0aGUgZG9jdW1lbnQgYnV0IGFsc28gaXRzIHZlcnNpb24uXG4gKlxuICogRm9yIGxvY2FsIG11dGF0aW9ucyAobXV0YXRpb25zIHRoYXQgaGF2ZW4ndCBiZWVuIGNvbW1pdHRlZCB5ZXQpLCB3ZSBwcmVzZXJ2ZVxuICogdGhlIGV4aXN0aW5nIHZlcnNpb24gZm9yIFNldCBhbmQgUGF0Y2ggbXV0YXRpb25zLiBGb3IgRGVsZXRlIG11dGF0aW9ucywgd2VcbiAqIHJlc2V0IHRoZSB2ZXJzaW9uIHRvIDAuXG4gKlxuICogSGVyZSdzIHRoZSBleHBlY3RlZCB0cmFuc2l0aW9uIHRhYmxlLlxuICpcbiAqIE1VVEFUSU9OICAgICAgICAgICBBUFBMSUVEIFRPICAgICAgICAgICAgUkVTVUxUUyBJTlxuICpcbiAqIFNldE11dGF0aW9uICAgICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIERvY3VtZW50KHYwKVxuICogU2V0TXV0YXRpb24gICAgICAgIEludmFsaWREb2N1bWVudCh2MCkgICBEb2N1bWVudCh2MClcbiAqIFBhdGNoTXV0YXRpb24gICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXG4gKiBQYXRjaE11dGF0aW9uICAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIE5vRG9jdW1lbnQodjMpXG4gKiBQYXRjaE11dGF0aW9uICAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIFVua25vd25Eb2N1bWVudCh2MylcbiAqIERlbGV0ZU11dGF0aW9uICAgICBEb2N1bWVudCh2MykgICAgICAgICAgTm9Eb2N1bWVudCh2MClcbiAqIERlbGV0ZU11dGF0aW9uICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MClcbiAqIERlbGV0ZU11dGF0aW9uICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgTm9Eb2N1bWVudCh2MClcbiAqXG4gKiBGb3IgYWNrbm93bGVkZ2VkIG11dGF0aW9ucywgd2UgdXNlIHRoZSB1cGRhdGVUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIGFzXG4gKiB0aGUgcmVzdWx0aW5nIHZlcnNpb24gZm9yIFNldCBhbmQgUGF0Y2ggbXV0YXRpb25zLiBBcyBkZWxldGVzIGhhdmUgbm9cbiAqIGV4cGxpY2l0IHVwZGF0ZSB0aW1lLCB3ZSB1c2UgdGhlIGNvbW1pdFRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgZm9yXG4gKiBEZWxldGUgbXV0YXRpb25zLlxuICpcbiAqIElmIGEgbXV0YXRpb24gaXMgYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kIGJ1dCBmYWlscyB0aGUgcHJlY29uZGl0aW9uIGNoZWNrXG4gKiBsb2NhbGx5LCB3ZSB0cmFuc2l0aW9uIHRvIGFuIGBVbmtub3duRG9jdW1lbnRgIGFuZCByZWx5IG9uIFdhdGNoIHRvIHNlbmQgdXNcbiAqIHRoZSB1cGRhdGVkIHZlcnNpb24uXG4gKlxuICogRmllbGQgdHJhbnNmb3JtcyBhcmUgdXNlZCBvbmx5IHdpdGggUGF0Y2ggYW5kIFNldCBNdXRhdGlvbnMuIFdlIHVzZSB0aGVcbiAqIGB1cGRhdGVUcmFuc2Zvcm1zYCBtZXNzYWdlIHRvIHN0b3JlIHRyYW5zZm9ybXMsIHJhdGhlciB0aGFuIHRoZSBgdHJhbnNmb3Jtc2BzXG4gKiBtZXNzYWdlcy5cbiAqXG4gKiAjIyBTdWJjbGFzc2luZyBOb3Rlc1xuICpcbiAqIEV2ZXJ5IHR5cGUgb2YgbXV0YXRpb24gbmVlZHMgdG8gaW1wbGVtZW50IGl0cyBvd24gYXBwbHlUb1JlbW90ZURvY3VtZW50KCkgYW5kXG4gKiBhcHBseVRvTG9jYWxWaWV3KCkgdG8gaW1wbGVtZW50IHRoZSBhY3R1YWwgYmVoYXZpb3Igb2YgYXBwbHlpbmcgdGhlIG11dGF0aW9uXG4gKiB0byBzb21lIHNvdXJjZSBkb2N1bWVudCAoc2VlIGBzZXRNdXRhdGlvbkFwcGx5VG9SZW1vdGVEb2N1bWVudCgpYCBmb3IgYW5cbiAqIGV4YW1wbGUpLlxuICovIGNsYXNzIEhlIHt9XG5cbi8qKlxuICogQXBwbGllcyB0aGlzIG11dGF0aW9uIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdGhlIHB1cnBvc2VzIG9mIGNvbXB1dGluZyBhXG4gKiBuZXcgcmVtb3RlIGRvY3VtZW50LiBJZiB0aGUgaW5wdXQgZG9jdW1lbnQgZG9lc24ndCBtYXRjaCB0aGUgZXhwZWN0ZWQgc3RhdGVcbiAqIChlLmcuIGl0IGlzIGludmFsaWQgb3Igb3V0ZGF0ZWQpLCB0aGUgZG9jdW1lbnQgdHlwZSBtYXkgdHJhbnNpdGlvbiB0b1xuICogdW5rbm93bi5cbiAqXG4gKiBAcGFyYW0gbXV0YXRpb24gLSBUaGUgbXV0YXRpb24gdG8gYXBwbHkuXG4gKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gbXV0YXRlLiBUaGUgaW5wdXQgZG9jdW1lbnQgY2FuIGJlIGFuXG4gKiAgICAgaW52YWxpZCBkb2N1bWVudCBpZiB0aGUgY2xpZW50IGhhcyBubyBrbm93bGVkZ2Ugb2YgdGhlIHByZS1tdXRhdGlvbiBzdGF0ZVxuICogICAgIG9mIHRoZSBkb2N1bWVudC5cbiAqIEBwYXJhbSBtdXRhdGlvblJlc3VsdCAtIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIG11dGF0aW9uIGZyb20gdGhlIGJhY2tlbmQuXG4gKi8gZnVuY3Rpb24gSmUodCwgZSwgbikge1xuICAgIHQgaW5zdGFuY2VvZiBlbiA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gVW5saWtlIHNldE11dGF0aW9uQXBwbHlUb0xvY2FsVmlldywgaWYgd2UncmUgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byBhXG4gICAgICAgIC8vIHJlbW90ZSBkb2N1bWVudCB0aGUgc2VydmVyIGhhcyBhY2NlcHRlZCB0aGUgbXV0YXRpb24gc28gdGhlIHByZWNvbmRpdGlvblxuICAgICAgICAvLyBtdXN0IGhhdmUgaGVsZC5cbiAgICAgICAgY29uc3QgcyA9IHQudmFsdWUuY2xvbmUoKSwgaSA9IHJuKHQuZmllbGRUcmFuc2Zvcm1zLCBlLCBuLnRyYW5zZm9ybVJlc3VsdHMpO1xuICAgICAgICBzLnNldEFsbChpKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KG4udmVyc2lvbiwgcykuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSh0LCBlLCBuKSA6IHQgaW5zdGFuY2VvZiBubiA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCF6ZSh0LnByZWNvbmRpdGlvbiwgZSkpIFxuICAgICAgICAvLyBTaW5jZSB0aGUgbXV0YXRpb24gd2FzIG5vdCByZWplY3RlZCwgd2Uga25vdyB0aGF0IHRoZSBwcmVjb25kaXRpb25cbiAgICAgICAgLy8gbWF0Y2hlZCBvbiB0aGUgYmFja2VuZC4gV2UgdGhlcmVmb3JlIG11c3Qgbm90IGhhdmUgdGhlIGV4cGVjdGVkIHZlcnNpb25cbiAgICAgICAgLy8gb2YgdGhlIGRvY3VtZW50IGluIG91ciBjYWNoZSBhbmQgY29udmVydCB0byBhbiBVbmtub3duRG9jdW1lbnQgd2l0aCBhXG4gICAgICAgIC8vIGtub3duIHVwZGF0ZVRpbWUuXG4gICAgICAgIHJldHVybiB2b2lkIGUuY29udmVydFRvVW5rbm93bkRvY3VtZW50KG4udmVyc2lvbik7XG4gICAgICAgIGNvbnN0IHMgPSBybih0LmZpZWxkVHJhbnNmb3JtcywgZSwgbi50cmFuc2Zvcm1SZXN1bHRzKSwgaSA9IGUuZGF0YTtcbiAgICAgICAgaS5zZXRBbGwoc24odCkpLCBpLnNldEFsbChzKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KG4udmVyc2lvbiwgaSkuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSh0LCBlLCBuKSA6IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gVW5saWtlIGFwcGx5VG9Mb2NhbFZpZXcsIGlmIHdlJ3JlIGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gYSByZW1vdGVcbiAgICAgICAgLy8gZG9jdW1lbnQgdGhlIHNlcnZlciBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uIHNvIHRoZSBwcmVjb25kaXRpb24gbXVzdFxuICAgICAgICAvLyBoYXZlIGhlbGQuXG4gICAgICAgIGUuY29udmVydFRvTm9Eb2N1bWVudChuLnZlcnNpb24pLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0oMCwgZSwgbik7XG59XG5cbi8qKlxuICogQXBwbGllcyB0aGlzIG11dGF0aW9uIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdGhlIHB1cnBvc2VzIG9mIGNvbXB1dGluZ1xuICogdGhlIG5ldyBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQuIElmIHRoZSBpbnB1dCBkb2N1bWVudCBkb2Vzbid0IG1hdGNoIHRoZVxuICogZXhwZWN0ZWQgc3RhdGUsIHRoZSBkb2N1bWVudCBpcyBub3QgbW9kaWZpZWQuXG4gKlxuICogQHBhcmFtIG11dGF0aW9uIC0gVGhlIG11dGF0aW9uIHRvIGFwcGx5LlxuICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIG11dGF0ZS4gVGhlIGlucHV0IGRvY3VtZW50IGNhbiBiZSBhblxuICogICAgIGludmFsaWQgZG9jdW1lbnQgaWYgdGhlIGNsaWVudCBoYXMgbm8ga25vd2xlZGdlIG9mIHRoZSBwcmUtbXV0YXRpb24gc3RhdGVcbiAqICAgICBvZiB0aGUgZG9jdW1lbnQuXG4gKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgLSBBIHRpbWVzdGFtcCBpbmRpY2F0aW5nIHRoZSBsb2NhbCB3cml0ZSB0aW1lIG9mIHRoZVxuICogICAgIGJhdGNoIHRoaXMgbXV0YXRpb24gaXMgYSBwYXJ0IG9mLlxuICovIGZ1bmN0aW9uIFllKHQsIGUsIG4pIHtcbiAgICB0IGluc3RhbmNlb2YgZW4gPyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGlmICghemUodC5wcmVjb25kaXRpb24sIGUpKSBcbiAgICAgICAgLy8gVGhlIG11dGF0aW9uIGZhaWxlZCB0byBhcHBseSAoZS5nLiBhIGRvY3VtZW50IElEIGNyZWF0ZWQgd2l0aCBhZGQoKVxuICAgICAgICAvLyBjYXVzZWQgYSBuYW1lIGNvbGxpc2lvbikuXG4gICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgcyA9IHQudmFsdWUuY2xvbmUoKSwgaSA9IG9uKHQuZmllbGRUcmFuc2Zvcm1zLCBuLCBlKTtcbiAgICAgICAgcy5zZXRBbGwoaSksIGUuY29udmVydFRvRm91bmREb2N1bWVudCh0bihlKSwgcykuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKTtcbiAgICB9XG4gICAgLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgbW9kaWZpZXMgZmllbGRzIG9mIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlXG4gKiBnaXZlbiB2YWx1ZXMuIFRoZSB2YWx1ZXMgYXJlIGFwcGxpZWQgdGhyb3VnaCBhIGZpZWxkIG1hc2s6XG4gKlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIGJvdGggdGhlIG1hc2sgYW5kIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nIGZpZWxkXG4gKiAgICBpcyB1cGRhdGVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIG5laXRoZXIgdGhlIG1hc2sgbm9yIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nXG4gKiAgICBmaWVsZCBpcyB1bm1vZGlmaWVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIHRoZSBtYXNrIGJ1dCBub3QgaW4gdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcbiAqICAgIGlzIGRlbGV0ZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgbm90IGluIHRoZSBtYXNrIGJ1dCBpcyBpbiB0aGUgdmFsdWVzLCB0aGUgdmFsdWVzIG1hcCBpc1xuICogICAgaWdub3JlZC5cbiAqLyAodCwgZSwgbikgOiB0IGluc3RhbmNlb2Ygbm4gPyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGlmICghemUodC5wcmVjb25kaXRpb24sIGUpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHMgPSBvbih0LmZpZWxkVHJhbnNmb3JtcywgbiwgZSksIGkgPSBlLmRhdGE7XG4gICAgICAgIGkuc2V0QWxsKHNuKHQpKSwgaS5zZXRBbGwocyksIGUuY29udmVydFRvRm91bmREb2N1bWVudCh0bihlKSwgaSkuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIGEgRmllbGRQYXRoL1ZhbHVlIG1hcCB3aXRoIHRoZSBjb250ZW50IG9mIHRoZSBQYXRjaE11dGF0aW9uLlxuICovICh0LCBlLCBuKSA6IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgemUodC5wcmVjb25kaXRpb24sIGUpICYmIFxuICAgICAgICAvLyBXZSBkb24ndCBjYWxsIGBzZXRIYXNMb2NhbE11dGF0aW9ucygpYCBzaW5jZSB3ZSB3YW50IHRvIGJlIGJhY2t3YXJkc1xuICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggdGhlIGV4aXN0aW5nIFNESyBiZWhhdmlvci5cbiAgICAgICAgZS5jb252ZXJ0VG9Ob0RvY3VtZW50KHJ0Lm1pbigpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgdmVyaWZpZXMgdGhlIGV4aXN0ZW5jZSBvZiB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoXG4gKiB0aGUgcHJvdmlkZWQgcHJlY29uZGl0aW9uLlxuICpcbiAqIFRoZSBgdmVyaWZ5YCBvcGVyYXRpb24gaXMgb25seSB1c2VkIGluIFRyYW5zYWN0aW9ucywgYW5kIHRoaXMgY2xhc3Mgc2VydmVzXG4gKiBwcmltYXJpbHkgdG8gZmFjaWxpdGF0ZSBzZXJpYWxpemF0aW9uIGludG8gcHJvdG9zLlxuICovICh0LCBlKTtcbn1cblxuLyoqXG4gKiBJZiB0aGlzIG11dGF0aW9uIGlzIG5vdCBpZGVtcG90ZW50LCByZXR1cm5zIHRoZSBiYXNlIHZhbHVlIHRvIHBlcnNpc3Qgd2l0aFxuICogdGhpcyBtdXRhdGlvbi4gSWYgYSBiYXNlIHZhbHVlIGlzIHJldHVybmVkLCB0aGUgbXV0YXRpb24gaXMgYWx3YXlzIGFwcGxpZWRcbiAqIHRvIHRoaXMgYmFzZSB2YWx1ZSwgZXZlbiBpZiBkb2N1bWVudCBoYXMgYWxyZWFkeSBiZWVuIHVwZGF0ZWQuXG4gKlxuICogVGhlIGJhc2UgdmFsdWUgaXMgYSBzcGFyc2Ugb2JqZWN0IHRoYXQgY29uc2lzdHMgb2Ygb25seSB0aGUgZG9jdW1lbnRcbiAqIGZpZWxkcyBmb3Igd2hpY2ggdGhpcyBtdXRhdGlvbiBjb250YWlucyBhIG5vbi1pZGVtcG90ZW50IHRyYW5zZm9ybWF0aW9uXG4gKiAoZS5nLiBhIG51bWVyaWMgaW5jcmVtZW50KS4gVGhlIHByb3ZpZGVkIHZhbHVlIGd1YXJhbnRlZXMgY29uc2lzdGVudFxuICogYmVoYXZpb3IgZm9yIG5vbi1pZGVtcG90ZW50IHRyYW5zZm9ybXMgYW5kIGFsbG93IHVzIHRvIHJldHVybiB0aGUgc2FtZVxuICogbGF0ZW5jeS1jb21wZW5zYXRlZCB2YWx1ZSBldmVuIGlmIHRoZSBiYWNrZW5kIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlXG4gKiBtdXRhdGlvbi4gVGhlIGJhc2UgdmFsdWUgaXMgbnVsbCBmb3IgaWRlbXBvdGVudCBtdXRhdGlvbnMsIGFzIHRoZXkgY2FuIGJlXG4gKiByZS1wbGF5ZWQgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZW0uXG4gKlxuICogQHJldHVybnMgYSBiYXNlIHZhbHVlIHRvIHN0b3JlIGFsb25nIHdpdGggdGhlIG11dGF0aW9uLCBvciBudWxsIGZvclxuICogaWRlbXBvdGVudCBtdXRhdGlvbnMuXG4gKi8gZnVuY3Rpb24gWGUodCwgZSkge1xuICAgIGxldCBuID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IHMgb2YgdC5maWVsZFRyYW5zZm9ybXMpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZChzLmZpZWxkKSwgaSA9ICRlKHMudHJhbnNmb3JtLCB0IHx8IG51bGwpO1xuICAgICAgICBudWxsICE9IGkgJiYgKG51bGwgPT0gbiAmJiAobiA9IFV0LmVtcHR5KCkpLCBuLnNldChzLmZpZWxkLCBpKSk7XG4gICAgfVxuICAgIHJldHVybiBuIHx8IG51bGw7XG59XG5cbmZ1bmN0aW9uIFplKHQsIGUpIHtcbiAgICByZXR1cm4gdC50eXBlID09PSBlLnR5cGUgJiYgKCEhdC5rZXkuaXNFcXVhbChlLmtleSkgJiYgKCEhdC5wcmVjb25kaXRpb24uaXNFcXVhbChlLnByZWNvbmRpdGlvbikgJiYgKCEhZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0ICYmIHZvaWQgMCA9PT0gZSB8fCAhKCF0IHx8ICFlKSAmJiBudCh0LCBlLCAoKHQsIGUpID0+IFFlKHQsIGUpKSk7XG4gICAgfSh0LmZpZWxkVHJhbnNmb3JtcywgZS5maWVsZFRyYW5zZm9ybXMpICYmICgwIC8qIFNldCAqLyA9PT0gdC50eXBlID8gdC52YWx1ZS5pc0VxdWFsKGUudmFsdWUpIDogMSAvKiBQYXRjaCAqLyAhPT0gdC50eXBlIHx8IHQuZGF0YS5pc0VxdWFsKGUuZGF0YSkgJiYgdC5maWVsZE1hc2suaXNFcXVhbChlLmZpZWxkTWFzaykpKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHZlcnNpb24gZnJvbSB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHVzZSBhcyB0aGUgcmVzdWx0IG9mIGFcbiAqIG11dGF0aW9uLiBNdXRhdGlvbnMgYXJlIGRlZmluZWQgdG8gcmV0dXJuIHRoZSB2ZXJzaW9uIG9mIHRoZSBiYXNlIGRvY3VtZW50XG4gKiBvbmx5IGlmIGl0IGlzIGFuIGV4aXN0aW5nIGRvY3VtZW50LiBEZWxldGVkIGFuZCB1bmtub3duIGRvY3VtZW50cyBoYXZlIGFcbiAqIHBvc3QtbXV0YXRpb24gdmVyc2lvbiBvZiBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gKi8gZnVuY3Rpb24gdG4odCkge1xuICAgIHJldHVybiB0LmlzRm91bmREb2N1bWVudCgpID8gdC52ZXJzaW9uIDogcnQubWluKCk7XG59XG5cbi8qKlxuICogQSBtdXRhdGlvbiB0aGF0IGNyZWF0ZXMgb3IgcmVwbGFjZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcbiAqIG9iamVjdCB2YWx1ZSBjb250ZW50cy5cbiAqLyBjbGFzcyBlbiBleHRlbmRzIEhlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzID0gW10pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLnZhbHVlID0gZSwgdGhpcy5wcmVjb25kaXRpb24gPSBuLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IHMsIFxuICAgICAgICB0aGlzLnR5cGUgPSAwIC8qIFNldCAqLztcbiAgICB9XG59XG5cbmNsYXNzIG5uIGV4dGVuZHMgSGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkgPSBbXSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMuZGF0YSA9IGUsIHRoaXMuZmllbGRNYXNrID0gbiwgdGhpcy5wcmVjb25kaXRpb24gPSBzLCBcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBpLCB0aGlzLnR5cGUgPSAxIC8qIFBhdGNoICovO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc24odCkge1xuICAgIGNvbnN0IGUgPSBuZXcgTWFwO1xuICAgIHJldHVybiB0LmZpZWxkTWFzay5maWVsZHMuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgIGlmICghbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0LmRhdGEuZmllbGQobik7XG4gICAgICAgICAgICBlLnNldChuLCBzKTtcbiAgICAgICAgfVxuICAgIH0pKSwgZTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbGlzdCBvZiBcInRyYW5zZm9ybSByZXN1bHRzXCIgKGEgdHJhbnNmb3JtIHJlc3VsdCBpcyBhIGZpZWxkIHZhbHVlXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIHRyYW5zZm9ybSkgZm9yIHVzZSBhZnRlciBhIG11dGF0aW9uXG4gKiBjb250YWluaW5nIHRyYW5zZm9ybXMgaGFzIGJlZW4gYWNrbm93bGVkZ2VkIGJ5IHRoZSBzZXJ2ZXIuXG4gKlxuICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIFRoZSBmaWVsZCB0cmFuc2Zvcm1zIHRvIGFwcGx5IHRoZSByZXN1bHQgdG8uXG4gKiBAcGFyYW0gbXV0YWJsZURvY3VtZW50IC0gVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGRvY3VtZW50IGFmdGVyIGFwcGx5aW5nIGFsbFxuICogcHJldmlvdXMgbXV0YXRpb25zLlxuICogQHBhcmFtIHNlcnZlclRyYW5zZm9ybVJlc3VsdHMgLSBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgcmVjZWl2ZWQgYnkgdGhlIHNlcnZlci5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyBsaXN0LlxuICovIGZ1bmN0aW9uIHJuKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbmV3IE1hcDtcbiAgICBCKHQubGVuZ3RoID09PSBuLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0W2ldLCBvID0gci50cmFuc2Zvcm0sIGMgPSBlLmRhdGEuZmllbGQoci5maWVsZCk7XG4gICAgICAgIHMuc2V0KHIuZmllbGQsIGtlKG8sIGMsIG5baV0pKTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGxpc3Qgb2YgXCJ0cmFuc2Zvcm0gcmVzdWx0c1wiIChhIHRyYW5zZm9ybSByZXN1bHQgaXMgYSBmaWVsZCB2YWx1ZVxuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSB0cmFuc2Zvcm0pIGZvciB1c2Ugd2hlbiBhcHBseWluZyBhXG4gKiB0cmFuc2Zvcm0gbG9jYWxseS5cbiAqXG4gKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gVGhlIGZpZWxkIHRyYW5zZm9ybXMgdG8gYXBwbHkgdGhlIHJlc3VsdCB0by5cbiAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIFRoZSBsb2NhbCB0aW1lIG9mIHRoZSBtdXRhdGlvbiAodXNlZCB0b1xuICogICAgIGdlbmVyYXRlIFNlcnZlclRpbWVzdGFtcFZhbHVlcykuXG4gKiBAcGFyYW0gbXV0YWJsZURvY3VtZW50IC0gVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGRvY3VtZW50IGFmdGVyIGFwcGx5aW5nIGFsbFxuICogICAgIHByZXZpb3VzIG11dGF0aW9ucy5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyBsaXN0LlxuICovIGZ1bmN0aW9uIG9uKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbmV3IE1hcDtcbiAgICBmb3IgKGNvbnN0IGkgb2YgdCkge1xuICAgICAgICBjb25zdCB0ID0gaS50cmFuc2Zvcm0sIHIgPSBuLmRhdGEuZmllbGQoaS5maWVsZCk7XG4gICAgICAgIHMuc2V0KGkuZmllbGQsIHhlKHQsIHIsIGUpKTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5cbi8qKiBBIG11dGF0aW9uIHRoYXQgZGVsZXRlcyB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleS4gKi8gY2xhc3MgY24gZXh0ZW5kcyBIZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMucHJlY29uZGl0aW9uID0gZSwgdGhpcy50eXBlID0gMiAvKiBEZWxldGUgKi8gLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IFtdO1xuICAgIH1cbn1cblxuY2xhc3MgYW4gZXh0ZW5kcyBIZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMucHJlY29uZGl0aW9uID0gZSwgdGhpcy50eXBlID0gMyAvKiBWZXJpZnkgKi8gLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IFtdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgdW4ge1xuICAgIC8vIFRPRE8oYi8zMzA3ODE2Myk6IGp1c3QgdXNlIHNpbXBsZXN0IGZvcm0gb2YgZXhpc3RlbmNlIGZpbHRlciBmb3Igbm93XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmNvdW50ID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEVycm9yIENvZGVzIGRlc2NyaWJpbmcgdGhlIGRpZmZlcmVudCB3YXlzIEdSUEMgY2FuIGZhaWwuIFRoZXNlIGFyZSBjb3BpZWRcbiAqIGRpcmVjdGx5IGZyb20gR1JQQydzIHNvdXJjZXMgaGVyZTpcbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxuICpcbiAqIEltcG9ydGFudCEgVGhlIG5hbWVzIG9mIHRoZXNlIGlkZW50aWZpZXJzIG1hdHRlciBiZWNhdXNlIHRoZSBzdHJpbmcgZm9ybXNcbiAqIGFyZSB1c2VkIGZvciByZXZlcnNlIGxvb2t1cHMgZnJvbSB0aGUgd2ViY2hhbm5lbCBzdHJlYW0uIERvIE5PVCBjaGFuZ2UgdGhlXG4gKiBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBvciBjaGFuZ2UgdGhpcyBpbnRvIGEgY29uc3QgZW51bS5cbiAqLyB2YXIgaG4sIGxuO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxuICogaW4gcmVzcG9uc2UgdG8gYSBub24td3JpdGUgb3BlcmF0aW9uLlxuICpcbiAqIFNlZSBpc1Blcm1hbmVudFdyaXRlRXJyb3IgZm9yIGNsYXNzaWZ5aW5nIHdyaXRlIGVycm9ycy5cbiAqL1xuZnVuY3Rpb24gZm4odCkge1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEwoKTtcblxuICAgICAgY2FzZSBLLkNBTkNFTExFRDpcbiAgICAgIGNhc2UgSy5VTktOT1dOOlxuICAgICAgY2FzZSBLLkRFQURMSU5FX0VYQ0VFREVEOlxuICAgICAgY2FzZSBLLlJFU09VUkNFX0VYSEFVU1RFRDpcbiAgICAgIGNhc2UgSy5JTlRFUk5BTDpcbiAgICAgIGNhc2UgSy5VTkFWQUlMQUJMRTpcbiAvLyBVbmF1dGhlbnRpY2F0ZWQgbWVhbnMgc29tZXRoaW5nIHdlbnQgd3Jvbmcgd2l0aCBvdXIgdG9rZW4gYW5kIHdlIG5lZWRcbiAgICAgICAgLy8gdG8gcmV0cnkgd2l0aCBuZXcgY3JlZGVudGlhbHMgd2hpY2ggd2lsbCBoYXBwZW4gYXV0b21hdGljYWxseS5cbiAgICAgICAgICAgICAgY2FzZSBLLlVOQVVUSEVOVElDQVRFRDpcbiAgICAgICAgcmV0dXJuICExO1xuXG4gICAgICBjYXNlIEsuSU5WQUxJRF9BUkdVTUVOVDpcbiAgICAgIGNhc2UgSy5OT1RfRk9VTkQ6XG4gICAgICBjYXNlIEsuQUxSRUFEWV9FWElTVFM6XG4gICAgICBjYXNlIEsuUEVSTUlTU0lPTl9ERU5JRUQ6XG4gICAgICBjYXNlIEsuRkFJTEVEX1BSRUNPTkRJVElPTjpcbiAvLyBBYm9ydGVkIG1pZ2h0IGJlIHJldHJpZWQgaW4gc29tZSBzY2VuYXJpb3MsIGJ1dCB0aGF0IGlzIGRlcGVuZGFudCBvblxuICAgICAgICAvLyB0aGUgY29udGV4dCBhbmQgc2hvdWxkIGhhbmRsZWQgaW5kaXZpZHVhbGx5IGJ5IHRoZSBjYWxsaW5nIGNvZGUuXG4gICAgICAgIC8vIFNlZSBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vYXBpcy9kZXNpZ24vZXJyb3JzLlxuICAgICAgICAgICAgICBjYXNlIEsuQUJPUlRFRDpcbiAgICAgIGNhc2UgSy5PVVRfT0ZfUkFOR0U6XG4gICAgICBjYXNlIEsuVU5JTVBMRU1FTlRFRDpcbiAgICAgIGNhc2UgSy5EQVRBX0xPU1M6XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGVycm9yIGNvZGUgcmVwcmVzZW50cyBhIHBlcm1hbmVudCBlcnJvciB3aGVuIHJlY2VpdmVkXG4gKiBpbiByZXNwb25zZSB0byBhIHdyaXRlIG9wZXJhdGlvbi5cbiAqXG4gKiBXcml0ZSBvcGVyYXRpb25zIG11c3QgYmUgaGFuZGxlZCBzcGVjaWFsbHkgYmVjYXVzZSBhcyBvZiBiLzExOTQzNzc2NCwgQUJPUlRFRFxuICogZXJyb3JzIG9uIHRoZSB3cml0ZSBzdHJlYW0gc2hvdWxkIGJlIHJldHJpZWQgdG9vIChldmVuIHRob3VnaCBBQk9SVEVEIGVycm9yc1xuICogYXJlIG5vdCBnZW5lcmFsbHkgcmV0cnlhYmxlKS5cbiAqXG4gKiBOb3RlIHRoYXQgZHVyaW5nIHRoZSBpbml0aWFsIGhhbmRzaGFrZSBvbiB0aGUgd3JpdGUgc3RyZWFtIGFuIEFCT1JURUQgZXJyb3JcbiAqIHNpZ25hbHMgdGhhdCB3ZSBzaG91bGQgZGlzY2FyZCBvdXIgc3RyZWFtIHRva2VuIChpLmUuIGl0IGlzIHBlcm1hbmVudCkuIFRoaXNcbiAqIG1lYW5zIGEgaGFuZHNoYWtlIGVycm9yIHNob3VsZCBiZSBjbGFzc2lmaWVkIHdpdGggaXNQZXJtYW5lbnRFcnJvciwgYWJvdmUuXG4gKi9cbi8qKlxuICogTWFwcyBhbiBlcnJvciBDb2RlIGZyb20gR1JQQyBzdGF0dXMgY29kZSBudW1iZXIsIGxpa2UgMCwgMSwgb3IgMTQuIFRoZXNlXG4gKiBhcmUgbm90IHRoZSBzYW1lIGFzIEhUVFAgc3RhdHVzIGNvZGVzLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIEdSUEMgc3RhdHVzIGNvZGUuIEZhaWxzIGlmIHRoZXJlXG4gKiAgICAgaXMgbm8gbWF0Y2guXG4gKi9cbmZ1bmN0aW9uIGRuKHQpIHtcbiAgICBpZiAodm9pZCAwID09PSB0KSBcbiAgICAvLyBUaGlzIHNob3VsZG4ndCBub3JtYWxseSBoYXBwZW4sIGJ1dCBpbiBjZXJ0YWluIGVycm9yIGNhc2VzIChsaWtlIHRyeWluZ1xuICAgIC8vIHRvIHNlbmQgaW52YWxpZCBwcm90byBtZXNzYWdlcykgd2UgbWF5IGdldCBhbiBlcnJvciB3aXRoIG5vIEdSUEMgY29kZS5cbiAgICByZXR1cm4gTyhcIkdSUEMgZXJyb3IgaGFzIG5vIC5jb2RlXCIpLCBLLlVOS05PV047XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIGhuLk9LOlxuICAgICAgICByZXR1cm4gSy5PSztcblxuICAgICAgY2FzZSBobi5DQU5DRUxMRUQ6XG4gICAgICAgIHJldHVybiBLLkNBTkNFTExFRDtcblxuICAgICAgY2FzZSBobi5VTktOT1dOOlxuICAgICAgICByZXR1cm4gSy5VTktOT1dOO1xuXG4gICAgICBjYXNlIGhuLkRFQURMSU5FX0VYQ0VFREVEOlxuICAgICAgICByZXR1cm4gSy5ERUFETElORV9FWENFRURFRDtcblxuICAgICAgY2FzZSBobi5SRVNPVVJDRV9FWEhBVVNURUQ6XG4gICAgICAgIHJldHVybiBLLlJFU09VUkNFX0VYSEFVU1RFRDtcblxuICAgICAgY2FzZSBobi5JTlRFUk5BTDpcbiAgICAgICAgcmV0dXJuIEsuSU5URVJOQUw7XG5cbiAgICAgIGNhc2UgaG4uVU5BVkFJTEFCTEU6XG4gICAgICAgIHJldHVybiBLLlVOQVZBSUxBQkxFO1xuXG4gICAgICBjYXNlIGhuLlVOQVVUSEVOVElDQVRFRDpcbiAgICAgICAgcmV0dXJuIEsuVU5BVVRIRU5USUNBVEVEO1xuXG4gICAgICBjYXNlIGhuLklOVkFMSURfQVJHVU1FTlQ6XG4gICAgICAgIHJldHVybiBLLklOVkFMSURfQVJHVU1FTlQ7XG5cbiAgICAgIGNhc2UgaG4uTk9UX0ZPVU5EOlxuICAgICAgICByZXR1cm4gSy5OT1RfRk9VTkQ7XG5cbiAgICAgIGNhc2UgaG4uQUxSRUFEWV9FWElTVFM6XG4gICAgICAgIHJldHVybiBLLkFMUkVBRFlfRVhJU1RTO1xuXG4gICAgICBjYXNlIGhuLlBFUk1JU1NJT05fREVOSUVEOlxuICAgICAgICByZXR1cm4gSy5QRVJNSVNTSU9OX0RFTklFRDtcblxuICAgICAgY2FzZSBobi5GQUlMRURfUFJFQ09ORElUSU9OOlxuICAgICAgICByZXR1cm4gSy5GQUlMRURfUFJFQ09ORElUSU9OO1xuXG4gICAgICBjYXNlIGhuLkFCT1JURUQ6XG4gICAgICAgIHJldHVybiBLLkFCT1JURUQ7XG5cbiAgICAgIGNhc2UgaG4uT1VUX09GX1JBTkdFOlxuICAgICAgICByZXR1cm4gSy5PVVRfT0ZfUkFOR0U7XG5cbiAgICAgIGNhc2UgaG4uVU5JTVBMRU1FTlRFRDpcbiAgICAgICAgcmV0dXJuIEsuVU5JTVBMRU1FTlRFRDtcblxuICAgICAgY2FzZSBobi5EQVRBX0xPU1M6XG4gICAgICAgIHJldHVybiBLLkRBVEFfTE9TUztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEwoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gSFRUUCByZXNwb25zZSdzIGVycm9yIHN0YXR1cyB0byB0aGUgZXF1aXZhbGVudCBlcnJvciBjb2RlLlxuICpcbiAqIEBwYXJhbSBzdGF0dXMgLSBBbiBIVFRQIGVycm9yIHJlc3BvbnNlIHN0YXR1cyAoXCJGQUlMRURfUFJFQ09ORElUSU9OXCIsXG4gKiBcIlVOS05PV05cIiwgZXRjLilcbiAqIEByZXR1cm5zIFRoZSBlcXVpdmFsZW50IENvZGUuIE5vbi1tYXRjaGluZyByZXNwb25zZXMgYXJlIG1hcHBlZCB0b1xuICogICAgIENvZGUuVU5LTk9XTi5cbiAqLyAobG4gPSBobiB8fCAoaG4gPSB7fSkpW2xuLk9LID0gMF0gPSBcIk9LXCIsIGxuW2xuLkNBTkNFTExFRCA9IDFdID0gXCJDQU5DRUxMRURcIiwgXG5sbltsbi5VTktOT1dOID0gMl0gPSBcIlVOS05PV05cIiwgbG5bbG4uSU5WQUxJRF9BUkdVTUVOVCA9IDNdID0gXCJJTlZBTElEX0FSR1VNRU5UXCIsIFxubG5bbG4uREVBRExJTkVfRVhDRUVERUQgPSA0XSA9IFwiREVBRExJTkVfRVhDRUVERURcIiwgbG5bbG4uTk9UX0ZPVU5EID0gNV0gPSBcIk5PVF9GT1VORFwiLCBcbmxuW2xuLkFMUkVBRFlfRVhJU1RTID0gNl0gPSBcIkFMUkVBRFlfRVhJU1RTXCIsIGxuW2xuLlBFUk1JU1NJT05fREVOSUVEID0gN10gPSBcIlBFUk1JU1NJT05fREVOSUVEXCIsIFxubG5bbG4uVU5BVVRIRU5USUNBVEVEID0gMTZdID0gXCJVTkFVVEhFTlRJQ0FURURcIiwgbG5bbG4uUkVTT1VSQ0VfRVhIQVVTVEVEID0gOF0gPSBcIlJFU09VUkNFX0VYSEFVU1RFRFwiLCBcbmxuW2xuLkZBSUxFRF9QUkVDT05ESVRJT04gPSA5XSA9IFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiLCBsbltsbi5BQk9SVEVEID0gMTBdID0gXCJBQk9SVEVEXCIsIFxubG5bbG4uT1VUX09GX1JBTkdFID0gMTFdID0gXCJPVVRfT0ZfUkFOR0VcIiwgbG5bbG4uVU5JTVBMRU1FTlRFRCA9IDEyXSA9IFwiVU5JTVBMRU1FTlRFRFwiLCBcbmxuW2xuLklOVEVSTkFMID0gMTNdID0gXCJJTlRFUk5BTFwiLCBsbltsbi5VTkFWQUlMQUJMRSA9IDE0XSA9IFwiVU5BVkFJTEFCTEVcIiwgbG5bbG4uREFUQV9MT1NTID0gMTVdID0gXCJEQVRBX0xPU1NcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIEFuIGltbXV0YWJsZSBzb3J0ZWQgbWFwIGltcGxlbWVudGF0aW9uLCBiYXNlZCBvbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2tcbi8vIHRyZWUuXG5jbGFzcyB3biB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSB0LCB0aGlzLnJvb3QgPSBlIHx8IG1uLkVNUFRZO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkIG9yIHJlcGxhY2VkLlxuICAgIGluc2VydCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgd24odGhpcy5jb21wYXJhdG9yLCB0aGlzLnJvb3QuaW5zZXJ0KHQsIGUsIHRoaXMuY29tcGFyYXRvcikuY29weShudWxsLCBudWxsLCBtbi5CTEFDSywgbnVsbCwgbnVsbCkpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAgcmVtb3ZlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB3bih0aGlzLmNvbXBhcmF0b3IsIHRoaXMucm9vdC5yZW1vdmUodCwgdGhpcy5jb21wYXJhdG9yKS5jb3B5KG51bGwsIG51bGwsIG1uLkJMQUNLLCBudWxsLCBudWxsKSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBub2RlIHdpdGggdGhlIGdpdmVuIGtleSwgb3IgbnVsbC5cbiAgICBnZXQodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMucm9vdDtcbiAgICAgICAgZm9yICg7IWUuaXNFbXB0eSgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmNvbXBhcmF0b3IodCwgZS5rZXkpO1xuICAgICAgICAgICAgaWYgKDAgPT09IG4pIHJldHVybiBlLnZhbHVlO1xuICAgICAgICAgICAgbiA8IDAgPyBlID0gZS5sZWZ0IDogbiA+IDAgJiYgKGUgPSBlLnJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGVsZW1lbnQgaW4gdGhpcyBzb3J0ZWQgbWFwLCBvciAtMSBpZiBpdCBkb2Vzbid0XG4gICAgLy8gZXhpc3QuXG4gICAgaW5kZXhPZih0KSB7XG4gICAgICAgIC8vIE51bWJlciBvZiBub2RlcyB0aGF0IHdlcmUgcHJ1bmVkIHdoZW4gZGVzY2VuZGluZyByaWdodFxuICAgICAgICBsZXQgZSA9IDAsIG4gPSB0aGlzLnJvb3Q7XG4gICAgICAgIGZvciAoOyFuLmlzRW1wdHkoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5jb21wYXJhdG9yKHQsIG4ua2V5KTtcbiAgICAgICAgICAgIGlmICgwID09PSBzKSByZXR1cm4gZSArIG4ubGVmdC5zaXplO1xuICAgICAgICAgICAgcyA8IDAgPyBuID0gbi5sZWZ0IDogKFxuICAgICAgICAgICAgLy8gQ291bnQgYWxsIG5vZGVzIGxlZnQgb2YgdGhlIG5vZGUgcGx1cyB0aGUgbm9kZSBpdHNlbGZcbiAgICAgICAgICAgIGUgKz0gbi5sZWZ0LnNpemUgKyAxLCBuID0gbi5yaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm9kZSBub3QgZm91bmRcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB0b3RhbCBudW1iZXIgb2Ygbm9kZXMgaW4gdGhlIG1hcC5cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5zaXplO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIGtleSBpbiB0aGUgbWFwLlxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5taW5LZXkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIG1hcC5cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QubWF4S2V5KCk7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAvLyBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIGlub3JkZXJUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lmlub3JkZXJUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIGZvckVhY2godCkge1xuICAgICAgICB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodChlLCBuKSwgITEpKSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodC5wdXNoKGAke2V9OiR7bn1gKSwgITEpKSksIGB7JHt0LmpvaW4oXCIsIFwiKX19YDtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSBtYXAgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpc1xuICAgIC8vIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIHJldmVyc2VUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LnJldmVyc2VUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYW4gaXRlcmF0b3Igb3ZlciB0aGUgU29ydGVkTWFwLlxuICAgIGdldEl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IF9uKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCAhMSk7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgX24odGhpcy5yb290LCB0LCB0aGlzLmNvbXBhcmF0b3IsICExKTtcbiAgICB9XG4gICAgZ2V0UmV2ZXJzZUl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IF9uKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCAhMCk7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvckZyb20odCkge1xuICAgICAgICByZXR1cm4gbmV3IF9uKHRoaXMucm9vdCwgdCwgdGhpcy5jb21wYXJhdG9yLCAhMCk7XG4gICAgfVxufVxuXG4gLy8gZW5kIFNvcnRlZE1hcFxuLy8gQW4gaXRlcmF0b3Igb3ZlciBhbiBMTFJCTm9kZS5cbmNsYXNzIF9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuaXNSZXZlcnNlID0gcywgdGhpcy5ub2RlU3RhY2sgPSBbXTtcbiAgICAgICAgbGV0IGkgPSAxO1xuICAgICAgICBmb3IgKDshdC5pc0VtcHR5KCk7ICkgaWYgKGkgPSBlID8gbih0LmtleSwgZSkgOiAxLCBcbiAgICAgICAgLy8gZmxpcCB0aGUgY29tcGFyaXNvbiBpZiB3ZSdyZSBnb2luZyBpbiByZXZlcnNlXG4gICAgICAgIHMgJiYgKGkgKj0gLTEpLCBpIDwgMCkgXG4gICAgICAgIC8vIFRoaXMgbm9kZSBpcyBsZXNzIHRoYW4gb3VyIHN0YXJ0IGtleS4gaWdub3JlIGl0XG4gICAgICAgIHQgPSB0aGlzLmlzUmV2ZXJzZSA/IHQubGVmdCA6IHQucmlnaHQ7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKDAgPT09IGkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZXhhY3RseSBlcXVhbCB0byBvdXIgc3RhcnQga2V5LiBQdXNoIGl0IG9uIHRoZSBzdGFjayxcbiAgICAgICAgICAgICAgICAvLyBidXQgc3RvcCBpdGVyYXRpbmc7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaCh0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBncmVhdGVyIHRoYW4gb3VyIHN0YXJ0IGtleSwgYWRkIGl0IHRvIHRoZSBzdGFjayBhbmQgbW92ZVxuICAgICAgICAgICAgLy8gdG8gdGhlIG5leHQgb25lXG4gICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKHQpLCB0ID0gdGhpcy5pc1JldmVyc2UgPyB0LnJpZ2h0IDogdC5sZWZ0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldE5leHQoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5ub2RlU3RhY2sucG9wKCk7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBrZXk6IHQua2V5LFxuICAgICAgICAgICAgdmFsdWU6IHQudmFsdWVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuaXNSZXZlcnNlKSBmb3IgKHQgPSB0LmxlZnQ7ICF0LmlzRW1wdHkoKTsgKSB0aGlzLm5vZGVTdGFjay5wdXNoKHQpLCB0ID0gdC5yaWdodDsgZWxzZSBmb3IgKHQgPSB0LnJpZ2h0OyAhdC5pc0VtcHR5KCk7ICkgdGhpcy5ub2RlU3RhY2sucHVzaCh0KSwgXG4gICAgICAgIHQgPSB0LmxlZnQ7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBoYXNOZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlU3RhY2subGVuZ3RoID4gMDtcbiAgICB9XG4gICAgcGVlaygpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMubm9kZVN0YWNrLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLm5vZGVTdGFja1t0aGlzLm5vZGVTdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtleTogdC5rZXksXG4gICAgICAgICAgICB2YWx1ZTogdC52YWx1ZVxuICAgICAgICB9O1xuICAgIH1cbn1cblxuIC8vIGVuZCBTb3J0ZWRNYXBJdGVyYXRvclxuLy8gUmVwcmVzZW50cyBhIG5vZGUgaW4gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrIHRyZWUuXG5jbGFzcyBtbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLmtleSA9IHQsIHRoaXMudmFsdWUgPSBlLCB0aGlzLmNvbG9yID0gbnVsbCAhPSBuID8gbiA6IG1uLlJFRCwgdGhpcy5sZWZ0ID0gbnVsbCAhPSBzID8gcyA6IG1uLkVNUFRZLCBcbiAgICAgICAgdGhpcy5yaWdodCA9IG51bGwgIT0gaSA/IGkgOiBtbi5FTVBUWSwgdGhpcy5zaXplID0gdGhpcy5sZWZ0LnNpemUgKyAxICsgdGhpcy5yaWdodC5zaXplO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLCBvcHRpb25hbGx5IHJlcGxhY2luZyBwaWVjZXMgb2YgaXQuXG4gICAgY29weSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHJldHVybiBuZXcgbW4obnVsbCAhPSB0ID8gdCA6IHRoaXMua2V5LCBudWxsICE9IGUgPyBlIDogdGhpcy52YWx1ZSwgbnVsbCAhPSBuID8gbiA6IHRoaXMuY29sb3IsIG51bGwgIT0gcyA/IHMgOiB0aGlzLmxlZnQsIG51bGwgIT0gaSA/IGkgOiB0aGlzLnJpZ2h0KTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgIC8vIGZvciBlYWNoIG5vZGUuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICBpbm9yZGVyVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5pbm9yZGVyVHJhdmVyc2FsKHQpIHx8IHQodGhpcy5rZXksIHRoaXMudmFsdWUpIHx8IHRoaXMucmlnaHQuaW5vcmRlclRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSB0cmVlIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvblxuICAgIC8vIGZ1bmN0aW9uIGZvciBlYWNoIG5vZGUuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICByZXZlcnNlVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQucmV2ZXJzZVRyYXZlcnNhbCh0KSB8fCB0KHRoaXMua2V5LCB0aGlzLnZhbHVlKSB8fCB0aGlzLmxlZnQucmV2ZXJzZVRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWluaW11bSBub2RlIGluIHRoZSB0cmVlLlxuICAgIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5pc0VtcHR5KCkgPyB0aGlzIDogdGhpcy5sZWZ0Lm1pbigpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgdHJlZS5cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigpLmtleTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5pc0VtcHR5KCkgPyB0aGlzLmtleSA6IHRoaXMucmlnaHQubWF4S2V5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUsIHdpdGggdGhlIGtleS92YWx1ZSBhZGRlZC5cbiAgICBpbnNlcnQodCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGkgPSBuKHQsIHMua2V5KTtcbiAgICAgICAgcmV0dXJuIHMgPSBpIDwgMCA/IHMuY29weShudWxsLCBudWxsLCBudWxsLCBzLmxlZnQuaW5zZXJ0KHQsIGUsIG4pLCBudWxsKSA6IDAgPT09IGkgPyBzLmNvcHkobnVsbCwgZSwgbnVsbCwgbnVsbCwgbnVsbCkgOiBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgcy5yaWdodC5pbnNlcnQodCwgZSwgbikpLCBcbiAgICAgICAgcy5maXhVcCgpO1xuICAgIH1cbiAgICByZW1vdmVNaW4oKSB7XG4gICAgICAgIGlmICh0aGlzLmxlZnQuaXNFbXB0eSgpKSByZXR1cm4gbW4uRU1QVFk7XG4gICAgICAgIGxldCB0ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHQubGVmdC5pc1JlZCgpIHx8IHQubGVmdC5sZWZ0LmlzUmVkKCkgfHwgKHQgPSB0Lm1vdmVSZWRMZWZ0KCkpLCB0ID0gdC5jb3B5KG51bGwsIG51bGwsIG51bGwsIHQubGVmdC5yZW1vdmVNaW4oKSwgbnVsbCksIFxuICAgICAgICB0LmZpeFVwKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBpdGVtIHJlbW92ZWQuXG4gICAgcmVtb3ZlKHQsIGUpIHtcbiAgICAgICAgbGV0IG4sIHMgPSB0aGlzO1xuICAgICAgICBpZiAoZSh0LCBzLmtleSkgPCAwKSBzLmxlZnQuaXNFbXB0eSgpIHx8IHMubGVmdC5pc1JlZCgpIHx8IHMubGVmdC5sZWZ0LmlzUmVkKCkgfHwgKHMgPSBzLm1vdmVSZWRMZWZ0KCkpLCBcbiAgICAgICAgcyA9IHMuY29weShudWxsLCBudWxsLCBudWxsLCBzLmxlZnQucmVtb3ZlKHQsIGUpLCBudWxsKTsgZWxzZSB7XG4gICAgICAgICAgICBpZiAocy5sZWZ0LmlzUmVkKCkgJiYgKHMgPSBzLnJvdGF0ZVJpZ2h0KCkpLCBzLnJpZ2h0LmlzRW1wdHkoKSB8fCBzLnJpZ2h0LmlzUmVkKCkgfHwgcy5yaWdodC5sZWZ0LmlzUmVkKCkgfHwgKHMgPSBzLm1vdmVSZWRSaWdodCgpKSwgXG4gICAgICAgICAgICAwID09PSBlKHQsIHMua2V5KSkge1xuICAgICAgICAgICAgICAgIGlmIChzLnJpZ2h0LmlzRW1wdHkoKSkgcmV0dXJuIG1uLkVNUFRZO1xuICAgICAgICAgICAgICAgIG4gPSBzLnJpZ2h0Lm1pbigpLCBzID0gcy5jb3B5KG4ua2V5LCBuLnZhbHVlLCBudWxsLCBudWxsLCBzLnJpZ2h0LnJlbW92ZU1pbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHMgPSBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgcy5yaWdodC5yZW1vdmUodCwgZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzLmZpeFVwKCk7XG4gICAgfVxuICAgIGlzUmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xvcjtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSBhZnRlciBwZXJmb3JtaW5nIGFueSBuZWVkZWQgcm90YXRpb25zLlxuICAgIGZpeFVwKCkge1xuICAgICAgICBsZXQgdCA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0LnJpZ2h0LmlzUmVkKCkgJiYgIXQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5yb3RhdGVMZWZ0KCkpLCB0LmxlZnQuaXNSZWQoKSAmJiB0LmxlZnQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5yb3RhdGVSaWdodCgpKSwgXG4gICAgICAgIHQubGVmdC5pc1JlZCgpICYmIHQucmlnaHQuaXNSZWQoKSAmJiAodCA9IHQuY29sb3JGbGlwKCkpLCB0O1xuICAgIH1cbiAgICBtb3ZlUmVkTGVmdCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLmNvbG9yRmxpcCgpO1xuICAgICAgICByZXR1cm4gdC5yaWdodC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgdC5yaWdodC5yb3RhdGVSaWdodCgpKSwgXG4gICAgICAgIHQgPSB0LnJvdGF0ZUxlZnQoKSwgdCA9IHQuY29sb3JGbGlwKCkpLCB0O1xuICAgIH1cbiAgICBtb3ZlUmVkUmlnaHQoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5jb2xvckZsaXAoKTtcbiAgICAgICAgcmV0dXJuIHQubGVmdC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LnJvdGF0ZVJpZ2h0KCksIHQgPSB0LmNvbG9yRmxpcCgpKSwgdDtcbiAgICB9XG4gICAgcm90YXRlTGVmdCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY29weShudWxsLCBudWxsLCBtbi5SRUQsIG51bGwsIHRoaXMucmlnaHQubGVmdCk7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgdCwgbnVsbCk7XG4gICAgfVxuICAgIHJvdGF0ZVJpZ2h0KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIG1uLlJFRCwgdGhpcy5sZWZ0LnJpZ2h0LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsIHRoaXMuY29sb3IsIG51bGwsIHQpO1xuICAgIH1cbiAgICBjb2xvckZsaXAoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmxlZnQuY29weShudWxsLCBudWxsLCAhdGhpcy5sZWZ0LmNvbG9yLCBudWxsLCBudWxsKSwgZSA9IHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCAhdGhpcy5yaWdodC5jb2xvciwgbnVsbCwgbnVsbCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkobnVsbCwgbnVsbCwgIXRoaXMuY29sb3IsIHQsIGUpO1xuICAgIH1cbiAgICAvLyBGb3IgdGVzdGluZy5cbiAgICBjaGVja01heERlcHRoKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jaGVjaygpO1xuICAgICAgICByZXR1cm4gTWF0aC5wb3coMiwgdCkgPD0gdGhpcy5zaXplICsgMTtcbiAgICB9XG4gICAgLy8gSW4gYSBiYWxhbmNlZCBSQiB0cmVlLCB0aGUgYmxhY2stZGVwdGggKG51bWJlciBvZiBibGFjayBub2RlcykgZnJvbSByb290IHRvXG4gICAgLy8gbGVhdmVzIGlzIGVxdWFsIG9uIGJvdGggc2lkZXMuICBUaGlzIGZ1bmN0aW9uIHZlcmlmaWVzIHRoYXQgb3IgYXNzZXJ0cy5cbiAgICBjaGVjaygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWQoKSAmJiB0aGlzLmxlZnQuaXNSZWQoKSkgdGhyb3cgTCgpO1xuICAgICAgICBpZiAodGhpcy5yaWdodC5pc1JlZCgpKSB0aHJvdyBMKCk7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmxlZnQuY2hlY2soKTtcbiAgICAgICAgaWYgKHQgIT09IHRoaXMucmlnaHQuY2hlY2soKSkgdGhyb3cgTCgpO1xuICAgICAgICByZXR1cm4gdCArICh0aGlzLmlzUmVkKCkgPyAwIDogMSk7XG4gICAgfVxufVxuXG4gLy8gZW5kIExMUkJOb2RlXG4vLyBFbXB0eSBub2RlIGlzIHNoYXJlZCBiZXR3ZWVuIGFsbCBMTFJCIHRyZWVzLlxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbm1uLkVNUFRZID0gbnVsbCwgbW4uUkVEID0gITAsIG1uLkJMQUNLID0gITE7XG5cbi8vIGVuZCBMTFJCRW1wdHlOb2RlXG5tbi5FTVBUWSA9IG5ldyBcbi8vIFJlcHJlc2VudHMgYW4gZW1wdHkgbm9kZSAoYSBsZWFmIG5vZGUgaW4gdGhlIFJlZC1CbGFjayBUcmVlKS5cbmNsYXNzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zaXplID0gMDtcbiAgICB9XG4gICAgZ2V0IGtleSgpIHtcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG4gICAgZ2V0IGNvbG9yKCkge1xuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfVxuICAgIGdldCBsZWZ0KCkge1xuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfVxuICAgIGdldCByaWdodCgpIHtcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLlxuICAgIGNvcHkodCwgZSwgbiwgcywgaSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkvdmFsdWUgYWRkZWQuXG4gICAgaW5zZXJ0KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBtbih0LCBlKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkgcmVtb3ZlZC5cbiAgICByZW1vdmUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBpbm9yZGVyVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICByZXZlcnNlVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpc1JlZCgpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvLyBGb3IgdGVzdGluZy5cbiAgICBjaGVja01heERlcHRoKCkge1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGNoZWNrKCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTb3J0ZWRTZXQgaXMgYW4gaW1tdXRhYmxlIChjb3B5LW9uLXdyaXRlKSBjb2xsZWN0aW9uIHRoYXQgaG9sZHMgZWxlbWVudHNcbiAqIGluIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgY29tcGFyYXRvci5cbiAqXG4gKiBOT1RFOiBpZiBwcm92aWRlZCBjb21wYXJhdG9yIHJldHVybnMgMCBmb3IgdHdvIGVsZW1lbnRzLCB3ZSBjb25zaWRlciB0aGVtIHRvXG4gKiBiZSBlcXVhbCFcbiAqL1xuY2xhc3MgZ24ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gdCwgdGhpcy5kYXRhID0gbmV3IHduKHRoaXMuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIGhhcyh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmRhdGEuZ2V0KHQpO1xuICAgIH1cbiAgICBmaXJzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5taW5LZXkoKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5tYXhLZXkoKTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuc2l6ZTtcbiAgICB9XG4gICAgaW5kZXhPZih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaW5kZXhPZih0KTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIGVsZW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi8gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIHRoaXMuZGF0YS5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQoZSksICExKSkpO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogcmFuZ2VbMF0gJmx0Oz0gZWxlbSAmbHQ7IHJhbmdlWzFdLiAqLyAgICBmb3JFYWNoSW5SYW5nZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHRbMF0pO1xuICAgICAgICBmb3IgKDtuLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gbi5nZXROZXh0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jb21wYXJhdG9yKHMua2V5LCB0WzFdKSA+PSAwKSByZXR1cm47XG4gICAgICAgICAgICBlKHMua2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGBlbGVtYHMgc3VjaCB0aGF0OiBzdGFydCAmbHQ7PSBlbGVtIHVudGlsIGZhbHNlIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBmb3JFYWNoV2hpbGUodCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgZm9yIChuID0gdm9pZCAwICE9PSBlID8gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbShlKSA6IHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpOyBuLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBpZiAoIXQobi5nZXROZXh0KCkua2V5KSkgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBGaW5kcyB0aGUgbGVhc3QgZWxlbWVudCBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYGVsZW1gLiAqLyAgICBmaXJzdEFmdGVyT3JFcXVhbCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHQpO1xuICAgICAgICByZXR1cm4gZS5oYXNOZXh0KCkgPyBlLmdldE5leHQoKS5rZXkgOiBudWxsO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB5bih0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKSk7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgeW4odGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0KSk7XG4gICAgfVxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYW4gZWxlbWVudCAqLyAgICBhZGQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUodCkuaW5zZXJ0KHQsICEwKSk7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIGFuIGVsZW1lbnQgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzKHQpID8gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUodCkpIDogdGhpcztcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5pc0VtcHR5KCk7XG4gICAgfVxuICAgIHVuaW9uV2l0aCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcztcbiAgICAgICAgLy8gTWFrZSBzdXJlIGByZXN1bHRgIGFsd2F5cyByZWZlcnMgdG8gdGhlIGxhcmdlciBvbmUgb2YgdGhlIHR3byBzZXRzLlxuICAgICAgICAgICAgICAgIHJldHVybiBlLnNpemUgPCB0LnNpemUgJiYgKGUgPSB0LCB0ID0gdGhpcyksIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlID0gZS5hZGQodCk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBnbikpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gdC5zaXplKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKSwgbiA9IHQuZGF0YS5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDtlLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5nZXROZXh0KCkua2V5LCBzID0gbi5nZXROZXh0KCkua2V5O1xuICAgICAgICAgICAgaWYgKDAgIT09IHRoaXMuY29tcGFyYXRvcih0LCBzKSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQucHVzaChlKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHQucHVzaChlKSkpLCBcIlNvcnRlZFNldChcIiArIHQudG9TdHJpbmcoKSArIFwiKVwiO1xuICAgIH1cbiAgICBjb3B5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBnbih0aGlzLmNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gZS5kYXRhID0gdCwgZTtcbiAgICB9XG59XG5cbmNsYXNzIHluIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuaXRlciA9IHQ7XG4gICAgfVxuICAgIGdldE5leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXIuZ2V0TmV4dCgpLmtleTtcbiAgICB9XG4gICAgaGFzTmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlci5oYXNOZXh0KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBwbiA9IG5ldyB3bihQdC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gVG4oKSB7XG4gICAgcmV0dXJuIHBuO1xufVxuXG5jb25zdCBFbiA9IG5ldyB3bihQdC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gSW4oKSB7XG4gICAgcmV0dXJuIEVuO1xufVxuXG5jb25zdCBBbiA9IG5ldyB3bihQdC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gUm4oKSB7XG4gICAgcmV0dXJuIEFuO1xufVxuXG5jb25zdCBibiA9IG5ldyBnbihQdC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gUG4oLi4udCkge1xuICAgIGxldCBlID0gYm47XG4gICAgZm9yIChjb25zdCBuIG9mIHQpIGUgPSBlLmFkZChuKTtcbiAgICByZXR1cm4gZTtcbn1cblxuY29uc3Qgdm4gPSBuZXcgZ24oZXQpO1xuXG5mdW5jdGlvbiBWbigpIHtcbiAgICByZXR1cm4gdm47XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGV2ZW50IGZyb20gdGhlIFJlbW90ZVN0b3JlLiBJdCBpcyBzcGxpdCBpbnRvIHRhcmdldENoYW5nZXMgKGNoYW5nZXMgdG8gdGhlXG4gKiBzdGF0ZSBvciB0aGUgc2V0IG9mIGRvY3VtZW50cyBpbiBvdXIgd2F0Y2hlZCB0YXJnZXRzKSBhbmQgZG9jdW1lbnRVcGRhdGVzXG4gKiAoY2hhbmdlcyB0byB0aGUgYWN0dWFsIGRvY3VtZW50cykuXG4gKi8gY2xhc3MgU24ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBzbmFwc2hvdCB2ZXJzaW9uIHRoaXMgZXZlbnQgYnJpbmdzIHVzIHVwIHRvLCBvciBNSU4gaWYgbm90IHNldC5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBIG1hcCBmcm9tIHRhcmdldCB0byBjaGFuZ2VzIHRvIHRoZSB0YXJnZXQuIFNlZSBUYXJnZXRDaGFuZ2UuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBzZXQgb2YgdGFyZ2V0cyB0aGF0IGlzIGtub3duIHRvIGJlIGluY29uc2lzdGVudC4gTGlzdGVucyBmb3IgdGhlc2VcbiAgICAgKiB0YXJnZXRzIHNob3VsZCBiZSByZS1lc3RhYmxpc2hlZCB3aXRob3V0IHJlc3VtZSB0b2tlbnMuXG4gICAgICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogQSBzZXQgb2Ygd2hpY2ggZG9jdW1lbnRzIGhhdmUgY2hhbmdlZCBvciBiZWVuIGRlbGV0ZWQsIGFsb25nIHdpdGggdGhlXG4gICAgICogZG9jJ3MgbmV3IHZhbHVlcyAoaWYgbm90IGRlbGV0ZWQpLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIHdoaWNoIGRvY3VtZW50IHVwZGF0ZXMgYXJlIGR1ZSBvbmx5IHRvIGxpbWJvIHJlc29sdXRpb24gdGFyZ2V0cy5cbiAgICAgKi9cbiAgICBpKSB7XG4gICAgICAgIHRoaXMuc25hcHNob3RWZXJzaW9uID0gdCwgdGhpcy50YXJnZXRDaGFuZ2VzID0gZSwgdGhpcy50YXJnZXRNaXNtYXRjaGVzID0gbiwgdGhpcy5kb2N1bWVudFVwZGF0ZXMgPSBzLCBcbiAgICAgICAgdGhpcy5yZXNvbHZlZExpbWJvRG9jdW1lbnRzID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSEFDSzogVmlld3MgcmVxdWlyZSBSZW1vdGVFdmVudHMgaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHZpZXcgaXNcbiAgICAgKiBDVVJSRU5ULCBidXQgc2Vjb25kYXJ5IHRhYnMgZG9uJ3QgcmVjZWl2ZSByZW1vdGUgZXZlbnRzLiBTbyB0aGlzIG1ldGhvZCBpc1xuICAgICAqIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgUmVtb3RlRXZlbnQgdGhhdCBjYW4gYmUgdXNlZCB0byBhcHBseSBhXG4gICAgICogQ1VSUkVOVCBzdGF0dXMgY2hhbmdlIHRvIGEgVmlldywgZm9yIHF1ZXJpZXMgZXhlY3V0ZWQgaW4gYSBkaWZmZXJlbnQgdGFiLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcbiAgICBzdGF0aWMgY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IE1hcDtcbiAgICAgICAgcmV0dXJuIG4uc2V0KHQsIERuLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSh0LCBlKSksIG5ldyBTbihydC5taW4oKSwgbiwgVm4oKSwgVG4oKSwgUG4oKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgVGFyZ2V0Q2hhbmdlIHNwZWNpZmllcyB0aGUgc2V0IG9mIGNoYW5nZXMgZm9yIGEgc3BlY2lmaWMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAqIGEgUmVtb3RlRXZlbnQuIFRoZXNlIGNoYW5nZXMgdHJhY2sgd2hpY2ggZG9jdW1lbnRzIGFyZSBhZGRlZCwgbW9kaWZpZWQgb3JcbiAqIHJlbW92ZWQsIGFzIHdlbGwgYXMgdGhlIHRhcmdldCdzIHJlc3VtZSB0b2tlbiBhbmQgd2hldGhlciB0aGUgdGFyZ2V0IGlzXG4gKiBtYXJrZWQgQ1VSUkVOVC5cbiAqIFRoZSBhY3R1YWwgY2hhbmdlcyAqdG8qIGRvY3VtZW50cyBhcmUgbm90IHBhcnQgb2YgdGhlIFRhcmdldENoYW5nZSBzaW5jZVxuICogZG9jdW1lbnRzIG1heSBiZSBwYXJ0IG9mIG11bHRpcGxlIHRhcmdldHMuXG4gKi8gY2xhc3MgRG4ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgcXVlcnkgdG8gYmUgcmVzdW1lZFxuICAgICAqIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdCBtYXRjaGVzIHRoZVxuICAgICAqIHF1ZXJ5LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpbiB0aW1lIGZyb20gd2hpY2hcbiAgICAgKiB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBcImN1cnJlbnRcIiAoc3luY2VkKSBzdGF0dXMgb2YgdGhpcyB0YXJnZXQuIE5vdGUgdGhhdCBcImN1cnJlbnRcIlxuICAgICAqIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbCB0aGF0IGltcGxpZXMgdGhhdCBhIHRhcmdldCBpc1xuICAgICAqIGJvdGggdXAtdG8tZGF0ZSBhbmQgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSB3YXRjaCBzdHJlYW0uXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIG5ld2x5IGFzc2lnbmVkIHRvIHRoaXMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAgICAgKiB0aGlzIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgYWxyZWFkeSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBidXQgcmVjZWl2ZWRcbiAgICAgKiBhbiB1cGRhdGUgZHVyaW5nIHRoaXMgcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSByZW1vdmVkIGZyb20gdGhpcyB0YXJnZXQgYXMgcGFydCBvZiB0aGlzXG4gICAgICogcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9IHQsIHRoaXMuY3VycmVudCA9IGUsIHRoaXMuYWRkZWREb2N1bWVudHMgPSBuLCB0aGlzLm1vZGlmaWVkRG9jdW1lbnRzID0gcywgXG4gICAgICAgIHRoaXMucmVtb3ZlZERvY3VtZW50cyA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgVGFyZ2V0Q2hhbmdlcyB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogYXBwbHkgYSBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3IChmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudFxuICAgICAqIHRhYikgb3IgZm9yIG5ldyBxdWVyaWVzICh0byByYWlzZSBzbmFwc2hvdHMgd2l0aCBjb3JyZWN0IENVUlJFTlQgc3RhdHVzKS5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRG4oX3QuRU1QVFlfQllURV9TVFJJTkcsIGUsIFBuKCksIFBuKCksIFBuKCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGNoYW5nZWQgZG9jdW1lbnQgYW5kIGEgbGlzdCBvZiB0YXJnZXQgaWRzIHRvIHdoaWNoIHRoaXMgY2hhbmdlXG4gKiBhcHBsaWVzLlxuICpcbiAqIElmIGRvY3VtZW50IGhhcyBiZWVuIGRlbGV0ZWQgTm9Eb2N1bWVudCB3aWxsIGJlIHByb3ZpZGVkLlxuICovIGNsYXNzIENuIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIG5ldyBkb2N1bWVudCBhcHBsaWVzIHRvIGFsbCBvZiB0aGVzZSB0YXJnZXRzLiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgbmV3IGRvY3VtZW50IGlzIHJlbW92ZWQgZnJvbSBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIGtleSBvZiB0aGUgZG9jdW1lbnQgZm9yIHRoaXMgY2hhbmdlLiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBuZXcgZG9jdW1lbnQgb3IgTm9Eb2N1bWVudCBpZiBpdCB3YXMgZGVsZXRlZC4gSXMgbnVsbCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCB3ZW50IG91dCBvZiB2aWV3IHdpdGhvdXQgdGhlIHNlcnZlciBzZW5kaW5nIGEgbmV3IGRvY3VtZW50LlxuICAgICAqL1xuICAgIHMpIHtcbiAgICAgICAgdGhpcy5rID0gdCwgdGhpcy5yZW1vdmVkVGFyZ2V0SWRzID0gZSwgdGhpcy5rZXkgPSBuLCB0aGlzLiQgPSBzO1xuICAgIH1cbn1cblxuY2xhc3MgTm4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuTyA9IGU7XG4gICAgfVxufVxuXG5jbGFzcyB4biB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFdoYXQga2luZCBvZiBjaGFuZ2Ugb2NjdXJyZWQgdG8gdGhlIHdhdGNoIHRhcmdldC4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIHRhcmdldCBJRHMgdGhhdCB3ZXJlIGFkZGVkL3JlbW92ZWQvc2V0LiAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovXG4gICAgbiA9IF90LkVNUFRZX0JZVEVfU1RSSU5HXG4gICAgLyoqIEFuIFJQQyBlcnJvciBpbmRpY2F0aW5nIHdoeSB0aGUgd2F0Y2ggZmFpbGVkLiAqLyAsIHMgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB0LCB0aGlzLnRhcmdldElkcyA9IGUsIHRoaXMucmVzdW1lVG9rZW4gPSBuLCB0aGlzLmNhdXNlID0gcztcbiAgICB9XG59XG5cbi8qKiBUcmFja3MgdGhlIGludGVybmFsIHN0YXRlIG9mIGEgV2F0Y2ggdGFyZ2V0LiAqLyBjbGFzcyBrbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIChhZGRzIG9yIHJlbW92ZXMpIHRoYXQgd2UgYXJlIHdhaXRpbmcgb24uXG4gICAgICAgICAqIFdlIG9ubHkgY29uc2lkZXIgdGFyZ2V0cyBhY3RpdmUgdGhhdCBoYXZlIG5vIHBlbmRpbmcgcmVzcG9uc2VzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5GID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgZG9jdW1lbnQgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCByYWlzZWQgc25hcHNob3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZXNlIGNoYW5nZXMgYXJlIGNvbnRpbnVvdXNseSB1cGRhdGVkIGFzIHdlIHJlY2VpdmUgZG9jdW1lbnQgdXBkYXRlcyBhbmRcbiAgICAgICAgICogYWx3YXlzIHJlZmxlY3QgdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMgYWdhaW5zdCB0aGUgbGFzdCBpc3N1ZWQgc25hcHNob3QuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLk0gPSBGbigpLCBcbiAgICAgICAgLyoqIFNlZSBwdWJsaWMgZ2V0dGVycyBmb3IgZXhwbGFuYXRpb25zIG9mIHRoZXNlIGZpZWxkcy4gKi9cbiAgICAgICAgdGhpcy5MID0gX3QuRU1QVFlfQllURV9TVFJJTkcsIHRoaXMuQiA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhpcyB0YXJnZXQgc3RhdGUgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBuZXh0IHNuYXBzaG90LiBXZVxuICAgICAgICAgKiBpbml0aWFsaXplIHRvIHRydWUgc28gdGhhdCBuZXdseS1hZGRlZCB0YXJnZXRzIGFyZSBpbmNsdWRlZCBpbiB0aGUgbmV4dFxuICAgICAgICAgKiBSZW1vdGVFdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuVSA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBiZWVuIG1hcmtlZCAnY3VycmVudCcuXG4gICAgICpcbiAgICAgKiAnQ3VycmVudCcgaGFzIHNwZWNpYWwgbWVhbmluZyBpbiB0aGUgUlBDIHByb3RvY29sOiBJdCBpbXBsaWVzIHRoYXQgdGhlXG4gICAgICogV2F0Y2ggYmFja2VuZCBoYXMgc2VudCB1cyBhbGwgY2hhbmdlcyB1cCB0byB0aGUgcG9pbnQgYXQgd2hpY2ggdGhlIHRhcmdldFxuICAgICAqIHdhcyBhZGRlZCBhbmQgdGhhdCB0aGUgdGFyZ2V0IGlzIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0uXG4gICAgICovICAgIGdldCBjdXJyZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5CO1xuICAgIH1cbiAgICAvKiogVGhlIGxhc3QgcmVzdW1lIHRva2VuIHNlbnQgdG8gdXMgZm9yIHRoaXMgdGFyZ2V0LiAqLyAgICBnZXQgcmVzdW1lVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkw7XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBwZW5kaW5nIHRhcmdldCBhZGRzIG9yIHRhcmdldCByZW1vdmVzLiAqLyAgICBnZXQgcSgpIHtcbiAgICAgICAgcmV0dXJuIDAgIT09IHRoaXMuRjtcbiAgICB9XG4gICAgLyoqIFdoZXRoZXIgd2UgaGF2ZSBtb2RpZmllZCBhbnkgc3RhdGUgdGhhdCBzaG91bGQgdHJpZ2dlciBhIHNuYXBzaG90LiAqLyAgICBnZXQgSygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgcmVzdW1lIHRva2VuIHRvIHRoZSBUYXJnZXRDaGFuZ2UsIGJ1dCBvbmx5IHdoZW4gaXQgaGFzIGEgbmV3XG4gICAgICogdmFsdWUuIEVtcHR5IHJlc3VtZVRva2VucyBhcmUgZGlzY2FyZGVkLlxuICAgICAqLyAgICBqKHQpIHtcbiAgICAgICAgdC5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwICYmICh0aGlzLlUgPSAhMCwgdGhpcy5MID0gdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB0YXJnZXQgY2hhbmdlIGZyb20gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBUbyByZXNldCB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhZnRlciByYWlzaW5nIHRoaXMgc25hcHNob3QsIGNhbGxcbiAgICAgKiBgY2xlYXJQZW5kaW5nQ2hhbmdlcygpYC5cbiAgICAgKi8gICAgVygpIHtcbiAgICAgICAgbGV0IHQgPSBQbigpLCBlID0gUG4oKSwgbiA9IFBuKCk7XG4gICAgICAgIHJldHVybiB0aGlzLk0uZm9yRWFjaCgoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAoaSkge1xuICAgICAgICAgICAgICBjYXNlIDAgLyogQWRkZWQgKi8gOlxuICAgICAgICAgICAgICAgIHQgPSB0LmFkZChzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDIgLyogTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgIGUgPSBlLmFkZChzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgbiA9IG4uYWRkKHMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgTCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIG5ldyBEbih0aGlzLkwsIHRoaXMuQiwgdCwgZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhbmQgc2V0cyBgaGFzUGVuZGluZ0NoYW5nZXNgIHRvIGZhbHNlLlxuICAgICAqLyAgICBHKCkge1xuICAgICAgICB0aGlzLlUgPSAhMSwgdGhpcy5NID0gRm4oKTtcbiAgICB9XG4gICAgSCh0LCBlKSB7XG4gICAgICAgIHRoaXMuVSA9ICEwLCB0aGlzLk0gPSB0aGlzLk0uaW5zZXJ0KHQsIGUpO1xuICAgIH1cbiAgICBKKHQpIHtcbiAgICAgICAgdGhpcy5VID0gITAsIHRoaXMuTSA9IHRoaXMuTS5yZW1vdmUodCk7XG4gICAgfVxuICAgIFkoKSB7XG4gICAgICAgIHRoaXMuRiArPSAxO1xuICAgIH1cbiAgICBYKCkge1xuICAgICAgICB0aGlzLkYgLT0gMTtcbiAgICB9XG4gICAgWigpIHtcbiAgICAgICAgdGhpcy5VID0gITAsIHRoaXMuQiA9ICEwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGhlbHBlciBjbGFzcyB0byBhY2N1bXVsYXRlIHdhdGNoIGNoYW5nZXMgaW50byBhIFJlbW90ZUV2ZW50LlxuICovXG5jbGFzcyAkbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnR0ID0gdCwgXG4gICAgICAgIC8qKiBUaGUgaW50ZXJuYWwgc3RhdGUgb2YgYWxsIHRyYWNrZWQgdGFyZ2V0cy4gKi9cbiAgICAgICAgdGhpcy5ldCA9IG5ldyBNYXAsIFxuICAgICAgICAvKiogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50cyB0byB1cGRhdGUgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LiAqL1xuICAgICAgICB0aGlzLm50ID0gVG4oKSwgXG4gICAgICAgIC8qKiBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5cyB0byB0aGVpciBzZXQgb2YgdGFyZ2V0IElEcy4gKi9cbiAgICAgICAgdGhpcy5zdCA9IE9uKCksIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBsaXN0IG9mIHRhcmdldHMgd2l0aCBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuIFRoZXNlIHRhcmdldHMgYXJlXG4gICAgICAgICAqIGtub3duIHRvIGJlIGluY29uc2lzdGVudCBhbmQgdGhlaXIgbGlzdGVucyBuZWVkcyB0byBiZSByZS1lc3RhYmxpc2hlZCBieVxuICAgICAgICAgKiBSZW1vdGVTdG9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXQgPSBuZXcgZ24oZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIERvY3VtZW50V2F0Y2hDaGFuZ2UgdG8gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICovICAgIHJ0KHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQuaykgdC4kICYmIHQuJC5pc0ZvdW5kRG9jdW1lbnQoKSA/IHRoaXMub3QoZSwgdC4kKSA6IHRoaXMuY3QoZSwgdC5rZXksIHQuJCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0LnJlbW92ZWRUYXJnZXRJZHMpIHRoaXMuY3QoZSwgdC5rZXksIHQuJCk7XG4gICAgfVxuICAgIC8qKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIFdhdGNoVGFyZ2V0Q2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLiAqLyAgICBhdCh0KSB7XG4gICAgICAgIHRoaXMuZm9yRWFjaFRhcmdldCh0LCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy51dChlKTtcbiAgICAgICAgICAgIHN3aXRjaCAodC5zdGF0ZSkge1xuICAgICAgICAgICAgICBjYXNlIDAgLyogTm9DaGFuZ2UgKi8gOlxuICAgICAgICAgICAgICAgIHRoaXMuaHQoZSkgJiYgbi5qKHQucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMSAvKiBBZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLlgoKSwgbi5xIHx8IFxuICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBmcmVzaGx5IGFkZGVkIHRhcmdldCwgc28gd2UgbmVlZCB0byByZXNldCBhbnkgc3RhdGVcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHdlIGhhZCBwcmV2aW91c2x5LiBUaGlzIGNhbiBoYXBwZW4gZS5nLiB3aGVuIHJlbW92ZSBhbmQgYWRkXG4gICAgICAgICAgICAgICAgLy8gYmFjayBhIHRhcmdldCBmb3IgZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAgICAgICAgICAgIG4uRygpLCBuLmoodC5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIFJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8ga2VlcCB0cmFjayBvZiByZW1vdmVkIHRhcmdldHMgdG8gd2UgY2FuIHBvc3QtZmlsdGVyIGFuZFxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBhbnkgdGFyZ2V0IGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLlgoKSwgbi5xIHx8IHRoaXMucmVtb3ZlVGFyZ2V0KGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMyAvKiBDdXJyZW50ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLmh0KGUpICYmIChuLlooKSwgbi5qKHQucmVzdW1lVG9rZW4pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDQgLyogUmVzZXQgKi8gOlxuICAgICAgICAgICAgICAgIHRoaXMuaHQoZSkgJiYgKFxuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSB0YXJnZXQgYW5kIHN5bnRoZXNpemVzIHJlbW92ZXMgZm9yIGFsbCBleGlzdGluZ1xuICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50cy4gVGhlIGJhY2tlbmQgd2lsbCByZS1hZGQgYW55IGRvY3VtZW50cyB0aGF0IHN0aWxsXG4gICAgICAgICAgICAgICAgLy8gbWF0Y2ggdGhlIHRhcmdldCBiZWZvcmUgaXQgc2VuZHMgdGhlIG5leHQgZ2xvYmFsIHNuYXBzaG90LlxuICAgICAgICAgICAgICAgIHRoaXMubHQoZSksIG4uaih0LnJlc3VtZVRva2VuKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBMKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhbGwgdGFyZ2V0SWRzIHRoYXQgdGhlIHdhdGNoIGNoYW5nZSBhcHBsaWVzIHRvOiBlaXRoZXIgdGhlXG4gICAgICogdGFyZ2V0SWRzIGV4cGxpY2l0bHkgbGlzdGVkIGluIHRoZSBjaGFuZ2Ugb3IgdGhlIHRhcmdldElkcyBvZiBhbGwgY3VycmVudGx5XG4gICAgICogYWN0aXZlIHRhcmdldHMuXG4gICAgICovICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICB0LnRhcmdldElkcy5sZW5ndGggPiAwID8gdC50YXJnZXRJZHMuZm9yRWFjaChlKSA6IHRoaXMuZXQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIHRoaXMuaHQobikgJiYgZShuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGV4aXN0ZW5jZSBmaWx0ZXJzIGFuZCBzeW50aGVzaXplcyBkZWxldGVzIGZvciBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgKiBUYXJnZXRzIHRoYXQgYXJlIGludmFsaWRhdGVkIGJ5IGZpbHRlciBtaXNtYXRjaGVzIGFyZSBhZGRlZCB0b1xuICAgICAqIGBwZW5kaW5nVGFyZ2V0UmVzZXRzYC5cbiAgICAgKi8gICAgZnQodCkge1xuICAgICAgICBjb25zdCBlID0gdC50YXJnZXRJZCwgbiA9IHQuTy5jb3VudCwgcyA9IHRoaXMuZHQoZSk7XG4gICAgICAgIGlmIChzKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcy50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoSHQodCkpIGlmICgwID09PSBuKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGV4aXN0ZW5jZSBmaWx0ZXIgdG9sZCB1cyB0aGUgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QuIFdlIGRlZHVjZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgdGhpcyBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCBhbmQgYXBwbHkgYSBkZWxldGVkIGRvY3VtZW50IHRvXG4gICAgICAgICAgICAgICAgLy8gb3VyIHVwZGF0ZXMuIFdpdGhvdXQgYXBwbHlpbmcgdGhpcyBkZWxldGVkIGRvY3VtZW50IHRoZXJlIG1pZ2h0IGJlXG4gICAgICAgICAgICAgICAgLy8gYW5vdGhlciBxdWVyeSB0aGF0IHdpbGwgcmFpc2UgdGhpcyBkb2N1bWVudCBhcyBwYXJ0IG9mIGEgc25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyB1bnRpbCBpdCBpcyByZXNvbHZlZCwgZXNzZW50aWFsbHkgZXhwb3NpbmcgaW5jb25zaXN0ZW5jeSBiZXR3ZWVuXG4gICAgICAgICAgICAgICAgLy8gcXVlcmllcy5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gbmV3IFB0KHQucGF0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdChlLCBuLCBLdC5uZXdOb0RvY3VtZW50KG4sIHJ0Lm1pbigpKSk7XG4gICAgICAgICAgICB9IGVsc2UgQigxID09PSBuKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy53dChlKSAhPT0gbiAmJiAoXG4gICAgICAgICAgICAgICAgLy8gRXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaDogV2UgcmVzZXQgdGhlIG1hcHBpbmcgYW5kIHJhaXNlIGEgbmV3XG4gICAgICAgICAgICAgICAgLy8gc25hcHNob3Qgd2l0aCBgaXNGcm9tQ2FjaGU6dHJ1ZWAuXG4gICAgICAgICAgICAgICAgdGhpcy5sdChlKSwgdGhpcy5pdCA9IHRoaXMuaXQuYWRkKGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGUgY3VycmVudGx5IGFjY3VtdWxhdGVkIHN0YXRlIGludG8gYSByZW1vdGUgZXZlbnQgYXQgdGhlXG4gICAgICogcHJvdmlkZWQgc25hcHNob3QgdmVyc2lvbi4gUmVzZXRzIHRoZSBhY2N1bXVsYXRlZCBjaGFuZ2VzIGJlZm9yZSByZXR1cm5pbmcuXG4gICAgICovICAgIF90KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBNYXA7XG4gICAgICAgIHRoaXMuZXQuZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLmR0KHMpO1xuICAgICAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgICAgICBpZiAobi5jdXJyZW50ICYmIEh0KGkudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEb2N1bWVudCBxdWVyaWVzIGZvciBkb2N1bWVudCB0aGF0IGRvbid0IGV4aXN0IGNhbiBwcm9kdWNlIGFuIGVtcHR5XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3VsdCBzZXQuIFRvIHVwZGF0ZSBvdXIgbG9jYWwgY2FjaGUsIHdlIHN5bnRoZXNpemUgYSBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgaWYgd2UgaGF2ZSBub3QgcHJldmlvdXNseSByZWNlaXZlZCB0aGUgZG9jdW1lbnQuIFRoaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzb2x2ZXMgdGhlIGxpbWJvIHN0YXRlIG9mIHRoZSBkb2N1bWVudCwgcmVtb3ZpbmcgaXQgZnJvbVxuICAgICAgICAgICAgICAgICAgICAvLyBsaW1ib0RvY3VtZW50UmVmcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBJZGVhbGx5IHdlIHdvdWxkIGhhdmUgYW4gZXhwbGljaXQgbG9va3VwIHRhcmdldFxuICAgICAgICAgICAgICAgICAgICAvLyBpbnN0ZWFkIHJlc3VsdGluZyBpbiBhbiBleHBsaWNpdCBkZWxldGUgbWVzc2FnZSBhbmQgd2UgY291bGRcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoaXMgc3BlY2lhbCBsb2dpYy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBQdChpLnRhcmdldC5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gdGhpcy5udC5nZXQoZSkgfHwgdGhpcy5ndChzLCBlKSB8fCB0aGlzLmN0KHMsIGUsIEt0Lm5ld05vRG9jdW1lbnQoZSwgdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuLksgJiYgKGUuc2V0KHMsIG4uVygpKSwgbi5HKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIGxldCBuID0gUG4oKTtcbiAgICAgICAgLy8gV2UgZXh0cmFjdCB0aGUgc2V0IG9mIGxpbWJvLW9ubHkgZG9jdW1lbnQgdXBkYXRlcyBhcyB0aGUgR0MgbG9naWNcbiAgICAgICAgLy8gc3BlY2lhbC1jYXNlcyBkb2N1bWVudHMgdGhhdCBkbyBub3QgYXBwZWFyIGluIHRoZSB0YXJnZXQgY2FjaGUuXG4gICAgICAgIFxuICAgICAgICAvLyBUT0RPKGdzb2x0aXMpOiBFeHBhbmQgb24gdGhpcyBjb21tZW50IG9uY2UgR0MgaXMgYXZhaWxhYmxlIGluIHRoZSBKU1xuICAgICAgICAvLyBjbGllbnQuXG4gICAgICAgICAgICAgICAgdGhpcy5zdC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHMgPSAhMDtcbiAgICAgICAgICAgIGUuZm9yRWFjaFdoaWxlKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5kdCh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gIWUgfHwgMiAvKiBMaW1ib1Jlc29sdXRpb24gKi8gPT09IGUucHVycG9zZSB8fCAocyA9ICExLCAhMSk7XG4gICAgICAgICAgICB9KSksIHMgJiYgKG4gPSBuLmFkZCh0KSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBTbih0LCBlLCB0aGlzLml0LCB0aGlzLm50LCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubnQgPSBUbigpLCB0aGlzLnN0ID0gT24oKSwgdGhpcy5pdCA9IG5ldyBnbihldCksIHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IHRvIHRoZSBpbnRlcm5hbCBsaXN0IG9mIGRvY3VtZW50IHVwZGF0ZXMgYW5kXG4gICAgICogaXRzIGRvY3VtZW50IGtleSB0byB0aGUgZ2l2ZW4gdGFyZ2V0J3MgbWFwcGluZy5cbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIG90KHQsIGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmh0KHQpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmd0KHQsIGUua2V5KSA/IDIgLyogTW9kaWZpZWQgKi8gOiAwIC8qIEFkZGVkICovO1xuICAgICAgICB0aGlzLnV0KHQpLkgoZS5rZXksIG4pLCB0aGlzLm50ID0gdGhpcy5udC5pbnNlcnQoZS5rZXksIGUpLCB0aGlzLnN0ID0gdGhpcy5zdC5pbnNlcnQoZS5rZXksIHRoaXMueXQoZS5rZXkpLmFkZCh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IGZyb20gdGhlIHRhcmdldCBtYXBwaW5nLiBJZiB0aGVcbiAgICAgKiBkb2N1bWVudCBubyBsb25nZXIgbWF0Y2hlcyB0aGUgdGFyZ2V0LCBidXQgdGhlIGRvY3VtZW50J3Mgc3RhdGUgaXMgc3RpbGxcbiAgICAgKiBrbm93biAoZS5nLiB3ZSBrbm93IHRoYXQgdGhlIGRvY3VtZW50IHdhcyBkZWxldGVkIG9yIHdlIHJlY2VpdmVkIHRoZSBjaGFuZ2VcbiAgICAgKiB0aGF0IGNhdXNlZCB0aGUgZmlsdGVyIG1pc21hdGNoKSwgdGhlIG5ldyBkb2N1bWVudCBjYW4gYmUgcHJvdmlkZWRcbiAgICAgKiB0byB1cGRhdGUgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS5cbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIGN0KHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCF0aGlzLmh0KHQpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnV0KHQpO1xuICAgICAgICB0aGlzLmd0KHQsIGUpID8gcy5IKGUsIDEgLyogUmVtb3ZlZCAqLykgOiBcbiAgICAgICAgLy8gVGhlIGRvY3VtZW50IG1heSBoYXZlIGVudGVyZWQgYW5kIGxlZnQgdGhlIHRhcmdldCBiZWZvcmUgd2UgcmFpc2VkIGFcbiAgICAgICAgLy8gc25hcHNob3QsIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgY2hhbmdlLlxuICAgICAgICBzLkooZSksIHRoaXMuc3QgPSB0aGlzLnN0Lmluc2VydChlLCB0aGlzLnl0KGUpLmRlbGV0ZSh0KSksIG4gJiYgKHRoaXMubnQgPSB0aGlzLm50Lmluc2VydChlLCBuKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMuZXQuZGVsZXRlKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGNvdW50IG9mIGRvY3VtZW50cyBpbiB0aGUgdGFyZ2V0LiBUaGlzIGluY2x1ZGVzIGJvdGhcbiAgICAgKiB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0aGF0IHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0byBiZSBwYXJ0IG9mIHRoZVxuICAgICAqIHRhcmdldCBhcyB3ZWxsIGFzIGFueSBhY2N1bXVsYXRlZCBjaGFuZ2VzLlxuICAgICAqLyAgICB3dCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnV0KHQpLlcoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudHQuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5zaXplICsgZS5hZGRlZERvY3VtZW50cy5zaXplIC0gZS5yZW1vdmVkRG9jdW1lbnRzLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY3JlbWVudCB0aGUgbnVtYmVyIG9mIGFja3MgbmVlZGVkIGZyb20gd2F0Y2ggYmVmb3JlIHdlIGNhbiBjb25zaWRlciB0aGVcbiAgICAgKiBzZXJ2ZXIgdG8gYmUgJ2luLXN5bmMnIHdpdGggdGhlIGNsaWVudCdzIGFjdGl2ZSB0YXJnZXRzLlxuICAgICAqLyAgICBZKHQpIHtcbiAgICAgICAgdGhpcy51dCh0KS5ZKCk7XG4gICAgfVxuICAgIHV0KHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLmV0LmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgfHwgKGUgPSBuZXcga24sIHRoaXMuZXQuc2V0KHQsIGUpKSwgZTtcbiAgICB9XG4gICAgeXQodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMuc3QuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSB8fCAoZSA9IG5ldyBnbihldCksIHRoaXMuc3QgPSB0aGlzLnN0Lmluc2VydCh0LCBlKSksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIHVzZXIgaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGlzIHRhcmdldCAoYnkgY2FsbGluZ1xuICAgICAqIGBnZXRUYXJnZXREYXRhRm9yVGFyZ2V0KClgKSBhbmQgdGhhdCB3ZSBhcmUgbm90IHdhaXRpbmcgZm9yIHBlbmRpbmcgQUREc1xuICAgICAqIGZyb20gd2F0Y2guXG4gICAgICovICAgIGh0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG51bGwgIT09IHRoaXMuZHQodCk7XG4gICAgICAgIHJldHVybiBlIHx8ICQoXCJXYXRjaENoYW5nZUFnZ3JlZ2F0b3JcIiwgXCJEZXRlY3RlZCBpbmFjdGl2ZSB0YXJnZXRcIiwgdCksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIFRhcmdldERhdGEgZm9yIGFuIGFjdGl2ZSB0YXJnZXQgKGkuZS4gYSB0YXJnZXQgdGhhdCB0aGUgdXNlclxuICAgICAqIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhhdCBoYXMgbm8gb3V0c3RhbmRpbmcgdGFyZ2V0IGNoYW5nZSByZXF1ZXN0cykuXG4gICAgICovICAgIGR0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZXQuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSAmJiBlLnEgPyBudWxsIDogdGhpcy50dC5UdCh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBzdGF0ZSBvZiBhIFdhdGNoIHRhcmdldCB0byBpdHMgaW5pdGlhbCBzdGF0ZSAoZS5nLiBzZXRzXG4gICAgICogJ2N1cnJlbnQnIHRvIGZhbHNlLCBjbGVhcnMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgcmVtb3ZlcyBpdHMgdGFyZ2V0IG1hcHBpbmdcbiAgICAgKiBmcm9tIGFsbCBkb2N1bWVudHMpLlxuICAgICAqLyAgICBsdCh0KSB7XG4gICAgICAgIHRoaXMuZXQuc2V0KHQsIG5ldyBrbik7XG4gICAgICAgIHRoaXMudHQuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3QodCwgZSwgLyp1cGRhdGVkRG9jdW1lbnQ9Ki8gbnVsbCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0aGUgZG9jdW1lbnQgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiBzcGVjaWZpZWQgdGFyZ2V0LlxuICAgICAqLyAgICBndCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR0LmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCkuaGFzKGUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gT24oKSB7XG4gICAgcmV0dXJuIG5ldyB3bihQdC5jb21wYXJhdG9yKTtcbn1cblxuZnVuY3Rpb24gRm4oKSB7XG4gICAgcmV0dXJuIG5ldyB3bihQdC5jb21wYXJhdG9yKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgTW4gPSAoKCkgPT4ge1xuICAgIGNvbnN0IHQgPSB7XG4gICAgICAgIGFzYzogXCJBU0NFTkRJTkdcIixcbiAgICAgICAgZGVzYzogXCJERVNDRU5ESU5HXCJcbiAgICB9O1xuICAgIHJldHVybiB0O1xufSkoKSwgTG4gPSAoKCkgPT4ge1xuICAgIGNvbnN0IHQgPSB7XG4gICAgICAgIFwiPFwiOiBcIkxFU1NfVEhBTlwiLFxuICAgICAgICBcIjw9XCI6IFwiTEVTU19USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPlwiOiBcIkdSRUFURVJfVEhBTlwiLFxuICAgICAgICBcIj49XCI6IFwiR1JFQVRFUl9USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPT1cIjogXCJFUVVBTFwiLFxuICAgICAgICBcIiE9XCI6IFwiTk9UX0VRVUFMXCIsXG4gICAgICAgIFwiYXJyYXktY29udGFpbnNcIjogXCJBUlJBWV9DT05UQUlOU1wiLFxuICAgICAgICBpbjogXCJJTlwiLFxuICAgICAgICBcIm5vdC1pblwiOiBcIk5PVF9JTlwiLFxuICAgICAgICBcImFycmF5LWNvbnRhaW5zLWFueVwiOiBcIkFSUkFZX0NPTlRBSU5TX0FOWVwiXG4gICAgfTtcbiAgICByZXR1cm4gdDtcbn0pKCk7XG5cbi8qKlxuICogVGhpcyBjbGFzcyBnZW5lcmF0ZXMgSnNvbk9iamVjdCB2YWx1ZXMgZm9yIHRoZSBEYXRhc3RvcmUgQVBJIHN1aXRhYmxlIGZvclxuICogc2VuZGluZyB0byBlaXRoZXIgR1JQQyBzdHViIG1ldGhvZHMgb3IgdmlhIHRoZSBKU09OL0hUVFAgUkVTVCBBUEkuXG4gKlxuICogVGhlIHNlcmlhbGl6ZXIgc3VwcG9ydHMgYm90aCBQcm90b2J1Zi5qcyBhbmQgUHJvdG8zIEpTT04gZm9ybWF0cy4gQnlcbiAqIHNldHRpbmcgYHVzZVByb3RvM0pzb25gIHRvIHRydWUsIHRoZSBzZXJpYWxpemVyIHdpbGwgdXNlIHRoZSBQcm90bzMgSlNPTlxuICogZm9ybWF0LlxuICpcbiAqIEZvciBhIGRlc2NyaXB0aW9uIG9mIHRoZSBQcm90bzMgSlNPTiBmb3JtYXQgY2hlY2tcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3Byb3RvY29sLWJ1ZmZlcnMvZG9jcy9wcm90bzMjanNvblxuICpcbiAqIFRPRE8oa2xpbXQpOiBXZSBjYW4gcmVtb3ZlIHRoZSBkYXRhYmFzZUlkIGFyZ3VtZW50IGlmIHdlIGtlZXAgdGhlIGZ1bGxcbiAqIHJlc291cmNlIG5hbWUgaW4gZG9jdW1lbnRzLlxuICovXG5jbGFzcyBCbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSB0LCB0aGlzLkQgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgRGF0ZSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG8gYSBwcm90by5cbiAqL1xuZnVuY3Rpb24gVW4odCwgZSkge1xuICAgIGlmICh0LkQpIHtcbiAgICAgICAgcmV0dXJuIGAke25ldyBEYXRlKDFlMyAqIGUuc2Vjb25kcykudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9cXC5cXGQqLywgXCJcIikucmVwbGFjZShcIlpcIiwgXCJcIil9LiR7KFwiMDAwMDAwMDAwXCIgKyBlLm5hbm9zZWNvbmRzKS5zbGljZSgtOSl9WmA7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IFwiXCIgKyBlLnNlY29uZHMsXG4gICAgICAgIG5hbm9zOiBlLm5hbm9zZWNvbmRzXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGJ5dGVzIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW4gYSBwcm90by5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5mdW5jdGlvbiBxbih0LCBlKSB7XG4gICAgcmV0dXJuIHQuRCA/IGUudG9CYXNlNjQoKSA6IGUudG9VaW50OEFycmF5KCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEJ5dGVTdHJpbmcgYmFzZWQgb24gdGhlIHByb3RvIHN0cmluZyB2YWx1ZS5cbiAqLyBmdW5jdGlvbiBLbih0LCBlKSB7XG4gICAgcmV0dXJuIFVuKHQsIGUudG9UaW1lc3RhbXAoKSk7XG59XG5cbmZ1bmN0aW9uIGpuKHQpIHtcbiAgICByZXR1cm4gQighIXQpLCBydC5mcm9tVGltZXN0YW1wKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGd0KHQpO1xuICAgICAgICByZXR1cm4gbmV3IGl0KGUuc2Vjb25kcywgZS5uYW5vcyk7XG4gICAgfSh0KSk7XG59XG5cbmZ1bmN0aW9uIFFuKHQsIGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IGh0KFsgXCJwcm9qZWN0c1wiLCB0LnByb2plY3RJZCwgXCJkYXRhYmFzZXNcIiwgdC5kYXRhYmFzZSBdKTtcbiAgICB9KHQpLmNoaWxkKFwiZG9jdW1lbnRzXCIpLmNoaWxkKGUpLmNhbm9uaWNhbFN0cmluZygpO1xufVxuXG5mdW5jdGlvbiBXbih0KSB7XG4gICAgY29uc3QgZSA9IGh0LmZyb21TdHJpbmcodCk7XG4gICAgcmV0dXJuIEIoVHMoZSkpLCBlO1xufVxuXG5mdW5jdGlvbiBHbih0LCBlKSB7XG4gICAgcmV0dXJuIFFuKHQuZGF0YWJhc2VJZCwgZS5wYXRoKTtcbn1cblxuZnVuY3Rpb24gem4odCwgZSkge1xuICAgIGNvbnN0IG4gPSBXbihlKTtcbiAgICBpZiAobi5nZXQoMSkgIT09IHQuZGF0YWJhc2VJZC5wcm9qZWN0SWQpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgcHJvamVjdDogXCIgKyBuLmdldCgxKSArIFwiIHZzIFwiICsgdC5kYXRhYmFzZUlkLnByb2plY3RJZCk7XG4gICAgaWYgKG4uZ2V0KDMpICE9PSB0LmRhdGFiYXNlSWQuZGF0YWJhc2UpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgZGF0YWJhc2U6IFwiICsgbi5nZXQoMykgKyBcIiB2cyBcIiArIHQuZGF0YWJhc2VJZC5kYXRhYmFzZSk7XG4gICAgcmV0dXJuIG5ldyBQdChYbihuKSk7XG59XG5cbmZ1bmN0aW9uIEhuKHQsIGUpIHtcbiAgICByZXR1cm4gUW4odC5kYXRhYmFzZUlkLCBlKTtcbn1cblxuZnVuY3Rpb24gSm4odCkge1xuICAgIGNvbnN0IGUgPSBXbih0KTtcbiAgICAvLyBJbiB2MWJldGExIHF1ZXJpZXMgZm9yIGNvbGxlY3Rpb25zIGF0IHRoZSByb290IGRpZCBub3QgaGF2ZSBhIHRyYWlsaW5nXG4gICAgLy8gXCIvZG9jdW1lbnRzXCIuIEluIHYxIGFsbCByZXNvdXJjZSBwYXRocyBjb250YWluIFwiL2RvY3VtZW50c1wiLiBQcmVzZXJ2ZSB0aGVcbiAgICAvLyBhYmlsaXR5IHRvIHJlYWQgdGhlIHYxYmV0YTEgZm9ybSBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHF1ZXJpZXMgcGVyc2lzdGVkXG4gICAgLy8gaW4gdGhlIGxvY2FsIHRhcmdldCBjYWNoZS5cbiAgICAgICAgcmV0dXJuIDQgPT09IGUubGVuZ3RoID8gaHQuZW1wdHlQYXRoKCkgOiBYbihlKTtcbn1cblxuZnVuY3Rpb24gWW4odCkge1xuICAgIHJldHVybiBuZXcgaHQoWyBcInByb2plY3RzXCIsIHQuZGF0YWJhc2VJZC5wcm9qZWN0SWQsIFwiZGF0YWJhc2VzXCIsIHQuZGF0YWJhc2VJZC5kYXRhYmFzZSBdKS5jYW5vbmljYWxTdHJpbmcoKTtcbn1cblxuZnVuY3Rpb24gWG4odCkge1xuICAgIHJldHVybiBCKHQubGVuZ3RoID4gNCAmJiBcImRvY3VtZW50c1wiID09PSB0LmdldCg0KSksIHQucG9wRmlyc3QoNSk7XG59XG5cbi8qKiBDcmVhdGVzIGEgRG9jdW1lbnQgcHJvdG8gZnJvbSBrZXkgYW5kIGZpZWxkcyAoYnV0IG5vIGNyZWF0ZS91cGRhdGUgdGltZSkgKi8gZnVuY3Rpb24gWm4odCwgZSwgbikge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IEduKHQsIGUpLFxuICAgICAgICBmaWVsZHM6IG4udmFsdWUubWFwVmFsdWUuZmllbGRzXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gdHModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSB6bih0LCBlLm5hbWUpLCBpID0gam4oZS51cGRhdGVUaW1lKSwgciA9IG5ldyBVdCh7XG4gICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICBmaWVsZHM6IGUuZmllbGRzXG4gICAgICAgIH1cbiAgICB9KSwgbyA9IEt0Lm5ld0ZvdW5kRG9jdW1lbnQocywgaSwgcik7XG4gICAgcmV0dXJuIG4gJiYgby5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSwgbiA/IG8uc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCkgOiBvO1xufVxuXG5mdW5jdGlvbiBlcyh0LCBlKSB7XG4gICAgcmV0dXJuIFwiZm91bmRcIiBpbiBlID8gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBCKCEhZS5mb3VuZCksIGUuZm91bmQubmFtZSwgZS5mb3VuZC51cGRhdGVUaW1lO1xuICAgICAgICBjb25zdCBuID0gem4odCwgZS5mb3VuZC5uYW1lKSwgcyA9IGpuKGUuZm91bmQudXBkYXRlVGltZSksIGkgPSBuZXcgVXQoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IGUuZm91bmQuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gS3QubmV3Rm91bmREb2N1bWVudChuLCBzLCBpKTtcbiAgICB9KHQsIGUpIDogXCJtaXNzaW5nXCIgaW4gZSA/IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgQighIWUubWlzc2luZyksIEIoISFlLnJlYWRUaW1lKTtcbiAgICAgICAgY29uc3QgbiA9IHpuKHQsIGUubWlzc2luZyksIHMgPSBqbihlLnJlYWRUaW1lKTtcbiAgICAgICAgcmV0dXJuIEt0Lm5ld05vRG9jdW1lbnQobiwgcyk7XG4gICAgfSh0LCBlKSA6IEwoKTtcbn1cblxuZnVuY3Rpb24gbnModCwgZSkge1xuICAgIGxldCBuO1xuICAgIGlmIChcInRhcmdldENoYW5nZVwiIGluIGUpIHtcbiAgICAgICAgZS50YXJnZXRDaGFuZ2U7XG4gICAgICAgIC8vIHByb3RvMyBkZWZhdWx0IHZhbHVlIGlzIHVuc2V0IGluIEpTT04gKHVuZGVmaW5lZCksIHNvIHVzZSAnTk9fQ0hBTkdFJ1xuICAgICAgICAvLyBpZiB1bnNldFxuICAgICAgICBjb25zdCBzID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiTk9fQ0hBTkdFXCIgPT09IHQgPyAwIC8qIE5vQ2hhbmdlICovIDogXCJBRERcIiA9PT0gdCA/IDEgLyogQWRkZWQgKi8gOiBcIlJFTU9WRVwiID09PSB0ID8gMiAvKiBSZW1vdmVkICovIDogXCJDVVJSRU5UXCIgPT09IHQgPyAzIC8qIEN1cnJlbnQgKi8gOiBcIlJFU0VUXCIgPT09IHQgPyA0IC8qIFJlc2V0ICovIDogTCgpO1xuICAgICAgICB9KGUudGFyZ2V0Q2hhbmdlLnRhcmdldENoYW5nZVR5cGUgfHwgXCJOT19DSEFOR0VcIiksIGkgPSBlLnRhcmdldENoYW5nZS50YXJnZXRJZHMgfHwgW10sIHIgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gdC5EID8gKEIodm9pZCAwID09PSBlIHx8IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpLCBfdC5mcm9tQmFzZTY0U3RyaW5nKGUgfHwgXCJcIikpIDogKEIodm9pZCAwID09PSBlIHx8IGUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSwgXG4gICAgICAgICAgICBfdC5mcm9tVWludDhBcnJheShlIHx8IG5ldyBVaW50OEFycmF5KSk7XG4gICAgICAgIH0odCwgZS50YXJnZXRDaGFuZ2UucmVzdW1lVG9rZW4pLCBvID0gZS50YXJnZXRDaGFuZ2UuY2F1c2UsIGMgPSBvICYmIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB2b2lkIDAgPT09IHQuY29kZSA/IEsuVU5LTk9XTiA6IGRuKHQuY29kZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGooZSwgdC5tZXNzYWdlIHx8IFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIG51bWJlciAob3IgbnVsbCkgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvXG4gKiBhIGdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlIHByb3RvLlxuICogRE8gTk9UIFVTRSBUSElTIEZPUiBBTllUSElORyBFTFNFLlxuICogVGhpcyBtZXRob2QgY2hlYXRzLiBJdCdzIHR5cGVkIGFzIHJldHVybmluZyBcIm51bWJlclwiIGJlY2F1c2UgdGhhdCdzIHdoYXRcbiAqIG91ciBnZW5lcmF0ZWQgcHJvdG8gaW50ZXJmYWNlcyBzYXkgSW50MzJWYWx1ZSBtdXN0IGJlLiBCdXQgR1JQQyBhY3R1YWxseVxuICogZXhwZWN0cyBhIHsgdmFsdWU6IDxudW1iZXI+IH0gc3RydWN0LlxuICovIChvKTtcbiAgICAgICAgbiA9IG5ldyB4bihzLCBpLCByLCBjIHx8IG51bGwpO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudENoYW5nZVwiIGluIGUpIHtcbiAgICAgICAgZS5kb2N1bWVudENoYW5nZTtcbiAgICAgICAgY29uc3QgcyA9IGUuZG9jdW1lbnRDaGFuZ2U7XG4gICAgICAgIHMuZG9jdW1lbnQsIHMuZG9jdW1lbnQubmFtZSwgcy5kb2N1bWVudC51cGRhdGVUaW1lO1xuICAgICAgICBjb25zdCBpID0gem4odCwgcy5kb2N1bWVudC5uYW1lKSwgciA9IGpuKHMuZG9jdW1lbnQudXBkYXRlVGltZSksIG8gPSBuZXcgVXQoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHMuZG9jdW1lbnQuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCBjID0gS3QubmV3Rm91bmREb2N1bWVudChpLCByLCBvKSwgYSA9IHMudGFyZ2V0SWRzIHx8IFtdLCB1ID0gcy5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3IENuKGEsIHUsIGMua2V5LCBjKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnREZWxldGVcIiBpbiBlKSB7XG4gICAgICAgIGUuZG9jdW1lbnREZWxldGU7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRvY3VtZW50RGVsZXRlO1xuICAgICAgICBzLmRvY3VtZW50O1xuICAgICAgICBjb25zdCBpID0gem4odCwgcy5kb2N1bWVudCksIHIgPSBzLnJlYWRUaW1lID8gam4ocy5yZWFkVGltZSkgOiBydC5taW4oKSwgbyA9IEt0Lm5ld05vRG9jdW1lbnQoaSwgciksIGMgPSBzLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgQ24oW10sIGMsIG8ua2V5LCBvKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnRSZW1vdmVcIiBpbiBlKSB7XG4gICAgICAgIGUuZG9jdW1lbnRSZW1vdmU7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRvY3VtZW50UmVtb3ZlO1xuICAgICAgICBzLmRvY3VtZW50O1xuICAgICAgICBjb25zdCBpID0gem4odCwgcy5kb2N1bWVudCksIHIgPSBzLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgQ24oW10sIHIsIGksIG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghKFwiZmlsdGVyXCIgaW4gZSkpIHJldHVybiBMKCk7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGUuZmlsdGVyO1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuZmlsdGVyO1xuICAgICAgICAgICAgdC50YXJnZXRJZDtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0LmNvdW50IHx8IDAsIGkgPSBuZXcgdW4ocyksIHIgPSB0LnRhcmdldElkO1xuICAgICAgICAgICAgbiA9IG5ldyBObihyLCBpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuZnVuY3Rpb24gc3ModCwgZSkge1xuICAgIGxldCBuO1xuICAgIGlmIChlIGluc3RhbmNlb2YgZW4pIG4gPSB7XG4gICAgICAgIHVwZGF0ZTogWm4odCwgZS5rZXksIGUudmFsdWUpXG4gICAgfTsgZWxzZSBpZiAoZSBpbnN0YW5jZW9mIGNuKSBuID0ge1xuICAgICAgICBkZWxldGU6IEduKHQsIGUua2V5KVxuICAgIH07IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBubikgbiA9IHtcbiAgICAgICAgdXBkYXRlOiBabih0LCBlLmtleSwgZS5kYXRhKSxcbiAgICAgICAgdXBkYXRlTWFzazogcHMoZS5maWVsZE1hc2spXG4gICAgfTsgZWxzZSB7XG4gICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBhbikpIHJldHVybiBMKCk7XG4gICAgICAgIG4gPSB7XG4gICAgICAgICAgICB2ZXJpZnk6IEduKHQsIGUua2V5KVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZS5maWVsZFRyYW5zZm9ybXMubGVuZ3RoID4gMCAmJiAobi51cGRhdGVUcmFuc2Zvcm1zID0gZS5maWVsZFRyYW5zZm9ybXMubWFwKCh0ID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUudHJhbnNmb3JtO1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIE9lKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgc2V0VG9TZXJ2ZXJWYWx1ZTogXCJSRVFVRVNUX1RJTUVcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIEZlKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgYXBwZW5kTWlzc2luZ0VsZW1lbnRzOiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgTGUpIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICByZW1vdmVBbGxGcm9tQXJyYXk6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IG4uZWxlbWVudHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBVZSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIGluY3JlbWVudDogbi5DXG4gICAgICAgIH07XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9KDAsIHQpKSkpLCBlLnByZWNvbmRpdGlvbi5pc05vbmUgfHwgKG4uY3VycmVudERvY3VtZW50ID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlLnVwZGF0ZVRpbWUgPyB7XG4gICAgICAgICAgICB1cGRhdGVUaW1lOiBLbih0LCBlLnVwZGF0ZVRpbWUpXG4gICAgICAgIH0gOiB2b2lkIDAgIT09IGUuZXhpc3RzID8ge1xuICAgICAgICAgICAgZXhpc3RzOiBlLmV4aXN0c1xuICAgICAgICB9IDogTCgpO1xuICAgIH0odCwgZS5wcmVjb25kaXRpb24pKSwgbjtcbn1cblxuZnVuY3Rpb24gaXModCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLmN1cnJlbnREb2N1bWVudCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdC51cGRhdGVUaW1lID8gR2UudXBkYXRlVGltZShqbih0LnVwZGF0ZVRpbWUpKSA6IHZvaWQgMCAhPT0gdC5leGlzdHMgPyBHZS5leGlzdHModC5leGlzdHMpIDogR2Uubm9uZSgpO1xuICAgIH0oZS5jdXJyZW50RG9jdW1lbnQpIDogR2Uubm9uZSgpLCBzID0gZS51cGRhdGVUcmFuc2Zvcm1zID8gZS51cGRhdGVUcmFuc2Zvcm1zLm1hcCgoZSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGxldCBuID0gbnVsbDtcbiAgICAgICAgaWYgKFwic2V0VG9TZXJ2ZXJWYWx1ZVwiIGluIGUpIEIoXCJSRVFVRVNUX1RJTUVcIiA9PT0gZS5zZXRUb1NlcnZlclZhbHVlKSwgbiA9IG5ldyBPZTsgZWxzZSBpZiAoXCJhcHBlbmRNaXNzaW5nRWxlbWVudHNcIiBpbiBlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5hcHBlbmRNaXNzaW5nRWxlbWVudHMudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgbiA9IG5ldyBGZSh0KTtcbiAgICAgICAgfSBlbHNlIGlmIChcInJlbW92ZUFsbEZyb21BcnJheVwiIGluIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLnJlbW92ZUFsbEZyb21BcnJheS52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBuID0gbmV3IExlKHQpO1xuICAgICAgICB9IGVsc2UgXCJpbmNyZW1lbnRcIiBpbiBlID8gbiA9IG5ldyBVZSh0LCBlLmluY3JlbWVudCkgOiBMKCk7XG4gICAgICAgIGNvbnN0IHMgPSBmdC5mcm9tU2VydmVyRm9ybWF0KGUuZmllbGRQYXRoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBqZShzLCBuKTtcbiAgICB9KHQsIGUpKSkgOiBbXTtcbiAgICBpZiAoZS51cGRhdGUpIHtcbiAgICAgICAgZS51cGRhdGUubmFtZTtcbiAgICAgICAgY29uc3QgaSA9IHpuKHQsIGUudXBkYXRlLm5hbWUpLCByID0gbmV3IFV0KHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLnVwZGF0ZS5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChlLnVwZGF0ZU1hc2spIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuZmllbGRQYXRocyB8fCBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGR0KGUubWFwKCh0ID0+IGZ0LmZyb21TZXJ2ZXJGb3JtYXQodCkpKSk7XG4gICAgICAgICAgICB9KGUudXBkYXRlTWFzayk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IG5uKGksIHIsIHQsIG4sIHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgZW4oaSwgciwgbiwgcyk7XG4gICAgfVxuICAgIGlmIChlLmRlbGV0ZSkge1xuICAgICAgICBjb25zdCBzID0gem4odCwgZS5kZWxldGUpO1xuICAgICAgICByZXR1cm4gbmV3IGNuKHMsIG4pO1xuICAgIH1cbiAgICBpZiAoZS52ZXJpZnkpIHtcbiAgICAgICAgY29uc3QgcyA9IHpuKHQsIGUudmVyaWZ5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBhbihzLCBuKTtcbiAgICB9XG4gICAgcmV0dXJuIEwoKTtcbn1cblxuZnVuY3Rpb24gcnModCwgZSkge1xuICAgIHJldHVybiB0ICYmIHQubGVuZ3RoID4gMCA/IChCKHZvaWQgMCAhPT0gZSksIHQubWFwKCh0ID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gTk9URTogRGVsZXRlcyBkb24ndCBoYXZlIGFuIHVwZGF0ZVRpbWUuXG4gICAgICAgIGxldCBuID0gdC51cGRhdGVUaW1lID8gam4odC51cGRhdGVUaW1lKSA6IGpuKGUpO1xuICAgICAgICByZXR1cm4gbi5pc0VxdWFsKHJ0Lm1pbigpKSAmJiAoXG4gICAgICAgIC8vIFRoZSBGaXJlc3RvcmUgRW11bGF0b3IgY3VycmVudGx5IHJldHVybnMgYW4gdXBkYXRlIHRpbWUgb2YgMCBmb3JcbiAgICAgICAgLy8gZGVsZXRlcyBvZiBub24tZXhpc3RpbmcgZG9jdW1lbnRzIChyYXRoZXIgdGhhbiBudWxsKS4gVGhpcyBicmVha3MgdGhlXG4gICAgICAgIC8vIHRlc3QgXCJnZXQgZGVsZXRlZCBkb2Mgd2hpbGUgb2ZmbGluZSB3aXRoIHNvdXJjZT1jYWNoZVwiIGFzIE5vRG9jdW1lbnRzXG4gICAgICAgIC8vIHdpdGggdmVyc2lvbiAwIGFyZSBmaWx0ZXJlZCBieSBJbmRleGVkRGIncyBSZW1vdGVEb2N1bWVudENhY2hlLlxuICAgICAgICAvLyBUT0RPKCMyMTQ5KTogUmVtb3ZlIHRoaXMgd2hlbiBFbXVsYXRvciBpcyBmaXhlZFxuICAgICAgICBuID0gam4oZSkpLCBuZXcgV2UobiwgdC50cmFuc2Zvcm1SZXN1bHRzIHx8IFtdKTtcbiAgICB9KHQsIGUpKSkpIDogW107XG59XG5cbmZ1bmN0aW9uIG9zKHQsIGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBkb2N1bWVudHM6IFsgSG4odCwgZS5wYXRoKSBdXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gY3ModCwgZSkge1xuICAgIC8vIERpc3NlY3QgdGhlIHBhdGggaW50byBwYXJlbnQsIGNvbGxlY3Rpb25JZCwgYW5kIG9wdGlvbmFsIGtleSBmaWx0ZXIuXG4gICAgY29uc3QgbiA9IHtcbiAgICAgICAgc3RydWN0dXJlZFF1ZXJ5OiB7fVxuICAgIH0sIHMgPSBlLnBhdGg7XG4gICAgbnVsbCAhPT0gZS5jb2xsZWN0aW9uR3JvdXAgPyAobi5wYXJlbnQgPSBIbih0LCBzKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IGUuY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICBhbGxEZXNjZW5kYW50czogITBcbiAgICB9IF0pIDogKG4ucGFyZW50ID0gSG4odCwgcy5wb3BMYXN0KCkpLCBuLnN0cnVjdHVyZWRRdWVyeS5mcm9tID0gWyB7XG4gICAgICAgIGNvbGxlY3Rpb25JZDogcy5sYXN0U2VnbWVudCgpXG4gICAgfSBdKTtcbiAgICBjb25zdCBpID0gZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgY29uc3QgZSA9IHQubWFwKCh0ID0+IFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGlmIChcIj09XCIgLyogRVFVQUwgKi8gPT09IHQub3ApIHtcbiAgICAgICAgICAgICAgICBpZiAoTXQodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogX3ModC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OQU5cIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoRnQodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogX3ModC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OVUxMXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gPT09IHQub3ApIHtcbiAgICAgICAgICAgICAgICBpZiAoTXQodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogX3ModC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTkFOXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKEZ0KHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IF9zKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTk9UX05VTExcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmllbGRGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IF9zKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogd3ModC5vcCksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0LnZhbHVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0KSkpO1xuICAgICAgICBpZiAoMSA9PT0gZS5sZW5ndGgpIHJldHVybiBlWzBdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29tcG9zaXRlRmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgb3A6IFwiQU5EXCIsXG4gICAgICAgICAgICAgICAgZmlsdGVyczogZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0oZS5maWx0ZXJzKTtcbiAgICBpICYmIChuLnN0cnVjdHVyZWRRdWVyeS53aGVyZSA9IGkpO1xuICAgIGNvbnN0IHIgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gdC5tYXAoKHQgPT4gXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmaWVsZDogX3ModC5maWVsZCksXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBkcyh0LmRpcilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCkpKTtcbiAgICB9KGUub3JkZXJCeSk7XG4gICAgciAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkub3JkZXJCeSA9IHIpO1xuICAgIGNvbnN0IG8gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0LkQgfHwgQXQoZSkgPyBlIDoge1xuICAgICAgICAgICAgdmFsdWU6IGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIGEgbnVtYmVyIChvciBudWxsKSBmcm9tIGEgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUgcHJvdG8uXG4gKi8gKHQsIGUubGltaXQpO1xuICAgIHJldHVybiBudWxsICE9PSBvICYmIChuLnN0cnVjdHVyZWRRdWVyeS5saW1pdCA9IG8pLCBlLnN0YXJ0QXQgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LnN0YXJ0QXQgPSBscyhlLnN0YXJ0QXQpKSwgXG4gICAgZS5lbmRBdCAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkuZW5kQXQgPSBscyhlLmVuZEF0KSksIG47XG59XG5cbmZ1bmN0aW9uIGFzKHQpIHtcbiAgICBsZXQgZSA9IEpuKHQucGFyZW50KTtcbiAgICBjb25zdCBuID0gdC5zdHJ1Y3R1cmVkUXVlcnksIHMgPSBuLmZyb20gPyBuLmZyb20ubGVuZ3RoIDogMDtcbiAgICBsZXQgaSA9IG51bGw7XG4gICAgaWYgKHMgPiAwKSB7XG4gICAgICAgIEIoMSA9PT0gcyk7XG4gICAgICAgIGNvbnN0IHQgPSBuLmZyb21bMF07XG4gICAgICAgIHQuYWxsRGVzY2VuZGFudHMgPyBpID0gdC5jb2xsZWN0aW9uSWQgOiBlID0gZS5jaGlsZCh0LmNvbGxlY3Rpb25JZCk7XG4gICAgfVxuICAgIGxldCByID0gW107XG4gICAgbi53aGVyZSAmJiAociA9IGhzKG4ud2hlcmUpKTtcbiAgICBsZXQgbyA9IFtdO1xuICAgIG4ub3JkZXJCeSAmJiAobyA9IG4ub3JkZXJCeS5tYXAoKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IGFlKG1zKHQuZmllbGQpLCBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIkFTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFzY1wiIC8qIEFTQ0VORElORyAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiREVTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImRlc2NcIiAvKiBERVNDRU5ESU5HICovO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgKHQuZGlyZWN0aW9uKSk7XG4gICAgfSh0KSkpKTtcbiAgICBsZXQgYyA9IG51bGw7XG4gICAgbi5saW1pdCAmJiAoYyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIHJldHVybiBlID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCA/IHQudmFsdWUgOiB0LCBBdChlKSA/IG51bGwgOiBlO1xuICAgIH0obi5saW1pdCkpO1xuICAgIGxldCBhID0gbnVsbDtcbiAgICBuLnN0YXJ0QXQgJiYgKGEgPSBmcyhuLnN0YXJ0QXQpKTtcbiAgICBsZXQgdSA9IG51bGw7XG4gICAgcmV0dXJuIG4uZW5kQXQgJiYgKHUgPSBmcyhuLmVuZEF0KSksIGRlKGUsIGksIG8sIHIsIGMsIFwiRlwiIC8qIEZpcnN0ICovICwgYSwgdSk7XG59XG5cbmZ1bmN0aW9uIHVzKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIDAgLyogTGlzdGVuICovIDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgY2FzZSAxIC8qIEV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImV4aXN0ZW5jZS1maWx0ZXItbWlzbWF0Y2hcIjtcblxuICAgICAgICAgIGNhc2UgMiAvKiBMaW1ib1Jlc29sdXRpb24gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFwibGltYm8tZG9jdW1lbnRcIjtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gTCgpO1xuICAgICAgICB9XG4gICAgfSgwLCBlLnB1cnBvc2UpO1xuICAgIHJldHVybiBudWxsID09IG4gPyBudWxsIDoge1xuICAgICAgICBcImdvb2ctbGlzdGVuLXRhZ3NcIjogblxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGhzKHQpIHtcbiAgICByZXR1cm4gdCA/IHZvaWQgMCAhPT0gdC51bmFyeUZpbHRlciA/IFsgeXModCkgXSA6IHZvaWQgMCAhPT0gdC5maWVsZEZpbHRlciA/IFsgZ3ModCkgXSA6IHZvaWQgMCAhPT0gdC5jb21wb3NpdGVGaWx0ZXIgPyB0LmNvbXBvc2l0ZUZpbHRlci5maWx0ZXJzLm1hcCgodCA9PiBocyh0KSkpLnJlZHVjZSgoKHQsIGUpID0+IHQuY29uY2F0KGUpKSkgOiBMKCkgOiBbXTtcbn1cblxuZnVuY3Rpb24gbHModCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGJlZm9yZTogdC5iZWZvcmUsXG4gICAgICAgIHZhbHVlczogdC5wb3NpdGlvblxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGZzKHQpIHtcbiAgICBjb25zdCBlID0gISF0LmJlZm9yZSwgbiA9IHQudmFsdWVzIHx8IFtdO1xuICAgIHJldHVybiBuZXcgb2UobiwgZSk7XG59XG5cbi8vIHZpc2libGUgZm9yIHRlc3RpbmdcbmZ1bmN0aW9uIGRzKHQpIHtcbiAgICByZXR1cm4gTW5bdF07XG59XG5cbmZ1bmN0aW9uIHdzKHQpIHtcbiAgICByZXR1cm4gTG5bdF07XG59XG5cbmZ1bmN0aW9uIF9zKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBmaWVsZFBhdGg6IHQuY2Fub25pY2FsU3RyaW5nKClcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBtcyh0KSB7XG4gICAgcmV0dXJuIGZ0LmZyb21TZXJ2ZXJGb3JtYXQodC5maWVsZFBhdGgpO1xufVxuXG5mdW5jdGlvbiBncyh0KSB7XG4gICAgcmV0dXJuIEp0LmNyZWF0ZShtcyh0LmZpZWxkRmlsdGVyLmZpZWxkKSwgZnVuY3Rpb24odCkge1xuICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICBjYXNlIFwiRVFVQUxcIjpcbiAgICAgICAgICAgIHJldHVybiBcIj09XCIgLyogRVFVQUwgKi87XG5cbiAgICAgICAgICBjYXNlIFwiTk9UX0VRVUFMXCI6XG4gICAgICAgICAgICByZXR1cm4gXCIhPVwiIC8qIE5PVF9FUVVBTCAqLztcblxuICAgICAgICAgIGNhc2UgXCJHUkVBVEVSX1RIQU5cIjpcbiAgICAgICAgICAgIHJldHVybiBcIj5cIiAvKiBHUkVBVEVSX1RIQU4gKi87XG5cbiAgICAgICAgICBjYXNlIFwiR1JFQVRFUl9USEFOX09SX0VRVUFMXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI+PVwiIC8qIEdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLztcblxuICAgICAgICAgIGNhc2UgXCJMRVNTX1RIQU5cIjpcbiAgICAgICAgICAgIHJldHVybiBcIjxcIiAvKiBMRVNTX1RIQU4gKi87XG5cbiAgICAgICAgICBjYXNlIFwiTEVTU19USEFOX09SX0VRVUFMXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI8PVwiIC8qIExFU1NfVEhBTl9PUl9FUVVBTCAqLztcblxuICAgICAgICAgIGNhc2UgXCJBUlJBWV9DT05UQUlOU1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLztcblxuICAgICAgICAgIGNhc2UgXCJJTlwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiaW5cIiAvKiBJTiAqLztcblxuICAgICAgICAgIGNhc2UgXCJOT1RfSU5cIjpcbiAgICAgICAgICAgIHJldHVybiBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLztcblxuICAgICAgICAgIGNhc2UgXCJBUlJBWV9DT05UQUlOU19BTllcIjpcbiAgICAgICAgICAgIHJldHVybiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gTCgpO1xuICAgICAgICB9XG4gICAgfSh0LmZpZWxkRmlsdGVyLm9wKSwgdC5maWVsZEZpbHRlci52YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHlzKHQpIHtcbiAgICBzd2l0Y2ggKHQudW5hcnlGaWx0ZXIub3ApIHtcbiAgICAgIGNhc2UgXCJJU19OQU5cIjpcbiAgICAgICAgY29uc3QgZSA9IG1zKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICByZXR1cm4gSnQuY3JlYXRlKGUsIFwiPT1cIiAvKiBFUVVBTCAqLyAsIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgXCJJU19OVUxMXCI6XG4gICAgICAgIGNvbnN0IG4gPSBtcyh0LnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIEp0LmNyZWF0ZShuLCBcIj09XCIgLyogRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlIFwiSVNfTk9UX05BTlwiOlxuICAgICAgICBjb25zdCBzID0gbXModC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgIHJldHVybiBKdC5jcmVhdGUocywgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgXCJJU19OT1RfTlVMTFwiOlxuICAgICAgICBjb25zdCBpID0gbXModC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgIHJldHVybiBKdC5jcmVhdGUoaSwgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBMKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwcyh0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIHJldHVybiB0LmZpZWxkcy5mb3JFYWNoKCh0ID0+IGUucHVzaCh0LmNhbm9uaWNhbFN0cmluZygpKSkpLCB7XG4gICAgICAgIGZpZWxkUGF0aHM6IGVcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBUcyh0KSB7XG4gICAgLy8gUmVzb3VyY2UgbmFtZXMgaGF2ZSBhdCBsZWFzdCA0IGNvbXBvbmVudHMgKHByb2plY3QgSUQsIGRhdGFiYXNlIElEKVxuICAgIHJldHVybiB0Lmxlbmd0aCA+PSA0ICYmIFwicHJvamVjdHNcIiA9PT0gdC5nZXQoMCkgJiYgXCJkYXRhYmFzZXNcIiA9PT0gdC5nZXQoMik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEVuY29kZXMgYSByZXNvdXJjZSBwYXRoIGludG8gYSBJbmRleGVkRGItY29tcGF0aWJsZSBzdHJpbmcgZm9ybS5cbiAqL1xuZnVuY3Rpb24gRXModCkge1xuICAgIGxldCBlID0gXCJcIjtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyBuKyspIGUubGVuZ3RoID4gMCAmJiAoZSA9IEFzKGUpKSwgZSA9IElzKHQuZ2V0KG4pLCBlKTtcbiAgICByZXR1cm4gQXMoZSk7XG59XG5cbi8qKiBFbmNvZGVzIGEgc2luZ2xlIHNlZ21lbnQgb2YgYSByZXNvdXJjZSBwYXRoIGludG8gdGhlIGdpdmVuIHJlc3VsdCAqLyBmdW5jdGlvbiBJcyh0LCBlKSB7XG4gICAgbGV0IG4gPSBlO1xuICAgIGNvbnN0IHMgPSB0Lmxlbmd0aDtcbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IHM7IGUrKykge1xuICAgICAgICBjb25zdCBzID0gdC5jaGFyQXQoZSk7XG4gICAgICAgIHN3aXRjaCAocykge1xuICAgICAgICAgIGNhc2UgXCJcXDBcIjpcbiAgICAgICAgICAgIG4gKz0gXCJcdTAwMDFcdTAwMTBcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAwMVwiOlxuICAgICAgICAgICAgbiArPSBcIlx1MDAwMVx1MDAxMVwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbiArPSBzO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG4vKiogRW5jb2RlcyBhIHBhdGggc2VwYXJhdG9yIGludG8gdGhlIGdpdmVuIHJlc3VsdCAqLyBmdW5jdGlvbiBBcyh0KSB7XG4gICAgcmV0dXJuIHQgKyBcIlx1MDAwMVx1MDAwMVwiO1xufVxuXG4vKipcbiAqIERlY29kZXMgdGhlIGdpdmVuIEluZGV4ZWREYi1jb21wYXRpYmxlIHN0cmluZyBmb3JtIG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvXG4gKiBhIFJlc291cmNlUGF0aCBpbnN0YW5jZS4gTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCBzdWl0YWJsZSBmb3IgdXNlIHdpdGhcbiAqIGRlY29kaW5nIHJlc291cmNlIG5hbWVzIGZyb20gdGhlIHNlcnZlcjsgdGhvc2UgYXJlIE9uZSBQbGF0Zm9ybSBmb3JtYXRcbiAqIHN0cmluZ3MuXG4gKi8gZnVuY3Rpb24gUnModCkge1xuICAgIC8vIEV2ZW50IHRoZSBlbXB0eSBwYXRoIG11c3QgZW5jb2RlIGFzIGEgcGF0aCBvZiBhdCBsZWFzdCBsZW5ndGggMi4gQSBwYXRoXG4gICAgLy8gd2l0aCBleGFjdGx5IDIgbXVzdCBiZSB0aGUgZW1wdHkgcGF0aC5cbiAgICBjb25zdCBlID0gdC5sZW5ndGg7XG4gICAgaWYgKEIoZSA+PSAyKSwgMiA9PT0gZSkgcmV0dXJuIEIoXCJcdTAwMDFcIiA9PT0gdC5jaGFyQXQoMCkgJiYgXCJcdTAwMDFcIiA9PT0gdC5jaGFyQXQoMSkpLCBodC5lbXB0eVBhdGgoKTtcbiAgICAvLyBFc2NhcGUgY2hhcmFjdGVycyBjYW5ub3QgZXhpc3QgcGFzdCB0aGUgc2Vjb25kLXRvLWxhc3QgcG9zaXRpb24gaW4gdGhlXG4gICAgLy8gc291cmNlIHZhbHVlLlxuICAgICAgICBjb25zdCBuID0gZSAtIDIsIHMgPSBbXTtcbiAgICBsZXQgaSA9IFwiXCI7XG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCBlOyApIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgdHdvIGNoYXJhY3RlcnMgb2YgYSB2YWxpZCBlbmNvZGVkIHBhdGggbXVzdCBiZSBhIHNlcGFyYXRvciwgc29cbiAgICAgICAgLy8gdGhlcmUgbXVzdCBiZSBhbiBlbmQgdG8gdGhpcyBzZWdtZW50LlxuICAgICAgICBjb25zdCBlID0gdC5pbmRleE9mKFwiXHUwMDAxXCIsIHIpO1xuICAgICAgICAoZSA8IDAgfHwgZSA+IG4pICYmIEwoKTtcbiAgICAgICAgc3dpdGNoICh0LmNoYXJBdChlICsgMSkpIHtcbiAgICAgICAgICBjYXNlIFwiXHUwMDAxXCI6XG4gICAgICAgICAgICBjb25zdCBuID0gdC5zdWJzdHJpbmcociwgZSk7XG4gICAgICAgICAgICBsZXQgbztcbiAgICAgICAgICAgIDAgPT09IGkubGVuZ3RoID8gXG4gICAgICAgICAgICAvLyBBdm9pZCBjb3B5aW5nIGZvciB0aGUgY29tbW9uIGNhc2Ugb2YgYSBzZWdtZW50IHRoYXQgZXhjbHVkZXMgXFwwXG4gICAgICAgICAgICAvLyBhbmQgXFwwMDFcbiAgICAgICAgICAgIG8gPSBuIDogKGkgKz0gbiwgbyA9IGksIGkgPSBcIlwiKSwgcy5wdXNoKG8pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDEwXCI6XG4gICAgICAgICAgICBpICs9IHQuc3Vic3RyaW5nKHIsIGUpLCBpICs9IFwiXFwwXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMTFcIjpcbiAgICAgICAgICAgIC8vIFRoZSBlc2NhcGUgY2hhcmFjdGVyIGNhbiBiZSB1c2VkIGluIHRoZSBvdXRwdXQgdG8gZW5jb2RlIGl0c2VsZi5cbiAgICAgICAgICAgIGkgKz0gdC5zdWJzdHJpbmcociwgZSArIDEpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgTCgpO1xuICAgICAgICB9XG4gICAgICAgIHIgPSBlICsgMjtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBodChzKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2NoZW1hIFZlcnNpb24gZm9yIHRoZSBXZWIgY2xpZW50OlxuICogMS4gIEluaXRpYWwgdmVyc2lvbiBpbmNsdWRpbmcgTXV0YXRpb24gUXVldWUsIFF1ZXJ5IENhY2hlLCBhbmQgUmVtb3RlXG4gKiAgICAgRG9jdW1lbnQgQ2FjaGVcbiAqIDIuICBVc2VkIHRvIGVuc3VyZSBhIHRhcmdldEdsb2JhbCBvYmplY3QgZXhpc3RzIGFuZCBhZGQgdGFyZ2V0Q291bnQgdG8gaXQuIE5vXG4gKiAgICAgbG9uZ2VyIHJlcXVpcmVkIGJlY2F1c2UgbWlncmF0aW9uIDMgdW5jb25kaXRpb25hbGx5IGNsZWFycyBpdC5cbiAqIDMuICBEcm9wcGVkIGFuZCByZS1jcmVhdGVkIFF1ZXJ5IENhY2hlIHRvIGRlYWwgd2l0aCBjYWNoZSBjb3JydXB0aW9uIHJlbGF0ZWRcbiAqICAgICB0byBsaW1ibyByZXNvbHV0aW9uLiBBZGRyZXNzZXNcbiAqICAgICBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtaW9zLXNkay9pc3N1ZXMvMTU0OFxuICogNC4gIE11bHRpLVRhYiBTdXBwb3J0LlxuICogNS4gIFJlbW92YWwgb2YgaGVsZCB3cml0ZSBhY2tzLlxuICogNi4gIENyZWF0ZSBkb2N1bWVudCBnbG9iYWwgZm9yIHRyYWNraW5nIGRvY3VtZW50IGNhY2hlIHNpemUuXG4gKiA3LiAgRW5zdXJlIGV2ZXJ5IGNhY2hlZCBkb2N1bWVudCBoYXMgYSBzZW50aW5lbCByb3cgd2l0aCBhIHNlcXVlbmNlIG51bWJlci5cbiAqIDguICBBZGQgY29sbGVjdGlvbi1wYXJlbnQgaW5kZXggZm9yIENvbGxlY3Rpb24gR3JvdXAgcXVlcmllcy5cbiAqIDkuICBDaGFuZ2UgUmVtb3RlRG9jdW1lbnRDaGFuZ2VzIHN0b3JlIHRvIGJlIGtleWVkIGJ5IHJlYWRUaW1lIHJhdGhlciB0aGFuXG4gKiAgICAgYW4gYXV0by1pbmNyZW1lbnRpbmcgSUQuIFRoaXMgaXMgcmVxdWlyZWQgZm9yIEluZGV4LUZyZWUgcXVlcmllcy5cbiAqIDEwLiBSZXdyaXRlIHRoZSBjYW5vbmljYWwgSURzIHRvIHRoZSBleHBsaWNpdCBQcm90b2J1Zi1iYXNlZCBmb3JtYXQuXG4gKiAxMS4gQWRkIGJ1bmRsZXMgYW5kIG5hbWVkX3F1ZXJpZXMgZm9yIGJ1bmRsZSBzdXBwb3J0LlxuICovXG4vKipcbiAqIFdyYXBwZXIgY2xhc3MgdG8gc3RvcmUgdGltZXN0YW1wcyAoc2Vjb25kcyBhbmQgbmFub3MpIGluIEluZGV4ZWREYiBvYmplY3RzLlxuICovXG5jbGFzcyBicyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnNlY29uZHMgPSB0LCB0aGlzLm5hbm9zZWNvbmRzID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBzaW5nbGV0b24gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ293bmVyJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKlxuICogQSBnaXZlbiBkYXRhYmFzZSBjYW4gaGF2ZSBhIHNpbmdsZSBwcmltYXJ5IHRhYiBhc3NpZ25lZCBhdCBhIGdpdmVuIHRpbWUuIFRoYXRcbiAqIHRhYiBtdXN0IHZhbGlkYXRlIHRoYXQgaXQgaXMgc3RpbGwgaG9sZGluZyB0aGUgcHJpbWFyeSBsZWFzZSBiZWZvcmUgZXZlcnlcbiAqIG9wZXJhdGlvbiB0aGF0IHJlcXVpcmVzIGxvY2tlZCBhY2Nlc3MuIFRoZSBwcmltYXJ5IHRhYiBzaG91bGQgcmVndWxhcmx5XG4gKiB3cml0ZSBhbiB1cGRhdGVkIHRpbWVzdGFtcCB0byB0aGlzIGxlYXNlIHRvIHByZXZlbnQgb3RoZXIgdGFicyBmcm9tXG4gKiBcInN0ZWFsaW5nXCIgdGhlIHByaW1hcnkgbGVhc2VcbiAqLyBjbGFzcyBQcyB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqIFdoZXRoZXIgdG8gYWxsb3cgc2hhcmVkIGFjY2VzcyBmcm9tIG11bHRpcGxlIHRhYnMuICovXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLm93bmVySWQgPSB0LCB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uID0gZSwgdGhpcy5sZWFzZVRpbWVzdGFtcE1zID0gbjtcbiAgICB9XG59XG5cbi8qKlxuICogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIG5hbWUgJ293bmVyJyBpcyBjaG9zZW4gdG8gZW5zdXJlIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGhcbiAqIG9sZGVyIGNsaWVudHMgdGhhdCBvbmx5IHN1cHBvcnRlZCBzaW5nbGUgbG9ja2VkIGFjY2VzcyB0byB0aGUgcGVyc2lzdGVuY2VcbiAqIGxheWVyLlxuICovIFBzLnN0b3JlID0gXCJvd25lclwiLCBcbi8qKlxuICogVGhlIGtleSBzdHJpbmcgdXNlZCBmb3IgdGhlIHNpbmdsZSBvYmplY3QgdGhhdCBleGlzdHMgaW4gdGhlXG4gKiBEYlByaW1hcnlDbGllbnQgc3RvcmUuXG4gKi9cblBzLmtleSA9IFwib3duZXJcIjtcblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnbXV0YXRpb25RdWV1ZXMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqXG4gKiBFYWNoIHVzZXIgZ2V0cyBhIHNpbmdsZSBxdWV1ZSBvZiBNdXRhdGlvbkJhdGNoZXMgdG8gYXBwbHkgdG8gdGhlIHNlcnZlci5cbiAqIERiTXV0YXRpb25RdWV1ZSB0cmFja3MgdGhlIG1ldGFkYXRhIGFib3V0IHRoZSBxdWV1ZS5cbiAqL1xuY2xhc3MgdnMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXIgSUQgdG8gd2hpY2ggdGhpcyBxdWV1ZSBiZWxvbmdzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEFuIGlkZW50aWZpZXIgZm9yIHRoZSBoaWdoZXN0IG51bWJlcmVkIGJhdGNoIHRoYXQgaGFzIGJlZW4gYWNrbm93bGVkZ2VkXG4gICAgICogYnkgdGhlIHNlcnZlci4gQWxsIE11dGF0aW9uQmF0Y2hlcyBpbiB0aGlzIHF1ZXVlIHdpdGggYmF0Y2hJZHMgbGVzc1xuICAgICAqIHRoYW4gb3IgZXF1YWwgdG8gdGhpcyB2YWx1ZSBhcmUgY29uc2lkZXJlZCB0byBoYXZlIGJlZW4gYWNrbm93bGVkZ2VkIGJ5XG4gICAgICogdGhlIHNlcnZlci5cbiAgICAgKlxuICAgICAqIE5PVEU6IHRoaXMgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIHVzZWQgYnkgdGhlIGNvZGUuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBzdHJlYW0gdG9rZW4gdGhhdCB3YXMgcHJldmlvdXNseSBzZW50IGJ5IHRoZSBzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiBTZWUgU3RyZWFtaW5nV3JpdGVSZXF1ZXN0IGluIGRhdGFzdG9yZS5wcm90byBmb3IgbW9yZSBkZXRhaWxzIGFib3V0XG4gICAgICogdXNhZ2UuXG4gICAgICpcbiAgICAgKiBBZnRlciBzZW5kaW5nIHRoaXMgdG9rZW4sIGVhcmxpZXIgdG9rZW5zIG1heSBub3QgYmUgdXNlZCBhbnltb3JlIHNvXG4gICAgICogb25seSBhIHNpbmdsZSBzdHJlYW0gdG9rZW4gaXMgcmV0YWluZWQuXG4gICAgICpcbiAgICAgKiBOT1RFOiB0aGlzIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciB1c2VkIGJ5IHRoZSBjb2RlLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy51c2VySWQgPSB0LCB0aGlzLmxhc3RBY2tub3dsZWRnZWRCYXRjaElkID0gZSwgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSBuO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICAqLyB2cy5zdG9yZSA9IFwibXV0YXRpb25RdWV1ZXNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHVzZXJJZCBwcm9wZXJ0eS4gKi9cbnZzLmtleVBhdGggPSBcInVzZXJJZFwiO1xuXG4vKipcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdtdXRhdGlvbnMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqXG4gKiBSZXByZXNlbnRzIGEgYmF0Y2ggb2YgdXNlci1sZXZlbCBtdXRhdGlvbnMgaW50ZW5kZWQgdG8gYmUgc2VudCB0byB0aGUgc2VydmVyXG4gKiBpbiBhIHNpbmdsZSB3cml0ZS4gRWFjaCB1c2VyLWxldmVsIGJhdGNoIGdldHMgYSBzZXBhcmF0ZSBEYk11dGF0aW9uQmF0Y2hcbiAqIHdpdGggYSBuZXcgYmF0Y2hJZC5cbiAqL1xuY2xhc3MgVnMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXIgSUQgdG8gd2hpY2ggdGhpcyBiYXRjaCBiZWxvbmdzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEFuIGlkZW50aWZpZXIgZm9yIHRoaXMgYmF0Y2gsIGFsbG9jYXRlZCB1c2luZyBhbiBhdXRvLWdlbmVyYXRlZCBrZXkuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGxvY2FsIHdyaXRlIHRpbWUgb2YgdGhlIGJhdGNoLCBzdG9yZWQgYXMgbWlsbGlzZWNvbmRzIHNpbmNlIHRoZVxuICAgICAqIGVwb2NoLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiBcIm11dGF0aW9uc1wiIHRoYXQgcmVwcmVzZW50IGEgcGFydGlhbCBiYXNlIHN0YXRlIGZyb20gd2hlbiB0aGlzXG4gICAgICogd3JpdGUgYmF0Y2ggd2FzIGluaXRpYWxseSBjcmVhdGVkLiBEdXJpbmcgbG9jYWwgYXBwbGljYXRpb24gb2YgdGhlIHdyaXRlXG4gICAgICogYmF0Y2gsIHRoZXNlIGJhc2VNdXRhdGlvbnMgYXJlIGFwcGxpZWQgcHJpb3IgdG8gdGhlIHJlYWwgd3JpdGVzIGluIG9yZGVyXG4gICAgICogdG8gb3ZlcnJpZGUgY2VydGFpbiBkb2N1bWVudCBmaWVsZHMgZnJvbSB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLiBUaGlzXG4gICAgICogaXMgbmVjZXNzYXJ5IGluIHRoZSBjYXNlIG9mIG5vbi1pZGVtcG90ZW50IHdyaXRlcyAoZS5nLiBgaW5jcmVtZW50KClgXG4gICAgICogdHJhbnNmb3JtcykgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIG1vZGlmaWVkIGRvY3VtZW50c1xuICAgICAqIGRvZXNuJ3QgZmxpY2tlciBpZiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIHJlY2VpdmVzIHRoZSByZXN1bHQgb2YgdGhlXG4gICAgICogbm9uLWlkZW1wb3RlbnQgd3JpdGUgYmVmb3JlIHRoZSB3cml0ZSBpcyByZW1vdmVkIGZyb20gdGhlIHF1ZXVlLlxuICAgICAqXG4gICAgICogVGhlc2UgbXV0YXRpb25zIGFyZSBuZXZlciBzZW50IHRvIHRoZSBiYWNrZW5kLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiBtdXRhdGlvbnMgdG8gYXBwbHkuIEFsbCBtdXRhdGlvbnMgd2lsbCBiZSBhcHBsaWVkIGF0b21pY2FsbHkuXG4gICAgICpcbiAgICAgKiBNdXRhdGlvbnMgYXJlIHNlcmlhbGl6ZWQgdmlhIHRvTXV0YXRpb24oKS5cbiAgICAgKi9cbiAgICBpKSB7XG4gICAgICAgIHRoaXMudXNlcklkID0gdCwgdGhpcy5iYXRjaElkID0gZSwgdGhpcy5sb2NhbFdyaXRlVGltZU1zID0gbiwgdGhpcy5iYXNlTXV0YXRpb25zID0gcywgXG4gICAgICAgIHRoaXMubXV0YXRpb25zID0gaTtcbiAgICB9XG59XG5cbi8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAgKi8gVnMuc3RvcmUgPSBcIm11dGF0aW9uc1wiLCBcbi8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgdXNlcklkLCBiYXRjaElkIHByb3BlcnRpZXMuICovXG5Wcy5rZXlQYXRoID0gXCJiYXRjaElkXCIsIFxuLyoqIFRoZSBpbmRleCBuYW1lIGZvciBsb29rdXAgb2YgbXV0YXRpb25zIGJ5IHVzZXIuICovXG5Wcy51c2VyTXV0YXRpb25zSW5kZXggPSBcInVzZXJNdXRhdGlvbnNJbmRleFwiLCBcbi8qKiBUaGUgdXNlciBtdXRhdGlvbnMgaW5kZXggaXMga2V5ZWQgYnkgW3VzZXJJZCwgYmF0Y2hJZF0gcGFpcnMuICovXG5Wcy51c2VyTXV0YXRpb25zS2V5UGF0aCA9IFsgXCJ1c2VySWRcIiwgXCJiYXRjaElkXCIgXTtcblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnZG9jdW1lbnRNdXRhdGlvbnMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqXG4gKiBBIG1hbnVhbGx5IG1haW50YWluZWQgaW5kZXggb2YgYWxsIHRoZSBtdXRhdGlvbiBiYXRjaGVzIHRoYXQgYWZmZWN0IGEgZ2l2ZW5cbiAqIGRvY3VtZW50IGtleS4gVGhlIHJvd3MgaW4gdGhpcyB0YWJsZSBhcmUgcmVmZXJlbmNlcyBiYXNlZCBvbiB0aGUgY29udGVudHMgb2ZcbiAqIERiTXV0YXRpb25CYXRjaC5tdXRhdGlvbnMuXG4gKi9cbmNsYXNzIFNzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHt9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFt1c2VySWRdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zIGluZGV4IHRvIGl0ZXJhdGVcbiAgICAgKiBvdmVyIGFsbCBvZiBhIHVzZXIncyBkb2N1bWVudCBtdXRhdGlvbnMuXG4gICAgICovICAgIHN0YXRpYyBwcmVmaXhGb3JVc2VyKHQpIHtcbiAgICAgICAgcmV0dXJuIFsgdCBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgW3VzZXJJZCwgZW5jb2RlZFBhdGhdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zXG4gICAgICogaW5kZXggdG8gaXRlcmF0ZSBvdmVyIGFsbCBhdCBkb2N1bWVudCBtdXRhdGlvbnMgZm9yIGEgZ2l2ZW4gcGF0aCBvciBsb3dlci5cbiAgICAgKi8gICAgc3RhdGljIHByZWZpeEZvclBhdGgodCwgZSkge1xuICAgICAgICByZXR1cm4gWyB0LCBFcyhlKSBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVsbCBpbmRleCBrZXkgb2YgW3VzZXJJZCwgZW5jb2RlZFBhdGgsIGJhdGNoSWRdIGZvciBpbnNlcnRpbmdcbiAgICAgKiBhbmQgZGVsZXRpbmcgaW50byB0aGUgRGJEb2N1bWVudE11dGF0aW9ucyBpbmRleC5cbiAgICAgKi8gICAgc3RhdGljIGtleSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBbIHQsIEVzKGUpLCBuIF07XG4gICAgfVxufVxuXG5Tcy5zdG9yZSA9IFwiZG9jdW1lbnRNdXRhdGlvbnNcIiwgXG4vKipcbiAqIEJlY2F1c2Ugd2Ugc3RvcmUgYWxsIHRoZSB1c2VmdWwgaW5mb3JtYXRpb24gZm9yIHRoaXMgc3RvcmUgaW4gdGhlIGtleSxcbiAqIHRoZXJlIGlzIG5vIHVzZWZ1bCBpbmZvcm1hdGlvbiB0byBzdG9yZSBhcyB0aGUgdmFsdWUuIFRoZSByYXcgKHVuZW5jb2RlZClcbiAqIHBhdGggY2Fubm90IGJlIHN0b3JlZCBiZWNhdXNlIEluZGV4ZWREYiBkb2Vzbid0IHN0b3JlIHByb3RvdHlwZVxuICogaW5mb3JtYXRpb24uXG4gKi9cblNzLlBMQUNFSE9MREVSID0gbmV3IFNzO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGtub3duIGFic2VuY2Ugb2YgYSBkb2N1bWVudCBhdCBhIHBhcnRpY3VsYXIgdmVyc2lvbi5cbiAqIFN0b3JlZCBpbiBJbmRleGVkRGIgYXMgcGFydCBvZiBhIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0LlxuICovXG5jbGFzcyBEcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLnJlYWRUaW1lID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3QgYnV0IHdob3NlIGRhdGEgaXMgdW5rbm93bi5cbiAqIFN0b3JlZCBpbiBJbmRleGVkRGIgYXMgcGFydCBvZiBhIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0LlxuICovIGNsYXNzIENzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQsIHRoaXMudmVyc2lvbiA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdyZW1vdGVEb2N1bWVudHMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqIEl0IHJlcHJlc2VudHMgZWl0aGVyOlxuICpcbiAqIC0gQSBjb21wbGV0ZSBkb2N1bWVudC5cbiAqIC0gQSBcIm5vIGRvY3VtZW50XCIgcmVwcmVzZW50aW5nIGEgZG9jdW1lbnQgdGhhdCBpcyBrbm93biBub3QgdG8gZXhpc3QgKGF0XG4gKiBzb21lIHZlcnNpb24pLlxuICogLSBBbiBcInVua25vd24gZG9jdW1lbnRcIiByZXByZXNlbnRpbmcgYSBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IChhdFxuICogc29tZSB2ZXJzaW9uKSBidXQgd2hvc2UgY29udGVudHMgYXJlIHVua25vd24uXG4gKlxuICogTm90ZTogVGhpcyBpcyB0aGUgcGVyc2lzdGVkIGVxdWl2YWxlbnQgb2YgYSBNYXliZURvY3VtZW50IGFuZCBjb3VsZCBwZXJoYXBzXG4gKiBiZSBtYWRlIG1vcmUgZ2VuZXJhbCBpZiBuZWNlc3NhcnkuXG4gKi8gY2xhc3MgTnMge1xuICAgIC8vIFRPRE86IFdlIGFyZSBjdXJyZW50bHkgc3RvcmluZyBmdWxsIGRvY3VtZW50IGtleXMgYWxtb3N0IHRocmVlIHRpbWVzXG4gICAgLy8gKG9uY2UgYXMgcGFydCBvZiB0aGUgcHJpbWFyeSBrZXksIG9uY2UgLSBwYXJ0bHkgLSBhcyBgcGFyZW50UGF0aGAgYW5kIG9uY2VcbiAgICAvLyBpbnNpZGUgdGhlIGVuY29kZWQgZG9jdW1lbnRzKS4gRHVyaW5nIG91ciBuZXh0IG1pZ3JhdGlvbiwgd2Ugc2hvdWxkXG4gICAgLy8gcmV3cml0ZSB0aGUgcHJpbWFyeSBrZXkgYXMgcGFyZW50UGF0aCArIGRvY3VtZW50IElEIHdoaWNoIHdvdWxkIGFsbG93IHVzXG4gICAgLy8gdG8gZHJvcCBvbmUgdmFsdWUuXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogU2V0IHRvIGFuIGluc3RhbmNlIG9mIERiVW5rbm93bkRvY3VtZW50IGlmIHRoZSBkYXRhIGZvciBhIGRvY3VtZW50IGlzXG4gICAgICogbm90IGtub3duLCBidXQgaXQgaXMga25vd24gdGhhdCBhIGRvY3VtZW50IGV4aXN0cyBhdCB0aGUgc3BlY2lmaWVkXG4gICAgICogdmVyc2lvbiAoZS5nLiBpdCBoYWQgYSBzdWNjZXNzZnVsIHVwZGF0ZSBhcHBsaWVkIHRvIGl0KVxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFNldCB0byBhbiBpbnN0YW5jZSBvZiBhIERiTm9Eb2N1bWVudCBpZiBpdCBpcyBrbm93biB0aGF0IG5vIGRvY3VtZW50XG4gICAgICogZXhpc3RzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFNldCB0byBhbiBpbnN0YW5jZSBvZiBhIERvY3VtZW50IGlmIHRoZXJlJ3MgYSBjYWNoZWQgdmVyc2lvbiBvZiB0aGVcbiAgICAgKiBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBEb2N1bWVudHMgdGhhdCB3ZXJlIHdyaXR0ZW4gdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBzdG9yZSBiYXNlZCBvblxuICAgICAqIGEgd3JpdGUgYWNrbm93bGVkZ21lbnQgYXJlIG1hcmtlZCB3aXRoIGBoYXNDb21taXR0ZWRNdXRhdGlvbnNgLiBUaGVzZVxuICAgICAqIGRvY3VtZW50cyBhcmUgcG90ZW50aWFsbHkgaW5jb25zaXN0ZW50IHdpdGggdGhlIGJhY2tlbmQncyBjb3B5IGFuZCB1c2VcbiAgICAgKiB0aGUgd3JpdGUncyBjb21taXQgdmVyc2lvbiBhcyB0aGVpciBkb2N1bWVudCB2ZXJzaW9uLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIFdoZW4gdGhlIGRvY3VtZW50IHdhcyByZWFkIGZyb20gdGhlIGJhY2tlbmQuIFVuZGVmaW5lZCBmb3IgZGF0YSB3cml0dGVuXG4gICAgICogcHJpb3IgdG8gc2NoZW1hIHZlcnNpb24gOS5cbiAgICAgKi9cbiAgICBpLCBcbiAgICAvKipcbiAgICAgKiBUaGUgcGF0aCBvZiB0aGUgY29sbGVjdGlvbiB0aGlzIGRvY3VtZW50IGlzIHBhcnQgb2YuIFVuZGVmaW5lZCBmb3IgZGF0YVxuICAgICAqIHdyaXR0ZW4gcHJpb3IgdG8gc2NoZW1hIHZlcnNpb24gOS5cbiAgICAgKi9cbiAgICByKSB7XG4gICAgICAgIHRoaXMudW5rbm93bkRvY3VtZW50ID0gdCwgdGhpcy5ub0RvY3VtZW50ID0gZSwgdGhpcy5kb2N1bWVudCA9IG4sIHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zID0gcywgXG4gICAgICAgIHRoaXMucmVhZFRpbWUgPSBpLCB0aGlzLnBhcmVudFBhdGggPSByO1xuICAgIH1cbn1cblxuTnMuc3RvcmUgPSBcInJlbW90ZURvY3VtZW50c1wiLCBcbi8qKlxuICogQW4gaW5kZXggdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gYWxsIGVudHJpZXMgc29ydGVkIGJ5IHJlYWQgdGltZSAod2hpY2hcbiAqIGNvcnJlc3BvbmRzIHRvIHRoZSBsYXN0IG1vZGlmaWNhdGlvbiB0aW1lIG9mIGVhY2ggcm93KS5cbiAqXG4gKiBUaGlzIGluZGV4IGlzIHVzZWQgdG8gcHJvdmlkZSBhIGNoYW5nZWxvZyBmb3IgTXVsdGktVGFiLlxuICovXG5Ocy5yZWFkVGltZUluZGV4ID0gXCJyZWFkVGltZUluZGV4XCIsIE5zLnJlYWRUaW1lSW5kZXhQYXRoID0gXCJyZWFkVGltZVwiLCBcbi8qKlxuICogQW4gaW5kZXggdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gZG9jdW1lbnRzIGluIGEgY29sbGVjdGlvbiBzb3J0ZWQgYnkgcmVhZFxuICogdGltZS5cbiAqXG4gKiBUaGlzIGluZGV4IGlzIHVzZWQgdG8gYWxsb3cgdGhlIFJlbW90ZURvY3VtZW50Q2FjaGUgdG8gZmV0Y2ggbmV3bHkgY2hhbmdlZFxuICogZG9jdW1lbnRzIGluIGEgY29sbGVjdGlvbi5cbiAqL1xuTnMuY29sbGVjdGlvblJlYWRUaW1lSW5kZXggPSBcImNvbGxlY3Rpb25SZWFkVGltZUluZGV4XCIsIE5zLmNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCA9IFsgXCJwYXJlbnRQYXRoXCIsIFwicmVhZFRpbWVcIiBdO1xuXG4vKipcbiAqIENvbnRhaW5zIGEgc2luZ2xlIGVudHJ5IHRoYXQgaGFzIG1ldGFkYXRhIGFib3V0IHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuXG4gKi9cbmNsYXNzIHhzIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYnl0ZVNpemUgLSBBcHByb3hpbWF0ZWx5IHRoZSB0b3RhbCBzaXplIGluIGJ5dGVzIG9mIGFsbCB0aGVcbiAgICAgKiBkb2N1bWVudHMgaW4gdGhlIGRvY3VtZW50IGNhY2hlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5ieXRlU2l6ZSA9IHQ7XG4gICAgfVxufVxuXG54cy5zdG9yZSA9IFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIiwgeHMua2V5ID0gXCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiO1xuXG4vKipcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICd0YXJnZXRzJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKlxuICogVGhpcyBpcyBiYXNlZCBvbiBhbmQgc2hvdWxkIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSBwcm90byB1c2VkIGluIHRoZSBpT1NcbiAqIGNsaWVudC5cbiAqXG4gKiBFYWNoIHF1ZXJ5IHRoZSBjbGllbnQgbGlzdGVucyB0byBhZ2FpbnN0IHRoZSBzZXJ2ZXIgaXMgdHJhY2tlZCBvbiBkaXNrIHNvXG4gKiB0aGF0IHRoZSBxdWVyeSBjYW4gYmUgZWZmaWNpZW50bHkgcmVzdW1lZCBvbiByZXN0YXJ0LlxuICovXG5jbGFzcyBrcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogQW4gYXV0by1nZW5lcmF0ZWQgc2VxdWVudGlhbCBudW1lcmljIGlkZW50aWZpZXIgZm9yIHRoZSBxdWVyeS5cbiAgICAgKlxuICAgICAqIFF1ZXJpZXMgYXJlIHN0b3JlZCB1c2luZyB0aGVpciBjYW5vbmljYWxJZCBhcyB0aGUga2V5LCBidXQgdGhlc2VcbiAgICAgKiBjYW5vbmljYWxJZHMgY2FuIGJlIHF1aXRlIGxvbmcgc28gd2UgYWRkaXRpb25hbGx5IGFzc2lnbiBhIHVuaXF1ZVxuICAgICAqIHF1ZXJ5SWQgd2hpY2ggY2FuIGJlIHVzZWQgYnkgcmVmZXJlbmNlZCBkYXRhIHN0cnVjdHVyZXMgKGUuZy5cbiAgICAgKiBpbmRleGVzKSB0byBtaW5pbWl6ZSB0aGUgb24tZGlzayBjb3N0LlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBjYW5vbmljYWwgc3RyaW5nIHJlcHJlc2VudGluZyB0aGlzIHF1ZXJ5LiBUaGlzIGlzIG5vdCB1bmlxdWUuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgcmVhZFRpbWUgcmVjZWl2ZWQgZnJvbSB0aGUgV2F0Y2ggU2VydmljZSBmb3IgdGhpcyBxdWVyeS5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdGhlIHNhbWUgdmFsdWUgYXMgVGFyZ2V0Q2hhbmdlLnJlYWRfdGltZSBpbiB0aGUgcHJvdG9zLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgcXVlcnkgdG8gYmVcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGFcbiAgICAgKiB0aGF0IG1hdGNoZXMgdGhlIHF1ZXJ5LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYVxuICAgICAqIHBvaW50IGluIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqXG4gICAgICogVGhpcyBpcyByZWxhdGVkIHRvIHRoZSBzbmFwc2hvdFZlcnNpb24gaW4gdGhhdCB0aGUgcmVzdW1lVG9rZW5cbiAgICAgKiBlZmZlY3RpdmVseSBhbHNvIGVuY29kZXMgdGhhdCB2YWx1ZSwgYnV0IHRoZSByZXN1bWVUb2tlbiBpcyBvcGFxdWVcbiAgICAgKiBhbmQgc29tZXRpbWVzIGVuY29kZXMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEEgY29uc2VxdWVuY2Ugb2YgdGhpcyBpcyB0aGF0IHRoZSByZXN1bWVUb2tlbiBzaG91bGQgYmUgdXNlZCB3aGVuXG4gICAgICogYXNraW5nIHRoZSBzZXJ2ZXIgdG8gcmVhc29uIGFib3V0IHdoZXJlIHRoaXMgY2xpZW50IGlzIGluIHRoZSB3YXRjaFxuICAgICAqIHN0cmVhbSwgYnV0IHRoZSBjbGllbnQgc2hvdWxkIHVzZSB0aGUgc25hcHNob3RWZXJzaW9uIGZvciBpdHMgb3duXG4gICAgICogcHVycG9zZXMuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHRoZSBzYW1lIHZhbHVlIGFzIFRhcmdldENoYW5nZS5yZXN1bWVfdG9rZW4gaW4gdGhlIHByb3Rvcy5cbiAgICAgKi9cbiAgICBzLCBcbiAgICAvKipcbiAgICAgKiBBIHNlcXVlbmNlIG51bWJlciByZXByZXNlbnRpbmcgdGhlIGxhc3QgdGltZSB0aGlzIHF1ZXJ5IHdhc1xuICAgICAqIGxpc3RlbmVkIHRvLCB1c2VkIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24gcHVycG9zZXMuXG4gICAgICpcbiAgICAgKiBDb252ZW50aW9uYWxseSB0aGlzIHdvdWxkIGJlIGEgdGltZXN0YW1wIHZhbHVlLCBidXQgZGV2aWNlLWxvY2FsXG4gICAgICogY2xvY2tzIGFyZSB1bnJlbGlhYmxlIGFuZCB0aGV5IG11c3QgYmUgYWJsZSB0byBjcmVhdGUgbmV3IGxpc3RlbnNcbiAgICAgKiBldmVuIHdoaWxlIGRpc2Nvbm5lY3RlZC4gSW5zdGVhZCB0aGlzIHNob3VsZCBiZSBhIG1vbm90b25pY2FsbHlcbiAgICAgKiBpbmNyZWFzaW5nIG51bWJlciB0aGF0J3MgaW5jcmVtZW50ZWQgb24gZWFjaCBsaXN0ZW4gY2FsbC5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgZGlmZmVyZW50IGZyb20gdGhlIHF1ZXJ5SWQgc2luY2UgdGhlIHF1ZXJ5SWQgaXMgYW5cbiAgICAgKiBpbW11dGFibGUgaWRlbnRpZmllciBhc3NpZ25lZCB0byB0aGUgUXVlcnkgb24gZmlyc3QgdXNlIHdoaWxlXG4gICAgICogbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGlzIHVwZGF0ZWQgZXZlcnkgdGltZSB0aGUgcXVlcnkgaXNcbiAgICAgKiBsaXN0ZW5lZCB0by5cbiAgICAgKi9cbiAgICBpLCBcbiAgICAvKipcbiAgICAgKiBEZW5vdGVzIHRoZSBtYXhpbXVtIHNuYXBzaG90IHZlcnNpb24gYXQgd2hpY2ggdGhlIGFzc29jaWF0ZWQgcXVlcnkgdmlld1xuICAgICAqIGNvbnRhaW5lZCBubyBsaW1ibyBkb2N1bWVudHMuICBVbmRlZmluZWQgZm9yIGRhdGEgd3JpdHRlbiBwcmlvciB0b1xuICAgICAqIHNjaGVtYSB2ZXJzaW9uIDkuXG4gICAgICovXG4gICAgciwgXG4gICAgLyoqXG4gICAgICogVGhlIHF1ZXJ5IGZvciB0aGlzIHRhcmdldC5cbiAgICAgKlxuICAgICAqIEJlY2F1c2UgY2Fub25pY2FsIGlkcyBhcmUgbm90IHVuaXF1ZSB3ZSBtdXN0IHN0b3JlIHRoZSBhY3R1YWwgcXVlcnkuIFdlXG4gICAgICogdXNlIHRoZSBwcm90byB0byBoYXZlIGFuIG9iamVjdCB3ZSBjYW4gcGVyc2lzdCB3aXRob3V0IGhhdmluZyB0b1xuICAgICAqIGR1cGxpY2F0ZSB0cmFuc2xhdGlvbiBsb2dpYyB0byBhbmQgZnJvbSBhIGBRdWVyeWAgb2JqZWN0LlxuICAgICAqL1xuICAgIG8pIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuY2Fub25pY2FsSWQgPSBlLCB0aGlzLnJlYWRUaW1lID0gbiwgdGhpcy5yZXN1bWVUb2tlbiA9IHMsIFxuICAgICAgICB0aGlzLmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGksIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9IHIsIHRoaXMucXVlcnkgPSBvO1xuICAgIH1cbn1cblxua3Muc3RvcmUgPSBcInRhcmdldHNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHRhcmdldElkIHByb3BlcnR5LiAqL1xua3Mua2V5UGF0aCA9IFwidGFyZ2V0SWRcIiwgXG4vKiogVGhlIG5hbWUgb2YgdGhlIHF1ZXJ5VGFyZ2V0cyBpbmRleC4gKi9cbmtzLnF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSA9IFwicXVlcnlUYXJnZXRzSW5kZXhcIiwgXG4vKipcbiAqIFRoZSBpbmRleCBvZiBhbGwgY2Fub25pY2FsSWRzIHRvIHRoZSB0YXJnZXRzIHRoYXQgdGhleSBtYXRjaC4gVGhpcyBpcyBub3RcbiAqIGEgdW5pcXVlIG1hcHBpbmcgYmVjYXVzZSBjYW5vbmljYWxJZCBkb2VzIG5vdCBwcm9taXNlIGEgdW5pcXVlIG5hbWUgZm9yIGFsbFxuICogcG9zc2libGUgcXVlcmllcywgc28gd2UgYXBwZW5kIHRoZSB0YXJnZXRJZCB0byBtYWtlIHRoZSBtYXBwaW5nIHVuaXF1ZS5cbiAqL1xua3MucXVlcnlUYXJnZXRzS2V5UGF0aCA9IFsgXCJjYW5vbmljYWxJZFwiLCBcInRhcmdldElkXCIgXTtcblxuLyoqXG4gKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIGFuIGFzc29jaWF0aW9uIGJldHdlZW4gYSB0YXJnZXQgYW5kIGEgZG9jdW1lbnQsIG9yIGFcbiAqIHNlbnRpbmVsIHJvdyBtYXJraW5nIHRoZSBsYXN0IHNlcXVlbmNlIG51bWJlciBhdCB3aGljaCBhIGRvY3VtZW50IHdhcyB1c2VkLlxuICogRWFjaCBkb2N1bWVudCBjYWNoZWQgbXVzdCBoYXZlIGEgY29ycmVzcG9uZGluZyBzZW50aW5lbCByb3cgYmVmb3JlIGxydVxuICogZ2FyYmFnZSBjb2xsZWN0aW9uIGlzIGVuYWJsZWQuXG4gKlxuICogVGhlIHRhcmdldCBhc3NvY2lhdGlvbnMgYW5kIHNlbnRpbmVsIHJvd3MgYXJlIGNvLWxvY2F0ZWQgc28gdGhhdCBvcnBoYW5lZFxuICogZG9jdW1lbnRzIGFuZCB0aGVpciBzZXF1ZW5jZSBudW1iZXJzIGNhbiBiZSBpZGVudGlmaWVkIGVmZmljaWVudGx5IHZpYSBhIHNjYW5cbiAqIG9mIHRoaXMgc3RvcmUuXG4gKi9cbmNsYXNzICRzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgdGFyZ2V0SWQgaWRlbnRpZnlpbmcgYSB0YXJnZXQgb3IgMCBmb3IgYSBzZW50aW5lbCByb3cuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHBhdGggdG8gdGhlIGRvY3VtZW50LCBhcyBlbmNvZGVkIGluIHRoZSBrZXkuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogSWYgdGhpcyBpcyBhIHNlbnRpbmVsIHJvdywgdGhpcyBzaG91bGQgYmUgdGhlIHNlcXVlbmNlIG51bWJlciBvZiB0aGUgbGFzdFxuICAgICAqIHRpbWUgdGhlIGRvY3VtZW50IHNwZWNpZmllZCBieSBgcGF0aGAgd2FzIHVzZWQuIE90aGVyd2lzZSwgaXQgc2hvdWxkIGJlXG4gICAgICogYHVuZGVmaW5lZGAuXG4gICAgICovXG4gICAgbikge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5wYXRoID0gZSwgdGhpcy5zZXF1ZW5jZU51bWJlciA9IG47XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gICovICRzLnN0b3JlID0gXCJ0YXJnZXREb2N1bWVudHNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHRhcmdldElkLCBwYXRoIHByb3BlcnRpZXMuICovXG4kcy5rZXlQYXRoID0gWyBcInRhcmdldElkXCIsIFwicGF0aFwiIF0sIFxuLyoqIFRoZSBpbmRleCBuYW1lIGZvciB0aGUgcmV2ZXJzZSBpbmRleC4gKi9cbiRzLmRvY3VtZW50VGFyZ2V0c0luZGV4ID0gXCJkb2N1bWVudFRhcmdldHNJbmRleFwiLCBcbi8qKiBXZSBhbHNvIG5lZWQgdG8gY3JlYXRlIHRoZSByZXZlcnNlIGluZGV4IGZvciB0aGVzZSBwcm9wZXJ0aWVzLiAqL1xuJHMuZG9jdW1lbnRUYXJnZXRzS2V5UGF0aCA9IFsgXCJwYXRoXCIsIFwidGFyZ2V0SWRcIiBdO1xuXG4vKipcbiAqIEEgcmVjb3JkIG9mIGdsb2JhbCBzdGF0ZSB0cmFja2VkIGFjcm9zcyBhbGwgVGFyZ2V0cywgdHJhY2tlZCBzZXBhcmF0ZWx5XG4gKiB0byBhdm9pZCB0aGUgbmVlZCBmb3IgZXh0cmEgaW5kZXhlcy5cbiAqXG4gKiBUaGlzIHNob3VsZCBiZSBrZXB0IGluLXN5bmMgd2l0aCB0aGUgcHJvdG8gdXNlZCBpbiB0aGUgaU9TIGNsaWVudC5cbiAqL1xuY2xhc3MgT3Mge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBoaWdoZXN0IG51bWJlcmVkIHRhcmdldCBpZCBhY3Jvc3MgYWxsIHRhcmdldHMuXG4gICAgICpcbiAgICAgKiBTZWUgRGJUYXJnZXQudGFyZ2V0SWQuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGFjcm9zcyBhbGwgdGFyZ2V0cy5cbiAgICAgKlxuICAgICAqIFNlZSBEYlRhcmdldC5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBnbG9iYWwgc25hcHNob3QgdmVyc2lvbiByZXByZXNlbnRpbmcgdGhlIGxhc3QgY29uc2lzdGVudCBzbmFwc2hvdCB3ZVxuICAgICAqIHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmQuIFRoaXMgaXMgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIGFuZCBhbnlcbiAgICAgKiBzbmFwc2hvdHMgcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZCBwcmlvciB0byB0aGlzIHZlcnNpb24gKGUuZy4gZm9yXG4gICAgICogdGFyZ2V0cyByZXN1bWVkIHdpdGggYSByZXN1bWVUb2tlbikgc2hvdWxkIGJlIHN1cHByZXNzZWQgKGJ1ZmZlcmVkKVxuICAgICAqIHVudGlsIHRoZSBiYWNrZW5kIGhhcyBjYXVnaHQgdXAgdG8gdGhpcyBzbmFwc2hvdCB2ZXJzaW9uIGFnYWluLiBUaGlzXG4gICAgICogcHJldmVudHMgb3VyIGNhY2hlIGZyb20gZXZlciBnb2luZyBiYWNrd2FyZHMgaW4gdGltZS5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHRhcmdldHMgcGVyc2lzdGVkLlxuICAgICAqL1xuICAgIHMpIHtcbiAgICAgICAgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSB0LCB0aGlzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUsIHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4sIFxuICAgICAgICB0aGlzLnRhcmdldENvdW50ID0gcztcbiAgICB9XG59XG5cbi8qKlxuICogVGhlIGtleSBzdHJpbmcgdXNlZCBmb3IgdGhlIHNpbmdsZSBvYmplY3QgdGhhdCBleGlzdHMgaW4gdGhlXG4gKiBEYlRhcmdldEdsb2JhbCBzdG9yZS5cbiAqLyBPcy5rZXkgPSBcInRhcmdldEdsb2JhbEtleVwiLCBPcy5zdG9yZSA9IFwidGFyZ2V0R2xvYmFsXCI7XG5cbi8qKlxuICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyBhbiBhc3NvY2lhdGlvbiBiZXR3ZWVuIGEgQ29sbGVjdGlvbiBpZCAoZS5nLiAnbWVzc2FnZXMnKVxuICogdG8gYSBwYXJlbnQgcGF0aCAoZS5nLiAnL2NoYXRzLzEyMycpIHRoYXQgY29udGFpbnMgaXQgYXMgYSAoc3ViKWNvbGxlY3Rpb24uXG4gKiBUaGlzIGlzIHVzZWQgdG8gZWZmaWNpZW50bHkgZmluZCBhbGwgY29sbGVjdGlvbnMgdG8gcXVlcnkgd2hlbiBwZXJmb3JtaW5nXG4gKiBhIENvbGxlY3Rpb24gR3JvdXAgcXVlcnkuXG4gKi9cbmNsYXNzIEZzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbklkIChlLmcuICdtZXNzYWdlcycpXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHBhdGggdG8gdGhlIHBhcmVudCAoZWl0aGVyIGEgZG9jdW1lbnQgbG9jYXRpb24gb3IgYW4gZW1wdHkgcGF0aCBmb3JcbiAgICAgKiBhIHJvb3QtbGV2ZWwgY29sbGVjdGlvbikuXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25JZCA9IHQsIHRoaXMucGFyZW50ID0gZTtcbiAgICB9XG59XG5cbi8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAqLyBGcy5zdG9yZSA9IFwiY29sbGVjdGlvblBhcmVudHNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIGNvbGxlY3Rpb25JZCwgcGFyZW50IHByb3BlcnRpZXMuICovXG5Gcy5rZXlQYXRoID0gWyBcImNvbGxlY3Rpb25JZFwiLCBcInBhcmVudFwiIF07XG5cbi8qKlxuICogQSByZWNvcmQgb2YgdGhlIG1ldGFkYXRhIHN0YXRlIG9mIGVhY2ggY2xpZW50LlxuICpcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyB1c2VkIHRvIHN5bmNocm9uaXplIG11bHRpLXRhYiBzdGF0ZSBhbmQgZG9lcyBub3QgbmVlZFxuICogdG8gYmUgcG9ydGVkIHRvIGlPUyBvciBBbmRyb2lkLlxuICovXG5jbGFzcyBNcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gTm90ZTogUHJldmlvdXMgc2NoZW1hIHZlcnNpb25zIGluY2x1ZGVkIGEgZmllbGRcbiAgICAvLyBcImxhc3RQcm9jZXNzZWREb2N1bWVudENoYW5nZUlkXCIuIERvbid0IHVzZSBhbnltb3JlLlxuICAgIC8qKiBUaGUgYXV0by1nZW5lcmF0ZWQgY2xpZW50IGlkIGFzc2lnbmVkIGF0IGNsaWVudCBzdGFydHVwLiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgbGFzdCB0aW1lIHRoaXMgc3RhdGUgd2FzIHVwZGF0ZWQuICovXG4gICAgZSwgXG4gICAgLyoqIFdoZXRoZXIgdGhlIGNsaWVudCdzIG5ldHdvcmsgY29ubmVjdGlvbiBpcyBlbmFibGVkLiAqL1xuICAgIG4sIFxuICAgIC8qKiBXaGV0aGVyIHRoaXMgY2xpZW50IGlzIHJ1bm5pbmcgaW4gYSBmb3JlZ3JvdW5kIHRhYi4gKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSB0LCB0aGlzLnVwZGF0ZVRpbWVNcyA9IGUsIHRoaXMubmV0d29ya0VuYWJsZWQgPSBuLCB0aGlzLmluRm9yZWdyb3VuZCA9IHM7XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gKi8gTXMuc3RvcmUgPSBcImNsaWVudE1ldGFkYXRhXCIsIFxuLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSBjbGllbnRJZCBwcm9wZXJ0aWVzLiAqL1xuTXMua2V5UGF0aCA9IFwiY2xpZW50SWRcIjtcblxuLyoqXG4gKiBBIG9iamVjdCByZXByZXNlbnRpbmcgYSBidW5kbGUgbG9hZGVkIGJ5IHRoZSBTREsuXG4gKi9cbmNsYXNzIExzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIElEIG9mIHRoZSBsb2FkZWQgYnVuZGxlLiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgY3JlYXRlIHRpbWUgb2YgdGhlIGxvYWRlZCBidW5kbGUuICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBzY2hlbWEgdmVyc2lvbiBvZiB0aGUgbG9hZGVkIGJ1bmRsZS4gKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMuYnVuZGxlSWQgPSB0LCB0aGlzLmNyZWF0ZVRpbWUgPSBlLCB0aGlzLnZlcnNpb24gPSBuO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICovIExzLnN0b3JlID0gXCJidW5kbGVzXCIsIExzLmtleVBhdGggPSBcImJ1bmRsZUlkXCI7XG5cbi8qKlxuICogQSBvYmplY3QgcmVwcmVzZW50aW5nIGEgbmFtZWQgcXVlcnkgbG9hZGVkIGJ5IHRoZSBTREsgdmlhIGEgYnVuZGxlLlxuICovXG5jbGFzcyBCcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBuYW1lIG9mIHRoZSBxdWVyeS4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIHJlYWQgdGltZSBvZiB0aGUgcmVzdWx0cyBzYXZlZCBpbiB0aGUgYnVuZGxlIGZyb20gdGhlIG5hbWVkIHF1ZXJ5LiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgcXVlcnkgc2F2ZWQgaW4gdGhlIGJ1bmRsZS4gKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHQsIHRoaXMucmVhZFRpbWUgPSBlLCB0aGlzLmJ1bmRsZWRRdWVyeSA9IG47XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gKi8gQnMuc3RvcmUgPSBcIm5hbWVkUXVlcmllc1wiLCBCcy5rZXlQYXRoID0gXCJuYW1lXCI7XG5cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNvbnN0IFVzID0gWyAuLi5bIC4uLlsgLi4uWyAuLi5bIHZzLnN0b3JlLCBWcy5zdG9yZSwgU3Muc3RvcmUsIE5zLnN0b3JlLCBrcy5zdG9yZSwgUHMuc3RvcmUsIE9zLnN0b3JlLCAkcy5zdG9yZSBdLCBNcy5zdG9yZSBdLCB4cy5zdG9yZSBdLCBGcy5zdG9yZSBdLCBMcy5zdG9yZSwgQnMuc3RvcmUgXSwgcXMgPSBcIlRoZSBjdXJyZW50IHRhYiBpcyBub3QgaW4gdGhlIHJlcXVpcmVkIHN0YXRlIHRvIHBlcmZvcm0gdGhpcyBvcGVyYXRpb24uIEl0IG1pZ2h0IGJlIG5lY2Vzc2FyeSB0byByZWZyZXNoIHRoZSBicm93c2VyIHRhYi5cIjtcblxuLy8gVjIgaXMgbm8gbG9uZ2VyIHVzYWJsZSAoc2VlIGNvbW1lbnQgYXQgdG9wIG9mIGZpbGUpXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG4vKipcbiAqIEEgYmFzZSBjbGFzcyByZXByZXNlbnRpbmcgYSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbiwgZW5jYXBzdWxhdGluZyBib3RoIHRoZVxuICogdHJhbnNhY3Rpb24ncyBzZXF1ZW5jZSBudW1iZXJzIGFzIHdlbGwgYXMgYSBsaXN0IG9mIG9uQ29tbWl0dGVkIGxpc3RlbmVycy5cbiAqXG4gKiBXaGVuIHlvdSBjYWxsIFBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCksIGl0IHdpbGwgY3JlYXRlIGEgdHJhbnNhY3Rpb24gYW5kXG4gKiBwYXNzIGl0IHRvIHlvdXIgY2FsbGJhY2suIFlvdSB0aGVuIHBhc3MgaXQgdG8gYW55IG1ldGhvZCB0aGF0IG9wZXJhdGVzXG4gKiBvbiBwZXJzaXN0ZW5jZS5cbiAqL1xuY2xhc3MgS3Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzID0gW107XG4gICAgfVxuICAgIGFkZE9uQ29tbWl0dGVkTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLnB1c2godCk7XG4gICAgfVxuICAgIHJhaXNlT25Db21taXR0ZWRFdmVudCgpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5mb3JFYWNoKCh0ID0+IHQoKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUGVyc2lzdGVuY2VQcm9taXNlIGlzIGVzc2VudGlhbGx5IGEgcmUtaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZSBleGNlcHRcbiAqIGl0IGhhcyBhIC5uZXh0KCkgbWV0aG9kIGluc3RlYWQgb2YgLnRoZW4oKSBhbmQgLm5leHQoKSBhbmQgLmNhdGNoKCkgY2FsbGJhY2tzXG4gKiBhcmUgZXhlY3V0ZWQgc3luY2hyb25vdXNseSB3aGVuIGEgUGVyc2lzdGVuY2VQcm9taXNlIHJlc29sdmVzIHJhdGhlciB0aGFuXG4gKiBhc3luY2hyb25vdXNseSAoUHJvbWlzZSBpbXBsZW1lbnRhdGlvbnMgdXNlIHNldEltbWVkaWF0ZSgpIG9yIHNpbWlsYXIpLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGludGVyb3BlcmF0ZSB3aXRoIEluZGV4ZWREQiB3aGljaCB3aWxsIGF1dG9tYXRpY2FsbHlcbiAqIGNvbW1pdCB0cmFuc2FjdGlvbnMgaWYgY29udHJvbCBpcyByZXR1cm5lZCB0byB0aGUgZXZlbnQgbG9vcCB3aXRob3V0XG4gKiBzeW5jaHJvbm91c2x5IGluaXRpYXRpbmcgYW5vdGhlciBvcGVyYXRpb24gb24gdGhlIHRyYW5zYWN0aW9uLlxuICpcbiAqIE5PVEU6IC50aGVuKCkgYW5kIC5jYXRjaCgpIG9ubHkgYWxsb3cgYSBzaW5nbGUgY29uc3VtZXIsIHVubGlrZSBub3JtYWxcbiAqIFByb21pc2VzLlxuICovIGNsYXNzIGpzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIC8vIE5PVEU6IG5leHQvY2F0Y2hDYWxsYmFjayB3aWxsIGFsd2F5cyBwb2ludCB0byBvdXIgb3duIHdyYXBwZXIgZnVuY3Rpb25zLFxuICAgICAgICAvLyBub3QgdGhlIHVzZXIncyByYXcgbmV4dCgpIG9yIGNhdGNoKCkgY2FsbGJhY2tzLlxuICAgICAgICB0aGlzLm5leHRDYWxsYmFjayA9IG51bGwsIHRoaXMuY2F0Y2hDYWxsYmFjayA9IG51bGwsIFxuICAgICAgICAvLyBXaGVuIHRoZSBvcGVyYXRpb24gcmVzb2x2ZXMsIHdlJ2xsIHNldCByZXN1bHQgb3IgZXJyb3IgYW5kIG1hcmsgaXNEb25lLlxuICAgICAgICB0aGlzLnJlc3VsdCA9IHZvaWQgMCwgdGhpcy5lcnJvciA9IHZvaWQgMCwgdGhpcy5pc0RvbmUgPSAhMSwgXG4gICAgICAgIC8vIFNldCB0byB0cnVlIHdoZW4gLnRoZW4oKSBvciAuY2F0Y2goKSBhcmUgY2FsbGVkIGFuZCBwcmV2ZW50cyBhZGRpdGlvbmFsXG4gICAgICAgIC8vIGNoYWluaW5nLlxuICAgICAgICB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSAhMSwgdCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzRG9uZSA9ICEwLCB0aGlzLnJlc3VsdCA9IHQsIHRoaXMubmV4dENhbGxiYWNrICYmIFxuICAgICAgICAgICAgLy8gdmFsdWUgc2hvdWxkIGJlIGRlZmluZWQgdW5sZXNzIFQgaXMgVm9pZCwgYnV0IHdlIGNhbid0IGV4cHJlc3NcbiAgICAgICAgICAgIC8vIHRoYXQgaW4gdGhlIHR5cGUgc3lzdGVtLlxuICAgICAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sodCk7XG4gICAgICAgIH0pLCAodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzRG9uZSA9ICEwLCB0aGlzLmVycm9yID0gdCwgdGhpcy5jYXRjaENhbGxiYWNrICYmIHRoaXMuY2F0Y2hDYWxsYmFjayh0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjYXRjaCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHQodm9pZCAwLCB0KTtcbiAgICB9XG4gICAgbmV4dCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgJiYgTCgpLCB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSAhMCwgdGhpcy5pc0RvbmUgPyB0aGlzLmVycm9yID8gdGhpcy53cmFwRmFpbHVyZShlLCB0aGlzLmVycm9yKSA6IHRoaXMud3JhcFN1Y2Nlc3ModCwgdGhpcy5yZXN1bHQpIDogbmV3IGpzKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBTdWNjZXNzKHQsIGUpLm5leHQobiwgcyk7XG4gICAgICAgICAgICB9LCB0aGlzLmNhdGNoQ2FsbGJhY2sgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBGYWlsdXJlKGUsIHQpLm5leHQobiwgcyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvUHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZXh0KHQsIGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHdyYXBVc2VyRnVuY3Rpb24odCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQoKTtcbiAgICAgICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YganMgPyBlIDoganMucmVzb2x2ZShlKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgcmV0dXJuIGpzLnJlamVjdCh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3cmFwU3VjY2Vzcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0ID8gdGhpcy53cmFwVXNlckZ1bmN0aW9uKCgoKSA9PiB0KGUpKSkgOiBqcy5yZXNvbHZlKGUpO1xuICAgIH1cbiAgICB3cmFwRmFpbHVyZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0ID8gdGhpcy53cmFwVXNlckZ1bmN0aW9uKCgoKSA9PiB0KGUpKSkgOiBqcy5yZWplY3QoZSk7XG4gICAgfVxuICAgIHN0YXRpYyByZXNvbHZlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBqcygoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIGUodCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc3RhdGljIHJlamVjdCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcganMoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBuKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0YXRpYyB3YWl0Rm9yKFxuICAgIC8vIEFjY2VwdCBhbGwgUHJvbWlzZSB0eXBlcyBpbiB3YWl0Rm9yKCkuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB0KSB7XG4gICAgICAgIHJldHVybiBuZXcganMoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBsZXQgcyA9IDAsIGkgPSAwLCByID0gITE7XG4gICAgICAgICAgICB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICsrcywgdC5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICsraSwgciAmJiBpID09PSBzICYmIGUoKTtcbiAgICAgICAgICAgICAgICB9KSwgKHQgPT4gbih0KSkpO1xuICAgICAgICAgICAgfSkpLCByID0gITAsIGkgPT09IHMgJiYgZSgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdpdmVuIGFuIGFycmF5IG9mIHByZWRpY2F0ZSBmdW5jdGlvbnMgdGhhdCBhc3luY2hyb25vdXNseSBldmFsdWF0ZSB0byBhXG4gICAgICogYm9vbGVhbiwgaW1wbGVtZW50cyBhIHNob3J0LWNpcmN1aXRpbmcgYG9yYCBiZXR3ZWVuIHRoZSByZXN1bHRzLiBQcmVkaWNhdGVzXG4gICAgICogd2lsbCBiZSBldmFsdWF0ZWQgdW50aWwgb25lIG9mIHRoZW0gcmV0dXJucyBgdHJ1ZWAsIHRoZW4gc3RvcC4gVGhlIGZpbmFsXG4gICAgICogcmVzdWx0IHdpbGwgYmUgd2hldGhlciBhbnkgb2YgdGhlbSByZXR1cm5lZCBgdHJ1ZWAuXG4gICAgICovICAgIHN0YXRpYyBvcih0KSB7XG4gICAgICAgIGxldCBlID0ganMucmVzb2x2ZSghMSk7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSBlID0gZS5uZXh0KCh0ID0+IHQgPyBqcy5yZXNvbHZlKHQpIDogbigpKSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBzdGF0aWMgZm9yRWFjaCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIG4ucHVzaChlLmNhbGwodGhpcywgdCwgcykpO1xuICAgICAgICB9KSksIHRoaXMud2FpdEZvcihuKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IFNpbXBsZURiLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBXcmFwcyBhbiBJREJUcmFuc2FjdGlvbiBhbmQgZXhwb3NlcyBhIHN0b3JlKCkgbWV0aG9kIHRvIGdldCBhIGhhbmRsZSB0byBhXG4gKiBzcGVjaWZpYyBvYmplY3Qgc3RvcmUuXG4gKi9cbmNsYXNzIFFzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYWN0aW9uID0gdCwgdGhpcy50cmFuc2FjdGlvbiA9IGUsIHRoaXMuYWJvcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0IG9mIHRoZSBJbmRleGVkRGIgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkV0ID0gbmV3IFEsIHRoaXMudHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuRXQucmVzb2x2ZSgpO1xuICAgICAgICB9LCB0aGlzLnRyYW5zYWN0aW9uLm9uYWJvcnQgPSAoKSA9PiB7XG4gICAgICAgICAgICBlLmVycm9yID8gdGhpcy5FdC5yZWplY3QobmV3IHpzKHQsIGUuZXJyb3IpKSA6IHRoaXMuRXQucmVzb2x2ZSgpO1xuICAgICAgICB9LCB0aGlzLnRyYW5zYWN0aW9uLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBacyhlLnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICB0aGlzLkV0LnJlamVjdChuZXcgenModCwgbikpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgb3Blbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFFzKGUsIHQudHJhbnNhY3Rpb24ocywgbikpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgenMoZSwgdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IEl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5FdC5wcm9taXNlO1xuICAgIH1cbiAgICBhYm9ydCh0KSB7XG4gICAgICAgIHQgJiYgdGhpcy5FdC5yZWplY3QodCksIHRoaXMuYWJvcnRlZCB8fCAoJChcIlNpbXBsZURiXCIsIFwiQWJvcnRpbmcgdHJhbnNhY3Rpb246XCIsIHQgPyB0Lm1lc3NhZ2UgOiBcIkNsaWVudC1pbml0aWF0ZWQgYWJvcnRcIiksIFxuICAgICAgICB0aGlzLmFib3J0ZWQgPSAhMCwgdGhpcy50cmFuc2FjdGlvbi5hYm9ydCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFNpbXBsZURiU3RvcmU8S2V5VHlwZSwgVmFsdWVUeXBlPiBmb3IgdGhlIHNwZWNpZmllZCBzdG9yZS4gQWxsXG4gICAgICogb3BlcmF0aW9ucyBwZXJmb3JtZWQgb24gdGhlIFNpbXBsZURiU3RvcmUgaGFwcGVuIHdpdGhpbiB0aGUgY29udGV4dCBvZiB0aGlzXG4gICAgICogdHJhbnNhY3Rpb24gYW5kIGl0IGNhbm5vdCBiZSB1c2VkIGFueW1vcmUgb25jZSB0aGUgdHJhbnNhY3Rpb24gaXNcbiAgICAgKiBjb21wbGV0ZWQuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgd2UgY2FuJ3QgYWN0dWFsbHkgZW5mb3JjZSB0aGF0IHRoZSBLZXlUeXBlIGFuZCBWYWx1ZVR5cGUgYXJlXG4gICAgICogY29ycmVjdCwgYnV0IHRoZXkgYWxsb3cgdHlwZSBzYWZldHkgdGhyb3VnaCB0aGUgcmVzdCBvZiB0aGUgY29uc3VtaW5nIGNvZGUuXG4gICAgICovICAgIHN0b3JlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodCk7XG4gICAgICAgIHJldHVybiBuZXcgSnMoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGEgd3JhcHBlciBhcm91bmQgSW5kZXhlZERiIHdpdGggYSBzaW1wbGlmaWVkIGludGVyZmFjZSB0aGF0IHVzZXNcbiAqIFByb21pc2UtbGlrZSByZXR1cm4gdmFsdWVzIHRvIGNoYWluIG9wZXJhdGlvbnMuIFJlYWwgcHJvbWlzZXMgY2Fubm90IGJlIHVzZWRcbiAqIHNpbmNlIC50aGVuKCkgY29udGludWF0aW9ucyBhcmUgZXhlY3V0ZWQgYXN5bmNocm9ub3VzbHkgKGUuZy4gdmlhXG4gKiAuc2V0SW1tZWRpYXRlKSwgd2hpY2ggd291bGQgY2F1c2UgSW5kZXhlZERCIHRvIGVuZCB0aGUgdHJhbnNhY3Rpb24uXG4gKiBTZWUgUGVyc2lzdGVuY2VQcm9taXNlIGZvciBtb3JlIGRldGFpbHMuXG4gKi8gY2xhc3MgV3Mge1xuICAgIC8qXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTaW1wbGVEYiB3cmFwcGVyIGZvciBJbmRleGVkRGIgZGF0YWJhc2UgYG5hbWVgLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGB2ZXJzaW9uYCBtdXN0IG5vdCBiZSBhIGRvd25ncmFkZS4gSW5kZXhlZERCIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgKiBkb3duZ3JhZGluZyB0aGUgc2NoZW1hIHZlcnNpb24uIFdlIGN1cnJlbnRseSBkbyBub3Qgc3VwcG9ydCBhbnkgd2F5IHRvIGRvXG4gICAgICogdmVyc2lvbmluZyBvdXRzaWRlIG9mIEluZGV4ZWREQidzIHZlcnNpb25pbmcgbWVjaGFuaXNtLCBhcyBvbmx5XG4gICAgICogdmVyc2lvbi11cGdyYWRlIHRyYW5zYWN0aW9ucyBhcmUgYWxsb3dlZCB0byBkbyB0aGluZ3MgbGlrZSBjcmVhdGVcbiAgICAgKiBvYmplY3RzdG9yZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLm5hbWUgPSB0LCB0aGlzLnZlcnNpb24gPSBlLCB0aGlzLkF0ID0gbjtcbiAgICAgICAgLy8gTk9URTogQWNjb3JkaW5nIHRvIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xOTcwNTAsIHRoZVxuICAgICAgICAvLyBidWcgd2UncmUgY2hlY2tpbmcgZm9yIHNob3VsZCBleGlzdCBpbiBpT1MgPj0gMTIuMiBhbmQgPCAxMywgYnV0IGZvclxuICAgICAgICAvLyB3aGF0ZXZlciByZWFzb24gaXQncyBtdWNoIGhhcmRlciB0byBoaXQgYWZ0ZXIgMTIuMiBzbyB3ZSBvbmx5IHByb2FjdGl2ZWx5XG4gICAgICAgIC8vIGxvZyBvbiAxMi4yLlxuICAgICAgICAxMi4yID09PSBXcy5SdChnZXRVQSgpKSAmJiBPKFwiRmlyZXN0b3JlIHBlcnNpc3RlbmNlIHN1ZmZlcnMgZnJvbSBhIGJ1ZyBpbiBpT1MgMTIuMiBTYWZhcmkgdGhhdCBtYXkgY2F1c2UgeW91ciBhcHAgdG8gc3RvcCB3b3JraW5nLiBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBmb3IgZGV0YWlscyBhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC5cIik7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UuICovICAgIHN0YXRpYyBkZWxldGUodCkge1xuICAgICAgICByZXR1cm4gJChcIlNpbXBsZURiXCIsIFwiUmVtb3ZpbmcgZGF0YWJhc2U6XCIsIHQpLCBZcyh3aW5kb3cuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKHQpKS50b1Byb21pc2UoKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBJbmRleGVkREIgaXMgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiAqLyAgICBzdGF0aWMgYnQoKSB7XG4gICAgICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAoV3MuUHQoKSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBXZSBleHRlbnNpdmVseSB1c2UgaW5kZXhlZCBhcnJheSB2YWx1ZXMgYW5kIGNvbXBvdW5kIGtleXMsXG4gICAgICAgIC8vIHdoaWNoIElFIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0LiBIb3dldmVyLCB0aGV5IHN0aWxsIGhhdmUgaW5kZXhlZERCXG4gICAgICAgIC8vIGRlZmluZWQgb24gdGhlIHdpbmRvdywgc28gd2UgbmVlZCB0byBjaGVjayBmb3IgdGhlbSBoZXJlIGFuZCBtYWtlIHN1cmVcbiAgICAgICAgLy8gdG8gcmV0dXJuIHRoYXQgcGVyc2lzdGVuY2UgaXMgbm90IGVuYWJsZWQgZm9yIHRob3NlIGJyb3dzZXJzLlxuICAgICAgICAvLyBGb3IgdHJhY2tpbmcgc3VwcG9ydCBvZiB0aGlzIGZlYXR1cmUsIHNlZSBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL3N0YXR1cy9pbmRleGVkZGJhcnJheXNhbmRtdWx0aWVudHJ5c3VwcG9ydC9cbiAgICAgICAgLy8gQ2hlY2sgdGhlIFVBIHN0cmluZyB0byBmaW5kIG91dCB0aGUgYnJvd3Nlci5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZ2V0VUEoKSwgZSA9IFdzLlJ0KHQpLCBuID0gMCA8IGUgJiYgZSA8IDEwLCBzID0gV3MudnQodCksIGkgPSAwIDwgcyAmJiBzIDwgNC41O1xuICAgICAgICAvLyBJRSAxMFxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoY29tcGF0aWJsZTsgTVNJRSAxMC4wOyBXaW5kb3dzIE5UIDYuMjsgVHJpZGVudC82LjApJztcbiAgICAgICAgLy8gSUUgMTFcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4zOyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbyc7XG4gICAgICAgIC8vIEVkZ2VcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsXG4gICAgICAgIC8vIGxpa2UgR2Vja28pIENocm9tZS8zOS4wLjIxNzEuNzEgU2FmYXJpLzUzNy4zNiBFZGdlLzEyLjAnO1xuICAgICAgICAvLyBpT1MgU2FmYXJpOiBEaXNhYmxlIGZvciB1c2VycyBydW5uaW5nIGlPUyB2ZXJzaW9uIDwgMTAuXG4gICAgICAgICAgICAgICAgcmV0dXJuICEodC5pbmRleE9mKFwiTVNJRSBcIikgPiAwIHx8IHQuaW5kZXhPZihcIlRyaWRlbnQvXCIpID4gMCB8fCB0LmluZGV4T2YoXCJFZGdlL1wiKSA+IDAgfHwgbiB8fCBpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBiYWNraW5nIEluZGV4ZWREQiBzdG9yZSBpcyB0aGUgTm9kZSBJbmRleGVkREJTaGltXG4gICAgICogKHNlZSBodHRwczovL2dpdGh1Yi5jb20vYXhlbWNsaW9uL0luZGV4ZWREQlNoaW0pLlxuICAgICAqLyAgICBzdGF0aWMgUHQoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgcHJvY2VzcyAmJiBcIllFU1wiID09PSAobnVsbCA9PT0gKHQgPSBwcm9jZXNzLmVudikgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5WdCk7XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmcm9tIGEgdHJhbnNhY3Rpb24uICovICAgIHN0YXRpYyBTdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKGUpO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgLyoqIFBhcnNlIFVzZXIgQWdlbnQgdG8gZGV0ZXJtaW5lIGlPUyB2ZXJzaW9uLiBSZXR1cm5zIC0xIGlmIG5vdCBmb3VuZC4gKi9cbiAgICBzdGF0aWMgUnQodCkge1xuICAgICAgICBjb25zdCBlID0gdC5tYXRjaCgvaSg/OnBob25lfHBhZHxwb2QpIG9zIChbXFxkX10rKS9pKSwgbiA9IGUgPyBlWzFdLnNwbGl0KFwiX1wiKS5zbGljZSgwLCAyKS5qb2luKFwiLlwiKSA6IFwiLTFcIjtcbiAgICAgICAgcmV0dXJuIE51bWJlcihuKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBBbmRyb2lkIHZlcnNpb24uIFJldHVybnMgLTEgaWYgbm90IGZvdW5kLiAqL1xuICAgIHN0YXRpYyB2dCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lm1hdGNoKC9BbmRyb2lkIChbXFxkLl0rKS9pKSwgbiA9IGUgPyBlWzFdLnNwbGl0KFwiLlwiKS5zbGljZSgwLCAyKS5qb2luKFwiLlwiKSA6IFwiLTFcIjtcbiAgICAgICAgcmV0dXJuIE51bWJlcihuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3BlbnMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZSwgY3JlYXRpbmcgb3IgdXBncmFkaW5nIGl0IGlmIG5lY2Vzc2FyeS5cbiAgICAgKi8gICAgYXN5bmMgRHQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYiB8fCAoJChcIlNpbXBsZURiXCIsIFwiT3BlbmluZyBkYXRhYmFzZTpcIiwgdGhpcy5uYW1lKSwgdGhpcy5kYiA9IGF3YWl0IG5ldyBQcm9taXNlKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBJbnZlc3RpZ2F0ZSBicm93c2VyIGNvbXBhdGliaWxpdHkuXG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSW5kZXhlZERCX0FQSS9Vc2luZ19JbmRleGVkREJcbiAgICAgICAgICAgIC8vIHN1Z2dlc3RzIElFOSBhbmQgb2xkZXIgV2ViS2l0IGJyb3dzZXJzIGhhbmRsZSB1cGdyYWRlXG4gICAgICAgICAgICAvLyBkaWZmZXJlbnRseS4gVGhleSBleHBlY3Qgc2V0VmVyc2lvbiwgYXMgZGVzY3JpYmVkIGhlcmU6XG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSURCVmVyc2lvbkNoYW5nZVJlcXVlc3Qvc2V0VmVyc2lvblxuICAgICAgICAgICAgY29uc3QgcyA9IGluZGV4ZWREQi5vcGVuKHRoaXMubmFtZSwgdGhpcy52ZXJzaW9uKTtcbiAgICAgICAgICAgIHMub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICBlKG4pO1xuICAgICAgICAgICAgfSwgcy5vbmJsb2NrZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbihuZXcgenModCwgXCJDYW5ub3QgdXBncmFkZSBJbmRleGVkREIgc2NoZW1hIHdoaWxlIGFub3RoZXIgdGFiIGlzIG9wZW4uIENsb3NlIGFsbCB0YWJzIHRoYXQgYWNjZXNzIEZpcmVzdG9yZSBhbmQgcmVsb2FkIHRoaXMgcGFnZSB0byBwcm9jZWVkLlwiKSk7XG4gICAgICAgICAgICB9LCBzLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS50YXJnZXQuZXJyb3I7XG4gICAgICAgICAgICAgICAgXCJWZXJzaW9uRXJyb3JcIiA9PT0gcy5uYW1lID8gbihuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiQSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBGaXJlc3RvcmUgU0RLIHdhcyBwcmV2aW91c2x5IHVzZWQgYW5kIHNvIHRoZSBwZXJzaXN0ZWQgZGF0YSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSB2ZXJzaW9uIG9mIHRoZSBTREsgeW91IGFyZSBub3cgdXNpbmcuIFRoZSBTREsgd2lsbCBvcGVyYXRlIHdpdGggcGVyc2lzdGVuY2UgZGlzYWJsZWQuIElmIHlvdSBuZWVkIHBlcnNpc3RlbmNlLCBwbGVhc2UgcmUtdXBncmFkZSB0byBhIG5ld2VyIHZlcnNpb24gb2YgdGhlIFNESyBvciBlbHNlIGNsZWFyIHRoZSBwZXJzaXN0ZWQgSW5kZXhlZERCIGRhdGEgZm9yIHlvdXIgYXBwIHRvIHN0YXJ0IGZyZXNoLlwiKSkgOiBcIkludmFsaWRTdGF0ZUVycm9yXCIgPT09IHMubmFtZSA/IG4obmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlVuYWJsZSB0byBvcGVuIGFuIEluZGV4ZWREQiBjb25uZWN0aW9uLiBUaGlzIGNvdWxkIGJlIGR1ZSB0byBydW5uaW5nIGluIGEgcHJpdmF0ZSBicm93c2luZyBzZXNzaW9uIG9uIGEgYnJvd3NlciB3aG9zZSBwcml2YXRlIGJyb3dzaW5nIHNlc3Npb25zIGRvIG5vdCBzdXBwb3J0IEluZGV4ZWREQjogXCIgKyBzKSkgOiBuKG5ldyB6cyh0LCBzKSk7XG4gICAgICAgICAgICB9LCBzLm9udXBncmFkZW5lZWRlZCA9IHQgPT4ge1xuICAgICAgICAgICAgICAgICQoXCJTaW1wbGVEYlwiLCAnRGF0YWJhc2UgXCInICsgdGhpcy5uYW1lICsgJ1wiIHJlcXVpcmVzIHVwZ3JhZGUgZnJvbSB2ZXJzaW9uOicsIHQub2xkVmVyc2lvbik7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICB0aGlzLkF0LkN0KGUsIHMudHJhbnNhY3Rpb24sIHQub2xkVmVyc2lvbiwgdGhpcy52ZXJzaW9uKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICQoXCJTaW1wbGVEYlwiLCBcIkRhdGFiYXNlIHVwZ3JhZGUgdG8gdmVyc2lvbiBcIiArIHRoaXMudmVyc2lvbiArIFwiIGNvbXBsZXRlXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKSksIHRoaXMuTnQgJiYgKHRoaXMuZGIub252ZXJzaW9uY2hhbmdlID0gdCA9PiB0aGlzLk50KHQpKSwgdGhpcy5kYjtcbiAgICB9XG4gICAgeHQodCkge1xuICAgICAgICB0aGlzLk50ID0gdCwgdGhpcy5kYiAmJiAodGhpcy5kYi5vbnZlcnNpb25jaGFuZ2UgPSBlID0+IHQoZSkpO1xuICAgIH1cbiAgICBhc3luYyBydW5UcmFuc2FjdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBcInJlYWRvbmx5XCIgPT09IGU7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgKytyO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRiID0gYXdhaXQgdGhpcy5EdCh0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gUXMub3Blbih0aGlzLmRiLCB0LCBpID8gXCJyZWFkb25seVwiIDogXCJyZWFkd3JpdGVcIiwgbiksIHIgPSBzKGUpLmNhdGNoKCh0ID0+IChcbiAgICAgICAgICAgICAgICAvLyBBYm9ydCB0aGUgdHJhbnNhY3Rpb24gaWYgdGhlcmUgd2FzIGFuIGVycm9yLlxuICAgICAgICAgICAgICAgIGUuYWJvcnQodCksIGpzLnJlamVjdCh0KSkpKS50b1Byb21pc2UoKTtcbiAgICAgICAgICAgICAgICAvLyBBcyBub3RlZCBhYm92ZSwgZXJyb3JzIGFyZSBwcm9wYWdhdGVkIGJ5IGFib3J0aW5nIHRoZSB0cmFuc2FjdGlvbi4gU29cbiAgICAgICAgICAgICAgICAvLyB3ZSBzd2FsbG93IGFueSBlcnJvciBoZXJlIHRvIGF2b2lkIHRoZSBicm93c2VyIGxvZ2dpbmcgaXQgYXMgdW5oYW5kbGVkLlxuICAgICAgICAgICAgICAgIHJldHVybiByLmNhdGNoKCgoKSA9PiB7fSkpLCBcbiAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgdHJhbnNhY3Rpb24gdG8gY29tcGxldGUgKGkuZS4gSW5kZXhlZERiJ3Mgb25zdWNjZXNzIGV2ZW50IHRvXG4gICAgICAgICAgICAgICAgLy8gZmlyZSksIGJ1dCBzdGlsbCByZXR1cm4gdGhlIG9yaWdpbmFsIHRyYW5zYWN0aW9uRm5SZXN1bHQgYmFjayB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyBjYWxsZXIuXG4gICAgICAgICAgICAgICAgYXdhaXQgZS5JdCwgcjtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHNjaG1pZHQtc2ViYXN0aWFuKTogV2UgY291bGQgcHJvYmFibHkgYmUgc21hcnRlciBhYm91dCB0aGlzIGFuZFxuICAgICAgICAgICAgICAgIC8vIG5vdCByZXRyeSBleGNlcHRpb25zIHRoYXQgYXJlIGxpa2VseSB1bnJlY292ZXJhYmxlIChzdWNoIGFzIHF1b3RhXG4gICAgICAgICAgICAgICAgLy8gZXhjZWVkZWQgZXJyb3JzKS5cbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBjYW5ub3QgdXNlIGFuIGluc3RhbmNlb2YgY2hlY2sgZm9yIEZpcmVzdG9yZUV4Y2VwdGlvbiwgc2luY2UgdGhlXG4gICAgICAgICAgICAgICAgLy8gZXhjZXB0aW9uIGlzIHdyYXBwZWQgaW4gYSBnZW5lcmljIGVycm9yIGJ5IG91ciBhc3luYy9hd2FpdCBoYW5kbGluZy5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gXCJGaXJlYmFzZUVycm9yXCIgIT09IHQubmFtZSAmJiByIDwgMztcbiAgICAgICAgICAgICAgICBpZiAoJChcIlNpbXBsZURiXCIsIFwiVHJhbnNhY3Rpb24gZmFpbGVkIHdpdGggZXJyb3I6XCIsIHQubWVzc2FnZSwgXCJSZXRyeWluZzpcIiwgZSksIFxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKSwgIWUpIHJldHVybiBQcm9taXNlLnJlamVjdCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5kYiAmJiB0aGlzLmRiLmNsb3NlKCksIHRoaXMuZGIgPSB2b2lkIDA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgY29udHJvbGxlciBmb3IgaXRlcmF0aW5nIG92ZXIgYSBrZXkgcmFuZ2Ugb3IgaW5kZXguIEl0IGFsbG93cyBhbiBpdGVyYXRlXG4gKiBjYWxsYmFjayB0byBkZWxldGUgdGhlIGN1cnJlbnRseS1yZWZlcmVuY2VkIG9iamVjdCwgb3IganVtcCB0byBhIG5ldyBrZXlcbiAqIHdpdGhpbiB0aGUga2V5IHJhbmdlIG9yIGluZGV4LlxuICovIGNsYXNzIEdzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua3QgPSB0LCB0aGlzLiR0ID0gITEsIHRoaXMuT3QgPSBudWxsO1xuICAgIH1cbiAgICBnZXQgaXNEb25lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kdDtcbiAgICB9XG4gICAgZ2V0IEZ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5PdDtcbiAgICB9XG4gICAgc2V0IGN1cnNvcih0KSB7XG4gICAgICAgIHRoaXMua3QgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc3RvcCBpdGVyYXRpb24gYXQgYW55IHBvaW50LlxuICAgICAqLyAgICBkb25lKCkge1xuICAgICAgICB0aGlzLiR0ID0gITA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB0byBza2lwIHRvIHRoYXQgbmV4dCBrZXksIHdoaWNoIGNvdWxkIGJlXG4gICAgICogYW4gaW5kZXggb3IgYSBwcmltYXJ5IGtleS5cbiAgICAgKi8gICAgTXQodCkge1xuICAgICAgICB0aGlzLk90ID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlIHRoZSBjdXJyZW50IGN1cnNvciB2YWx1ZSBmcm9tIHRoZSBvYmplY3Qgc3RvcmUuXG4gICAgICpcbiAgICAgKiBOT1RFOiBZb3UgQ0FOTk9UIGRvIHRoaXMgd2l0aCBhIGtleXNPbmx5IHF1ZXJ5LlxuICAgICAqLyAgICBkZWxldGUoKSB7XG4gICAgICAgIHJldHVybiBZcyh0aGlzLmt0LmRlbGV0ZSgpKTtcbiAgICB9XG59XG5cbi8qKiBBbiBlcnJvciB0aGF0IHdyYXBzIGV4Y2VwdGlvbnMgdGhhdCB0aHJvd24gZHVyaW5nIEluZGV4ZWREQiBleGVjdXRpb24uICovIGNsYXNzIHpzIGV4dGVuZHMgaiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcihLLlVOQVZBSUxBQkxFLCBgSW5kZXhlZERCIHRyYW5zYWN0aW9uICcke3R9JyBmYWlsZWQ6ICR7ZX1gKSwgdGhpcy5uYW1lID0gXCJJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yXCI7XG4gICAgfVxufVxuXG4vKiogVmVyaWZpZXMgd2hldGhlciBgZWAgaXMgYW4gSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvci4gKi8gZnVuY3Rpb24gSHModCkge1xuICAgIC8vIFVzZSBuYW1lIGVxdWFsaXR5LCBhcyBpbnN0YW5jZW9mIGNoZWNrcyBvbiBlcnJvcnMgZG9uJ3Qgd29yayB3aXRoIGVycm9yc1xuICAgIC8vIHRoYXQgd3JhcCBvdGhlciBlcnJvcnMuXG4gICAgcmV0dXJuIFwiSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvclwiID09PSB0Lm5hbWU7XG59XG5cbi8qKlxuICogQSB3cmFwcGVyIGFyb3VuZCBhbiBJREJPYmplY3RTdG9yZSBwcm92aWRpbmcgYW4gQVBJIHRoYXQ6XG4gKlxuICogMSkgSGFzIGdlbmVyaWMgS2V5VHlwZSAvIFZhbHVlVHlwZSBwYXJhbWV0ZXJzIHRvIHByb3ZpZGUgc3Ryb25nbHktdHlwZWRcbiAqIG1ldGhvZHMgZm9yIGFjdGluZyBhZ2FpbnN0IHRoZSBvYmplY3Qgc3RvcmUuXG4gKiAyKSBEZWFscyB3aXRoIEluZGV4ZWREQidzIG9uc3VjY2VzcyAvIG9uZXJyb3IgZXZlbnQgY2FsbGJhY2tzLCBtYWtpbmcgZXZlcnlcbiAqIG1ldGhvZCByZXR1cm4gYSBQZXJzaXN0ZW5jZVByb21pc2UgaW5zdGVhZC5cbiAqIDMpIFByb3ZpZGVzIGEgaGlnaGVyLWxldmVsIEFQSSB0byBhdm9pZCBuZWVkaW5nIHRvIGRvIGV4Y2Vzc2l2ZSB3cmFwcGluZyBvZlxuICogaW50ZXJtZWRpYXRlIEluZGV4ZWREQiB0eXBlcyAoSURCQ3Vyc29yV2l0aFZhbHVlLCBldGMuKVxuICovIGNsYXNzIEpzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuc3RvcmUgPSB0O1xuICAgIH1cbiAgICBwdXQodCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZSA/ICgkKFwiU2ltcGxlRGJcIiwgXCJQVVRcIiwgdGhpcy5zdG9yZS5uYW1lLCB0LCBlKSwgbiA9IHRoaXMuc3RvcmUucHV0KGUsIHQpKSA6ICgkKFwiU2ltcGxlRGJcIiwgXCJQVVRcIiwgdGhpcy5zdG9yZS5uYW1lLCBcIjxhdXRvLWtleT5cIiwgdCksIFxuICAgICAgICBuID0gdGhpcy5zdG9yZS5wdXQodCkpLCBZcyhuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyB2YWx1ZSBpbnRvIGFuIE9iamVjdCBTdG9yZSBhbmQgcmV0dXJucyB0aGUgbmV3IGtleS4gU2ltaWxhciB0b1xuICAgICAqIEluZGV4ZWREYidzIGBhZGQoKWAsIHRoaXMgbWV0aG9kIHdpbGwgZmFpbCBvbiBwcmltYXJ5IGtleSBjb2xsaXNpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIG9iamVjdCB0byB3cml0ZS5cbiAgICAgKiBAcmV0dXJucyBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBhZGQuXG4gICAgICovICAgIGFkZCh0KSB7XG4gICAgICAgICQoXCJTaW1wbGVEYlwiLCBcIkFERFwiLCB0aGlzLnN0b3JlLm5hbWUsIHQsIHQpO1xuICAgICAgICByZXR1cm4gWXModGhpcy5zdG9yZS5hZGQodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBmcm9tIHRoZSBzcGVjaWZpZWQgc3RvcmUsIG9yIG51bGxcbiAgICAgKiBpZiBubyBvYmplY3QgZXhpc3RzIHdpdGggdGhlIHNwZWNpZmllZCBrZXkuXG4gICAgICpcbiAgICAgKiBAa2V5IFRoZSBrZXkgb2YgdGhlIG9iamVjdCB0byBnZXQuXG4gICAgICogQHJldHVybnMgVGhlIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IG9yIG51bGwgaWYgbm8gb2JqZWN0IGV4aXN0cy5cbiAgICAgKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgLy8gV2UncmUgZG9pbmcgYW4gdW5zYWZlIGNhc3QgdG8gVmFsdWVUeXBlLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gWXModGhpcy5zdG9yZS5nZXQodCkpLm5leHQoKGUgPT4gKFxuICAgICAgICAvLyBOb3JtYWxpemUgbm9uZXhpc3RlbmNlIHRvIG51bGwuXG4gICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IG51bGwpLCAkKFwiU2ltcGxlRGJcIiwgXCJHRVRcIiwgdGhpcy5zdG9yZS5uYW1lLCB0LCBlKSwgZSkpKTtcbiAgICB9XG4gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgJChcIlNpbXBsZURiXCIsIFwiREVMRVRFXCIsIHRoaXMuc3RvcmUubmFtZSwgdCk7XG4gICAgICAgIHJldHVybiBZcyh0aGlzLnN0b3JlLmRlbGV0ZSh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHdlIGV2ZXIgbmVlZCBtb3JlIG9mIHRoZSBjb3VudCB2YXJpYW50cywgd2UgY2FuIGFkZCBvdmVybG9hZHMuIEZvciBub3csXG4gICAgICogYWxsIHdlIG5lZWQgaXMgdG8gY291bnQgZXZlcnl0aGluZyBpbiBhIHN0b3JlLlxuICAgICAqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIHN0b3JlLlxuICAgICAqLyAgICBjb3VudCgpIHtcbiAgICAgICAgJChcIlNpbXBsZURiXCIsIFwiQ09VTlRcIiwgdGhpcy5zdG9yZS5uYW1lKTtcbiAgICAgICAgcmV0dXJuIFlzKHRoaXMuc3RvcmUuY291bnQoKSk7XG4gICAgfVxuICAgIEx0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuY3Vyc29yKHRoaXMub3B0aW9ucyh0LCBlKSksIHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuQnQobiwgKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBzLnB1c2goZSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgfVxuICAgIFV0KHQsIGUpIHtcbiAgICAgICAgJChcIlNpbXBsZURiXCIsIFwiREVMRVRFIEFMTFwiLCB0aGlzLnN0b3JlLm5hbWUpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vcHRpb25zKHQsIGUpO1xuICAgICAgICBuLnF0ID0gITE7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmN1cnNvcihuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuQnQocywgKCh0LCBlLCBuKSA9PiBuLmRlbGV0ZSgpKSk7XG4gICAgfVxuICAgIEt0KHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGUgPyBuID0gdCA6IChuID0ge30sIGUgPSB0KTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuY3Vyc29yKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5CdChzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhIHN0b3JlLCBidXQgd2FpdHMgZm9yIHRoZSBnaXZlbiBjYWxsYmFjayB0byBjb21wbGV0ZSBmb3JcbiAgICAgKiBlYWNoIGVudHJ5IGJlZm9yZSBpdGVyYXRpbmcgdGhlIG5leHQgZW50cnkuIFRoaXMgYWxsb3dzIHRoZSBjYWxsYmFjayB0byBkb1xuICAgICAqIGFzeW5jaHJvbm91cyB3b3JrIHRvIGRldGVybWluZSBpZiB0aGlzIGl0ZXJhdGlvbiBzaG91bGQgY29udGludWUuXG4gICAgICpcbiAgICAgKiBUaGUgcHJvdmlkZWQgY2FsbGJhY2sgc2hvdWxkIHJldHVybiBgdHJ1ZWAgdG8gY29udGludWUgaXRlcmF0aW9uLCBhbmRcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi8gICAganQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jdXJzb3Ioe30pO1xuICAgICAgICByZXR1cm4gbmV3IGpzKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgZS5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IFpzKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgICAgICBzKGUpO1xuICAgICAgICAgICAgfSwgZS5vbnN1Y2Nlc3MgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIHMgPyB0KHMucHJpbWFyeUtleSwgcy52YWx1ZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHQgPyBzLmNvbnRpbnVlKCkgOiBuKCk7XG4gICAgICAgICAgICAgICAgfSkpIDogbigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBCdCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyBqcygoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIHQub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGkodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgfSwgdC5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmICghaSkgcmV0dXJuIHZvaWQgcygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgR3MoaSksIG8gPSBlKGkucHJpbWFyeUtleSwgaS52YWx1ZSwgcik7XG4gICAgICAgICAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBqcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5jYXRjaCgodCA9PiAoci5kb25lKCksIGpzLnJlamVjdCh0KSkpKTtcbiAgICAgICAgICAgICAgICAgICAgbi5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByLmlzRG9uZSA/IHMoKSA6IG51bGwgPT09IHIuRnQgPyBpLmNvbnRpbnVlKCkgOiBpLmNvbnRpbnVlKHIuRnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGpzLndhaXRGb3IobikpKTtcbiAgICB9XG4gICAgb3B0aW9ucyh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0ICYmIChcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gbiA9IHQgOiBlID0gdCksIHtcbiAgICAgICAgICAgIGluZGV4OiBuLFxuICAgICAgICAgICAgcmFuZ2U6IGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY3Vyc29yKHQpIHtcbiAgICAgICAgbGV0IGUgPSBcIm5leHRcIjtcbiAgICAgICAgaWYgKHQucmV2ZXJzZSAmJiAoZSA9IFwicHJldlwiKSwgdC5pbmRleCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuc3RvcmUuaW5kZXgodC5pbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gdC5xdCA/IG4ub3BlbktleUN1cnNvcih0LnJhbmdlLCBlKSA6IG4ub3BlbkN1cnNvcih0LnJhbmdlLCBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yZS5vcGVuQ3Vyc29yKHQucmFuZ2UsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBXcmFwcyBhbiBJREJSZXF1ZXN0IGluIGEgUGVyc2lzdGVuY2VQcm9taXNlLCB1c2luZyB0aGUgb25zdWNjZXNzIC8gb25lcnJvclxuICogaGFuZGxlcnMgdG8gcmVzb2x2ZSAvIHJlamVjdCB0aGUgUGVyc2lzdGVuY2VQcm9taXNlIGFzIGFwcHJvcHJpYXRlLlxuICovIGZ1bmN0aW9uIFlzKHQpIHtcbiAgICByZXR1cm4gbmV3IGpzKCgoZSwgbikgPT4ge1xuICAgICAgICB0Lm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgIGUobik7XG4gICAgICAgIH0sIHQub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IFpzKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIG4oZSk7XG4gICAgICAgIH07XG4gICAgfSkpO1xufVxuXG4vLyBHdWFyZCBzbyB3ZSBvbmx5IHJlcG9ydCB0aGUgZXJyb3Igb25jZS5cbmxldCBYcyA9ICExO1xuXG5mdW5jdGlvbiBacyh0KSB7XG4gICAgY29uc3QgZSA9IFdzLlJ0KGdldFVBKCkpO1xuICAgIGlmIChlID49IDEyLjIgJiYgZSA8IDEzKSB7XG4gICAgICAgIGNvbnN0IGUgPSBcIkFuIGludGVybmFsIGVycm9yIHdhcyBlbmNvdW50ZXJlZCBpbiB0aGUgSW5kZXhlZCBEYXRhYmFzZSBzZXJ2ZXJcIjtcbiAgICAgICAgaWYgKHQubWVzc2FnZS5pbmRleE9mKGUpID49IDApIHtcbiAgICAgICAgICAgIC8vIFdyYXAgZXJyb3IgaW4gYSBtb3JlIGRlc2NyaXB0aXZlIG9uZS5cbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgaihcImludGVybmFsXCIsIGBJT1NfSU5ERVhFRERCX0JVRzE6IEluZGV4ZWREYiBoYXMgdGhyb3duICcke2V9Jy4gVGhpcyBpcyBsaWtlbHkgZHVlIHRvIGFuIHVuYXZvaWRhYmxlIGJ1ZyBpbiBpT1MuIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvNTY0OTYyOTYvMTEwOTE1IGZvciBkZXRhaWxzIGFuZCBhIHBvdGVudGlhbCB3b3JrYXJvdW5kLmApO1xuICAgICAgICAgICAgcmV0dXJuIFhzIHx8IChYcyA9ICEwLCBcbiAgICAgICAgICAgIC8vIFRocm93IGEgZ2xvYmFsIGV4Y2VwdGlvbiBvdXRzaWRlIG9mIHRoaXMgcHJvbWlzZSBjaGFpbiwgZm9yIHRoZSB1c2VyIHRvXG4gICAgICAgICAgICAvLyBwb3RlbnRpYWxseSBjYXRjaC5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICAgICAgfSksIDApKSwgdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgdGkgZXh0ZW5kcyBLcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLlF0ID0gdCwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZWkodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIHJldHVybiBXcy5TdChuLlF0LCBlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBiYXRjaCBvZiBtdXRhdGlvbnMgdGhhdCB3aWxsIGJlIHNlbnQgYXMgb25lIHVuaXQgdG8gdGhlIGJhY2tlbmQuXG4gKi8gY2xhc3Mgbmkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBiYXRjaElkIC0gVGhlIHVuaXF1ZSBJRCBvZiB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIFRoZSBvcmlnaW5hbCB3cml0ZSB0aW1lIG9mIHRoaXMgbXV0YXRpb24uXG4gICAgICogQHBhcmFtIGJhc2VNdXRhdGlvbnMgLSBNdXRhdGlvbnMgdGhhdCBhcmUgdXNlZCB0byBwb3B1bGF0ZSB0aGUgYmFzZVxuICAgICAqIHZhbHVlcyB3aGVuIHRoaXMgbXV0YXRpb24gaXMgYXBwbGllZCBsb2NhbGx5LiBUaGlzIGNhbiBiZSB1c2VkIHRvIGxvY2FsbHlcbiAgICAgKiBvdmVyd3JpdGUgdmFsdWVzIHRoYXQgYXJlIHBlcnNpc3RlZCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLiBCYXNlXG4gICAgICogbXV0YXRpb25zIGFyZSBuZXZlciBzZW50IHRvIHRoZSBiYWNrZW5kLlxuICAgICAqIEBwYXJhbSBtdXRhdGlvbnMgLSBUaGUgdXNlci1wcm92aWRlZCBtdXRhdGlvbnMgaW4gdGhpcyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgKiBVc2VyLXByb3ZpZGVkIG11dGF0aW9ucyBhcmUgYXBwbGllZCBib3RoIGxvY2FsbHkgYW5kIHJlbW90ZWx5IG9uIHRoZVxuICAgICAqIGJhY2tlbmQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLmJhdGNoSWQgPSB0LCB0aGlzLmxvY2FsV3JpdGVUaW1lID0gZSwgdGhpcy5iYXNlTXV0YXRpb25zID0gbiwgdGhpcy5tdXRhdGlvbnMgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGFsbCB0aGUgbXV0YXRpb25zIGluIHRoaXMgTXV0YXRpb25CYXRjaCB0byB0aGUgc3BlY2lmaWVkIGRvY3VtZW50XG4gICAgICogdG8gY29tcHV0ZSB0aGUgc3RhdGUgb2YgdGhlIHJlbW90ZSBkb2N1bWVudFxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cbiAgICAgKiBAcGFyYW0gYmF0Y2hSZXN1bHQgLSBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBNdXRhdGlvbkJhdGNoIHRvIHRoZVxuICAgICAqIGJhY2tlbmQuXG4gICAgICovICAgIGFwcGx5VG9SZW1vdGVEb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm11dGF0aW9uUmVzdWx0cztcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLm11dGF0aW9ucy5sZW5ndGg7IGUrKykge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMubXV0YXRpb25zW2VdO1xuICAgICAgICAgICAgaWYgKHMua2V5LmlzRXF1YWwodC5rZXkpKSB7XG4gICAgICAgICAgICAgICAgSmUocywgdCwgbltlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudCBnaXZlbiBhbGwgdGhlIG11dGF0aW9ucyBpbiB0aGlzXG4gICAgICogYmF0Y2guXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxWaWV3KHQpIHtcbiAgICAgICAgLy8gRmlyc3QsIGFwcGx5IHRoZSBiYXNlIHN0YXRlLiBUaGlzIGFsbG93cyB1cyB0byBhcHBseSBub24taWRlbXBvdGVudFxuICAgICAgICAvLyB0cmFuc2Zvcm0gYWdhaW5zdCBhIGNvbnNpc3RlbnQgc2V0IG9mIHZhbHVlcy5cbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuYmFzZU11dGF0aW9ucykgZS5rZXkuaXNFcXVhbCh0LmtleSkgJiYgWWUoZSwgdCwgdGhpcy5sb2NhbFdyaXRlVGltZSk7XG4gICAgICAgIC8vIFNlY29uZCwgYXBwbHkgYWxsIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLm11dGF0aW9ucykgZS5rZXkuaXNFcXVhbCh0LmtleSkgJiYgWWUoZSwgdCwgdGhpcy5sb2NhbFdyaXRlVGltZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IGZvciBhbGwgcHJvdmlkZWQgZG9jdW1lbnRzIGdpdmVuIHRoZSBtdXRhdGlvbnMgaW5cbiAgICAgKiB0aGlzIGJhdGNoLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxEb2N1bWVudFNldCh0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBPKG5eMikuIElmIHdlIGFwcGx5IHRoZSBtdXRhdGlvbnNcbiAgICAgICAgLy8gZGlyZWN0bHkgKGFzIGRvbmUgaW4gYGFwcGx5VG9Mb2NhbFZpZXcoKWApLCB3ZSBjYW4gcmVkdWNlIHRoZSBjb21wbGV4aXR5XG4gICAgICAgIC8vIHRvIE8obikuXG4gICAgICAgIHRoaXMubXV0YXRpb25zLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZ2V0KGUua2V5KSwgcyA9IG47XG4gICAgICAgICAgICAvLyBUT0RPKG11dGFibGVkb2N1bWVudHMpOiBUaGlzIG1ldGhvZCBzaG91bGQgdGFrZSBhIE11dGFibGVEb2N1bWVudE1hcFxuICAgICAgICAgICAgLy8gYW5kIHdlIHNob3VsZCByZW1vdmUgdGhpcyBjYXN0LlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVRvTG9jYWxWaWV3KHMpLCBuLmlzVmFsaWREb2N1bWVudCgpIHx8IHMuY29udmVydFRvTm9Eb2N1bWVudChydC5taW4oKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAga2V5cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25zLnJlZHVjZSgoKHQsIGUpID0+IHQuYWRkKGUua2V5KSksIFBuKCkpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2hJZCA9PT0gdC5iYXRjaElkICYmIG50KHRoaXMubXV0YXRpb25zLCB0Lm11dGF0aW9ucywgKCh0LCBlKSA9PiBaZSh0LCBlKSkpICYmIG50KHRoaXMuYmFzZU11dGF0aW9ucywgdC5iYXNlTXV0YXRpb25zLCAoKHQsIGUpID0+IFplKHQsIGUpKSk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIG11dGF0aW9uIGJhdGNoIHRvIHRoZSBiYWNrZW5kLiAqLyBjbGFzcyBzaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgXG4gICAgLyoqXG4gICAgICogQSBwcmUtY29tcHV0ZWQgbWFwcGluZyBmcm9tIGVhY2ggbXV0YXRlZCBkb2N1bWVudCB0byB0aGUgcmVzdWx0aW5nXG4gICAgICogdmVyc2lvbi5cbiAgICAgKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuYmF0Y2ggPSB0LCB0aGlzLmNvbW1pdFZlcnNpb24gPSBlLCB0aGlzLm11dGF0aW9uUmVzdWx0cyA9IG4sIHRoaXMuZG9jVmVyc2lvbnMgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE11dGF0aW9uQmF0Y2hSZXN1bHQgZm9yIHRoZSBnaXZlbiBiYXRjaCBhbmQgcmVzdWx0cy4gVGhlcmVcbiAgICAgKiBtdXN0IGJlIG9uZSByZXN1bHQgZm9yIGVhY2ggbXV0YXRpb24gaW4gdGhlIGJhdGNoLiBUaGlzIHN0YXRpYyBmYWN0b3J5XG4gICAgICogY2FjaGVzIGEgZG9jdW1lbnQ9Jmd0O3ZlcnNpb24gbWFwcGluZyAoZG9jVmVyc2lvbnMpLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbSh0LCBlLCBuKSB7XG4gICAgICAgIEIodC5tdXRhdGlvbnMubGVuZ3RoID09PSBuLmxlbmd0aCk7XG4gICAgICAgIGxldCBzID0gUm4oKTtcbiAgICAgICAgY29uc3QgaSA9IHQubXV0YXRpb25zO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGkubGVuZ3RoOyB0KyspIHMgPSBzLmluc2VydChpW3RdLmtleSwgblt0XS52ZXJzaW9uKTtcbiAgICAgICAgcmV0dXJuIG5ldyBzaSh0LCBlLCBuLCBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltbXV0YWJsZSBzZXQgb2YgbWV0YWRhdGEgdGhhdCB0aGUgbG9jYWwgc3RvcmUgdHJhY2tzIGZvciBlYWNoIHRhcmdldC5cbiAqLyBjbGFzcyBpaSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0YXJnZXQgYmVpbmcgbGlzdGVuZWQgdG8uICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldCBJRCB0byB3aGljaCB0aGUgdGFyZ2V0IGNvcnJlc3BvbmRzOyBBc3NpZ25lZCBieSB0aGVcbiAgICAgKiBMb2NhbFN0b3JlIGZvciB1c2VyIGxpc3RlbnMgYW5kIGJ5IHRoZSBTeW5jRW5naW5lIGZvciBsaW1ibyB3YXRjaGVzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgcHVycG9zZSBvZiB0aGUgdGFyZ2V0LiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXF1ZW5jZSBudW1iZXIgb2YgdGhlIGxhc3QgdHJhbnNhY3Rpb24gZHVyaW5nIHdoaWNoIHRoaXMgdGFyZ2V0IGRhdGFcbiAgICAgKiB3YXMgbW9kaWZpZWQuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqIFRoZSBsYXRlc3Qgc25hcHNob3QgdmVyc2lvbiBzZWVuIGZvciB0aGlzIHRhcmdldC4gKi9cbiAgICBpID0gcnQubWluKClcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBzbmFwc2hvdCB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBhc3NvY2lhdGVkIHZpZXdcbiAgICAgKiBjb250YWluZWQgbm8gbGltYm8gZG9jdW1lbnRzLlxuICAgICAqLyAsIHIgPSBydC5taW4oKVxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovICwgbyA9IF90LkVNUFRZX0JZVEVfU1RSSU5HKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdCwgdGhpcy50YXJnZXRJZCA9IGUsIHRoaXMucHVycG9zZSA9IG4sIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSBzLCB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IGksIFxuICAgICAgICB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSByLCB0aGlzLnJlc3VtZVRva2VuID0gbztcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIHNlcXVlbmNlIG51bWJlci4gKi8gICAgd2l0aFNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBpaSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0LCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0aGlzLnJlc3VtZVRva2VuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgcmVzdW1lIHRva2VuIGFuZFxuICAgICAqIHNuYXBzaG90IHZlcnNpb24uXG4gICAgICovICAgIHdpdGhSZXN1bWVUb2tlbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgaWkodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgZSwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgbGFzdCBsaW1ibyBmcmVlXG4gICAgICogc25hcHNob3QgdmVyc2lvbiBudW1iZXIuXG4gICAgICovICAgIHdpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBpaSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdCwgdGhpcy5yZXN1bWVUb2tlbik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFNlcmlhbGl6ZXIgZm9yIHZhbHVlcyBzdG9yZWQgaW4gdGhlIExvY2FsU3RvcmUuICovIGNsYXNzIHJpIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuV3QgPSB0O1xuICAgIH1cbn1cblxuLyoqIERlY29kZXMgYSByZW1vdGUgZG9jdW1lbnQgZnJvbSBzdG9yYWdlIGxvY2FsbHkgdG8gYSBEb2N1bWVudC4gKi8gZnVuY3Rpb24gb2kodCwgZSkge1xuICAgIGlmIChlLmRvY3VtZW50KSByZXR1cm4gdHModC5XdCwgZS5kb2N1bWVudCwgISFlLmhhc0NvbW1pdHRlZE11dGF0aW9ucyk7XG4gICAgaWYgKGUubm9Eb2N1bWVudCkge1xuICAgICAgICBjb25zdCB0ID0gUHQuZnJvbVNlZ21lbnRzKGUubm9Eb2N1bWVudC5wYXRoKSwgbiA9IGxpKGUubm9Eb2N1bWVudC5yZWFkVGltZSksIHMgPSBLdC5uZXdOb0RvY3VtZW50KHQsIG4pO1xuICAgICAgICByZXR1cm4gZS5oYXNDb21taXR0ZWRNdXRhdGlvbnMgPyBzLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIDogcztcbiAgICB9XG4gICAgaWYgKGUudW5rbm93bkRvY3VtZW50KSB7XG4gICAgICAgIGNvbnN0IHQgPSBQdC5mcm9tU2VnbWVudHMoZS51bmtub3duRG9jdW1lbnQucGF0aCksIG4gPSBsaShlLnVua25vd25Eb2N1bWVudC52ZXJzaW9uKTtcbiAgICAgICAgcmV0dXJuIEt0Lm5ld1Vua25vd25Eb2N1bWVudCh0LCBuKTtcbiAgICB9XG4gICAgcmV0dXJuIEwoKTtcbn1cblxuLyoqIEVuY29kZXMgYSBkb2N1bWVudCBmb3Igc3RvcmFnZSBsb2NhbGx5LiAqLyBmdW5jdGlvbiBjaSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IGFpKG4pLCBpID0gZS5rZXkucGF0aC5wb3BMYXN0KCkudG9BcnJheSgpO1xuICAgIGlmIChlLmlzRm91bmREb2N1bWVudCgpKSB7XG4gICAgICAgIGNvbnN0IG4gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IEduKHQsIGUua2V5KSxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IGUuZGF0YS52YWx1ZS5tYXBWYWx1ZS5maWVsZHMsXG4gICAgICAgICAgICAgICAgdXBkYXRlVGltZTogVW4odCwgZS52ZXJzaW9uLnRvVGltZXN0YW1wKCkpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQuV3QsIGUpLCByID0gZS5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XG4gICAgICAgIHJldHVybiBuZXcgTnMoXG4gICAgICAgIC8qIHVua25vd25Eb2N1bWVudD0gKi8gbnVsbCwgXG4gICAgICAgIC8qIG5vRG9jdW1lbnQ9ICovIG51bGwsIG4sIHIsIHMsIGkpO1xuICAgIH1cbiAgICBpZiAoZS5pc05vRG9jdW1lbnQoKSkge1xuICAgICAgICBjb25zdCB0ID0gZS5rZXkucGF0aC50b0FycmF5KCksIG4gPSBoaShlLnZlcnNpb24pLCByID0gZS5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XG4gICAgICAgIHJldHVybiBuZXcgTnMoXG4gICAgICAgIC8qIHVua25vd25Eb2N1bWVudD0gKi8gbnVsbCwgbmV3IERzKHQsIG4pLCBcbiAgICAgICAgLyogZG9jdW1lbnQ9ICovIG51bGwsIHIsIHMsIGkpO1xuICAgIH1cbiAgICBpZiAoZS5pc1Vua25vd25Eb2N1bWVudCgpKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmtleS5wYXRoLnRvQXJyYXkoKSwgbiA9IGhpKGUudmVyc2lvbik7XG4gICAgICAgIHJldHVybiBuZXcgTnMobmV3IENzKHQsIG4pLCBcbiAgICAgICAgLyogbm9Eb2N1bWVudD0gKi8gbnVsbCwgXG4gICAgICAgIC8qIGRvY3VtZW50PSAqLyBudWxsLCBcbiAgICAgICAgLyogaGFzQ29tbWl0dGVkTXV0YXRpb25zPSAqLyAhMCwgcywgaSk7XG4gICAgfVxuICAgIHJldHVybiBMKCk7XG59XG5cbmZ1bmN0aW9uIGFpKHQpIHtcbiAgICBjb25zdCBlID0gdC50b1RpbWVzdGFtcCgpO1xuICAgIHJldHVybiBbIGUuc2Vjb25kcywgZS5uYW5vc2Vjb25kcyBdO1xufVxuXG5mdW5jdGlvbiB1aSh0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBpdCh0WzBdLCB0WzFdKTtcbiAgICByZXR1cm4gcnQuZnJvbVRpbWVzdGFtcChlKTtcbn1cblxuZnVuY3Rpb24gaGkodCkge1xuICAgIGNvbnN0IGUgPSB0LnRvVGltZXN0YW1wKCk7XG4gICAgcmV0dXJuIG5ldyBicyhlLnNlY29uZHMsIGUubmFub3NlY29uZHMpO1xufVxuXG5mdW5jdGlvbiBsaSh0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBpdCh0LnNlY29uZHMsIHQubmFub3NlY29uZHMpO1xuICAgIHJldHVybiBydC5mcm9tVGltZXN0YW1wKGUpO1xufVxuXG4vKiogRW5jb2RlcyBhIGJhdGNoIG9mIG11dGF0aW9ucyBpbnRvIGEgRGJNdXRhdGlvbkJhdGNoIGZvciBsb2NhbCBzdG9yYWdlLiAqL1xuLyoqIERlY29kZXMgYSBEYk11dGF0aW9uQmF0Y2ggaW50byBhIE11dGF0aW9uQmF0Y2ggKi9cbmZ1bmN0aW9uIGZpKHQsIGUpIHtcbiAgICBjb25zdCBuID0gKGUuYmFzZU11dGF0aW9ucyB8fCBbXSkubWFwKChlID0+IGlzKHQuV3QsIGUpKSk7XG4gICAgLy8gU3F1YXNoIG9sZCB0cmFuc2Zvcm0gbXV0YXRpb25zIGludG8gZXhpc3RpbmcgcGF0Y2ggb3Igc2V0IG11dGF0aW9ucy5cbiAgICAvLyBUaGUgcmVwbGFjZW1lbnQgb2YgcmVwcmVzZW50aW5nIGB0cmFuc2Zvcm1zYCB3aXRoIGB1cGRhdGVfdHJhbnNmb3Jtc2BcbiAgICAvLyBvbiB0aGUgU0RLIG1lYW5zIHRoYXQgb2xkIGB0cmFuc2Zvcm1gIG11dGF0aW9ucyBzdG9yZWQgaW4gSW5kZXhlZERCIG5lZWRcbiAgICAvLyB0byBiZSB1cGRhdGVkIHRvIGB1cGRhdGVfdHJhbnNmb3Jtc2AuXG4gICAgLy8gVE9ETyhiLzE3NDYwODM3NCk6IFJlbW92ZSB0aGlzIGNvZGUgb25jZSB3ZSBwZXJmb3JtIGEgc2NoZW1hIG1pZ3JhdGlvbi5cbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBlLm11dGF0aW9ucy5sZW5ndGggLSAxOyArK3QpIHtcbiAgICAgICAgY29uc3QgbiA9IGUubXV0YXRpb25zW3RdO1xuICAgICAgICBpZiAodCArIDEgPCBlLm11dGF0aW9ucy5sZW5ndGggJiYgdm9pZCAwICE9PSBlLm11dGF0aW9uc1t0ICsgMV0udHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5tdXRhdGlvbnNbdCArIDFdO1xuICAgICAgICAgICAgbi51cGRhdGVUcmFuc2Zvcm1zID0gcy50cmFuc2Zvcm0uZmllbGRUcmFuc2Zvcm1zLCBlLm11dGF0aW9ucy5zcGxpY2UodCArIDEsIDEpLCBcbiAgICAgICAgICAgICsrdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzID0gZS5tdXRhdGlvbnMubWFwKChlID0+IGlzKHQuV3QsIGUpKSksIGkgPSBpdC5mcm9tTWlsbGlzKGUubG9jYWxXcml0ZVRpbWVNcyk7XG4gICAgcmV0dXJuIG5ldyBuaShlLmJhdGNoSWQsIGksIG4sIHMpO1xufVxuXG4vKiogRGVjb2RlcyBhIERiVGFyZ2V0IGludG8gVGFyZ2V0RGF0YSAqLyBmdW5jdGlvbiBkaSh0KSB7XG4gICAgY29uc3QgZSA9IGxpKHQucmVhZFRpbWUpLCBuID0gdm9pZCAwICE9PSB0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPyBsaSh0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pIDogcnQubWluKCk7XG4gICAgbGV0IHM7XG4gICAgdmFyIGk7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gdC5xdWVyeS5kb2N1bWVudHMgPyAoQigxID09PSAoaSA9IHQucXVlcnkpLmRvY3VtZW50cy5sZW5ndGgpLCBcbiAgICBzID0gRWUod2UoSm4oaS5kb2N1bWVudHNbMF0pKSkpIDogcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIEVlKGFzKHQpKTtcbiAgICB9KHQucXVlcnkpLCBuZXcgaWkocywgdC50YXJnZXRJZCwgMCAvKiBMaXN0ZW4gKi8gLCB0Lmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciwgZSwgbiwgX3QuZnJvbUJhc2U2NFN0cmluZyh0LnJlc3VtZVRva2VuKSk7XG59XG5cbi8qKiBFbmNvZGVzIFRhcmdldERhdGEgaW50byBhIERiVGFyZ2V0IGZvciBzdG9yYWdlIGxvY2FsbHkuICovIGZ1bmN0aW9uIHdpKHQsIGUpIHtcbiAgICBjb25zdCBuID0gaGkoZS5zbmFwc2hvdFZlcnNpb24pLCBzID0gaGkoZS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKTtcbiAgICBsZXQgaTtcbiAgICBpID0gSHQoZS50YXJnZXQpID8gb3ModC5XdCwgZS50YXJnZXQpIDogY3ModC5XdCwgZS50YXJnZXQpO1xuICAgIC8vIFdlIGNhbid0IHN0b3JlIHRoZSByZXN1bWVUb2tlbiBhcyBhIEJ5dGVTdHJpbmcgaW4gSW5kZXhlZERiLCBzbyB3ZVxuICAgIC8vIGNvbnZlcnQgaXQgdG8gYSBiYXNlNjQgc3RyaW5nIGZvciBzdG9yYWdlLlxuICAgICAgICBjb25zdCByID0gZS5yZXN1bWVUb2tlbi50b0Jhc2U2NCgpO1xuICAgIC8vIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciBpcyBhbHdheXMgMCB1bnRpbCB3ZSBkbyByZWFsIEdDLlxuICAgICAgICByZXR1cm4gbmV3IGtzKGUudGFyZ2V0SWQsIFd0KGUudGFyZ2V0KSwgbiwgciwgZS5zZXF1ZW5jZU51bWJlciwgcywgaSk7XG59XG5cbi8qKlxuICogQSBoZWxwZXIgZnVuY3Rpb24gZm9yIGZpZ3VyaW5nIG91dCB3aGF0IGtpbmQgb2YgcXVlcnkgaGFzIGJlZW4gc3RvcmVkLlxuICovXG4vKipcbiAqIEVuY29kZXMgYSBgQnVuZGxlZFF1ZXJ5YCBmcm9tIGJ1bmRsZSBwcm90byB0byBhIFF1ZXJ5IG9iamVjdC5cbiAqXG4gKiBUaGlzIHJlY29uc3RydWN0cyB0aGUgb3JpZ2luYWwgcXVlcnkgdXNlZCB0byBidWlsZCB0aGUgYnVuZGxlIGJlaW5nIGxvYWRlZCxcbiAqIGluY2x1ZGluZyBmZWF0dXJlcyBleGlzdHMgb25seSBpbiBTREtzIChmb3IgZXhhbXBsZTogbGltaXQtdG8tbGFzdCkuXG4gKi9cbmZ1bmN0aW9uIF9pKHQpIHtcbiAgICBjb25zdCBlID0gYXMoe1xuICAgICAgICBwYXJlbnQ6IHQucGFyZW50LFxuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHQuc3RydWN0dXJlZFF1ZXJ5XG4gICAgfSk7XG4gICAgcmV0dXJuIFwiTEFTVFwiID09PSB0LmxpbWl0VHlwZSA/IEllKGUsIGUubGltaXQsIFwiTFwiIC8qIExhc3QgKi8pIDogZTtcbn1cblxuLyoqIEVuY29kZXMgYSBOYW1lZFF1ZXJ5IHByb3RvIG9iamVjdCB0byBhIE5hbWVkUXVlcnkgbW9kZWwgb2JqZWN0LiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIG1pIHtcbiAgICBnZXRCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBnaSh0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogKGUgPSB0KS5idW5kbGVJZCxcbiAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBsaShlLmNyZWF0ZVRpbWUpLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IGUudmVyc2lvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgRGJCdW5kbGUgdG8gYSBCdW5kbGVNZXRhZGF0YSBvYmplY3QuICovXG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgQnVuZGxlTWV0YWRhdGEgdG8gYSBEYkJ1bmRsZS4gKi8gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGdpKHQpLnB1dCh7XG4gICAgICAgICAgICBidW5kbGVJZDogKG4gPSBlKS5pZCxcbiAgICAgICAgICAgIGNyZWF0ZVRpbWU6IGhpKGpuKG4uY3JlYXRlVGltZSkpLFxuICAgICAgICAgICAgdmVyc2lvbjogbi52ZXJzaW9uXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgLyoqIEVuY29kZXMgYSBEYk5hbWVkUXVlcnkgdG8gYSBOYW1lZFF1ZXJ5LiAqLyAgICB9XG4gICAgZ2V0TmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB5aSh0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAoZSA9IHQpLm5hbWUsXG4gICAgICAgICAgICAgICAgcXVlcnk6IF9pKGUuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogbGkoZS5yZWFkVGltZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgTmFtZWRRdWVyeSBmcm9tIGEgYnVuZGxlIHByb3RvIHRvIGEgRGJOYW1lZFF1ZXJ5LiAqLyAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB5aSh0KS5wdXQoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0Lm5hbWUsXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IGhpKGpuKHQucmVhZFRpbWUpKSxcbiAgICAgICAgICAgICAgICBidW5kbGVkUXVlcnk6IHQuYnVuZGxlZFF1ZXJ5XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBidW5kbGVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBnaSh0KSB7XG4gICAgcmV0dXJuIGVpKHQsIExzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG5hbWVkUXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24geWkodCkge1xuICAgIHJldHVybiBlaSh0LCBCcy5zdG9yZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKi8gY2xhc3MgcGkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLkd0ID0gbmV3IFRpO1xuICAgIH1cbiAgICBhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkd0LmFkZChlKSwganMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRDb2xsZWN0aW9uUGFyZW50cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBqcy5yZXNvbHZlKHRoaXMuR3QuZ2V0RW50cmllcyhlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIHRoZSBjb2xsZWN0aW9uLXBhcmVudCBpbmRleCBleHBvc2VkIGJ5IE1lbW9yeUluZGV4TWFuYWdlci5cbiAqIEFsc28gdXNlZCBmb3IgaW4tbWVtb3J5IGNhY2hpbmcgYnkgSW5kZXhlZERiSW5kZXhNYW5hZ2VyIGFuZCBpbml0aWFsIGluZGV4IHBvcHVsYXRpb25cbiAqIGluIGluZGV4ZWRkYl9zY2hlbWEudHNcbiAqLyBjbGFzcyBUaSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaW5kZXggPSB7fTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBmYWxzZSBpZiB0aGUgZW50cnkgYWxyZWFkeSBleGlzdGVkLlxuICAgIGFkZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lmxhc3RTZWdtZW50KCksIG4gPSB0LnBvcExhc3QoKSwgcyA9IHRoaXMuaW5kZXhbZV0gfHwgbmV3IGduKGh0LmNvbXBhcmF0b3IpLCBpID0gIXMuaGFzKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleFtlXSA9IHMuYWRkKG4pLCBpO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5sYXN0U2VnbWVudCgpLCBuID0gdC5wb3BMYXN0KCksIHMgPSB0aGlzLmluZGV4W2VdO1xuICAgICAgICByZXR1cm4gcyAmJiBzLmhhcyhuKTtcbiAgICB9XG4gICAgZ2V0RW50cmllcyh0KSB7XG4gICAgICAgIHJldHVybiAodGhpcy5pbmRleFt0XSB8fCBuZXcgZ24oaHQuY29tcGFyYXRvcikpLnRvQXJyYXkoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcGVyc2lzdGVkIGltcGxlbWVudGF0aW9uIG9mIEluZGV4TWFuYWdlci5cbiAqLyBjbGFzcyBFaSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBpbi1tZW1vcnkgY29weSBvZiB0aGUgaW5kZXggZW50cmllcyB3ZSd2ZSBhbHJlYWR5IHdyaXR0ZW4gc2luY2UgdGhlIFNES1xuICAgICAgICAgKiBsYXVuY2hlZC4gVXNlZCB0byBhdm9pZCByZS13cml0aW5nIHRoZSBzYW1lIGVudHJ5IHJlcGVhdGVkbHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaXMgKk5PVCogYSBjb21wbGV0ZSBjYWNoZSBvZiB3aGF0J3MgaW4gcGVyc2lzdGVuY2UgYW5kIHNvIGNhbiBuZXZlciBiZSB1c2VkIHRvXG4gICAgICAgICAqIHNhdGlzZnkgcmVhZHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnp0ID0gbmV3IFRpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IGVudHJ5IHRvIHRoZSBjb2xsZWN0aW9uIHBhcmVudCBpbmRleC5cbiAgICAgKlxuICAgICAqIFJlcGVhdGVkIGNhbGxzIGZvciB0aGUgc2FtZSBjb2xsZWN0aW9uUGF0aCBzaG91bGQgYmUgYXZvaWRlZCB3aXRoaW4gYVxuICAgICAqIHRyYW5zYWN0aW9uIGFzIEluZGV4ZWREYkluZGV4TWFuYWdlciBvbmx5IGNhY2hlcyB3cml0ZXMgb25jZSBhIHRyYW5zYWN0aW9uXG4gICAgICogaGFzIGJlZW4gY29tbWl0dGVkLlxuICAgICAqLyAgICBhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSB7XG4gICAgICAgIGlmICghdGhpcy56dC5oYXMoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmxhc3RTZWdtZW50KCksIHMgPSBlLnBvcExhc3QoKTtcbiAgICAgICAgICAgIHQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgY29sbGVjdGlvbiB0byB0aGUgaW4gbWVtb3J5IGNhY2hlIG9ubHkgaWYgdGhlIHRyYW5zYWN0aW9uIHdhc1xuICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3NmdWxseSBjb21taXR0ZWQuXG4gICAgICAgICAgICAgICAgdGhpcy56dC5hZGQoZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBpID0ge1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogbixcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IEVzKHMpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIElpKHQpLnB1dChpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ganMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRDb2xsZWN0aW9uUGFyZW50cyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgZSwgXCJcIiBdLCBbIHN0KGUpLCBcIlwiIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIElpKHQpLkx0KHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIHQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNvbGxlY3Rpb25JZCBndWFyZCBzaG91bGRuJ3QgYmUgbmVjZXNzYXJ5IChhbmQgaXNuJ3QgYXMgbG9uZ1xuICAgICAgICAgICAgICAgIC8vIGFzIHdlJ3JlIHJ1bm5pbmcgaW4gYSByZWFsIGJyb3dzZXIpLCBidXQgdGhlcmUncyBhIGJ1ZyBpblxuICAgICAgICAgICAgICAgIC8vIGluZGV4ZWRkYnNoaW0gdGhhdCBicmVha3Mgb3VyIHJhbmdlIGluIG91ciB0ZXN0cyBydW5uaW5nIGluIG5vZGU6XG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltL2lzc3Vlcy8zMzRcbiAgICAgICAgICAgICAgICBpZiAocy5jb2xsZWN0aW9uSWQgIT09IGUpIGJyZWFrO1xuICAgICAgICAgICAgICAgIG4ucHVzaChScyhzLnBhcmVudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjb2xsZWN0aW9uUGFyZW50c1xuICogZG9jdW1lbnQgc3RvcmUuXG4gKi8gZnVuY3Rpb24gSWkodCkge1xuICAgIHJldHVybiBlaSh0LCBGcy5zdG9yZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IEFpID0ge1xuICAgIGRpZFJ1bjogITEsXG4gICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiAwLFxuICAgIHRhcmdldHNSZW1vdmVkOiAwLFxuICAgIGRvY3VtZW50c1JlbW92ZWQ6IDBcbn07XG5cbmNsYXNzIFJpIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBXaGVuIHdlIGF0dGVtcHQgdG8gY29sbGVjdCwgd2Ugd2lsbCBvbmx5IGRvIHNvIGlmIHRoZSBjYWNoZSBzaXplIGlzIGdyZWF0ZXIgdGhhbiB0aGlzXG4gICAgLy8gdGhyZXNob2xkLiBQYXNzaW5nIGBDT0xMRUNUSU9OX0RJU0FCTEVEYCBoZXJlIHdpbGwgY2F1c2UgY29sbGVjdGlvbiB0byBhbHdheXMgYmUgc2tpcHBlZC5cbiAgICB0LCBcbiAgICAvLyBUaGUgcGVyY2VudGFnZSBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2Ugd2lsbCBhdHRlbXB0IHRvIGNvbGxlY3RcbiAgICBlLCBcbiAgICAvLyBBIGNhcCBvbiB0aGUgdG90YWwgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgdGhhdCB3aWxsIGJlIGNvbGxlY3RlZC4gVGhpcyBwcmV2ZW50c1xuICAgIC8vIHVzIGZyb20gY29sbGVjdGluZyBhIGh1Z2UgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgaWYgdGhlIGNhY2hlIGhhcyBncm93biB2ZXJ5IGxhcmdlLlxuICAgIG4pIHtcbiAgICAgICAgdGhpcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID0gdCwgdGhpcy5wZXJjZW50aWxlVG9Db2xsZWN0ID0gZSwgdGhpcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID0gbjtcbiAgICB9XG4gICAgc3RhdGljIHdpdGhDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gbmV3IFJpKHQsIFJpLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFLCBSaS5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGVsZXRlIGEgbXV0YXRpb24gYmF0Y2ggYW5kIHRoZSBhc3NvY2lhdGVkIGRvY3VtZW50IG11dGF0aW9ucy5cbiAqIEByZXR1cm5zIEEgUGVyc2lzdGVuY2VQcm9taXNlIG9mIHRoZSBkb2N1bWVudCBtdXRhdGlvbnMgdGhhdCB3ZXJlIHJlbW92ZWQuXG4gKi9cbmZ1bmN0aW9uIGJpKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gdC5zdG9yZShWcy5zdG9yZSksIGkgPSB0LnN0b3JlKFNzLnN0b3JlKSwgciA9IFtdLCBvID0gSURCS2V5UmFuZ2Uub25seShuLmJhdGNoSWQpO1xuICAgIGxldCBjID0gMDtcbiAgICBjb25zdCBhID0gcy5LdCh7XG4gICAgICAgIHJhbmdlOiBvXG4gICAgfSwgKCh0LCBlLCBuKSA9PiAoYysrLCBuLmRlbGV0ZSgpKSkpO1xuICAgIHIucHVzaChhLm5leHQoKCgpID0+IHtcbiAgICAgICAgQigxID09PSBjKTtcbiAgICB9KSkpO1xuICAgIGNvbnN0IHUgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHQgb2Ygbi5tdXRhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcyA9IFNzLmtleShlLCB0LmtleS5wYXRoLCBuLmJhdGNoSWQpO1xuICAgICAgICByLnB1c2goaS5kZWxldGUocykpLCB1LnB1c2godC5rZXkpO1xuICAgIH1cbiAgICByZXR1cm4ganMud2FpdEZvcihyKS5uZXh0KCgoKSA9PiB1KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcHByb3hpbWF0ZSBzaXplIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuXG4gKi8gZnVuY3Rpb24gUGkodCkge1xuICAgIGlmICghdCkgcmV0dXJuIDA7XG4gICAgbGV0IGU7XG4gICAgaWYgKHQuZG9jdW1lbnQpIGUgPSB0LmRvY3VtZW50OyBlbHNlIGlmICh0LnVua25vd25Eb2N1bWVudCkgZSA9IHQudW5rbm93bkRvY3VtZW50OyBlbHNlIHtcbiAgICAgICAgaWYgKCF0Lm5vRG9jdW1lbnQpIHRocm93IEwoKTtcbiAgICAgICAgZSA9IHQubm9Eb2N1bWVudDtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpLmxlbmd0aDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBBIG11dGF0aW9uIHF1ZXVlIGZvciBhIHNwZWNpZmljIHVzZXIsIGJhY2tlZCBieSBJbmRleGVkREIuICovIFJpLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFID0gMTAsIFxuUmkuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUID0gMWUzLCBSaS5ERUZBVUxUID0gbmV3IFJpKDQxOTQzMDQwLCBSaS5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSwgUmkuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKSwgXG5SaS5ESVNBQkxFRCA9IG5ldyBSaSgtMSwgMCwgMCk7XG5cbmNsYXNzIHZpIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbm9ybWFsaXplZCB1c2VySWQgKGUuZy4gbnVsbCBVSUQgPT4gXCJcIiB1c2VySWQpIHVzZWQgdG8gc3RvcmUgL1xuICAgICAqIHJldHJpZXZlIG11dGF0aW9ucy5cbiAgICAgKi9cbiAgICB0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMudXNlcklkID0gdCwgdGhpcy5OID0gZSwgdGhpcy5IdCA9IG4sIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBzLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhY2hlcyB0aGUgZG9jdW1lbnQga2V5cyBmb3IgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzLiBJZiB0aGUgbXV0YXRpb25cbiAgICAgICAgICogaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIEluZGV4ZWREYiwgdGhlIGNhY2hlZCB2YWx1ZSBtYXkgY29udGludWUgdG9cbiAgICAgICAgICogYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgYmF0Y2gncyBkb2N1bWVudCBrZXlzLiBUbyByZW1vdmUgYSBjYWNoZWQgdmFsdWVcbiAgICAgICAgICogbG9jYWxseSwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBzaG91bGQgYmUgaW52b2tlZCBlaXRoZXIgZGlyZWN0bHlcbiAgICAgICAgICogb3IgdGhyb3VnaCBgcmVtb3ZlTXV0YXRpb25CYXRjaGVzKClgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaXRoIG11bHRpLXRhYiwgd2hlbiB0aGUgcHJpbWFyeSBjbGllbnQgYWNrbm93bGVkZ2VzIG9yIHJlamVjdHMgYSBtdXRhdGlvbixcbiAgICAgICAgICogdGhpcyBjYWNoZSBpcyB1c2VkIGJ5IHNlY29uZGFyeSBjbGllbnRzIHRvIGludmFsaWRhdGUgdGhlIGxvY2FsXG4gICAgICAgICAqIHZpZXcgb2YgdGhlIGRvY3VtZW50cyB0aGF0IHdlcmUgcHJldmlvdXNseSBhZmZlY3RlZCBieSB0aGUgbXV0YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgICAgICB0aGlzLkp0ID0ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgbXV0YXRpb24gcXVldWUgZm9yIHRoZSBnaXZlbiB1c2VyLlxuICAgICAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIgZm9yIHdoaWNoIHRvIGNyZWF0ZSBhIG11dGF0aW9uIHF1ZXVlLlxuICAgICAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIHNlcmlhbGl6ZXIgdG8gdXNlIHdoZW4gcGVyc2lzdGluZyB0byBJbmRleGVkRGIuXG4gICAgICovICAgIHN0YXRpYyBZdCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFRPRE8obWNnKTogRmlndXJlIG91dCB3aGF0IGNvbnN0cmFpbnRzIHRoZXJlIGFyZSBvbiB1c2VySURzXG4gICAgICAgIC8vIEluIHBhcnRpY3VsYXIsIGFyZSB0aGVyZSBhbnkgcmVzZXJ2ZWQgY2hhcmFjdGVycz8gYXJlIGVtcHR5IGlkcyBhbGxvd2VkP1xuICAgICAgICAvLyBGb3IgdGhlIG1vbWVudCBzdG9yZSB0aGVzZSB0b2dldGhlciBpbiB0aGUgc2FtZSBtdXRhdGlvbnMgdGFibGUgYXNzdW1pbmdcbiAgICAgICAgLy8gdGhhdCBlbXB0eSB1c2VySURzIGFyZW4ndCBhbGxvd2VkLlxuICAgICAgICBCKFwiXCIgIT09IHQudWlkKTtcbiAgICAgICAgY29uc3QgaSA9IHQuaXNBdXRoZW50aWNhdGVkKCkgPyB0LnVpZCA6IFwiXCI7XG4gICAgICAgIHJldHVybiBuZXcgdmkoaSwgZSwgbiwgcyk7XG4gICAgfVxuICAgIGNoZWNrRW1wdHkodCkge1xuICAgICAgICBsZXQgZSA9ICEwO1xuICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIF0sIFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgcmV0dXJuIFNpKHQpLkt0KHtcbiAgICAgICAgICAgIGluZGV4OiBWcy51c2VyTXV0YXRpb25zSW5kZXgsXG4gICAgICAgICAgICByYW5nZTogblxuICAgICAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgICAgIGUgPSAhMSwgcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlKSk7XG4gICAgfVxuICAgIGFkZE11dGF0aW9uQmF0Y2godCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gRGkodCksIHIgPSBTaSh0KTtcbiAgICAgICAgLy8gVGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBpbiBDaHJvbWUgKGFuZCBGaXJlZm94KSBkb2VzIG5vdCBoYW5kbGVcbiAgICAgICAgLy8gY29tcG91bmQgaW5kaWNlcyB0aGF0IGluY2x1ZGUgYXV0by1nZW5lcmF0ZWQga2V5cyBjb3JyZWN0bHkuIFRvIGVuc3VyZVxuICAgICAgICAvLyB0aGF0IHRoZSBpbmRleCBlbnRyeSBpcyBhZGRlZCBjb3JyZWN0bHkgaW4gYWxsIGJyb3dzZXJzLCB3ZSBwZXJmb3JtIHR3b1xuICAgICAgICAvLyB3cml0ZXM6IFRoZSBmaXJzdCB3cml0ZSBpcyB1c2VkIHRvIHJldHJpZXZlIHRoZSBuZXh0IGF1dG8tZ2VuZXJhdGVkIEJhdGNoXG4gICAgICAgIC8vIElELCBhbmQgdGhlIHNlY29uZCB3cml0ZSBwb3B1bGF0ZXMgdGhlIGluZGV4IGFuZCBzdG9yZXMgdGhlIGFjdHVhbFxuICAgICAgICAvLyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgICAgLy8gU2VlOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD03MDE5NzJcbiAgICAgICAgLy8gV2Ugd3JpdGUgYW4gZW1wdHkgb2JqZWN0IHRvIG9idGFpbiBrZXlcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIHIuYWRkKHt9KS5uZXh0KChvID0+IHtcbiAgICAgICAgICAgIEIoXCJudW1iZXJcIiA9PSB0eXBlb2Ygbyk7XG4gICAgICAgICAgICBjb25zdCBjID0gbmV3IG5pKG8sIGUsIG4sIHMpLCBhID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuLmJhc2VNdXRhdGlvbnMubWFwKChlID0+IHNzKHQuV3QsIGUpKSksIGkgPSBuLm11dGF0aW9ucy5tYXAoKGUgPT4gc3ModC5XdCwgZSkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFZzKGUsIG4uYmF0Y2hJZCwgbi5sb2NhbFdyaXRlVGltZS50b01pbGxpcygpLCBzLCBpKTtcbiAgICAgICAgICAgIH0odGhpcy5OLCB0aGlzLnVzZXJJZCwgYyksIHUgPSBbXTtcbiAgICAgICAgICAgIGxldCBoID0gbmV3IGduKCgodCwgZSkgPT4gZXQodC5jYW5vbmljYWxTdHJpbmcoKSwgZS5jYW5vbmljYWxTdHJpbmcoKSkpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IFNzLmtleSh0aGlzLnVzZXJJZCwgdC5rZXkucGF0aCwgbyk7XG4gICAgICAgICAgICAgICAgaCA9IGguYWRkKHQua2V5LnBhdGgucG9wTGFzdCgpKSwgdS5wdXNoKHIucHV0KGEpKSwgdS5wdXNoKGkucHV0KGUsIFNzLlBMQUNFSE9MREVSKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICB1LnB1c2godGhpcy5IdC5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSk7XG4gICAgICAgICAgICB9KSksIHQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuSnRbb10gPSBjLmtleXMoKTtcbiAgICAgICAgICAgIH0pKSwganMud2FpdEZvcih1KS5uZXh0KCgoKSA9PiBjKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgbG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBTaSh0KS5nZXQoZSkubmV4dCgodCA9PiB0ID8gKEIodC51c2VySWQgPT09IHRoaXMudXNlcklkKSwgZmkodGhpcy5OLCB0KSkgOiBudWxsKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGRvY3VtZW50IGtleXMgZm9yIHRoZSBtdXRhdGlvbiBiYXRjaCB3aXRoIHRoZSBnaXZlbiBiYXRjaElkLlxuICAgICAqIEZvciBwcmltYXJ5IGNsaWVudHMsIHRoaXMgbWV0aG9kIHJldHVybnMgYG51bGxgIGFmdGVyXG4gICAgICogYHJlbW92ZU11dGF0aW9uQmF0Y2hlcygpYCBoYXMgYmVlbiBjYWxsZWQuIFNlY29uZGFyeSBjbGllbnRzIHJldHVybiBhXG4gICAgICogY2FjaGVkIHJlc3VsdCB1bnRpbCBgcmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzKClgIGlzIGludm9rZWQuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBYdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkp0W2VdID8ganMucmVzb2x2ZSh0aGlzLkp0W2VdKSA6IHRoaXMubG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQua2V5cygpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkp0W2VdID0gbiwgbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgKyAxLCBzID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChbIHRoaXMudXNlcklkLCBuIF0pO1xuICAgICAgICBsZXQgaSA9IG51bGw7XG4gICAgICAgIHJldHVybiBTaSh0KS5LdCh7XG4gICAgICAgICAgICBpbmRleDogVnMudXNlck11dGF0aW9uc0luZGV4LFxuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBlLnVzZXJJZCA9PT0gdGhpcy51c2VySWQgJiYgKEIoZS5iYXRjaElkID49IG4pLCBpID0gZmkodGhpcy5OLCBlKSksIHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IElEQktleVJhbmdlLnVwcGVyQm91bmQoWyB0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICBsZXQgbiA9IC0xO1xuICAgICAgICByZXR1cm4gU2kodCkuS3Qoe1xuICAgICAgICAgICAgaW5kZXg6IFZzLnVzZXJNdXRhdGlvbnNJbmRleCxcbiAgICAgICAgICAgIHJhbmdlOiBlLFxuICAgICAgICAgICAgcmV2ZXJzZTogITBcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBuID0gZS5iYXRjaElkLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIC0xIF0sIFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgcmV0dXJuIFNpKHQpLkx0KFZzLnVzZXJNdXRhdGlvbnNJbmRleCwgZSkubmV4dCgodCA9PiB0Lm1hcCgodCA9PiBmaSh0aGlzLk4sIHQpKSkpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkodCwgZSkge1xuICAgICAgICAvLyBTY2FuIHRoZSBkb2N1bWVudC1tdXRhdGlvbiBpbmRleCBzdGFydGluZyB3aXRoIGEgcHJlZml4IHN0YXJ0aW5nIHdpdGhcbiAgICAgICAgLy8gdGhlIGdpdmVuIGRvY3VtZW50S2V5LlxuICAgICAgICBjb25zdCBuID0gU3MucHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgZS5wYXRoKSwgcyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQobiksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIERpKHQpLkt0KHtcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgobiwgcywgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgW28sIGMsIGFdID0gbiwgdSA9IFJzKGMpO1xuICAgICAgICAgICAgLy8gT25seSBjb25zaWRlciByb3dzIG1hdGNoaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmljIGtleSBvZlxuICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxuICAgICAgICAgICAgLy8gb3JkZXIgdGVybWluYXRvcnMgYmVmb3JlIHBhdGggc2VwYXJhdG9ycywgd2UnbGwgZW5jb3VudGVyIGFsbFxuICAgICAgICAgICAgLy8gdGhlIGluZGV4IHJvd3MgZm9yIGRvY3VtZW50S2V5IGNvbnRpZ3VvdXNseS4gSW4gcGFydGljdWxhciwgYWxsXG4gICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXG4gICAgICAgICAgICAvLyBkb2N1bWVudHMgbmVzdGVkIGluIGEgc3ViY29sbGVjdGlvbiBiZW5lYXRoIGRvY3VtZW50S2V5IHNvIHdlXG4gICAgICAgICAgICAvLyBjYW4gc3RvcCBhcyBzb29uIGFzIHdlIGhpdCBhbnkgc3VjaCByb3cuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobyA9PT0gdGhpcy51c2VySWQgJiYgZS5wYXRoLmlzRXF1YWwodSkpIFxuICAgICAgICAgICAgLy8gTG9vayB1cCB0aGUgbXV0YXRpb24gYmF0Y2ggaW4gdGhlIHN0b3JlLlxuICAgICAgICAgICAgcmV0dXJuIFNpKHQpLmdldChhKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXQpIHRocm93IEwoKTtcbiAgICAgICAgICAgICAgICBCKHQudXNlcklkID09PSB0aGlzLnVzZXJJZCksIGkucHVzaChmaSh0aGlzLk4sIHQpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHIuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IG5ldyBnbihldCk7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gU3MucHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgZS5wYXRoKSwgciA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaSksIG8gPSBEaSh0KS5LdCh7XG4gICAgICAgICAgICAgICAgcmFuZ2U6IHJcbiAgICAgICAgICAgIH0sICgodCwgcywgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtyLCBvLCBjXSA9IHQsIGEgPSBScyhvKTtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGNvbnNpZGVyIHJvd3MgbWF0Y2hpbmcgZXhhY3RseSB0aGUgc3BlY2lmaWMga2V5IG9mXG4gICAgICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxuICAgICAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgaW5kZXggcm93cyBmb3IgZG9jdW1lbnRLZXkgY29udGlndW91c2x5LiBJbiBwYXJ0aWN1bGFyLCBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgICAgIC8vIGNhbiBzdG9wIGFzIHNvb24gYXMgd2UgaGl0IGFueSBzdWNoIHJvdy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9PT0gdGhpcy51c2VySWQgJiYgZS5wYXRoLmlzRXF1YWwoYSkgPyBuID0gbi5hZGQoYykgOiBpLmRvbmUoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHMucHVzaChvKTtcbiAgICAgICAgfSkpLCBqcy53YWl0Rm9yKHMpLm5leHQoKCgpID0+IHRoaXMuWnQodCwgbikpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5wYXRoLCBzID0gbi5sZW5ndGggKyAxLCBpID0gU3MucHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgbiksIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGkpO1xuICAgICAgICAvLyBDb2xsZWN0IHVwIHVuaXF1ZSBiYXRjaElEcyBlbmNvdW50ZXJlZCBkdXJpbmcgYSBzY2FuIG9mIHRoZSBpbmRleC4gVXNlIGFcbiAgICAgICAgLy8gU29ydGVkU2V0IHRvIGFjY3VtdWxhdGUgYmF0Y2ggSURzIHNvIHRoZXkgY2FuIGJlIHRyYXZlcnNlZCBpbiBvcmRlciBpbiBhXG4gICAgICAgIC8vIHNjYW4gb2YgdGhlIG1haW4gdGFibGUuXG4gICAgICAgIGxldCBvID0gbmV3IGduKGV0KTtcbiAgICAgICAgcmV0dXJuIERpKHQpLkt0KHtcbiAgICAgICAgICAgIHJhbmdlOiByXG4gICAgICAgIH0sICgodCwgZSwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgW3IsIGMsIGFdID0gdCwgdSA9IFJzKGMpO1xuICAgICAgICAgICAgciA9PT0gdGhpcy51c2VySWQgJiYgbi5pc1ByZWZpeE9mKHUpID8gXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlXG4gICAgICAgICAgICAvLyBxdWVyeSBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcydcbiAgICAgICAgICAgIC8vIGNhbid0IG1hdGNoIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgdS5sZW5ndGggPT09IHMgJiYgKG8gPSBvLmFkZChhKSkgOiBpLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMuWnQodCwgbykpKTtcbiAgICB9XG4gICAgWnQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW10sIHMgPSBbXTtcbiAgICAgICAgLy8gVE9ETyhyb2Nrd29vZCk6IEltcGxlbWVudCB0aGlzIHVzaW5nIGl0ZXJhdGUuXG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgcy5wdXNoKFNpKHQpLmdldChlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gdCkgdGhyb3cgTCgpO1xuICAgICAgICAgICAgICAgIEIodC51c2VySWQgPT09IHRoaXMudXNlcklkKSwgbi5wdXNoKGZpKHRoaXMuTiwgdCkpO1xuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfSkpLCBqcy53YWl0Rm9yKHMpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgcmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBiaSh0LlF0LCB0aGlzLnVzZXJJZCwgZSkubmV4dCgobiA9PiAodC5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRlKGUuYmF0Y2hJZCk7XG4gICAgICAgIH0pKSwganMuZm9yRWFjaChuLCAoZSA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpKSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyB0aGUgY2FjaGVkIGtleXMgZm9yIGEgbXV0YXRpb24gYmF0Y2guIFRoaXMgbWV0aG9kIHNob3VsZCBiZVxuICAgICAqIGNhbGxlZCBieSBzZWNvbmRhcnkgY2xpZW50cyBhZnRlciB0aGV5IHByb2Nlc3MgbXV0YXRpb24gdXBkYXRlcy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBkb2VzIG5vdCBoYXZlIHRvIGJlIGNhbGxlZCBmcm9tIHByaW1hcnkgY2xpZW50cyBhc1xuICAgICAqIHRoZSBjb3JyZXNwb25kaW5nIGNhY2hlIGVudHJpZXMgYXJlIGNsZWFyZWQgd2hlbiBhbiBhY2tub3dsZWRnZWQgb3JcbiAgICAgKiByZWplY3RlZCBiYXRjaCBpcyByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcbiAgICB0ZSh0KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLkp0W3RdO1xuICAgIH1cbiAgICBwZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrRW1wdHkodCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUpIHJldHVybiBqcy5yZXNvbHZlKCk7XG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhhdCB0aGVyZSBhcmUgbm8gZW50cmllcyBpbiB0aGUgZG9jdW1lbnRNdXRhdGlvbnMgaW5kZXggaWZcbiAgICAgICAgICAgIC8vIHRoZSBxdWV1ZSBpcyBlbXB0eS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKFNzLnByZWZpeEZvclVzZXIodGhpcy51c2VySWQpKSwgcyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIERpKHQpLkt0KHtcbiAgICAgICAgICAgICAgICByYW5nZTogblxuICAgICAgICAgICAgfSwgKCh0LCBlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRbMF0gPT09IHRoaXMudXNlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBScyh0WzFdKTtcbiAgICAgICAgICAgICAgICAgICAgcy5wdXNoKGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBuLmRvbmUoKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgQigwID09PSBzLmxlbmd0aCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICByZXR1cm4gVmkodCwgdGhpcy51c2VySWQsIGUpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5IChzdGF0ZSBpcyBoZWxkIGluIG1lbW9yeSBpbiBvdGhlciBjbGllbnRzKS5cbiAgICAvKiogUmV0dXJucyB0aGUgbXV0YXRpb24gcXVldWUncyBtZXRhZGF0YSBmcm9tIEluZGV4ZWREYi4gKi9cbiAgICBlZSh0KSB7XG4gICAgICAgIHJldHVybiBDaSh0KS5nZXQodGhpcy51c2VySWQpLm5leHQoKHQgPT4gdCB8fCBuZXcgdnModGhpcy51c2VySWQsIC0xLCBcbiAgICAgICAgLypsYXN0U3RyZWFtVG9rZW49Ki8gXCJcIikpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgbXV0YXRpb24gcXVldWUgZm9yIHRoZSBnaXZlbiB1c2VyIGNvbnRhaW5zIGEgcGVuZGluZ1xuICogICAgICAgICBtdXRhdGlvbiBmb3IgdGhlIGdpdmVuIGtleS5cbiAqLyBmdW5jdGlvbiBWaSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IFNzLnByZWZpeEZvclBhdGgoZSwgbi5wYXRoKSwgaSA9IHNbMV0sIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKHMpO1xuICAgIGxldCBvID0gITE7XG4gICAgcmV0dXJuIERpKHQpLkt0KHtcbiAgICAgICAgcmFuZ2U6IHIsXG4gICAgICAgIHF0OiAhMFxuICAgIH0sICgodCwgbiwgcykgPT4ge1xuICAgICAgICBjb25zdCBbciwgYywgLypiYXRjaElEKi8gYV0gPSB0O1xuICAgICAgICByID09PSBlICYmIGMgPT09IGkgJiYgKG8gPSAhMCksIHMuZG9uZSgpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiBvKSk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYW55IG11dGF0aW9uIHF1ZXVlIGNvbnRhaW5zIHRoZSBnaXZlbiBkb2N1bWVudC4gKi9cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvbnMgb2JqZWN0IHN0b3JlLlxuICovXG5mdW5jdGlvbiBTaSh0KSB7XG4gICAgcmV0dXJuIGVpKHQsIFZzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBEaSh0KSB7XG4gICAgcmV0dXJuIGVpKHQsIFNzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBDaSh0KSB7XG4gICAgcmV0dXJuIGVpKHQsIHZzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBPZmZzZXQgdG8gZW5zdXJlIG5vbi1vdmVybGFwcGluZyB0YXJnZXQgaWRzLiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIHRhcmdldCBJRHMgZm9yIHNlbmRpbmcgdGFyZ2V0cyB0byB0aGVcbiAqIHdhdGNoIHN0cmVhbS5cbiAqXG4gKiBUaGUgY2xpZW50IGNvbnN0cnVjdHMgdHdvIGdlbmVyYXRvcnMsIG9uZSBmb3IgdGhlIHRhcmdldCBjYWNoZSwgYW5kIG9uZSBmb3JcbiAqIGZvciB0aGUgc3luYyBlbmdpbmUgKHRvIGdlbmVyYXRlIGxpbWJvIGRvY3VtZW50cyB0YXJnZXRzKS4gVGhlc2VcbiAqIGdlbmVyYXRvcnMgcHJvZHVjZSBub24tb3ZlcmxhcHBpbmcgSURzIChieSB1c2luZyBldmVuIGFuZCBvZGQgSURzXG4gKiByZXNwZWN0aXZlbHkpLlxuICpcbiAqIEJ5IHNlcGFyYXRpbmcgdGhlIHRhcmdldCBJRCBzcGFjZSwgdGhlIHF1ZXJ5IGNhY2hlIGNhbiBnZW5lcmF0ZSB0YXJnZXQgSURzXG4gKiB0aGF0IHBlcnNpc3QgYWNyb3NzIGNsaWVudCByZXN0YXJ0cywgd2hpbGUgc3luYyBlbmdpbmUgY2FuIGluZGVwZW5kZW50bHlcbiAqIGdlbmVyYXRlIGluLW1lbW9yeSB0YXJnZXQgSURzIHRoYXQgYXJlIHRyYW5zaWVudCBhbmQgY2FuIGJlIHJldXNlZCBhZnRlciBhXG4gKiByZXN0YXJ0LlxuICovXG5jbGFzcyBOaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLm5lID0gdDtcbiAgICB9XG4gICAgbmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmUgKz0gMiwgdGhpcy5uZTtcbiAgICB9XG4gICAgc3RhdGljIHNlKCkge1xuICAgICAgICAvLyBUaGUgdGFyZ2V0IGNhY2hlIGdlbmVyYXRvciBtdXN0IHJldHVybiAnMicgaW4gaXRzIGZpcnN0IGNhbGwgdG8gYG5leHQoKWBcbiAgICAgICAgLy8gYXMgdGhlcmUgaXMgbm8gZGlmZmVyZW50aWF0aW9uIGluIHRoZSBwcm90b2NvbCBsYXllciBiZXR3ZWVuIGFuIHVuc2V0XG4gICAgICAgIC8vIG51bWJlciBhbmQgdGhlIG51bWJlciAnMCcuIElmIHdlIHdlcmUgdG8gc2VudCBhIHRhcmdldCB3aXRoIHRhcmdldCBJRFxuICAgICAgICAvLyAnMCcsIHRoZSBiYWNrZW5kIHdvdWxkIGNvbnNpZGVyIGl0IHVuc2V0IGFuZCByZXBsYWNlIGl0IHdpdGggaXRzIG93biBJRC5cbiAgICAgICAgcmV0dXJuIG5ldyBOaSgwKTtcbiAgICB9XG4gICAgc3RhdGljIGllKCkge1xuICAgICAgICAvLyBTeW5jIGVuZ2luZSBhc3NpZ25zIHRhcmdldCBJRHMgZm9yIGxpbWJvIGRvY3VtZW50IGRldGVjdGlvbi5cbiAgICAgICAgcmV0dXJuIG5ldyBOaSgtMSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyB4aSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gdCwgdGhpcy5OID0gZTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBXZSBkb24ndCBjYWNoZSBnbG9iYWwgbWV0YWRhdGEgZm9yIHRoZSB0YXJnZXQgY2FjaGUsIHNpbmNlXG4gICAgLy8gc29tZSBvZiBpdCAoaW4gcGFydGljdWxhciBgaGlnaGVzdFRhcmdldElkYCkgY2FuIGJlIG1vZGlmaWVkIGJ5IHNlY29uZGFyeVxuICAgIC8vIHRhYnMuIFdlIGNvdWxkIHBlcmhhcHMgYmUgbW9yZSBncmFudWxhciAoYW5kIGUuZy4gc3RpbGwgY2FjaGVcbiAgICAvLyBgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbmAgaW4gbWVtb3J5KSBidXQgZm9yIHNpbXBsaWNpdHkgd2UgY3VycmVudGx5IGdvXG4gICAgLy8gdG8gSW5kZXhlZERiIHdoZW5ldmVyIHdlIG5lZWQgdG8gcmVhZCBtZXRhZGF0YS4gV2UgY2FuIHJldmlzaXQgaWYgaXQgdHVybnNcbiAgICAvLyBvdXQgdG8gaGF2ZSBhIG1lYW5pbmdmdWwgcGVyZm9ybWFuY2UgaW1wYWN0LlxuICAgIGFsbG9jYXRlVGFyZ2V0SWQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZSh0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgTmkoZS5oaWdoZXN0VGFyZ2V0SWQpO1xuICAgICAgICAgICAgcmV0dXJuIGUuaGlnaGVzdFRhcmdldElkID0gbi5uZXh0KCksIHRoaXMub2UodCwgZSkubmV4dCgoKCkgPT4gZS5oaWdoZXN0VGFyZ2V0SWQpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmUodCkubmV4dCgodCA9PiBydC5mcm9tVGltZXN0YW1wKG5ldyBpdCh0Lmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24uc2Vjb25kcywgdC5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLm5hbm9zZWNvbmRzKSkpKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmUodCkubmV4dCgodCA9PiB0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcikpO1xuICAgIH1cbiAgICBzZXRUYXJnZXRzTWV0YWRhdGEodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5yZSh0KS5uZXh0KChzID0+IChzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUsIG4gJiYgKHMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4udG9UaW1lc3RhbXAoKSksIFxuICAgICAgICBlID4gcy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgJiYgKHMuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gZSksIHRoaXMub2UodCwgcykpKSk7XG4gICAgfVxuICAgIGFkZFRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jZSh0LCBlKS5uZXh0KCgoKSA9PiB0aGlzLnJlKHQpLm5leHQoKG4gPT4gKG4udGFyZ2V0Q291bnQgKz0gMSwgdGhpcy5hZShlLCBuKSwgXG4gICAgICAgIHRoaXMub2UodCwgbikpKSkpKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNlKHQsIGUpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZS50YXJnZXRJZCkubmV4dCgoKCkgPT4ga2kodCkuZGVsZXRlKGUudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gdGhpcy5yZSh0KSkpLm5leHQoKGUgPT4gKEIoZS50YXJnZXRDb3VudCA+IDApLCBcbiAgICAgICAgZS50YXJnZXRDb3VudCAtPSAxLCB0aGlzLm9lKHQsIGUpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEcm9wcyBhbnkgdGFyZ2V0cyB3aXRoIHNlcXVlbmNlIG51bWJlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHVwcGVyIGJvdW5kLCBleGNlcHRpbmcgdGhvc2VcbiAgICAgKiBwcmVzZW50IGluIGBhY3RpdmVUYXJnZXRJZHNgLiBEb2N1bWVudCBhc3NvY2lhdGlvbnMgZm9yIHRoZSByZW1vdmVkIHRhcmdldHMgYXJlIGFsc28gcmVtb3ZlZC5cbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgdGFyZ2V0cyByZW1vdmVkLlxuICAgICAqLyAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiBraSh0KS5LdCgoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBkaShvKTtcbiAgICAgICAgICAgIGMuc2VxdWVuY2VOdW1iZXIgPD0gZSAmJiBudWxsID09PSBuLmdldChjLnRhcmdldElkKSAmJiAocysrLCBpLnB1c2godGhpcy5yZW1vdmVUYXJnZXREYXRhKHQsIGMpKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBqcy53YWl0Rm9yKGkpKSkubmV4dCgoKCkgPT4gcykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHByb3ZpZGVkIGZ1bmN0aW9uIHdpdGggZWFjaCBgVGFyZ2V0RGF0YWAgdGhhdCB3ZSBoYXZlIGNhY2hlZC5cbiAgICAgKi8gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBraSh0KS5LdCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBkaShuKTtcbiAgICAgICAgICAgIGUocyk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcmUodCkge1xuICAgICAgICByZXR1cm4gJGkodCkuZ2V0KE9zLmtleSkubmV4dCgodCA9PiAoQihudWxsICE9PSB0KSwgdCkpKTtcbiAgICB9XG4gICAgb2UodCwgZSkge1xuICAgICAgICByZXR1cm4gJGkodCkucHV0KE9zLmtleSwgZSk7XG4gICAgfVxuICAgIGNlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGtpKHQpLnB1dCh3aSh0aGlzLk4sIGUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW4tcGxhY2UgdXBkYXRlcyB0aGUgcHJvdmlkZWQgbWV0YWRhdGEgdG8gYWNjb3VudCBmb3IgdmFsdWVzIGluIHRoZSBnaXZlblxuICAgICAqIFRhcmdldERhdGEuIFNhdmluZyBpcyBkb25lIHNlcGFyYXRlbHkuIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSB3ZXJlIGFueVxuICAgICAqIGNoYW5nZXMgdG8gdGhlIG1ldGFkYXRhLlxuICAgICAqLyAgICBhZSh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gITE7XG4gICAgICAgIHJldHVybiB0LnRhcmdldElkID4gZS5oaWdoZXN0VGFyZ2V0SWQgJiYgKGUuaGlnaGVzdFRhcmdldElkID0gdC50YXJnZXRJZCwgbiA9ICEwKSwgXG4gICAgICAgIHQuc2VxdWVuY2VOdW1iZXIgPiBlLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciAmJiAoZS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSB0LnNlcXVlbmNlTnVtYmVyLCBcbiAgICAgICAgbiA9ICEwKSwgbjtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q291bnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZSh0KS5uZXh0KCh0ID0+IHQudGFyZ2V0Q291bnQpKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIC8vIEl0ZXJhdGluZyBieSB0aGUgY2Fub25pY2FsSWQgbWF5IHlpZWxkIG1vcmUgdGhhbiBvbmUgcmVzdWx0IGJlY2F1c2VcbiAgICAgICAgLy8gY2Fub25pY2FsSWQgdmFsdWVzIGFyZSBub3QgcmVxdWlyZWQgdG8gYmUgdW5pcXVlIHBlciB0YXJnZXQuIFRoaXMgcXVlcnlcbiAgICAgICAgLy8gZGVwZW5kcyBvbiB0aGUgcXVlcnlUYXJnZXRzIGluZGV4IHRvIGJlIGVmZmljaWVudC5cbiAgICAgICAgY29uc3QgbiA9IFd0KGUpLCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBuLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgXSwgWyBuLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIGxldCBpID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIGtpKHQpLkt0KHtcbiAgICAgICAgICAgIHJhbmdlOiBzLFxuICAgICAgICAgICAgaW5kZXg6IGtzLnF1ZXJ5VGFyZ2V0c0luZGV4TmFtZVxuICAgICAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBkaShuKTtcbiAgICAgICAgICAgIC8vIEFmdGVyIGZpbmRpbmcgYSBwb3RlbnRpYWwgbWF0Y2gsIGNoZWNrIHRoYXQgdGhlIHRhcmdldCBpc1xuICAgICAgICAgICAgLy8gYWN0dWFsbHkgZXF1YWwgdG8gdGhlIHJlcXVlc3RlZCB0YXJnZXQuXG4gICAgICAgICAgICAgICAgICAgICAgICB6dChlLCByLnRhcmdldCkgJiYgKGkgPSByLCBzLmRvbmUoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGFkZE1hdGNoaW5nS2V5cyh0LCBlLCBuKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIHJldmVyc2UgaW5kZXggKGRvY3VtZW50c1RhcmdldHMpIGlzIG1haW50YWluZWQgYnlcbiAgICAgICAgLy8gSW5kZXhlZERiLlxuICAgICAgICBjb25zdCBzID0gW10sIGkgPSBPaSh0KTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gRXMoZS5wYXRoKTtcbiAgICAgICAgICAgIHMucHVzaChpLnB1dChuZXcgJHMobiwgcikpKSwgcy5wdXNoKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKHQsIG4sIGUpKTtcbiAgICAgICAgfSkpLCBqcy53YWl0Rm9yKHMpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XG4gICAgICAgIC8vIEluZGV4ZWREYi5cbiAgICAgICAgY29uc3QgcyA9IE9pKHQpO1xuICAgICAgICByZXR1cm4ganMuZm9yRWFjaChlLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gRXMoZS5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybiBqcy53YWl0Rm9yKFsgcy5kZWxldGUoWyBuLCBpIF0pLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZSh0LCBuLCBlKSBdKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBPaSh0KSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgZSBdLCBbIGUgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIG4uZGVsZXRlKHMpO1xuICAgIH1cbiAgICBnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5ib3VuZChbIGUgXSwgWyBlICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCksIHMgPSBPaSh0KTtcbiAgICAgICAgbGV0IGkgPSBQbigpO1xuICAgICAgICByZXR1cm4gcy5LdCh7XG4gICAgICAgICAgICByYW5nZTogbixcbiAgICAgICAgICAgIHF0OiAhMFxuICAgICAgICB9LCAoKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBScyh0WzFdKSwgciA9IG5ldyBQdChzKTtcbiAgICAgICAgICAgIGkgPSBpLmFkZChyKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gRXMoZS5wYXRoKSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgbiBdLCBbIHN0KG4pIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICByZXR1cm4gT2kodCkuS3Qoe1xuICAgICAgICAgICAgaW5kZXg6ICRzLmRvY3VtZW50VGFyZ2V0c0luZGV4LFxuICAgICAgICAgICAgcXQ6ICEwLFxuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKChbdCwgZV0sIG4sIHMpID0+IHtcbiAgICAgICAgICAgIC8vIEhhdmluZyBhIHNlbnRpbmVsIHJvdyBmb3IgYSBkb2N1bWVudCBkb2VzIG5vdCBjb3VudCBhcyBjb250YWluaW5nIHRoYXQgZG9jdW1lbnQ7XG4gICAgICAgICAgICAvLyBGb3IgdGhlIHRhcmdldCBjYWNoZSwgY29udGFpbmluZyB0aGUgZG9jdW1lbnQgbWVhbnMgdGhlIGRvY3VtZW50IGlzIHBhcnQgb2Ygc29tZVxuICAgICAgICAgICAgLy8gdGFyZ2V0LlxuICAgICAgICAgICAgMCAhPT0gdCAmJiAoaSsrLCBzLmRvbmUoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpID4gMCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhIFRhcmdldERhdGEgZW50cnkgYnkgdGFyZ2V0IElELlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldElkIC0gVGhlIHRhcmdldCBJRCBvZiB0aGUgVGFyZ2V0RGF0YSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgVGFyZ2V0RGF0YSBlbnRyeSwgb3IgbnVsbCBpZiB0aGUgY2FjaGUgaGFzIG5vIGVudHJ5IGZvclxuICAgICAqIHRoZSB0YXJnZXQuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBUdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBraSh0KS5nZXQoZSkubmV4dCgodCA9PiB0ID8gZGkodCkgOiBudWxsKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24ga2kodCkge1xuICAgIHJldHVybiBlaSh0LCBrcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSB0YXJnZXQgZ2xvYmFscyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gJGkodCkge1xuICAgIHJldHVybiBlaSh0LCBPcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBkb2N1bWVudCB0YXJnZXQgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIE9pKHQpIHtcbiAgICByZXR1cm4gZWkodCwgJHMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBWZXJpZmllcyB0aGUgZXJyb3IgdGhyb3duIGJ5IGEgTG9jYWxTdG9yZSBvcGVyYXRpb24uIElmIGEgTG9jYWxTdG9yZVxuICogb3BlcmF0aW9uIGZhaWxzIGJlY2F1c2UgdGhlIHByaW1hcnkgbGVhc2UgaGFzIGJlZW4gdGFrZW4gYnkgYW5vdGhlciBjbGllbnQsXG4gKiB3ZSBpZ25vcmUgdGhlIGVycm9yICh0aGUgcGVyc2lzdGVuY2UgbGF5ZXIgd2lsbCBpbW1lZGlhdGVseSBjYWxsXG4gKiBgYXBwbHlQcmltYXJ5TGVhc2VgIHRvIHByb3BhZ2F0ZSB0aGUgcHJpbWFyeSBzdGF0ZSBjaGFuZ2UpLiBBbGwgb3RoZXIgZXJyb3JzXG4gKiBhcmUgcmUtdGhyb3duLlxuICpcbiAqIEBwYXJhbSBlcnIgLSBBbiBlcnJvciByZXR1cm5lZCBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLlxuICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgd2UgcmVjb3ZlcmVkLCBvciB0aGUgb3JpZ2luYWwgZXJyb3IuXG4gKi8gYXN5bmMgZnVuY3Rpb24gRmkodCkge1xuICAgIGlmICh0LmNvZGUgIT09IEsuRkFJTEVEX1BSRUNPTkRJVElPTiB8fCB0Lm1lc3NhZ2UgIT09IHFzKSB0aHJvdyB0O1xuICAgICQoXCJMb2NhbFN0b3JlXCIsIFwiVW5leHBlY3RlZGx5IGxvc3QgcHJpbWFyeSBsZWFzZVwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gTWkoW3QsIGVdLCBbbiwgc10pIHtcbiAgICBjb25zdCBpID0gZXQodCwgbik7XG4gICAgcmV0dXJuIDAgPT09IGkgPyBldChlLCBzKSA6IGk7XG59XG5cbi8qKlxuICogVXNlZCB0byBjYWxjdWxhdGUgdGhlIG50aCBzZXF1ZW5jZSBudW1iZXIuIEtlZXBzIGEgcm9sbGluZyBidWZmZXIgb2YgdGhlXG4gKiBsb3dlc3QgbiB2YWx1ZXMgcGFzc2VkIHRvIGBhZGRFbGVtZW50YCwgYW5kIGZpbmFsbHkgcmVwb3J0cyB0aGUgbGFyZ2VzdCBvZlxuICogdGhlbSBpbiBgbWF4VmFsdWVgLlxuICovIGNsYXNzIExpIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudWUgPSB0LCB0aGlzLmJ1ZmZlciA9IG5ldyBnbihNaSksIHRoaXMuaGUgPSAwO1xuICAgIH1cbiAgICBsZSgpIHtcbiAgICAgICAgcmV0dXJuICsrdGhpcy5oZTtcbiAgICB9XG4gICAgZmUodCkge1xuICAgICAgICBjb25zdCBlID0gWyB0LCB0aGlzLmxlKCkgXTtcbiAgICAgICAgaWYgKHRoaXMuYnVmZmVyLnNpemUgPCB0aGlzLnVlKSB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmFkZChlKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5idWZmZXIubGFzdCgpO1xuICAgICAgICAgICAgTWkoZSwgdCkgPCAwICYmICh0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmRlbGV0ZSh0KS5hZGQoZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBtYXhWYWx1ZSgpIHtcbiAgICAgICAgLy8gR3VhcmFudGVlZCB0byBiZSBub24tZW1wdHkuIElmIHdlIGRlY2lkZSB3ZSBhcmUgbm90IGNvbGxlY3RpbmcgYW55XG4gICAgICAgIC8vIHNlcXVlbmNlIG51bWJlcnMsIG50aFNlcXVlbmNlTnVtYmVyIGJlbG93IHNob3J0LWNpcmN1aXRzLiBJZiB3ZSBoYXZlXG4gICAgICAgIC8vIGRlY2lkZWQgdGhhdCB3ZSBhcmUgY29sbGVjdGluZyBuIHNlcXVlbmNlIG51bWJlcnMsIGl0J3MgYmVjYXVzZSBuIGlzIHNvbWVcbiAgICAgICAgLy8gcGVyY2VudGFnZSBvZiB0aGUgZXhpc3Rpbmcgc2VxdWVuY2UgbnVtYmVycy4gVGhhdCBtZWFucyB3ZSBzaG91bGQgbmV2ZXJcbiAgICAgICAgLy8gYmUgaW4gYSBzaXR1YXRpb24gd2hlcmUgd2UgYXJlIGNvbGxlY3Rpbmcgc2VxdWVuY2UgbnVtYmVycyBidXQgZG9uJ3RcbiAgICAgICAgLy8gYWN0dWFsbHkgaGF2ZSBhbnkuXG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sYXN0KClbMF07XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIHRoZSBzY2hlZHVsaW5nIG9mIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uIEl0IGhhbmRsZXMgY2hlY2tpbmdcbiAqIHdoZXRoZXIgb3Igbm90IEdDIGlzIGVuYWJsZWQsIGFzIHdlbGwgYXMgd2hpY2ggZGVsYXkgdG8gdXNlIGJlZm9yZSB0aGUgbmV4dCBydW4uXG4gKi8gY2xhc3MgQmkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gdCwgdGhpcy5hc3luY1F1ZXVlID0gZSwgdGhpcy5kZSA9ICExLCB0aGlzLndlID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQodCkge1xuICAgICAgICAtMSAhPT0gdGhpcy5nYXJiYWdlQ29sbGVjdG9yLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkICYmIHRoaXMuX2UodCk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMud2UgJiYgKHRoaXMud2UuY2FuY2VsKCksIHRoaXMud2UgPSBudWxsKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLndlO1xuICAgIH1cbiAgICBfZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRlID8gM2U1IDogNmU0O1xuICAgICAgICAkKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgR2FyYmFnZSBjb2xsZWN0aW9uIHNjaGVkdWxlZCBpbiAke2V9bXNgKSwgdGhpcy53ZSA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShcImxydV9nYXJiYWdlX2NvbGxlY3Rpb25cIiAvKiBMcnVHYXJiYWdlQ29sbGVjdGlvbiAqLyAsIGUsIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLndlID0gbnVsbCwgdGhpcy5kZSA9ICEwO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0LmNvbGxlY3RHYXJiYWdlKHRoaXMuZ2FyYmFnZUNvbGxlY3Rvcik7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgSHModCkgPyAkKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBcIklnbm9yaW5nIEluZGV4ZWREQiBlcnJvciBkdXJpbmcgZ2FyYmFnZSBjb2xsZWN0aW9uOiBcIiwgdCkgOiBhd2FpdCBGaSh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2UodCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKiBJbXBsZW1lbnRzIHRoZSBzdGVwcyBmb3IgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbi4gKi8gY2xhc3MgVWkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5tZSA9IHQsIHRoaXMucGFyYW1zID0gZTtcbiAgICB9XG4gICAgY2FsY3VsYXRlVGFyZ2V0Q291bnQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZS5nZSh0KS5uZXh0KCh0ID0+IE1hdGguZmxvb3IoZSAvIDEwMCAqIHQpKSk7XG4gICAgfVxuICAgIG50aFNlcXVlbmNlTnVtYmVyKHQsIGUpIHtcbiAgICAgICAgaWYgKDAgPT09IGUpIHJldHVybiBqcy5yZXNvbHZlKFguVCk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgTGkoZSk7XG4gICAgICAgIHJldHVybiB0aGlzLm1lLmZvckVhY2hUYXJnZXQodCwgKHQgPT4gbi5mZSh0LnNlcXVlbmNlTnVtYmVyKSkpLm5leHQoKCgpID0+IHRoaXMubWUueWUodCwgKHQgPT4gbi5mZSh0KSkpKSkubmV4dCgoKCkgPT4gbi5tYXhWYWx1ZSkpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWUucmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZS5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBlKTtcbiAgICB9XG4gICAgY29sbGVjdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiAtMSA9PT0gdGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA/ICgkKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBcIkdhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBkaXNhYmxlZFwiKSwgXG4gICAgICAgIGpzLnJlc29sdmUoQWkpKSA6IHRoaXMuZ2V0Q2FjaGVTaXplKHQpLm5leHQoKG4gPT4gbiA8IHRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPyAoJChcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYEdhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBDYWNoZSBzaXplICR7bn0gaXMgbG93ZXIgdGhhbiB0aHJlc2hvbGQgJHt0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkfWApLCBcbiAgICAgICAgQWkpIDogdGhpcy5wZSh0LCBlKSkpO1xuICAgIH1cbiAgICBnZXRDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZS5nZXRDYWNoZVNpemUodCk7XG4gICAgfVxuICAgIHBlKHQsIGUpIHtcbiAgICAgICAgbGV0IG4sIHMsIGksIHIsIG8sIGEsIHU7XG4gICAgICAgIGNvbnN0IGggPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVUYXJnZXRDb3VudCh0LCB0aGlzLnBhcmFtcy5wZXJjZW50aWxlVG9Db2xsZWN0KS5uZXh0KChlID0+IChcbiAgICAgICAgLy8gQ2FwIGF0IHRoZSBjb25maWd1cmVkIG1heFxuICAgICAgICBlID4gdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA/ICgkKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgQ2FwcGluZyBzZXF1ZW5jZSBudW1iZXJzIHRvIGNvbGxlY3QgZG93biB0byB0aGUgbWF4aW11bSBvZiAke3RoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3R9IGZyb20gJHtlfWApLCBcbiAgICAgICAgcyA9IHRoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QpIDogcyA9IGUsIHIgPSBEYXRlLm5vdygpLCB0aGlzLm50aFNlcXVlbmNlTnVtYmVyKHQsIHMpKSkpLm5leHQoKHMgPT4gKG4gPSBzLCBcbiAgICAgICAgbyA9IERhdGUubm93KCksIHRoaXMucmVtb3ZlVGFyZ2V0cyh0LCBuLCBlKSkpKS5uZXh0KChlID0+IChpID0gZSwgYSA9IERhdGUubm93KCksIFxuICAgICAgICB0aGlzLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIG4pKSkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHUgPSBEYXRlLm5vdygpLCB4KCkgPD0gTG9nTGV2ZWwuREVCVUcpIHtcbiAgICAgICAgICAgICAgICAkKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgTFJVIEdhcmJhZ2UgQ29sbGVjdGlvblxcblxcdENvdW50ZWQgdGFyZ2V0cyBpbiAke3IgLSBofW1zXFxuXFx0RGV0ZXJtaW5lZCBsZWFzdCByZWNlbnRseSB1c2VkICR7c30gaW4gYCArIChvIC0gcikgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke2l9IHRhcmdldHMgaW4gYCArIChhIC0gbykgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke3R9IGRvY3VtZW50cyBpbiBgICsgKHUgLSBhKSArIFwibXNcXG5cIiArIGBUb3RhbCBEdXJhdGlvbjogJHt1IC0gaH1tc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgIGRpZFJ1bjogITAsXG4gICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiBzLFxuICAgICAgICAgICAgICAgIHRhcmdldHNSZW1vdmVkOiBpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50c1JlbW92ZWQ6IHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFByb3ZpZGVzIExSVSBmdW5jdGlvbmFsaXR5IGZvciBJbmRleGVkREIgcGVyc2lzdGVuY2UuICovXG5jbGFzcyBxaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmRiID0gdCwgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaSh0LCBlKTtcbiAgICAgICAgfSh0aGlzLCBlKTtcbiAgICB9XG4gICAgZ2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5UZSh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5nZXRUYXJnZXRDb3VudCh0KS5uZXh0KCh0ID0+IGUubmV4dCgoZSA9PiB0ICsgZSkpKSk7XG4gICAgfVxuICAgIFRlKHQpIHtcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy55ZSh0LCAodCA9PiB7XG4gICAgICAgICAgICBlKys7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlKSk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLmZvckVhY2hUYXJnZXQodCwgZSk7XG4gICAgfVxuICAgIHllKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRWUodCwgKCh0LCBuKSA9PiBlKG4pKSk7XG4gICAgfVxuICAgIGFkZFJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBLaSh0LCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIEtpKHQsIG4pO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5yZW1vdmVUYXJnZXRzKHQsIGUsIG4pO1xuICAgIH1cbiAgICBtYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBLaSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGFueXRoaW5nIHdvdWxkIHByZXZlbnQgdGhpcyBkb2N1bWVudCBmcm9tIGJlaW5nIGdhcmJhZ2VcbiAgICAgKiBjb2xsZWN0ZWQsIGdpdmVuIHRoYXQgdGhlIGRvY3VtZW50IGluIHF1ZXN0aW9uIGlzIG5vdCBwcmVzZW50IGluIGFueVxuICAgICAqIHRhcmdldHMgYW5kIGhhcyBhIHNlcXVlbmNlIG51bWJlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHVwcGVyIGJvdW5kIGZvclxuICAgICAqIHRoZSBjb2xsZWN0aW9uIHJ1bi5cbiAgICAgKi8gICAgSWUodCwgZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgbGV0IG4gPSAhMTtcbiAgICAgICAgICAgIHJldHVybiBDaSh0KS5qdCgocyA9PiBWaSh0LCBzLCBlKS5uZXh0KCh0ID0+ICh0ICYmIChuID0gITApLCBqcy5yZXNvbHZlKCF0KSkpKSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICAgICAgfSh0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kYi5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkubmV3Q2hhbmdlQnVmZmVyKCksIHMgPSBbXTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy5FZSh0LCAoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIGlmIChvIDw9IGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5JZSh0LCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlKSBcbiAgICAgICAgICAgICAgICAgICAgLy8gT3VyIHNpemUgYWNjb3VudGluZyByZXF1aXJlcyB1cyB0byByZWFkIGFsbCBkb2N1bWVudHMgYmVmb3JlXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92aW5nIHRoZW0uXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpKyssIG4uZ2V0RW50cnkodCwgcikubmV4dCgoKCkgPT4gKG4ucmVtb3ZlRW50cnkociksIE9pKHQpLmRlbGV0ZShbIDAsIEVzKHIucGF0aCkgXSkpKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHMucHVzaChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGpzLndhaXRGb3IocykpKS5uZXh0KCgoKSA9PiBuLmFwcGx5KHQpKSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS53aXRoU2VxdWVuY2VOdW1iZXIodC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLnVwZGF0ZVRhcmdldERhdGEodCwgbik7XG4gICAgfVxuICAgIHVwZGF0ZUxpbWJvRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gS2kodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgcHJvdmlkZWQgZnVuY3Rpb24gZm9yIGVhY2ggZG9jdW1lbnQgaW4gdGhlIGNhY2hlIHRoYXQgaXMgJ29ycGhhbmVkJy4gT3JwaGFuZWRcbiAgICAgKiBtZWFucyBub3QgYSBwYXJ0IG9mIGFueSB0YXJnZXQsIHNvIHRoZSBvbmx5IGVudHJ5IGluIHRoZSB0YXJnZXQtZG9jdW1lbnQgaW5kZXggZm9yXG4gICAgICogdGhhdCBkb2N1bWVudCB3aWxsIGJlIHRoZSBzZW50aW5lbCByb3cgKHRhcmdldElkIDApLCB3aGljaCB3aWxsIGFsc28gaGF2ZSB0aGUgc2VxdWVuY2VcbiAgICAgKiBudW1iZXIgZm9yIHRoZSBsYXN0IHRpbWUgdGhlIGRvY3VtZW50IHdhcyBhY2Nlc3NlZC5cbiAgICAgKi8gICAgRWUodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gT2kodCk7XG4gICAgICAgIGxldCBzLCBpID0gWC5UO1xuICAgICAgICByZXR1cm4gbi5LdCh7XG4gICAgICAgICAgICBpbmRleDogJHMuZG9jdW1lbnRUYXJnZXRzSW5kZXhcbiAgICAgICAgfSwgKChbdCwgbl0sIHtwYXRoOiByLCBzZXF1ZW5jZU51bWJlcjogb30pID0+IHtcbiAgICAgICAgICAgIDAgPT09IHQgPyAoXG4gICAgICAgICAgICAvLyBpZiBuZXh0VG9SZXBvcnQgaXMgdmFsaWQsIHJlcG9ydCBpdCwgdGhpcyBpcyBhIG5ldyBrZXkgc28gdGhlXG4gICAgICAgICAgICAvLyBsYXN0IG9uZSBtdXN0IG5vdCBiZSBhIG1lbWJlciBvZiBhbnkgdGFyZ2V0cy5cbiAgICAgICAgICAgIGkgIT09IFguVCAmJiBlKG5ldyBQdChScyhzKSksIGkpLCBcbiAgICAgICAgICAgIC8vIHNldCBuZXh0VG9SZXBvcnQgdG8gYmUgdGhpcyBzZXF1ZW5jZSBudW1iZXIuIEl0J3MgdGhlIG5leHQgb25lIHdlXG4gICAgICAgICAgICAvLyBtaWdodCByZXBvcnQsIGlmIHdlIGRvbid0IGZpbmQgYW55IHRhcmdldHMgZm9yIHRoaXMgZG9jdW1lbnQuXG4gICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIHNlcXVlbmNlIG51bWJlciBtdXN0IGJlIGRlZmluZWQgd2hlbiB0aGUgdGFyZ2V0SWRcbiAgICAgICAgICAgIC8vIGlzIDAuXG4gICAgICAgICAgICBpID0gbywgcyA9IHIpIDogXG4gICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIGludmFsaWQsIHdlIGtub3cgd2UgZG9uJ3QgbmVlZCB0byByZXBvcnRcbiAgICAgICAgICAgIC8vIHRoaXMgb25lIHNpbmNlIHdlIGZvdW5kIGEgdGFyZ2V0IGZvciBpdC5cbiAgICAgICAgICAgIGkgPSBYLlQ7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBTaW5jZSB3ZSByZXBvcnQgc2VxdWVuY2UgbnVtYmVycyBhZnRlciBnZXR0aW5nIHRvIHRoZSBuZXh0IGtleSwgd2VcbiAgICAgICAgICAgIC8vIG5lZWQgdG8gY2hlY2sgaWYgdGhlIGxhc3Qga2V5IHdlIGl0ZXJhdGVkIG92ZXIgd2FzIGFuIG9ycGhhbmVkXG4gICAgICAgICAgICAvLyBkb2N1bWVudCBhbmQgcmVwb3J0IGl0LlxuICAgICAgICAgICAgaSAhPT0gWC5UICYmIGUobmV3IFB0KFJzKHMpKSwgaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUodCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBLaSh0LCBlKSB7XG4gICAgcmV0dXJuIE9pKHQpLnB1dChcbiAgICAvKipcbiAqIEByZXR1cm5zIEEgdmFsdWUgc3VpdGFibGUgZm9yIHdyaXRpbmcgYSBzZW50aW5lbCByb3cgaW4gdGhlIHRhcmdldC1kb2N1bWVudFxuICogc3RvcmUuXG4gKi9cbiAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgJHMoMCwgRXModC5wYXRoKSwgZSk7XG4gICAgfShlLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcikpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIG1hcCBpbXBsZW1lbnRhdGlvbiB0aGF0IHVzZXMgb2JqZWN0cyBhcyBrZXlzLiBPYmplY3RzIG11c3QgaGF2ZSBhblxuICogYXNzb2NpYXRlZCBlcXVhbHMgZnVuY3Rpb24gYW5kIG11c3QgYmUgaW1tdXRhYmxlLiBFbnRyaWVzIGluIHRoZSBtYXAgYXJlXG4gKiBzdG9yZWQgdG9nZXRoZXIgd2l0aCB0aGUga2V5IGJlaW5nIHByb2R1Y2VkIGZyb20gdGhlIG1hcEtleUZuLiBUaGlzIG1hcFxuICogYXV0b21hdGljYWxseSBoYW5kbGVzIGNvbGxpc2lvbnMgb2Yga2V5cy5cbiAqLyBjbGFzcyBqaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLm1hcEtleUZuID0gdCwgdGhpcy5lcXVhbHNGbiA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGlubmVyIG1hcCBmb3IgYSBrZXkvdmFsdWUgcGFpci4gRHVlIHRvIHRoZSBwb3NzaWJpbGl0eSBvZiBjb2xsaXNpb25zIHdlXG4gICAgICAgICAqIGtlZXAgYSBsaXN0IG9mIGVudHJpZXMgdGhhdCB3ZSBkbyBhIGxpbmVhciBzZWFyY2ggdGhyb3VnaCB0byBmaW5kIGFuIGFjdHVhbFxuICAgICAgICAgKiBtYXRjaC4gTm90ZSB0aGF0IGNvbGxpc2lvbnMgc2hvdWxkIGJlIHJhcmUsIHNvIHdlIHN0aWxsIGV4cGVjdCBuZWFyXG4gICAgICAgICAqIGNvbnN0YW50IHRpbWUgbG9va3VwcyBpbiBwcmFjdGljZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5uZXIgPSB7fTtcbiAgICB9XG4gICAgLyoqIEdldCBhIHZhbHVlIGZvciB0aGlzIGtleSwgb3IgdW5kZWZpbmVkIGlmIGl0IGRvZXMgbm90IGV4aXN0LiAqLyAgICBnZXQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5tYXBLZXlGbih0KSwgbiA9IHRoaXMuaW5uZXJbZV07XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG4pIGZvciAoY29uc3QgW2UsIHNdIG9mIG4pIGlmICh0aGlzLmVxdWFsc0ZuKGUsIHQpKSByZXR1cm4gcztcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5nZXQodCk7XG4gICAgfVxuICAgIC8qKiBQdXQgdGhpcyBrZXkgYW5kIHZhbHVlIGluIHRoZSBtYXAuICovICAgIHNldCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm1hcEtleUZuKHQpLCBzID0gdGhpcy5pbm5lcltuXTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gcykge1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBzLmxlbmd0aDsgbisrKSBpZiAodGhpcy5lcXVhbHNGbihzW25dWzBdLCB0KSkgcmV0dXJuIHZvaWQgKHNbbl0gPSBbIHQsIGUgXSk7XG4gICAgICAgICAgICBzLnB1c2goWyB0LCBlIF0pO1xuICAgICAgICB9IGVsc2UgdGhpcy5pbm5lcltuXSA9IFsgWyB0LCBlIF0gXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoaXMga2V5IGZyb20gdGhlIG1hcC4gUmV0dXJucyBhIGJvb2xlYW4gaWYgYW55dGhpbmcgd2FzIGRlbGV0ZWQuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm1hcEtleUZuKHQpLCBuID0gdGhpcy5pbm5lcltlXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IG4ubGVuZ3RoOyBzKyspIGlmICh0aGlzLmVxdWFsc0ZuKG5bc11bMF0sIHQpKSByZXR1cm4gMSA9PT0gbi5sZW5ndGggPyBkZWxldGUgdGhpcy5pbm5lcltlXSA6IG4uc3BsaWNlKHMsIDEpLCBcbiAgICAgICAgITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIGN0KHRoaXMuaW5uZXIsICgoZSwgbikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbZSwgc10gb2YgbikgdChlLCBzKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gYXQodGhpcy5pbm5lcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgYnVmZmVyIG9mIGVudHJpZXMgdG8gYmUgd3JpdHRlbiB0byBhIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKiBJdCBjYW4gYmUgdXNlZCB0byBiYXRjaCB1cCBhIHNldCBvZiBjaGFuZ2VzIHRvIGJlIHdyaXR0ZW4gdG8gdGhlIGNhY2hlLCBidXRcbiAqIGFkZGl0aW9uYWxseSBzdXBwb3J0cyByZWFkaW5nIGVudHJpZXMgYmFjayB3aXRoIHRoZSBgZ2V0RW50cnkoKWAgbWV0aG9kLFxuICogZmFsbGluZyBiYWNrIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUgaWYgbm8gZW50cnkgaXNcbiAqIGJ1ZmZlcmVkLlxuICpcbiAqIEVudHJpZXMgYWRkZWQgdG8gdGhlIGNhY2hlICptdXN0KiBiZSByZWFkIGZpcnN0LiBUaGlzIGlzIHRvIGZhY2lsaXRhdGVcbiAqIGNhbGN1bGF0aW5nIHRoZSBzaXplIGRlbHRhIG9mIHRoZSBwZW5kaW5nIGNoYW5nZXMuXG4gKlxuICogUE9SVElORyBOT1RFOiBUaGlzIGNsYXNzIHdhcyBpbXBsZW1lbnRlZCB0aGVuIHJlbW92ZWQgZnJvbSBvdGhlciBwbGF0Zm9ybXMuXG4gKiBJZiBieXRlLWNvdW50aW5nIGVuZHMgdXAgYmVpbmcgbmVlZGVkIG9uIHRoZSBvdGhlciBwbGF0Zm9ybXMsIGNvbnNpZGVyXG4gKiBwb3J0aW5nIHRoaXMgY2xhc3MgYXMgcGFydCBvZiB0aGF0IGltcGxlbWVudGF0aW9uIHdvcmsuXG4gKi8gY2xhc3MgUWkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5IHRvIHRoZSBuZXcgY2FjaGUgZW50cnkgdGhhdCBzaG91bGQgYmUgd3JpdHRlbiAob3IgbnVsbCBpZiBhbnlcbiAgICAgICAgLy8gZXhpc3RpbmcgY2FjaGUgZW50cnkgc2hvdWxkIGJlIHJlbW92ZWQpLlxuICAgICAgICB0aGlzLmNoYW5nZXMgPSBuZXcgamkoKHQgPT4gdC50b1N0cmluZygpKSwgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKSwgdGhpcy5jaGFuZ2VzQXBwbGllZCA9ICExO1xuICAgIH1cbiAgICBnZXRSZWFkVGltZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNoYW5nZXMuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSA/IGUucmVhZFRpbWUgOiBydC5taW4oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVmZmVycyBhIGBSZW1vdGVEb2N1bWVudENhY2hlLmFkZEVudHJ5KClgIGNhbGwuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG9ubHkgbW9kaWZ5IGRvY3VtZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCB2aWFcbiAgICAgKiBgZ2V0RW50cnkoKS9nZXRFbnRyaWVzKClgIChlbmZvcmNlZCB2aWEgSW5kZXhlZERicyBgYXBwbHkoKWApLlxuICAgICAqLyAgICBhZGRFbnRyeSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KHQua2V5LCB7XG4gICAgICAgICAgICBkb2N1bWVudDogdCxcbiAgICAgICAgICAgIHJlYWRUaW1lOiBlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUucmVtb3ZlRW50cnkoKWAgY2FsbC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb25seSByZW1vdmUgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KHQsIGUgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KHQsIHtcbiAgICAgICAgICAgIGRvY3VtZW50OiBLdC5uZXdJbnZhbGlkRG9jdW1lbnQodCksXG4gICAgICAgICAgICByZWFkVGltZTogZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLiBUaGUgYnVmZmVyZWQgY2hhbmdlcyB3aWxsIGZpcnN0IGJlIGNoZWNrZWQsXG4gICAgICogYW5kIGlmIG5vIGJ1ZmZlcmVkIGNoYW5nZSBhcHBsaWVzLCB0aGlzIHdpbGwgZm9yd2FyZCB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IG9yIGFuIGludmFsaWQgZG9jdW1lbnQgaWYgd2UgaGF2ZSBub3RoaW5nXG4gICAgICogY2FjaGVkLlxuICAgICAqLyAgICBnZXRFbnRyeSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5jaGFuZ2VzLmdldChlKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gbiA/IGpzLnJlc29sdmUobi5kb2N1bWVudCkgOiB0aGlzLmdldEZyb21DYWNoZSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgc2V2ZXJhbCBlbnRyaWVzIGluIHRoZSBjYWNoZSwgZm9yd2FyZGluZyB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5cyAtIFRoZSBrZXlzIG9mIHRoZSBlbnRyaWVzIHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgQSBtYXAgb2YgY2FjaGVkIGRvY3VtZW50cywgaW5kZXhlZCBieSBrZXkuIElmIGFuIGVudHJ5IGNhbm5vdCBiZVxuICAgICAqICAgICBmb3VuZCwgdGhlIGNvcnJlc3BvbmRpbmcga2V5IHdpbGwgYmUgbWFwcGVkIHRvIGFuIGludmFsaWQgZG9jdW1lbnQuXG4gICAgICovICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGxGcm9tQ2FjaGUodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYnVmZmVyZWQgY2hhbmdlcyB0byB0aGUgdW5kZXJseWluZyBSZW1vdGVEb2N1bWVudENhY2hlLCB1c2luZ1xuICAgICAqIHRoZSBwcm92aWRlZCB0cmFuc2FjdGlvbi5cbiAgICAgKi8gICAgYXBwbHkodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlc0FwcGxpZWQgPSAhMCwgdGhpcy5hcHBseUNoYW5nZXModCk7XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgdG8gYXNzZXJ0IHRoaXMuY2hhbmdlcyBpcyBub3QgbnVsbCAgKi8gICAgYXNzZXJ0Tm90QXBwbGllZCgpIHt9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBSZW1vdGVEb2N1bWVudENhY2hlIGZvciBJbmRleGVkRGIuIFRvIGNvbnN0cnVjdCwgaW52b2tlXG4gKiBgbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSgpYC5cbiAqLyBjbGFzcyBXaSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgZG9jdW1lbnQgc2VyaWFsaXplci5cbiAgICAgKiBAcGFyYW0gaW5kZXhNYW5hZ2VyIC0gVGhlIHF1ZXJ5IGluZGV4ZXMgdGhhdCBuZWVkIHRvIGJlIG1haW50YWluZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLk4gPSB0LCB0aGlzLkh0ID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cmllcyB0byB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYGFkZEVudHJ5YCBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgIHRvIGVuc3VyZSBwcm9wZXIgYWNjb3VudGluZyBvZiBtZXRhZGF0YS5cbiAgICAgKi8gICAgYWRkRW50cnkodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gSGkodCkucHV0KEppKGUpLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGRvY3VtZW50IGZyb20gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAgdG8gZW5zdXJlIHByb3BlciBhY2NvdW50aW5nIG9mIG1ldGFkYXRhLlxuICAgICAqLyAgICByZW1vdmVFbnRyeSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBIaSh0KSwgcyA9IEppKGUpO1xuICAgICAgICByZXR1cm4gbi5kZWxldGUocyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGN1cnJlbnQgY2FjaGUgc2l6ZS5cbiAgICAgKlxuICAgICAqIENhbGxlcnMgdG8gYGFkZEVudHJ5KClgIGFuZCBgcmVtb3ZlRW50cnkoKWAgKm11c3QqIGNhbGwgdGhpcyBhZnRlcndhcmRzIHRvIHVwZGF0ZSB0aGVcbiAgICAgKiBjYWNoZSdzIG1ldGFkYXRhLlxuICAgICAqLyAgICB1cGRhdGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKHQpLm5leHQoKG4gPT4gKG4uYnl0ZVNpemUgKz0gZSwgdGhpcy5BZSh0LCBuKSkpKTtcbiAgICB9XG4gICAgZ2V0RW50cnkodCwgZSkge1xuICAgICAgICByZXR1cm4gSGkodCkuZ2V0KEppKGUpKS5uZXh0KCh0ID0+IHRoaXMuUmUoZSwgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IGVudHJ5IGFuZCBpdHMgc2l6ZS5cbiAgICAgKi8gICAgYmUodCwgZSkge1xuICAgICAgICByZXR1cm4gSGkodCkuZ2V0KEppKGUpKS5uZXh0KCh0ID0+ICh7XG4gICAgICAgICAgICBkb2N1bWVudDogdGhpcy5SZShlLCB0KSxcbiAgICAgICAgICAgIHNpemU6IFBpKHQpXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IFRuKCk7XG4gICAgICAgIHJldHVybiB0aGlzLlBlKHQsIGUsICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuUmUodCwgZSk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQodCwgcyk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIHNldmVyYWwgZW50cmllcyBpbiB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXlzIC0gVGhlIHNldCBvZiBrZXlzIGVudHJpZXMgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBBIG1hcCBvZiBkb2N1bWVudHMgaW5kZXhlZCBieSBrZXkgYW5kIGEgbWFwIG9mIHNpemVzIGluZGV4ZWQgYnlcbiAgICAgKiAgICAga2V5ICh6ZXJvIGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCkuXG4gICAgICovICAgIHZlKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBUbigpLCBzID0gbmV3IHduKFB0LmNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gdGhpcy5QZSh0LCBlLCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLlJlKHQsIGUpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIGkpLCBzID0gcy5pbnNlcnQodCwgUGkoZSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHtcbiAgICAgICAgICAgIGRvY3VtZW50czogbixcbiAgICAgICAgICAgIFZlOiBzXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIFBlKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKGUuaXNFbXB0eSgpKSByZXR1cm4ganMucmVzb2x2ZSgpO1xuICAgICAgICBjb25zdCBzID0gSURCS2V5UmFuZ2UuYm91bmQoZS5maXJzdCgpLnBhdGgudG9BcnJheSgpLCBlLmxhc3QoKS5wYXRoLnRvQXJyYXkoKSksIGkgPSBlLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGxldCByID0gaS5nZXROZXh0KCk7XG4gICAgICAgIHJldHVybiBIaSh0KS5LdCh7XG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKHQsIGUsIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBQdC5mcm9tU2VnbWVudHModCk7XG4gICAgICAgICAgICAvLyBHbyB0aHJvdWdoIGtleXMgbm90IGZvdW5kIGluIGNhY2hlLlxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7ciAmJiBQdC5jb21wYXJhdG9yKHIsIG8pIDwgMDsgKSBuKHIsIG51bGwpLCByID0gaS5nZXROZXh0KCk7XG4gICAgICAgICAgICByICYmIHIuaXNFcXVhbChvKSAmJiAoXG4gICAgICAgICAgICAvLyBLZXkgZm91bmQgaW4gY2FjaGUuXG4gICAgICAgICAgICBuKHIsIGUpLCByID0gaS5oYXNOZXh0KCkgPyBpLmdldE5leHQoKSA6IG51bGwpLCBcbiAgICAgICAgICAgIC8vIFNraXAgdG8gdGhlIG5leHQga2V5IChpZiB0aGVyZSBpcyBvbmUpLlxuICAgICAgICAgICAgciA/IHMuTXQoci5wYXRoLnRvQXJyYXkoKSkgOiBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFRoZSByZXN0IG9mIHRoZSBrZXlzIGFyZSBub3QgaW4gdGhlIGNhY2hlLiBPbmUgY2FzZSB3aGVyZSBgaXRlcmF0ZWBcbiAgICAgICAgICAgIC8vIGFib3ZlIHdvbid0IGdvIHRocm91Z2ggdGhlbSBpcyB3aGVuIHRoZSBjYWNoZSBpcyBlbXB0eS5cbiAgICAgICAgICAgIGZvciAoO3I7ICkgbihyLCBudWxsKSwgciA9IGkuaGFzTmV4dCgpID8gaS5nZXROZXh0KCkgOiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IFRuKCk7XG4gICAgICAgIGNvbnN0IGkgPSBlLnBhdGgubGVuZ3RoICsgMSwgciA9IHt9O1xuICAgICAgICBpZiAobi5pc0VxdWFsKHJ0Lm1pbigpKSkge1xuICAgICAgICAgICAgLy8gRG9jdW1lbnRzIGFyZSBvcmRlcmVkIGJ5IGtleSwgc28gd2UgY2FuIHVzZSBhIHByZWZpeCBzY2FuIHRvIG5hcnJvd1xuICAgICAgICAgICAgLy8gZG93biB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXG4gICAgICAgICAgICBjb25zdCB0ID0gZS5wYXRoLnRvQXJyYXkoKTtcbiAgICAgICAgICAgIHIucmFuZ2UgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRXhlY3V0ZSBhbiBpbmRleC1mcmVlIHF1ZXJ5IGFuZCBmaWx0ZXIgYnkgcmVhZCB0aW1lLiBUaGlzIGlzIHNhZmVcbiAgICAgICAgICAgIC8vIHNpbmNlIGFsbCBkb2N1bWVudCBjaGFuZ2VzIHRvIHF1ZXJpZXMgdGhhdCBoYXZlIGFcbiAgICAgICAgICAgIC8vIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gKGBzaW5jZVJlYWRUaW1lYCkgaGF2ZSBhIHJlYWQgdGltZSBzZXQuXG4gICAgICAgICAgICBjb25zdCB0ID0gZS5wYXRoLnRvQXJyYXkoKSwgcyA9IGFpKG4pO1xuICAgICAgICAgICAgci5yYW5nZSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoWyB0LCBzIF0sIFxuICAgICAgICAgICAgLyogb3Blbj0gKi8gITApLCByLmluZGV4ID0gTnMuY29sbGVjdGlvblJlYWRUaW1lSW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEhpKHQpLkt0KHIsICgodCwgbiwgcikgPT4ge1xuICAgICAgICAgICAgLy8gVGhlIHF1ZXJ5IGlzIGFjdHVhbGx5IHJldHVybmluZyBhbnkgcGF0aCB0aGF0IHN0YXJ0cyB3aXRoIHRoZSBxdWVyeVxuICAgICAgICAgICAgLy8gcGF0aCBwcmVmaXggd2hpY2ggbWF5IGluY2x1ZGUgZG9jdW1lbnRzIGluIHN1YmNvbGxlY3Rpb25zLiBGb3JcbiAgICAgICAgICAgIC8vIGV4YW1wbGUsIGEgcXVlcnkgb24gJ3Jvb21zJyB3aWxsIHJldHVybiByb29tcy9hYmMvbWVzc2FnZXMveHl4IGJ1dCB3ZVxuICAgICAgICAgICAgLy8gc2hvdWxkbid0IG1hdGNoIGl0LiBGaXggdGhpcyBieSBkaXNjYXJkaW5nIHJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzXG4gICAgICAgICAgICAvLyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlIHF1ZXJ5IHBhdGguXG4gICAgICAgICAgICBpZiAodC5sZW5ndGggIT09IGkpIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBvaSh0aGlzLk4sIG4pO1xuICAgICAgICAgICAgZS5wYXRoLmlzUHJlZml4T2Yoby5rZXkucGF0aCkgPyBQZShlLCBvKSAmJiAocyA9IHMuaW5zZXJ0KG8ua2V5LCBvKSkgOiByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICB9XG4gICAgbmV3Q2hhbmdlQnVmZmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHaSh0aGlzLCAhIXQgJiYgdC50cmFja1JlbW92YWxzKTtcbiAgICB9XG4gICAgZ2V0U2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKHQpLm5leHQoKHQgPT4gdC5ieXRlU2l6ZSkpO1xuICAgIH1cbiAgICBnZXRNZXRhZGF0YSh0KSB7XG4gICAgICAgIHJldHVybiB6aSh0KS5nZXQoeHMua2V5KS5uZXh0KCh0ID0+IChCKCEhdCksIHQpKSk7XG4gICAgfVxuICAgIEFlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHppKHQpLnB1dCh4cy5rZXksIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGByZW1vdGVEb2NgIGFuZCByZXR1cm5zIHRoZSBkb2N1bWVudCAob3IgbnVsbCwgaWYgdGhlIGRvY3VtZW50XG4gICAgICogY29ycmVzcG9uZHMgdG8gdGhlIGZvcm1hdCB1c2VkIGZvciBzZW50aW5lbCBkZWxldGVzKS5cbiAgICAgKi8gICAgUmUodCwgZSkge1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG9pKHRoaXMuTiwgZSk7XG4gICAgICAgICAgICAvLyBXaGV0aGVyIHRoZSBkb2N1bWVudCBpcyBhIHNlbnRpbmVsIHJlbW92YWwgYW5kIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gdGhlXG4gICAgICAgICAgICAvLyBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0LmlzTm9Eb2N1bWVudCgpICYmIHQudmVyc2lvbi5pc0VxdWFsKHJ0Lm1pbigpKSkpIHJldHVybiB0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBLdC5uZXdJbnZhbGlkRG9jdW1lbnQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqXG4gKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBkb2N1bWVudCBzZXJpYWxpemVyLlxuICogQHBhcmFtIGluZGV4TWFuYWdlciAtIFRoZSBxdWVyeSBpbmRleGVzIHRoYXQgbmVlZCB0byBiZSBtYWludGFpbmVkLlxuICovXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogVW5saWtlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciwgdGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBjb21wdXRlcyB0aGUgc2l6ZVxuICogZGVsdGEgZm9yIGFsbCBzdWJtaXR0ZWQgY2hhbmdlcy4gVGhpcyBhdm9pZHMgaGF2aW5nIHRvIHJlLXJlYWQgYWxsIGRvY3VtZW50cyBmcm9tIEluZGV4ZWREYlxuICogd2hlbiB3ZSBhcHBseSB0aGUgY2hhbmdlcy5cbiAqL1xuY2xhc3MgR2kgZXh0ZW5kcyBRaSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRvY3VtZW50Q2FjaGUgLSBUaGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSB0byBhcHBseSB0aGUgY2hhbmdlcyB0by5cbiAgICAgKiBAcGFyYW0gdHJhY2tSZW1vdmFscyAtIFdoZXRoZXIgdG8gY3JlYXRlIHNlbnRpbmVsIGRlbGV0ZXMgdGhhdCBjYW4gYmUgdHJhY2tlZCBieVxuICAgICAqIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLlNlID0gdCwgdGhpcy50cmFja1JlbW92YWxzID0gZSwgXG4gICAgICAgIC8vIEEgbWFwIG9mIGRvY3VtZW50IHNpemVzIHByaW9yIHRvIGFwcGx5aW5nIHRoZSBjaGFuZ2VzIGluIHRoaXMgYnVmZmVyLlxuICAgICAgICB0aGlzLkRlID0gbmV3IGppKCh0ID0+IHQudG9TdHJpbmcoKSksICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSk7XG4gICAgfVxuICAgIGFwcGx5Q2hhbmdlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgbGV0IG4gPSAwLCBzID0gbmV3IGduKCgodCwgZSkgPT4gZXQodC5jYW5vbmljYWxTdHJpbmcoKSwgZS5jYW5vbmljYWxTdHJpbmcoKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlcy5mb3JFYWNoKCgoaSwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IHRoaXMuRGUuZ2V0KGkpO1xuICAgICAgICAgICAgaWYgKHIuZG9jdW1lbnQuaXNWYWxpZERvY3VtZW50KCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gY2kodGhpcy5TZS5OLCByLmRvY3VtZW50LCB0aGlzLmdldFJlYWRUaW1lKGkpKTtcbiAgICAgICAgICAgICAgICBzID0gcy5hZGQoaS5wYXRoLnBvcExhc3QoKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IFBpKGMpO1xuICAgICAgICAgICAgICAgIG4gKz0gYSAtIG8sIGUucHVzaCh0aGlzLlNlLmFkZEVudHJ5KHQsIGksIGMpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobiAtPSBvLCB0aGlzLnRyYWNrUmVtb3ZhbHMpIHtcbiAgICAgICAgICAgICAgICAvLyBJbiBvcmRlciB0byB0cmFjayByZW1vdmFscywgd2Ugc3RvcmUgYSBcInNlbnRpbmVsIGRlbGV0ZVwiIGluIHRoZVxuICAgICAgICAgICAgICAgIC8vIFJlbW90ZURvY3VtZW50Q2FjaGUuIFRoaXMgZW50cnkgaXMgcmVwcmVzZW50ZWQgYnkgYSBOb0RvY3VtZW50XG4gICAgICAgICAgICAgICAgLy8gd2l0aCBhIHZlcnNpb24gb2YgMCBhbmQgaWdub3JlZCBieSBgbWF5YmVEZWNvZGVEb2N1bWVudCgpYCBidXRcbiAgICAgICAgICAgICAgICAvLyBwcmVzZXJ2ZWQgaW4gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gY2kodGhpcy5TZS5OLCBLdC5uZXdOb0RvY3VtZW50KGksIHJ0Lm1pbigpKSwgdGhpcy5nZXRSZWFkVGltZShpKSk7XG4gICAgICAgICAgICAgICAgZS5wdXNoKHRoaXMuU2UuYWRkRW50cnkodCwgaSwgbikpO1xuICAgICAgICAgICAgfSBlbHNlIGUucHVzaCh0aGlzLlNlLnJlbW92ZUVudHJ5KHQsIGkpKTtcbiAgICAgICAgfSkpLCBzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgZS5wdXNoKHRoaXMuU2UuSHQuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgbikpO1xuICAgICAgICB9KSksIGUucHVzaCh0aGlzLlNlLnVwZGF0ZU1ldGFkYXRhKHQsIG4pKSwganMud2FpdEZvcihlKTtcbiAgICB9XG4gICAgZ2V0RnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgLy8gUmVjb3JkIHRoZSBzaXplIG9mIGV2ZXJ5dGhpbmcgd2UgbG9hZCBmcm9tIHRoZSBjYWNoZSBzbyB3ZSBjYW4gY29tcHV0ZSBhIGRlbHRhIGxhdGVyLlxuICAgICAgICByZXR1cm4gdGhpcy5TZS5iZSh0LCBlKS5uZXh0KCh0ID0+ICh0aGlzLkRlLnNldChlLCB0LnNpemUpLCB0LmRvY3VtZW50KSkpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlXG4gICAgICAgIC8vIGEgZGVsdGEgbGF0ZXIuXG4gICAgICAgIHJldHVybiB0aGlzLlNlLnZlKHQsIGUpLm5leHQoKCh7ZG9jdW1lbnRzOiB0LCBWZTogZX0pID0+IChcbiAgICAgICAgLy8gTm90ZTogYGdldEFsbEZyb21DYWNoZWAgcmV0dXJucyB0d28gbWFwcyBpbnN0ZWFkIG9mIGEgc2luZ2xlIG1hcCBmcm9tXG4gICAgICAgIC8vIGtleXMgdG8gYERvY3VtZW50U2l6ZUVudHJ5YHMuIFRoaXMgaXMgdG8gYWxsb3cgcmV0dXJuaW5nIHRoZVxuICAgICAgICAvLyBgTXV0YWJsZURvY3VtZW50TWFwYCBkaXJlY3RseSwgd2l0aG91dCBhIGNvbnZlcnNpb24uXG4gICAgICAgIGUuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuRGUuc2V0KHQsIGUpO1xuICAgICAgICB9KSksIHQpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB6aSh0KSB7XG4gICAgcmV0dXJuIGVpKHQsIHhzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHJlbW90ZURvY3VtZW50cyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gSGkodCkge1xuICAgIHJldHVybiBlaSh0LCBOcy5zdG9yZSk7XG59XG5cbmZ1bmN0aW9uIEppKHQpIHtcbiAgICByZXR1cm4gdC5wYXRoLnRvQXJyYXkoKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLiAqLyBjbGFzcyBZaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLk4gPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGluIHByb2R1Y3Rpb24sIHRoaXMgbWV0aG9kIGlzIG9ubHkgZXZlciB1c2VkIHRvIHVwZ3JhZGUgdGhlIHNjaGVtYVxuICAgICAqIHRvIFNDSEVNQV9WRVJTSU9OLiBEaWZmZXJlbnQgdmFsdWVzIG9mIHRvVmVyc2lvbiBhcmUgb25seSB1c2VkIGZvciB0ZXN0aW5nXG4gICAgICogYW5kIGxvY2FsIGZlYXR1cmUgZGV2ZWxvcG1lbnQuXG4gICAgICovICAgIEN0KHQsIGUsIG4sIHMpIHtcbiAgICAgICAgQihuIDwgcyAmJiBuID49IDAgJiYgcyA8PSAxMSk7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgUXMoXCJjcmVhdGVPclVwZ3JhZGVcIiwgZSk7XG4gICAgICAgIG4gPCAxICYmIHMgPj0gMSAmJiAoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShQcy5zdG9yZSk7XG4gICAgICAgIH0odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUodnMuc3RvcmUsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiB2cy5rZXlQYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoVnMuc3RvcmUsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBWcy5rZXlQYXRoLFxuICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICB9KS5jcmVhdGVJbmRleChWcy51c2VyTXV0YXRpb25zSW5kZXgsIFZzLnVzZXJNdXRhdGlvbnNLZXlQYXRoLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMFxuICAgICAgICAgICAgfSksIHQuY3JlYXRlT2JqZWN0U3RvcmUoU3Muc3RvcmUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogVXBncmFkZSBmdW5jdGlvbiB0byBtaWdyYXRlIHRoZSAnbXV0YXRpb25zJyBzdG9yZSBmcm9tIFYxIHRvIFYzLiBMb2Fkc1xuICogYW5kIHJld3JpdGVzIGFsbCBkYXRhLlxuICovICh0KSwgWGkodCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoTnMuc3RvcmUpO1xuICAgICAgICB9KHQpKTtcbiAgICAgICAgLy8gTWlncmF0aW9uIDIgdG8gcG9wdWxhdGUgdGhlIHRhcmdldEdsb2JhbCBvYmplY3Qgbm8gbG9uZ2VyIG5lZWRlZCBzaW5jZVxuICAgICAgICAvLyBtaWdyYXRpb24gMyB1bmNvbmRpdGlvbmFsbHkgY2xlYXJzIGl0LlxuICAgICAgICAgICAgICAgIGxldCByID0ganMucmVzb2x2ZSgpO1xuICAgICAgICByZXR1cm4gbiA8IDMgJiYgcyA+PSAzICYmIChcbiAgICAgICAgLy8gQnJhbmQgbmV3IGNsaWVudHMgZG9uJ3QgbmVlZCB0byBkcm9wIGFuZCByZWNyZWF0ZS0tb25seSBjbGllbnRzIHRoYXRcbiAgICAgICAgLy8gcG90ZW50aWFsbHkgaGF2ZSBjb3JydXB0IGRhdGEuXG4gICAgICAgIDAgIT09IG4gJiYgKCFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmRlbGV0ZU9iamVjdFN0b3JlKCRzLnN0b3JlKSwgdC5kZWxldGVPYmplY3RTdG9yZShrcy5zdG9yZSksIHQuZGVsZXRlT2JqZWN0U3RvcmUoT3Muc3RvcmUpO1xuICAgICAgICB9KHQpLCBYaSh0KSksIHIgPSByLm5leHQoKCgpID0+IFxuICAgICAgICAvKipcbiAqIENyZWF0ZXMgdGhlIHRhcmdldCBnbG9iYWwgc2luZ2xldG9uIHJvdy5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVGhlIHZlcnNpb24gdXBncmFkZSB0cmFuc2FjdGlvbiBmb3IgaW5kZXhlZGRiXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoT3Muc3RvcmUpLCBuID0gbmV3IE9zKFxuICAgICAgICAgICAgLypoaWdoZXN0VGFyZ2V0SWQ9Ki8gMCwgXG4gICAgICAgICAgICAvKmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcj0qLyAwLCBydC5taW4oKS50b1RpbWVzdGFtcCgpLCBcbiAgICAgICAgICAgIC8qdGFyZ2V0Q291bnQ9Ki8gMCk7XG4gICAgICAgICAgICByZXR1cm4gZS5wdXQoT3Mua2V5LCBuKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIENyZWF0ZXMgaW5kaWNlcyBvbiB0aGUgUmVtb3RlRG9jdW1lbnRzIHN0b3JlIHVzZWQgZm9yIGJvdGggbXVsdGktdGFiXG4gKiBhbmQgSW5kZXgtRnJlZSBxdWVyaWVzLlxuICovIChpKSkpKSwgbiA8IDQgJiYgcyA+PSA0ICYmICgwICE9PSBuICYmIChcbiAgICAgICAgLy8gU2NoZW1hIHZlcnNpb24gMyB1c2VzIGF1dG8tZ2VuZXJhdGVkIGtleXMgdG8gZ2VuZXJhdGUgZ2xvYmFsbHkgdW5pcXVlXG4gICAgICAgIC8vIG11dGF0aW9uIGJhdGNoIElEcyAodGhpcyB3YXMgcHJldmlvdXNseSBlbnN1cmVkIGludGVybmFsbHkgYnkgdGhlXG4gICAgICAgIC8vIGNsaWVudCkuIFRvIG1pZ3JhdGUgdG8gdGhlIG5ldyBzY2hlbWEsIHdlIGhhdmUgdG8gcmVhZCBhbGwgbXV0YXRpb25zXG4gICAgICAgIC8vIGFuZCB3cml0ZSB0aGVtIGJhY2sgb3V0LiBXZSBwcmVzZXJ2ZSB0aGUgZXhpc3RpbmcgYmF0Y2ggSURzIHRvIGd1YXJhbnRlZVxuICAgICAgICAvLyBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIG9iamVjdCBzdG9yZXMuIEFueSBmdXJ0aGVyIG11dGF0aW9uIGJhdGNoIElEcyB3aWxsXG4gICAgICAgIC8vIGJlIGF1dG8tZ2VuZXJhdGVkLlxuICAgICAgICByID0gci5uZXh0KCgoKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gZS5zdG9yZShWcy5zdG9yZSkuTHQoKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgICAgICB0LmRlbGV0ZU9iamVjdFN0b3JlKFZzLnN0b3JlKTtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFZzLnN0b3JlLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IFZzLmtleVBhdGgsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoVnMudXNlck11dGF0aW9uc0luZGV4LCBWcy51c2VyTXV0YXRpb25zS2V5UGF0aCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGUuc3RvcmUoVnMuc3RvcmUpLCBpID0gbi5tYXAoKHQgPT4gcy5wdXQodCkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ganMud2FpdEZvcihpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSh0LCBpKSkpKSwgciA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKE1zLnN0b3JlLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IE1zLmtleVBhdGhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0odCk7XG4gICAgICAgIH0pKSksIG4gPCA1ICYmIHMgPj0gNSAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy5DZShpKSkpKSwgbiA8IDYgJiYgcyA+PSA2ICYmIChyID0gci5uZXh0KCgoKSA9PiAoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZSh4cy5zdG9yZSk7XG4gICAgICAgIH0odCksIHRoaXMuTmUoaSkpKSkpLCBuIDwgNyAmJiBzID49IDcgJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMueGUoaSkpKSksIG4gPCA4ICYmIHMgPj0gOCAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy5rZSh0LCBpKSkpKSwgXG4gICAgICAgIG4gPCA5ICYmIHMgPj0gOSAmJiAociA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gTXVsdGktVGFiIHVzZWQgdG8gbWFuYWdlIGl0cyBvd24gY2hhbmdlbG9nLCBidXQgdGhpcyBoYXMgYmVlbiBtb3ZlZFxuICAgICAgICAgICAgLy8gdG8gdGhlIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0IHN0b3JlIGl0c2VsZi4gU2luY2UgdGhlIHByZXZpb3VzIGNoYW5nZVxuICAgICAgICAgICAgLy8gbG9nIG9ubHkgY29udGFpbmVkIHRyYW5zaWVudCBkYXRhLCB3ZSBjYW4gZHJvcCBpdHMgb2JqZWN0IHN0b3JlLlxuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0Lm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoXCJyZW1vdGVEb2N1bWVudENoYW5nZXNcIikgJiYgdC5kZWxldGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50Q2hhbmdlc1wiKTtcbiAgICAgICAgICAgIH0odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5vYmplY3RTdG9yZShOcy5zdG9yZSk7XG4gICAgICAgICAgICAgICAgZS5jcmVhdGVJbmRleChOcy5yZWFkVGltZUluZGV4LCBOcy5yZWFkVGltZUluZGV4UGF0aCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSksIGUuY3JlYXRlSW5kZXgoTnMuY29sbGVjdGlvblJlYWRUaW1lSW5kZXgsIE5zLmNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KGUpO1xuICAgICAgICB9KSkpLCBuIDwgMTAgJiYgcyA+PSAxMCAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy4kZShpKSkpKSwgbiA8IDExICYmIHMgPj0gMTEgJiYgKHIgPSByLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShMcy5zdG9yZSwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBMcy5rZXlQYXRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KHQpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShCcy5zdG9yZSwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBCcy5rZXlQYXRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodCk7XG4gICAgICAgIH0pKSksIHI7XG4gICAgfVxuICAgIE5lKHQpIHtcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICByZXR1cm4gdC5zdG9yZShOcy5zdG9yZSkuS3QoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBlICs9IFBpKG4pO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyB4cyhlKTtcbiAgICAgICAgICAgIHJldHVybiB0LnN0b3JlKHhzLnN0b3JlKS5wdXQoeHMua2V5LCBuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBDZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnN0b3JlKHZzLnN0b3JlKSwgbiA9IHQuc3RvcmUoVnMuc3RvcmUpO1xuICAgICAgICByZXR1cm4gZS5MdCgpLm5leHQoKGUgPT4ganMuZm9yRWFjaChlLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBlLnVzZXJJZCwgLTEgXSwgWyBlLnVzZXJJZCwgZS5sYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZCBdKTtcbiAgICAgICAgICAgIHJldHVybiBuLkx0KFZzLnVzZXJNdXRhdGlvbnNJbmRleCwgcykubmV4dCgobiA9PiBqcy5mb3JFYWNoKG4sIChuID0+IHtcbiAgICAgICAgICAgICAgICBCKG4udXNlcklkID09PSBlLnVzZXJJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGZpKHRoaXMuTiwgbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJpKHQsIGUudXNlcklkLCBzKS5uZXh0KCgoKSA9PiB7fSkpO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIHRoYXQgZXZlcnkgZG9jdW1lbnQgaW4gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSBoYXMgYSBjb3JyZXNwb25kaW5nIHNlbnRpbmVsIHJvd1xuICAgICAqIHdpdGggYSBzZXF1ZW5jZSBudW1iZXIuIE1pc3Npbmcgcm93cyBhcmUgZ2l2ZW4gdGhlIG1vc3QgcmVjZW50bHkgdXNlZCBzZXF1ZW5jZSBudW1iZXIuXG4gICAgICovICAgIHhlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoJHMuc3RvcmUpLCBuID0gdC5zdG9yZShOcy5zdG9yZSk7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKE9zLnN0b3JlKS5nZXQoT3Mua2V5KS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBuLkt0KCgobiwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgaHQobiksIG8gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbIDAsIEVzKHQpIF07XG4gICAgICAgICAgICAgICAgfShyKTtcbiAgICAgICAgICAgICAgICBzLnB1c2goZS5nZXQobykubmV4dCgobiA9PiBuID8ganMucmVzb2x2ZSgpIDogKG4gPT4gZS5wdXQobmV3ICRzKDAsIEVzKG4pLCB0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcikpKShyKSkpKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiBqcy53YWl0Rm9yKHMpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAga2UodCwgZSkge1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGluZGV4LlxuICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKEZzLnN0b3JlLCB7XG4gICAgICAgICAgICBrZXlQYXRoOiBGcy5rZXlQYXRoXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBuID0gZS5zdG9yZShGcy5zdG9yZSksIHMgPSBuZXcgVGksIGkgPSB0ID0+IHtcbiAgICAgICAgICAgIGlmIChzLmFkZCh0KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0Lmxhc3RTZWdtZW50KCksIHMgPSB0LnBvcExhc3QoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wdXQoe1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IGUsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogRXMocylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gSGVscGVyIHRvIGFkZCBhbiBpbmRleCBlbnRyeSBpZmYgd2UgaGF2ZW4ndCBhbHJlYWR5IHdyaXR0ZW4gaXQuXG4gICAgICAgICAgICAgICAgLy8gSW5kZXggZXhpc3RpbmcgcmVtb3RlIGRvY3VtZW50cy5cbiAgICAgICAgcmV0dXJuIGUuc3RvcmUoTnMuc3RvcmUpLkt0KHtcbiAgICAgICAgICAgIHF0OiAhMFxuICAgICAgICB9LCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgaHQodCk7XG4gICAgICAgICAgICByZXR1cm4gaShuLnBvcExhc3QoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlLnN0b3JlKFNzLnN0b3JlKS5LdCh7XG4gICAgICAgICAgICBxdDogITBcbiAgICAgICAgfSwgKChbdCwgZSwgbl0sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBScyhlKTtcbiAgICAgICAgICAgIHJldHVybiBpKHIucG9wTGFzdCgpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgICRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoa3Muc3RvcmUpO1xuICAgICAgICByZXR1cm4gZS5LdCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBkaShuKSwgaSA9IHdpKHRoaXMuTiwgcyk7XG4gICAgICAgICAgICByZXR1cm4gZS5wdXQoaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFhpKHQpIHtcbiAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKCRzLnN0b3JlLCB7XG4gICAgICAgIGtleVBhdGg6ICRzLmtleVBhdGhcbiAgICB9KS5jcmVhdGVJbmRleCgkcy5kb2N1bWVudFRhcmdldHNJbmRleCwgJHMuZG9jdW1lbnRUYXJnZXRzS2V5UGF0aCwge1xuICAgICAgICB1bmlxdWU6ICEwXG4gICAgfSk7XG4gICAgLy8gTk9URTogVGhpcyBpcyB1bmlxdWUgb25seSBiZWNhdXNlIHRoZSBUYXJnZXRJZCBpcyB0aGUgc3VmZml4LlxuICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoa3Muc3RvcmUsIHtcbiAgICAgICAga2V5UGF0aDoga3Mua2V5UGF0aFxuICAgIH0pLmNyZWF0ZUluZGV4KGtzLnF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSwga3MucXVlcnlUYXJnZXRzS2V5UGF0aCwge1xuICAgICAgICB1bmlxdWU6ICEwXG4gICAgfSksIHQuY3JlYXRlT2JqZWN0U3RvcmUoT3Muc3RvcmUpO1xufVxuXG5jb25zdCBaaSA9IFwiRmFpbGVkIHRvIG9idGFpbiBleGNsdXNpdmUgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZSBsYXllci4gVG8gYWxsb3cgc2hhcmVkIGFjY2VzcywgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbiBoYXMgdG8gYmUgZW5hYmxlZCBpbiBhbGwgdGFicy4gSWYgeW91IGFyZSB1c2luZyBgZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWI6dHJ1ZWAsIG1ha2Ugc3VyZSB0aGF0IG9ubHkgb25lIHRhYiBoYXMgcGVyc2lzdGVuY2UgZW5hYmxlZCBhdCBhbnkgZ2l2ZW4gdGltZS5cIjtcblxuLyoqXG4gKiBPbGRlc3QgYWNjZXB0YWJsZSBhZ2UgaW4gbWlsbGlzZWNvbmRzIGZvciBjbGllbnQgbWV0YWRhdGEgYmVmb3JlIHRoZSBjbGllbnRcbiAqIGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIGl0cyBhc3NvY2lhdGVkIGRhdGEgaXMgZ2FyYmFnZSBjb2xsZWN0ZWQuXG4gKi9cbi8qKlxuICogQW4gSW5kZXhlZERCLWJhY2tlZCBpbnN0YW5jZSBvZiBQZXJzaXN0ZW5jZS4gRGF0YSBpcyBzdG9yZWQgcGVyc2lzdGVudGx5XG4gKiBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKlxuICogT24gV2ViIG9ubHksIHRoZSBGaXJlc3RvcmUgU0RLcyBzdXBwb3J0IHNoYXJlZCBhY2Nlc3MgdG8gaXRzIHBlcnNpc3RlbmNlXG4gKiBsYXllci4gVGhpcyBhbGxvd3MgbXVsdGlwbGUgYnJvd3NlciB0YWJzIHRvIHJlYWQgYW5kIHdyaXRlIHRvIEluZGV4ZWREYiBhbmRcbiAqIHRvIHN5bmNocm9uaXplIHN0YXRlIGV2ZW4gd2l0aG91dCBuZXR3b3JrIGNvbm5lY3Rpdml0eS4gU2hhcmVkIGFjY2VzcyBpc1xuICogY3VycmVudGx5IG9wdGlvbmFsIGFuZCBub3QgZW5hYmxlZCB1bmxlc3MgYWxsIGNsaWVudHMgaW52b2tlXG4gKiBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgd2l0aCBge3N5bmNocm9uaXplVGFiczp0cnVlfWAuXG4gKlxuICogSW4gbXVsdGktdGFiIG1vZGUsIGlmIG11bHRpcGxlIGNsaWVudHMgYXJlIGFjdGl2ZSBhdCB0aGUgc2FtZSB0aW1lLCB0aGUgU0RLXG4gKiB3aWxsIGRlc2lnbmF0ZSBvbmUgY2xpZW50IGFzIHRoZSDigJxwcmltYXJ5IGNsaWVudOKAnS4gQW4gZWZmb3J0IGlzIG1hZGUgdG8gcGlja1xuICogYSB2aXNpYmxlLCBuZXR3b3JrLWNvbm5lY3RlZCBhbmQgYWN0aXZlIGNsaWVudCwgYW5kIHRoaXMgY2xpZW50IGlzXG4gKiByZXNwb25zaWJsZSBmb3IgbGV0dGluZyBvdGhlciBjbGllbnRzIGtub3cgYWJvdXQgaXRzIHByZXNlbmNlLiBUaGUgcHJpbWFyeVxuICogY2xpZW50IHdyaXRlcyBhIHVuaXF1ZSBjbGllbnQtZ2VuZXJhdGVkIGlkZW50aWZpZXIgKHRoZSBjbGllbnQgSUQpIHRvXG4gKiBJbmRleGVkRGLigJlzIOKAnG93bmVy4oCdIHN0b3JlIGV2ZXJ5IDQgc2Vjb25kcy4gSWYgdGhlIHByaW1hcnkgY2xpZW50IGZhaWxzIHRvXG4gKiB1cGRhdGUgdGhpcyBlbnRyeSwgYW5vdGhlciBjbGllbnQgY2FuIGFjcXVpcmUgdGhlIGxlYXNlIGFuZCB0YWtlIG92ZXIgYXNcbiAqIHByaW1hcnkuXG4gKlxuICogU29tZSBwZXJzaXN0ZW5jZSBvcGVyYXRpb25zIGluIHRoZSBTREsgYXJlIGRlc2lnbmF0ZWQgYXMgcHJpbWFyeS1jbGllbnQgb25seVxuICogb3BlcmF0aW9ucy4gVGhpcyBpbmNsdWRlcyB0aGUgYWNrbm93bGVkZ21lbnQgb2YgbXV0YXRpb25zIGFuZCBhbGwgdXBkYXRlcyBvZlxuICogcmVtb3RlIGRvY3VtZW50cy4gVGhlIGVmZmVjdHMgb2YgdGhlc2Ugb3BlcmF0aW9ucyBhcmUgd3JpdHRlbiB0byBwZXJzaXN0ZW5jZVxuICogYW5kIHRoZW4gYnJvYWRjYXN0IHRvIG90aGVyIHRhYnMgdmlhIExvY2FsU3RvcmFnZSAoc2VlXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCksIHdoaWNoIHRoZW4gcmVmcmVzaCB0aGVpciBzdGF0ZSBmcm9tXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBTaW1pbGFybHksIHRoZSBwcmltYXJ5IGNsaWVudCBsaXN0ZW5zIHRvIG5vdGlmaWNhdGlvbnMgc2VudCBieSBzZWNvbmRhcnlcbiAqIGNsaWVudHMgdG8gZGlzY292ZXIgcGVyc2lzdGVuY2UgY2hhbmdlcyB3cml0dGVuIGJ5IHNlY29uZGFyeSBjbGllbnRzLCBzdWNoIGFzXG4gKiB0aGUgYWRkaXRpb24gb2YgbmV3IG11dGF0aW9ucyBhbmQgcXVlcnkgdGFyZ2V0cy5cbiAqXG4gKiBJZiBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQgYW5kIGFub3RoZXIgdGFiIGFscmVhZHkgb2J0YWluZWQgdGhlIHByaW1hcnlcbiAqIGxlYXNlLCBJbmRleGVkRGJQZXJzaXN0ZW5jZSBlbnRlcnMgYSBmYWlsZWQgc3RhdGUgYW5kIGFsbCBzdWJzZXF1ZW50XG4gKiBvcGVyYXRpb25zIHdpbGwgYXV0b21hdGljYWxseSBmYWlsLlxuICpcbiAqIEFkZGl0aW9uYWxseSwgdGhlcmUgaXMgYW4gb3B0aW1pemF0aW9uIHNvIHRoYXQgd2hlbiBhIHRhYiBpcyBjbG9zZWQsIHRoZVxuICogcHJpbWFyeSBsZWFzZSBpcyByZWxlYXNlZCBpbW1lZGlhdGVseSAodGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCB0byBtYWtlXG4gKiBzdXJlIHRoYXQgYSByZWZyZXNoZWQgdGFiIGlzIGFibGUgdG8gaW1tZWRpYXRlbHkgcmUtYWNxdWlyZSB0aGUgcHJpbWFyeVxuICogbGVhc2UpLiBVbmZvcnR1bmF0ZWx5LCBJbmRleGVkREIgY2Fubm90IGJlIHJlbGlhYmx5IHVzZWQgaW4gd2luZG93LnVubG9hZFxuICogc2luY2UgaXQgaXMgYW4gYXN5bmNocm9ub3VzIEFQSS4gU28gaW4gYWRkaXRpb24gdG8gYXR0ZW1wdGluZyB0byBnaXZlIHVwIHRoZVxuICogbGVhc2UsIHRoZSBsZWFzZWhvbGRlciB3cml0ZXMgaXRzIGNsaWVudCBJRCB0byBhIFwiem9tYmllZENsaWVudFwiIGVudHJ5IGluXG4gKiBMb2NhbFN0b3JhZ2Ugd2hpY2ggYWN0cyBhcyBhbiBpbmRpY2F0b3IgdGhhdCBhbm90aGVyIHRhYiBzaG91bGQgZ28gYWhlYWQgYW5kXG4gKiB0YWtlIHRoZSBwcmltYXJ5IGxlYXNlIGltbWVkaWF0ZWx5IHJlZ2FyZGxlc3Mgb2YgdGhlIGN1cnJlbnQgbGVhc2UgdGltZXN0YW1wLlxuICpcbiAqIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgYHN5bmNocm9uaXplVGFic2Agc2VjdGlvbiB3aGVuIG11bHRpLXRhYiBpcyBub1xuICogbG9uZ2VyIG9wdGlvbmFsLlxuICovXG5jbGFzcyB0ciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0byBzeW5jaHJvbml6ZSB0aGUgaW4tbWVtb3J5IHN0YXRlIG9mIG11bHRpcGxlIHRhYnMgYW5kIHNoYXJlXG4gICAgICogYWNjZXNzIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICAgICAqL1xuICAgIHQsIGUsIG4sIHMsIGksIHIsIG8sIGMsIGEsIFxuICAgIC8qKlxuICAgICAqIElmIHNldCB0byB0cnVlLCBmb3JjZWZ1bGx5IG9idGFpbnMgZGF0YWJhc2UgYWNjZXNzLiBFeGlzdGluZyB0YWJzIHdpbGxcbiAgICAgKiBubyBsb25nZXIgYmUgYWJsZSB0byBhY2Nlc3MgSW5kZXhlZERCLlxuICAgICAqL1xuICAgIHUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gPSB0LCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gZSwgdGhpcy5jbGllbnRJZCA9IG4sIFxuICAgICAgICB0aGlzLk9lID0gaSwgdGhpcy53aW5kb3cgPSByLCB0aGlzLmRvY3VtZW50ID0gbywgdGhpcy5GZSA9IGEsIHRoaXMuTWUgPSB1LCB0aGlzLkxlID0gbnVsbCwgXG4gICAgICAgIHRoaXMuQmUgPSAhMSwgdGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5uZXR3b3JrRW5hYmxlZCA9ICEwLCBcbiAgICAgICAgLyoqIE91ciB3aW5kb3cudW5sb2FkIGhhbmRsZXIsIGlmIHJlZ2lzdGVyZWQuICovXG4gICAgICAgIHRoaXMuVWUgPSBudWxsLCB0aGlzLmluRm9yZWdyb3VuZCA9ICExLCBcbiAgICAgICAgLyoqIE91ciAndmlzaWJpbGl0eWNoYW5nZScgbGlzdGVuZXIgaWYgcmVnaXN0ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5xZSA9IG51bGwsIFxuICAgICAgICAvKiogVGhlIGNsaWVudCBtZXRhZGF0YSByZWZyZXNoIHRhc2suICovXG4gICAgICAgIHRoaXMuS2UgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IHRpbWUgd2UgZ2FyYmFnZSBjb2xsZWN0ZWQgdGhlIGNsaWVudCBtZXRhZGF0YSBvYmplY3Qgc3RvcmUuICovXG4gICAgICAgIHRoaXMuamUgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIFxuICAgICAgICAvKiogQSBsaXN0ZW5lciB0byBub3RpZnkgb24gcHJpbWFyeSBzdGF0ZSBjaGFuZ2VzLiAqL1xuICAgICAgICB0aGlzLlFlID0gdCA9PiBQcm9taXNlLnJlc29sdmUoKSwgIXRyLmJ0KCkpIHRocm93IG5ldyBqKEsuVU5JTVBMRU1FTlRFRCwgXCJUaGlzIHBsYXRmb3JtIGlzIGVpdGhlciBtaXNzaW5nIEluZGV4ZWREQiBvciBpcyBrbm93biB0byBoYXZlIGFuIGluY29tcGxldGUgaW1wbGVtZW50YXRpb24uIE9mZmxpbmUgcGVyc2lzdGVuY2UgaGFzIGJlZW4gZGlzYWJsZWQuXCIpO1xuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gbmV3IHFpKHRoaXMsIHMpLCB0aGlzLldlID0gZSArIFwibWFpblwiLCB0aGlzLk4gPSBuZXcgcmkoYyksIFxuICAgICAgICB0aGlzLkdlID0gbmV3IFdzKHRoaXMuV2UsIDExLCBuZXcgWWkodGhpcy5OKSksIHRoaXMuemUgPSBuZXcgeGkodGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSwgdGhpcy5OKSwgXG4gICAgICAgIHRoaXMuSHQgPSBuZXcgRWksIHRoaXMuSGUgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFdpKHQsIGUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgY2hhbmdlZCBzaW5jZSB0aGUgc3BlY2lmaWVkIHJlYWRcbiAqIHRpbWUuXG4gKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cbiAgICAgICAgKHRoaXMuTiwgdGhpcy5IdCksIHRoaXMuSmUgPSBuZXcgbWksIHRoaXMud2luZG93ICYmIHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSA/IHRoaXMuWWUgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UgOiAodGhpcy5ZZSA9IG51bGwsIFxuICAgICAgICAhMSA9PT0gdSAmJiBPKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJMb2NhbFN0b3JhZ2UgaXMgdW5hdmFpbGFibGUuIEFzIGEgcmVzdWx0LCBwZXJzaXN0ZW5jZSBtYXkgbm90IHdvcmsgcmVsaWFibHkuIEluIHBhcnRpY3VsYXIgZW5hYmxlUGVyc2lzdGVuY2UoKSBjb3VsZCBmYWlsIGltbWVkaWF0ZWx5IGFmdGVyIHJlZnJlc2hpbmcgdGhlIHBhZ2UuXCIpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdCB0byBzdGFydCBJbmRleGVkRGIgcGVyc2lzdGVuY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIHBlcnNpc3RlbmNlIHdhcyBlbmFibGVkLlxuICAgICAqLyAgICBzdGFydCgpIHtcbiAgICAgICAgLy8gTk9URTogVGhpcyBpcyBleHBlY3RlZCB0byBmYWlsIHNvbWV0aW1lcyAoaW4gdGhlIGNhc2Ugb2YgYW5vdGhlciB0YWJcbiAgICAgICAgLy8gYWxyZWFkeSBoYXZpbmcgdGhlIHBlcnNpc3RlbmNlIGxvY2spLCBzbyBpdCdzIHRoZSBmaXJzdCB0aGluZyB3ZSBzaG91bGRcbiAgICAgICAgLy8gZG8uXG4gICAgICAgIHJldHVybiB0aGlzLlhlKCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHJpbWFyeSAmJiAhdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgXG4gICAgICAgICAgICAvLyBGYWlsIGBzdGFydCgpYCBpZiBgc3luY2hyb25pemVUYWJzYCBpcyBkaXNhYmxlZCBhbmQgd2UgY2Fubm90XG4gICAgICAgICAgICAvLyBvYnRhaW4gdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgICAgICB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFppKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlplKCksIHRoaXMudG4oKSwgdGhpcy5lbigpLCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gdGhpcy56ZS5nZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkpKTtcbiAgICAgICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5MZSA9IG5ldyBYKHQsIHRoaXMuRmUpO1xuICAgICAgICB9KSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5CZSA9ICEwO1xuICAgICAgICB9KSkuY2F0Y2goKHQgPT4gKHRoaXMuR2UgJiYgdGhpcy5HZS5jbG9zZSgpLCBQcm9taXNlLnJlamVjdCh0KSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBwcmltYXJ5IHN0YXRlIG9mIHRoZVxuICAgICAqIGluc3RhbmNlIGNoYW5nZXMuIFVwb24gcmVnaXN0ZXJpbmcsIHRoaXMgbGlzdGVuZXIgaXMgaW52b2tlZCBpbW1lZGlhdGVseVxuICAgICAqIHdpdGggdGhlIGN1cnJlbnQgcHJpbWFyeSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIG5uKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUWUgPSBhc3luYyBlID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHJldHVybiB0KGUpO1xuICAgICAgICB9LCB0KHRoaXMuaXNQcmltYXJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBkYXRhYmFzZSByZWNlaXZlcyBhXG4gICAgICogdmVyc2lvbiBjaGFuZ2UgZXZlbnQgaW5kaWNhdGluZyB0aGF0IGl0IGhhcyBkZWxldGVkLlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLkdlLnh0KChhc3luYyBlID0+IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGFuIGF0dGVtcHQgaXMgbWFkZSB0byBkZWxldGUgSW5kZXhlZERCLlxuICAgICAgICAgICAgbnVsbCA9PT0gZS5uZXdWZXJzaW9uICYmIGF3YWl0IHQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGp1c3RzIHRoZSBjdXJyZW50IG5ldHdvcmsgc3RhdGUgaW4gdGhlIGNsaWVudCdzIG1ldGFkYXRhLCBwb3RlbnRpYWxseVxuICAgICAqIGFmZmVjdGluZyB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNldE5ldHdvcmtFbmFibGVkKHQpIHtcbiAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCAhPT0gdCAmJiAodGhpcy5uZXR3b3JrRW5hYmxlZCA9IHQsIFxuICAgICAgICAvLyBTY2hlZHVsZSBhIHByaW1hcnkgbGVhc2UgcmVmcmVzaCBmb3IgaW1tZWRpYXRlIGV4ZWN1dGlvbi4gVGhlIGV2ZW50dWFsXG4gICAgICAgIC8vIGxlYXNlIHVwZGF0ZSB3aWxsIGJlIHByb3BhZ2F0ZWQgdmlhIGBwcmltYXJ5U3RhdGVMaXN0ZW5lcmAuXG4gICAgICAgIHRoaXMuT2UuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkICYmIGF3YWl0IHRoaXMuWGUoKTtcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY2xpZW50IG1ldGFkYXRhIGluIEluZGV4ZWREYiBhbmQgYXR0ZW1wdHMgdG8gZWl0aGVyIG9idGFpbiBvclxuICAgICAqIGV4dGVuZCB0aGUgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gQXN5bmNocm9ub3VzbHkgbm90aWZpZXMgdGhlXG4gICAgICogcHJpbWFyeSBzdGF0ZSBsaXN0ZW5lciBpZiB0aGUgY2xpZW50IGVpdGhlciBuZXdseSBvYnRhaW5lZCBvciByZWxlYXNlZCBpdHNcbiAgICAgKiBwcmltYXJ5IGxlYXNlLlxuICAgICAqLyAgICBYZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJ1cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnlcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gbnIodCkucHV0KG5ldyBNcyh0aGlzLmNsaWVudElkLCBEYXRlLm5vdygpLCB0aGlzLm5ldHdvcmtFbmFibGVkLCB0aGlzLmluRm9yZWdyb3VuZCkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSkgcmV0dXJuIHRoaXMuc24odCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdCB8fCAodGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5PZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLlFlKCExKSkpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMucm4odCkpKS5uZXh0KChlID0+IHRoaXMuaXNQcmltYXJ5ICYmICFlID8gdGhpcy5vbih0KS5uZXh0KCgoKSA9PiAhMSkpIDogISFlICYmIHRoaXMuY24odCkubmV4dCgoKCkgPT4gITApKSkpKSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgaWYgKEhzKHQpKSBcbiAgICAgICAgICAgIC8vIFByb2NlZWQgd2l0aCB0aGUgZXhpc3Rpbmcgc3RhdGUuIEFueSBzdWJzZXF1ZW50IGFjY2VzcyB0b1xuICAgICAgICAgICAgLy8gSW5kZXhlZERCIHdpbGwgdmVyaWZ5IHRoZSBsZWFzZS5cbiAgICAgICAgICAgIHJldHVybiAkKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJGYWlsZWQgdG8gZXh0ZW5kIG93bmVyIGxlYXNlOiBcIiwgdCksIHRoaXMuaXNQcmltYXJ5O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSB0aHJvdyB0O1xuICAgICAgICAgICAgcmV0dXJuICQoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlJlbGVhc2luZyBvd25lciBsZWFzZSBhZnRlciBlcnJvciBkdXJpbmcgbGVhc2UgcmVmcmVzaFwiLCB0KSwgXG4gICAgICAgICAgICAvKiBpc1ByaW1hcnk9ICovICExO1xuICAgICAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSAhPT0gdCAmJiB0aGlzLk9lLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuUWUodCkpKSwgdGhpcy5pc1ByaW1hcnkgPSB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNuKHQpIHtcbiAgICAgICAgcmV0dXJuIGVyKHQpLmdldChQcy5rZXkpLm5leHQoKHQgPT4ganMucmVzb2x2ZSh0aGlzLmFuKHQpKSkpO1xuICAgIH1cbiAgICB1bih0KSB7XG4gICAgICAgIHJldHVybiBucih0KS5kZWxldGUodGhpcy5jbGllbnRJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHRoZSBnYXJiYWdlIGNvbGxlY3Rpb24gdGhyZXNob2xkIGhhcyBwYXNzZWQsIHBydW5lcyB0aGVcbiAgICAgKiBSZW1vdGVEb2N1bWVudENoYW5nZXMgYW5kIHRoZSBDbGllbnRNZXRhZGF0YSBzdG9yZSBiYXNlZCBvbiB0aGUgbGFzdCB1cGRhdGVcbiAgICAgKiB0aW1lIG9mIGFsbCBjbGllbnRzLlxuICAgICAqLyAgICBhc3luYyBobigpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLmxuKHRoaXMuamUsIDE4ZTUpKSB7XG4gICAgICAgICAgICB0aGlzLmplID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwibWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGVcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGVpKHQsIE1zLnN0b3JlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5MdCgpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdGhpcy5mbih0LCAxOGU1KSwgcyA9IHQuZmlsdGVyKCh0ID0+IC0xID09PSBuLmluZGV4T2YodCkpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIG1ldGFkYXRhIGZvciBjbGllbnRzIHRoYXQgYXJlIG5vIGxvbmdlciBjb25zaWRlcmVkIGFjdGl2ZS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGpzLmZvckVhY2gocywgKHQgPT4gZS5kZWxldGUodC5jbGllbnRJZCkpKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKCgoKSA9PiBbXSkpO1xuICAgICAgICAgICAgLy8gRGVsZXRlIHBvdGVudGlhbCBsZWZ0b3ZlciBlbnRyaWVzIHRoYXQgbWF5IGNvbnRpbnVlIHRvIG1hcmsgdGhlXG4gICAgICAgICAgICAvLyBpbmFjdGl2ZSBjbGllbnRzIGFzIHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlLlxuICAgICAgICAgICAgLy8gSWRlYWxseSB3ZSdkIGRlbGV0ZSB0aGUgSW5kZXhlZERiIGFuZCBMb2NhbFN0b3JhZ2Ugem9tYmllIGVudHJpZXMgZm9yXG4gICAgICAgICAgICAvLyB0aGUgY2xpZW50IGF0b21pY2FsbHksIGJ1dCB3ZSBjYW4ndC4gU28gd2Ugb3B0IHRvIGRlbGV0ZSB0aGUgSW5kZXhlZERiXG4gICAgICAgICAgICAvLyBlbnRyaWVzIGZpcnN0IHRvIGF2b2lkIHBvdGVudGlhbGx5IHJldml2aW5nIGEgem9tYmllZCBjbGllbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ZZSkgZm9yIChjb25zdCBlIG9mIHQpIHRoaXMuWWUucmVtb3ZlSXRlbSh0aGlzLmRuKGUuY2xpZW50SWQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYSByZWN1cnJpbmcgdGltZXIgdG8gdXBkYXRlIHRoZSBjbGllbnQgbWV0YWRhdGEgYW5kIHRvIGVpdGhlclxuICAgICAqIGV4dGVuZCBvciBhY3F1aXJlIHRoZSBwcmltYXJ5IGxlYXNlIGlmIHRoZSBjbGllbnQgaXMgZWxpZ2libGUuXG4gICAgICovICAgIGVuKCkge1xuICAgICAgICB0aGlzLktlID0gdGhpcy5PZS5lbnF1ZXVlQWZ0ZXJEZWxheShcImNsaWVudF9tZXRhZGF0YV9yZWZyZXNoXCIgLyogQ2xpZW50TWV0YWRhdGFSZWZyZXNoICovICwgNGUzLCAoKCkgPT4gdGhpcy5YZSgpLnRoZW4oKCgpID0+IHRoaXMuaG4oKSkpLnRoZW4oKCgpID0+IHRoaXMuZW4oKSkpKSk7XG4gICAgfVxuICAgIC8qKiBDaGVja3Mgd2hldGhlciBgY2xpZW50YCBpcyB0aGUgbG9jYWwgY2xpZW50LiAqLyAgICBhbih0KSB7XG4gICAgICAgIHJldHVybiAhIXQgJiYgdC5vd25lcklkID09PSB0aGlzLmNsaWVudElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFdmFsdWF0ZSB0aGUgc3RhdGUgb2YgYWxsIGFjdGl2ZSBjbGllbnRzIGFuZCBkZXRlcm1pbmUgd2hldGhlciB0aGUgbG9jYWxcbiAgICAgKiBjbGllbnQgaXMgb3IgY2FuIGFjdCBhcyB0aGUgaG9sZGVyIG9mIHRoZSBwcmltYXJ5IGxlYXNlLiBSZXR1cm5zIHdoZXRoZXJcbiAgICAgKiB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGUgbGVhc2UsIGJ1dCBkb2VzIG5vdCBhY3R1YWxseSBhY3F1aXJlIGl0LlxuICAgICAqIE1heSByZXR1cm4gJ2ZhbHNlJyBldmVuIGlmIHRoZXJlIGlzIG5vIGFjdGl2ZSBsZWFzZWhvbGRlciBhbmQgYW5vdGhlclxuICAgICAqIChmb3JlZ3JvdW5kKSBjbGllbnQgc2hvdWxkIGJlY29tZSBsZWFzZWhvbGRlciBpbnN0ZWFkLlxuICAgICAqLyAgICBybih0KSB7XG4gICAgICAgIGlmICh0aGlzLk1lKSByZXR1cm4ganMucmVzb2x2ZSghMCk7XG4gICAgICAgIHJldHVybiBlcih0KS5nZXQoUHMua2V5KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIC8vIEEgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGUgcHJpbWFyeSBsZWFzZSBpZjpcbiAgICAgICAgICAgIC8vIC0gaXRzIG5ldHdvcmsgaXMgZW5hYmxlZCBhbmQgdGhlIGNsaWVudCdzIHRhYiBpcyBpbiB0aGUgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gaXRzIG5ldHdvcmsgaXMgZW5hYmxlZCBhbmQgbm8gb3RoZXIgY2xpZW50J3MgdGFiIGlzIGluIHRoZVxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBldmVyeSBjbGllbnRzIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIHRoZSBjbGllbnQncyB0YWIgaXMgaW4gdGhlXG4gICAgICAgICAgICAvLyAgIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGV2ZXJ5IGNsaWVudHMgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgbm8gb3RoZXIgY2xpZW50J3MgdGFiIGlzIGluXG4gICAgICAgICAgICAvLyAgIHRoZSBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSB0aGUgYGZvcmNlT3duaW5nVGFiYCBzZXR0aW5nIHdhcyBwYXNzZWQgaW4uXG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZSAmJiB0aGlzLmxuKGUubGVhc2VUaW1lc3RhbXBNcywgNWUzKSAmJiAhdGhpcy53bihlLm93bmVySWQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYW4oZSkgJiYgdGhpcy5uZXR3b3JrRW5hYmxlZCkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5hbihlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWUuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIFxuICAgICAgICAgICAgICAgICAgICAvLyBGYWlsIHRoZSBgY2FuQWN0QXNQcmltYXJ5YCBjaGVjayBpZiB0aGUgY3VycmVudCBsZWFzZWhvbGRlciBoYXNcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90IG9wdGVkIGludG8gbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi4gSWYgdGhpcyBoYXBwZW5zIGF0XG4gICAgICAgICAgICAgICAgICAgIC8vIGNsaWVudCBzdGFydHVwLCB3ZSByZWplY3QgdGhlIFByb21pc2UgcmV0dXJuZWQgYnlcbiAgICAgICAgICAgICAgICAgICAgLy8gYGVuYWJsZVBlcnNpc3RlbmNlKClgIGFuZCB0aGUgdXNlciBjYW4gY29udGludWUgdG8gdXNlIEZpcmVzdG9yZVxuICAgICAgICAgICAgICAgICAgICAvLyB3aXRoIGluLW1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBmYWlscyBkdXJpbmcgYSBsZWFzZSByZWZyZXNoLCB3ZSB3aWxsIGluc3RlYWQgYmxvY2sgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIEFzeW5jUXVldWUgZnJvbSBleGVjdXRpbmcgZnVydGhlciBvcGVyYXRpb25zLiBOb3RlIHRoYXQgdGhpcyBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBhY2NlcHRhYmxlIHNpbmNlIG1peGluZyAmIG1hdGNoaW5nIGRpZmZlcmVudCBgc3luY2hyb25pemVUYWJzYFxuICAgICAgICAgICAgICAgICAgICAvLyBzZXR0aW5ncyBpcyBub3Qgc3VwcG9ydGVkLlxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIHRoaXMgY2hlY2sgd2hlbiBgc3luY2hyb25pemVUYWJzYCBjYW5cbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gbG9uZ2VyIGJlIHR1cm5lZCBvZmYuXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgWmkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICEoIXRoaXMubmV0d29ya0VuYWJsZWQgfHwgIXRoaXMuaW5Gb3JlZ3JvdW5kKSB8fCBucih0KS5MdCgpLm5leHQoKHQgPT4gdm9pZCAwID09PSB0aGlzLmZuKHQsIDVlMykuZmluZCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xpZW50SWQgIT09IHQuY2xpZW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9ICF0aGlzLm5ldHdvcmtFbmFibGVkICYmIHQubmV0d29ya0VuYWJsZWQsIG4gPSAhdGhpcy5pbkZvcmVncm91bmQgJiYgdC5pbkZvcmVncm91bmQsIHMgPSB0aGlzLm5ldHdvcmtFbmFibGVkID09PSB0Lm5ldHdvcmtFbmFibGVkO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZSB8fCBuICYmIHMpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKS5uZXh0KCh0ID0+ICh0aGlzLmlzUHJpbWFyeSAhPT0gdCAmJiAkKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgYENsaWVudCAke3QgPyBcImlzXCIgOiBcImlzIG5vdFwifSBlbGlnaWJsZSBmb3IgYSBwcmltYXJ5IGxlYXNlLmApLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIFRoZSBzaHV0ZG93bigpIG9wZXJhdGlvbnMgYXJlIGlkZW1wb3RlbnQgYW5kIGNhbiBiZSBjYWxsZWQgZXZlbiB3aGVuXG4gICAgICAgIC8vIHN0YXJ0KCkgYWJvcnRlZCAoZS5nLiBiZWNhdXNlIGl0IGNvdWxkbid0IGFjcXVpcmUgdGhlIHBlcnNpc3RlbmNlIGxlYXNlKS5cbiAgICAgICAgdGhpcy5CZSA9ICExLCB0aGlzLl9uKCksIHRoaXMuS2UgJiYgKHRoaXMuS2UuY2FuY2VsKCksIHRoaXMuS2UgPSBudWxsKSwgdGhpcy5tbigpLCBcbiAgICAgICAgdGhpcy5nbigpLCBcbiAgICAgICAgLy8gVXNlIGBTaW1wbGVEYi5ydW5UcmFuc2FjdGlvbmAgZGlyZWN0bHkgdG8gYXZvaWQgZmFpbGluZyBpZiBhbm90aGVyIHRhYlxuICAgICAgICAvLyBoYXMgb2J0YWluZWQgdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgIGF3YWl0IHRoaXMuR2UucnVuVHJhbnNhY3Rpb24oXCJzaHV0ZG93blwiLCBcInJlYWR3cml0ZVwiLCBbIFBzLnN0b3JlLCBNcy5zdG9yZSBdLCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IHRpKHQsIFguVCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbihlKS5uZXh0KCgoKSA9PiB0aGlzLnVuKGUpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5HZS5jbG9zZSgpLCBcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBlbnRyeSBtYXJraW5nIHRoZSBjbGllbnQgYXMgem9tYmllZCBmcm9tIExvY2FsU3RvcmFnZSBzaW5jZVxuICAgICAgICAvLyB3ZSBzdWNjZXNzZnVsbHkgZGVsZXRlZCBpdHMgbWV0YWRhdGEgZnJvbSBJbmRleGVkRGIuXG4gICAgICAgIHRoaXMueW4oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBjbGllbnRzIHRoYXQgYXJlIG5vdCB6b21iaWVkIGFuZCBoYXZlIGFuIHVwZGF0ZVRpbWUgd2l0aGluIHRoZVxuICAgICAqIHByb3ZpZGVkIHRocmVzaG9sZC5cbiAgICAgKi8gICAgZm4odCwgZSkge1xuICAgICAgICByZXR1cm4gdC5maWx0ZXIoKHQgPT4gdGhpcy5sbih0LnVwZGF0ZVRpbWVNcywgZSkgJiYgIXRoaXMud24odC5jbGllbnRJZCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgSURzIG9mIHRoZSBjbGllbnRzIHRoYXQgYXJlIGN1cnJlbnRseSBhY3RpdmUuIElmIG11bHRpLXRhYlxuICAgICAqIGlzIG5vdCBzdXBwb3J0ZWQsIHJldHVybnMgYW4gYXJyYXkgdGhhdCBvbmx5IGNvbnRhaW5zIHRoZSBsb2NhbCBjbGllbnQnc1xuICAgICAqIElELlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgcG4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0QWN0aXZlQ2xpZW50c1wiLCBcInJlYWRvbmx5XCIsICh0ID0+IG5yKHQpLkx0KCkubmV4dCgodCA9PiB0aGlzLmZuKHQsIDE4ZTUpLm1hcCgodCA9PiB0LmNsaWVudElkKSkpKSkpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQmU7XG4gICAgfVxuICAgIGdldE11dGF0aW9uUXVldWUodCkge1xuICAgICAgICByZXR1cm4gdmkuWXQodCwgdGhpcy5OLCB0aGlzLkh0LCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnplO1xuICAgIH1cbiAgICBnZXRSZW1vdGVEb2N1bWVudENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5IZTtcbiAgICB9XG4gICAgZ2V0SW5kZXhNYW5hZ2VyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5IdDtcbiAgICB9XG4gICAgZ2V0QnVuZGxlQ2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkplO1xuICAgIH1cbiAgICBydW5UcmFuc2FjdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICQoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlN0YXJ0aW5nIHRyYW5zYWN0aW9uOlwiLCB0KTtcbiAgICAgICAgY29uc3QgcyA9IFwicmVhZG9ubHlcIiA9PT0gZSA/IFwicmVhZG9ubHlcIiA6IFwicmVhZHdyaXRlXCI7XG4gICAgICAgIGxldCBpO1xuICAgICAgICAvLyBEbyBhbGwgdHJhbnNhY3Rpb25zIGFzIHJlYWR3cml0ZSBhZ2FpbnN0IGFsbCBvYmplY3Qgc3RvcmVzLCBzaW5jZSB3ZVxuICAgICAgICAvLyBhcmUgdGhlIG9ubHkgcmVhZGVyL3dyaXRlci5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5HZS5ydW5UcmFuc2FjdGlvbih0LCBzLCBVcywgKHMgPT4gKGkgPSBuZXcgdGkocywgdGhpcy5MZSA/IHRoaXMuTGUubmV4dCgpIDogWC5UKSwgXG4gICAgICAgIFwicmVhZHdyaXRlLXByaW1hcnlcIiA9PT0gZSA/IHRoaXMuc24oaSkubmV4dCgodCA9PiAhIXQgfHwgdGhpcy5ybihpKSkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFlKSB0aHJvdyBPKGBGYWlsZWQgdG8gb2J0YWluIHByaW1hcnkgbGVhc2UgZm9yIGFjdGlvbiAnJHt0fScuYCksIHRoaXMuaXNQcmltYXJ5ID0gITEsIFxuICAgICAgICAgICAgdGhpcy5PZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLlFlKCExKSkpLCBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIHFzKTtcbiAgICAgICAgICAgIHJldHVybiBuKGkpO1xuICAgICAgICB9KSkubmV4dCgodCA9PiB0aGlzLmNuKGkpLm5leHQoKCgpID0+IHQpKSkpIDogdGhpcy5UbihpKS5uZXh0KCgoKSA9PiBuKGkpKSkpKSkudGhlbigodCA9PiAoaS5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIGN1cnJlbnQgdGFiIGlzIHRoZSBwcmltYXJ5IGxlYXNlaG9sZGVyIG9yIGFsdGVybmF0aXZlbHlcbiAgICAgKiB0aGF0IHRoZSBsZWFzZWhvbGRlciBoYXMgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAqL1xuICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhbiBubyBsb25nZXJcbiAgICAvLyBiZSB0dXJuZWQgb2ZmLlxuICAgIFRuKHQpIHtcbiAgICAgICAgcmV0dXJuIGVyKHQpLmdldChQcy5rZXkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgdGhpcy5sbih0LmxlYXNlVGltZXN0YW1wTXMsIDVlMykgJiYgIXRoaXMud24odC5vd25lcklkKSAmJiAhdGhpcy5hbih0KSAmJiAhKHRoaXMuTWUgfHwgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiAmJiB0LmFsbG93VGFiU3luY2hyb25pemF0aW9uKSkgdGhyb3cgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBaaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT2J0YWlucyBvciBleHRlbmRzIHRoZSBuZXcgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gVGhpc1xuICAgICAqIG1ldGhvZCBkb2VzIG5vdCB2ZXJpZnkgdGhhdCB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGlzIGxlYXNlLlxuICAgICAqLyAgICBjbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgUHModGhpcy5jbGllbnRJZCwgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiwgRGF0ZS5ub3coKSk7XG4gICAgICAgIHJldHVybiBlcih0KS5wdXQoUHMua2V5LCBlKTtcbiAgICB9XG4gICAgc3RhdGljIGJ0KCkge1xuICAgICAgICByZXR1cm4gV3MuYnQoKTtcbiAgICB9XG4gICAgLyoqIENoZWNrcyB0aGUgcHJpbWFyeSBsZWFzZSBhbmQgcmVtb3ZlcyBpdCBpZiB3ZSBhcmUgdGhlIGN1cnJlbnQgcHJpbWFyeS4gKi8gICAgb24odCkge1xuICAgICAgICBjb25zdCBlID0gZXIodCk7XG4gICAgICAgIHJldHVybiBlLmdldChQcy5rZXkpLm5leHQoKHQgPT4gdGhpcy5hbih0KSA/ICgkKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJSZWxlYXNpbmcgcHJpbWFyeSBsZWFzZS5cIiksIFxuICAgICAgICBlLmRlbGV0ZShQcy5rZXkpKSA6IGpzLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICAvKiogVmVyaWZpZXMgdGhhdCBgdXBkYXRlVGltZU1zYCBpcyB3aXRoaW4gYG1heEFnZU1zYC4gKi8gICAgbG4odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuICEodCA8IG4gLSBlKSAmJiAoISh0ID4gbikgfHwgKE8oYERldGVjdGVkIGFuIHVwZGF0ZSB0aW1lIHRoYXQgaXMgaW4gdGhlIGZ1dHVyZTogJHt0fSA+ICR7bn1gKSwgXG4gICAgICAgICExKSk7XG4gICAgfVxuICAgIFplKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLmRvY3VtZW50ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICYmICh0aGlzLnFlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5PZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5pbkZvcmVncm91bmQgPSBcInZpc2libGVcIiA9PT0gdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUsIFxuICAgICAgICAgICAgdGhpcy5YZSgpKSkpO1xuICAgICAgICB9LCB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMucWUpLCB0aGlzLmluRm9yZWdyb3VuZCA9IFwidmlzaWJsZVwiID09PSB0aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSk7XG4gICAgfVxuICAgIG1uKCkge1xuICAgICAgICB0aGlzLnFlICYmICh0aGlzLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMucWUpLCB0aGlzLnFlID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGFjaGVzIGEgd2luZG93LnVubG9hZCBoYW5kbGVyIHRoYXQgd2lsbCBzeW5jaHJvbm91c2x5IHdyaXRlIG91clxuICAgICAqIGNsaWVudElkIHRvIGEgXCJ6b21iaWUgY2xpZW50IGlkXCIgbG9jYXRpb24gaW4gTG9jYWxTdG9yYWdlLiBUaGlzIGNhbiBiZSB1c2VkXG4gICAgICogYnkgdGFicyB0cnlpbmcgdG8gYWNxdWlyZSB0aGUgcHJpbWFyeSBsZWFzZSB0byBkZXRlcm1pbmUgdGhhdCB0aGUgbGVhc2VcbiAgICAgKiBpcyBubyBsb25nZXIgdmFsaWQgZXZlbiBpZiB0aGUgdGltZXN0YW1wIGlzIHJlY2VudC4gVGhpcyBpcyBwYXJ0aWN1bGFybHlcbiAgICAgKiBpbXBvcnRhbnQgZm9yIHRoZSByZWZyZXNoIGNhc2UgKHNvIHRoZSB0YWIgY29ycmVjdGx5IHJlLWFjcXVpcmVzIHRoZVxuICAgICAqIHByaW1hcnkgbGVhc2UpLiBMb2NhbFN0b3JhZ2UgaXMgdXNlZCBmb3IgdGhpcyByYXRoZXIgdGhhbiBJbmRleGVkRGIgYmVjYXVzZVxuICAgICAqIGl0IGlzIGEgc3luY2hyb25vdXMgQVBJIGFuZCBzbyBjYW4gYmUgdXNlZCByZWxpYWJseSBmcm9tICBhbiB1bmxvYWRcbiAgICAgKiBoYW5kbGVyLlxuICAgICAqLyAgICB0bigpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgKG51bGwgPT09ICh0ID0gdGhpcy53aW5kb3cpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuYWRkRXZlbnRMaXN0ZW5lcikgJiYgKHRoaXMuVWUgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyBOb3RlOiBJbiB0aGVvcnksIHRoaXMgc2hvdWxkIGJlIHNjaGVkdWxlZCBvbiB0aGUgQXN5bmNRdWV1ZSBzaW5jZSBpdFxuICAgICAgICAgICAgLy8gYWNjZXNzZXMgaW50ZXJuYWwgc3RhdGUuIFdlIGV4ZWN1dGUgdGhpcyBjb2RlIGRpcmVjdGx5IGR1cmluZyBzaHV0ZG93blxuICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIGl0IGdldHMgYSBjaGFuY2UgdG8gcnVuLlxuICAgICAgICAgICAgdGhpcy5fbigpLCBpc1NhZmFyaSgpICYmIG5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKFwiVmVyc2lvbi8xNFwiKSAmJiBcbiAgICAgICAgICAgIC8vIE9uIFNhZmFyaSAxNCwgd2UgZG8gbm90IHJ1biBhbnkgY2xlYW51cCBhY3Rpb25zIGFzIGl0IG1pZ2h0IHRyaWdnZXJcbiAgICAgICAgICAgIC8vIGEgYnVnIHRoYXQgcHJldmVudHMgU2FmYXJpIGZyb20gcmUtb3BlbmluZyBJbmRleGVkREIgZHVyaW5nIHRoZVxuICAgICAgICAgICAgLy8gbmV4dCBwYWdlIGxvYWQuXG4gICAgICAgICAgICAvLyBTZWUgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTIyNjU0N1xuICAgICAgICAgICAgdGhpcy5PZS5lbnRlclJlc3RyaWN0ZWRNb2RlKC8qIHB1cmdlRXhpc3RpbmdUYXNrcz0gKi8gITApLCB0aGlzLk9lLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IHRoaXMuc2h1dGRvd24oKSkpO1xuICAgICAgICB9LCB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgdGhpcy5VZSkpO1xuICAgIH1cbiAgICBnbigpIHtcbiAgICAgICAgdGhpcy5VZSAmJiAodGhpcy53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIHRoaXMuVWUpLCB0aGlzLlVlID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBhIGNsaWVudCBpcyBcInpvbWJpZWRcIiBiYXNlZCBvbiBpdHMgTG9jYWxTdG9yYWdlIGVudHJ5LlxuICAgICAqIENsaWVudHMgYmVjb21lIHpvbWJpZWQgd2hlbiB0aGVpciB0YWIgY2xvc2VzIHdpdGhvdXQgcnVubmluZyBhbGwgb2YgdGhlXG4gICAgICogY2xlYW51cCBsb2dpYyBpbiBgc2h1dGRvd24oKWAuXG4gICAgICovICAgIHduKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBuID0gbnVsbCAhPT0gKG51bGwgPT09IChlID0gdGhpcy5ZZSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5nZXRJdGVtKHRoaXMuZG4odCkpKTtcbiAgICAgICAgICAgIHJldHVybiAkKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgYENsaWVudCAnJHt0fScgJHtuID8gXCJpc1wiIDogXCJpcyBub3RcIn0gem9tYmllZCBpbiBMb2NhbFN0b3JhZ2VgKSwgXG4gICAgICAgICAgICBuO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBHcmFjZWZ1bGx5IGhhbmRsZSBpZiBMb2NhbFN0b3JhZ2UgaXNuJ3Qgd29ya2luZy5cbiAgICAgICAgICAgIHJldHVybiBPKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJGYWlsZWQgdG8gZ2V0IHpvbWJpZWQgY2xpZW50IGlkLlwiLCB0KSwgITE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjb3JkIGNsaWVudCBhcyB6b21iaWVkIChhIGNsaWVudCB0aGF0IGhhZCBpdHMgdGFiIGNsb3NlZCkuIFpvbWJpZWRcbiAgICAgKiBjbGllbnRzIGFyZSBpZ25vcmVkIGR1cmluZyBwcmltYXJ5IHRhYiBzZWxlY3Rpb24uXG4gICAgICovICAgIF9uKCkge1xuICAgICAgICBpZiAodGhpcy5ZZSkgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuWWUuc2V0SXRlbSh0aGlzLmRuKHRoaXMuY2xpZW50SWQpLCBTdHJpbmcoRGF0ZS5ub3coKSkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBHcmFjZWZ1bGx5IGhhbmRsZSBpZiBMb2NhbFN0b3JhZ2UgaXNuJ3QgYXZhaWxhYmxlIC8gd29ya2luZy5cbiAgICAgICAgICAgIE8oXCJGYWlsZWQgdG8gc2V0IHpvbWJpZSBjbGllbnQgaWQuXCIsIHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBSZW1vdmVzIHRoZSB6b21iaWVkIGNsaWVudCBlbnRyeSBpZiBpdCBleGlzdHMuICovICAgIHluKCkge1xuICAgICAgICBpZiAodGhpcy5ZZSkgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuWWUucmVtb3ZlSXRlbSh0aGlzLmRuKHRoaXMuY2xpZW50SWQpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gSWdub3JlXG4gICAgICAgIH1cbiAgICB9XG4gICAgZG4odCkge1xuICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV96b21iaWVfJHt0aGlzLnBlcnNpc3RlbmNlS2V5fV8ke3R9YDtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBwcmltYXJ5IGNsaWVudCBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gZXIodCkge1xuICAgIHJldHVybiBlaSh0LCBQcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIG5yKHQpIHtcbiAgICByZXR1cm4gZWkodCwgTXMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB1c2VkIGFzIGEgcHJlZml4IHdoZW4gc3RvcmluZyBkYXRhIGluIEluZGV4ZWREQiBhbmRcbiAqIExvY2FsU3RvcmFnZS5cbiAqLyBmdW5jdGlvbiBzcih0LCBlKSB7XG4gICAgLy8gVXNlIHR3byBkaWZmZXJlbnQgcHJlZml4IGZvcm1hdHM6XG4gICAgLy8gICAqIGZpcmVzdG9yZSAvIHBlcnNpc3RlbmNlS2V5IC8gcHJvamVjdElEIC4gZGF0YWJhc2VJRCAvIC4uLlxuICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAvIC4uLlxuICAgIC8vIHByb2plY3RJRHMgYXJlIEROUy1jb21wYXRpYmxlIG5hbWVzIGFuZCBjYW5ub3QgY29udGFpbiBkb3RzXG4gICAgLy8gc28gdGhlcmUncyBubyBkYW5nZXIgb2YgY29sbGlzaW9ucy5cbiAgICBsZXQgbiA9IHQucHJvamVjdElkO1xuICAgIHJldHVybiB0LmlzRGVmYXVsdERhdGFiYXNlIHx8IChuICs9IFwiLlwiICsgdC5kYXRhYmFzZSksIFwiZmlyZXN0b3JlL1wiICsgZSArIFwiL1wiICsgbiArIFwiL1wiO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgaXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHQsIHRoaXMuRW4gPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSByZWFkb25seSB2aWV3IG9mIHRoZSBsb2NhbCBzdGF0ZSBvZiBhbGwgZG9jdW1lbnRzIHdlJ3JlIHRyYWNraW5nIChpLmUuIHdlXG4gKiBoYXZlIGEgY2FjaGVkIHZlcnNpb24gaW4gcmVtb3RlRG9jdW1lbnRDYWNoZSBvciBsb2NhbCBtdXRhdGlvbnMgZm9yIHRoZVxuICogZG9jdW1lbnQpLiBUaGUgdmlldyBpcyBjb21wdXRlZCBieSBhcHBseWluZyB0aGUgbXV0YXRpb25zIGluIHRoZVxuICogTXV0YXRpb25RdWV1ZSB0byB0aGUgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqLyBjbGFzcyByciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLkhlID0gdCwgdGhpcy5JbiA9IGUsIHRoaXMuSHQgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50IGlkZW50aWZpZWQgYnkgYGtleWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBMb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudCBvciBudWxsIGlmIHdlIGRvbid0IGhhdmUgYW55IGNhY2hlZFxuICAgICAqIHN0YXRlIGZvciBpdC5cbiAgICAgKi8gICAgQW4odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Jbi5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSh0LCBlKS5uZXh0KChuID0+IHRoaXMuUm4odCwgZSwgbikpKTtcbiAgICB9XG4gICAgLyoqIEludGVybmFsIHZlcnNpb24gb2YgYGdldERvY3VtZW50YCB0aGF0IGFsbG93cyByZXVzaW5nIGJhdGNoZXMuICovICAgIFJuKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSGUuZ2V0RW50cnkodCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgbikgZS5hcHBseVRvTG9jYWxWaWV3KHQpO1xuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgdmlldyBvZiB0aGUgZ2l2ZW4gYGRvY3NgIGFzIHRoZXkgd291bGQgYXBwZWFyIGFmdGVyIGFwcGx5aW5nXG4gICAgLy8gYWxsIG11dGF0aW9ucyBpbiB0aGUgZ2l2ZW4gYGJhdGNoZXNgLlxuICAgIGJuKHQsIGUpIHtcbiAgICAgICAgdC5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHQuYXBwbHlUb0xvY2FsVmlldyhuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudHMgaWRlbnRpZmllZCBieSBga2V5c2AuXG4gICAgICpcbiAgICAgKiBJZiB3ZSBkb24ndCBoYXZlIGNhY2hlZCBzdGF0ZSBmb3IgYSBkb2N1bWVudCBpbiBga2V5c2AsIGEgTm9Eb2N1bWVudCB3aWxsXG4gICAgICogYmUgc3RvcmVkIGZvciB0aGF0IGtleSBpbiB0aGUgcmVzdWx0aW5nIHNldC5cbiAgICAgKi8gICAgUG4odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5IZS5nZXRFbnRyaWVzKHQsIGUpLm5leHQoKGUgPT4gdGhpcy52bih0LCBlKS5uZXh0KCgoKSA9PiBlKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgbG9jYWwgdmlldyB0aGUgZ2l2ZW4gYGJhc2VEb2NzYCB3aXRob3V0IHJldHJpZXZpbmcgZG9jdW1lbnRzXG4gICAgICogZnJvbSB0aGUgbG9jYWwgc3RvcmUuXG4gICAgICovICAgIHZuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSW4uZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpLm5leHQoKHQgPT4gdGhpcy5ibihlLCB0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHZpZXcgb2YgYWxsIGRvY3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbi5cbiAgICAgKiBAcGFyYW0gcXVlcnkgLSBUaGUgcXVlcnkgdG8gbWF0Y2ggZG9jdW1lbnRzIGFnYWluc3QuXG4gICAgICogQHBhcmFtIHNpbmNlUmVhZFRpbWUgLSBJZiBub3Qgc2V0IHRvIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgcmV0dXJuIG9ubHlcbiAgICAgKiAgICAgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHJlYWQgc2luY2UgdGhpcyBzbmFwc2hvdCB2ZXJzaW9uIChleGNsdXNpdmUpLlxuICAgICAqLyAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4pIHtcbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHF1ZXJ5IG1hdGNoZXMgYSBzaW5nbGUgZG9jdW1lbnQgYnkgcGF0aCAocmF0aGVyIHRoYW4gYVxuICogY29sbGVjdGlvbikuXG4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBQdC5pc0RvY3VtZW50S2V5KHQucGF0aCkgJiYgbnVsbCA9PT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgMCA9PT0gdC5maWx0ZXJzLmxlbmd0aDtcbiAgICAgICAgfShlKSA/IHRoaXMuVm4odCwgZS5wYXRoKSA6IHBlKGUpID8gdGhpcy5Tbih0LCBlLCBuKSA6IHRoaXMuRG4odCwgZSwgbik7XG4gICAgfVxuICAgIFZuKHQsIGUpIHtcbiAgICAgICAgLy8gSnVzdCBkbyBhIHNpbXBsZSBkb2N1bWVudCBsb29rdXAuXG4gICAgICAgIHJldHVybiB0aGlzLkFuKHQsIG5ldyBQdChlKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBsZXQgZSA9IEluKCk7XG4gICAgICAgICAgICByZXR1cm4gdC5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAoZSA9IGUuaW5zZXJ0KHQua2V5LCB0KSksIGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgU24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gZS5jb2xsZWN0aW9uR3JvdXA7XG4gICAgICAgIGxldCBpID0gSW4oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuSHQuZ2V0Q29sbGVjdGlvblBhcmVudHModCwgcykubmV4dCgociA9PiBqcy5mb3JFYWNoKHIsIChyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBmZShlLCBcbiAgICAgICAgICAgICAgICAvKmNvbGxlY3Rpb25Hcm91cD0qLyBudWxsLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIHF1ZXJ5IGRvZXMgbm90IHNwZWNpZnkgYW55IHF1ZXJ5IGNvbnN0cmFpbnRzIHRoYXRcbiAqIGNvdWxkIHJlbW92ZSByZXN1bHRzLlxuICovIChlLCByLmNoaWxkKHMpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkRuKHQsIG8sIG4pLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KHQsIGUpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKSkpO1xuICAgIH1cbiAgICBEbih0LCBlLCBuKSB7XG4gICAgICAgIC8vIFF1ZXJ5IHRoZSByZW1vdGUgZG9jdW1lbnRzIGFuZCBvdmVybGF5IG11dGF0aW9ucy5cbiAgICAgICAgbGV0IHMsIGk7XG4gICAgICAgIHJldHVybiB0aGlzLkhlLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikubmV4dCgobiA9PiAocyA9IG4sIHRoaXMuSW4uZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkpKSkubmV4dCgoZSA9PiAoaSA9IGUsIFxuICAgICAgICB0aGlzLkNuKHQsIGksIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgcyA9IHQ7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgaSkgZm9yIChjb25zdCBlIG9mIHQubXV0YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGUua2V5O1xuICAgICAgICAgICAgICAgIGxldCBpID0gcy5nZXQobik7XG4gICAgICAgICAgICAgICAgbnVsbCA9PSBpICYmIChcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgaW52YWxpZCBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgb24gdG9wIG9mXG4gICAgICAgICAgICAgICAgaSA9IEt0Lm5ld0ludmFsaWREb2N1bWVudChuKSwgcyA9IHMuaW5zZXJ0KG4sIGkpKSwgWWUoZSwgaSwgdC5sb2NhbFdyaXRlVGltZSksIGkuaXNGb3VuZERvY3VtZW50KCkgfHwgKHMgPSBzLnJlbW92ZShuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSkpKS5uZXh0KCgoKSA9PiAoXG4gICAgICAgIC8vIEZpbmFsbHksIGZpbHRlciBvdXQgYW55IGRvY3VtZW50cyB0aGF0IGRvbid0IGFjdHVhbGx5IG1hdGNoXG4gICAgICAgIC8vIHRoZSBxdWVyeS5cbiAgICAgICAgcy5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgUGUoZSwgbikgfHwgKHMgPSBzLnJlbW92ZSh0KSk7XG4gICAgICAgIH0pKSwgcykpKTtcbiAgICB9XG4gICAgQ24odCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IFBuKCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSBmb3IgKGNvbnN0IGUgb2YgdC5tdXRhdGlvbnMpIGUgaW5zdGFuY2VvZiBubiAmJiBudWxsID09PSBuLmdldChlLmtleSkgJiYgKHMgPSBzLmFkZChlLmtleSkpO1xuICAgICAgICBsZXQgaSA9IG47XG4gICAgICAgIHJldHVybiB0aGlzLkhlLmdldEVudHJpZXModCwgcykubmV4dCgodCA9PiAodC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAoaSA9IGkuaW5zZXJ0KHQsIGUpKTtcbiAgICAgICAgfSkpLCBpKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBzZXQgb2YgY2hhbmdlcyB0byB3aGF0IGRvY3VtZW50cyBhcmUgY3VycmVudGx5IGluIHZpZXcgYW5kIG91dCBvZiB2aWV3IGZvclxuICogYSBnaXZlbiBxdWVyeS4gVGhlc2UgY2hhbmdlcyBhcmUgc2VudCB0byB0aGUgTG9jYWxTdG9yZSBieSB0aGUgVmlldyAodmlhXG4gKiB0aGUgU3luY0VuZ2luZSkgYW5kIGFyZSB1c2VkIHRvIHBpbiAvIHVucGluIGRvY3VtZW50cyBhcyBhcHByb3ByaWF0ZS5cbiAqLyBjbGFzcyBvciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5mcm9tQ2FjaGUgPSBlLCB0aGlzLk5uID0gbiwgdGhpcy54biA9IHM7XG4gICAgfVxuICAgIHN0YXRpYyBrbih0LCBlKSB7XG4gICAgICAgIGxldCBuID0gUG4oKSwgcyA9IFBuKCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlLmRvY0NoYW5nZXMpIHN3aXRjaCAodC50eXBlKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIEFkZGVkICovIDpcbiAgICAgICAgICAgIG4gPSBuLmFkZCh0LmRvYy5rZXkpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDEgLyogUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICBzID0gcy5hZGQodC5kb2Mua2V5KTtcbiAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IG9yKHQsIGUuZnJvbUNhY2hlLCBuLCBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcXVlcnkgZW5naW5lIHRoYXQgdGFrZXMgYWR2YW50YWdlIG9mIHRoZSB0YXJnZXQgZG9jdW1lbnQgbWFwcGluZyBpbiB0aGVcbiAqIFF1ZXJ5Q2FjaGUuIFF1ZXJ5IGV4ZWN1dGlvbiBpcyBvcHRpbWl6ZWQgYnkgb25seSByZWFkaW5nIHRoZSBkb2N1bWVudHMgdGhhdFxuICogcHJldmlvdXNseSBtYXRjaGVkIGEgcXVlcnkgcGx1cyBhbnkgZG9jdW1lbnRzIHRoYXQgd2VyZSBlZGl0ZWQgYWZ0ZXIgdGhlXG4gKiBxdWVyeSB3YXMgbGFzdCBsaXN0ZW5lZCB0by5cbiAqXG4gKiBUaGVyZSBhcmUgc29tZSBjYXNlcyB3aGVuIHRoaXMgb3B0aW1pemF0aW9uIGlzIG5vdCBndWFyYW50ZWVkIHRvIHByb2R1Y2VcbiAqIHRoZSBzYW1lIHJlc3VsdHMgYXMgZnVsbCBjb2xsZWN0aW9uIHNjYW5zLiBJbiB0aGVzZSBjYXNlcywgcXVlcnlcbiAqIHByb2Nlc3NpbmcgZmFsbHMgYmFjayB0byBmdWxsIHNjYW5zLiBUaGVzZSBjYXNlcyBhcmU6XG4gKlxuICogLSBMaW1pdCBxdWVyaWVzIHdoZXJlIGEgZG9jdW1lbnQgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSBwcmV2aW91c2x5IG5vIGxvbmdlclxuICogICBtYXRjaGVzIHRoZSBxdWVyeS5cbiAqXG4gKiAtIExpbWl0IHF1ZXJpZXMgd2hlcmUgYSBkb2N1bWVudCBlZGl0IG1heSBjYXVzZSB0aGUgZG9jdW1lbnQgdG8gc29ydCBiZWxvd1xuICogICBhbm90aGVyIGRvY3VtZW50IHRoYXQgaXMgaW4gdGhlIGxvY2FsIGNhY2hlLlxuICpcbiAqIC0gUXVlcmllcyB0aGF0IGhhdmUgbmV2ZXIgYmVlbiBDVVJSRU5UIG9yIGZyZWUgb2YgbGltYm8gZG9jdW1lbnRzLlxuICovIGNsYXNzIGNyIHtcbiAgICAvKiogU2V0cyB0aGUgZG9jdW1lbnQgdmlldyB0byBxdWVyeSBhZ2FpbnN0LiAqL1xuICAgICRuKHQpIHtcbiAgICAgICAgdGhpcy5PbiA9IHQ7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGFsbCBsb2NhbCBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIHNwZWNpZmllZCBxdWVyeS4gKi8gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBtYXRjaCBhbGwgZG9jdW1lbnRzIGRvbid0IGJlbmVmaXQgZnJvbSB1c2luZ1xuICAgICAgICAvLyBrZXktYmFzZWQgbG9va3Vwcy4gSXQgaXMgbW9yZSBlZmZpY2llbnQgdG8gc2NhbiBhbGwgZG9jdW1lbnRzIGluIGFcbiAgICAgICAgLy8gY29sbGVjdGlvbiwgcmF0aGVyIHRoYW4gdG8gcGVyZm9ybSBpbmRpdmlkdWFsIGxvb2t1cHMuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gdC5maWx0ZXJzLmxlbmd0aCAmJiBudWxsID09PSB0LmxpbWl0ICYmIG51bGwgPT0gdC5zdGFydEF0ICYmIG51bGwgPT0gdC5lbmRBdCAmJiAoMCA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoIHx8IDEgPT09IHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAmJiB0LmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZC5pc0tleUZpZWxkKCkpO1xuICAgICAgICB9KGUpIHx8IG4uaXNFcXVhbChydC5taW4oKSkgPyB0aGlzLkZuKHQsIGUpIDogdGhpcy5Pbi5Qbih0LCBzKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLk1uKGUsIGkpO1xuICAgICAgICAgICAgcmV0dXJuIChfZShlKSB8fCBtZShlKSkgJiYgdGhpcy5MbihlLmxpbWl0VHlwZSwgciwgcywgbikgPyB0aGlzLkZuKHQsIGUpIDogKHgoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiAkKFwiUXVlcnlFbmdpbmVcIiwgXCJSZS11c2luZyBwcmV2aW91cyByZXN1bHQgZnJvbSAlcyB0byBleGVjdXRlIHF1ZXJ5OiAlc1wiLCBuLnRvU3RyaW5nKCksIGJlKGUpKSwgXG4gICAgICAgICAgICB0aGlzLk9uLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikubmV4dCgodCA9PiAoXG4gICAgICAgICAgICAvLyBXZSBtZXJnZSBgcHJldmlvdXNSZXN1bHRzYCBpbnRvIGB1cGRhdGVSZXN1bHRzYCwgc2luY2VcbiAgICAgICAgICAgIC8vIGB1cGRhdGVSZXN1bHRzYCBpcyBhbHJlYWR5IGEgRG9jdW1lbnRNYXAuIElmIGEgZG9jdW1lbnQgaXNcbiAgICAgICAgICAgIC8vIGNvbnRhaW5lZCBpbiBib3RoIGxpc3RzLCB0aGVuIGl0cyBjb250ZW50cyBhcmUgdGhlIHNhbWUuXG4gICAgICAgICAgICByLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIHQgPSB0Lmluc2VydChlLmtleSwgZSk7XG4gICAgICAgICAgICB9KSksIHQpKSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIHNlZW4gYSBzbmFwc2hvdCB3aXRob3V0IGxpbWJvIGZyZWUgZG9jdW1lbnRzXG4gICAgICAgIC8vIHNob3VsZCBhbHNvIGJlIHJ1biBhcyBhIGZ1bGwgY29sbGVjdGlvbiBzY2FuLlxuICAgICAgICB9XG4gICAgLyoqIEFwcGxpZXMgdGhlIHF1ZXJ5IGZpbHRlciBhbmQgc29ydGluZyB0byB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiAgKi8gICAgTW4odCwgZSkge1xuICAgICAgICAvLyBTb3J0IHRoZSBkb2N1bWVudHMgYW5kIHJlLWFwcGx5IHRoZSBxdWVyeSBmaWx0ZXIgc2luY2UgcHJldmlvdXNseVxuICAgICAgICAvLyBtYXRjaGluZyBkb2N1bWVudHMgZG8gbm90IG5lY2Vzc2FyaWx5IHN0aWxsIG1hdGNoIHRoZSBxdWVyeS5cbiAgICAgICAgbGV0IG4gPSBuZXcgZ24odmUodCkpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgcykgPT4ge1xuICAgICAgICAgICAgUGUodCwgcykgJiYgKG4gPSBuLmFkZChzKSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiBhIGxpbWl0IHF1ZXJ5IG5lZWRzIHRvIGJlIHJlZmlsbGVkIGZyb20gY2FjaGUsIG1ha2luZyBpdFxuICAgICAqIGluZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNvcnRlZFByZXZpb3VzUmVzdWx0cyAtIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSB3aGVuIGl0XG4gICAgICogd2FzIGxhc3Qgc3luY2hyb25pemVkLCBzb3J0ZWQgYnkgdGhlIHF1ZXJ5J3MgY29tcGFyYXRvci5cbiAgICAgKiBAcGFyYW0gcmVtb3RlS2V5cyAtIFRoZSBkb2N1bWVudCBrZXlzIHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgYXQgdGhlIGxhc3RcbiAgICAgKiBzbmFwc2hvdC5cbiAgICAgKiBAcGFyYW0gbGltYm9GcmVlU25hcHNob3RWZXJzaW9uIC0gVGhlIHZlcnNpb24gb2YgdGhlIHNuYXBzaG90IHdoZW4gdGhlXG4gICAgICogcXVlcnkgd2FzIGxhc3Qgc3luY2hyb25pemVkLlxuICAgICAqLyAgICBMbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFRoZSBxdWVyeSBuZWVkcyB0byBiZSByZWZpbGxlZCBpZiBhIHByZXZpb3VzbHkgbWF0Y2hpbmcgZG9jdW1lbnQgbm9cbiAgICAgICAgLy8gbG9uZ2VyIG1hdGNoZXMuXG4gICAgICAgIGlmIChuLnNpemUgIT09IGUuc2l6ZSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBMaW1pdCBxdWVyaWVzIGFyZSBub3QgZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgcXVlcnkgZXhlY3V0aW9uIGlmIHRoZXJlIGlzXG4gICAgICAgIC8vIGEgcG90ZW50aWFsIHRoYXQgYW4gb2xkZXIgZG9jdW1lbnQgZnJvbSBjYWNoZSBub3cgc29ydHMgYmVmb3JlIGEgZG9jdW1lbnRcbiAgICAgICAgLy8gdGhhdCB3YXMgcHJldmlvdXNseSBwYXJ0IG9mIHRoZSBsaW1pdC4gVGhpcywgaG93ZXZlciwgY2FuIG9ubHkgaGFwcGVuIGlmXG4gICAgICAgIC8vIHRoZSBkb2N1bWVudCBhdCB0aGUgZWRnZSBvZiB0aGUgbGltaXQgZ29lcyBvdXQgb2YgbGltaXQuXG4gICAgICAgIC8vIElmIGEgZG9jdW1lbnQgdGhhdCBpcyBub3QgdGhlIGxpbWl0IGJvdW5kYXJ5IHNvcnRzIGRpZmZlcmVudGx5LFxuICAgICAgICAvLyB0aGUgYm91bmRhcnkgb2YgdGhlIGxpbWl0IGl0c2VsZiBkaWQgbm90IGNoYW5nZSBhbmQgZG9jdW1lbnRzIGZyb20gY2FjaGVcbiAgICAgICAgLy8gd2lsbCBjb250aW51ZSB0byBiZSBcInJlamVjdGVkXCIgYnkgdGhpcyBib3VuZGFyeS4gVGhlcmVmb3JlLCB3ZSBjYW4gaWdub3JlXG4gICAgICAgIC8vIGFueSBtb2RpZmljYXRpb25zIHRoYXQgZG9uJ3QgYWZmZWN0IHRoZSBsYXN0IGRvY3VtZW50LlxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBcIkZcIiAvKiBGaXJzdCAqLyA9PT0gdCA/IGUubGFzdCgpIDogZS5maXJzdCgpO1xuICAgICAgICByZXR1cm4gISFpICYmIChpLmhhc1BlbmRpbmdXcml0ZXMgfHwgaS52ZXJzaW9uLmNvbXBhcmVUbyhzKSA+IDApO1xuICAgIH1cbiAgICBGbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB4KCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgJChcIlF1ZXJ5RW5naW5lXCIsIFwiVXNpbmcgZnVsbCBjb2xsZWN0aW9uIHNjYW4gdG8gZXhlY3V0ZSBxdWVyeTpcIiwgYmUoZSkpLCBcbiAgICAgICAgdGhpcy5Pbi5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIHJ0Lm1pbigpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltcGxlbWVudHMgYExvY2FsU3RvcmVgIGludGVyZmFjZS5cbiAqXG4gKiBOb3RlOiBzb21lIGZpZWxkIGRlZmluZWQgaW4gdGhpcyBjbGFzcyBtaWdodCBoYXZlIHB1YmxpYyBhY2Nlc3MgbGV2ZWwsIGJ1dFxuICogdGhlIGNsYXNzIGlzIG5vdCBleHBvcnRlZCBzbyB0aGV5IGFyZSBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGlzIG1vZHVsZS5cbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGltcGxlbWVudCBvcHRpb25hbCBmZWF0dXJlcyAobGlrZSBidW5kbGVzKSBpbiBmcmVlXG4gKiBmdW5jdGlvbnMsIHN1Y2ggdGhhdCB0aGV5IGFyZSB0cmVlLXNoYWtlYWJsZS5cbiAqL1xuY2xhc3MgYXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbiAgICB0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCB0aGlzLkJuID0gZSwgdGhpcy5OID0gcywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0SUQgdG8gZGF0YSBhYm91dCBpdHMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFdlIGFyZSB1c2luZyBhbiBpbW11dGFibGUgZGF0YSBzdHJ1Y3R1cmUgb24gV2ViIHRvIG1ha2UgcmUtcnVuc1xuICAgICAgICAgKiBvZiBgYXBwbHlSZW1vdGVFdmVudCgpYCBpZGVtcG90ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5VbiA9IG5ldyB3bihldCksIFxuICAgICAgICAvKiogTWFwcyBhIHRhcmdldCB0byBpdHMgdGFyZ2V0SUQuICovXG4gICAgICAgIC8vIFRPRE8od3VhbmR5KTogRXZhbHVhdGUgaWYgVGFyZ2V0SWQgY2FuIGJlIHBhcnQgb2YgVGFyZ2V0LlxuICAgICAgICB0aGlzLnFuID0gbmV3IGppKCh0ID0+IFd0KHQpKSwgenQpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByZWFkIHRpbWUgb2YgdGhlIGxhc3QgZW50cnkgcHJvY2Vzc2VkIGJ5IGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLktuID0gcnQubWluKCksIHRoaXMuSW4gPSB0LmdldE11dGF0aW9uUXVldWUobiksIHRoaXMuam4gPSB0LmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSwgXG4gICAgICAgIHRoaXMuemUgPSB0LmdldFRhcmdldENhY2hlKCksIHRoaXMuUW4gPSBuZXcgcnIodGhpcy5qbiwgdGhpcy5JbiwgdGhpcy5wZXJzaXN0ZW5jZS5nZXRJbmRleE1hbmFnZXIoKSksIFxuICAgICAgICB0aGlzLkplID0gdC5nZXRCdW5kbGVDYWNoZSgpLCB0aGlzLkJuLiRuKHRoaXMuUW4pO1xuICAgIH1cbiAgICBjb2xsZWN0R2FyYmFnZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQ29sbGVjdCBnYXJiYWdlXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKGUgPT4gdC5jb2xsZWN0KGUsIHRoaXMuVW4pKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB1cihcbi8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbnQsIGUsIG4sIHMpIHtcbiAgICByZXR1cm4gbmV3IGFyKHQsIGUsIG4sIHMpO1xufVxuXG4vKipcbiAqIFRlbGxzIHRoZSBMb2NhbFN0b3JlIHRoYXQgdGhlIGN1cnJlbnRseSBhdXRoZW50aWNhdGVkIHVzZXIgaGFzIGNoYW5nZWQuXG4gKlxuICogSW4gcmVzcG9uc2UgdGhlIGxvY2FsIHN0b3JlIHN3aXRjaGVzIHRoZSBtdXRhdGlvbiBxdWV1ZSB0byB0aGUgbmV3IHVzZXIgYW5kXG4gKiByZXR1cm5zIGFueSByZXN1bHRpbmcgZG9jdW1lbnQgY2hhbmdlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBBbmRyb2lkIGFuZCBpT1Mgb25seSByZXR1cm4gdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSB0aGVcbi8vIGNoYW5nZS5cbmFzeW5jIGZ1bmN0aW9uIGhyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICBsZXQgcyA9IG4uSW4sIGkgPSBuLlFuO1xuICAgIGNvbnN0IHIgPSBhd2FpdCBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiSGFuZGxlIHVzZXIgY2hhbmdlXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4ge1xuICAgICAgICAvLyBTd2FwIG91dCB0aGUgbXV0YXRpb24gcXVldWUsIGdyYWJiaW5nIHRoZSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXNcbiAgICAgICAgLy8gYmVmb3JlIGFuZCBhZnRlci5cbiAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiBuLkluLmdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KS5uZXh0KChvID0+IChyID0gbywgcyA9IG4ucGVyc2lzdGVuY2UuZ2V0TXV0YXRpb25RdWV1ZShlKSwgXG4gICAgICAgIC8vIFJlY3JlYXRlIG91ciBMb2NhbERvY3VtZW50c1ZpZXcgdXNpbmcgdGhlIG5ld1xuICAgICAgICAvLyBNdXRhdGlvblF1ZXVlLlxuICAgICAgICBpID0gbmV3IHJyKG4uam4sIHMsIG4ucGVyc2lzdGVuY2UuZ2V0SW5kZXhNYW5hZ2VyKCkpLCBzLmdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KSkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBbXSwgcyA9IFtdO1xuICAgICAgICAgICAgLy8gVW5pb24gdGhlIG9sZC9uZXcgY2hhbmdlZCBrZXlzLlxuICAgICAgICAgICAgbGV0IG8gPSBQbigpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHIpIHtcbiAgICAgICAgICAgICAgICBuLnB1c2godC5iYXRjaElkKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5tdXRhdGlvbnMpIG8gPSBvLmFkZChlLmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgICAgIHMucHVzaCh0LmJhdGNoSWQpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0Lm11dGF0aW9ucykgbyA9IG8uYWRkKGUua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgc2V0IG9mIGFsbCAocG90ZW50aWFsbHkpIGNoYW5nZWQgZG9jdW1lbnRzIGFuZCB0aGUgbGlzdFxuICAgICAgICAgICAgLy8gb2YgbXV0YXRpb24gYmF0Y2ggSURzIHRoYXQgd2VyZSBhZmZlY3RlZCBieSBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5Qbih0LCBvKS5uZXh0KCh0ID0+ICh7XG4gICAgICAgICAgICAgICAgV246IHQsXG4gICAgICAgICAgICAgICAgcmVtb3ZlZEJhdGNoSWRzOiBuLFxuICAgICAgICAgICAgICAgIGFkZGVkQmF0Y2hJZHM6IHNcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pKTtcbiAgICB9KSk7XG4gICAgcmV0dXJuIG4uSW4gPSBzLCBuLlFuID0gaSwgbi5Cbi4kbihuLlFuKSwgcjtcbn1cblxuLyogQWNjZXB0cyBsb2NhbGx5IGdlbmVyYXRlZCBNdXRhdGlvbnMgYW5kIGNvbW1pdCB0aGVtIHRvIHN0b3JhZ2UuICovXG4vKipcbiAqIEFja25vd2xlZGdlcyB0aGUgZ2l2ZW4gYmF0Y2guXG4gKlxuICogT24gdGhlIGhhcHB5IHBhdGggd2hlbiBhIGJhdGNoIGlzIGFja25vd2xlZGdlZCwgdGhlIGxvY2FsIHN0b3JlIHdpbGxcbiAqXG4gKiAgKyByZW1vdmUgdGhlIGJhdGNoIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlO1xuICogICsgYXBwbHkgdGhlIGNoYW5nZXMgdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZTtcbiAqICArIHJlY2FsY3VsYXRlIHRoZSBsYXRlbmN5IGNvbXBlbnNhdGVkIHZpZXcgaW1wbGllZCBieSB0aG9zZSBjaGFuZ2VzICh0aGVyZVxuICogICAgbWF5IGJlIG11dGF0aW9ucyBpbiB0aGUgcXVldWUgdGhhdCBhZmZlY3QgdGhlIGRvY3VtZW50cyBidXQgaGF2ZW4ndCBiZWVuXG4gKiAgICBhY2tub3dsZWRnZWQgeWV0KTsgYW5kXG4gKiAgKyBnaXZlIHRoZSBjaGFuZ2VkIGRvY3VtZW50cyBiYWNrIHRoZSBzeW5jIGVuZ2luZVxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgKG1vZGlmaWVkKSBkb2N1bWVudHMuXG4gKi9cbmZ1bmN0aW9uIGxyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFja25vd2xlZGdlIGJhdGNoXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCBzID0gZS5iYXRjaC5rZXlzKCksIGkgPSBuLmpuLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmJhdGNoLCByID0gaS5rZXlzKCk7XG4gICAgICAgICAgICBsZXQgbyA9IGpzLnJlc29sdmUoKTtcbiAgICAgICAgICAgIHJldHVybiByLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIG8gPSBvLm5leHQoKCgpID0+IHMuZ2V0RW50cnkoZSwgdCkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG4uZG9jVmVyc2lvbnMuZ2V0KHQpO1xuICAgICAgICAgICAgICAgICAgICBCKG51bGwgIT09IHIpLCBlLnZlcnNpb24uY29tcGFyZVRvKHIpIDwgMCAmJiAoaS5hcHBseVRvUmVtb3RlRG9jdW1lbnQoZSwgbiksIGUuaXNWYWxpZERvY3VtZW50KCkgJiYgXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHVzZSB0aGUgY29tbWl0VmVyc2lvbiBhcyB0aGUgcmVhZFRpbWUgcmF0aGVyIHRoYW4gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50J3MgdXBkYXRlVGltZSBzaW5jZSB0aGUgdXBkYXRlVGltZSBpcyBub3QgYWR2YW5jZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHVwZGF0ZXMgdGhhdCBkbyBub3QgbW9kaWZ5IHRoZSB1bmRlcmx5aW5nIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgICAgICBzLmFkZEVudHJ5KGUsIG4uY29tbWl0VmVyc2lvbikpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgby5uZXh0KCgoKSA9PiB0LkluLnJlbW92ZU11dGF0aW9uQmF0Y2goZSwgaSkpKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnRzIGFmZmVjdGVkIGJ5IGEgbXV0YXRpb24gYmF0Y2guICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIChuLCB0LCBlLCBpKS5uZXh0KCgoKSA9PiBpLmFwcGx5KHQpKSkubmV4dCgoKCkgPT4gbi5Jbi5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSkpLm5leHQoKCgpID0+IG4uUW4uUG4odCwgcykpKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBtdXRhdGlvbnMgZnJvbSB0aGUgTXV0YXRpb25RdWV1ZSBmb3IgdGhlIHNwZWNpZmllZCBiYXRjaDtcbiAqIExvY2FsRG9jdW1lbnRzIHdpbGwgYmUgcmVjYWxjdWxhdGVkLlxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgbW9kaWZpZWQgZG9jdW1lbnRzLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIGxhc3QgY29uc2lzdGVudCBzbmFwc2hvdCBwcm9jZXNzZWQgKHVzZWQgYnkgdGhlIFJlbW90ZVN0b3JlIHRvXG4gKiBkZXRlcm1pbmUgd2hldGhlciB0byBidWZmZXIgaW5jb21pbmcgc25hcHNob3RzIGZyb20gdGhlIGJhY2tlbmQpLlxuICovXG5mdW5jdGlvbiBmcih0KSB7XG4gICAgY29uc3QgZSA9IHEodCk7XG4gICAgcmV0dXJuIGUucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbGFzdCByZW1vdGUgc25hcHNob3QgdmVyc2lvblwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGUuemUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KSkpO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSkgZG9jdW1lbnRzLiBXZSBhc3N1bWUgdGhhdCB0aGUgcmVtb3RlXG4gKiBldmVudCByZWZsZWN0cyBhbnkgd3JpdGUgYmF0Y2hlcyB0aGF0IGhhdmUgYmVlbiBhY2tub3dsZWRnZWQgb3IgcmVqZWN0ZWRcbiAqIChpLmUuIHdlIGRvIG5vdCByZS1hcHBseSBsb2NhbCBtdXRhdGlvbnMgdG8gdXBkYXRlcyBmcm9tIHRoaXMgZXZlbnQpLlxuICpcbiAqIExvY2FsRG9jdW1lbnRzIGFyZSByZS1jYWxjdWxhdGVkIGlmIHRoZXJlIGFyZSByZW1haW5pbmcgbXV0YXRpb25zIGluIHRoZVxuICogcXVldWUuXG4gKi8gZnVuY3Rpb24gZHIodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gZS5zbmFwc2hvdFZlcnNpb247XG4gICAgbGV0IGkgPSBuLlVuO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQXBwbHkgcmVtb3RlIGV2ZW50XCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCByID0gbi5qbi5uZXdDaGFuZ2VCdWZmZXIoe1xuICAgICAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFJlc2V0IG5ld1RhcmdldERhdGFCeVRhcmdldE1hcCBpbiBjYXNlIHRoaXMgdHJhbnNhY3Rpb24gZ2V0cyByZS1ydW4uXG4gICAgICAgICAgICAgICAgaSA9IG4uVW47XG4gICAgICAgIGNvbnN0IG8gPSBbXTtcbiAgICAgICAgZS50YXJnZXRDaGFuZ2VzLmZvckVhY2goKChlLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjID0gaS5nZXQocik7XG4gICAgICAgICAgICBpZiAoIWMpIHJldHVybjtcbiAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIHRoZSByZW1vdGUga2V5cyBpZiB0aGUgdGFyZ2V0IGlzIHN0aWxsIGFjdGl2ZS4gVGhpc1xuICAgICAgICAgICAgLy8gZW5zdXJlcyB0aGF0IHdlIGNhbiBwZXJzaXN0IHRoZSB1cGRhdGVkIHRhcmdldCBkYXRhIGFsb25nIHdpdGhcbiAgICAgICAgICAgIC8vIHRoZSB1cGRhdGVkIGFzc2lnbm1lbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2gobi56ZS5yZW1vdmVNYXRjaGluZ0tleXModCwgZS5yZW1vdmVkRG9jdW1lbnRzLCByKS5uZXh0KCgoKSA9PiBuLnplLmFkZE1hdGNoaW5nS2V5cyh0LCBlLmFkZGVkRG9jdW1lbnRzLCByKSkpKTtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBlLnJlc3VtZVRva2VuO1xuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSByZXN1bWUgdG9rZW4gaWYgdGhlIGNoYW5nZSBpbmNsdWRlcyBvbmUuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdSA9IGMud2l0aFJlc3VtZVRva2VuKGEsIHMpLndpdGhTZXF1ZW5jZU51bWJlcih0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KHIsIHUpLCBcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHRhcmdldCBkYXRhIGlmIHRoZXJlIGFyZSB0YXJnZXQgY2hhbmdlcyAob3IgaWZcbiAgICAgICAgICAgICAgICAvLyBzdWZmaWNpZW50IHRpbWUgaGFzIHBhc3NlZCBzaW5jZSB0aGUgbGFzdCB1cGRhdGUpLlxuICAgICAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBuZXdUYXJnZXREYXRhIHNob3VsZCBiZSBwZXJzaXN0ZWQgZHVyaW5nIGFuIHVwZGF0ZSBvZlxuICogYW4gYWN0aXZlIHRhcmdldC4gVGFyZ2V0RGF0YSBzaG91bGQgYWx3YXlzIGJlIHBlcnNpc3RlZCB3aGVuIGEgdGFyZ2V0IGlzXG4gKiBiZWluZyByZWxlYXNlZCBhbmQgc2hvdWxkIG5vdCBjYWxsIHRoaXMgZnVuY3Rpb24uXG4gKlxuICogV2hpbGUgdGhlIHRhcmdldCBpcyBhY3RpdmUsIFRhcmdldERhdGEgdXBkYXRlcyBjYW4gYmUgb21pdHRlZCB3aGVuIG5vdGhpbmdcbiAqIGFib3V0IHRoZSB0YXJnZXQgaGFzIGNoYW5nZWQgZXhjZXB0IG1ldGFkYXRhIGxpa2UgdGhlIHJlc3VtZSB0b2tlbiBvclxuICogc25hcHNob3QgdmVyc2lvbi4gT2NjYXNpb25hbGx5IGl0J3Mgd29ydGggdGhlIGV4dHJhIHdyaXRlIHRvIHByZXZlbnQgdGhlc2VcbiAqIHZhbHVlcyBmcm9tIGdldHRpbmcgdG9vIHN0YWxlIGFmdGVyIGEgY3Jhc2gsIGJ1dCB0aGlzIGRvZXNuJ3QgaGF2ZSB0byBiZVxuICogdG9vIGZyZXF1ZW50LlxuICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgICAgICAgICAvLyBBbHdheXMgcGVyc2lzdCB0YXJnZXQgZGF0YSBpZiB3ZSBkb24ndCBhbHJlYWR5IGhhdmUgYSByZXN1bWUgdG9rZW4uXG4gICAgICAgICAgICAgICAgICAgIGlmIChCKGUucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCksIDAgPT09IHQucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvbid0IGFsbG93IHJlc3VtZSB0b2tlbiBjaGFuZ2VzIHRvIGJlIGJ1ZmZlcmVkIGluZGVmaW5pdGVseS4gVGhpc1xuICAgICAgICAgICAgICAgICAgICAvLyBhbGxvd3MgdXMgdG8gYmUgcmVhc29uYWJseSB1cC10by1kYXRlIGFmdGVyIGEgY3Jhc2ggYW5kIGF2b2lkcyBuZWVkaW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIGxvb3Agb3ZlciBhbGwgYWN0aXZlIHF1ZXJpZXMgb24gc2h1dGRvd24uIEVzcGVjaWFsbHkgaW4gdGhlIGJyb3dzZXJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgbWF5IG5vdCBnZXQgdGltZSB0byBkbyBhbnl0aGluZyBpbnRlcmVzdGluZyB3aGlsZSB0aGUgY3VycmVudCB0YWIgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xvc2luZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKSAtIHQuc25hcHNob3RWZXJzaW9uLnRvTWljcm9zZWNvbmRzKCkgPj0gM2U4KSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSBpZiB0aGUgb25seSB0aGluZyB0aGF0IGhhcyBjaGFuZ2VkIGFib3V0IGEgdGFyZ2V0IGlzIGl0cyByZXN1bWVcbiAgICAgICAgICAgICAgICAgICAgLy8gdG9rZW4gaXQncyBub3Qgd29ydGggcGVyc2lzdGluZy4gTm90ZSB0aGF0IHRoZSBSZW1vdGVTdG9yZSBrZWVwcyBhblxuICAgICAgICAgICAgICAgICAgICAvLyBpbi1tZW1vcnkgdmlldyBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSB0YXJnZXRzIHdoaWNoIGluY2x1ZGVzIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3VtZSB0b2tlbiwgc28gc3RyZWFtIGZhaWx1cmUgb3IgdXNlciBjaGFuZ2VzIHdpbGwgc3RpbGwgdXNlIGFuXG4gICAgICAgICAgICAgICAgICAgIC8vIHVwLXRvLWRhdGUgcmVzdW1lIHRva2VuIHJlZ2FyZGxlc3Mgb2Ygd2hhdCB3ZSBkbyBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmFkZGVkRG9jdW1lbnRzLnNpemUgKyBuLm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgKyBuLnJlbW92ZWREb2N1bWVudHMuc2l6ZSA+IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8qKlxuICogTm90aWZpZXMgbG9jYWwgc3RvcmUgb2YgdGhlIGNoYW5nZWQgdmlld3MgdG8gbG9jYWxseSBwaW4gZG9jdW1lbnRzLlxuICovIChjLCB1LCBlKSAmJiBvLnB1c2gobi56ZS51cGRhdGVUYXJnZXREYXRhKHQsIHUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgYyA9IFRuKCk7XG4gICAgICAgIC8vIEhBQ0s6IFRoZSBvbmx5IHJlYXNvbiB3ZSBhbGxvdyBhIG51bGwgc25hcHNob3QgdmVyc2lvbiBpcyBzbyB0aGF0IHdlXG4gICAgICAgIC8vIGNhbiBzeW50aGVzaXplIHJlbW90ZSBldmVudHMgd2hlbiB3ZSBnZXQgcGVybWlzc2lvbiBkZW5pZWQgZXJyb3JzIHdoaWxlXG4gICAgICAgIC8vIHRyeWluZyB0byByZXNvbHZlIHRoZSBzdGF0ZSBvZiBhIGxvY2FsbHkgY2FjaGVkIGRvY3VtZW50IHRoYXQgaXMgaW5cbiAgICAgICAgLy8gbGltYm8uXG4gICAgICAgIGlmIChlLmRvY3VtZW50VXBkYXRlcy5mb3JFYWNoKCgocywgaSkgPT4ge1xuICAgICAgICAgICAgZS5yZXNvbHZlZExpbWJvRG9jdW1lbnRzLmhhcyhzKSAmJiBvLnB1c2gobi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS51cGRhdGVMaW1ib0RvY3VtZW50KHQsIHMpKTtcbiAgICAgICAgfSkpLCBcbiAgICAgICAgLy8gRWFjaCBsb29wIGl0ZXJhdGlvbiBvbmx5IGFmZmVjdHMgaXRzIFwib3duXCIgZG9jLCBzbyBpdCdzIHNhZmUgdG8gZ2V0IGFsbCB0aGUgcmVtb3RlXG4gICAgICAgIC8vIGRvY3VtZW50cyBpbiBhZHZhbmNlIGluIGEgc2luZ2xlIGNhbGwuXG4gICAgICAgIG8ucHVzaCh3cih0LCByLCBlLmRvY3VtZW50VXBkYXRlcywgcywgdm9pZCAwKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGMgPSB0O1xuICAgICAgICB9KSkpLCAhcy5pc0VxdWFsKHJ0Lm1pbigpKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG4uemUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KS5uZXh0KChlID0+IG4uemUuc2V0VGFyZ2V0c01ldGFkYXRhKHQsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyLCBzKSkpO1xuICAgICAgICAgICAgby5wdXNoKGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBqcy53YWl0Rm9yKG8pLm5leHQoKCgpID0+IHIuYXBwbHkodCkpKS5uZXh0KCgoKSA9PiBuLlFuLnZuKHQsIGMpKSkubmV4dCgoKCkgPT4gYykpO1xuICAgIH0pKS50aGVuKCh0ID0+IChuLlVuID0gaSwgdCkpKTtcbn1cblxuLyoqXG4gKiBQb3B1bGF0ZXMgZG9jdW1lbnQgY2hhbmdlIGJ1ZmZlciB3aXRoIGRvY3VtZW50cyBmcm9tIGJhY2tlbmQgb3IgYSBidW5kbGUuXG4gKiBSZXR1cm5zIHRoZSBkb2N1bWVudCBjaGFuZ2VzIHJlc3VsdGluZyBmcm9tIGFwcGx5aW5nIHRob3NlIGRvY3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVHJhbnNhY3Rpb24gdG8gdXNlIHRvIHJlYWQgZXhpc3RpbmcgZG9jdW1lbnRzIGZyb20gc3RvcmFnZS5cbiAqIEBwYXJhbSBkb2N1bWVudEJ1ZmZlciAtIERvY3VtZW50IGJ1ZmZlciB0byBjb2xsZWN0IHRoZSByZXN1bHRlZCBjaGFuZ2VzIHRvIGJlXG4gKiAgICAgICAgYXBwbGllZCB0byBzdG9yYWdlLlxuICogQHBhcmFtIGRvY3VtZW50cyAtIERvY3VtZW50cyB0byBiZSBhcHBsaWVkLlxuICogQHBhcmFtIGdsb2JhbFZlcnNpb24gLSBBIGBTbmFwc2hvdFZlcnNpb25gIHJlcHJlc2VudGluZyB0aGUgcmVhZCB0aW1lIGlmIGFsbFxuICogICAgICAgIGRvY3VtZW50cyBoYXZlIHRoZSBzYW1lIHJlYWQgdGltZS5cbiAqIEBwYXJhbSBkb2N1bWVudFZlcnNpb25zIC0gQSBEb2N1bWVudEtleS10by1TbmFwc2hvdFZlcnNpb24gbWFwIGlmIGRvY3VtZW50c1xuICogICAgICAgIGhhdmUgdGhlaXIgb3duIHJlYWQgdGltZS5cbiAqXG4gKiBOb3RlOiB0aGlzIGZ1bmN0aW9uIHdpbGwgdXNlIGBkb2N1bWVudFZlcnNpb25zYCBpZiBpdCBpcyBkZWZpbmVkO1xuICogd2hlbiBpdCBpcyBub3QgZGVmaW5lZCwgcmVzb3J0cyB0byBgZ2xvYmFsVmVyc2lvbmAuXG4gKi8gZnVuY3Rpb24gd3IodCwgZSwgbiwgcywgXG4vLyBUT0RPKHd1YW5keSk6IFdlIGNvdWxkIGFkZCBgcmVhZFRpbWVgIHRvIE1heWJlRG9jdW1lbnQgaW5zdGVhZCB0byByZW1vdmVcbi8vIHRoaXMgcGFyYW1ldGVyLlxuaSkge1xuICAgIGxldCByID0gUG4oKTtcbiAgICByZXR1cm4gbi5mb3JFYWNoKCh0ID0+IHIgPSByLmFkZCh0KSkpLCBlLmdldEVudHJpZXModCwgcikubmV4dCgodCA9PiB7XG4gICAgICAgIGxldCByID0gVG4oKTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIG8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGMgPSB0LmdldChuKSwgYSA9IChudWxsID09IGkgPyB2b2lkIDAgOiBpLmdldChuKSkgfHwgcztcbiAgICAgICAgICAgIC8vIE5vdGU6IFRoZSBvcmRlciBvZiB0aGUgc3RlcHMgYmVsb3cgaXMgaW1wb3J0YW50LCBzaW5jZSB3ZSB3YW50XG4gICAgICAgICAgICAvLyB0byBlbnN1cmUgdGhhdCByZWplY3RlZCBsaW1ibyByZXNvbHV0aW9ucyAod2hpY2ggZmFicmljYXRlXG4gICAgICAgICAgICAvLyBOb0RvY3VtZW50cyB3aXRoIFNuYXBzaG90VmVyc2lvbi5taW4oKSkgbmV2ZXIgYWRkIGRvY3VtZW50cyB0b1xuICAgICAgICAgICAgLy8gY2FjaGUuXG4gICAgICAgICAgICBvLmlzTm9Eb2N1bWVudCgpICYmIG8udmVyc2lvbi5pc0VxdWFsKHJ0Lm1pbigpKSA/IChcbiAgICAgICAgICAgIC8vIE5vRG9jdW1lbnRzIHdpdGggU25hcHNob3RWZXJzaW9uLm1pbigpIGFyZSB1c2VkIGluIG1hbnVmYWN0dXJlZFxuICAgICAgICAgICAgLy8gZXZlbnRzLiBXZSByZW1vdmUgdGhlc2UgZG9jdW1lbnRzIGZyb20gY2FjaGUgc2luY2Ugd2UgbG9zdFxuICAgICAgICAgICAgLy8gYWNjZXNzLlxuICAgICAgICAgICAgZS5yZW1vdmVFbnRyeShuLCBhKSwgciA9IHIuaW5zZXJ0KG4sIG8pKSA6ICFjLmlzVmFsaWREb2N1bWVudCgpIHx8IG8udmVyc2lvbi5jb21wYXJlVG8oYy52ZXJzaW9uKSA+IDAgfHwgMCA9PT0gby52ZXJzaW9uLmNvbXBhcmVUbyhjLnZlcnNpb24pICYmIGMuaGFzUGVuZGluZ1dyaXRlcyA/IChlLmFkZEVudHJ5KG8sIGEpLCBcbiAgICAgICAgICAgIHIgPSByLmluc2VydChuLCBvKSkgOiAkKFwiTG9jYWxTdG9yZVwiLCBcIklnbm9yaW5nIG91dGRhdGVkIHdhdGNoIHVwZGF0ZSBmb3IgXCIsIG4sIFwiLiBDdXJyZW50IHZlcnNpb246XCIsIGMudmVyc2lvbiwgXCIgV2F0Y2ggdmVyc2lvbjpcIiwgby52ZXJzaW9uKTtcbiAgICAgICAgfSkpLCByO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBtdXRhdGlvbiBiYXRjaCBhZnRlciB0aGUgcGFzc2VkIGluIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlXG4gKiBvciBudWxsIGlmIGVtcHR5LlxuICogQHBhcmFtIGFmdGVyQmF0Y2hJZCAtIElmIHByb3ZpZGVkLCB0aGUgYmF0Y2ggdG8gc2VhcmNoIGFmdGVyLlxuICogQHJldHVybnMgVGhlIG5leHQgbXV0YXRpb24gb3IgbnVsbCBpZiB0aGVyZSB3YXNuJ3Qgb25lLlxuICovXG5mdW5jdGlvbiBfcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV4dCBtdXRhdGlvbiBiYXRjaFwiLCBcInJlYWRvbmx5XCIsICh0ID0+ICh2b2lkIDAgPT09IGUgJiYgKGUgPSAtMSksIFxuICAgIG4uSW4uZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQodCwgZSkpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgYSBEb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5IG9yIG51bGwgaWYgbm90XG4gKiBmb3VuZCAtIHVzZWQgZm9yIHRlc3RpbmcuXG4gKi9cbi8qKlxuICogQXNzaWducyB0aGUgZ2l2ZW4gdGFyZ2V0IGFuIGludGVybmFsIElEIHNvIHRoYXQgaXRzIHJlc3VsdHMgY2FuIGJlIHBpbm5lZCBzb1xuICogdGhleSBkb24ndCBnZXQgR0MnZC4gQSB0YXJnZXQgbXVzdCBiZSBhbGxvY2F0ZWQgaW4gdGhlIGxvY2FsIHN0b3JlIGJlZm9yZVxuICogdGhlIHN0b3JlIGNhbiBiZSB1c2VkIHRvIG1hbmFnZSBpdHMgdmlldy5cbiAqXG4gKiBBbGxvY2F0aW5nIGFuIGFscmVhZHkgYWxsb2NhdGVkIGBUYXJnZXRgIHdpbGwgcmV0dXJuIHRoZSBleGlzdGluZyBgVGFyZ2V0RGF0YWBcbiAqIGZvciB0aGF0IGBUYXJnZXRgLlxuICovXG5mdW5jdGlvbiBtcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBbGxvY2F0ZSB0YXJnZXRcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4ge1xuICAgICAgICBsZXQgcztcbiAgICAgICAgcmV0dXJuIG4uemUuZ2V0VGFyZ2V0RGF0YSh0LCBlKS5uZXh0KChpID0+IGkgPyAoXG4gICAgICAgIC8vIFRoaXMgdGFyZ2V0IGhhcyBiZWVuIGxpc3RlbmVkIHRvIHByZXZpb3VzbHksIHNvIHJldXNlIHRoZVxuICAgICAgICAvLyBwcmV2aW91cyB0YXJnZXRJRC5cbiAgICAgICAgLy8gVE9ETyhtY2cpOiBmcmVzaGVuIGxhc3QgYWNjZXNzZWQgZGF0ZT9cbiAgICAgICAgcyA9IGksIGpzLnJlc29sdmUocykpIDogbi56ZS5hbGxvY2F0ZVRhcmdldElkKHQpLm5leHQoKGkgPT4gKHMgPSBuZXcgaWkoZSwgaSwgMCAvKiBMaXN0ZW4gKi8gLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIFxuICAgICAgICBuLnplLmFkZFRhcmdldERhdGEodCwgcykubmV4dCgoKCkgPT4gcykpKSkpKSk7XG4gICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAvLyBJZiBNdWx0aS1UYWIgaXMgZW5hYmxlZCwgdGhlIGV4aXN0aW5nIHRhcmdldCBkYXRhIG1heSBiZSBuZXdlciB0aGFuXG4gICAgICAgIC8vIHRoZSBpbi1tZW1vcnkgZGF0YVxuICAgICAgICBjb25zdCBzID0gbi5Vbi5nZXQodC50YXJnZXRJZCk7XG4gICAgICAgIHJldHVybiAobnVsbCA9PT0gcyB8fCB0LnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8ocy5zbmFwc2hvdFZlcnNpb24pID4gMCkgJiYgKG4uVW4gPSBuLlVuLmluc2VydCh0LnRhcmdldElkLCB0KSwgXG4gICAgICAgIG4ucW4uc2V0KGUsIHQudGFyZ2V0SWQpKSwgdDtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgVGFyZ2V0RGF0YSBhcyBzZWVuIGJ5IHRoZSBMb2NhbFN0b3JlLCBpbmNsdWRpbmcgdXBkYXRlcyB0aGF0IG1heVxuICogaGF2ZSBub3QgeWV0IGJlZW4gcGVyc2lzdGVkIHRvIHRoZSBUYXJnZXRDYWNoZS5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbi8qKlxuICogVW5waW5zIGFsbCB0aGUgZG9jdW1lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZlxuICogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBzZXQgdG8gZmFsc2UgYW5kIEVhZ2VyIEdDIGVuYWJsZWQsIHRoZSBtZXRob2RcbiAqIGRpcmVjdGx5IHJlbW92ZXMgdGhlIGFzc29jaWF0ZWQgdGFyZ2V0IGRhdGEgZnJvbSB0aGUgdGFyZ2V0IGNhY2hlLlxuICpcbiAqIFJlbGVhc2luZyBhIG5vbi1leGlzdGluZyBgVGFyZ2V0YCBpcyBhIG5vLW9wLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IGBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YWAgaXMgbXVsdGktdGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBncih0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCksIGkgPSBzLlVuLmdldChlKSwgciA9IG4gPyBcInJlYWR3cml0ZVwiIDogXCJyZWFkd3JpdGUtcHJpbWFyeVwiO1xuICAgIHRyeSB7XG4gICAgICAgIG4gfHwgYXdhaXQgcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlJlbGVhc2UgdGFyZ2V0XCIsIHIsICh0ID0+IHMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlVGFyZ2V0KHQsIGkpKSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBpZiAoIUhzKHQpKSB0aHJvdyB0O1xuICAgICAgICAvLyBBbGwgYHJlbGVhc2VUYXJnZXRgIGRvZXMgaXMgcmVjb3JkIHRoZSBmaW5hbCBtZXRhZGF0YSBzdGF0ZSBmb3IgdGhlXG4gICAgICAgIC8vIHRhcmdldCwgYnV0IHdlJ3ZlIGJlZW4gcmVjb3JkaW5nIHRoaXMgcGVyaW9kaWNhbGx5IGR1cmluZyB0YXJnZXRcbiAgICAgICAgLy8gYWN0aXZpdHkuIElmIHdlIGxvc2UgdGhpcyB3cml0ZSB0aGlzIGNvdWxkIGNhdXNlIGEgdmVyeSBzbGlnaHRcbiAgICAgICAgLy8gZGlmZmVyZW5jZSBpbiB0aGUgb3JkZXIgb2YgdGFyZ2V0IGRlbGV0aW9uIGR1cmluZyBHQywgYnV0IHdlXG4gICAgICAgIC8vIGRvbid0IGRlZmluZSBleGFjdCBMUlUgc2VtYW50aWNzIHNvIHRoaXMgaXMgYWNjZXB0YWJsZS5cbiAgICAgICAgJChcIkxvY2FsU3RvcmVcIiwgYEZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVycyBmb3IgdGFyZ2V0ICR7ZX06ICR7dH1gKTtcbiAgICB9XG4gICAgcy5VbiA9IHMuVW4ucmVtb3ZlKGUpLCBzLnFuLmRlbGV0ZShpLnRhcmdldCk7XG59XG5cbi8qKlxuICogUnVucyB0aGUgc3BlY2lmaWVkIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIGFuZCByZXR1cm5zIHRoZSByZXN1bHRzLFxuICogcG90ZW50aWFsbHkgdGFraW5nIGFkdmFudGFnZSBvZiBxdWVyeSBkYXRhIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyAoc3VjaFxuICogYXMgdGhlIHNldCBvZiByZW1vdGUga2V5cykuXG4gKlxuICogQHBhcmFtIHVzZVByZXZpb3VzUmVzdWx0cyAtIFdoZXRoZXIgcmVzdWx0cyBmcm9tIHByZXZpb3VzIGV4ZWN1dGlvbnMgY2FuXG4gKiBiZSB1c2VkIHRvIG9wdGltaXplIHRoaXMgcXVlcnkgZXhlY3V0aW9uLlxuICovIGZ1bmN0aW9uIHlyKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gcSh0KTtcbiAgICBsZXQgaSA9IHJ0Lm1pbigpLCByID0gUG4oKTtcbiAgICByZXR1cm4gcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkV4ZWN1dGUgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAodCA9PiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBxKHQpLCBpID0gcy5xbi5nZXQobik7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGkgPyBqcy5yZXNvbHZlKHMuVW4uZ2V0KGkpKSA6IHMuemUuZ2V0VGFyZ2V0RGF0YShlLCBuKTtcbiAgICB9KHMsIHQsIEVlKGUpKS5uZXh0KChlID0+IHtcbiAgICAgICAgaWYgKGUpIHJldHVybiBpID0gZS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCBzLnplLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUudGFyZ2V0SWQpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgciA9IHQ7XG4gICAgICAgIH0pKTtcbiAgICB9KSkubmV4dCgoKCkgPT4gcy5Cbi5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4gPyBpIDogcnQubWluKCksIG4gPyByIDogUG4oKSkpKS5uZXh0KCh0ID0+ICh7XG4gICAgICAgIGRvY3VtZW50czogdCxcbiAgICAgICAgR246IHJcbiAgICB9KSkpKSk7XG59XG5cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBwcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCksIHMgPSBxKG4uemUpLCBpID0gbi5Vbi5nZXQoZSk7XG4gICAgcmV0dXJuIGkgPyBQcm9taXNlLnJlc29sdmUoaS50YXJnZXQpIDogbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCB0YXJnZXQgZGF0YVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IHMuVHQodCwgZSkubmV4dCgodCA9PiB0ID8gdC50YXJnZXQgOiBudWxsKSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHVwZGF0ZWQgc2luY2UgdGhlIGxhc3QgY2FsbC5cbiAqIElmIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIHJldHVybnMgdGhlIHNldCBvZiBjaGFuZ2VzIHNpbmNlIGNsaWVudFxuICogaW5pdGlhbGl6YXRpb24uIEZ1cnRoZXIgaW52b2NhdGlvbnMgd2lsbCByZXR1cm4gZG9jdW1lbnQgdGhhdCBoYXZlIGNoYW5nZWRcbiAqIHNpbmNlIHRoZSBwcmlvciBjYWxsLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gVHIodCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5ldyBkb2N1bWVudCBjaGFuZ2VzXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gcSh0KTtcbiAgICAgICAgbGV0IGkgPSBUbigpLCByID0gYWkobik7XG4gICAgICAgIGNvbnN0IG8gPSBIaShlKSwgYyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQociwgITApO1xuICAgICAgICByZXR1cm4gby5LdCh7XG4gICAgICAgICAgICBpbmRleDogTnMucmVhZFRpbWVJbmRleCxcbiAgICAgICAgICAgIHJhbmdlOiBjXG4gICAgICAgIH0sICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgLy8gVW5saWtlIGBnZXRFbnRyeSgpYCBhbmQgb3RoZXJzLCBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgIHBhcnNlc1xuICAgICAgICAgICAgLy8gdGhlIGRvY3VtZW50cyBkaXJlY3RseSBzaW5jZSB3ZSB3YW50IHRvIGtlZXAgc2VudGluZWwgZGVsZXRlcy5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBvaShzLk4sIGUpO1xuICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KG4ua2V5LCBuKSwgciA9IGUucmVhZFRpbWU7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiAoe1xuICAgICAgICAgICAgRW46IGksXG4gICAgICAgICAgICByZWFkVGltZTogdWkocilcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIHRoZSByZWFkIHRpbWUgb2YgdGhlIG1vc3QgcmVjZW50bHkgcmVhZCBkb2N1bWVudCBpbiB0aGUgY2FjaGUsIG9yXG4gKiBTbmFwc2hvdFZlcnNpb24ubWluKCkgaWYgbm90IGF2YWlsYWJsZS5cbiAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgKGUuam4sIHQsIGUuS24pKSkudGhlbigoKHtFbjogdCwgcmVhZFRpbWU6IG59KSA9PiAoZS5LbiA9IG4sIHQpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIG5ld2VzdCBkb2N1bWVudCBjaGFuZ2UgZnJvbSBwZXJzaXN0ZW5jZSBhbmQgbW92ZXMgdGhlIGludGVybmFsXG4gKiBzeW5jaHJvbml6YXRpb24gbWFya2VyIGZvcndhcmQgc28gdGhhdCBjYWxscyB0byBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXG4gKiBvbmx5IHJldHVybiBjaGFuZ2VzIHRoYXQgaGFwcGVuZWQgYWZ0ZXIgY2xpZW50IGluaXRpYWxpemF0aW9uLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gRXIodCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiU3luY2hyb25pemUgbGFzdCBkb2N1bWVudCBjaGFuZ2UgcmVhZCB0aW1lXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gSGkodCk7XG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBleGlzdGluZyBlbnRyaWVzLCB3ZSByZXR1cm4gU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICAgICAgICAgICAgICAgIGxldCBuID0gcnQubWluKCk7XG4gICAgICAgIHJldHVybiBlLkt0KHtcbiAgICAgICAgICAgIGluZGV4OiBOcy5yZWFkVGltZUluZGV4LFxuICAgICAgICAgICAgcmV2ZXJzZTogITBcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBlLnJlYWRUaW1lICYmIChuID0gdWkoZS5yZWFkVGltZSkpLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9KHQpKSkudGhlbigodCA9PiB7XG4gICAgICAgIGUuS24gPSB0O1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRhcmdldCB1c2luZyB0aGUgZ2l2ZW4gYnVuZGxlIG5hbWUsIHdoaWNoIHdpbGwgYmUgdXNlZCB0b1xuICogaG9sZCB0aGUga2V5cyBvZiBhbGwgZG9jdW1lbnRzIGZyb20gdGhlIGJ1bmRsZSBpbiBxdWVyeS1kb2N1bWVudCBtYXBwaW5ncy5cbiAqIFRoaXMgZW5zdXJlcyB0aGF0IHRoZSBsb2FkZWQgZG9jdW1lbnRzIGRvIG5vdCBnZXQgZ2FyYmFnZSBjb2xsZWN0ZWRcbiAqIHJpZ2h0IGF3YXkuXG4gKi9cbi8qKlxuICogQXBwbGllcyB0aGUgZG9jdW1lbnRzIGZyb20gYSBidW5kbGUgdG8gdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSlcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBMb2NhbERvY3VtZW50cyBhcmUgcmUtY2FsY3VsYXRlZCBpZiB0aGVyZSBhcmUgcmVtYWluaW5nIG11dGF0aW9ucyBpbiB0aGVcbiAqIHF1ZXVlLlxuICovXG5hc3luYyBmdW5jdGlvbiBJcih0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IHEodCk7XG4gICAgbGV0IHIgPSBQbigpLCBvID0gVG4oKSwgYyA9IFJuKCk7XG4gICAgZm9yIChjb25zdCB0IG9mIG4pIHtcbiAgICAgICAgY29uc3QgbiA9IGUuem4odC5tZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgdC5kb2N1bWVudCAmJiAociA9IHIuYWRkKG4pKSwgbyA9IG8uaW5zZXJ0KG4sIGUuSG4odCkpLCBjID0gYy5pbnNlcnQobiwgZS5Kbih0Lm1ldGFkYXRhLnJlYWRUaW1lKSk7XG4gICAgfVxuICAgIGNvbnN0IGEgPSBpLmpuLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgfSksIHUgPSBhd2FpdCBtcihpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgIC8vIEl0IGlzIE9LIHRoYXQgdGhlIHBhdGggdXNlZCBmb3IgdGhlIHF1ZXJ5IGlzIG5vdCB2YWxpZCwgYmVjYXVzZSB0aGlzIHdpbGxcbiAgICAgICAgLy8gbm90IGJlIHJlYWQgYW5kIHF1ZXJpZWQuXG4gICAgICAgIHJldHVybiBFZSh3ZShodC5mcm9tU3RyaW5nKGBfX2J1bmRsZV9fL2RvY3MvJHt0fWApKSk7XG4gICAgfShzKSk7XG4gICAgLy8gQWxsb2NhdGVzIGEgdGFyZ2V0IHRvIGhvbGQgYWxsIGRvY3VtZW50IGtleXMgZnJvbSB0aGUgYnVuZGxlLCBzdWNoIHRoYXRcbiAgICAvLyB0aGV5IHdpbGwgbm90IGdldCBnYXJiYWdlIGNvbGxlY3RlZCByaWdodCBhd2F5LlxuICAgICAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFwcGx5IGJ1bmRsZSBkb2N1bWVudHNcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gd3IodCwgYSwgbywgcnQubWluKCksIGMpLm5leHQoKGUgPT4gKGEuYXBwbHkodCksIFxuICAgIGUpKSkubmV4dCgoZSA9PiBpLnplLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIHUudGFyZ2V0SWQpLm5leHQoKCgpID0+IGkuemUuYWRkTWF0Y2hpbmdLZXlzKHQsIHIsIHUudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5Rbi52bih0LCBlKSkpLm5leHQoKCgpID0+IGUpKSkpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2Ugb2YgYSBib29sZWFuIHRvIGluZGljYXRlIGlmIHRoZSBnaXZlbiBidW5kbGUgaGFzIGFscmVhZHlcbiAqIGJlZW4gbG9hZGVkIGFuZCB0aGUgY3JlYXRlIHRpbWUgaXMgbmV3ZXIgdGhhbiB0aGUgY3VycmVudCBsb2FkaW5nIGJ1bmRsZS5cbiAqL1xuLyoqXG4gKiBTYXZlcyB0aGUgZ2l2ZW4gYE5hbWVkUXVlcnlgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovXG5hc3luYyBmdW5jdGlvbiBBcih0LCBlLCBuID0gUG4oKSkge1xuICAgIC8vIEFsbG9jYXRlIGEgdGFyZ2V0IGZvciB0aGUgbmFtZWQgcXVlcnkgc3VjaCB0aGF0IGl0IGNhbiBiZSByZXN1bWVkXG4gICAgLy8gZnJvbSBhc3NvY2lhdGVkIHJlYWQgdGltZSBpZiB1c2VycyB1c2UgaXQgdG8gbGlzdGVuLlxuICAgIC8vIE5PVEU6IHRoaXMgYWxzbyBtZWFucyBpZiBubyBjb3JyZXNwb25kaW5nIHRhcmdldCBleGlzdHMsIHRoZSBuZXcgdGFyZ2V0XG4gICAgLy8gd2lsbCByZW1haW4gYWN0aXZlIGFuZCB3aWxsIG5vdCBnZXQgY29sbGVjdGVkLCB1bmxlc3MgdXNlcnMgaGFwcGVuIHRvXG4gICAgLy8gdW5saXN0ZW4gdGhlIHF1ZXJ5IHNvbWVob3cuXG4gICAgY29uc3QgcyA9IGF3YWl0IG1yKHQsIEVlKF9pKGUuYnVuZGxlZFF1ZXJ5KSkpLCBpID0gcSh0KTtcbiAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgbmFtZWQgcXVlcnlcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCByID0gam4oZS5yZWFkVGltZSk7XG4gICAgICAgIC8vIFNpbXBseSBzYXZlIHRoZSBxdWVyeSBpdHNlbGYgaWYgaXQgaXMgb2xkZXIgdGhhbiB3aGF0IHRoZSBTREsgYWxyZWFkeVxuICAgICAgICAvLyBoYXMuXG4gICAgICAgICAgICAgICAgaWYgKHMuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhyKSA+PSAwKSByZXR1cm4gaS5KZS5zYXZlTmFtZWRRdWVyeSh0LCBlKTtcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHRhcmdldCBkYXRhIGJlY2F1c2UgdGhlIHF1ZXJ5IGZyb20gdGhlIGJ1bmRsZSBpcyBuZXdlci5cbiAgICAgICAgICAgICAgICBjb25zdCBvID0gcy53aXRoUmVzdW1lVG9rZW4oX3QuRU1QVFlfQllURV9TVFJJTkcsIHIpO1xuICAgICAgICByZXR1cm4gaS5VbiA9IGkuVW4uaW5zZXJ0KG8udGFyZ2V0SWQsIG8pLCBpLnplLnVwZGF0ZVRhcmdldERhdGEodCwgbykubmV4dCgoKCkgPT4gaS56ZS5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBzLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkuemUuYWRkTWF0Y2hpbmdLZXlzKHQsIG4sIHMudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5KZS5zYXZlTmFtZWRRdWVyeSh0LCBlKSkpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgUnIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5OID0gdCwgdGhpcy5ZbiA9IG5ldyBNYXAsIHRoaXMuWG4gPSBuZXcgTWFwO1xuICAgIH1cbiAgICBnZXRCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBqcy5yZXNvbHZlKHRoaXMuWW4uZ2V0KGUpKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgLyoqIERlY29kZXMgYSBCdW5kbGVNZXRhZGF0YSBwcm90byBpbnRvIGEgQnVuZGxlTWV0YWRhdGEgb2JqZWN0LiAqL1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuWW4uc2V0KGUuaWQsIHtcbiAgICAgICAgICAgIGlkOiAobiA9IGUpLmlkLFxuICAgICAgICAgICAgdmVyc2lvbjogbi52ZXJzaW9uLFxuICAgICAgICAgICAgY3JlYXRlVGltZTogam4obi5jcmVhdGVUaW1lKVxuICAgICAgICB9KSwganMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXROYW1lZFF1ZXJ5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUodGhpcy5Ybi5nZXQoZSkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlhuLnNldChlLm5hbWUsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBfaSh0LmJ1bmRsZWRRdWVyeSksXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IGpuKHQucmVhZFRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUpKSwganMucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjb2xsZWN0aW9uIG9mIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBmcm9tIHNvbWUga2luZCBvZiBudW1iZXJlZCBlbnRpdHlcbiAqIChlaXRoZXIgYSB0YXJnZXQgSUQgb3IgYmF0Y2ggSUQpLiBBcyByZWZlcmVuY2VzIGFyZSBhZGRlZCB0byBvciByZW1vdmVkIGZyb21cbiAqIHRoZSBzZXQgY29ycmVzcG9uZGluZyBldmVudHMgYXJlIGVtaXR0ZWQgdG8gYSByZWdpc3RlcmVkIGdhcmJhZ2UgY29sbGVjdG9yLlxuICpcbiAqIEVhY2ggcmVmZXJlbmNlIGlzIHJlcHJlc2VudGVkIGJ5IGEgRG9jdW1lbnRSZWZlcmVuY2Ugb2JqZWN0LiBFYWNoIG9mIHRoZW1cbiAqIGNvbnRhaW5zIGVub3VnaCBpbmZvcm1hdGlvbiB0byB1bmlxdWVseSBpZGVudGlmeSB0aGUgcmVmZXJlbmNlLiBUaGV5IGFyZSBhbGxcbiAqIHN0b3JlZCBwcmltYXJpbHkgaW4gYSBzZXQgc29ydGVkIGJ5IGtleS4gQSBkb2N1bWVudCBpcyBjb25zaWRlcmVkIGdhcmJhZ2UgaWZcbiAqIHRoZXJlJ3Mgbm8gcmVmZXJlbmNlcyBpbiB0aGF0IHNldCAodGhpcyBjYW4gYmUgZWZmaWNpZW50bHkgY2hlY2tlZCB0aGFua3MgdG9cbiAqIHNvcnRpbmcgYnkga2V5KS5cbiAqXG4gKiBSZWZlcmVuY2VTZXQgYWxzbyBrZWVwcyBhIHNlY29uZGFyeSBzZXQgdGhhdCBjb250YWlucyByZWZlcmVuY2VzIHNvcnRlZCBieVxuICogSURzLiBUaGlzIG9uZSBpcyB1c2VkIHRvIGVmZmljaWVudGx5IGltcGxlbWVudCByZW1vdmFsIG9mIGFsbCByZWZlcmVuY2VzIGJ5XG4gKiBzb21lIHRhcmdldCBJRC5cbiAqLyBjbGFzcyBiciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkga2V5LlxuICAgICAgICB0aGlzLlpuID0gbmV3IGduKFByLnRzKSwgXG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkgdGFyZ2V0IGlkLlxuICAgICAgICB0aGlzLmVzID0gbmV3IGduKFByLm5zKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlIHNldCBjb250YWlucyBubyByZWZlcmVuY2VzLiAqLyAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5abi5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKiBBZGRzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlbiBJRC4gKi8gICAgYWRkUmVmZXJlbmNlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBQcih0LCBlKTtcbiAgICAgICAgdGhpcy5abiA9IHRoaXMuWm4uYWRkKG4pLCB0aGlzLmVzID0gdGhpcy5lcy5hZGQobik7XG4gICAgfVxuICAgIC8qKiBBZGQgcmVmZXJlbmNlcyB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5cyBmb3IgdGhlIGdpdmVuIElELiAqLyAgICBzcyh0LCBlKSB7XG4gICAgICAgIHQuZm9yRWFjaCgodCA9PiB0aGlzLmFkZFJlZmVyZW5jZSh0LCBlKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlblxuICAgICAqIElELlxuICAgICAqLyAgICByZW1vdmVSZWZlcmVuY2UodCwgZSkge1xuICAgICAgICB0aGlzLnJzKG5ldyBQcih0LCBlKSk7XG4gICAgfVxuICAgIG9zKHQsIGUpIHtcbiAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHRoaXMucmVtb3ZlUmVmZXJlbmNlKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyBhbGwgcmVmZXJlbmNlcyB3aXRoIGEgZ2l2ZW4gSUQuIENhbGxzIHJlbW92ZVJlZigpIGZvciBlYWNoIGtleVxuICAgICAqIHJlbW92ZWQuXG4gICAgICovICAgIGNzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBQdChuZXcgaHQoW10pKSwgbiA9IG5ldyBQcihlLCB0KSwgcyA9IG5ldyBQcihlLCB0ICsgMSksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXMuZm9yRWFjaEluUmFuZ2UoWyBuLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMucnModCksIGkucHVzaCh0LmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgdXMoKSB7XG4gICAgICAgIHRoaXMuWm4uZm9yRWFjaCgodCA9PiB0aGlzLnJzKHQpKSk7XG4gICAgfVxuICAgIHJzKHQpIHtcbiAgICAgICAgdGhpcy5abiA9IHRoaXMuWm4uZGVsZXRlKHQpLCB0aGlzLmVzID0gdGhpcy5lcy5kZWxldGUodCk7XG4gICAgfVxuICAgIGhzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBQdChuZXcgaHQoW10pKSwgbiA9IG5ldyBQcihlLCB0KSwgcyA9IG5ldyBQcihlLCB0ICsgMSk7XG4gICAgICAgIGxldCBpID0gUG4oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXMuZm9yRWFjaEluUmFuZ2UoWyBuLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgIGkgPSBpLmFkZCh0LmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IFByKHQsIDApLCBuID0gdGhpcy5abi5maXJzdEFmdGVyT3JFcXVhbChlKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IG4gJiYgdC5pc0VxdWFsKG4ua2V5KTtcbiAgICB9XG59XG5cbmNsYXNzIFByIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgdGhpcy5scyA9IGU7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IGtleSB0aGVuIGJ5IElEICovICAgIHN0YXRpYyB0cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBQdC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSkgfHwgZXQodC5scywgZS5scyk7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IElEIHRoZW4gYnkga2V5ICovICAgIHN0YXRpYyBucyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBldCh0LmxzLCBlLmxzKSB8fCBQdC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyB2ciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLkh0ID0gdCwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHNldCBvZiBhbGwgbXV0YXRpb25zIHRoYXQgaGF2ZSBiZWVuIHNlbnQgYnV0IG5vdCB5ZXQgYmVlbiBhcHBsaWVkIHRvXG4gICAgICAgICAqIHRoZSBiYWNrZW5kLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5JbiA9IFtdLCBcbiAgICAgICAgLyoqIE5leHQgdmFsdWUgdG8gdXNlIHdoZW4gYXNzaWduaW5nIHNlcXVlbnRpYWwgSURzIHRvIGVhY2ggbXV0YXRpb24gYmF0Y2guICovXG4gICAgICAgIHRoaXMuZnMgPSAxLCBcbiAgICAgICAgLyoqIEFuIG9yZGVyZWQgbWFwcGluZyBiZXR3ZWVuIGRvY3VtZW50cyBhbmQgdGhlIG11dGF0aW9ucyBiYXRjaCBJRHMuICovXG4gICAgICAgIHRoaXMuZHMgPSBuZXcgZ24oUHIudHMpO1xuICAgIH1cbiAgICBjaGVja0VtcHR5KHQpIHtcbiAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUoMCA9PT0gdGhpcy5Jbi5sZW5ndGgpO1xuICAgIH1cbiAgICBhZGRNdXRhdGlvbkJhdGNoKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuZnM7XG4gICAgICAgIHRoaXMuZnMrKywgdGhpcy5Jbi5sZW5ndGggPiAwICYmIHRoaXMuSW5bdGhpcy5Jbi5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBuaShpLCBlLCBuLCBzKTtcbiAgICAgICAgdGhpcy5Jbi5wdXNoKHIpO1xuICAgICAgICAvLyBUcmFjayByZWZlcmVuY2VzIGJ5IGRvY3VtZW50IGtleSBhbmQgaW5kZXggY29sbGVjdGlvbiBwYXJlbnRzLlxuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgcykgdGhpcy5kcyA9IHRoaXMuZHMuYWRkKG5ldyBQcihlLmtleSwgaSkpLCB0aGlzLkh0LmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIGUua2V5LnBhdGgucG9wTGFzdCgpKTtcbiAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUocik7XG4gICAgfVxuICAgIGxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4ganMucmVzb2x2ZSh0aGlzLndzKGUpKTtcbiAgICB9XG4gICAgZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZSArIDEsIHMgPSB0aGlzLl9zKG4pLCBpID0gcyA8IDAgPyAwIDogcztcbiAgICAgICAgLy8gVGhlIHJlcXVlc3RlZCBiYXRjaElkIG1heSBzdGlsbCBiZSBvdXQgb2YgcmFuZ2Ugc28gbm9ybWFsaXplIGl0IHRvIHRoZVxuICAgICAgICAvLyBzdGFydCBvZiB0aGUgcXVldWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUodGhpcy5Jbi5sZW5ndGggPiBpID8gdGhpcy5JbltpXSA6IG51bGwpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKCkge1xuICAgICAgICByZXR1cm4ganMucmVzb2x2ZSgwID09PSB0aGlzLkluLmxlbmd0aCA/IC0xIDogdGhpcy5mcyAtIDEpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXModCkge1xuICAgICAgICByZXR1cm4ganMucmVzb2x2ZSh0aGlzLkluLnNsaWNlKCkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgUHIoZSwgMCksIHMgPSBuZXcgUHIoZSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5kcy5mb3JFYWNoSW5SYW5nZShbIG4sIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMud3ModC5scyk7XG4gICAgICAgICAgICBpLnB1c2goZSk7XG4gICAgICAgIH0pKSwganMucmVzb2x2ZShpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgZ24oZXQpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgUHIodCwgMCksIHMgPSBuZXcgUHIodCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTtcbiAgICAgICAgICAgIHRoaXMuZHMuZm9yRWFjaEluUmFuZ2UoWyBlLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQodC5scyk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSwganMucmVzb2x2ZSh0aGlzLmdzKG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkge1xuICAgICAgICAvLyBVc2UgdGhlIHF1ZXJ5IHBhdGggYXMgYSBwcmVmaXggZm9yIHRlc3RpbmcgaWYgYSBkb2N1bWVudCBtYXRjaGVzIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgY29uc3QgbiA9IGUucGF0aCwgcyA9IG4ubGVuZ3RoICsgMTtcbiAgICAgICAgLy8gQ29uc3RydWN0IGEgZG9jdW1lbnQgcmVmZXJlbmNlIGZvciBhY3R1YWxseSBzY2FubmluZyB0aGUgaW5kZXguIFVubGlrZVxuICAgICAgICAvLyB0aGUgcHJlZml4IHRoZSBkb2N1bWVudCBrZXkgaW4gdGhpcyByZWZlcmVuY2UgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mXG4gICAgICAgIC8vIHNlZ21lbnRzLiBUaGUgZW1wdHkgc2VnbWVudCBjYW4gYmUgdXNlZCBhIHN1ZmZpeCBvZiB0aGUgcXVlcnkgcGF0aFxuICAgICAgICAvLyBiZWNhdXNlIGl0IHByZWNlZGVzIGFsbCBvdGhlciBzZWdtZW50cyBpbiBhbiBvcmRlcmVkIHRyYXZlcnNhbC5cbiAgICAgICAgbGV0IGkgPSBuO1xuICAgICAgICBQdC5pc0RvY3VtZW50S2V5KGkpIHx8IChpID0gaS5jaGlsZChcIlwiKSk7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgUHIobmV3IFB0KGkpLCAwKTtcbiAgICAgICAgLy8gRmluZCB1bmlxdWUgYmF0Y2hJRHMgcmVmZXJlbmNlZCBieSBhbGwgZG9jdW1lbnRzIHBvdGVudGlhbGx5IG1hdGNoaW5nIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgICAgICAgICBsZXQgbyA9IG5ldyBnbihldCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRzLmZvckVhY2hXaGlsZSgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5rZXkucGF0aDtcbiAgICAgICAgICAgIHJldHVybiAhIW4uaXNQcmVmaXhPZihlKSAmJiAoXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlIHF1ZXJ5XG4gICAgICAgICAgICAvLyBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcycgY2FuJ3QgbWF0Y2hcbiAgICAgICAgICAgIC8vIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgZS5sZW5ndGggPT09IHMgJiYgKG8gPSBvLmFkZCh0LmxzKSksICEwKTtcbiAgICAgICAgfSksIHIpLCBqcy5yZXNvbHZlKHRoaXMuZ3MobykpO1xuICAgIH1cbiAgICBncyh0KSB7XG4gICAgICAgIC8vIENvbnN0cnVjdCBhbiBhcnJheSBvZiBtYXRjaGluZyBiYXRjaGVzLCBzb3J0ZWQgYnkgYmF0Y2hJRCB0byBlbnN1cmUgdGhhdFxuICAgICAgICAvLyBtdWx0aXBsZSBtdXRhdGlvbnMgYWZmZWN0aW5nIHRoZSBzYW1lIGRvY3VtZW50IGtleSBhcmUgYXBwbGllZCBpbiBvcmRlci5cbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLndzKHQpO1xuICAgICAgICAgICAgbnVsbCAhPT0gbiAmJiBlLnB1c2gobik7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgcmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIEIoMCA9PT0gdGhpcy55cyhlLmJhdGNoSWQsIFwicmVtb3ZlZFwiKSksIHRoaXMuSW4uc2hpZnQoKTtcbiAgICAgICAgbGV0IG4gPSB0aGlzLmRzO1xuICAgICAgICByZXR1cm4ganMuZm9yRWFjaChlLm11dGF0aW9ucywgKHMgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBQcihzLmtleSwgZS5iYXRjaElkKTtcbiAgICAgICAgICAgIHJldHVybiBuID0gbi5kZWxldGUoaSksIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUubWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgcy5rZXkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kcyA9IG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdGUodCkge1xuICAgICAgICAvLyBOby1vcCBzaW5jZSB0aGUgbWVtb3J5IG11dGF0aW9uIHF1ZXVlIGRvZXMgbm90IG1haW50YWluIGEgc2VwYXJhdGUgY2FjaGUuXG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBQcihlLCAwKSwgcyA9IHRoaXMuZHMuZmlyc3RBZnRlck9yRXF1YWwobik7XG4gICAgICAgIHJldHVybiBqcy5yZXNvbHZlKGUuaXNFcXVhbChzICYmIHMua2V5KSk7XG4gICAgfVxuICAgIHBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSW4ubGVuZ3RoLCBqcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWUgYW5kIGFzc2VydHMgdGhhdFxuICAgICAqIHRoZSByZXN1bHRpbmcgaW5kZXggaXMgd2l0aGluIHRoZSBib3VuZHMgb2YgdGhlIHF1ZXVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJhdGNoSWQgLSBUaGUgYmF0Y2hJZCB0byBzZWFyY2ggZm9yXG4gICAgICogQHBhcmFtIGFjdGlvbiAtIEEgZGVzY3JpcHRpb24gb2Ygd2hhdCB0aGUgY2FsbGVyIGlzIGRvaW5nLCBwaHJhc2VkIGluIHBhc3NpdmVcbiAgICAgKiBmb3JtIChlLmcuIFwiYWNrbm93bGVkZ2VkXCIgaW4gYSByb3V0aW5lIHRoYXQgYWNrbm93bGVkZ2VzIGJhdGNoZXMpLlxuICAgICAqLyAgICB5cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlLiBUaGlzIG9wZXJhdGlvblxuICAgICAqIGlzIE8oMSkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcHV0ZWQgaW5kZXggb2YgdGhlIGJhdGNoIHdpdGggdGhlIGdpdmVuIGJhdGNoSWQsIGJhc2VkIG9uXG4gICAgICogdGhlIHN0YXRlIG9mIHRoZSBxdWV1ZS4gTm90ZSB0aGlzIGluZGV4IGNhbiBiZSBuZWdhdGl2ZSBpZiB0aGUgcmVxdWVzdGVkXG4gICAgICogYmF0Y2hJZCBoYXMgYWxyZWFkeSBiZWVuIHJlbXZvZWQgZnJvbSB0aGUgcXVldWUgb3IgcGFzdCB0aGUgZW5kIG9mIHRoZVxuICAgICAqIHF1ZXVlIGlmIHRoZSBiYXRjaElkIGlzIGxhcmdlciB0aGFuIHRoZSBsYXN0IGFkZGVkIGJhdGNoLlxuICAgICAqLyAgICBfcyh0KSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLkluLmxlbmd0aCkgXG4gICAgICAgIC8vIEFzIGFuIGluZGV4IHRoaXMgaXMgcGFzdCB0aGUgZW5kIG9mIHRoZSBxdWV1ZVxuICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgLy8gRXhhbWluZSB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlIHRvIGZpZ3VyZSBvdXQgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGVcbiAgICAgICAgLy8gYmF0Y2hJZCBhbmQgaW5kZXhlcyBpbiB0aGUgYXJyYXkuIE5vdGUgdGhhdCBzaW5jZSB0aGUgcXVldWUgaXMgb3JkZXJlZFxuICAgICAgICAvLyBieSBiYXRjaElkLCBpZiB0aGUgZmlyc3QgYmF0Y2ggaGFzIGEgbGFyZ2VyIGJhdGNoSWQgdGhlbiB0aGUgcmVxdWVzdGVkXG4gICAgICAgIC8vIGJhdGNoSWQgZG9lc24ndCBleGlzdCBpbiB0aGUgcXVldWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQgLSB0aGlzLkluWzBdLmJhdGNoSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgdmVyc2lvbiBvZiBsb29rdXBNdXRhdGlvbkJhdGNoIHRoYXQgZG9lc24ndCByZXR1cm4gYSBwcm9taXNlLCB0aGlzIG1ha2VzXG4gICAgICogb3RoZXIgZnVuY3Rpb25zIHRoYXQgdXNlcyB0aGlzIGNvZGUgZWFzaWVyIHRvIHJlYWQgYW5kIG1vcmUgZWZmaWNlbnQuXG4gICAgICovICAgIHdzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuX3ModCk7XG4gICAgICAgIGlmIChlIDwgMCB8fCBlID49IHRoaXMuSW4ubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMuSW5bZV07XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgbWVtb3J5LW9ubHkgUmVtb3RlRG9jdW1lbnRDYWNoZSBmb3IgSW5kZXhlZERiLiBUbyBjb25zdHJ1Y3QsIGludm9rZVxuICogYG5ld01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUoKWAuXG4gKi9cbmNsYXNzIFZyIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2l6ZXIgLSBVc2VkIHRvIGFzc2VzcyB0aGUgc2l6ZSBvZiBhIGRvY3VtZW50LiBGb3IgZWFnZXIgR0MsIHRoaXMgaXNcbiAgICAgKiBleHBlY3RlZCB0byBqdXN0IHJldHVybiAwIHRvIGF2b2lkIHVubmVjZXNzYXJpbHkgZG9pbmcgdGhlIHdvcmsgb2ZcbiAgICAgKiBjYWxjdWxhdGluZyB0aGUgc2l6ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuSHQgPSB0LCB0aGlzLnBzID0gZSwgXG4gICAgICAgIC8qKiBVbmRlcmx5aW5nIGNhY2hlIG9mIGRvY3VtZW50cyBhbmQgdGhlaXIgcmVhZCB0aW1lcy4gKi9cbiAgICAgICAgdGhpcy5kb2NzID0gbmV3IHduKFB0LmNvbXBhcmF0b3IpLCBcbiAgICAgICAgLyoqIFNpemUgb2YgYWxsIGNhY2hlZCBkb2N1bWVudHMuICovXG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHN1cHBsaWVkIGVudHJ5IHRvIHRoZSBjYWNoZSBhbmQgdXBkYXRlcyB0aGUgY2FjaGUgc2l6ZSBhcyBhcHByb3ByaWF0ZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgYWRkRW50cnlgICBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgLlxuICAgICAqLyAgICBhZGRFbnRyeSh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmtleSwgaSA9IHRoaXMuZG9jcy5nZXQocyksIHIgPSBpID8gaS5zaXplIDogMCwgbyA9IHRoaXMucHMoZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3MgPSB0aGlzLmRvY3MuaW5zZXJ0KHMsIHtcbiAgICAgICAgICAgIGRvY3VtZW50OiBlLmNsb25lKCksXG4gICAgICAgICAgICBzaXplOiBvLFxuICAgICAgICAgICAgcmVhZFRpbWU6IG5cbiAgICAgICAgfSksIHRoaXMuc2l6ZSArPSBvIC0gciwgdGhpcy5IdC5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBzLnBhdGgucG9wTGFzdCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGVudHJ5IGZyb20gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYC5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kb2NzLmdldCh0KTtcbiAgICAgICAgZSAmJiAodGhpcy5kb2NzID0gdGhpcy5kb2NzLnJlbW92ZSh0KSwgdGhpcy5zaXplIC09IGUuc2l6ZSk7XG4gICAgfVxuICAgIGdldEVudHJ5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZG9jcy5nZXQoZSk7XG4gICAgICAgIHJldHVybiBqcy5yZXNvbHZlKG4gPyBuLmRvY3VtZW50LmNsb25lKCkgOiBLdC5uZXdJbnZhbGlkRG9jdW1lbnQoZSkpO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBUbigpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmRvY3MuZ2V0KHQpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIGUgPyBlLmRvY3VtZW50LmNsb25lKCkgOiBLdC5uZXdJbnZhbGlkRG9jdW1lbnQodCkpO1xuICAgICAgICB9KSksIGpzLnJlc29sdmUobik7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IFRuKCk7XG4gICAgICAgIC8vIERvY3VtZW50cyBhcmUgb3JkZXJlZCBieSBrZXksIHNvIHdlIGNhbiB1c2UgYSBwcmVmaXggc2NhbiB0byBuYXJyb3cgZG93blxuICAgICAgICAvLyB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBQdChlLnBhdGguY2hpbGQoXCJcIikpLCByID0gdGhpcy5kb2NzLmdldEl0ZXJhdG9yRnJvbShpKTtcbiAgICAgICAgZm9yICg7ci5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3Qge2tleTogdCwgdmFsdWU6IHtkb2N1bWVudDogaSwgcmVhZFRpbWU6IG99fSA9IHIuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKCFlLnBhdGguaXNQcmVmaXhPZih0LnBhdGgpKSBicmVhaztcbiAgICAgICAgICAgIG8uY29tcGFyZVRvKG4pIDw9IDAgfHwgUGUoZSwgaSkgJiYgKHMgPSBzLmluc2VydChpLmtleSwgaS5jbG9uZSgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUocyk7XG4gICAgfVxuICAgIFRzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGpzLmZvckVhY2godGhpcy5kb2NzLCAodCA9PiBlKHQpKSk7XG4gICAgfVxuICAgIG5ld0NoYW5nZUJ1ZmZlcih0KSB7XG4gICAgICAgIC8vIGB0cmFja1JlbW92YWxzYCBpcyBpZ25vcmVzIHNpbmNlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlIGtlZXBzXG4gICAgICAgIC8vIGEgc2VwYXJhdGUgY2hhbmdlbG9nIGFuZCBkb2VzIG5vdCBuZWVkIHNwZWNpYWwgaGFuZGxpbmcgZm9yIHJlbW92YWxzLlxuICAgICAgICByZXR1cm4gbmV3IFNyKHRoaXMpO1xuICAgIH1cbiAgICBnZXRTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUodGhpcy5zaXplKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBtZW1vcnktb25seSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICpcbiAqIEBwYXJhbSBpbmRleE1hbmFnZXIgLSBBIGNsYXNzIHRoYXQgbWFuYWdlcyBjb2xsZWN0aW9uIGdyb3VwIGluZGljZXMuXG4gKiBAcGFyYW0gc2l6ZXIgLSBVc2VkIHRvIGFzc2VzcyB0aGUgc2l6ZSBvZiBhIGRvY3VtZW50LiBGb3IgZWFnZXIgR0MsIHRoaXMgaXNcbiAqIGV4cGVjdGVkIHRvIGp1c3QgcmV0dXJuIDAgdG8gYXZvaWQgdW5uZWNlc3NhcmlseSBkb2luZyB0aGUgd29yayBvZlxuICogY2FsY3VsYXRpbmcgdGhlIHNpemUuXG4gKi9cbi8qKlxuICogSGFuZGxlcyB0aGUgZGV0YWlscyBvZiBhZGRpbmcgYW5kIHVwZGF0aW5nIGRvY3VtZW50cyBpbiB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqL1xuY2xhc3MgU3IgZXh0ZW5kcyBRaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLlNlID0gdDtcbiAgICB9XG4gICAgYXBwbHlDaGFuZ2VzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBzLmRvY3VtZW50LmlzVmFsaWREb2N1bWVudCgpID8gZS5wdXNoKHRoaXMuU2UuYWRkRW50cnkodCwgcy5kb2N1bWVudCwgdGhpcy5nZXRSZWFkVGltZShuKSkpIDogdGhpcy5TZS5yZW1vdmVFbnRyeShuKTtcbiAgICAgICAgfSkpLCBqcy53YWl0Rm9yKGUpO1xuICAgIH1cbiAgICBnZXRGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5TZS5nZXRFbnRyeSh0LCBlKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuU2UuZ2V0RW50cmllcyh0LCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIERyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgYSB0YXJnZXQgdG8gdGhlIGRhdGEgYWJvdXQgdGhhdCB0YXJnZXRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuRXMgPSBuZXcgamkoKHQgPT4gV3QodCkpLCB6dCksIFxuICAgICAgICAvKiogVGhlIGxhc3QgcmVjZWl2ZWQgc25hcHNob3QgdmVyc2lvbi4gKi9cbiAgICAgICAgdGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gcnQubWluKCksIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgdGFyZ2V0IElEIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IDAsIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3Qgc2VxdWVuY2UgbnVtYmVyIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLklzID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG9yZGVyZWQgYmlkaXJlY3Rpb25hbCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgcmVtb3RlIHRhcmdldFxuICAgICAgICAgKiBJRHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkFzID0gbmV3IGJyLCB0aGlzLnRhcmdldENvdW50ID0gMCwgdGhpcy5ScyA9IE5pLnNlKCk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Fcy5mb3JFYWNoKCgodCwgbikgPT4gZShuKSkpLCBqcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkge1xuICAgICAgICByZXR1cm4ganMucmVzb2x2ZSh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkge1xuICAgICAgICByZXR1cm4ganMucmVzb2x2ZSh0aGlzLklzKTtcbiAgICB9XG4gICAgYWxsb2NhdGVUYXJnZXRJZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IHRoaXMuUnMubmV4dCgpLCBqcy5yZXNvbHZlKHRoaXMuaGlnaGVzdFRhcmdldElkKTtcbiAgICB9XG4gICAgc2V0VGFyZ2V0c01ldGFkYXRhKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG4gJiYgKHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4pLCBlID4gdGhpcy5JcyAmJiAodGhpcy5JcyA9IGUpLCBcbiAgICAgICAganMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBjZSh0KSB7XG4gICAgICAgIHRoaXMuRXMuc2V0KHQudGFyZ2V0LCB0KTtcbiAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0SWQ7XG4gICAgICAgIGUgPiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCAmJiAodGhpcy5ScyA9IG5ldyBOaShlKSwgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSBlKSwgdC5zZXF1ZW5jZU51bWJlciA+IHRoaXMuSXMgJiYgKHRoaXMuSXMgPSB0LnNlcXVlbmNlTnVtYmVyKTtcbiAgICB9XG4gICAgYWRkVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNlKGUpLCB0aGlzLnRhcmdldENvdW50ICs9IDEsIGpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNlKGUpLCBqcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Fcy5kZWxldGUoZS50YXJnZXQpLCB0aGlzLkFzLmNzKGUudGFyZ2V0SWQpLCB0aGlzLnRhcmdldENvdW50IC09IDEsIFxuICAgICAgICBqcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuRXMuZm9yRWFjaCgoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIG8uc2VxdWVuY2VOdW1iZXIgPD0gZSAmJiBudWxsID09PSBuLmdldChvLnRhcmdldElkKSAmJiAodGhpcy5Fcy5kZWxldGUociksIGkucHVzaCh0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIG8udGFyZ2V0SWQpKSwgXG4gICAgICAgICAgICBzKyspO1xuICAgICAgICB9KSksIGpzLndhaXRGb3IoaSkubmV4dCgoKCkgPT4gcykpO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDb3VudCh0KSB7XG4gICAgICAgIHJldHVybiBqcy5yZXNvbHZlKHRoaXMudGFyZ2V0Q291bnQpO1xuICAgIH1cbiAgICBnZXRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuRXMuZ2V0KGUpIHx8IG51bGw7XG4gICAgICAgIHJldHVybiBqcy5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBhZGRNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Bcy5zcyhlLCBuKSwganMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICB0aGlzLkFzLm9zKGUsIG4pO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gcyAmJiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHMubWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgZSkpO1xuICAgICAgICB9KSksIGpzLndhaXRGb3IoaSk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQXMuY3MoZSksIGpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Bcy5ocyhlKTtcbiAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUobik7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUodGhpcy5Bcy5jb250YWluc0tleShlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIG1lbW9yeS1iYWNrZWQgaW5zdGFuY2Ugb2YgUGVyc2lzdGVuY2UuIERhdGEgaXMgc3RvcmVkIG9ubHkgaW4gUkFNIGFuZFxuICogbm90IHBlcnNpc3RlZCBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKi9cbmNsYXNzIENyIHtcbiAgICAvKipcbiAgICAgKiBUaGUgY29uc3RydWN0b3IgYWNjZXB0cyBhIGZhY3RvcnkgZm9yIGNyZWF0aW5nIGEgcmVmZXJlbmNlIGRlbGVnYXRlLiBUaGlzXG4gICAgICogYWxsb3dzIGJvdGggdGhlIGRlbGVnYXRlIGFuZCB0aGlzIGluc3RhbmNlIHRvIGhhdmUgc3Ryb25nIHJlZmVyZW5jZXMgdG9cbiAgICAgKiBlYWNoIG90aGVyIHdpdGhvdXQgaGF2aW5nIG51bGxhYmxlIGZpZWxkcyB0aGF0IHdvdWxkIHRoZW4gbmVlZCB0byBiZVxuICAgICAqIGNoZWNrZWQgb3IgYXNzZXJ0ZWQgb24gZXZlcnkgYWNjZXNzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5icyA9IHt9LCB0aGlzLkxlID0gbmV3IFgoMCksIHRoaXMuQmUgPSAhMSwgdGhpcy5CZSA9ICEwLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gdCh0aGlzKSwgXG4gICAgICAgIHRoaXMuemUgPSBuZXcgRHIodGhpcyk7XG4gICAgICAgIHRoaXMuSHQgPSBuZXcgcGksIHRoaXMuSGUgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZyKHQsIGUpO1xuICAgICAgICB9KHRoaXMuSHQsICh0ID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuUHModCkpKSwgdGhpcy5OID0gbmV3IHJpKGUpLCB0aGlzLkplID0gbmV3IFJyKHRoaXMuTik7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBObyBkdXJhYmxlIHN0YXRlIHRvIGVuc3VyZSBpcyBjbG9zZWQgb24gc2h1dGRvd24uXG4gICAgICAgIHJldHVybiB0aGlzLkJlID0gITEsIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQmU7XG4gICAgfVxuICAgIHNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2V0TmV0d29ya0VuYWJsZWQoKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBnZXRJbmRleE1hbmFnZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkh0O1xuICAgIH1cbiAgICBnZXRNdXRhdGlvblF1ZXVlKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLmJzW3QudG9LZXkoKV07XG4gICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3IHZyKHRoaXMuSHQsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpLCB0aGlzLmJzW3QudG9LZXkoKV0gPSBlKSwgXG4gICAgICAgIGU7XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy56ZTtcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSGU7XG4gICAgfVxuICAgIGdldEJ1bmRsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5KZTtcbiAgICB9XG4gICAgcnVuVHJhbnNhY3Rpb24odCwgZSwgbikge1xuICAgICAgICAkKFwiTWVtb3J5UGVyc2lzdGVuY2VcIiwgXCJTdGFydGluZyB0cmFuc2FjdGlvbjpcIiwgdCk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgTnIodGhpcy5MZS5uZXh0KCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS52cygpLCBuKHMpLm5leHQoKHQgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5WcyhzKS5uZXh0KCgoKSA9PiB0KSkpKS50b1Byb21pc2UoKS50aGVuKCh0ID0+IChzLnJhaXNlT25Db21taXR0ZWRFdmVudCgpLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgU3ModCwgZSkge1xuICAgICAgICByZXR1cm4ganMub3IoT2JqZWN0LnZhbHVlcyh0aGlzLmJzKS5tYXAoKG4gPT4gKCkgPT4gbi5jb250YWluc0tleSh0LCBlKSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWVtb3J5IHBlcnNpc3RlbmNlIGlzIG5vdCBhY3R1YWxseSB0cmFuc2FjdGlvbmFsLCBidXQgZnV0dXJlIGltcGxlbWVudGF0aW9uc1xuICogbWF5IGhhdmUgdHJhbnNhY3Rpb24tc2NvcGVkIHN0YXRlLlxuICovIGNsYXNzIE5yIGV4dGVuZHMgS3Mge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSB0O1xuICAgIH1cbn1cblxuY2xhc3MgeHIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHQsIFxuICAgICAgICAvKiogVHJhY2tzIGFsbCBkb2N1bWVudHMgdGhhdCBhcmUgYWN0aXZlIGluIFF1ZXJ5IHZpZXdzLiAqL1xuICAgICAgICB0aGlzLkRzID0gbmV3IGJyLCBcbiAgICAgICAgLyoqIFRoZSBsaXN0IG9mIGRvY3VtZW50cyB0aGF0IGFyZSBwb3RlbnRpYWxseSBHQ2VkIGFmdGVyIGVhY2ggdHJhbnNhY3Rpb24uICovXG4gICAgICAgIHRoaXMuQ3MgPSBudWxsO1xuICAgIH1cbiAgICBzdGF0aWMgTnModCkge1xuICAgICAgICByZXR1cm4gbmV3IHhyKHQpO1xuICAgIH1cbiAgICBnZXQgeHMoKSB7XG4gICAgICAgIGlmICh0aGlzLkNzKSByZXR1cm4gdGhpcy5DcztcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Ecy5hZGRSZWZlcmVuY2UobiwgZSksIHRoaXMueHMuZGVsZXRlKG4udG9TdHJpbmcoKSksIGpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRHMucmVtb3ZlUmVmZXJlbmNlKG4sIGUpLCB0aGlzLnhzLmFkZChuLnRvU3RyaW5nKCkpLCBqcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueHMuYWRkKGUudG9TdHJpbmcoKSksIGpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5Ecy5jcyhlLnRhcmdldElkKS5mb3JFYWNoKCh0ID0+IHRoaXMueHMuYWRkKHQudG9TdHJpbmcoKSkpKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKTtcbiAgICAgICAgcmV0dXJuIG4uZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZS50YXJnZXRJZCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICB0LmZvckVhY2goKHQgPT4gdGhpcy54cy5hZGQodC50b1N0cmluZygpKSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbi5yZW1vdmVUYXJnZXREYXRhKHQsIGUpKSk7XG4gICAgfVxuICAgIHZzKCkge1xuICAgICAgICB0aGlzLkNzID0gbmV3IFNldDtcbiAgICB9XG4gICAgVnModCkge1xuICAgICAgICAvLyBSZW1vdmUgbmV3bHkgb3JwaGFuZWQgZG9jdW1lbnRzLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkubmV3Q2hhbmdlQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiBqcy5mb3JFYWNoKHRoaXMueHMsIChuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBQdC5mcm9tUGF0aChuKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmtzKHQsIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQgfHwgZS5yZW1vdmVFbnRyeShzKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+ICh0aGlzLkNzID0gbnVsbCwgZS5hcHBseSh0KSkpKTtcbiAgICB9XG4gICAgdXBkYXRlTGltYm9Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtzKHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgdCA/IHRoaXMueHMuZGVsZXRlKGUudG9TdHJpbmcoKSkgOiB0aGlzLnhzLmFkZChlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFBzKHQpIHtcbiAgICAgICAgLy8gRm9yIGVhZ2VyIEdDLCB3ZSBkb24ndCBjYXJlIGFib3V0IHRoZSBkb2N1bWVudCBzaXplLCB0aGVyZSBhcmUgbm8gc2l6ZSB0aHJlc2hvbGRzLlxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAga3ModCwgZSkge1xuICAgICAgICByZXR1cm4ganMub3IoWyAoKSA9PiBqcy5yZXNvbHZlKHRoaXMuRHMuY29udGFpbnNLZXkoZSkpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuY29udGFpbnNLZXkodCwgZSksICgpID0+IHRoaXMucGVyc2lzdGVuY2UuU3ModCwgZSkgXSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVGhlIGZvcm1hdCBvZiB0aGUgTG9jYWxTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB0aGUgY2xpZW50IHN0YXRlIGlzOlxuLy8gICAgIGZpcmVzdG9yZV9jbGllbnRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxpbnN0YW5jZV9rZXk+XG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgY2xpZW50IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIGtyKHQsIGUpIHtcbiAgICByZXR1cm4gYGZpcmVzdG9yZV9jbGllbnRzXyR7dH1fJHtlfWA7XG59XG5cbi8vIFRoZSBmb3JtYXQgb2YgdGhlIFdlYlN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIHRoZSBtdXRhdGlvbiBzdGF0ZSBpczpcbi8vICAgICBmaXJlc3RvcmVfbXV0YXRpb25zXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxiYXRjaF9pZD5cbi8vICAgICAoZm9yIHVuYXV0aGVudGljYXRlZCB1c2Vycylcbi8vIG9yOiBmaXJlc3RvcmVfbXV0YXRpb25zXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxiYXRjaF9pZD5fPHVzZXJfdWlkPlxuXG4vLyAndXNlcl91aWQnIGlzIGxhc3QgdG8gYXZvaWQgbmVlZGluZyB0byBlc2NhcGUgJ18nIGNoYXJhY3RlcnMgdGhhdCBpdCBtaWdodFxuLy8gY29udGFpbi5cbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBtdXRhdGlvbiBiYXRjaCBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiAkcih0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSBgZmlyZXN0b3JlX211dGF0aW9uc18ke3R9XyR7bn1gO1xuICAgIHJldHVybiBlLmlzQXV0aGVudGljYXRlZCgpICYmIChzICs9IGBfJHtlLnVpZH1gKSwgcztcbn1cblxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgV2ViU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgYSBxdWVyeSB0YXJnZXQncyBtZXRhZGF0YSBpczpcbi8vICAgICBmaXJlc3RvcmVfdGFyZ2V0c188cGVyc2lzdGVuY2VfcHJlZml4Pl88dGFyZ2V0X2lkPlxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIHF1ZXJ5IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIE9yKHQsIGUpIHtcbiAgICByZXR1cm4gYGZpcmVzdG9yZV90YXJnZXRzXyR7dH1fJHtlfWA7XG59XG5cbi8vIFRoZSBXZWJTdG9yYWdlIHByZWZpeCB0aGF0IHN0b3JlcyB0aGUgcHJpbWFyeSB0YWIncyBvbmxpbmUgc3RhdGUuIFRoZVxuLy8gZm9ybWF0IG9mIHRoZSBrZXkgaXM6XG4vLyAgICAgZmlyZXN0b3JlX29ubGluZV9zdGF0ZV88cGVyc2lzdGVuY2VfcHJlZml4PlxuLyoqXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBtdXRhdGlvbiBiYXRjaCwgaW5jbHVkaW5nIGl0cyB1c2VyIElELCBiYXRjaCBJRCBhbmRcbiAqIHdoZXRoZXIgdGhlIGJhdGNoIGlzICdwZW5kaW5nJywgJ2Fja25vd2xlZGdlZCcgb3IgJ3JlamVjdGVkJy5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgRnIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy51c2VyID0gdCwgdGhpcy5iYXRjaElkID0gZSwgdGhpcy5zdGF0ZSA9IG4sIHRoaXMuZXJyb3IgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBNdXRhdGlvbk1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgJHModCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gSlNPTi5wYXJzZShuKTtcbiAgICAgICAgbGV0IGksIHIgPSBcIm9iamVjdFwiID09IHR5cGVvZiBzICYmIC0xICE9PSBbIFwicGVuZGluZ1wiLCBcImFja25vd2xlZGdlZFwiLCBcInJlamVjdGVkXCIgXS5pbmRleE9mKHMuc3RhdGUpICYmICh2b2lkIDAgPT09IHMuZXJyb3IgfHwgXCJvYmplY3RcIiA9PSB0eXBlb2Ygcy5lcnJvcik7XG4gICAgICAgIHJldHVybiByICYmIHMuZXJyb3IgJiYgKHIgPSBcInN0cmluZ1wiID09IHR5cGVvZiBzLmVycm9yLm1lc3NhZ2UgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2Ygcy5lcnJvci5jb2RlLCBcbiAgICAgICAgciAmJiAoaSA9IG5ldyBqKHMuZXJyb3IuY29kZSwgcy5lcnJvci5tZXNzYWdlKSkpLCByID8gbmV3IEZyKHQsIGUsIHMuc3RhdGUsIGkpIDogKE8oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIG11dGF0aW9uIHN0YXRlIGZvciBJRCAnJHtlfSc6ICR7bn1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbiAgICBPcygpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yICYmICh0LmVycm9yID0ge1xuICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvci5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5lcnJvci5tZXNzYWdlXG4gICAgICAgIH0pLCBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogSG9sZHMgdGhlIHN0YXRlIG9mIGEgcXVlcnkgdGFyZ2V0LCBpbmNsdWRpbmcgaXRzIHRhcmdldCBJRCBhbmQgd2hldGhlciB0aGVcbiAqIHRhcmdldCBpcyAnbm90LWN1cnJlbnQnLCAnY3VycmVudCcgb3IgJ3JlamVjdGVkJy5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgTXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuc3RhdGUgPSBlLCB0aGlzLmVycm9yID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgUXVlcnlUYXJnZXRNZXRhZGF0YSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljICRzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UoZSk7XG4gICAgICAgIGxldCBzLCBpID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgbiAmJiAtMSAhPT0gWyBcIm5vdC1jdXJyZW50XCIsIFwiY3VycmVudFwiLCBcInJlamVjdGVkXCIgXS5pbmRleE9mKG4uc3RhdGUpICYmICh2b2lkIDAgPT09IG4uZXJyb3IgfHwgXCJvYmplY3RcIiA9PSB0eXBlb2Ygbi5lcnJvcik7XG4gICAgICAgIHJldHVybiBpICYmIG4uZXJyb3IgJiYgKGkgPSBcInN0cmluZ1wiID09IHR5cGVvZiBuLmVycm9yLm1lc3NhZ2UgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2Ygbi5lcnJvci5jb2RlLCBcbiAgICAgICAgaSAmJiAocyA9IG5ldyBqKG4uZXJyb3IuY29kZSwgbi5lcnJvci5tZXNzYWdlKSkpLCBpID8gbmV3IE1yKHQsIG4uc3RhdGUsIHMpIDogKE8oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIHRhcmdldCBzdGF0ZSBmb3IgSUQgJyR7dH0nOiAke2V9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG4gICAgT3MoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvciAmJiAodC5lcnJvciA9IHtcbiAgICAgICAgICAgIGNvZGU6IHRoaXMuZXJyb3IuY29kZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZXJyb3IubWVzc2FnZVxuICAgICAgICB9KSwgSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgaW1tdXRhYmxlIENsaWVudFN0YXRlIGZvciBhIGNsaWVudCByZWFkIGZyb21cbiAqIFdlYlN0b3JhZ2UsIGNvbnRhaW5pbmcgdGhlIGxpc3Qgb2YgYWN0aXZlIHF1ZXJ5IHRhcmdldHMuXG4gKi8gY2xhc3MgTHIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHQsIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgUmVtb3RlQ2xpZW50U3RhdGUgZnJvbSB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyAkcyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKGUpO1xuICAgICAgICBsZXQgcyA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4gJiYgbi5hY3RpdmVUYXJnZXRJZHMgaW5zdGFuY2VvZiBBcnJheSwgaSA9IFZuKCk7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyBzICYmIHQgPCBuLmFjdGl2ZVRhcmdldElkcy5sZW5ndGg7ICsrdCkgcyA9IGJ0KG4uYWN0aXZlVGFyZ2V0SWRzW3RdKSwgXG4gICAgICAgIGkgPSBpLmFkZChuLmFjdGl2ZVRhcmdldElkc1t0XSk7XG4gICAgICAgIHJldHVybiBzID8gbmV3IExyKHQsIGkpIDogKE8oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIGNsaWVudCBkYXRhIGZvciBpbnN0YW5jZSAnJHt0fSc6ICR7ZX1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIG9ubGluZSBzdGF0ZSBmb3IgYWxsIGNsaWVudHMgcGFydGljaXBhdGluZyBpblxuICogbXVsdGktdGFiLiBUaGUgb25saW5lIHN0YXRlIGlzIG9ubHkgd3JpdHRlbiB0byBieSB0aGUgcHJpbWFyeSBjbGllbnQsIGFuZFxuICogdXNlZCBpbiBzZWNvbmRhcnkgY2xpZW50cyB0byB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3MuXG4gKi8gY2xhc3MgQnIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHQsIHRoaXMub25saW5lU3RhdGUgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBTaGFyZWRPbmxpbmVTdGF0ZSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljICRzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEpTT04ucGFyc2UodCk7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiID09IHR5cGVvZiBlICYmIC0xICE9PSBbIFwiVW5rbm93blwiLCBcIk9ubGluZVwiLCBcIk9mZmxpbmVcIiBdLmluZGV4T2YoZS5vbmxpbmVTdGF0ZSkgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS5jbGllbnRJZCA/IG5ldyBCcihlLmNsaWVudElkLCBlLm9ubGluZVN0YXRlKSA6IChPKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSBvbmxpbmUgc3RhdGU6ICR7dH1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNZXRhZGF0YSBzdGF0ZSBvZiB0aGUgbG9jYWwgY2xpZW50LiBVbmxpa2UgYFJlbW90ZUNsaWVudFN0YXRlYCwgdGhpcyBjbGFzcyBpc1xuICogbXV0YWJsZSBhbmQga2VlcHMgdHJhY2sgb2YgYWxsIHBlbmRpbmcgbXV0YXRpb25zLCB3aGljaCBhbGxvd3MgdXMgdG9cbiAqIHVwZGF0ZSB0aGUgcmFuZ2Ugb2YgcGVuZGluZyBtdXRhdGlvbiBiYXRjaCBJRHMgYXMgbmV3IG11dGF0aW9ucyBhcmUgYWRkZWQgb3JcbiAqIHJlbW92ZWQuXG4gKlxuICogVGhlIGRhdGEgaW4gYExvY2FsQ2xpZW50U3RhdGVgIGlzIG5vdCByZWFkIGZyb20gV2ViU3RvcmFnZSBhbmQgaW5zdGVhZFxuICogdXBkYXRlZCB2aWEgaXRzIGluc3RhbmNlIG1ldGhvZHMuIFRoZSB1cGRhdGVkIHN0YXRlIGNhbiBiZSBzZXJpYWxpemVkIHZpYVxuICogYHRvV2ViU3RvcmFnZUpTT04oKWAuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG5jbGFzcyBVciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gVm4oKTtcbiAgICB9XG4gICAgRnModCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLmFkZCh0KTtcbiAgICB9XG4gICAgTXModCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBlbnRyeSBpbnRvIGEgSlNPTi1lbmNvZGVkIGZvcm1hdCB3ZSBjYW4gdXNlIGZvciBXZWJTdG9yYWdlLlxuICAgICAqIERvZXMgbm90IGVuY29kZSBgY2xpZW50SWRgIGFzIGl0IGlzIHBhcnQgb2YgdGhlIGtleSBpbiBXZWJTdG9yYWdlLlxuICAgICAqLyAgICBPcygpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIGFjdGl2ZVRhcmdldElkczogdGhpcy5hY3RpdmVUYXJnZXRJZHMudG9BcnJheSgpLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWAgdXNlcyBXZWJTdG9yYWdlICh3aW5kb3cubG9jYWxTdG9yYWdlKSBhcyB0aGVcbiAqIGJhY2tpbmcgc3RvcmUgZm9yIHRoZSBTaGFyZWRDbGllbnRTdGF0ZS4gSXQga2VlcHMgdHJhY2sgb2YgYWxsIGFjdGl2ZVxuICogY2xpZW50cyBhbmQgc3VwcG9ydHMgbW9kaWZpY2F0aW9ucyBvZiB0aGUgbG9jYWwgY2xpZW50J3MgZGF0YS5cbiAqLyBjbGFzcyBxciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHQsIHRoaXMuT2UgPSBlLCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gbiwgdGhpcy5McyA9IHMsIHRoaXMuc3luY0VuZ2luZSA9IG51bGwsIFxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG51bGwsIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gbnVsbCwgdGhpcy5CcyA9IHRoaXMuVXMuYmluZCh0aGlzKSwgXG4gICAgICAgIHRoaXMucXMgPSBuZXcgd24oZXQpLCB0aGlzLnN0YXJ0ZWQgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYXB0dXJlcyBXZWJTdG9yYWdlIGV2ZW50cyB0aGF0IG9jY3VyIGJlZm9yZSBgc3RhcnQoKWAgaXMgY2FsbGVkLiBUaGVzZVxuICAgICAgICAgKiBldmVudHMgYXJlIHJlcGxheWVkIG9uY2UgYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWAgaXMgc3RhcnRlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuS3MgPSBbXTtcbiAgICAgICAgLy8gRXNjYXBlIHRoZSBzcGVjaWFsIGNoYXJhY3RlcnMgbWVudGlvbmVkIGhlcmU6XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvR3VpZGUvUmVndWxhcl9FeHByZXNzaW9uc1xuICAgICAgICBjb25zdCByID0gbi5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgXCJcXFxcJCZcIik7XG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSwgdGhpcy5jdXJyZW50VXNlciA9IGksIHRoaXMuanMgPSBrcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLkxzKSwgXG4gICAgICAgIHRoaXMuUXMgPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgY3VycmVudCBzZXF1ZW5jZSBudW1iZXIuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX3NlcXVlbmNlX251bWJlcl8ke3R9YDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodGhpcy5wZXJzaXN0ZW5jZUtleSksIHRoaXMucXMgPSB0aGlzLnFzLmluc2VydCh0aGlzLkxzLCBuZXcgVXIpLCB0aGlzLldzID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV9jbGllbnRzXyR7cn1fKFteX10qKSRgKSwgXG4gICAgICAgIHRoaXMuR3MgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX211dGF0aW9uc18ke3J9XyhcXFxcZCspKD86XyguKikpPyRgKSwgdGhpcy56cyA9IG5ldyBSZWdFeHAoYF5maXJlc3RvcmVfdGFyZ2V0c18ke3J9XyhcXFxcZCspJGApLCBcbiAgICAgICAgdGhpcy5IcyA9IFxuICAgICAgICAvKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIHRoZSBvbmxpbmUgc3RhdGUgb2YgdGhlIHByaW1hcnkgdGFiLiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9vbmxpbmVfc3RhdGVfJHt0fWA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFdlYlN0b3JhZ2UgcHJlZml4IHRoYXQgcGxheXMgYXMgYSBldmVudCB0byBpbmRpY2F0ZSB0aGUgcmVtb3RlIGRvY3VtZW50c1xuICAgICAgICAvLyBtaWdodCBoYXZlIGNoYW5nZWQgZHVlIHRvIHNvbWUgc2Vjb25kYXJ5IHRhYnMgbG9hZGluZyBhIGJ1bmRsZS5cbiAgICAgICAgLy8gZm9ybWF0IG9mIHRoZSBrZXkgaXM6XG4gICAgICAgIC8vICAgICBmaXJlc3RvcmVfYnVuZGxlX2xvYWRlZF88cGVyc2lzdGVuY2VLZXk+XG4gICAgICAgICh0aGlzLnBlcnNpc3RlbmNlS2V5KSwgdGhpcy5KcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX2J1bmRsZV9sb2FkZWRfJHt0fWA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFdlYlN0b3JhZ2Uga2V5IHByZWZpeCBmb3IgdGhlIGtleSB0aGF0IHN0b3JlcyB0aGUgbGFzdCBzZXF1ZW5jZSBudW1iZXIgYWxsb2NhdGVkLiBUaGUga2V5XG4gICAgICAgIC8vIGxvb2tzIGxpa2UgJ2ZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfPHBlcnNpc3RlbmNlX3ByZWZpeD4nLlxuICAgICAgICAodGhpcy5wZXJzaXN0ZW5jZUtleSksIFxuICAgICAgICAvLyBSYXRoZXIgdGhhbiBhZGRpbmcgdGhlIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIHN0YXJ0KCksIHdlIGFkZCB0aGVcbiAgICAgICAgLy8gc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgaW5pdGlhbGl6YXRpb24uIFRoaXMgZW5zdXJlcyB0aGF0IHdlIGNvbGxlY3RcbiAgICAgICAgLy8gZXZlbnRzIGJlZm9yZSBvdGhlciBjb21wb25lbnRzIHBvcHVsYXRlIHRoZWlyIGluaXRpYWwgc3RhdGUgKGR1cmluZyB0aGVpclxuICAgICAgICAvLyByZXNwZWN0aXZlIHN0YXJ0KCkgY2FsbHMpLiBPdGhlcndpc2UsIHdlIG1pZ2h0IGZvciBleGFtcGxlIG1pc3MgYVxuICAgICAgICAvLyBtdXRhdGlvbiB0aGF0IGlzIGFkZGVkIGFmdGVyIExvY2FsU3RvcmUncyBzdGFydCgpIHByb2Nlc3NlZCB0aGUgZXhpc3RpbmdcbiAgICAgICAgLy8gbXV0YXRpb25zIGJ1dCBiZWZvcmUgd2Ugb2JzZXJ2ZSBXZWJTdG9yYWdlIGV2ZW50cy5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgdGhpcy5Ccyk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiBXZWJTdG9yYWdlIGlzIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gKi8gICAgc3RhdGljIGJ0KHQpIHtcbiAgICAgICAgcmV0dXJuICEoIXQgfHwgIXQubG9jYWxTdG9yYWdlKTtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIC8vIFJldHJpZXZlIHRoZSBsaXN0IG9mIGV4aXN0aW5nIGNsaWVudHMgdG8gYmFja2ZpbGwgdGhlIGRhdGEgaW5cbiAgICAgICAgLy8gU2hhcmVkQ2xpZW50U3RhdGUuXG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLnN5bmNFbmdpbmUucG4oKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgIGlmIChlID09PSB0aGlzLkxzKSBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldEl0ZW0oa3IodGhpcy5wZXJzaXN0ZW5jZUtleSwgZSkpO1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gTHIuJHMoZSwgdCk7XG4gICAgICAgICAgICAgICAgbiAmJiAodGhpcy5xcyA9IHRoaXMucXMuaW5zZXJ0KG4uY2xpZW50SWQsIG4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLllzKCk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGFuIGV4aXN0aW5nIG9ubGluZSBzdGF0ZSBhbmQgY2FsbCB0aGUgY2FsbGJhY2sgaGFuZGxlclxuICAgICAgICAvLyBpZiBhcHBsaWNhYmxlLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odGhpcy5Icyk7XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5YcyhlKTtcbiAgICAgICAgICAgIHQgJiYgdGhpcy5acyh0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5LcykgdGhpcy5Vcyh0KTtcbiAgICAgICAgdGhpcy5LcyA9IFtdLCBcbiAgICAgICAgLy8gUmVnaXN0ZXIgYSB3aW5kb3cgdW5sb2FkIGhvb2sgdG8gcmVtb3ZlIHRoZSBjbGllbnQgbWV0YWRhdGEgZW50cnkgZnJvbVxuICAgICAgICAvLyBXZWJTdG9yYWdlIGV2ZW4gaWYgYHNodXRkb3duKClgIHdhcyBub3QgY2FsbGVkLlxuICAgICAgICB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgKCgpID0+IHRoaXMuc2h1dGRvd24oKSkpLCB0aGlzLnN0YXJ0ZWQgPSAhMDtcbiAgICB9XG4gICAgd3JpdGVTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLlFzLCBKU09OLnN0cmluZ2lmeSh0KSk7XG4gICAgfVxuICAgIGdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGkodGhpcy5xcyk7XG4gICAgfVxuICAgIGlzQWN0aXZlUXVlcnlUYXJnZXQodCkge1xuICAgICAgICBsZXQgZSA9ICExO1xuICAgICAgICByZXR1cm4gdGhpcy5xcy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgcy5hY3RpdmVUYXJnZXRJZHMuaGFzKHQpICYmIChlID0gITApO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdNdXRhdGlvbih0KSB7XG4gICAgICAgIHRoaXMuZWkodCwgXCJwZW5kaW5nXCIpO1xuICAgIH1cbiAgICB1cGRhdGVNdXRhdGlvblN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5laSh0LCBlLCBuKSwgXG4gICAgICAgIC8vIE9uY2UgYSBmaW5hbCBtdXRhdGlvbiByZXN1bHQgaXMgb2JzZXJ2ZWQgYnkgb3RoZXIgY2xpZW50cywgdGhleSBubyBsb25nZXJcbiAgICAgICAgLy8gYWNjZXNzIHRoZSBtdXRhdGlvbidzIG1ldGFkYXRhIGVudHJ5LiBTaW5jZSBXZWJTdG9yYWdlIHJlcGxheXMgZXZlbnRzXG4gICAgICAgIC8vIGluIG9yZGVyLCBpdCBpcyBzYWZlIHRvIGRlbGV0ZSB0aGUgZW50cnkgcmlnaHQgYWZ0ZXIgdXBkYXRpbmcgaXQuXG4gICAgICAgIHRoaXMubmkodCk7XG4gICAgfVxuICAgIGFkZExvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICBsZXQgZSA9IFwibm90LWN1cnJlbnRcIjtcbiAgICAgICAgLy8gTG9va3VwIGFuIGV4aXN0aW5nIHF1ZXJ5IHN0YXRlIGlmIHRoZSB0YXJnZXQgSUQgd2FzIGFscmVhZHkgcmVnaXN0ZXJlZFxuICAgICAgICAvLyBieSBhbm90aGVyIHRhYlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aXZlUXVlcnlUYXJnZXQodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShPcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0KSk7XG4gICAgICAgICAgICBpZiAobikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBNci4kcyh0LCBuKTtcbiAgICAgICAgICAgICAgICBzICYmIChlID0gcy5zdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc2kuRnModCksIHRoaXMuWXMoKSwgZTtcbiAgICB9XG4gICAgcmVtb3ZlTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMuc2kuTXModCksIHRoaXMuWXMoKTtcbiAgICB9XG4gICAgaXNMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2kuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KTtcbiAgICB9XG4gICAgY2xlYXJRdWVyeVN0YXRlKHQpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKE9yKHRoaXMucGVyc2lzdGVuY2VLZXksIHQpKTtcbiAgICB9XG4gICAgdXBkYXRlUXVlcnlTdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuaWkodCwgZSwgbik7XG4gICAgfVxuICAgIGhhbmRsZVVzZXJDaGFuZ2UodCwgZSwgbikge1xuICAgICAgICBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5uaSh0KTtcbiAgICAgICAgfSkpLCB0aGlzLmN1cnJlbnRVc2VyID0gdCwgbi5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWRkUGVuZGluZ011dGF0aW9uKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNldE9ubGluZVN0YXRlKHQpIHtcbiAgICAgICAgdGhpcy5yaSh0KTtcbiAgICB9XG4gICAgbm90aWZ5QnVuZGxlTG9hZGVkKCkge1xuICAgICAgICB0aGlzLm9pKCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIHRoaXMuQnMpLCB0aGlzLnJlbW92ZUl0ZW0odGhpcy5qcyksIFxuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSAhMSk7XG4gICAgfVxuICAgIGdldEl0ZW0odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odCk7XG4gICAgICAgIHJldHVybiAkKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJSRUFEXCIsIHQsIGUpLCBlO1xuICAgIH1cbiAgICBzZXRJdGVtKHQsIGUpIHtcbiAgICAgICAgJChcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiU0VUXCIsIHQsIGUpLCB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSh0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlSXRlbSh0KSB7XG4gICAgICAgICQoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlJFTU9WRVwiLCB0KSwgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0odCk7XG4gICAgfVxuICAgIFVzKHQpIHtcbiAgICAgICAgLy8gTm90ZTogVGhlIGZ1bmN0aW9uIGlzIHR5cGVkIHRvIHRha2UgRXZlbnQgdG8gYmUgaW50ZXJmYWNlLWNvbXBhdGlibGUgd2l0aFxuICAgICAgICAvLyBgV2luZG93LmFkZEV2ZW50TGlzdGVuZXJgLlxuICAgICAgICBjb25zdCBlID0gdDtcbiAgICAgICAgaWYgKGUuc3RvcmFnZUFyZWEgPT09IHRoaXMuc3RvcmFnZSkge1xuICAgICAgICAgICAgaWYgKCQoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIkVWRU5UXCIsIGUua2V5LCBlLm5ld1ZhbHVlKSwgZS5rZXkgPT09IHRoaXMuanMpIHJldHVybiB2b2lkIE8oXCJSZWNlaXZlZCBXZWJTdG9yYWdlIG5vdGlmaWNhdGlvbiBmb3IgbG9jYWwgY2hhbmdlLiBBbm90aGVyIGNsaWVudCBtaWdodCBoYXZlIGdhcmJhZ2UtY29sbGVjdGVkIG91ciBzdGF0ZVwiKTtcbiAgICAgICAgICAgIHRoaXMuT2UuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUua2V5KSBpZiAodGhpcy5Xcy50ZXN0KGUua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmNpKGUua2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5haSh0LCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy51aShlLmtleSwgZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLmFpKHQuY2xpZW50SWQsIHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuR3MudGVzdChlLmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuaGkoZS5rZXksIGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy5saSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnpzLnRlc3QoZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmZpKGUua2V5LCBlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHRoaXMuZGkodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09IHRoaXMuSHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuWHMoZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLlpzKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSB0aGlzLlFzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlID0gWC5UO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IHQpIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCKFwibnVtYmVyXCIgPT0gdHlwZW9mIG4pLCBlID0gbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIkZhaWxlZCB0byByZWFkIHNlcXVlbmNlIG51bWJlciBmcm9tIFdlYlN0b3JhZ2VcIiwgdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGVgIGlzIGEgc2ltcGxlIGltcGxlbWVudGF0aW9uIG9mIFNoYXJlZENsaWVudFN0YXRlIGZvclxuICogY2xpZW50cyB1c2luZyBtZW1vcnkgcGVyc2lzdGVuY2UuIFRoZSBzdGF0ZSBpbiB0aGlzIGNsYXNzIHJlbWFpbnMgZnVsbHlcbiAqIGlzb2xhdGVkIGFuZCBubyBzeW5jaHJvbml6YXRpb24gaXMgcGVyZm9ybWVkLlxuICovIChlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQgIT09IFguVCAmJiB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlcih0KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gdGhpcy5KcykgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS53aSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLktzLnB1c2goZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHNpKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xcy5nZXQodGhpcy5Mcyk7XG4gICAgfVxuICAgIFlzKCkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5qcywgdGhpcy5zaS5PcygpKTtcbiAgICB9XG4gICAgZWkodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gbmV3IEZyKHRoaXMuY3VycmVudFVzZXIsIHQsIGUsIG4pLCBpID0gJHIodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5jdXJyZW50VXNlciwgdCk7XG4gICAgICAgIHRoaXMuc2V0SXRlbShpLCBzLk9zKCkpO1xuICAgIH1cbiAgICBuaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSAkcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCB0KTtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGUpO1xuICAgIH1cbiAgICByaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5McyxcbiAgICAgICAgICAgIG9ubGluZVN0YXRlOiB0XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKHRoaXMuSHMsIEpTT04uc3RyaW5naWZ5KGUpKTtcbiAgICB9XG4gICAgaWkodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gT3IodGhpcy5wZXJzaXN0ZW5jZUtleSwgdCksIGkgPSBuZXcgTXIodCwgZSwgbik7XG4gICAgICAgIHRoaXMuc2V0SXRlbShzLCBpLk9zKCkpO1xuICAgIH1cbiAgICBvaSgpIHtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMuSnMsIFwidmFsdWUtbm90LXVzZWRcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBrZXkgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyBudWxsIGlmIHRoZSBrZXkgZG9lcyBub3RcbiAgICAgKiBtYXRjaCB0aGUgZXhwZWN0ZWQga2V5IGZvcm1hdC5cbiAgICAgKi8gICAgY2kodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5Xcy5leGVjKHQpO1xuICAgICAgICByZXR1cm4gZSA/IGVbMV0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlIGNvdWxkIG5vdFxuICAgICAqIGJlIHBhcnNlZC5cbiAgICAgKi8gICAgdWkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5jaSh0KTtcbiAgICAgICAgcmV0dXJuIExyLiRzKG4sIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBtdXRhdGlvbiBiYXRjaCBzdGF0ZSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBoaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkdzLmV4ZWModCksIHMgPSBOdW1iZXIoblsxXSksIGkgPSB2b2lkIDAgIT09IG5bMl0gPyBuWzJdIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIEZyLiRzKG5ldyBEKGkpLCBzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgcXVlcnkgdGFyZ2V0IHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgZmkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy56cy5leGVjKHQpLCBzID0gTnVtYmVyKG5bMV0pO1xuICAgICAgICByZXR1cm4gTXIuJHMocywgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhbiBvbmxpbmUgc3RhdGUgZnJvbSBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBYcyh0KSB7XG4gICAgICAgIHJldHVybiBCci4kcyh0KTtcbiAgICB9XG4gICAgYXN5bmMgbGkodCkge1xuICAgICAgICBpZiAodC51c2VyLnVpZCA9PT0gdGhpcy5jdXJyZW50VXNlci51aWQpIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuX2kodC5iYXRjaElkLCB0LnN0YXRlLCB0LmVycm9yKTtcbiAgICAgICAgJChcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBJZ25vcmluZyBtdXRhdGlvbiBmb3Igbm9uLWFjdGl2ZSB1c2VyICR7dC51c2VyLnVpZH1gKTtcbiAgICB9XG4gICAgZGkodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zeW5jRW5naW5lLm1pKHQudGFyZ2V0SWQsIHQuc3RhdGUsIHQuZXJyb3IpO1xuICAgIH1cbiAgICBhaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlID8gdGhpcy5xcy5pbnNlcnQodCwgZSkgOiB0aGlzLnFzLnJlbW92ZSh0KSwgcyA9IHRoaXMudGkodGhpcy5xcyksIGkgPSB0aGlzLnRpKG4pLCByID0gW10sIG8gPSBbXTtcbiAgICAgICAgcmV0dXJuIGkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBzLmhhcyh0KSB8fCByLnB1c2godCk7XG4gICAgICAgIH0pKSwgcy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGkuaGFzKHQpIHx8IG8ucHVzaCh0KTtcbiAgICAgICAgfSkpLCB0aGlzLnN5bmNFbmdpbmUuZ2kociwgbykudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5xcyA9IG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgWnModCkge1xuICAgICAgICAvLyBXZSBjaGVjayB3aGV0aGVyIHRoZSBjbGllbnQgdGhhdCB3cm90ZSB0aGlzIG9ubGluZSBzdGF0ZSBpcyBzdGlsbCBhY3RpdmVcbiAgICAgICAgLy8gYnkgY29tcGFyaW5nIGl0cyBjbGllbnQgSUQgdG8gdGhlIGxpc3Qgb2YgY2xpZW50cyBrZXB0IGFjdGl2ZSBpblxuICAgICAgICAvLyBJbmRleGVkRGIuIElmIGEgY2xpZW50IGRvZXMgbm90IHVwZGF0ZSB0aGVpciBJbmRleGVkRGIgY2xpZW50IHN0YXRlXG4gICAgICAgIC8vIHdpdGhpbiA1IHNlY29uZHMsIGl0IGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIHdlIGRvbid0IGVtaXQgYW4gb25saW5lXG4gICAgICAgIC8vIHN0YXRlIGV2ZW50LlxuICAgICAgICB0aGlzLnFzLmdldCh0LmNsaWVudElkKSAmJiB0aGlzLm9ubGluZVN0YXRlSGFuZGxlcih0Lm9ubGluZVN0YXRlKTtcbiAgICB9XG4gICAgdGkodCkge1xuICAgICAgICBsZXQgZSA9IFZuKCk7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBlID0gZS51bmlvbldpdGgobi5hY3RpdmVUYXJnZXRJZHMpO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxufVxuXG5jbGFzcyBLciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMueWkgPSBuZXcgVXIsIHRoaXMucGkgPSB7fSwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGw7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdNdXRhdGlvbih0KSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICB1cGRhdGVNdXRhdGlvblN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIGFkZExvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy55aS5Gcyh0KSwgdGhpcy5waVt0XSB8fCBcIm5vdC1jdXJyZW50XCI7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXJ5U3RhdGUodCwgZSwgbikge1xuICAgICAgICB0aGlzLnBpW3RdID0gZTtcbiAgICB9XG4gICAgcmVtb3ZlTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMueWkuTXModCk7XG4gICAgfVxuICAgIGlzTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnlpLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIGNsZWFyUXVlcnlTdGF0ZSh0KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnBpW3RdO1xuICAgIH1cbiAgICBnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnlpLmFjdGl2ZVRhcmdldElkcztcbiAgICB9XG4gICAgaXNBY3RpdmVRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnlpLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy55aSA9IG5ldyBVciwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGhhbmRsZVVzZXJDaGFuZ2UodCwgZSwgbikge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2V0T25saW5lU3RhdGUodCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxuICAgIHdyaXRlU2VxdWVuY2VOdW1iZXIodCkge31cbiAgICBub3RpZnlCdW5kbGVMb2FkZWQoKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MganIge1xuICAgIFRpKHQpIHtcbiAgICAgICAgLy8gTm8tb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBOby1vcC5cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBCcm93c2VyIGltcGxlbWVudGF0aW9uIG9mIENvbm5lY3Rpdml0eU1vbml0b3IuXG4gKi9cbmNsYXNzIFFyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5FaSA9ICgpID0+IHRoaXMuSWkoKSwgdGhpcy5BaSA9ICgpID0+IHRoaXMuUmkoKSwgdGhpcy5iaSA9IFtdLCB0aGlzLlBpKCk7XG4gICAgfVxuICAgIFRpKHQpIHtcbiAgICAgICAgdGhpcy5iaS5wdXNoKHQpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgdGhpcy5FaSksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCB0aGlzLkFpKTtcbiAgICB9XG4gICAgUGkoKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib25saW5lXCIsIHRoaXMuRWkpLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgdGhpcy5BaSk7XG4gICAgfVxuICAgIElpKCkge1xuICAgICAgICAkKFwiQ29ubmVjdGl2aXR5TW9uaXRvclwiLCBcIk5ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IEFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuYmkpIHQoMCAvKiBBVkFJTEFCTEUgKi8pO1xuICAgIH1cbiAgICBSaSgpIHtcbiAgICAgICAgJChcIkNvbm5lY3Rpdml0eU1vbml0b3JcIiwgXCJOZXR3b3JrIGNvbm5lY3Rpdml0eSBjaGFuZ2VkOiBVTkFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuYmkpIHQoMSAvKiBVTkFWQUlMQUJMRSAqLyk7XG4gICAgfVxuICAgIC8vIFRPRE8oY2hlbmJyaWFuKTogQ29uc2lkZXIgcGFzc2luZyBpbiB3aW5kb3cgZWl0aGVyIGludG8gdGhpcyBjb21wb25lbnQgb3JcbiAgICAvLyBoZXJlIGZvciB0ZXN0aW5nIHZpYSBGYWtlV2luZG93LlxuICAgIC8qKiBDaGVja3MgdGhhdCBhbGwgdXNlZCBhdHRyaWJ1dGVzIG9mIHdpbmRvdyBhcmUgYXZhaWxhYmxlLiAqL1xuICAgIHN0YXRpYyBidCgpIHtcbiAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyAmJiB2b2lkIDAgIT09IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICYmIHZvaWQgMCAhPT0gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXI7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBXciA9IHtcbiAgICBCYXRjaEdldERvY3VtZW50czogXCJiYXRjaEdldFwiLFxuICAgIENvbW1pdDogXCJjb21taXRcIixcbiAgICBSdW5RdWVyeTogXCJydW5RdWVyeVwiXG59O1xuXG4vKipcbiAqIE1hcHMgUlBDIG5hbWVzIHRvIHRoZSBjb3JyZXNwb25kaW5nIFJFU1QgZW5kcG9pbnQgbmFtZS5cbiAqXG4gKiBXZSB1c2UgYXJyYXkgbm90YXRpb24gdG8gYXZvaWQgbWFuZ2xpbmcuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2ltcGxlIGhlbHBlciBjbGFzcyB0aGF0IGltcGxlbWVudHMgdGhlIFN0cmVhbSBpbnRlcmZhY2UgdG9cbiAqIGJyaWRnZSB0byBvdGhlciBpbXBsZW1lbnRhdGlvbnMgdGhhdCBhcmUgc3RyZWFtcyBidXQgZG8gbm90IGltcGxlbWVudCB0aGVcbiAqIGludGVyZmFjZS4gVGhlIHN0cmVhbSBjYWxsYmFja3MgYXJlIGludm9rZWQgd2l0aCB0aGUgY2FsbE9uLi4uIG1ldGhvZHMuXG4gKi9cbmNsYXNzIEdyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmkgPSB0LnZpLCB0aGlzLlZpID0gdC5WaTtcbiAgICB9XG4gICAgU2kodCkge1xuICAgICAgICB0aGlzLkRpID0gdDtcbiAgICB9XG4gICAgQ2kodCkge1xuICAgICAgICB0aGlzLk5pID0gdDtcbiAgICB9XG4gICAgb25NZXNzYWdlKHQpIHtcbiAgICAgICAgdGhpcy54aSA9IHQ7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLlZpKCk7XG4gICAgfVxuICAgIHNlbmQodCkge1xuICAgICAgICB0aGlzLnZpKHQpO1xuICAgIH1cbiAgICBraSgpIHtcbiAgICAgICAgdGhpcy5EaSgpO1xuICAgIH1cbiAgICAkaSh0KSB7XG4gICAgICAgIHRoaXMuTmkodCk7XG4gICAgfVxuICAgIE9pKHQpIHtcbiAgICAgICAgdGhpcy54aSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIHpyIGV4dGVuZHMgXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBSZXN0LWJhc2VkIGNvbm5lY3Rpb25zIHRvIHRoZSBiYWNrZW5kIChXZWJDaGFubmVsIGFuZFxuICogSFRUUCkuXG4gKi9cbmNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJbmZvID0gdCwgdGhpcy5kYXRhYmFzZUlkID0gdC5kYXRhYmFzZUlkO1xuICAgICAgICBjb25zdCBlID0gdC5zc2wgPyBcImh0dHBzXCIgOiBcImh0dHBcIjtcbiAgICAgICAgdGhpcy5GaSA9IGUgKyBcIjovL1wiICsgdC5ob3N0LCB0aGlzLk1pID0gXCJwcm9qZWN0cy9cIiArIHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQgKyBcIi9kYXRhYmFzZXMvXCIgKyB0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2UgKyBcIi9kb2N1bWVudHNcIjtcbiAgICB9XG4gICAgTGkodCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5CaSh0LCBlKTtcbiAgICAgICAgJChcIlJlc3RDb25uZWN0aW9uXCIsIFwiU2VuZGluZzogXCIsIGksIG4pO1xuICAgICAgICBjb25zdCByID0ge307XG4gICAgICAgIHJldHVybiB0aGlzLlVpKHIsIHMpLCB0aGlzLnFpKHQsIGksIHIsIG4pLnRoZW4oKHQgPT4gKCQoXCJSZXN0Q29ubmVjdGlvblwiLCBcIlJlY2VpdmVkOiBcIiwgdCksIFxuICAgICAgICB0KSksIChlID0+IHtcbiAgICAgICAgICAgIHRocm93IEYoXCJSZXN0Q29ubmVjdGlvblwiLCBgJHt0fSBmYWlsZWQgd2l0aCBlcnJvcjogYCwgZSwgXCJ1cmw6IFwiLCBpLCBcInJlcXVlc3Q6XCIsIG4pLCBcbiAgICAgICAgICAgIGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgS2kodCwgZSwgbiwgcykge1xuICAgICAgICAvLyBUaGUgUkVTVCBBUEkgYXV0b21hdGljYWxseSBhZ2dyZWdhdGVzIGFsbCBvZiB0aGUgc3RyZWFtZWQgcmVzdWx0cywgc28gd2VcbiAgICAgICAgLy8gY2FuIGp1c3QgdXNlIHRoZSBub3JtYWwgaW52b2tlKCkgbWV0aG9kLlxuICAgICAgICByZXR1cm4gdGhpcy5MaSh0LCBlLCBuLCBzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgdGhlIGhlYWRlcnMgZm9yIGEgcmVxdWVzdCwgYWRkaW5nIGFueSBhdXRob3JpemF0aW9uIHRva2VuIGlmXG4gICAgICogcHJlc2VudCBhbmQgYW55IGFkZGl0aW9uYWwgaGVhZGVycyBmb3IgdGhlIHJlcXVlc3QuXG4gICAgICovICAgIFVpKHQsIGUpIHtcbiAgICAgICAgaWYgKHRbXCJYLUdvb2ctQXBpLUNsaWVudFwiXSA9IFwiZ2wtanMvIGZpcmUvXCIgKyBDLCBcbiAgICAgICAgLy8gQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluIHdpbGwgYXZvaWQgcHJlZmxpZ2h0IHJlcXVlc3RzIHdoaWNoIG1pZ2h0XG4gICAgICAgIC8vIG1lc3Mgd2l0aCBDT1JTIGFuZCByZWRpcmVjdHMgYnkgcHJveGllcy4gSWYgd2UgYWRkIGN1c3RvbSBoZWFkZXJzXG4gICAgICAgIC8vIHdlIHdpbGwgbmVlZCB0byBjaGFuZ2UgdGhpcyBjb2RlIHRvIHBvdGVudGlhbGx5IHVzZSB0aGUgJGh0dHBPdmVyd3JpdGVcbiAgICAgICAgLy8gcGFyYW1ldGVyIHN1cHBvcnRlZCBieSBFU0YgdG8gYXZvaWQgdHJpZ2dlcmluZyBwcmVmbGlnaHQgcmVxdWVzdHMuXG4gICAgICAgIHRbXCJDb250ZW50LVR5cGVcIl0gPSBcInRleHQvcGxhaW5cIiwgdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQgJiYgKHRbXCJYLUZpcmViYXNlLUdNUElEXCJdID0gdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQpLCBcbiAgICAgICAgZSkgZm9yIChjb25zdCBuIGluIGUuYXV0aEhlYWRlcnMpIGUuYXV0aEhlYWRlcnMuaGFzT3duUHJvcGVydHkobikgJiYgKHRbbl0gPSBlLmF1dGhIZWFkZXJzW25dKTtcbiAgICB9XG4gICAgQmkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gV3JbdF07XG4gICAgICAgIHJldHVybiBgJHt0aGlzLkZpfS92MS8ke2V9OiR7bn1gO1xuICAgIH1cbn0ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9IHQuZm9yY2VMb25nUG9sbGluZywgdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSB0LmF1dG9EZXRlY3RMb25nUG9sbGluZywgXG4gICAgICAgIHRoaXMudXNlRmV0Y2hTdHJlYW1zID0gdC51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxuICAgIHFpKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgoaSwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IG5ldyBYaHJJbztcbiAgICAgICAgICAgIG8ubGlzdGVuT25jZShFdmVudFR5cGUuQ09NUExFVEUsICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvLmdldExhc3RFcnJvckNvZGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLk5PX0VSUk9SOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG8uZ2V0UmVzcG9uc2VKc29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiQ29ubmVjdGlvblwiLCBcIlhIUiByZWNlaXZlZDpcIiwgSlNPTi5zdHJpbmdpZnkoZSkpLCBpKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5USU1FT1VUOlxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIkNvbm5lY3Rpb25cIiwgJ1JQQyBcIicgKyB0ICsgJ1wiIHRpbWVkIG91dCcpLCByKG5ldyBqKEsuREVBRExJTkVfRVhDRUVERUQsIFwiUmVxdWVzdCB0aW1lIG91dFwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLkhUVFBfRVJST1I6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gby5nZXRTdGF0dXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKFwiQ29ubmVjdGlvblwiLCAnUlBDIFwiJyArIHQgKyAnXCIgZmFpbGVkIHdpdGggc3RhdHVzOicsIG4sIFwicmVzcG9uc2UgdGV4dDpcIiwgby5nZXRSZXNwb25zZVRleHQoKSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5nZXRSZXNwb25zZUpzb24oKS5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiB0LnN0YXR1cyAmJiB0Lm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXy9nLCBcIi1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhLKS5pbmRleE9mKGUpID49IDAgPyBlIDogSy5VTktOT1dOO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KHQuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcihuZXcgaihlLCB0Lm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgcihuZXcgaihLLlVOS05PV04sIFwiU2VydmVyIHJlc3BvbmRlZCB3aXRoIHN0YXR1cyBcIiArIG8uZ2V0U3RhdHVzKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIHJlY2VpdmVkIGFuIEhUVFBfRVJST1IgYnV0IHRoZXJlJ3Mgbm8gc3RhdHVzIGNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIG1vc3QgcHJvYmFibHkgYSBjb25uZWN0aW9uIGlzc3VlXG4gICAgICAgICAgICAgICAgICAgICAgICByKG5ldyBqKEsuVU5BVkFJTEFCTEUsIFwiQ29ubmVjdGlvbiBmYWlsZWQuXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIEwoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICQoXCJDb25uZWN0aW9uXCIsICdSUEMgXCInICsgdCArICdcIiBjb21wbGV0ZWQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgYyA9IEpTT04uc3RyaW5naWZ5KHMpO1xuICAgICAgICAgICAgby5zZW5kKGUsIFwiUE9TVFwiLCBjLCBuLCAxNSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgamkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gWyB0aGlzLkZpLCBcIi9cIiwgXCJnb29nbGUuZmlyZXN0b3JlLnYxLkZpcmVzdG9yZVwiLCBcIi9cIiwgdCwgXCIvY2hhbm5lbFwiIF0sIHMgPSBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0KCksIGkgPSBnZXRTdGF0RXZlbnRUYXJnZXQoKSwgciA9IHtcbiAgICAgICAgICAgIC8vIFJlcXVpcmVkIGZvciBiYWNrZW5kIHN0aWNraW5lc3MsIHJvdXRpbmcgYmVoYXZpb3IgaXMgYmFzZWQgb24gdGhpc1xuICAgICAgICAgICAgLy8gcGFyYW1ldGVyLlxuICAgICAgICAgICAgaHR0cFNlc3Npb25JZFBhcmFtOiBcImdzZXNzaW9uaWRcIixcbiAgICAgICAgICAgIGluaXRNZXNzYWdlSGVhZGVyczoge30sXG4gICAgICAgICAgICBtZXNzYWdlVXJsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBwYXJhbSBpcyB1c2VkIHRvIGltcHJvdmUgcm91dGluZyBhbmQgcHJvamVjdCBpc29sYXRpb24gYnkgdGhlXG4gICAgICAgICAgICAgICAgLy8gYmFja2VuZCBhbmQgbXVzdCBiZSBpbmNsdWRlZCBpbiBldmVyeSByZXF1ZXN0LlxuICAgICAgICAgICAgICAgIGRhdGFiYXNlOiBgcHJvamVjdHMvJHt0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkfS9kYXRhYmFzZXMvJHt0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2V9YFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlbmRSYXdKc29uOiAhMCxcbiAgICAgICAgICAgIHN1cHBvcnRzQ3Jvc3NEb21haW5YaHI6ICEwLFxuICAgICAgICAgICAgaW50ZXJuYWxDaGFubmVsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgdGltZW91dCAocmFuZG9taXplZCBiZXR3ZWVuIDEwLTIwIHNlY29uZHMpIHNpbmNlXG4gICAgICAgICAgICAgICAgLy8gYSBsYXJnZSB3cml0ZSBiYXRjaCBvbiBhIHNsb3cgaW50ZXJuZXQgY29ubmVjdGlvbiBtYXkgdGFrZSBhIGxvbmdcbiAgICAgICAgICAgICAgICAvLyB0aW1lIHRvIHNlbmQgdG8gdGhlIGJhY2tlbmQuIFJhdGhlciB0aGFuIGhhdmUgV2ViQ2hhbm5lbCBpbXBvc2UgYVxuICAgICAgICAgICAgICAgIC8vIHRpZ2h0IHRpbWVvdXQgd2hpY2ggY291bGQgbGVhZCB0byBpbmZpbml0ZSB0aW1lb3V0cyBhbmQgcmV0cmllcywgd2VcbiAgICAgICAgICAgICAgICAvLyBzZXQgaXQgdmVyeSBsYXJnZSAoNS0xMCBtaW51dGVzKSBhbmQgcmVseSBvbiB0aGUgYnJvd3NlcidzIGJ1aWx0aW5cbiAgICAgICAgICAgICAgICAvLyB0aW1lb3V0cyB0byBraWNrIGluIGlmIHRoZSByZXF1ZXN0IGlzbid0IHdvcmtpbmcuXG4gICAgICAgICAgICAgICAgZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zOiA2ZTVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb3JjZUxvbmdQb2xsaW5nOiB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcsXG4gICAgICAgICAgICBkZXRlY3RCdWZmZXJpbmdQcm94eTogdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmdcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgJiYgKHIueG1sSHR0cEZhY3RvcnkgPSBuZXcgRmV0Y2hYbWxIdHRwRmFjdG9yeSh7fSkpLCB0aGlzLlVpKHIuaW5pdE1lc3NhZ2VIZWFkZXJzLCBlKSwgXG4gICAgICAgIC8vIFNlbmRpbmcgdGhlIGN1c3RvbSBoZWFkZXJzIHdlIGp1c3QgYWRkZWQgdG8gcmVxdWVzdC5pbml0TWVzc2FnZUhlYWRlcnNcbiAgICAgICAgLy8gKEF1dGhvcml6YXRpb24sIGV0Yy4pIHdpbGwgdHJpZ2dlciB0aGUgYnJvd3NlciB0byBtYWtlIGEgQ09SUyBwcmVmbGlnaHRcbiAgICAgICAgLy8gcmVxdWVzdCBiZWNhdXNlIHRoZSBYSFIgd2lsbCBubyBsb25nZXIgbWVldCB0aGUgY3JpdGVyaWEgZm9yIGEgXCJzaW1wbGVcIlxuICAgICAgICAvLyBDT1JTIHJlcXVlc3Q6XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUVFAvQ09SUyNTaW1wbGVfcmVxdWVzdHNcbiAgICAgICAgLy8gVGhlcmVmb3JlIHRvIGF2b2lkIHRoZSBDT1JTIHByZWZsaWdodCByZXF1ZXN0IChhbiBleHRyYSBuZXR3b3JrXG4gICAgICAgIC8vIHJvdW5kdHJpcCksIHdlIHVzZSB0aGUgaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSBvcHRpb24gdG8gc3BlY2lmeSB0aGF0XG4gICAgICAgIC8vIHRoZSBoZWFkZXJzIHNob3VsZCBpbnN0ZWFkIGJlIGVuY29kZWQgaW50byBhIHNwZWNpYWwgXCIkaHR0cEhlYWRlcnNcIiBxdWVyeVxuICAgICAgICAvLyBwYXJhbWV0ZXIsIHdoaWNoIGlzIHJlY29nbml6ZWQgYnkgdGhlIHdlYmNoYW5uZWwgYmFja2VuZC4gVGhpcyBpc1xuICAgICAgICAvLyBmb3JtYWxseSBkZWZpbmVkIGhlcmU6XG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvYjBlMTgxNWIxM2ZiOTJhNDZkN2M5YjNjMzBkZTVkNmEzOTZhMzI0NS9jbG9zdXJlL2dvb2cvbmV0L3JwYy9odHRwY29ycy5qcyNMMzJcbiAgICAgICAgLy8gVE9ETyhiLzE0NTYyNDc1Nik6IFRoZXJlIGlzIGEgYmFja2VuZCBidWcgd2hlcmUgJGh0dHBIZWFkZXJzIGlzbid0IHJlc3BlY3RlZCBpZiB0aGUgcmVxdWVzdFxuICAgICAgICAvLyBkb2Vzbid0IGhhdmUgYW4gT3JpZ2luIGhlYWRlci4gU28gd2UgaGF2ZSB0byBleGNsdWRlIGEgZmV3IGJyb3dzZXIgZW52aXJvbm1lbnRzIHRoYXQgYXJlXG4gICAgICAgIC8vIGtub3duIHRvIChzb21ldGltZXMpIG5vdCBpbmNsdWRlIGFuIE9yaWdpbi4gU2VlXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzE0OTEuXG4gICAgICAgIGlzTW9iaWxlQ29yZG92YSgpIHx8IGlzUmVhY3ROYXRpdmUoKSB8fCBpc0VsZWN0cm9uKCkgfHwgaXNJRSgpIHx8IGlzVVdQKCkgfHwgaXNCcm93c2VyRXh0ZW5zaW9uKCkgfHwgKHIuaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSA9IFwiJGh0dHBIZWFkZXJzXCIpO1xuICAgICAgICBjb25zdCBvID0gbi5qb2luKFwiXCIpO1xuICAgICAgICAkKFwiQ29ubmVjdGlvblwiLCBcIkNyZWF0aW5nIFdlYkNoYW5uZWw6IFwiICsgbywgcik7XG4gICAgICAgIGNvbnN0IGMgPSBzLmNyZWF0ZVdlYkNoYW5uZWwobywgcik7XG4gICAgICAgIC8vIFdlYkNoYW5uZWwgc3VwcG9ydHMgc2VuZGluZyB0aGUgZmlyc3QgbWVzc2FnZSB3aXRoIHRoZSBoYW5kc2hha2UgLSBzYXZpbmdcbiAgICAgICAgLy8gYSBuZXR3b3JrIHJvdW5kIHRyaXAuIEhvd2V2ZXIsIGl0IHdpbGwgaGF2ZSB0byBjYWxsIHNlbmQgaW4gdGhlIHNhbWVcbiAgICAgICAgLy8gSlMgZXZlbnQgbG9vcCBhcyBvcGVuLiBJbiBvcmRlciB0byBlbmZvcmNlIHRoaXMsIHdlIGRlbGF5IGFjdHVhbGx5XG4gICAgICAgIC8vIG9wZW5pbmcgdGhlIFdlYkNoYW5uZWwgdW50aWwgc2VuZCBpcyBjYWxsZWQuIFdoZXRoZXIgd2UgaGF2ZSBjYWxsZWRcbiAgICAgICAgLy8gb3BlbiBpcyB0cmFja2VkIHdpdGggdGhpcyB2YXJpYWJsZS5cbiAgICAgICAgICAgICAgICBsZXQgYSA9ICExLCB1ID0gITE7XG4gICAgICAgIC8vIEEgZmxhZyB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgc3RyZWFtIHdhcyBjbG9zZWQgKGJ5IHVzIG9yIHRocm91Z2ggYW5cbiAgICAgICAgLy8gZXJyb3IvY2xvc2UgZXZlbnQpIHRvIGF2b2lkIGRlbGl2ZXJpbmcgbXVsdGlwbGUgY2xvc2UgZXZlbnRzIG9yIHNlbmRpbmdcbiAgICAgICAgLy8gb24gYSBjbG9zZWQgc3RyZWFtXG4gICAgICAgICAgICAgICAgY29uc3QgaCA9IG5ldyBHcih7XG4gICAgICAgICAgICB2aTogdCA9PiB7XG4gICAgICAgICAgICAgICAgdSA/ICQoXCJDb25uZWN0aW9uXCIsIFwiTm90IHNlbmRpbmcgYmVjYXVzZSBXZWJDaGFubmVsIGlzIGNsb3NlZDpcIiwgdCkgOiAoYSB8fCAoJChcIkNvbm5lY3Rpb25cIiwgXCJPcGVuaW5nIFdlYkNoYW5uZWwgdHJhbnNwb3J0LlwiKSwgXG4gICAgICAgICAgICAgICAgYy5vcGVuKCksIGEgPSAhMCksICQoXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCBzZW5kaW5nOlwiLCB0KSwgYy5zZW5kKHQpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBWaTogKCkgPT4gYy5jbG9zZSgpXG4gICAgICAgIH0pLCBnID0gKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogY2xvc3VyZSB0eXBpbmcgc2VlbXMgYnJva2VuIGJlY2F1c2UgV2ViQ2hhbm5lbCBkb2VzXG4gICAgICAgICAgICAvLyBub3QgaW1wbGVtZW50IGdvb2cuZXZlbnRzLkxpc3RlbmFibGVcbiAgICAgICAgICAgIHQubGlzdGVuKGUsICh0ID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBuKHQpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgICAgICAgICAgICAgfSksIDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ2xvc3VyZSBldmVudHMgYXJlIGd1YXJkZWQgYW5kIGV4Y2VwdGlvbnMgYXJlIHN3YWxsb3dlZCwgc28gY2F0Y2ggYW55XG4gICAgICAgIC8vIGV4Y2VwdGlvbiBhbmQgcmV0aHJvdyB1c2luZyBhIHNldFRpbWVvdXQgc28gdGhleSBiZWNvbWUgdmlzaWJsZSBhZ2Fpbi5cbiAgICAgICAgLy8gTm90ZSB0aGF0IGV2ZW50dWFsbHkgdGhpcyBmdW5jdGlvbiBjb3VsZCBnbyBhd2F5IGlmIHdlIGFyZSBjb25maWRlbnRcbiAgICAgICAgLy8gZW5vdWdoIHRoZSBjb2RlIGlzIGV4Y2VwdGlvbiBmcmVlLlxuICAgICAgICAgICAgICAgIHJldHVybiBnKGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk9QRU4sICgoKSA9PiB7XG4gICAgICAgICAgICB1IHx8ICQoXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCB0cmFuc3BvcnQgb3BlbmVkLlwiKTtcbiAgICAgICAgfSkpLCBnKGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLkNMT1NFLCAoKCkgPT4ge1xuICAgICAgICAgICAgdSB8fCAodSA9ICEwLCAkKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgdHJhbnNwb3J0IGNsb3NlZFwiKSwgaC4kaSgpKTtcbiAgICAgICAgfSkpLCBnKGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLkVSUk9SLCAodCA9PiB7XG4gICAgICAgICAgICB1IHx8ICh1ID0gITAsIEYoXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCB0cmFuc3BvcnQgZXJyb3JlZDpcIiwgdCksIGguJGkobmV3IGooSy5VTkFWQUlMQUJMRSwgXCJUaGUgb3BlcmF0aW9uIGNvdWxkIG5vdCBiZSBjb21wbGV0ZWRcIikpKTtcbiAgICAgICAgfSkpLCBnKGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk1FU1NBR0UsICh0ID0+IHtcbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgaWYgKCF1KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQuZGF0YVswXTtcbiAgICAgICAgICAgICAgICBCKCEhbik7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhiLzM1MTQzODkxKTogVGhlcmUgaXMgYSBidWcgaW4gT25lIFBsYXRmb3JtIHRoYXQgY2F1c2VkIGVycm9yc1xuICAgICAgICAgICAgICAgIC8vIChhbmQgb25seSBlcnJvcnMpIHRvIGJlIHdyYXBwZWQgaW4gYW4gZXh0cmEgYXJyYXkuIFRvIGJlIGZvcndhcmRcbiAgICAgICAgICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggdGhlIGJ1ZyB3ZSBuZWVkIHRvIGNoZWNrIGVpdGhlciBjb25kaXRpb24uIFRoZSBsYXR0ZXJcbiAgICAgICAgICAgICAgICAvLyBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBmaXggaGFzIGJlZW4gcm9sbGVkIG91dC5cbiAgICAgICAgICAgICAgICAvLyBVc2UgYW55IGJlY2F1c2UgbXNnRGF0YS5lcnJvciBpcyBub3QgdHlwZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG4sIGkgPSBzLmVycm9yIHx8IChudWxsID09PSAoZSA9IHNbMF0pIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZXJyb3IpO1xuICAgICAgICAgICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCByZWNlaXZlZCBlcnJvcjpcIiwgaSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yLnN0YXR1cyB3aWxsIGJlIGEgc3RyaW5nIGxpa2UgJ09LJyBvciAnTk9UX0ZPVU5EJy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGkuc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IFxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIGEgR1JQQyBzdGF0dXMgaWRlbnRpZmllciBsaWtlICdOT1RfRk9VTkQnLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIHN0YXR1cyBzdHJpbmcgb3IgdW5kZWZpbmVkIGlmXG4gKiAgICAgdGhlcmUgaXMgbm8gbWF0Y2guXG4gKi9cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9va3VwIGJ5IHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBoblt0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGUpIHJldHVybiBkbihlKTtcbiAgICAgICAgICAgICAgICAgICAgfSh0KSwgbiA9IGkubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gSy5JTlRFUk5BTCwgbiA9IFwiVW5rbm93biBlcnJvciBzdGF0dXM6IFwiICsgdCArIFwiIHdpdGggbWVzc2FnZSBcIiArIGkubWVzc2FnZSksIFxuICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGNsb3NlZCBzbyBubyBmdXJ0aGVyIGV2ZW50cyBhcmUgcHJvcGFnYXRlZFxuICAgICAgICAgICAgICAgICAgICB1ID0gITAsIGguJGkobmV3IGooZSwgbikpLCBjLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlICQoXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCByZWNlaXZlZDpcIiwgbiksIGguT2kobik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgZyhpLCBFdmVudC5TVEFUX0VWRU5ULCAodCA9PiB7XG4gICAgICAgICAgICB0LnN0YXQgPT09IFN0YXQuUFJPWFkgPyAkKFwiQ29ubmVjdGlvblwiLCBcIkRldGVjdGVkIGJ1ZmZlcmluZyBwcm94eVwiKSA6IHQuc3RhdCA9PT0gU3RhdC5OT1BST1hZICYmICQoXCJDb25uZWN0aW9uXCIsIFwiRGV0ZWN0ZWQgbm8gYnVmZmVyaW5nIHByb3h5XCIpO1xuICAgICAgICB9KSksIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFRlY2huaWNhbGx5IHdlIGNvdWxkL3Nob3VsZCB3YWl0IGZvciB0aGUgV2ViQ2hhbm5lbCBvcGVuZWQgZXZlbnQsXG4gICAgICAgICAgICAvLyBidXQgYmVjYXVzZSB3ZSB3YW50IHRvIHNlbmQgdGhlIGZpcnN0IG1lc3NhZ2Ugd2l0aCB0aGUgV2ViQ2hhbm5lbFxuICAgICAgICAgICAgLy8gaGFuZHNoYWtlIHdlIHByZXRlbmQgdGhlIGNoYW5uZWwgb3BlbmVkIGhlcmUgKGFzeW5jaHJvbm91c2x5KSwgYW5kXG4gICAgICAgICAgICAvLyB0aGVuIGRlbGF5IHRoZSBhY3R1YWwgb3BlbiB1bnRpbCB0aGUgZmlyc3QgbWVzc2FnZSBpcyBzZW50LlxuICAgICAgICAgICAgaC5raSgpO1xuICAgICAgICB9KSwgMCksIGg7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEluaXRpYWxpemVzIHRoZSBXZWJDaGFubmVsQ29ubmVjdGlvbiBmb3IgdGhlIGJyb3dzZXIuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFRoZSBQbGF0Zm9ybSdzICd3aW5kb3cnIGltcGxlbWVudGF0aW9uIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZS4gKi9cbmZ1bmN0aW9uIEhyKCkge1xuICAgIC8vIGB3aW5kb3dgIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBlLmcuIGluIFJlYWN0TmF0aXZlIGFuZCBXZWJXb3JrZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ID8gd2luZG93IDogbnVsbDtcbn1cblxuLyoqIFRoZSBQbGF0Zm9ybSdzICdkb2N1bWVudCcgaW1wbGVtZW50YXRpb24gb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlLiAqLyBmdW5jdGlvbiBKcigpIHtcbiAgICAvLyBgZG9jdW1lbnRgIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBlLmcuIGluIFJlYWN0TmF0aXZlIGFuZCBXZWJXb3JrZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgZG9jdW1lbnQgPyBkb2N1bWVudCA6IG51bGw7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIFlyKHQpIHtcbiAgICByZXR1cm4gbmV3IEJuKHQsIC8qIHVzZVByb3RvM0pzb249ICovICEwKTtcbn1cblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgUGxhdGZvcm0ncyAnVGV4dEVuY29kZXInIGltcGxlbWVudGF0aW9uLlxuICovXG4vKipcbiAqIEEgaGVscGVyIGZvciBydW5uaW5nIGRlbGF5ZWQgdGFza3MgZm9sbG93aW5nIGFuIGV4cG9uZW50aWFsIGJhY2tvZmYgY3VydmVcbiAqIGJldHdlZW4gYXR0ZW1wdHMuXG4gKlxuICogRWFjaCBkZWxheSBpcyBtYWRlIHVwIG9mIGEgXCJiYXNlXCIgZGVsYXkgd2hpY2ggZm9sbG93cyB0aGUgZXhwb25lbnRpYWxcbiAqIGJhY2tvZmYgY3VydmUsIGFuZCBhICsvLSA1MCUgXCJqaXR0ZXJcIiB0aGF0IGlzIGNhbGN1bGF0ZWQgYW5kIGFkZGVkIHRvIHRoZVxuICogYmFzZSBkZWxheS4gVGhpcyBwcmV2ZW50cyBjbGllbnRzIGZyb20gYWNjaWRlbnRhbGx5IHN5bmNocm9uaXppbmcgdGhlaXJcbiAqIGRlbGF5cyBjYXVzaW5nIHNwaWtlcyBvZiBsb2FkIHRvIHRoZSBiYWNrZW5kLlxuICovXG5jbGFzcyBYciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIEFzeW5jUXVldWUgdG8gcnVuIGJhY2tvZmYgb3BlcmF0aW9ucyBvbi5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgdG8gdXNlIHdoZW4gc2NoZWR1bGluZyBiYWNrb2ZmIG9wZXJhdGlvbnMgb24gdGhlIEFzeW5jUXVldWUuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGluaXRpYWwgZGVsYXkgKHVzZWQgYXMgdGhlIGJhc2UgZGVsYXkgb24gdGhlIGZpcnN0IHJldHJ5IGF0dGVtcHQpLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbGl0dGxlIGFzIDAuNSppbml0aWFsRGVsYXlNcy5cbiAgICAgKi9cbiAgICBuID0gMWUzXG4gICAgLyoqXG4gICAgICogVGhlIG11bHRpcGxpZXIgdG8gdXNlIHRvIGRldGVybWluZSB0aGUgZXh0ZW5kZWQgYmFzZSBkZWxheSBhZnRlciBlYWNoXG4gICAgICogYXR0ZW1wdC5cbiAgICAgKi8gLCBzID0gMS41XG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gYmFzZSBkZWxheSBhZnRlciB3aGljaCBubyBmdXJ0aGVyIGJhY2tvZmYgaXMgcGVyZm9ybWVkLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbXVjaCBhcyAxLjUqbWF4RGVsYXlNcy5cbiAgICAgKi8gLCBpID0gNmU0KSB7XG4gICAgICAgIHRoaXMuT2UgPSB0LCB0aGlzLnRpbWVySWQgPSBlLCB0aGlzLlFpID0gbiwgdGhpcy5XaSA9IHMsIHRoaXMuR2kgPSBpLCB0aGlzLnppID0gMCwgXG4gICAgICAgIHRoaXMuSGkgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IGJhY2tvZmYgYXR0ZW1wdCwgYXMgZXBvY2ggbWlsbGlzZWNvbmRzLiAqL1xuICAgICAgICB0aGlzLkppID0gRGF0ZS5ub3coKSwgdGhpcy5yZXNldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkuXG4gICAgICpcbiAgICAgKiBUaGUgdmVyeSBuZXh0IGJhY2tvZmZBbmRXYWl0KCkgd2lsbCBoYXZlIG5vIGRlbGF5LiBJZiBpdCBpcyBjYWxsZWQgYWdhaW5cbiAgICAgKiAoaS5lLiBkdWUgdG8gYW4gZXJyb3IpLCBpbml0aWFsRGVsYXlNcyAocGx1cyBqaXR0ZXIpIHdpbGwgYmUgdXNlZCwgYW5kXG4gICAgICogc3Vic2VxdWVudCBvbmVzIHdpbGwgaW5jcmVhc2UgYWNjb3JkaW5nIHRvIHRoZSBiYWNrb2ZmRmFjdG9yLlxuICAgICAqLyAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy56aSA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgYmFja29mZiBkZWxheSB0byB0aGUgbWF4aW11bSBkZWxheSAoZS5nLiBmb3IgdXNlIGFmdGVyIGFcbiAgICAgKiBSRVNPVVJDRV9FWEhBVVNURUQgZXJyb3IpLlxuICAgICAqLyAgICBZaSgpIHtcbiAgICAgICAgdGhpcy56aSA9IHRoaXMuR2k7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgY3VycmVudERlbGF5TXMsIGFuZCBpbmNyZWFzZXMgdGhlXG4gICAgICogZGVsYXkgZm9yIGFueSBzdWJzZXF1ZW50IGF0dGVtcHRzLiBJZiB0aGVyZSB3YXMgYSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uXG4gICAgICogYWxyZWFkeSwgaXQgd2lsbCBiZSBjYW5jZWxlZC5cbiAgICAgKi8gICAgWGkodCkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IHBlbmRpbmcgYmFja29mZiBvcGVyYXRpb24uXG4gICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAgIC8vIEZpcnN0IHNjaGVkdWxlIHVzaW5nIHRoZSBjdXJyZW50IGJhc2UgKHdoaWNoIG1heSBiZSAwIGFuZCBzaG91bGQgYmVcbiAgICAgICAgLy8gaG9ub3JlZCBhcyBzdWNoKS5cbiAgICAgICAgY29uc3QgZSA9IE1hdGguZmxvb3IodGhpcy56aSArIHRoaXMuWmkoKSksIG4gPSBNYXRoLm1heCgwLCBEYXRlLm5vdygpIC0gdGhpcy5KaSksIHMgPSBNYXRoLm1heCgwLCBlIC0gbik7XG4gICAgICAgIC8vIEd1YXJkIGFnYWluc3QgbGFzdEF0dGVtcHRUaW1lIGJlaW5nIGluIHRoZSBmdXR1cmUgZHVlIHRvIGEgY2xvY2sgY2hhbmdlLlxuICAgICAgICAgICAgICAgIHMgPiAwICYmICQoXCJFeHBvbmVudGlhbEJhY2tvZmZcIiwgYEJhY2tpbmcgb2ZmIGZvciAke3N9IG1zIChiYXNlIGRlbGF5OiAke3RoaXMueml9IG1zLCBkZWxheSB3aXRoIGppdHRlcjogJHtlfSBtcywgbGFzdCBhdHRlbXB0OiAke259IG1zIGFnbylgKSwgXG4gICAgICAgIHRoaXMuSGkgPSB0aGlzLk9lLmVucXVldWVBZnRlckRlbGF5KHRoaXMudGltZXJJZCwgcywgKCgpID0+ICh0aGlzLkppID0gRGF0ZS5ub3coKSwgXG4gICAgICAgIHQoKSkpKSwgXG4gICAgICAgIC8vIEFwcGx5IGJhY2tvZmYgZmFjdG9yIHRvIGRldGVybWluZSBuZXh0IGRlbGF5IGFuZCBlbnN1cmUgaXQgaXMgd2l0aGluXG4gICAgICAgIC8vIGJvdW5kcy5cbiAgICAgICAgdGhpcy56aSAqPSB0aGlzLldpLCB0aGlzLnppIDwgdGhpcy5RaSAmJiAodGhpcy56aSA9IHRoaXMuUWkpLCB0aGlzLnppID4gdGhpcy5HaSAmJiAodGhpcy56aSA9IHRoaXMuR2kpO1xuICAgIH1cbiAgICB0cigpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5IaSAmJiAodGhpcy5IaS5za2lwRGVsYXkoKSwgdGhpcy5IaSA9IG51bGwpO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuSGkgJiYgKHRoaXMuSGkuY2FuY2VsKCksIHRoaXMuSGkgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSByYW5kb20gdmFsdWUgaW4gdGhlIHJhbmdlIFstY3VycmVudEJhc2VNcy8yLCBjdXJyZW50QmFzZU1zLzJdICovICAgIFppKCkge1xuICAgICAgICByZXR1cm4gKE1hdGgucmFuZG9tKCkgLSAuNSkgKiB0aGlzLnppO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGlzIGFuIGFic3RyYWN0IGJhc2UgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgc3RyZWFtaW5nIFJQQ1xuICogdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kLiBJdCdzIGJ1aWx0IG9uIHRvcCBvZiB0aGUgY29ubmVjdGlvbnMgb3duIHN1cHBvcnRcbiAqIGZvciBzdHJlYW1pbmcgUlBDcywgYW5kIGFkZHMgc2V2ZXJhbCBjcml0aWNhbCBmZWF0dXJlcyBmb3Igb3VyIGNsaWVudHM6XG4gKlxuICogICAtIEV4cG9uZW50aWFsIGJhY2tvZmYgb24gZmFpbHVyZVxuICogICAtIEF1dGhlbnRpY2F0aW9uIHZpYSBDcmVkZW50aWFsc1Byb3ZpZGVyXG4gKiAgIC0gRGlzcGF0Y2hpbmcgYWxsIGNhbGxiYWNrcyBpbnRvIHRoZSBzaGFyZWQgd29ya2VyIHF1ZXVlXG4gKiAgIC0gQ2xvc2luZyBpZGxlIHN0cmVhbXMgYWZ0ZXIgNjAgc2Vjb25kcyBvZiBpbmFjdGl2aXR5XG4gKlxuICogU3ViY2xhc3NlcyBvZiBQZXJzaXN0ZW50U3RyZWFtIGltcGxlbWVudCBzZXJpYWxpemF0aW9uIG9mIG1vZGVscyB0byBhbmRcbiAqIGZyb20gdGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIHByb3RvY29sIGJ1ZmZlcnMgZm9yIGEgc3BlY2lmaWNcbiAqIHN0cmVhbWluZyBSUEMuXG4gKlxuICogIyMgU3RhcnRpbmcgYW5kIFN0b3BwaW5nXG4gKlxuICogU3RyZWFtaW5nIFJQQ3MgYXJlIHN0YXRlZnVsIGFuZCBuZWVkIHRvIGJlIHN0YXJ0KCllZCBiZWZvcmUgbWVzc2FnZXMgY2FuXG4gKiBiZSBzZW50IGFuZCByZWNlaXZlZC4gVGhlIFBlcnNpc3RlbnRTdHJlYW0gd2lsbCBjYWxsIHRoZSBvbk9wZW4oKSBmdW5jdGlvblxuICogb2YgdGhlIGxpc3RlbmVyIG9uY2UgdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgcmVxdWVzdHMuXG4gKlxuICogU2hvdWxkIGEgc3RhcnQoKSBmYWlsLCBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgcmVnaXN0ZXJlZCBvbkNsb3NlKClcbiAqIGxpc3RlbmVyIHdpdGggYSBGaXJlc3RvcmVFcnJvciBpbmRpY2F0aW5nIHdoYXQgd2VudCB3cm9uZy5cbiAqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gY2FuIGJlIHN0YXJ0ZWQgYW5kIHN0b3BwZWQgcmVwZWF0ZWRseS5cbiAqXG4gKiBHZW5lcmljIHR5cGVzOlxuICogIFNlbmRUeXBlOiBUaGUgdHlwZSBvZiB0aGUgb3V0Z29pbmcgbWVzc2FnZSBvZiB0aGUgdW5kZXJseWluZ1xuICogICAgY29ubmVjdGlvbiBzdHJlYW1cbiAqICBSZWNlaXZlVHlwZTogVGhlIHR5cGUgb2YgdGhlIGluY29taW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXG4gKiAgTGlzdGVuZXJUeXBlOiBUaGUgdHlwZSBvZiB0aGUgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGNhbGxiYWNrc1xuICovXG5jbGFzcyBaciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbykge1xuICAgICAgICB0aGlzLk9lID0gdCwgdGhpcy5lciA9IG4sIHRoaXMubnIgPSBzLCB0aGlzLnNyID0gaSwgdGhpcy5jcmVkZW50aWFsc1Byb3ZpZGVyID0gciwgXG4gICAgICAgIHRoaXMubGlzdGVuZXIgPSBvLCB0aGlzLnN0YXRlID0gMCAvKiBJbml0aWFsICovICwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNsb3NlIGNvdW50IHRoYXQncyBpbmNyZW1lbnRlZCBldmVyeSB0aW1lIHRoZSBzdHJlYW0gaXMgY2xvc2VkOyB1c2VkIGJ5XG4gICAgICAgICAqIGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIoKSB0byBpbnZhbGlkYXRlIGNhbGxiYWNrcyB0aGF0IGhhcHBlbiBhZnRlclxuICAgICAgICAgKiBjbG9zZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXIgPSAwLCB0aGlzLnJyID0gbnVsbCwgdGhpcy5jciA9IG51bGwsIHRoaXMuc3RyZWFtID0gbnVsbCwgdGhpcy5hciA9IG5ldyBYcih0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHN0YXJ0KCkgaGFzIGJlZW4gY2FsbGVkIGFuZCBubyBlcnJvciBoYXMgb2NjdXJyZWQuIFRydWVcbiAgICAgKiBpbmRpY2F0ZXMgdGhlIHN0cmVhbSBpcyBvcGVuIG9yIGluIHRoZSBwcm9jZXNzIG9mIG9wZW5pbmcgKHdoaWNoXG4gICAgICogZW5jb21wYXNzZXMgcmVzcGVjdGluZyBiYWNrb2ZmLCBnZXR0aW5nIGF1dGggdG9rZW5zLCBhbmQgc3RhcnRpbmcgdGhlXG4gICAgICogYWN0dWFsIFJQQykuIFVzZSBpc09wZW4oKSB0byBkZXRlcm1pbmUgaWYgdGhlIHN0cmVhbSBpcyBvcGVuIGFuZCByZWFkeSBmb3JcbiAgICAgKiBvdXRib3VuZCByZXF1ZXN0cy5cbiAgICAgKi8gICAgdXIoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIFN0YXJ0aW5nICovID09PSB0aGlzLnN0YXRlIHx8IDUgLyogQmFja29mZiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCB0aGlzLmhyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdW5kZXJseWluZyBSUEMgaXMgb3BlbiAodGhlIG9uT3BlbigpIGxpc3RlbmVyIGhhcyBiZWVuXG4gICAgICogY2FsbGVkKSBhbmQgdGhlIHN0cmVhbSBpcyByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgIGhyKCkge1xuICAgICAgICByZXR1cm4gMiAvKiBPcGVuICovID09PSB0aGlzLnN0YXRlIHx8IDMgLyogSGVhbHRoeSAqLyA9PT0gdGhpcy5zdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSBSUEMuIE9ubHkgYWxsb3dlZCBpZiBpc1N0YXJ0ZWQoKSByZXR1cm5zIGZhbHNlLiBUaGUgc3RyZWFtIGlzXG4gICAgICogbm90IGltbWVkaWF0ZWx5IHJlYWR5IGZvciB1c2U6IG9uT3BlbigpIHdpbGwgYmUgaW52b2tlZCB3aGVuIHRoZSBSUEMgaXNcbiAgICAgKiByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMsIGF0IHdoaWNoIHBvaW50IGlzT3BlbigpIHdpbGwgcmV0dXJuIHRydWUuXG4gICAgICpcbiAgICAgKiBXaGVuIHN0YXJ0IHJldHVybnMsIGlzU3RhcnRlZCgpIHdpbGwgcmV0dXJuIHRydWUuXG4gICAgICovICAgIHN0YXJ0KCkge1xuICAgICAgICA0IC8qIEVycm9yICovICE9PSB0aGlzLnN0YXRlID8gdGhpcy5hdXRoKCkgOiB0aGlzLmxyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRoZSBSUEMuIFRoaXMgY2FsbCBpcyBpZGVtcG90ZW50IGFuZCBhbGxvd2VkIHJlZ2FyZGxlc3Mgb2YgdGhlXG4gICAgICogY3VycmVudCBpc1N0YXJ0ZWQoKSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIFdoZW4gc3RvcCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSBhbmQgaXNPcGVuKCkgd2lsbCBib3RoIHJldHVybiBmYWxzZS5cbiAgICAgKi8gICAgYXN5bmMgc3RvcCgpIHtcbiAgICAgICAgdGhpcy51cigpICYmIGF3YWl0IHRoaXMuY2xvc2UoMCAvKiBJbml0aWFsICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWZ0ZXIgYW4gZXJyb3IgdGhlIHN0cmVhbSB3aWxsIHVzdWFsbHkgYmFjayBvZmYgb24gdGhlIG5leHQgYXR0ZW1wdCB0b1xuICAgICAqIHN0YXJ0IGl0LiBJZiB0aGUgZXJyb3Igd2FycmFudHMgYW4gaW1tZWRpYXRlIHJlc3RhcnQgb2YgdGhlIHN0cmVhbSwgdGhlXG4gICAgICogc2VuZGVyIGNhbiB1c2UgdGhpcyB0byBpbmRpY2F0ZSB0aGF0IHRoZSByZWNlaXZlciBzaG91bGQgbm90IGJhY2sgb2ZmLlxuICAgICAqXG4gICAgICogRWFjaCBlcnJvciB3aWxsIGNhbGwgdGhlIG9uQ2xvc2UoKSBsaXN0ZW5lci4gVGhhdCBmdW5jdGlvbiBjYW4gZGVjaWRlIHRvXG4gICAgICogaW5oaWJpdCBiYWNrb2ZmIGlmIHJlcXVpcmVkLlxuICAgICAqLyAgICBkcigpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogSW5pdGlhbCAqLyAsIHRoaXMuYXIucmVzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgdGhpcyBzdHJlYW0gYXMgaWRsZS4gSWYgbm8gZnVydGhlciBhY3Rpb25zIGFyZSBwZXJmb3JtZWQgb24gdGhlXG4gICAgICogc3RyZWFtIGZvciBvbmUgbWludXRlLCB0aGUgc3RyZWFtIHdpbGwgYXV0b21hdGljYWxseSBjbG9zZSBpdHNlbGYgYW5kXG4gICAgICogbm90aWZ5IHRoZSBzdHJlYW0ncyBvbkNsb3NlKCkgaGFuZGxlciB3aXRoIFN0YXR1cy5PSy4gVGhlIHN0cmVhbSB3aWxsIHRoZW5cbiAgICAgKiBiZSBpbiBhICFpc1N0YXJ0ZWQoKSBzdGF0ZSwgcmVxdWlyaW5nIHRoZSBjYWxsZXIgdG8gc3RhcnQgdGhlIHN0cmVhbSBhZ2FpblxuICAgICAqIGJlZm9yZSBmdXJ0aGVyIHVzZS5cbiAgICAgKlxuICAgICAqIE9ubHkgc3RyZWFtcyB0aGF0IGFyZSBpbiBzdGF0ZSAnT3BlbicgY2FuIGJlIG1hcmtlZCBpZGxlLCBhcyBhbGwgb3RoZXJcbiAgICAgKiBzdGF0ZXMgaW1wbHkgcGVuZGluZyBuZXR3b3JrIG9wZXJhdGlvbnMuXG4gICAgICovICAgIHdyKCkge1xuICAgICAgICAvLyBTdGFydHMgdGhlIGlkbGUgdGltZSBpZiB3ZSBhcmUgaW4gc3RhdGUgJ09wZW4nIGFuZCBhcmUgbm90IHlldCBhbHJlYWR5XG4gICAgICAgIC8vIHJ1bm5pbmcgYSB0aW1lciAoaW4gd2hpY2ggY2FzZSB0aGUgcHJldmlvdXMgaWRsZSB0aW1lb3V0IHN0aWxsIGFwcGxpZXMpLlxuICAgICAgICB0aGlzLmhyKCkgJiYgbnVsbCA9PT0gdGhpcy5yciAmJiAodGhpcy5yciA9IHRoaXMuT2UuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy5lciwgNmU0LCAoKCkgPT4gdGhpcy5fcigpKSkpO1xuICAgIH1cbiAgICAvKiogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSB1bmRlcmx5aW5nIHN0cmVhbS4gKi8gICAgbXIodCkge1xuICAgICAgICB0aGlzLmdyKCksIHRoaXMuc3RyZWFtLnNlbmQodCk7XG4gICAgfVxuICAgIC8qKiBDYWxsZWQgYnkgdGhlIGlkbGUgdGltZXIgd2hlbiB0aGUgc3RyZWFtIHNob3VsZCBjbG9zZSBkdWUgdG8gaW5hY3Rpdml0eS4gKi8gICAgYXN5bmMgX3IoKSB7XG4gICAgICAgIGlmICh0aGlzLmhyKCkpIFxuICAgICAgICAvLyBXaGVuIHRpbWluZyBvdXQgYW4gaWRsZSBzdHJlYW0gdGhlcmUncyBubyByZWFzb24gdG8gZm9yY2UgdGhlIHN0cmVhbSBpbnRvIGJhY2tvZmYgd2hlblxuICAgICAgICAvLyBpdCByZXN0YXJ0cyBzbyBzZXQgdGhlIHN0cmVhbSBzdGF0ZSB0byBJbml0aWFsIGluc3RlYWQgb2YgRXJyb3IuXG4gICAgICAgIHJldHVybiB0aGlzLmNsb3NlKDAgLyogSW5pdGlhbCAqLyk7XG4gICAgfVxuICAgIC8qKiBNYXJrcyB0aGUgc3RyZWFtIGFzIGFjdGl2ZSBhZ2Fpbi4gKi8gICAgZ3IoKSB7XG4gICAgICAgIHRoaXMucnIgJiYgKHRoaXMucnIuY2FuY2VsKCksIHRoaXMucnIgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIENhbmNlbHMgdGhlIGhlYWx0aCBjaGVjayBkZWxheWVkIG9wZXJhdGlvbi4gKi8gICAgeXIoKSB7XG4gICAgICAgIHRoaXMuY3IgJiYgKHRoaXMuY3IuY2FuY2VsKCksIHRoaXMuY3IgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBzdHJlYW0gYW5kIGNsZWFucyB1cCBhcyBuZWNlc3Nhcnk6XG4gICAgICpcbiAgICAgKiAqIGNsb3NlcyB0aGUgdW5kZXJseWluZyBHUlBDIHN0cmVhbTtcbiAgICAgKiAqIGNhbGxzIHRoZSBvbkNsb3NlIGhhbmRsZXIgd2l0aCB0aGUgZ2l2ZW4gJ2Vycm9yJztcbiAgICAgKiAqIHNldHMgaW50ZXJuYWwgc3RyZWFtIHN0YXRlIHRvICdmaW5hbFN0YXRlJztcbiAgICAgKiAqIGFkanVzdHMgdGhlIGJhY2tvZmYgdGltZXIgYmFzZWQgb24gdGhlIGVycm9yXG4gICAgICpcbiAgICAgKiBBIG5ldyBzdHJlYW0gY2FuIGJlIG9wZW5lZCBieSBjYWxsaW5nIHN0YXJ0KCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmluYWxTdGF0ZSAtIHRoZSBpbnRlbmRlZCBzdGF0ZSBvZiB0aGUgc3RyZWFtIGFmdGVyIGNsb3NpbmcuXG4gICAgICogQHBhcmFtIGVycm9yIC0gdGhlIGVycm9yIHRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgd2l0aC5cbiAgICAgKi8gICAgYXN5bmMgY2xvc2UodCwgZSkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IG91dHN0YW5kaW5nIHRpbWVycyAodGhleSdyZSBndWFyYW50ZWVkIG5vdCB0byBleGVjdXRlKS5cbiAgICAgICAgdGhpcy5ncigpLCB0aGlzLnlyKCksIHRoaXMuYXIuY2FuY2VsKCksIFxuICAgICAgICAvLyBJbnZhbGlkYXRlcyBhbnkgc3RyZWFtLXJlbGF0ZWQgY2FsbGJhY2tzIChlLmcuIGZyb20gYXV0aCBvciB0aGVcbiAgICAgICAgLy8gdW5kZXJseWluZyBzdHJlYW0pLCBndWFyYW50ZWVpbmcgdGhleSB3b24ndCBleGVjdXRlLlxuICAgICAgICB0aGlzLmlyKyssIDQgLyogRXJyb3IgKi8gIT09IHQgPyBcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhbiBpbnRlbnRpb25hbCBjbG9zZSBlbnN1cmUgd2UgZG9uJ3QgZGVsYXkgb3VyIG5leHQgY29ubmVjdGlvbiBhdHRlbXB0LlxuICAgICAgICB0aGlzLmFyLnJlc2V0KCkgOiBlICYmIGUuY29kZSA9PT0gSy5SRVNPVVJDRV9FWEhBVVNURUQgPyAoXG4gICAgICAgIC8vIExvZyB0aGUgZXJyb3IuIChQcm9iYWJseSBlaXRoZXIgJ3F1b3RhIGV4Y2VlZGVkJyBvciAnbWF4IHF1ZXVlIGxlbmd0aCByZWFjaGVkJy4pXG4gICAgICAgIE8oZS50b1N0cmluZygpKSwgTyhcIlVzaW5nIG1heGltdW0gYmFja29mZiBkZWxheSB0byBwcmV2ZW50IG92ZXJsb2FkaW5nIHRoZSBiYWNrZW5kLlwiKSwgXG4gICAgICAgIHRoaXMuYXIuWWkoKSkgOiBlICYmIGUuY29kZSA9PT0gSy5VTkFVVEhFTlRJQ0FURUQgJiYgMyAvKiBIZWFsdGh5ICovICE9PSB0aGlzLnN0YXRlICYmIFxuICAgICAgICAvLyBcInVuYXV0aGVudGljYXRlZFwiIGVycm9yIG1lYW5zIHRoZSB0b2tlbiB3YXMgcmVqZWN0ZWQuIFRoaXMgc2hvdWxkIHJhcmVseVxuICAgICAgICAvLyBoYXBwZW4gc2luY2UgYm90aCBBdXRoIGFuZCBBcHBDaGVjayBlbnN1cmUgYSBzdWZmaWNpZW50IFRUTCB3aGVuIHdlXG4gICAgICAgIC8vIHJlcXVlc3QgYSB0b2tlbi4gSWYgYSB1c2VyIG1hbnVhbGx5IHJlc2V0cyB0aGVpciBzeXN0ZW0gY2xvY2sgdGhpcyBjYW5cbiAgICAgICAgLy8gZmFpbCwgaG93ZXZlci4gSW4gdGhpcyBjYXNlLCB3ZSBzaG91bGQgZ2V0IGEgQ29kZS5VTkFVVEhFTlRJQ0FURUQgZXJyb3JcbiAgICAgICAgLy8gYmVmb3JlIHdlIHJlY2VpdmVkIHRoZSBmaXJzdCBtZXNzYWdlIGFuZCB3ZSBuZWVkIHRvIGludmFsaWRhdGUgdGhlIHRva2VuXG4gICAgICAgIC8vIHRvIGVuc3VyZSB0aGF0IHdlIGZldGNoIGEgbmV3IHRva2VuLlxuICAgICAgICB0aGlzLmNyZWRlbnRpYWxzUHJvdmlkZXIuaW52YWxpZGF0ZVRva2VuKCksIFxuICAgICAgICAvLyBDbGVhbiB1cCB0aGUgdW5kZXJseWluZyBzdHJlYW0gYmVjYXVzZSB3ZSBhcmUgbm8gbG9uZ2VyIGludGVyZXN0ZWQgaW4gZXZlbnRzLlxuICAgICAgICBudWxsICE9PSB0aGlzLnN0cmVhbSAmJiAodGhpcy5wcigpLCB0aGlzLnN0cmVhbS5jbG9zZSgpLCB0aGlzLnN0cmVhbSA9IG51bGwpLCBcbiAgICAgICAgLy8gVGhpcyBzdGF0ZSBtdXN0IGJlIGFzc2lnbmVkIGJlZm9yZSBjYWxsaW5nIG9uQ2xvc2UoKSB0byBhbGxvdyB0aGUgY2FsbGJhY2sgdG9cbiAgICAgICAgLy8gaW5oaWJpdCBiYWNrb2ZmIG9yIG90aGVyd2lzZSBtYW5pcHVsYXRlIHRoZSBzdGF0ZSBpbiBpdHMgbm9uLXN0YXJ0ZWQgc3RhdGUuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB0LCBcbiAgICAgICAgLy8gTm90aWZ5IHRoZSBsaXN0ZW5lciB0aGF0IHRoZSBzdHJlYW0gY2xvc2VkLlxuICAgICAgICBhd2FpdCB0aGlzLmxpc3RlbmVyLkNpKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYW4gYmUgb3ZlcnJpZGRlbiB0byBwZXJmb3JtIGFkZGl0aW9uYWwgY2xlYW51cCBiZWZvcmUgdGhlIHN0cmVhbSBpcyBjbG9zZWQuXG4gICAgICogQ2FsbGluZyBzdXBlci50ZWFyRG93bigpIGlzIG5vdCByZXF1aXJlZC5cbiAgICAgKi8gICAgcHIoKSB7fVxuICAgIGF1dGgoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAxIC8qIFN0YXJ0aW5nICovO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5Ucih0aGlzLmlyKSwgZSA9IHRoaXMuaXI7XG4gICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSnVzdCB1c2UgZGlzcGF0Y2hJZk5vdENsb3NlZCwgYnV0IHNlZSBUT0RPIGJlbG93LlxuICAgICAgICAgICAgICAgIHRoaXMuY3JlZGVudGlhbHNQcm92aWRlci5nZXRUb2tlbigpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgLy8gU3RyZWFtIGNhbiBiZSBzdG9wcGVkIHdoaWxlIHdhaXRpbmcgZm9yIGF1dGhlbnRpY2F0aW9uLlxuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBXZSByZWFsbHkgc2hvdWxkIGp1c3QgdXNlIGRpc3BhdGNoSWZOb3RDbG9zZWRcbiAgICAgICAgICAgIC8vIGFuZCBsZXQgdGhpcyBkaXNwYXRjaCBvbnRvIHRoZSBxdWV1ZSwgYnV0IHRoYXQgb3BlbmVkIGEgc3BlYyB0ZXN0IGNhblxuICAgICAgICAgICAgLy8gb2Ygd29ybXMgdGhhdCBJIGRvbid0IHdhbnQgdG8gZGVhbCB3aXRoIGluIHRoaXMgUFIuXG4gICAgICAgICAgICB0aGlzLmlyID09PSBlICYmIFxuICAgICAgICAgICAgLy8gTm9ybWFsbHkgd2UnZCBoYXZlIHRvIHNjaGVkdWxlIHRoZSBjYWxsYmFjayBvbiB0aGUgQXN5bmNRdWV1ZS5cbiAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHRoZSBmb2xsb3dpbmcgY2FsbHMgYXJlIHNhZmUgdG8gYmUgY2FsbGVkIG91dHNpZGUgdGhlXG4gICAgICAgICAgICAvLyBBc3luY1F1ZXVlIHNpbmNlIHRoZXkgZG9uJ3QgY2hhaW4gYXN5bmNocm9ub3VzIGNhbGxzXG4gICAgICAgICAgICB0aGlzLkVyKHQpO1xuICAgICAgICB9KSwgKGUgPT4ge1xuICAgICAgICAgICAgdCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgaihLLlVOS05PV04sIFwiRmV0Y2hpbmcgYXV0aCB0b2tlbiBmYWlsZWQ6IFwiICsgZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5Jcih0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBFcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLlRyKHRoaXMuaXIpO1xuICAgICAgICB0aGlzLnN0cmVhbSA9IHRoaXMuQXIodCksIHRoaXMuc3RyZWFtLlNpKCgoKSA9PiB7XG4gICAgICAgICAgICBlKCgoKSA9PiAodGhpcy5zdGF0ZSA9IDIgLyogT3BlbiAqLyAsIHRoaXMuY3IgPSB0aGlzLk9lLmVucXVldWVBZnRlckRlbGF5KHRoaXMubnIsIDFlNCwgKCgpID0+ICh0aGlzLmhyKCkgJiYgKHRoaXMuc3RhdGUgPSAzIC8qIEhlYWx0aHkgKi8pLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpLCB0aGlzLmxpc3RlbmVyLlNpKCkpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5zdHJlYW0uQ2koKHQgPT4ge1xuICAgICAgICAgICAgZSgoKCkgPT4gdGhpcy5Jcih0KSkpO1xuICAgICAgICB9KSksIHRoaXMuc3RyZWFtLm9uTWVzc2FnZSgodCA9PiB7XG4gICAgICAgICAgICBlKCgoKSA9PiB0aGlzLm9uTWVzc2FnZSh0KSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGxyKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gNSAvKiBCYWNrb2ZmICovICwgdGhpcy5hci5YaSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogSW5pdGlhbCAqLyAsIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0c1xuICAgIElyKHQpIHtcbiAgICAgICAgLy8gSW4gdGhlb3J5IHRoZSBzdHJlYW0gY291bGQgY2xvc2UgY2xlYW5seSwgaG93ZXZlciwgaW4gb3VyIGN1cnJlbnQgbW9kZWxcbiAgICAgICAgLy8gd2UgbmV2ZXIgZXhwZWN0IHRoaXMgdG8gaGFwcGVuIGJlY2F1c2UgaWYgd2Ugc3RvcCBhIHN0cmVhbSBvdXJzZWx2ZXMsXG4gICAgICAgIC8vIHRoaXMgY2FsbGJhY2sgd2lsbCBuZXZlciBiZSBjYWxsZWQuIFRvIHByZXZlbnQgY2FzZXMgd2hlcmUgd2UgcmV0cnlcbiAgICAgICAgLy8gd2l0aG91dCBhIGJhY2tvZmYgYWNjaWRlbnRhbGx5LCB3ZSBzZXQgdGhlIHN0cmVhbSB0byBlcnJvciBpbiBhbGwgY2FzZXMuXG4gICAgICAgIHJldHVybiAkKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBgY2xvc2Ugd2l0aCBlcnJvcjogJHt0fWApLCB0aGlzLnN0cmVhbSA9IG51bGwsIHRoaXMuY2xvc2UoNCAvKiBFcnJvciAqLyAsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgXCJkaXNwYXRjaGVyXCIgZnVuY3Rpb24gdGhhdCBkaXNwYXRjaGVzIG9wZXJhdGlvbnMgb250byB0aGVcbiAgICAgKiBBc3luY1F1ZXVlIGJ1dCBvbmx5IHJ1bnMgdGhlbSBpZiBjbG9zZUNvdW50IHJlbWFpbnMgdW5jaGFuZ2VkLiBUaGlzIGFsbG93c1xuICAgICAqIHVzIHRvIHR1cm4gYXV0aCAvIHN0cmVhbSBjYWxsYmFja3MgaW50byBuby1vcHMgaWYgdGhlIHN0cmVhbSBpcyBjbG9zZWQgL1xuICAgICAqIHJlLW9wZW5lZCwgZXRjLlxuICAgICAqLyAgICBUcih0KSB7XG4gICAgICAgIHJldHVybiBlID0+IHtcbiAgICAgICAgICAgIHRoaXMuT2UuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdGhpcy5pciA9PT0gdCA/IGUoKSA6ICgkKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBcInN0cmVhbSBjYWxsYmFjayBza2lwcGVkIGJ5IGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIuXCIpLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBMaXN0ZW4gUlBDLlxuICpcbiAqIE9uY2UgdGhlIExpc3RlbiBzdHJlYW0gaGFzIGNhbGxlZCB0aGUgb25PcGVuKCkgbGlzdGVuZXIsIGFueSBudW1iZXIgb2ZcbiAqIGxpc3RlbigpIGFuZCB1bmxpc3RlbigpIGNhbGxzIGNhbiBiZSBtYWRlIHRvIGNvbnRyb2wgd2hhdCBjaGFuZ2VzIHdpbGwgYmVcbiAqIHNlbnQgZnJvbSB0aGUgc2VydmVyIGZvciBMaXN0ZW5SZXNwb25zZXMuXG4gKi8gY2xhc3MgdG8gZXh0ZW5kcyBaciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICBzdXBlcih0LCBcImxpc3Rlbl9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCIgLyogTGlzdGVuU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYgKi8gLCBcImxpc3Rlbl9zdHJlYW1faWRsZVwiIC8qIExpc3RlblN0cmVhbUlkbGUgKi8gLCBcImhlYWx0aF9jaGVja190aW1lb3V0XCIgLyogSGVhbHRoQ2hlY2tUaW1lb3V0ICovICwgZSwgbiwgaSksIFxuICAgICAgICB0aGlzLk4gPSBzO1xuICAgIH1cbiAgICBBcih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNyLmppKFwiTGlzdGVuXCIsIHQpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UodCkge1xuICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgbWVhbnMgdGhlIHN0cmVhbSBpcyBoZWFsdGh5XG4gICAgICAgIHRoaXMuYXIucmVzZXQoKTtcbiAgICAgICAgY29uc3QgZSA9IG5zKHRoaXMuTiwgdCksIG4gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAvLyBXZSBoYXZlIG9ubHkgcmVhY2hlZCBhIGNvbnNpc3RlbnQgc25hcHNob3QgZm9yIHRoZSBlbnRpcmUgc3RyZWFtIGlmIHRoZXJlXG4gICAgICAgICAgICAvLyBpcyBhIHJlYWRfdGltZSBzZXQgYW5kIGl0IGFwcGxpZXMgdG8gYWxsIHRhcmdldHMgKGkuZS4gdGhlIGxpc3Qgb2ZcbiAgICAgICAgICAgIC8vIHRhcmdldHMgaXMgZW1wdHkpLiBUaGUgYmFja2VuZCBpcyBndWFyYW50ZWVkIHRvIHNlbmQgc3VjaCByZXNwb25zZXMuXG4gICAgICAgICAgICBpZiAoIShcInRhcmdldENoYW5nZVwiIGluIHQpKSByZXR1cm4gcnQubWluKCk7XG4gICAgICAgICAgICBjb25zdCBlID0gdC50YXJnZXRDaGFuZ2U7XG4gICAgICAgICAgICByZXR1cm4gZS50YXJnZXRJZHMgJiYgZS50YXJnZXRJZHMubGVuZ3RoID8gcnQubWluKCkgOiBlLnJlYWRUaW1lID8gam4oZS5yZWFkVGltZSkgOiBydC5taW4oKTtcbiAgICAgICAgfSh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuUnIoZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZiB0aGUgdGFyZ2V0XG4gICAgICogaW5jbHVkZXMgYSByZXN1bWVUb2tlbiBpdCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSByZXF1ZXN0LiBSZXN1bHRzIHRoYXRcbiAgICAgKiBhZmZlY3QgdGhlIHRhcmdldCB3aWxsIGJlIHN0cmVhbWVkIGJhY2sgYXMgV2F0Y2hDaGFuZ2UgbWVzc2FnZXMgdGhhdFxuICAgICAqIHJlZmVyZW5jZSB0aGUgdGFyZ2V0SWQuXG4gICAgICovICAgIGJyKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHt9O1xuICAgICAgICBlLmRhdGFiYXNlID0gWW4odGhpcy5OKSwgZS5hZGRUYXJnZXQgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBsZXQgbjtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHJldHVybiBuID0gSHQocykgPyB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiBvcyh0LCBzKVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBxdWVyeTogY3ModCwgcylcbiAgICAgICAgICAgIH0sIG4udGFyZ2V0SWQgPSBlLnRhcmdldElkLCBlLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgPyBuLnJlc3VtZVRva2VuID0gcW4odCwgZS5yZXN1bWVUb2tlbikgOiBlLnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8ocnQubWluKCkpID4gMCAmJiAoXG4gICAgICAgICAgICAvLyBUT0RPKHd1YW5keSk6IENvbnNpZGVyIHJlbW92aW5nIGFib3ZlIGNoZWNrIGJlY2F1c2UgaXQgaXMgbW9zdCBsaWtlbHkgdHJ1ZS5cbiAgICAgICAgICAgIC8vIFJpZ2h0IG5vdywgbWFueSB0ZXN0cyBkZXBlbmQgb24gdGhpcyBiZWhhdmlvdXIgdGhvdWdoIChsZWF2aW5nIG1pbigpIG91dFxuICAgICAgICAgICAgLy8gb2Ygc2VyaWFsaXphdGlvbikuXG4gICAgICAgICAgICBuLnJlYWRUaW1lID0gVW4odCwgZS5zbmFwc2hvdFZlcnNpb24udG9UaW1lc3RhbXAoKSkpLCBuO1xuICAgICAgICB9KHRoaXMuTiwgdCk7XG4gICAgICAgIGNvbnN0IG4gPSB1cyh0aGlzLk4sIHQpO1xuICAgICAgICBuICYmIChlLmxhYmVscyA9IG4pLCB0aGlzLm1yKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgdGFyZ2V0IGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgICAgKiBnaXZlbiB0YXJnZXRJZC5cbiAgICAgKi8gICAgUHIodCkge1xuICAgICAgICBjb25zdCBlID0ge307XG4gICAgICAgIGUuZGF0YWJhc2UgPSBZbih0aGlzLk4pLCBlLnJlbW92ZVRhcmdldCA9IHQsIHRoaXMubXIoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgU3RyZWFtIHRoYXQgaW1wbGVtZW50cyB0aGUgV3JpdGUgUlBDLlxuICpcbiAqIFRoZSBXcml0ZSBSUEMgcmVxdWlyZXMgdGhlIGNhbGxlciB0byBtYWludGFpbiBzcGVjaWFsIHN0cmVhbVRva2VuXG4gKiBzdGF0ZSBpbiBiZXR3ZWVuIGNhbGxzLCB0byBoZWxwIHRoZSBzZXJ2ZXIgdW5kZXJzdGFuZCB3aGljaCByZXNwb25zZXMgdGhlXG4gKiBjbGllbnQgaGFzIHByb2Nlc3NlZCBieSB0aGUgdGltZSB0aGUgbmV4dCByZXF1ZXN0IGlzIG1hZGUuIEV2ZXJ5IHJlc3BvbnNlXG4gKiB3aWxsIGNvbnRhaW4gYSBzdHJlYW1Ub2tlbjsgdGhpcyB2YWx1ZSBtdXN0IGJlIHBhc3NlZCB0byB0aGUgbmV4dFxuICogcmVxdWVzdC5cbiAqXG4gKiBBZnRlciBjYWxsaW5nIHN0YXJ0KCkgb24gdGhpcyBzdHJlYW0sIHRoZSBuZXh0IHJlcXVlc3QgbXVzdCBiZSBhIGhhbmRzaGFrZSxcbiAqIGNvbnRhaW5pbmcgd2hhdGV2ZXIgc3RyZWFtVG9rZW4gaXMgb24gaGFuZC4gT25jZSBhIHJlc3BvbnNlIHRvIHRoaXNcbiAqIHJlcXVlc3QgaXMgcmVjZWl2ZWQsIGFsbCBwZW5kaW5nIG11dGF0aW9ucyBtYXkgYmUgc3VibWl0dGVkLiBXaGVuXG4gKiBzdWJtaXR0aW5nIG11bHRpcGxlIGJhdGNoZXMgb2YgbXV0YXRpb25zIGF0IHRoZSBzYW1lIHRpbWUsIGl0J3NcbiAqIG9rYXkgdG8gdXNlIHRoZSBzYW1lIHN0cmVhbVRva2VuIGZvciB0aGUgY2FsbHMgdG8gd3JpdGVNdXRhdGlvbnMuXG4gKlxuICogVE9ETyhiLzMzMjcxMjM1KTogVXNlIHByb3RvIHR5cGVzXG4gKi8gY2xhc3MgZW8gZXh0ZW5kcyBaciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICBzdXBlcih0LCBcIndyaXRlX3N0cmVhbV9jb25uZWN0aW9uX2JhY2tvZmZcIiAvKiBXcml0ZVN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmICovICwgXCJ3cml0ZV9zdHJlYW1faWRsZVwiIC8qIFdyaXRlU3RyZWFtSWRsZSAqLyAsIFwiaGVhbHRoX2NoZWNrX3RpbWVvdXRcIiAvKiBIZWFsdGhDaGVja1RpbWVvdXQgKi8gLCBlLCBuLCBpKSwgXG4gICAgICAgIHRoaXMuTiA9IHMsIHRoaXMudnIgPSAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhY2tzIHdoZXRoZXIgb3Igbm90IGEgaGFuZHNoYWtlIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBleGNoYW5nZWQgYW5kXG4gICAgICogdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgbXV0YXRpb25zLlxuICAgICAqLyAgICBnZXQgVnIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZyO1xuICAgIH1cbiAgICAvLyBPdmVycmlkZSBvZiBQZXJzaXN0ZW50U3RyZWFtLnN0YXJ0XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMudnIgPSAhMSwgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSB2b2lkIDAsIHN1cGVyLnN0YXJ0KCk7XG4gICAgfVxuICAgIHByKCkge1xuICAgICAgICB0aGlzLnZyICYmIHRoaXMuU3IoW10pO1xuICAgIH1cbiAgICBBcih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNyLmppKFwiV3JpdGVcIiwgdCk7XG4gICAgfVxuICAgIG9uTWVzc2FnZSh0KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gQWx3YXlzIGNhcHR1cmUgdGhlIGxhc3Qgc3RyZWFtIHRva2VuLlxuICAgICAgICBCKCEhdC5zdHJlYW1Ub2tlbiksIHRoaXMubGFzdFN0cmVhbVRva2VuID0gdC5zdHJlYW1Ub2tlbiwgdGhpcy52cikge1xuICAgICAgICAgICAgLy8gQSBzdWNjZXNzZnVsIGZpcnN0IHdyaXRlIHJlc3BvbnNlIG1lYW5zIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSxcbiAgICAgICAgICAgIC8vIE5vdGUsIHRoYXQgd2UgY291bGQgY29uc2lkZXIgYSBzdWNjZXNzZnVsIGhhbmRzaGFrZSBoZWFsdGh5LCBob3dldmVyLFxuICAgICAgICAgICAgLy8gdGhlIHdyaXRlIGl0c2VsZiBtaWdodCBiZSBjYXVzaW5nIGFuIGVycm9yIHdlIHdhbnQgdG8gYmFjayBvZmYgZnJvbS5cbiAgICAgICAgICAgIHRoaXMuYXIucmVzZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBycyh0LndyaXRlUmVzdWx0cywgdC5jb21taXRUaW1lKSwgbiA9IGpuKHQuY29tbWl0VGltZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5EcihuLCBlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgZmlyc3QgcmVzcG9uc2UgaXMgYWx3YXlzIHRoZSBoYW5kc2hha2UgcmVzcG9uc2VcbiAgICAgICAgcmV0dXJuIEIoIXQud3JpdGVSZXN1bHRzIHx8IDAgPT09IHQud3JpdGVSZXN1bHRzLmxlbmd0aCksIHRoaXMudnIgPSAhMCwgdGhpcy5saXN0ZW5lci5DcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBhbiBpbml0aWFsIHN0cmVhbVRva2VuIHRvIHRoZSBzZXJ2ZXIsIHBlcmZvcm1pbmcgdGhlIGhhbmRzaGFrZVxuICAgICAqIHJlcXVpcmVkIHRvIG1ha2UgdGhlIFN0cmVhbWluZ1dyaXRlIFJQQyB3b3JrLiBTdWJzZXF1ZW50XG4gICAgICogY2FsbHMgc2hvdWxkIHdhaXQgdW50aWwgb25IYW5kc2hha2VDb21wbGV0ZSB3YXMgY2FsbGVkLlxuICAgICAqLyAgICBOcigpIHtcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBTdXBwb3J0IHN0cmVhbSByZXN1bXB0aW9uLiBXZSBpbnRlbnRpb25hbGx5IGRvIG5vdCBzZXQgdGhlXG4gICAgICAgIC8vIHN0cmVhbSB0b2tlbiBvbiB0aGUgaGFuZHNoYWtlLCBpZ25vcmluZyBhbnkgc3RyZWFtIHRva2VuIHdlIG1pZ2h0IGhhdmUuXG4gICAgICAgIGNvbnN0IHQgPSB7fTtcbiAgICAgICAgdC5kYXRhYmFzZSA9IFluKHRoaXMuTiksIHRoaXMubXIodCk7XG4gICAgfVxuICAgIC8qKiBTZW5kcyBhIGdyb3VwIG9mIG11dGF0aW9ucyB0byB0aGUgRmlyZXN0b3JlIGJhY2tlbmQgdG8gYXBwbHkuICovICAgIFNyKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIHN0cmVhbVRva2VuOiB0aGlzLmxhc3RTdHJlYW1Ub2tlbixcbiAgICAgICAgICAgIHdyaXRlczogdC5tYXAoKHQgPT4gc3ModGhpcy5OLCB0KSkpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubXIoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEYXRhc3RvcmUgYW5kIGl0cyByZWxhdGVkIG1ldGhvZHMgYXJlIGEgd3JhcHBlciBhcm91bmQgdGhlIGV4dGVybmFsIEdvb2dsZVxuICogQ2xvdWQgRGF0YXN0b3JlIGdycGMgQVBJLCB3aGljaCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdGhhdCBpcyBtb3JlIGNvbnZlbmllbnRcbiAqIGZvciB0aGUgcmVzdCBvZiB0aGUgY2xpZW50IFNESyBhcmNoaXRlY3R1cmUgdG8gY29uc3VtZS5cbiAqL1xuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBEYXRhc3RvcmUgdGhhdCBleHBvc2VzIGFkZGl0aW9uYWwgc3RhdGUgZm9yIGludGVybmFsXG4gKiBjb25zdW1wdGlvbi5cbiAqL1xuY2xhc3Mgbm8gZXh0ZW5kcyBjbGFzcyB7fSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmNyZWRlbnRpYWxzID0gdCwgdGhpcy5zciA9IGUsIHRoaXMuTiA9IG4sIHRoaXMua3IgPSAhMTtcbiAgICB9XG4gICAgJHIoKSB7XG4gICAgICAgIGlmICh0aGlzLmtyKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIHRlcm1pbmF0ZWQuXCIpO1xuICAgIH1cbiAgICAvKiogR2V0cyBhbiBhdXRoIHRva2VuIGFuZCBpbnZva2VzIHRoZSBwcm92aWRlZCBSUEMuICovICAgIExpKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHIoKSwgdGhpcy5jcmVkZW50aWFscy5nZXRUb2tlbigpLnRoZW4oKHMgPT4gdGhpcy5zci5MaSh0LCBlLCBuLCBzKSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRocm93IFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUgPyAodC5jb2RlID09PSBLLlVOQVVUSEVOVElDQVRFRCAmJiB0aGlzLmNyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHQpIDogbmV3IGooSy5VTktOT1dOLCB0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKiBHZXRzIGFuIGF1dGggdG9rZW4gYW5kIGludm9rZXMgdGhlIHByb3ZpZGVkIFJQQyB3aXRoIHN0cmVhbWVkIHJlc3VsdHMuICovICAgIEtpKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHIoKSwgdGhpcy5jcmVkZW50aWFscy5nZXRUb2tlbigpLnRoZW4oKHMgPT4gdGhpcy5zci5LaSh0LCBlLCBuLCBzKSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRocm93IFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUgPyAodC5jb2RlID09PSBLLlVOQVVUSEVOVElDQVRFRCAmJiB0aGlzLmNyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHQpIDogbmV3IGooSy5VTktOT1dOLCB0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5rciA9ICEwO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmV4cCk6IE1ha2Ugc3VyZSB0aGVyZSBpcyBvbmx5IG9uZSBEYXRhc3RvcmUgaW5zdGFuY2UgcGVyXG4vLyBmaXJlc3RvcmUtZXhwIGNsaWVudC5cbi8qKlxuICogQSBjb21wb25lbnQgdXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG8gdHJhY2sgdGhlIE9ubGluZVN0YXRlICh0aGF0IGlzLFxuICogd2hldGhlciBvciBub3QgdGhlIGNsaWVudCBhcyBhIHdob2xlIHNob3VsZCBiZSBjb25zaWRlcmVkIHRvIGJlIG9ubGluZSBvclxuICogb2ZmbGluZSksIGltcGxlbWVudGluZyB0aGUgYXBwcm9wcmlhdGUgaGV1cmlzdGljcy5cbiAqXG4gKiBJbiBwYXJ0aWN1bGFyLCB3aGVuIHRoZSBjbGllbnQgaXMgdHJ5aW5nIHRvIGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQsIHdlXG4gKiBhbGxvdyB1cCB0byBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHdpdGhpbiBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUyBmb3JcbiAqIGEgY29ubmVjdGlvbiB0byBzdWNjZWVkLiBJZiB3ZSBoYXZlIHRvbyBtYW55IGZhaWx1cmVzIG9yIHRoZSB0aW1lb3V0IGVsYXBzZXMsXG4gKiB0aGVuIHdlIHNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSwgYW5kIHRoZSBjbGllbnQgd2lsbCBiZWhhdmUgYXMgaWZcbiAqIGl0IGlzIG9mZmxpbmUgKGdldCgpcyB3aWxsIHJldHVybiBjYWNoZWQgZGF0YSwgZXRjLikuXG4gKi9cbmNsYXNzIHNvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gZSwgXG4gICAgICAgIC8qKiBUaGUgY3VycmVudCBPbmxpbmVTdGF0ZS4gKi9cbiAgICAgICAgdGhpcy5zdGF0ZSA9IFwiVW5rbm93blwiIC8qIFVua25vd24gKi8gLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY291bnQgb2YgY29uc2VjdXRpdmUgZmFpbHVyZXMgdG8gb3BlbiB0aGUgc3RyZWFtLiBJZiBpdCByZWFjaGVzIHRoZVxuICAgICAgICAgKiBtYXhpbXVtIGRlZmluZWQgYnkgTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUywgd2UnbGwgc2V0IHRoZSBPbmxpbmVTdGF0ZSB0b1xuICAgICAgICAgKiBPZmZsaW5lLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5PciA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSB0aW1lciB0aGF0IGVsYXBzZXMgYWZ0ZXIgT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMsIGF0IHdoaWNoIHBvaW50IHdlXG4gICAgICAgICAqIHRyYW5zaXRpb24gZnJvbSBPbmxpbmVTdGF0ZS5Vbmtub3duIHRvIE9ubGluZVN0YXRlLk9mZmxpbmUgd2l0aG91dCB3YWl0aW5nXG4gICAgICAgICAqIGZvciB0aGUgc3RyZWFtIHRvIGFjdHVhbGx5IGZhaWwgKE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgdGltZXMpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5GciA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgY2xpZW50IHNob3VsZCBsb2cgYSB3YXJuaW5nIG1lc3NhZ2UgaWYgaXQgZmFpbHMgdG8gY29ubmVjdCB0b1xuICAgICAgICAgKiB0aGUgYmFja2VuZCAoaW5pdGlhbGx5IHRydWUsIGNsZWFyZWQgYWZ0ZXIgYSBzdWNjZXNzZnVsIHN0cmVhbSwgb3IgaWYgd2UndmVcbiAgICAgICAgICogbG9nZ2VkIHRoZSBtZXNzYWdlIGFscmVhZHkpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5NciA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYnkgUmVtb3RlU3RvcmUgd2hlbiBhIHdhdGNoIHN0cmVhbSBpcyBzdGFydGVkIChpbmNsdWRpbmcgb24gZWFjaFxuICAgICAqIGJhY2tvZmYgYXR0ZW1wdCkuXG4gICAgICpcbiAgICAgKiBJZiB0aGlzIGlzIHRoZSBmaXJzdCBhdHRlbXB0LCBpdCBzZXRzIHRoZSBPbmxpbmVTdGF0ZSB0byBVbmtub3duIGFuZCBzdGFydHNcbiAgICAgKiB0aGUgb25saW5lU3RhdGVUaW1lci5cbiAgICAgKi8gICAgTHIoKSB7XG4gICAgICAgIDAgPT09IHRoaXMuT3IgJiYgKHRoaXMuQnIoXCJVbmtub3duXCIgLyogVW5rbm93biAqLyksIHRoaXMuRnIgPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJvbmxpbmVfc3RhdGVfdGltZW91dFwiIC8qIE9ubGluZVN0YXRlVGltZW91dCAqLyAsIDFlNCwgKCgpID0+ICh0aGlzLkZyID0gbnVsbCwgXG4gICAgICAgIHRoaXMuVXIoXCJCYWNrZW5kIGRpZG4ndCByZXNwb25kIHdpdGhpbiAxMCBzZWNvbmRzLlwiKSwgdGhpcy5CcihcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBvdXIgT25saW5lU3RhdGUgYXMgYXBwcm9wcmlhdGUgYWZ0ZXIgdGhlIHdhdGNoIHN0cmVhbSByZXBvcnRzIGFcbiAgICAgKiBmYWlsdXJlLiBUaGUgZmlyc3QgZmFpbHVyZSBtb3ZlcyB1cyB0byB0aGUgJ1Vua25vd24nIHN0YXRlLiBXZSB0aGVuIG1heVxuICAgICAqIGFsbG93IG11bHRpcGxlIGZhaWx1cmVzIChiYXNlZCBvbiBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTKSBiZWZvcmUgd2VcbiAgICAgKiBhY3R1YWxseSB0cmFuc2l0aW9uIHRvIHRoZSAnT2ZmbGluZScgc3RhdGUuXG4gICAgICovICAgIHFyKHQpIHtcbiAgICAgICAgXCJPbmxpbmVcIiAvKiBPbmxpbmUgKi8gPT09IHRoaXMuc3RhdGUgPyB0aGlzLkJyKFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pIDogKHRoaXMuT3IrKywgXG4gICAgICAgIHRoaXMuT3IgPj0gMSAmJiAodGhpcy5LcigpLCB0aGlzLlVyKGBDb25uZWN0aW9uIGZhaWxlZCAxIHRpbWVzLiBNb3N0IHJlY2VudCBlcnJvcjogJHt0LnRvU3RyaW5nKCl9YCksIFxuICAgICAgICB0aGlzLkJyKFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4cGxpY2l0bHkgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gdGhlIHNwZWNpZmllZCBzdGF0ZS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIHJlc2V0cyBvdXIgdGltZXJzIC8gZmFpbHVyZSBjb3VudGVycywgZXRjLiB1c2VkIGJ5IG91clxuICAgICAqIE9mZmxpbmUgaGV1cmlzdGljcywgc28gbXVzdCBub3QgYmUgdXNlZCBpbiBwbGFjZSBvZlxuICAgICAqIGhhbmRsZVdhdGNoU3RyZWFtU3RhcnQoKSBhbmQgaGFuZGxlV2F0Y2hTdHJlYW1GYWlsdXJlKCkuXG4gICAgICovICAgIHNldCh0KSB7XG4gICAgICAgIHRoaXMuS3IoKSwgdGhpcy5PciA9IDAsIFwiT25saW5lXCIgLyogT25saW5lICovID09PSB0ICYmIChcbiAgICAgICAgLy8gV2UndmUgY29ubmVjdGVkIHRvIHdhdGNoIGF0IGxlYXN0IG9uY2UuIERvbid0IHdhcm4gdGhlIGRldmVsb3BlclxuICAgICAgICAvLyBhYm91dCBiZWluZyBvZmZsaW5lIGdvaW5nIGZvcndhcmQuXG4gICAgICAgIHRoaXMuTXIgPSAhMSksIHRoaXMuQnIodCk7XG4gICAgfVxuICAgIEJyKHQpIHtcbiAgICAgICAgdCAhPT0gdGhpcy5zdGF0ZSAmJiAodGhpcy5zdGF0ZSA9IHQsIHRoaXMub25saW5lU3RhdGVIYW5kbGVyKHQpKTtcbiAgICB9XG4gICAgVXIodCkge1xuICAgICAgICBjb25zdCBlID0gYENvdWxkIG5vdCByZWFjaCBDbG91ZCBGaXJlc3RvcmUgYmFja2VuZC4gJHt0fVxcblRoaXMgdHlwaWNhbGx5IGluZGljYXRlcyB0aGF0IHlvdXIgZGV2aWNlIGRvZXMgbm90IGhhdmUgYSBoZWFsdGh5IEludGVybmV0IGNvbm5lY3Rpb24gYXQgdGhlIG1vbWVudC4gVGhlIGNsaWVudCB3aWxsIG9wZXJhdGUgaW4gb2ZmbGluZSBtb2RlIHVudGlsIGl0IGlzIGFibGUgdG8gc3VjY2Vzc2Z1bGx5IGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQuYDtcbiAgICAgICAgdGhpcy5NciA/IChPKGUpLCB0aGlzLk1yID0gITEpIDogJChcIk9ubGluZVN0YXRlVHJhY2tlclwiLCBlKTtcbiAgICB9XG4gICAgS3IoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuRnIgJiYgKHRoaXMuRnIuY2FuY2VsKCksIHRoaXMuRnIgPSBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIGlvIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbG9jYWwgc3RvcmUsIHVzZWQgdG8gZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aCBvdXRib3VuZCBtdXRhdGlvbnMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBjbGllbnQtc2lkZSBwcm94eSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgYmFja2VuZC4gKi9cbiAgICBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IHQsIHRoaXMuZGF0YXN0b3JlID0gZSwgdGhpcy5hc3luY1F1ZXVlID0gbiwgdGhpcy5yZW1vdGVTeW5jZXIgPSB7fSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgdXAgdG8gTUFYX1BFTkRJTkdfV1JJVEVTIHdyaXRlcyB0aGF0IHdlIGhhdmUgZmV0Y2hlZCBmcm9tIHRoZVxuICAgICAgICAgKiBMb2NhbFN0b3JlIHZpYSBmaWxsV3JpdGVQaXBlbGluZSgpIGFuZCBoYXZlIG9yIHdpbGwgc2VuZCB0byB0aGUgd3JpdGVcbiAgICAgICAgICogc3RyZWFtLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaGVuZXZlciB3cml0ZVBpcGVsaW5lLmxlbmd0aCA+IDAgdGhlIFJlbW90ZVN0b3JlIHdpbGwgYXR0ZW1wdCB0byBzdGFydCBvclxuICAgICAgICAgKiByZXN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0uIFdoZW4gdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZCB0aGUgd3JpdGVzIGluIHRoZVxuICAgICAgICAgKiBwaXBlbGluZSB3aWxsIGJlIHNlbnQgaW4gb3JkZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlcyByZW1haW4gaW4gd3JpdGVQaXBlbGluZSB1bnRpbCB0aGV5IGFyZSBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmRcbiAgICAgICAgICogYW5kIHRodXMgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHJlLXNlbnQgaWYgdGhlIHN0cmVhbSBpcyBpbnRlcnJ1cHRlZCAvXG4gICAgICAgICAqIHJlc3RhcnRlZCBiZWZvcmUgdGhleSdyZSBhY2tub3dsZWRnZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlIHJlc3BvbnNlcyBmcm9tIHRoZSBiYWNrZW5kIGFyZSBsaW5rZWQgdG8gdGhlaXIgb3JpZ2luYXRpbmcgcmVxdWVzdFxuICAgICAgICAgKiBwdXJlbHkgYmFzZWQgb24gb3JkZXIsIGFuZCBzbyB3ZSBjYW4ganVzdCBzaGlmdCgpIHdyaXRlcyBmcm9tIHRoZSBmcm9udCBvZlxuICAgICAgICAgKiB0aGUgd3JpdGVQaXBlbGluZSBhcyB3ZSByZWNlaXZlIHJlc3BvbnNlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuanIgPSBbXSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG1hcHBpbmcgb2Ygd2F0Y2hlZCB0YXJnZXRzIHRoYXQgdGhlIGNsaWVudCBjYXJlcyBhYm91dCB0cmFja2luZyBhbmQgdGhlXG4gICAgICAgICAqIHVzZXIgaGFzIGV4cGxpY2l0bHkgY2FsbGVkIGEgJ2xpc3RlbicgZm9yIHRoaXMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGVzZSB0YXJnZXRzIG1heSBvciBtYXkgbm90IGhhdmUgYmVlbiBzZW50IHRvIG9yIGFja25vd2xlZGdlZCBieSB0aGVcbiAgICAgICAgICogc2VydmVyLiBPbiByZS1lc3RhYmxpc2hpbmcgdGhlIGxpc3RlbiBzdHJlYW0sIHRoZXNlIHRhcmdldHMgc2hvdWxkIGJlIHNlbnRcbiAgICAgICAgICogdG8gdGhlIHNlcnZlci4gVGhlIHRhcmdldHMgcmVtb3ZlZCB3aXRoIHVubGlzdGVucyBhcmUgcmVtb3ZlZCBlYWdlcmx5XG4gICAgICAgICAqIHdpdGhvdXQgd2FpdGluZyBmb3IgY29uZmlybWF0aW9uIGZyb20gdGhlIGxpc3RlbiBzdHJlYW0uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlFyID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHNldCBvZiByZWFzb25zIGZvciB3aHkgdGhlIFJlbW90ZVN0b3JlIG1heSBiZSBvZmZsaW5lLiBJZiBlbXB0eSwgdGhlXG4gICAgICAgICAqIFJlbW90ZVN0b3JlIG1heSBzdGFydCBpdHMgbmV0d29yayBjb25uZWN0aW9ucy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuV3IgPSBuZXcgU2V0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXJzIHRoYXQgZ2V0IGNhbGxlZCB3aGVuIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkIG9yIGVuYWJsZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhlc2UgZnVuY3Rpb25zIGFyZSB1c2VkIG9uIHRoZSBXZWIgY2xpZW50IHRvIGNyZWF0ZSB0aGVcbiAgICAgICAgICogdW5kZXJseWluZyBzdHJlYW1zICh0byBzdXBwb3J0IHRyZWUtc2hha2VhYmxlIHN0cmVhbXMpLiBPbiBBbmRyb2lkIGFuZCBpT1MsXG4gICAgICAgICAqIHRoZSBzdHJlYW1zIGFyZSBjcmVhdGVkIGR1cmluZyBjb25zdHJ1Y3Rpb24gb2YgUmVtb3RlU3RvcmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkdyID0gW10sIHRoaXMuenIgPSBpLCB0aGlzLnpyLlRpKCh0ID0+IHtcbiAgICAgICAgICAgIG4uZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFBvcnRpbmcgTm90ZTogVW5saWtlIGlPUywgYHJlc3RhcnROZXR3b3JrKClgIGlzIGNhbGxlZCBldmVuIHdoZW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gbmV0d29yayBiZWNvbWVzIHVucmVhY2hhYmxlIGFzIHdlIGRvbid0IGhhdmUgYW55IG90aGVyIHdheSB0byB0ZWFyXG4gICAgICAgICAgICAgICAgLy8gZG93biBvdXIgc3RyZWFtcy5cbiAgICAgICAgICAgICAgICB3byh0aGlzKSAmJiAoJChcIlJlbW90ZVN0b3JlXCIsIFwiUmVzdGFydGluZyBzdHJlYW1zIGZvciBuZXR3b3JrIHJlYWNoYWJpbGl0eSBjaGFuZ2UuXCIpLCBcbiAgICAgICAgICAgICAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgICAgICAgICAgICAgICAgICBlLldyLmFkZCg0IC8qIENvbm5lY3Rpdml0eUNoYW5nZSAqLyksIGF3YWl0IG9vKGUpLCBlLkhyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKSwgXG4gICAgICAgICAgICAgICAgICAgIGUuV3IuZGVsZXRlKDQgLyogQ29ubmVjdGl2aXR5Q2hhbmdlICovKSwgYXdhaXQgcm8oZSk7XG4gICAgICAgICAgICAgICAgfSh0aGlzKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSwgdGhpcy5IciA9IG5ldyBzbyhuLCBzKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJvKHQpIHtcbiAgICBpZiAod28odCkpIGZvciAoY29uc3QgZSBvZiB0LkdyKSBhd2FpdCBlKC8qIGVuYWJsZWQ9ICovICEwKTtcbn1cblxuLyoqXG4gKiBUZW1wb3JhcmlseSBkaXNhYmxlcyB0aGUgbmV0d29yay4gVGhlIG5ldHdvcmsgY2FuIGJlIHJlLWVuYWJsZWQgdXNpbmdcbiAqIGVuYWJsZU5ldHdvcmsoKS5cbiAqLyBhc3luYyBmdW5jdGlvbiBvbyh0KSB7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuR3IpIGF3YWl0IGUoLyogZW5hYmxlZD0gKi8gITEpO1xufVxuXG4vKipcbiAqIFN0YXJ0cyBuZXcgbGlzdGVuIGZvciB0aGUgZ2l2ZW4gdGFyZ2V0LiBVc2VzIHJlc3VtZSB0b2tlbiBpZiBwcm92aWRlZC4gSXRcbiAqIGlzIGEgbm8tb3AgaWYgdGhlIHRhcmdldCBvZiBnaXZlbiBgVGFyZ2V0RGF0YWAgaXMgYWxyZWFkeSBiZWluZyBsaXN0ZW5lZCB0by5cbiAqL1xuZnVuY3Rpb24gY28odCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIG4uUXIuaGFzKGUudGFyZ2V0SWQpIHx8IChcbiAgICAvLyBNYXJrIHRoaXMgYXMgc29tZXRoaW5nIHRoZSBjbGllbnQgaXMgY3VycmVudGx5IGxpc3RlbmluZyBmb3IuXG4gICAgbi5Rci5zZXQoZS50YXJnZXRJZCwgZSksIGZvKG4pID8gXG4gICAgLy8gVGhlIGxpc3RlbiB3aWxsIGJlIHNlbnQgaW4gb25XYXRjaFN0cmVhbU9wZW5cbiAgICBsbyhuKSA6IENvKG4pLmhyKCkgJiYgdW8obiwgZSkpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgdGhlIGxpc3RlbiBmcm9tIHNlcnZlci4gSXQgaXMgYSBuby1vcCBpZiB0aGUgZ2l2ZW4gdGFyZ2V0IGlkIGlzXG4gKiBub3QgYmVpbmcgbGlzdGVuZWQgdG8uXG4gKi8gZnVuY3Rpb24gYW8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gQ28obik7XG4gICAgbi5Rci5kZWxldGUoZSksIHMuaHIoKSAmJiBobyhuLCBlKSwgMCA9PT0gbi5Rci5zaXplICYmIChzLmhyKCkgPyBzLndyKCkgOiB3byhuKSAmJiBcbiAgICAvLyBSZXZlcnQgdG8gT25saW5lU3RhdGUuVW5rbm93biBpZiB0aGUgd2F0Y2ggc3RyZWFtIGlzIG5vdCBvcGVuIGFuZCB3ZVxuICAgIC8vIGhhdmUgbm8gbGlzdGVuZXJzLCBzaW5jZSB3aXRob3V0IGFueSBsaXN0ZW5zIHRvIHNlbmQgd2UgY2Fubm90XG4gICAgLy8gY29uZmlybSBpZiB0aGUgc3RyZWFtIGlzIGhlYWx0aHkgYW5kIHVwZ3JhZGUgdG8gT25saW5lU3RhdGUuT25saW5lLlxuICAgIG4uSHIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pKTtcbn1cblxuLyoqXG4gKiBXZSBuZWVkIHRvIGluY3JlbWVudCB0aGUgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcbiAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIGFjayB0byBwcm9jZXNzIGFueSBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxuICovIGZ1bmN0aW9uIHVvKHQsIGUpIHtcbiAgICB0LkpyLlkoZS50YXJnZXRJZCksIENvKHQpLmJyKGUpO1xufVxuXG4vKipcbiAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgd2UncmUgZHVlXG4gKiBmcm9tIHdhdGNoIHNvIHdlIHdhaXQgZm9yIHRoZSByZW1vdmFsIG9uIHRoZSBzZXJ2ZXIgYmVmb3JlIHdlIHByb2Nlc3MgYW55XG4gKiBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxuICovIGZ1bmN0aW9uIGhvKHQsIGUpIHtcbiAgICB0LkpyLlkoZSksIENvKHQpLlByKGUpO1xufVxuXG5mdW5jdGlvbiBsbyh0KSB7XG4gICAgdC5KciA9IG5ldyAkbih7XG4gICAgICAgIGdldFJlbW90ZUtleXNGb3JUYXJnZXQ6IGUgPT4gdC5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldChlKSxcbiAgICAgICAgVHQ6IGUgPT4gdC5Rci5nZXQoZSkgfHwgbnVsbFxuICAgIH0pLCBDbyh0KS5zdGFydCgpLCB0LkhyLkxyKCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSB3YXRjaCBzdHJlYW0gc2hvdWxkIGJlIHN0YXJ0ZWQgYmVjYXVzZSBpdCdzIG5lY2Vzc2FyeVxuICogYW5kIGhhcyBub3QgeWV0IGJlZW4gc3RhcnRlZC5cbiAqLyBmdW5jdGlvbiBmbyh0KSB7XG4gICAgcmV0dXJuIHdvKHQpICYmICFDbyh0KS51cigpICYmIHQuUXIuc2l6ZSA+IDA7XG59XG5cbmZ1bmN0aW9uIHdvKHQpIHtcbiAgICByZXR1cm4gMCA9PT0gcSh0KS5Xci5zaXplO1xufVxuXG5mdW5jdGlvbiBfbyh0KSB7XG4gICAgdC5KciA9IHZvaWQgMDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbW8odCkge1xuICAgIHQuUXIuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgdW8odCwgZSk7XG4gICAgfSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnbyh0LCBlKSB7XG4gICAgX28odCksIFxuICAgIC8vIElmIHdlIHN0aWxsIG5lZWQgdGhlIHdhdGNoIHN0cmVhbSwgcmV0cnkgdGhlIGNvbm5lY3Rpb24uXG4gICAgZm8odCkgPyAodC5Ici5xcihlKSwgbG8odCkpIDogXG4gICAgLy8gTm8gbmVlZCB0byByZXN0YXJ0IHdhdGNoIHN0cmVhbSBiZWNhdXNlIHRoZXJlIGFyZSBubyBhY3RpdmUgdGFyZ2V0cy5cbiAgICAvLyBUaGUgb25saW5lIHN0YXRlIGlzIHNldCB0byB1bmtub3duIGJlY2F1c2UgdGhlcmUgaXMgbm8gYWN0aXZlIGF0dGVtcHRcbiAgICAvLyBhdCBlc3RhYmxpc2hpbmcgYSBjb25uZWN0aW9uXG4gICAgdC5Ici5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHlvKHQsIGUsIG4pIHtcbiAgICBpZiAoXG4gICAgLy8gTWFyayB0aGUgY2xpZW50IGFzIG9ubGluZSBzaW5jZSB3ZSBnb3QgYSBtZXNzYWdlIGZyb20gdGhlIHNlcnZlclxuICAgIHQuSHIuc2V0KFwiT25saW5lXCIgLyogT25saW5lICovKSwgZSBpbnN0YW5jZW9mIHhuICYmIDIgLyogUmVtb3ZlZCAqLyA9PT0gZS5zdGF0ZSAmJiBlLmNhdXNlKSBcbiAgICAvLyBUaGVyZSB3YXMgYW4gZXJyb3Igb24gYSB0YXJnZXQsIGRvbid0IHdhaXQgZm9yIGEgY29uc2lzdGVudCBzbmFwc2hvdFxuICAgIC8vIHRvIHJhaXNlIGV2ZW50c1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IFxuICAgICAgICAvKiogSGFuZGxlcyBhbiBlcnJvciBvbiBhIHRhcmdldCAqL1xuICAgICAgICBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5jYXVzZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBlLnRhcmdldElkcykgXG4gICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICB0LlFyLmhhcyhzKSAmJiAoYXdhaXQgdC5yZW1vdGVTeW5jZXIucmVqZWN0TGlzdGVuKHMsIG4pLCB0LlFyLmRlbGV0ZShzKSwgdC5Kci5yZW1vdmVUYXJnZXQocykpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQXR0ZW1wdHMgdG8gZmlsbCBvdXIgd3JpdGUgcGlwZWxpbmUgd2l0aCB3cml0ZXMgZnJvbSB0aGUgTG9jYWxTdG9yZS5cbiAqXG4gKiBDYWxsZWQgaW50ZXJuYWxseSB0byBib290c3RyYXAgb3IgcmVmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSBhbmQgYnlcbiAqIFN5bmNFbmdpbmUgd2hlbmV2ZXIgdGhlcmUgYXJlIG5ldyBtdXRhdGlvbnMgdG8gcHJvY2Vzcy5cbiAqXG4gKiBTdGFydHMgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXG4gKi8gKHQsIGUpO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgJChcIlJlbW90ZVN0b3JlXCIsIFwiRmFpbGVkIHRvIHJlbW92ZSB0YXJnZXRzICVzOiAlcyBcIiwgZS50YXJnZXRJZHMuam9pbihcIixcIiksIG4pLCBcbiAgICAgICAgYXdhaXQgcG8odCwgbik7XG4gICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgQ24gPyB0LkpyLnJ0KGUpIDogZSBpbnN0YW5jZW9mIE5uID8gdC5Kci5mdChlKSA6IHQuSnIuYXQoZSksIFxuICAgICFuLmlzRXF1YWwocnQubWluKCkpKSB0cnkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgZnIodC5sb2NhbFN0b3JlKTtcbiAgICAgICAgbi5jb21wYXJlVG8oZSkgPj0gMCAmJiBcbiAgICAgICAgLy8gV2UgaGF2ZSByZWNlaXZlZCBhIHRhcmdldCBjaGFuZ2Ugd2l0aCBhIGdsb2JhbCBzbmFwc2hvdCBpZiB0aGUgc25hcHNob3RcbiAgICAgICAgLy8gdmVyc2lvbiBpcyBub3QgZXF1YWwgdG8gU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICAgICAgICBhd2FpdCBcbiAgICAgICAgLyoqXG4gKiBUYWtlcyBhIGJhdGNoIG9mIGNoYW5nZXMgZnJvbSB0aGUgRGF0YXN0b3JlLCByZXBhY2thZ2VzIHRoZW0gYXMgYVxuICogUmVtb3RlRXZlbnQsIGFuZCBwYXNzZXMgdGhhdCBvbiB0byB0aGUgbGlzdGVuZXIsIHdoaWNoIGlzIHR5cGljYWxseSB0aGVcbiAqIFN5bmNFbmdpbmUuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuSnIuX3QoZSk7XG4gICAgICAgICAgICAvLyBVcGRhdGUgaW4tbWVtb3J5IHJlc3VtZSB0b2tlbnMuIExvY2FsU3RvcmUgd2lsbCB1cGRhdGUgdGhlXG4gICAgICAgICAgICAvLyBwZXJzaXN0ZW50IHZpZXcgb2YgdGhlc2Ugd2hlbiBhcHBseWluZyB0aGUgY29tcGxldGVkIFJlbW90ZUV2ZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4udGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChuLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IHQuUXIuZ2V0KHMpO1xuICAgICAgICAgICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAmJiB0LlFyLnNldChzLCBpLndpdGhSZXN1bWVUb2tlbihuLnJlc3VtZVRva2VuLCBlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpLCBcbiAgICAgICAgICAgIC8vIFJlLWVzdGFibGlzaCBsaXN0ZW5zIGZvciB0aGUgdGFyZ2V0cyB0aGF0IGhhdmUgYmVlbiBpbnZhbGlkYXRlZCBieVxuICAgICAgICAgICAgLy8gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAgICAgICAgbi50YXJnZXRNaXNtYXRjaGVzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LlFyLmdldChlKTtcbiAgICAgICAgICAgICAgICBpZiAoIW4pIFxuICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgdGhlIHJlc3VtZSB0b2tlbiBmb3IgdGhlIHRhcmdldCwgc2luY2Ugd2UncmUgaW4gYSBrbm93biBtaXNtYXRjaFxuICAgICAgICAgICAgICAgIC8vIHN0YXRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LlFyLnNldChlLCBuLndpdGhSZXN1bWVUb2tlbihfdC5FTVBUWV9CWVRFX1NUUklORywgbi5zbmFwc2hvdFZlcnNpb24pKSwgXG4gICAgICAgICAgICAgICAgLy8gQ2F1c2UgYSBoYXJkIHJlc2V0IGJ5IHVud2F0Y2hpbmcgYW5kIHJld2F0Y2hpbmcgaW1tZWRpYXRlbHksIGJ1dFxuICAgICAgICAgICAgICAgIC8vIGRlbGliZXJhdGVseSBkb24ndCBzZW5kIGEgcmVzdW1lIHRva2VuIHNvIHRoYXQgd2UgZ2V0IGEgZnVsbCB1cGRhdGUuXG4gICAgICAgICAgICAgICAgaG8odCwgZSk7XG4gICAgICAgICAgICAgICAgLy8gTWFyayB0aGUgdGFyZ2V0IHdlIHNlbmQgYXMgYmVpbmcgb24gYmVoYWxmIG9mIGFuIGV4aXN0ZW5jZSBmaWx0ZXJcbiAgICAgICAgICAgICAgICAvLyBtaXNtYXRjaCwgYnV0IGRvbid0IGFjdHVhbGx5IHJldGFpbiB0aGF0IGluIGxpc3RlblRhcmdldHMuIFRoaXMgZW5zdXJlc1xuICAgICAgICAgICAgICAgIC8vIHRoYXQgd2UgZmxhZyB0aGUgZmlyc3QgcmUtbGlzdGVuIHRoaXMgd2F5IHdpdGhvdXQgaW1wYWN0aW5nIGZ1dHVyZVxuICAgICAgICAgICAgICAgIC8vIGxpc3RlbnMgb2YgdGhpcyB0YXJnZXQgKHRoYXQgbWlnaHQgaGFwcGVuIGUuZy4gb24gcmVjb25uZWN0KS5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IGlpKG4udGFyZ2V0LCBlLCAxIC8qIEV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovICwgbi5zZXF1ZW5jZU51bWJlcik7XG4gICAgICAgICAgICAgICAgdW8odCwgcyk7XG4gICAgICAgICAgICB9KSksIHQucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQobik7XG4gICAgICAgIH0odCwgbik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAkKFwiUmVtb3RlU3RvcmVcIiwgXCJGYWlsZWQgdG8gcmFpc2Ugc25hcHNob3Q6XCIsIGUpLCBhd2FpdCBwbyh0LCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb3ZlcnkgbG9naWMgZm9yIEluZGV4ZWREQiBlcnJvcnMgdGhhdCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsXG4gKiBgb3BgIHN1Y2NlZWRzLiBSZXRyaWVzIGFyZSBzY2hlZHVsZWQgd2l0aCBiYWNrb2ZmIHVzaW5nXG4gKiBgZW5xdWV1ZVJldHJ5YWJsZSgpYC4gSWYgYG9wKClgIGlzIG5vdCBwcm92aWRlZCwgSW5kZXhlZERCIGFjY2VzcyBpc1xuICogdmFsaWRhdGVkIHZpYSBhIGdlbmVyaWMgb3BlcmF0aW9uLlxuICpcbiAqIFRoZSByZXR1cm5lZCBQcm9taXNlIGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIGJlZm9yZVxuICogYW55IHJldHJ5IGF0dGVtcHQuXG4gKi8gYXN5bmMgZnVuY3Rpb24gcG8odCwgZSwgbikge1xuICAgIGlmICghSHMoZSkpIHRocm93IGU7XG4gICAgdC5Xci5hZGQoMSAvKiBJbmRleGVkRGJGYWlsZWQgKi8pLCBcbiAgICAvLyBEaXNhYmxlIG5ldHdvcmsgYW5kIHJhaXNlIG9mZmxpbmUgc25hcHNob3RzXG4gICAgYXdhaXQgb28odCksIHQuSHIuc2V0KFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8pLCBuIHx8IChcbiAgICAvLyBVc2UgYSBzaW1wbGUgcmVhZCBvcGVyYXRpb24gdG8gZGV0ZXJtaW5lIGlmIEluZGV4ZWREQiByZWNvdmVyZWQuXG4gICAgLy8gSWRlYWxseSwgd2Ugd291bGQgZXhwb3NlIGEgaGVhbHRoIGNoZWNrIGRpcmVjdGx5IG9uIFNpbXBsZURiLCBidXRcbiAgICAvLyBSZW1vdGVTdG9yZSBvbmx5IGhhcyBhY2Nlc3MgdG8gcGVyc2lzdGVuY2UgdGhyb3VnaCBMb2NhbFN0b3JlLlxuICAgIG4gPSAoKSA9PiBmcih0LmxvY2FsU3RvcmUpKSwgXG4gICAgLy8gUHJvYmUgSW5kZXhlZERCIHBlcmlvZGljYWxseSBhbmQgcmUtZW5hYmxlIG5ldHdvcmtcbiAgICB0LmFzeW5jUXVldWUuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAkKFwiUmVtb3RlU3RvcmVcIiwgXCJSZXRyeWluZyBJbmRleGVkREIgYWNjZXNzXCIpLCBhd2FpdCBuKCksIHQuV3IuZGVsZXRlKDEgLyogSW5kZXhlZERiRmFpbGVkICovKSwgXG4gICAgICAgIGF3YWl0IHJvKHQpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyBgb3BgLiBJZiBgb3BgIGZhaWxzLCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsIGBvcGBcbiAqIHN1Y2NlZWRzLiBSZXR1cm5zIGFmdGVyIHRoZSBmaXJzdCBhdHRlbXB0LlxuICovIGZ1bmN0aW9uIFRvKHQsIGUpIHtcbiAgICByZXR1cm4gZSgpLmNhdGNoKChuID0+IHBvKHQsIG4sIGUpKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEVvKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KSwgbiA9IE5vKGUpO1xuICAgIGxldCBzID0gZS5qci5sZW5ndGggPiAwID8gZS5qcltlLmpyLmxlbmd0aCAtIDFdLmJhdGNoSWQgOiAtMTtcbiAgICBmb3IgKDtJbyhlKTsgKSB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgX3IoZS5sb2NhbFN0b3JlLCBzKTtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHtcbiAgICAgICAgICAgIDAgPT09IGUuanIubGVuZ3RoICYmIG4ud3IoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHMgPSB0LmJhdGNoSWQsIEFvKGUsIHQpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgcG8oZSwgdCk7XG4gICAgfVxuICAgIFJvKGUpICYmIGJvKGUpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBjYW4gYWRkIHRvIHRoZSB3cml0ZSBwaXBlbGluZSAoaS5lLiB0aGUgbmV0d29yayBpc1xuICogZW5hYmxlZCBhbmQgdGhlIHdyaXRlIHBpcGVsaW5lIGlzIG5vdCBmdWxsKS5cbiAqLyBmdW5jdGlvbiBJbyh0KSB7XG4gICAgcmV0dXJuIHdvKHQpICYmIHQuanIubGVuZ3RoIDwgMTA7XG59XG5cbi8qKlxuICogUXVldWVzIGFkZGl0aW9uYWwgd3JpdGVzIHRvIGJlIHNlbnQgdG8gdGhlIHdyaXRlIHN0cmVhbSwgc2VuZGluZyB0aGVtXG4gKiBpbW1lZGlhdGVseSBpZiB0aGUgd3JpdGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxuICovIGZ1bmN0aW9uIEFvKHQsIGUpIHtcbiAgICB0LmpyLnB1c2goZSk7XG4gICAgY29uc3QgbiA9IE5vKHQpO1xuICAgIG4uaHIoKSAmJiBuLlZyICYmIG4uU3IoZS5tdXRhdGlvbnMpO1xufVxuXG5mdW5jdGlvbiBSbyh0KSB7XG4gICAgcmV0dXJuIHdvKHQpICYmICFObyh0KS51cigpICYmIHQuanIubGVuZ3RoID4gMDtcbn1cblxuZnVuY3Rpb24gYm8odCkge1xuICAgIE5vKHQpLnN0YXJ0KCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFBvKHQpIHtcbiAgICBObyh0KS5OcigpO1xufVxuXG5hc3luYyBmdW5jdGlvbiB2byh0KSB7XG4gICAgY29uc3QgZSA9IE5vKHQpO1xuICAgIC8vIFNlbmQgdGhlIHdyaXRlIHBpcGVsaW5lIG5vdyB0aGF0IHRoZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmpyKSBlLlNyKG4ubXV0YXRpb25zKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gVm8odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSB0LmpyLnNoaWZ0KCksIGkgPSBzaS5mcm9tKHMsIGUsIG4pO1xuICAgIGF3YWl0IFRvKHQsICgoKSA9PiB0LnJlbW90ZVN5bmNlci5hcHBseVN1Y2Nlc3NmdWxXcml0ZShpKSkpLCBcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uIGFub3RoZXJcbiAgICAvLyBzbG90IGhhcyBmcmVlZCB1cC5cbiAgICBhd2FpdCBFbyh0KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gU28odCwgZSkge1xuICAgIC8vIElmIHRoZSB3cml0ZSBzdHJlYW0gY2xvc2VkIGFmdGVyIHRoZSB3cml0ZSBoYW5kc2hha2UgY29tcGxldGVzLCBhIHdyaXRlXG4gICAgLy8gb3BlcmF0aW9uIGZhaWxlZCBhbmQgd2UgZmFpbCB0aGUgcGVuZGluZyBvcGVyYXRpb24uXG4gICAgZSAmJiBObyh0KS5WciAmJiBcbiAgICAvLyBUaGlzIGVycm9yIGFmZmVjdHMgdGhlIGFjdHVhbCB3cml0ZS5cbiAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIE9ubHkgaGFuZGxlIHBlcm1hbmVudCBlcnJvcnMgaGVyZS4gSWYgaXQncyB0cmFuc2llbnQsIGp1c3QgbGV0IHRoZSByZXRyeVxuICAgICAgICAvLyBsb2dpYyBraWNrIGluLlxuICAgICAgICBpZiAobiA9IGUuY29kZSwgZm4obikgJiYgbiAhPT0gSy5BQk9SVEVEKSB7XG4gICAgICAgICAgICAvLyBUaGlzIHdhcyBhIHBlcm1hbmVudCBlcnJvciwgdGhlIHJlcXVlc3QgaXRzZWxmIHdhcyB0aGUgcHJvYmxlbVxuICAgICAgICAgICAgLy8gc28gaXQncyBub3QgZ29pbmcgdG8gc3VjY2VlZCBpZiB3ZSByZXNlbmQgaXQuXG4gICAgICAgICAgICBjb25zdCBuID0gdC5qci5zaGlmdCgpO1xuICAgICAgICAgICAgLy8gSW4gdGhpcyBjYXNlIGl0J3MgYWxzbyB1bmxpa2VseSB0aGF0IHRoZSBzZXJ2ZXIgaXRzZWxmIGlzIG1lbHRpbmdcbiAgICAgICAgICAgIC8vIGRvd24gLS0gdGhpcyB3YXMganVzdCBhIGJhZCByZXF1ZXN0IHNvIGluaGliaXQgYmFja29mZiBvbiB0aGUgbmV4dFxuICAgICAgICAgICAgLy8gcmVzdGFydC5cbiAgICAgICAgICAgICAgICAgICAgICAgIE5vKHQpLmRyKCksIGF3YWl0IFRvKHQsICgoKSA9PiB0LnJlbW90ZVN5bmNlci5yZWplY3RGYWlsZWRXcml0ZShuLmJhdGNoSWQsIGUpKSksIFxuICAgICAgICAgICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHdpdGggdGhlIGNvbXBsZXRpb24gb2YgdGhpcyBtdXRhdGlvblxuICAgICAgICAgICAgLy8gYW5vdGhlciBzbG90IGhhcyBmcmVlZCB1cC5cbiAgICAgICAgICAgIGF3YWl0IEVvKHQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuO1xuICAgIH0odCwgZSksIFxuICAgIC8vIFRoZSB3cml0ZSBzdHJlYW0gbWlnaHQgaGF2ZSBiZWVuIHN0YXJ0ZWQgYnkgcmVmaWxsaW5nIHRoZSB3cml0ZVxuICAgIC8vIHBpcGVsaW5lIGZvciBmYWlsZWQgd3JpdGVzXG4gICAgUm8odCkgJiYgYm8odCk7XG59XG5cbi8qKlxuICogVG9nZ2xlcyB0aGUgbmV0d29yayBzdGF0ZSB3aGVuIHRoZSBjbGllbnQgZ2FpbnMgb3IgbG9zZXMgaXRzIHByaW1hcnkgbGVhc2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIERvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICBlID8gKG4uV3IuZGVsZXRlKDIgLyogSXNTZWNvbmRhcnkgKi8pLCBhd2FpdCBybyhuKSkgOiBlIHx8IChuLldyLmFkZCgyIC8qIElzU2Vjb25kYXJ5ICovKSwgXG4gICAgYXdhaXQgb28obiksIG4uSHIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pKTtcbn1cblxuLyoqXG4gKiBJZiBub3QgeWV0IGluaXRpYWxpemVkLCByZWdpc3RlcnMgdGhlIFdhdGNoU3RyZWFtIGFuZCBpdHMgbmV0d29yayBzdGF0ZVxuICogY2FsbGJhY2sgd2l0aCBgcmVtb3RlU3RvcmVJbXBsYC4gUmV0dXJucyB0aGUgZXhpc3Rpbmcgc3RyZWFtIGlmIG9uZSBpc1xuICogYWxyZWFkeSBhdmFpbGFibGUuXG4gKlxuICogUE9SVElORyBOT1RFOiBPbiBpT1MgYW5kIEFuZHJvaWQsIHRoZSBXYXRjaFN0cmVhbSBnZXRzIHJlZ2lzdGVyZWQgb24gc3RhcnR1cC5cbiAqIFRoaXMgaXMgbm90IGRvbmUgb24gV2ViIHRvIGFsbG93IGl0IHRvIGJlIHRyZWUtc2hha2VuLlxuICovIGZ1bmN0aW9uIENvKHQpIHtcbiAgICByZXR1cm4gdC5ZciB8fCAoXG4gICAgLy8gQ3JlYXRlIHN0cmVhbSAoYnV0IG5vdGUgdGhhdCBpdCBpcyBub3Qgc3RhcnRlZCB5ZXQpLlxuICAgIHQuWXIgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBxKHQpO1xuICAgICAgICByZXR1cm4gcy4kcigpLCBuZXcgdG8oZSwgcy5zciwgcy5jcmVkZW50aWFscywgcy5OLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQuZGF0YXN0b3JlLCB0LmFzeW5jUXVldWUsIHtcbiAgICAgICAgU2k6IG1vLmJpbmQobnVsbCwgdCksXG4gICAgICAgIENpOiBnby5iaW5kKG51bGwsIHQpLFxuICAgICAgICBScjogeW8uYmluZChudWxsLCB0KVxuICAgIH0pLCB0LkdyLnB1c2goKGFzeW5jIGUgPT4ge1xuICAgICAgICBlID8gKHQuWXIuZHIoKSwgZm8odCkgPyBsbyh0KSA6IHQuSHIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pKSA6IChhd2FpdCB0LllyLnN0b3AoKSwgXG4gICAgICAgIF9vKHQpKTtcbiAgICB9KSkpLCB0LllyO1xufVxuXG4vKipcbiAqIElmIG5vdCB5ZXQgaW5pdGlhbGl6ZWQsIHJlZ2lzdGVycyB0aGUgV3JpdGVTdHJlYW0gYW5kIGl0cyBuZXR3b3JrIHN0YXRlXG4gKiBjYWxsYmFjayB3aXRoIGByZW1vdGVTdG9yZUltcGxgLiBSZXR1cm5zIHRoZSBleGlzdGluZyBzdHJlYW0gaWYgb25lIGlzXG4gKiBhbHJlYWR5IGF2YWlsYWJsZS5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IE9uIGlPUyBhbmQgQW5kcm9pZCwgdGhlIFdyaXRlU3RyZWFtIGdldHMgcmVnaXN0ZXJlZCBvbiBzdGFydHVwLlxuICogVGhpcyBpcyBub3QgZG9uZSBvbiBXZWIgdG8gYWxsb3cgaXQgdG8gYmUgdHJlZS1zaGFrZW4uXG4gKi8gZnVuY3Rpb24gTm8odCkge1xuICAgIHJldHVybiB0LlhyIHx8IChcbiAgICAvLyBDcmVhdGUgc3RyZWFtIChidXQgbm90ZSB0aGF0IGl0IGlzIG5vdCBzdGFydGVkIHlldCkuXG4gICAgdC5YciA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHEodCk7XG4gICAgICAgIHJldHVybiBzLiRyKCksIG5ldyBlbyhlLCBzLnNyLCBzLmNyZWRlbnRpYWxzLCBzLk4sIG4pO1xuICAgIH0odC5kYXRhc3RvcmUsIHQuYXN5bmNRdWV1ZSwge1xuICAgICAgICBTaTogUG8uYmluZChudWxsLCB0KSxcbiAgICAgICAgQ2k6IFNvLmJpbmQobnVsbCwgdCksXG4gICAgICAgIENyOiB2by5iaW5kKG51bGwsIHQpLFxuICAgICAgICBEcjogVm8uYmluZChudWxsLCB0KVxuICAgIH0pLCB0LkdyLnB1c2goKGFzeW5jIGUgPT4ge1xuICAgICAgICBlID8gKHQuWHIuZHIoKSwgXG4gICAgICAgIC8vIFRoaXMgd2lsbCBzdGFydCB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cbiAgICAgICAgYXdhaXQgRW8odCkpIDogKGF3YWl0IHQuWHIuc3RvcCgpLCB0LmpyLmxlbmd0aCA+IDAgJiYgKCQoXCJSZW1vdGVTdG9yZVwiLCBgU3RvcHBpbmcgd3JpdGUgc3RyZWFtIHdpdGggJHt0LmpyLmxlbmd0aH0gcGVuZGluZyB3cml0ZXNgKSwgXG4gICAgICAgIHQuanIgPSBbXSkpO1xuICAgIH0pKSksIHQuWHI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gb3BlcmF0aW9uIHNjaGVkdWxlZCB0byBiZSBydW4gaW4gdGhlIGZ1dHVyZSBvbiBhbiBBc3luY1F1ZXVlLlxuICpcbiAqIEl0IGlzIGNyZWF0ZWQgdmlhIERlbGF5ZWRPcGVyYXRpb24uY3JlYXRlQW5kU2NoZWR1bGUoKS5cbiAqXG4gKiBTdXBwb3J0cyBjYW5jZWxsYXRpb24gKHZpYSBjYW5jZWwoKSkgYW5kIGVhcmx5IGV4ZWN1dGlvbiAodmlhIHNraXBEZWxheSgpKS5cbiAqXG4gKiBOb3RlOiBXZSBpbXBsZW1lbnQgYFByb21pc2VMaWtlYCBpbnN0ZWFkIG9mIGBQcm9taXNlYCwgYXMgdGhlIGBQcm9taXNlYCB0eXBlXG4gKiBpbiBuZXdlciB2ZXJzaW9ucyBvZiBUeXBlU2NyaXB0IGRlZmluZXMgYGZpbmFsbHlgLCB3aGljaCBpcyBub3QgYXZhaWxhYmxlIGluXG4gKiBJRS5cbiAqL1xuY2xhc3MgeG8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gdCwgdGhpcy50aW1lcklkID0gZSwgdGhpcy50YXJnZXRUaW1lTXMgPSBuLCB0aGlzLm9wID0gcywgdGhpcy5yZW1vdmFsQ2FsbGJhY2sgPSBpLCBcbiAgICAgICAgdGhpcy5kZWZlcnJlZCA9IG5ldyBRLCB0aGlzLnRoZW4gPSB0aGlzLmRlZmVycmVkLnByb21pc2UudGhlbi5iaW5kKHRoaXMuZGVmZXJyZWQucHJvbWlzZSksIFxuICAgICAgICAvLyBJdCdzIG5vcm1hbCBmb3IgdGhlIGRlZmVycmVkIHByb21pc2UgdG8gYmUgY2FuY2VsZWQgKGR1ZSB0byBjYW5jZWxsYXRpb24pXG4gICAgICAgIC8vIGFuZCBzbyB3ZSBhdHRhY2ggYSBkdW1teSBjYXRjaCBjYWxsYmFjayB0byBhdm9pZFxuICAgICAgICAvLyAnVW5oYW5kbGVkUHJvbWlzZVJlamVjdGlvbldhcm5pbmcnIGxvZyBzcGFtLlxuICAgICAgICB0aGlzLmRlZmVycmVkLnByb21pc2UuY2F0Y2goKHQgPT4ge30pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIERlbGF5ZWRPcGVyYXRpb24gdGhhdCBoYXMgYmVlbiBzY2hlZHVsZWQgdG8gYmVcbiAgICAgKiBleGVjdXRlZCBvbiB0aGUgcHJvdmlkZWQgYXN5bmNRdWV1ZSBhZnRlciB0aGUgcHJvdmlkZWQgZGVsYXlNcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhc3luY1F1ZXVlIC0gVGhlIHF1ZXVlIHRvIHNjaGVkdWxlIHRoZSBvcGVyYXRpb24gb24uXG4gICAgICogQHBhcmFtIGlkIC0gQSBUaW1lciBJRCBpZGVudGlmeWluZyB0aGUgdHlwZSBvZiBvcGVyYXRpb24gdGhpcyBpcy5cbiAgICAgKiBAcGFyYW0gZGVsYXlNcyAtIFRoZSBkZWxheSAobXMpIGJlZm9yZSB0aGUgb3BlcmF0aW9uIHNob3VsZCBiZSBzY2hlZHVsZWQuXG4gICAgICogQHBhcmFtIG9wIC0gVGhlIG9wZXJhdGlvbiB0byBydW4uXG4gICAgICogQHBhcmFtIHJlbW92YWxDYWxsYmFjayAtIEEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIHN5bmNocm9ub3VzbHkgb25jZSB0aGVcbiAgICAgKiAgIG9wZXJhdGlvbiBpcyBleGVjdXRlZCBvciBjYW5jZWxlZCwgbm90aWZ5aW5nIHRoZSBBc3luY1F1ZXVlIHRvIHJlbW92ZSBpdFxuICAgICAqICAgZnJvbSBpdHMgZGVsYXllZE9wZXJhdGlvbnMgbGlzdC5cbiAgICAgKiAgIFBPUlRJTkcgTk9URTogVGhpcyBleGlzdHMgdG8gcHJldmVudCBtYWtpbmcgcmVtb3ZlRGVsYXllZE9wZXJhdGlvbigpIGFuZFxuICAgICAqICAgdGhlIERlbGF5ZWRPcGVyYXRpb24gY2xhc3MgcHVibGljLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlQW5kU2NoZWR1bGUodCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gRGF0ZS5ub3coKSArIG4sIG8gPSBuZXcgeG8odCwgZSwgciwgcywgaSk7XG4gICAgICAgIHJldHVybiBvLnN0YXJ0KG4pLCBvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIHRpbWVyLiBUaGlzIGlzIGNhbGxlZCBpbW1lZGlhdGVseSBhZnRlciBjb25zdHJ1Y3Rpb24gYnlcbiAgICAgKiBjcmVhdGVBbmRTY2hlZHVsZSgpLlxuICAgICAqLyAgICBzdGFydCh0KSB7XG4gICAgICAgIHRoaXMudGltZXJIYW5kbGUgPSBzZXRUaW1lb3V0KCgoKSA9PiB0aGlzLmhhbmRsZURlbGF5RWxhcHNlZCgpKSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFF1ZXVlcyB0aGUgb3BlcmF0aW9uIHRvIHJ1biBpbW1lZGlhdGVseSAoaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBydW4gb3JcbiAgICAgKiBjYW5jZWxlZCkuXG4gICAgICovICAgIHNraXBEZWxheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRGVsYXlFbGFwc2VkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbmNlbHMgdGhlIG9wZXJhdGlvbiBpZiBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIGV4ZWN1dGVkIG9yIGNhbmNlbGVkLiBUaGVcbiAgICAgKiBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQuXG4gICAgICpcbiAgICAgKiBBcyBsb25nIGFzIHRoZSBvcGVyYXRpb24gaGFzIG5vdCB5ZXQgYmVlbiBydW4sIGNhbGxpbmcgY2FuY2VsKCkgcHJvdmlkZXMgYVxuICAgICAqIGd1YXJhbnRlZSB0aGF0IHRoZSBvcGVyYXRpb24gd2lsbCBub3QgYmUgcnVuLlxuICAgICAqLyAgICBjYW5jZWwodCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlICYmICh0aGlzLmNsZWFyVGltZW91dCgpLCB0aGlzLmRlZmVycmVkLnJlamVjdChuZXcgaihLLkNBTkNFTExFRCwgXCJPcGVyYXRpb24gY2FuY2VsbGVkXCIgKyAodCA/IFwiOiBcIiArIHQgOiBcIlwiKSkpKTtcbiAgICB9XG4gICAgaGFuZGxlRGVsYXlFbGFwc2VkKCkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSA/ICh0aGlzLmNsZWFyVGltZW91dCgpLCBcbiAgICAgICAgdGhpcy5vcCgpLnRoZW4oKHQgPT4gdGhpcy5kZWZlcnJlZC5yZXNvbHZlKHQpKSkpIDogUHJvbWlzZS5yZXNvbHZlKCkpKTtcbiAgICB9XG4gICAgY2xlYXJUaW1lb3V0KCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlICYmICh0aGlzLnJlbW92YWxDYWxsYmFjayh0aGlzKSwgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJIYW5kbGUpLCBcbiAgICAgICAgdGhpcy50aW1lckhhbmRsZSA9IG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgRmlyZXN0b3JlRXJyb3IgdGhhdCBjYW4gYmUgc3VyZmFjZWQgdG8gdGhlIHVzZXIgaWYgdGhlIHByb3ZpZGVkXG4gKiBlcnJvciBpcyBhbiBJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yLiBSZS10aHJvd3MgdGhlIGVycm9yIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBrbyh0LCBlKSB7XG4gICAgaWYgKE8oXCJBc3luY1F1ZXVlXCIsIGAke2V9OiAke3R9YCksIEhzKHQpKSByZXR1cm4gbmV3IGooSy5VTkFWQUlMQUJMRSwgYCR7ZX06ICR7dH1gKTtcbiAgICB0aHJvdyB0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEb2N1bWVudFNldCBpcyBhbiBpbW11dGFibGUgKGNvcHktb24td3JpdGUpIGNvbGxlY3Rpb24gdGhhdCBob2xkcyBkb2N1bWVudHNcbiAqIGluIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgY29tcGFyYXRvci4gV2UgYWx3YXlzIGFkZCBhIGRvY3VtZW50IGtleVxuICogY29tcGFyYXRvciBvbiB0b3Agb2Ygd2hhdCBpcyBwcm92aWRlZCB0byBndWFyYW50ZWUgZG9jdW1lbnQgZXF1YWxpdHkgYmFzZWQgb25cbiAqIHRoZSBrZXkuXG4gKi8gY2xhc3MgJG8ge1xuICAgIC8qKiBUaGUgZGVmYXVsdCBvcmRlcmluZyBpcyBieSBrZXkgaWYgdGhlIGNvbXBhcmF0b3IgaXMgb21pdHRlZCAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgLy8gV2UgYXJlIGFkZGluZyBkb2N1bWVudCBrZXkgY29tcGFyYXRvciB0byB0aGUgZW5kIGFzIGl0J3MgdGhlIG9ubHlcbiAgICAgICAgLy8gZ3VhcmFudGVlZCB1bmlxdWUgcHJvcGVydHkgb2YgYSBkb2N1bWVudC5cbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gdCA/IChlLCBuKSA9PiB0KGUsIG4pIHx8IFB0LmNvbXBhcmF0b3IoZS5rZXksIG4ua2V5KSA6ICh0LCBlKSA9PiBQdC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSksIFxuICAgICAgICB0aGlzLmtleWVkTWFwID0gSW4oKSwgdGhpcy5zb3J0ZWRTZXQgPSBuZXcgd24odGhpcy5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBlbXB0eSBjb3B5IG9mIHRoZSBleGlzdGluZyBEb2N1bWVudFNldCwgdXNpbmcgdGhlIHNhbWVcbiAgICAgKiBjb21wYXJhdG9yLlxuICAgICAqLyAgICBzdGF0aWMgZW1wdHlTZXQodCkge1xuICAgICAgICByZXR1cm4gbmV3ICRvKHQuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIGhhcyh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMua2V5ZWRNYXAuZ2V0KHQpO1xuICAgIH1cbiAgICBnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXllZE1hcC5nZXQodCk7XG4gICAgfVxuICAgIGZpcnN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQubWluS2V5KCk7XG4gICAgfVxuICAgIGxhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5tYXhLZXkoKTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0LmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIHByb3ZpZGVkIGtleSBpbiB0aGUgZG9jdW1lbnQgc2V0LCBvciAtMSBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBrZXkgaXMgbm90IHByZXNlbnQgaW4gdGhlIHNldDtcbiAgICAgKi8gICAgaW5kZXhPZih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmtleWVkTWFwLmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgPyB0aGlzLnNvcnRlZFNldC5pbmRleE9mKGUpIDogLTE7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQuc2l6ZTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIGRvY3VtZW50cyBpbiBvcmRlciBkZWZpbmVkIGJ5IFwiY29tcGFyYXRvclwiICovICAgIGZvckVhY2godCkge1xuICAgICAgICB0aGlzLnNvcnRlZFNldC5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQoZSksICExKSkpO1xuICAgIH1cbiAgICAvKiogSW5zZXJ0cyBvciB1cGRhdGVzIGEgZG9jdW1lbnQgd2l0aCB0aGUgc2FtZSBrZXkgKi8gICAgYWRkKHQpIHtcbiAgICAgICAgLy8gRmlyc3QgcmVtb3ZlIHRoZSBlbGVtZW50IGlmIHdlIGhhdmUgaXQuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRlbGV0ZSh0LmtleSk7XG4gICAgICAgIHJldHVybiBlLmNvcHkoZS5rZXllZE1hcC5pbnNlcnQodC5rZXksIHQpLCBlLnNvcnRlZFNldC5pbnNlcnQodCwgbnVsbCkpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyBhIGRvY3VtZW50IHdpdGggYSBnaXZlbiBrZXkgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSA/IHRoaXMuY29weSh0aGlzLmtleWVkTWFwLnJlbW92ZSh0KSwgdGhpcy5zb3J0ZWRTZXQucmVtb3ZlKGUpKSA6IHRoaXM7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgJG8pKSByZXR1cm4gITE7XG4gICAgICAgIGlmICh0aGlzLnNpemUgIT09IHQuc2l6ZSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKSwgbiA9IHQuc29ydGVkU2V0LmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO2UuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmdldE5leHQoKS5rZXksIHMgPSBuLmdldE5leHQoKS5rZXk7XG4gICAgICAgICAgICBpZiAoIXQuaXNFcXVhbChzKSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LnB1c2goZS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpLCAwID09PSB0Lmxlbmd0aCA/IFwiRG9jdW1lbnRTZXQgKClcIiA6IFwiRG9jdW1lbnRTZXQgKFxcbiAgXCIgKyB0LmpvaW4oXCIgIFxcblwiKSArIFwiXFxuKVwiO1xuICAgIH1cbiAgICBjb3B5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyAkbztcbiAgICAgICAgcmV0dXJuIG4uY29tcGFyYXRvciA9IHRoaXMuY29tcGFyYXRvciwgbi5rZXllZE1hcCA9IHQsIG4uc29ydGVkU2V0ID0gZSwgbjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERvY3VtZW50Q2hhbmdlU2V0IGtlZXBzIHRyYWNrIG9mIGEgc2V0IG9mIGNoYW5nZXMgdG8gZG9jcyBpbiBhIHF1ZXJ5LCBtZXJnaW5nXG4gKiBkdXBsaWNhdGUgZXZlbnRzIGZvciB0aGUgc2FtZSBkb2MuXG4gKi8gY2xhc3MgT28ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLlpyID0gbmV3IHduKFB0LmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICB0cmFjayh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRvYy5rZXksIG4gPSB0aGlzLlpyLmdldChlKTtcbiAgICAgICAgbiA/IFxuICAgICAgICAvLyBNZXJnZSB0aGUgbmV3IGNoYW5nZSB3aXRoIHRoZSBleGlzdGluZyBjaGFuZ2UuXG4gICAgICAgIDAgLyogQWRkZWQgKi8gIT09IHQudHlwZSAmJiAzIC8qIE1ldGFkYXRhICovID09PSBuLnR5cGUgPyB0aGlzLlpyID0gdGhpcy5aci5pbnNlcnQoZSwgdCkgOiAzIC8qIE1ldGFkYXRhICovID09PSB0LnR5cGUgJiYgMSAvKiBSZW1vdmVkICovICE9PSBuLnR5cGUgPyB0aGlzLlpyID0gdGhpcy5aci5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogbi50eXBlLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IDIgLyogTW9kaWZpZWQgKi8gPT09IHQudHlwZSAmJiAyIC8qIE1vZGlmaWVkICovID09PSBuLnR5cGUgPyB0aGlzLlpyID0gdGhpcy5aci5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMiAvKiBNb2RpZmllZCAqLyAsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogMiAvKiBNb2RpZmllZCAqLyA9PT0gdC50eXBlICYmIDAgLyogQWRkZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuWnIgPSB0aGlzLlpyLmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAwIC8qIEFkZGVkICovICxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiAxIC8qIFJlbW92ZWQgKi8gPT09IHQudHlwZSAmJiAwIC8qIEFkZGVkICovID09PSBuLnR5cGUgPyB0aGlzLlpyID0gdGhpcy5aci5yZW1vdmUoZSkgOiAxIC8qIFJlbW92ZWQgKi8gPT09IHQudHlwZSAmJiAyIC8qIE1vZGlmaWVkICovID09PSBuLnR5cGUgPyB0aGlzLlpyID0gdGhpcy5aci5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMSAvKiBSZW1vdmVkICovICxcbiAgICAgICAgICAgIGRvYzogbi5kb2NcbiAgICAgICAgfSkgOiAwIC8qIEFkZGVkICovID09PSB0LnR5cGUgJiYgMSAvKiBSZW1vdmVkICovID09PSBuLnR5cGUgPyB0aGlzLlpyID0gdGhpcy5aci5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMiAvKiBNb2RpZmllZCAqLyAsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogXG4gICAgICAgIC8vIFRoaXMgaW5jbHVkZXMgdGhlc2UgY2FzZXMsIHdoaWNoIGRvbid0IG1ha2Ugc2Vuc2U6XG4gICAgICAgIC8vIEFkZGVkLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5SZW1vdmVkXG4gICAgICAgIC8vIE1vZGlmaWVkLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5Nb2RpZmllZFxuICAgICAgICAvLyBNZXRhZGF0YS0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+TWV0YWRhdGFcbiAgICAgICAgTCgpIDogdGhpcy5aciA9IHRoaXMuWnIuaW5zZXJ0KGUsIHQpO1xuICAgIH1cbiAgICBlbygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5aci5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgdC5wdXNoKG4pO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxufVxuXG5jbGFzcyBGbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbywgYykge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy5kb2NzID0gZSwgdGhpcy5vbGREb2NzID0gbiwgdGhpcy5kb2NDaGFuZ2VzID0gcywgdGhpcy5tdXRhdGVkS2V5cyA9IGksIFxuICAgICAgICB0aGlzLmZyb21DYWNoZSA9IHIsIHRoaXMuc3luY1N0YXRlQ2hhbmdlZCA9IG8sIHRoaXMuZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMgPSBjO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHZpZXcgc25hcHNob3QgYXMgaWYgYWxsIGRvY3VtZW50cyBpbiB0aGUgc25hcHNob3Qgd2VyZSBhZGRlZC4gKi8gICAgc3RhdGljIGZyb21Jbml0aWFsRG9jdW1lbnRzKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGkucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogMCAvKiBBZGRlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiB0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpLCBuZXcgRm8odCwgZSwgJG8uZW1wdHlTZXQoZSksIGksIG4sIHMsIFxuICAgICAgICAvKiBzeW5jU3RhdGVDaGFuZ2VkPSAqLyAhMCwgXG4gICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMSk7XG4gICAgfVxuICAgIGdldCBoYXNQZW5kaW5nV3JpdGVzKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMubXV0YXRlZEtleXMuaXNFbXB0eSgpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgaWYgKCEodGhpcy5mcm9tQ2FjaGUgPT09IHQuZnJvbUNhY2hlICYmIHRoaXMuc3luY1N0YXRlQ2hhbmdlZCA9PT0gdC5zeW5jU3RhdGVDaGFuZ2VkICYmIHRoaXMubXV0YXRlZEtleXMuaXNFcXVhbCh0Lm11dGF0ZWRLZXlzKSAmJiBBZSh0aGlzLnF1ZXJ5LCB0LnF1ZXJ5KSAmJiB0aGlzLmRvY3MuaXNFcXVhbCh0LmRvY3MpICYmIHRoaXMub2xkRG9jcy5pc0VxdWFsKHQub2xkRG9jcykpKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRvY0NoYW5nZXMsIG4gPSB0LmRvY0NoYW5nZXM7XG4gICAgICAgIGlmIChlLmxlbmd0aCAhPT0gbi5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBlLmxlbmd0aDsgdCsrKSBpZiAoZVt0XS50eXBlICE9PSBuW3RdLnR5cGUgfHwgIWVbdF0uZG9jLmlzRXF1YWwoblt0XS5kb2MpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhvbGRzIHRoZSBsaXN0ZW5lcnMgYW5kIHRoZSBsYXN0IHJlY2VpdmVkIFZpZXdTbmFwc2hvdCBmb3IgYSBxdWVyeSBiZWluZ1xuICogdHJhY2tlZCBieSBFdmVudE1hbmFnZXIuXG4gKi8gY2xhc3MgTW8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm5vID0gdm9pZCAwLCB0aGlzLmxpc3RlbmVycyA9IFtdO1xuICAgIH1cbn1cblxuY2xhc3MgTG8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnF1ZXJpZXMgPSBuZXcgamkoKHQgPT4gUmUodCkpLCBBZSksIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBVbmtub3duICovICwgXG4gICAgICAgIHRoaXMuc28gPSBuZXcgU2V0O1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gQm8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gZS5xdWVyeTtcbiAgICBsZXQgaSA9ICExLCByID0gbi5xdWVyaWVzLmdldChzKTtcbiAgICBpZiAociB8fCAoaSA9ICEwLCByID0gbmV3IE1vKSwgaSkgdHJ5IHtcbiAgICAgICAgci5ubyA9IGF3YWl0IG4ub25MaXN0ZW4ocyk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBjb25zdCBuID0ga28odCwgYEluaXRpYWxpemF0aW9uIG9mIHF1ZXJ5ICcke2JlKGUucXVlcnkpfScgZmFpbGVkYCk7XG4gICAgICAgIHJldHVybiB2b2lkIGUub25FcnJvcihuKTtcbiAgICB9XG4gICAgaWYgKG4ucXVlcmllcy5zZXQocywgciksIHIubGlzdGVuZXJzLnB1c2goZSksIFxuICAgIC8vIFJ1biBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIGlmIGEgY29uc2lzdGVudCBzbmFwc2hvdCBoYXMgYmVlbiBlbWl0dGVkLlxuICAgIGUuaW8obi5vbmxpbmVTdGF0ZSksIHIubm8pIHtcbiAgICAgICAgZS5ybyhyLm5vKSAmJiBqbyhuKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFVvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KSwgcyA9IGUucXVlcnk7XG4gICAgbGV0IGkgPSAhMTtcbiAgICBjb25zdCByID0gbi5xdWVyaWVzLmdldChzKTtcbiAgICBpZiAocikge1xuICAgICAgICBjb25zdCB0ID0gci5saXN0ZW5lcnMuaW5kZXhPZihlKTtcbiAgICAgICAgdCA+PSAwICYmIChyLmxpc3RlbmVycy5zcGxpY2UodCwgMSksIGkgPSAwID09PSByLmxpc3RlbmVycy5sZW5ndGgpO1xuICAgIH1cbiAgICBpZiAoaSkgcmV0dXJuIG4ucXVlcmllcy5kZWxldGUocyksIG4ub25Vbmxpc3RlbihzKTtcbn1cblxuZnVuY3Rpb24gcW8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIGxldCBzID0gITE7XG4gICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgY29uc3QgZSA9IHQucXVlcnksIGkgPSBuLnF1ZXJpZXMuZ2V0KGUpO1xuICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIGkubGlzdGVuZXJzKSBlLnJvKHQpICYmIChzID0gITApO1xuICAgICAgICAgICAgaS5ubyA9IHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcyAmJiBqbyhuKTtcbn1cblxuZnVuY3Rpb24gS28odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBxKHQpLCBpID0gcy5xdWVyaWVzLmdldChlKTtcbiAgICBpZiAoaSkgZm9yIChjb25zdCB0IG9mIGkubGlzdGVuZXJzKSB0Lm9uRXJyb3Iobik7XG4gICAgLy8gUmVtb3ZlIGFsbCBsaXN0ZW5lcnMuIE5PVEU6IFdlIGRvbid0IG5lZWQgdG8gY2FsbCBzeW5jRW5naW5lLnVubGlzdGVuKClcbiAgICAvLyBhZnRlciBhbiBlcnJvci5cbiAgICAgICAgcy5xdWVyaWVzLmRlbGV0ZShlKTtcbn1cblxuLy8gQ2FsbCBhbGwgZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyB0aGF0IGhhdmUgYmVlbiBzZXQuXG5mdW5jdGlvbiBqbyh0KSB7XG4gICAgdC5zby5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgdC5uZXh0KCk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFF1ZXJ5TGlzdGVuZXIgdGFrZXMgYSBzZXJpZXMgb2YgaW50ZXJuYWwgdmlldyBzbmFwc2hvdHMgYW5kIGRldGVybWluZXNcbiAqIHdoZW4gdG8gcmFpc2UgdGhlIGV2ZW50LlxuICpcbiAqIEl0IHVzZXMgYW4gT2JzZXJ2ZXIgdG8gZGlzcGF0Y2ggZXZlbnRzLlxuICovIGNsYXNzIFFvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSB0LCB0aGlzLm9vID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsIHNuYXBzaG90cyAoZS5nLiBmcm9tIGNhY2hlKSBtYXkgbm90IGJlIHByb3BhZ2F0ZWQgdG8gdGhlIHdyYXBwZWRcbiAgICAgICAgICogb2JzZXJ2ZXIuIFRoaXMgZmxhZyBpcyBzZXQgdG8gdHJ1ZSBvbmNlIHdlJ3ZlIGFjdHVhbGx5IHJhaXNlZCBhbiBldmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY28gPSAhMSwgdGhpcy5hbyA9IG51bGwsIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBVbmtub3duICovICwgdGhpcy5vcHRpb25zID0gbiB8fCB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgbmV3IFZpZXdTbmFwc2hvdCB0byB0aGlzIGxpc3RlbmVyLCByYWlzaW5nIGEgdXNlci1mYWNpbmcgZXZlbnRcbiAgICAgKiBpZiBhcHBsaWNhYmxlIChkZXBlbmRpbmcgb24gd2hhdCBjaGFuZ2VkLCB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBpbnRvXG4gICAgICogbWV0YWRhdGEtb25seSBjaGFuZ2VzLCBldGMuKS4gUmV0dXJucyB0cnVlIGlmIGEgdXNlci1mYWNpbmcgZXZlbnQgd2FzXG4gICAgICogaW5kZWVkIHJhaXNlZC5cbiAgICAgKi8gICAgcm8odCkge1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIG1ldGFkYXRhIG9ubHkgY2hhbmdlcy5cbiAgICAgICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmRvY0NoYW5nZXMpIDMgLyogTWV0YWRhdGEgKi8gIT09IG4udHlwZSAmJiBlLnB1c2gobik7XG4gICAgICAgICAgICB0ID0gbmV3IEZvKHQucXVlcnksIHQuZG9jcywgdC5vbGREb2NzLCBlLCB0Lm11dGF0ZWRLZXlzLCB0LmZyb21DYWNoZSwgdC5zeW5jU3RhdGVDaGFuZ2VkLCBcbiAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY28gPyB0aGlzLnVvKHQpICYmICh0aGlzLm9vLm5leHQodCksIGUgPSAhMCkgOiB0aGlzLmhvKHQsIHRoaXMub25saW5lU3RhdGUpICYmICh0aGlzLmxvKHQpLCBcbiAgICAgICAgZSA9ICEwKSwgdGhpcy5hbyA9IHQsIGU7XG4gICAgfVxuICAgIG9uRXJyb3IodCkge1xuICAgICAgICB0aGlzLm9vLmVycm9yKHQpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB3aGV0aGVyIGEgc25hcHNob3Qgd2FzIHJhaXNlZC4gKi8gICAgaW8odCkge1xuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gdDtcbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW8gJiYgIXRoaXMuY28gJiYgdGhpcy5obyh0aGlzLmFvLCB0KSAmJiAodGhpcy5sbyh0aGlzLmFvKSwgZSA9ICEwKSwgXG4gICAgICAgIGU7XG4gICAgfVxuICAgIGhvKHQsIGUpIHtcbiAgICAgICAgLy8gQWx3YXlzIHJhaXNlIHRoZSBmaXJzdCBldmVudCB3aGVuIHdlJ3JlIHN5bmNlZFxuICAgICAgICBpZiAoIXQuZnJvbUNhY2hlKSByZXR1cm4gITA7XG4gICAgICAgIC8vIE5PVEU6IFdlIGNvbnNpZGVyIE9ubGluZVN0YXRlLlVua25vd24gYXMgb25saW5lIChpdCBzaG91bGQgYmVjb21lIE9mZmxpbmVcbiAgICAgICAgLy8gb3IgT25saW5lIGlmIHdlIHdhaXQgbG9uZyBlbm91Z2gpLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovICE9PSBlO1xuICAgICAgICAvLyBEb24ndCByYWlzZSB0aGUgZXZlbnQgaWYgd2UncmUgb25saW5lLCBhcmVuJ3Qgc3luY2VkIHlldCAoY2hlY2tlZFxuICAgICAgICAvLyBhYm92ZSkgYW5kIGFyZSB3YWl0aW5nIGZvciBhIHN5bmMuXG4gICAgICAgICAgICAgICAgcmV0dXJuICghdGhpcy5vcHRpb25zLmZvIHx8ICFuKSAmJiAoIXQuZG9jcy5pc0VtcHR5KCkgfHwgXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyA9PT0gZSk7XG4gICAgICAgIC8vIFJhaXNlIGRhdGEgZnJvbSBjYWNoZSBpZiB3ZSBoYXZlIGFueSBkb2N1bWVudHMgb3Igd2UgYXJlIG9mZmxpbmVcbiAgICAgICAgfVxuICAgIHVvKHQpIHtcbiAgICAgICAgLy8gV2UgZG9uJ3QgbmVlZCB0byBoYW5kbGUgaW5jbHVkZURvY3VtZW50TWV0YWRhdGFDaGFuZ2VzIGhlcmUgYmVjYXVzZVxuICAgICAgICAvLyB0aGUgTWV0YWRhdGEgb25seSBjaGFuZ2VzIGhhdmUgYWxyZWFkeSBiZWVuIHN0cmlwcGVkIG91dCBpZiBuZWVkZWQuXG4gICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgdGhlIG9ubHkgY2hhbmdlcyB3ZSB3aWxsIHNlZSBhcmUgdGhlIG9uZXMgd2Ugc2hvdWxkXG4gICAgICAgIC8vIHByb3BhZ2F0ZS5cbiAgICAgICAgaWYgKHQuZG9jQ2hhbmdlcy5sZW5ndGggPiAwKSByZXR1cm4gITA7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmFvICYmIHRoaXMuYW8uaGFzUGVuZGluZ1dyaXRlcyAhPT0gdC5oYXNQZW5kaW5nV3JpdGVzO1xuICAgICAgICByZXR1cm4gISghdC5zeW5jU3RhdGVDaGFuZ2VkICYmICFlKSAmJiAhMCA9PT0gdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXM7XG4gICAgICAgIC8vIEdlbmVyYWxseSB3ZSBzaG91bGQgaGF2ZSBoaXQgb25lIG9mIHRoZSBjYXNlcyBhYm92ZSwgYnV0IGl0J3MgcG9zc2libGVcbiAgICAgICAgLy8gdG8gZ2V0IGhlcmUgaWYgdGhlcmUgd2VyZSBvbmx5IG1ldGFkYXRhIGRvY0NoYW5nZXMgYW5kIHRoZXkgZ290XG4gICAgICAgIC8vIHN0cmlwcGVkIG91dC5cbiAgICAgICAgfVxuICAgIGxvKHQpIHtcbiAgICAgICAgdCA9IEZvLmZyb21Jbml0aWFsRG9jdW1lbnRzKHQucXVlcnksIHQuZG9jcywgdC5tdXRhdGVkS2V5cywgdC5mcm9tQ2FjaGUpLCB0aGlzLmNvID0gITAsIFxuICAgICAgICB0aGlzLm9vLm5leHQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNvbXBsZXRlIGVsZW1lbnQgaW4gdGhlIGJ1bmRsZSBzdHJlYW0sIHRvZ2V0aGVyIHdpdGggdGhlIGJ5dGUgbGVuZ3RoIGl0XG4gKiBvY2N1cGllcyBpbiB0aGUgc3RyZWFtLlxuICovIGNsYXNzIFdvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvLyBIb3cgbWFueSBieXRlcyB0aGlzIGVsZW1lbnQgdGFrZXMgdG8gc3RvcmUgaW4gdGhlIGJ1bmRsZS5cbiAgICBlKSB7XG4gICAgICAgIHRoaXMucGF5bG9hZCA9IHQsIHRoaXMuYnl0ZUxlbmd0aCA9IGU7XG4gICAgfVxuICAgIHdvKCkge1xuICAgICAgICByZXR1cm4gXCJtZXRhZGF0YVwiIGluIHRoaXMucGF5bG9hZDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhlbHBlciB0byBjb252ZXJ0IG9iamVjdHMgZnJvbSBidW5kbGVzIHRvIG1vZGVsIG9iamVjdHMgaW4gdGhlIFNESy5cbiAqLyBjbGFzcyBHbyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLk4gPSB0O1xuICAgIH1cbiAgICB6bih0KSB7XG4gICAgICAgIHJldHVybiB6bih0aGlzLk4sIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIEJ1bmRsZURvY3VtZW50IHRvIGEgTXV0YWJsZURvY3VtZW50LlxuICAgICAqLyAgICBIbih0KSB7XG4gICAgICAgIHJldHVybiB0Lm1ldGFkYXRhLmV4aXN0cyA/IHRzKHRoaXMuTiwgdC5kb2N1bWVudCwgITEpIDogS3QubmV3Tm9Eb2N1bWVudCh0aGlzLnpuKHQubWV0YWRhdGEubmFtZSksIHRoaXMuSm4odC5tZXRhZGF0YS5yZWFkVGltZSkpO1xuICAgIH1cbiAgICBKbih0KSB7XG4gICAgICAgIHJldHVybiBqbih0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBjbGFzcyB0byBwcm9jZXNzIHRoZSBlbGVtZW50cyBmcm9tIGEgYnVuZGxlLCBsb2FkIHRoZW0gaW50byBsb2NhbFxuICogc3RvcmFnZSBhbmQgcHJvdmlkZSBwcm9ncmVzcyB1cGRhdGUgd2hpbGUgbG9hZGluZy5cbiAqLyBjbGFzcyB6byB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLl9vID0gdCwgdGhpcy5sb2NhbFN0b3JlID0gZSwgdGhpcy5OID0gbiwgXG4gICAgICAgIC8qKiBCYXRjaGVkIHF1ZXJpZXMgdG8gYmUgc2F2ZWQgaW50byBzdG9yYWdlICovXG4gICAgICAgIHRoaXMucXVlcmllcyA9IFtdLCBcbiAgICAgICAgLyoqIEJhdGNoZWQgZG9jdW1lbnRzIHRvIGJlIHNhdmVkIGludG8gc3RvcmFnZSAqL1xuICAgICAgICB0aGlzLmRvY3VtZW50cyA9IFtdLCB0aGlzLnByb2dyZXNzID0gSG8odCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYW4gZWxlbWVudCBmcm9tIHRoZSBidW5kbGUgdG8gdGhlIGxvYWRlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBuZXcgcHJvZ3Jlc3MgaWYgYWRkaW5nIHRoZSBlbGVtZW50IGxlYWRzIHRvIGEgbmV3IHByb2dyZXNzLFxuICAgICAqIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXG4gICAgICovICAgIG1vKHQpIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzcy5ieXRlc0xvYWRlZCArPSB0LmJ5dGVMZW5ndGg7XG4gICAgICAgIGxldCBlID0gdGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQ7XG4gICAgICAgIHJldHVybiB0LnBheWxvYWQubmFtZWRRdWVyeSA/IHRoaXMucXVlcmllcy5wdXNoKHQucGF5bG9hZC5uYW1lZFF1ZXJ5KSA6IHQucGF5bG9hZC5kb2N1bWVudE1ldGFkYXRhID8gKHRoaXMuZG9jdW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgbWV0YWRhdGE6IHQucGF5bG9hZC5kb2N1bWVudE1ldGFkYXRhXG4gICAgICAgIH0pLCB0LnBheWxvYWQuZG9jdW1lbnRNZXRhZGF0YS5leGlzdHMgfHwgKytlKSA6IHQucGF5bG9hZC5kb2N1bWVudCAmJiAodGhpcy5kb2N1bWVudHNbdGhpcy5kb2N1bWVudHMubGVuZ3RoIC0gMV0uZG9jdW1lbnQgPSB0LnBheWxvYWQuZG9jdW1lbnQsIFxuICAgICAgICArK2UpLCBlICE9PSB0aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZCA/ICh0aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZCA9IGUsIFxuICAgICAgICBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByb2dyZXNzKSkgOiBudWxsO1xuICAgIH1cbiAgICB5byh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgTWFwLCBuID0gbmV3IEdvKHRoaXMuTik7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiB0KSBpZiAocy5tZXRhZGF0YS5xdWVyaWVzKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbi56bihzLm1ldGFkYXRhLm5hbWUpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHMubWV0YWRhdGEucXVlcmllcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSAoZS5nZXQobikgfHwgUG4oKSkuYWRkKHQpO1xuICAgICAgICAgICAgICAgIGUuc2V0KG4sIHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHByb2dyZXNzIHRvICdTdWNjZXNzJyBhbmQgcmV0dXJuIHRoZSB1cGRhdGVkIHByb2dyZXNzLlxuICAgICAqLyAgICBhc3luYyBjb21wbGV0ZSgpIHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IElyKHRoaXMubG9jYWxTdG9yZSwgbmV3IEdvKHRoaXMuTiksIHRoaXMuZG9jdW1lbnRzLCB0aGlzLl9vLmlkKSwgZSA9IHRoaXMueW8odGhpcy5kb2N1bWVudHMpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5xdWVyaWVzKSBhd2FpdCBBcih0aGlzLmxvY2FsU3RvcmUsIHQsIGUuZ2V0KHQubmFtZSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9ncmVzcy50YXNrU3RhdGUgPSBcIlN1Y2Nlc3NcIiwgbmV3IGlyKE9iamVjdC5hc3NpZ24oe30sIHRoaXMucHJvZ3Jlc3MpLCB0KTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCByZXByZXNlbnRpbmcgdGhlIGluaXRpYWwgcHJvZ3Jlc3Mgb2ZcbiAqIGxvYWRpbmcgYSBidW5kbGUuXG4gKi8gZnVuY3Rpb24gSG8odCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRhc2tTdGF0ZTogXCJSdW5uaW5nXCIsXG4gICAgICAgIGRvY3VtZW50c0xvYWRlZDogMCxcbiAgICAgICAgYnl0ZXNMb2FkZWQ6IDAsXG4gICAgICAgIHRvdGFsRG9jdW1lbnRzOiB0LnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICB0b3RhbEJ5dGVzOiB0LnRvdGFsQnl0ZXNcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyB0aGF0IHRoZSBsb2FkaW5nXG4gKiBoYXMgc3VjY2VlZGVkLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgSm8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0O1xuICAgIH1cbn1cblxuY2xhc3MgWW8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBWaWV3IGlzIHJlc3BvbnNpYmxlIGZvciBjb21wdXRpbmcgdGhlIGZpbmFsIG1lcmdlZCB0cnV0aCBvZiB3aGF0IGRvY3MgYXJlIGluXG4gKiBhIHF1ZXJ5LiBJdCBnZXRzIG5vdGlmaWVkIG9mIGxvY2FsIGFuZCByZW1vdGUgY2hhbmdlcyB0byBkb2NzLCBhbmQgYXBwbGllc1xuICogdGhlIHF1ZXJ5IGZpbHRlcnMgYW5kIGxpbWl0cyB0byBkZXRlcm1pbmUgdGhlIG1vc3QgY29ycmVjdCBwb3NzaWJsZSByZXN1bHRzLlxuICovIGNsYXNzIFhvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKiogRG9jdW1lbnRzIGluY2x1ZGVkIGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy5wbyA9IGUsIHRoaXMuVG8gPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmxhZyB3aGV0aGVyIHRoZSB2aWV3IGlzIGN1cnJlbnQgd2l0aCB0aGUgYmFja2VuZC4gQSB2aWV3IGlzIGNvbnNpZGVyZWRcbiAgICAgICAgICogY3VycmVudCBhZnRlciBpdCBoYXMgc2VlbiB0aGUgY3VycmVudCBmbGFnIGZyb20gdGhlIGJhY2tlbmQgYW5kIGRpZCBub3RcbiAgICAgICAgICogbG9zZSBjb25zaXN0ZW5jeSB3aXRoaW4gdGhlIHdhdGNoIHN0cmVhbSAoZS5nLiBiZWNhdXNlIG9mIGFuIGV4aXN0ZW5jZVxuICAgICAgICAgKiBmaWx0ZXIgbWlzbWF0Y2gpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gITEsIFxuICAgICAgICAvKiogRG9jdW1lbnRzIGluIHRoZSB2aWV3IGJ1dCBub3QgaW4gdGhlIHJlbW90ZSB0YXJnZXQgKi9cbiAgICAgICAgdGhpcy5FbyA9IFBuKCksIFxuICAgICAgICAvKiogRG9jdW1lbnQgS2V5cyB0aGF0IGhhdmUgbG9jYWwgY2hhbmdlcyAqL1xuICAgICAgICB0aGlzLm11dGF0ZWRLZXlzID0gUG4oKSwgdGhpcy5JbyA9IHZlKHQpLCB0aGlzLkFvID0gbmV3ICRvKHRoaXMuSW8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIHJlbW90ZSBkb2N1bWVudHMgdGhhdCB0aGUgc2VydmVyIGhhcyB0b2xkIHVzIGJlbG9uZ3MgdG8gdGhlIHRhcmdldCBhc3NvY2lhdGVkIHdpdGhcbiAgICAgKiB0aGlzIHZpZXcuXG4gICAgICovICAgIGdldCBSbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYSBzZXQgb2YgZG9jIGNoYW5nZXMsIGFwcGxpZXMgdGhlIHF1ZXJ5IGxpbWl0LCBhbmQgY29tcHV0ZXNcbiAgICAgKiB3aGF0IHRoZSBuZXcgcmVzdWx0cyBzaG91bGQgYmUsIHdoYXQgdGhlIGNoYW5nZXMgd2VyZSwgYW5kIHdoZXRoZXIgd2UgbWF5XG4gICAgICogbmVlZCB0byBnbyBiYWNrIHRvIHRoZSBsb2NhbCBjYWNoZSBmb3IgbW9yZSByZXN1bHRzLiBEb2VzIG5vdCBtYWtlIGFueVxuICAgICAqIGNoYW5nZXMgdG8gdGhlIHZpZXcuXG4gICAgICogQHBhcmFtIGRvY0NoYW5nZXMgLSBUaGUgZG9jIGNoYW5nZXMgdG8gYXBwbHkgdG8gdGhpcyB2aWV3LlxuICAgICAqIEBwYXJhbSBwcmV2aW91c0NoYW5nZXMgLSBJZiB0aGlzIGlzIGJlaW5nIGNhbGxlZCB3aXRoIGEgcmVmaWxsLCB0aGVuIHN0YXJ0XG4gICAgICogICAgICAgIHdpdGggdGhpcyBzZXQgb2YgZG9jcyBhbmQgY2hhbmdlcyBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHZpZXcuXG4gICAgICogQHJldHVybnMgYSBuZXcgc2V0IG9mIGRvY3MsIGNoYW5nZXMsIGFuZCByZWZpbGwgZmxhZy5cbiAgICAgKi8gICAgYm8odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZSA/IGUuUG8gOiBuZXcgT28sIHMgPSBlID8gZS5BbyA6IHRoaXMuQW87XG4gICAgICAgIGxldCBpID0gZSA/IGUubXV0YXRlZEtleXMgOiB0aGlzLm11dGF0ZWRLZXlzLCByID0gcywgbyA9ICExO1xuICAgICAgICAvLyBUcmFjayB0aGUgbGFzdCBkb2MgaW4gYSAoZnVsbCkgbGltaXQuIFRoaXMgaXMgbmVjZXNzYXJ5LCBiZWNhdXNlIHNvbWVcbiAgICAgICAgLy8gdXBkYXRlIChhIGRlbGV0ZSwgb3IgYW4gdXBkYXRlIG1vdmluZyBhIGRvYyBwYXN0IHRoZSBvbGQgbGltaXQpIG1pZ2h0XG4gICAgICAgIC8vIG1lYW4gdGhlcmUgaXMgc29tZSBvdGhlciBkb2N1bWVudCBpbiB0aGUgbG9jYWwgY2FjaGUgdGhhdCBlaXRoZXIgc2hvdWxkXG4gICAgICAgIC8vIGNvbWUgKDEpIGJldHdlZW4gdGhlIG9sZCBsYXN0IGxpbWl0IGRvYyBhbmQgdGhlIG5ldyBsYXN0IGRvY3VtZW50LCBpbiB0aGVcbiAgICAgICAgLy8gY2FzZSBvZiB1cGRhdGVzLCBvciAoMikgYWZ0ZXIgdGhlIG5ldyBsYXN0IGRvY3VtZW50LCBpbiB0aGUgY2FzZSBvZlxuICAgICAgICAvLyBkZWxldGVzLiBTbyB3ZSBrZWVwIHRoaXMgZG9jIGF0IHRoZSBvbGQgbGltaXQgdG8gY29tcGFyZSB0aGUgdXBkYXRlcyB0by5cbiAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgc2hvdWxkIG5ldmVyIGdldCB1c2VkIGluIGEgcmVmaWxsICh3aGVuIHByZXZpb3VzQ2hhbmdlcyBpc1xuICAgICAgICAvLyBzZXQpLCBiZWNhdXNlIHRoZXJlIHdpbGwgb25seSBiZSBhZGRzIC0tIG5vIGRlbGV0ZXMgb3IgdXBkYXRlcy5cbiAgICAgICAgY29uc3QgYyA9IF9lKHRoaXMucXVlcnkpICYmIHMuc2l6ZSA9PT0gdGhpcy5xdWVyeS5saW1pdCA/IHMubGFzdCgpIDogbnVsbCwgYSA9IG1lKHRoaXMucXVlcnkpICYmIHMuc2l6ZSA9PT0gdGhpcy5xdWVyeS5saW1pdCA/IHMuZmlyc3QoKSA6IG51bGw7XG4gICAgICAgIC8vIERyb3AgZG9jdW1lbnRzIG91dCB0byBtZWV0IGxpbWl0L2xpbWl0VG9MYXN0IHJlcXVpcmVtZW50LlxuICAgICAgICBpZiAodC5pbm9yZGVyVHJhdmVyc2FsKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdSA9IHMuZ2V0KHQpLCBoID0gUGUodGhpcy5xdWVyeSwgZSkgPyBlIDogbnVsbCwgbCA9ICEhdSAmJiB0aGlzLm11dGF0ZWRLZXlzLmhhcyh1LmtleSksIGYgPSAhIWggJiYgKGguaGFzTG9jYWxNdXRhdGlvbnMgfHwgXG4gICAgICAgICAgICAvLyBXZSBvbmx5IGNvbnNpZGVyIGNvbW1pdHRlZCBtdXRhdGlvbnMgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmVcbiAgICAgICAgICAgIC8vIG11dGF0ZWQgZHVyaW5nIHRoZSBsaWZldGltZSBvZiB0aGUgdmlldy5cbiAgICAgICAgICAgIHRoaXMubXV0YXRlZEtleXMuaGFzKGgua2V5KSAmJiBoLmhhc0NvbW1pdHRlZE11dGF0aW9ucyk7XG4gICAgICAgICAgICBsZXQgZCA9ICExO1xuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHUgJiYgaCkge1xuICAgICAgICAgICAgICAgIHUuZGF0YS5pc0VxdWFsKGguZGF0YSkgPyBsICE9PSBmICYmIChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogMyAvKiBNZXRhZGF0YSAqLyAsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogaFxuICAgICAgICAgICAgICAgIH0pLCBkID0gITApIDogdGhpcy52byh1LCBoKSB8fCAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDIgLyogTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgICAgICAgICBkb2M6IGhcbiAgICAgICAgICAgICAgICB9KSwgZCA9ICEwLCAoYyAmJiB0aGlzLklvKGgsIGMpID4gMCB8fCBhICYmIHRoaXMuSW8oaCwgYSkgPCAwKSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBkb2MgbW92ZWQgZnJvbSBpbnNpZGUgdGhlIGxpbWl0IHRvIG91dHNpZGUgdGhlIGxpbWl0LlxuICAgICAgICAgICAgICAgIC8vIFRoYXQgbWVhbnMgdGhlcmUgbWF5IGJlIHNvbWUgb3RoZXIgZG9jIGluIHRoZSBsb2NhbCBjYWNoZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgc2hvdWxkIGJlIGluY2x1ZGVkIGluc3RlYWQuXG4gICAgICAgICAgICAgICAgbyA9ICEwKSk7XG4gICAgICAgICAgICB9IGVsc2UgIXUgJiYgaCA/IChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIEFkZGVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IGhcbiAgICAgICAgICAgIH0pLCBkID0gITApIDogdSAmJiAhaCAmJiAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMSAvKiBSZW1vdmVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IHVcbiAgICAgICAgICAgIH0pLCBkID0gITAsIChjIHx8IGEpICYmIChcbiAgICAgICAgICAgIC8vIEEgZG9jIHdhcyByZW1vdmVkIGZyb20gYSBmdWxsIGxpbWl0IHF1ZXJ5LiBXZSdsbCBuZWVkIHRvXG4gICAgICAgICAgICAvLyByZXF1ZXJ5IGZyb20gdGhlIGxvY2FsIGNhY2hlIHRvIHNlZSBpZiB3ZSBrbm93IGFib3V0IHNvbWUgb3RoZXJcbiAgICAgICAgICAgIC8vIGRvYyB0aGF0IHNob3VsZCBiZSBpbiB0aGUgcmVzdWx0cy5cbiAgICAgICAgICAgIG8gPSAhMCkpO1xuICAgICAgICAgICAgZCAmJiAoaCA/IChyID0gci5hZGQoaCksIGkgPSBmID8gaS5hZGQodCkgOiBpLmRlbGV0ZSh0KSkgOiAociA9IHIuZGVsZXRlKHQpLCBpID0gaS5kZWxldGUodCkpKTtcbiAgICAgICAgfSkpLCBfZSh0aGlzLnF1ZXJ5KSB8fCBtZSh0aGlzLnF1ZXJ5KSkgZm9yICg7ci5zaXplID4gdGhpcy5xdWVyeS5saW1pdDsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX2UodGhpcy5xdWVyeSkgPyByLmxhc3QoKSA6IHIuZmlyc3QoKTtcbiAgICAgICAgICAgIHIgPSByLmRlbGV0ZSh0LmtleSksIGkgPSBpLmRlbGV0ZSh0LmtleSksIG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiB0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgQW86IHIsXG4gICAgICAgICAgICBQbzogbixcbiAgICAgICAgICAgIExuOiBvLFxuICAgICAgICAgICAgbXV0YXRlZEtleXM6IGlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdm8odCwgZSkge1xuICAgICAgICAvLyBXZSBzdXBwcmVzcyB0aGUgaW5pdGlhbCBjaGFuZ2UgZXZlbnQgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmUgbW9kaWZpZWQgYXNcbiAgICAgICAgLy8gcGFydCBvZiBhIHdyaXRlIGFja25vd2xlZGdtZW50IChlLmcuIHdoZW4gdGhlIHZhbHVlIG9mIGEgc2VydmVyIHRyYW5zZm9ybVxuICAgICAgICAvLyBpcyBhcHBsaWVkKSBhcyBXYXRjaCB3aWxsIHNlbmQgdXMgdGhlIHNhbWUgZG9jdW1lbnQgYWdhaW4uXG4gICAgICAgIC8vIEJ5IHN1cHByZXNzaW5nIHRoZSBldmVudCwgd2Ugb25seSByYWlzZSB0d28gdXNlciB2aXNpYmxlIGV2ZW50cyAob25lIHdpdGhcbiAgICAgICAgLy8gYGhhc1BlbmRpbmdXcml0ZXNgIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50KSBpbnN0ZWFkIG9mIHRocmVlXG4gICAgICAgIC8vIChvbmUgd2l0aCBgaGFzUGVuZGluZ1dyaXRlc2AsIHRoZSBtb2RpZmllZCBkb2N1bWVudCB3aXRoXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkuXG4gICAgICAgIHJldHVybiB0Lmhhc0xvY2FsTXV0YXRpb25zICYmIGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zICYmICFlLmhhc0xvY2FsTXV0YXRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSB2aWV3IHdpdGggdGhlIGdpdmVuIFZpZXdEb2N1bWVudENoYW5nZXMgYW5kIG9wdGlvbmFsbHkgdXBkYXRlc1xuICAgICAqIGxpbWJvIGRvY3MgYW5kIHN5bmMgc3RhdGUgZnJvbSB0aGUgcHJvdmlkZWQgdGFyZ2V0IGNoYW5nZS5cbiAgICAgKiBAcGFyYW0gZG9jQ2hhbmdlcyAtIFRoZSBzZXQgb2YgY2hhbmdlcyB0byBtYWtlIHRvIHRoZSB2aWV3J3MgZG9jcy5cbiAgICAgKiBAcGFyYW0gdXBkYXRlTGltYm9Eb2N1bWVudHMgLSBXaGV0aGVyIHRvIHVwZGF0ZSBsaW1ibyBkb2N1bWVudHMgYmFzZWQgb25cbiAgICAgKiAgICAgICAgdGhpcyBjaGFuZ2UuXG4gICAgICogQHBhcmFtIHRhcmdldENoYW5nZSAtIEEgdGFyZ2V0IGNoYW5nZSB0byBhcHBseSBmb3IgY29tcHV0aW5nIGxpbWJvIGRvY3MgYW5kXG4gICAgICogICAgICAgIHN5bmMgc3RhdGUuXG4gICAgICogQHJldHVybnMgQSBuZXcgVmlld0NoYW5nZSB3aXRoIHRoZSBnaXZlbiBkb2NzLCBjaGFuZ2VzLCBhbmQgc3luYyBzdGF0ZS5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSBpT1MvQW5kcm9pZCBjbGllbnRzIGFsd2F5cyBjb21wdXRlIGxpbWJvIGRvY3VtZW50IGNoYW5nZXMuXG4gICAgYXBwbHlDaGFuZ2VzKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuQW87XG4gICAgICAgIHRoaXMuQW8gPSB0LkFvLCB0aGlzLm11dGF0ZWRLZXlzID0gdC5tdXRhdGVkS2V5cztcbiAgICAgICAgLy8gU29ydCBjaGFuZ2VzIGJhc2VkIG9uIHR5cGUgYW5kIHF1ZXJ5IGNvbXBhcmF0b3JcbiAgICAgICAgY29uc3QgaSA9IHQuUG8uZW8oKTtcbiAgICAgICAgaS5zb3J0KCgodCwgZSkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICAgICAgY2FzZSAwIC8qIEFkZGVkICovIDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMiAvKiBNb2RpZmllZCAqLyA6XG4gICAgICAgICAgICAgICAgICBjYXNlIDMgLyogTWV0YWRhdGEgKi8gOlxuICAgICAgICAgICAgICAgICAgICAvLyBBIG1ldGFkYXRhIGNoYW5nZSBpcyBjb252ZXJ0ZWQgdG8gYSBtb2RpZmllZCBjaGFuZ2UgYXQgdGhlIHB1YmxpY1xuICAgICAgICAgICAgICAgICAgICAvLyBhcGkgbGF5ZXIuICBTaW5jZSB3ZSBzb3J0IGJ5IGRvY3VtZW50IGtleSBhbmQgdGhlbiBjaGFuZ2UgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gbWV0YWRhdGEgYW5kIG1vZGlmaWVkIGNoYW5nZXMgbXVzdCBiZSBzb3J0ZWQgZXF1aXZhbGVudGx5LlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAxIC8qIFJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcblxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG4odCkgLSBuKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0LnR5cGUsIGUudHlwZSkgfHwgdGhpcy5Jbyh0LmRvYywgZS5kb2MpKSksIHRoaXMuVm8obik7XG4gICAgICAgIGNvbnN0IHIgPSBlID8gdGhpcy5TbygpIDogW10sIG8gPSAwID09PSB0aGlzLkVvLnNpemUgJiYgdGhpcy5jdXJyZW50ID8gMSAvKiBTeW5jZWQgKi8gOiAwIC8qIExvY2FsICovICwgYyA9IG8gIT09IHRoaXMuVG87XG4gICAgICAgIGlmICh0aGlzLlRvID0gbywgMCAhPT0gaS5sZW5ndGggfHwgYykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzbmFwc2hvdDogbmV3IEZvKHRoaXMucXVlcnksIHQuQW8sIHMsIGksIHQubXV0YXRlZEtleXMsIDAgLyogTG9jYWwgKi8gPT09IG8sIGMsIFxuICAgICAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMSksXG4gICAgICAgICAgICAgICAgRG86IHJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm8gY2hhbmdlc1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgRG86IHJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHZpZXcsIHBvdGVudGlhbGx5IGdlbmVyYXRpbmcgYVxuICAgICAqIFZpZXdDaGFuZ2UgaWYgdGhlIHZpZXcncyBzeW5jU3RhdGUgY2hhbmdlcyBhcyBhIHJlc3VsdC5cbiAgICAgKi8gICAgaW8odCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50ICYmIFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8gPT09IHQgPyAoXG4gICAgICAgIC8vIElmIHdlJ3JlIG9mZmxpbmUsIHNldCBgY3VycmVudGAgdG8gZmFsc2UgYW5kIHRoZW4gY2FsbCBhcHBseUNoYW5nZXMoKVxuICAgICAgICAvLyB0byByZWZyZXNoIG91ciBzeW5jU3RhdGUgYW5kIGdlbmVyYXRlIGEgVmlld0NoYW5nZSBhcyBhcHByb3ByaWF0ZS4gV2VcbiAgICAgICAgLy8gYXJlIGd1YXJhbnRlZWQgdG8gZ2V0IGEgbmV3IFRhcmdldENoYW5nZSB0aGF0IHNldHMgYGN1cnJlbnRgIGJhY2sgdG9cbiAgICAgICAgLy8gdHJ1ZSBvbmNlIHRoZSBjbGllbnQgaXMgYmFjayBvbmxpbmUuXG4gICAgICAgIHRoaXMuY3VycmVudCA9ICExLCB0aGlzLmFwcGx5Q2hhbmdlcyh7XG4gICAgICAgICAgICBBbzogdGhpcy5BbyxcbiAgICAgICAgICAgIFBvOiBuZXcgT28sXG4gICAgICAgICAgICBtdXRhdGVkS2V5czogdGhpcy5tdXRhdGVkS2V5cyxcbiAgICAgICAgICAgIExuOiAhMVxuICAgICAgICB9LCBcbiAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovICExKSkgOiB7XG4gICAgICAgICAgICBEbzogW11cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBkb2MgZm9yIHRoZSBnaXZlbiBrZXkgc2hvdWxkIGJlIGluIGxpbWJvLlxuICAgICAqLyAgICBDbyh0KSB7XG4gICAgICAgIC8vIElmIHRoZSByZW1vdGUgZW5kIHNheXMgaXQncyBwYXJ0IG9mIHRoaXMgcXVlcnksIGl0J3Mgbm90IGluIGxpbWJvLlxuICAgICAgICByZXR1cm4gIXRoaXMucG8uaGFzKHQpICYmIChcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIGRvZXNuJ3QgdGhpbmsgaXQncyBhIHJlc3VsdCwgc28gaXQgc2hvdWxkbid0IGJlIGluIGxpbWJvLlxuICAgICAgICAhIXRoaXMuQW8uaGFzKHQpICYmICF0aGlzLkFvLmdldCh0KS5oYXNMb2NhbE11dGF0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgc3luY2VkRG9jdW1lbnRzLCBjdXJyZW50LCBhbmQgbGltYm8gZG9jcyBiYXNlZCBvbiB0aGUgZ2l2ZW4gY2hhbmdlLlxuICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgY2hhbmdlcyB0byB3aGljaCBkb2NzIGFyZSBpbiBsaW1iby5cbiAgICAgKi8gICAgVm8odCkge1xuICAgICAgICB0ICYmICh0LmFkZGVkRG9jdW1lbnRzLmZvckVhY2goKHQgPT4gdGhpcy5wbyA9IHRoaXMucG8uYWRkKHQpKSksIHQubW9kaWZpZWREb2N1bWVudHMuZm9yRWFjaCgodCA9PiB7fSkpLCBcbiAgICAgICAgdC5yZW1vdmVkRG9jdW1lbnRzLmZvckVhY2goKHQgPT4gdGhpcy5wbyA9IHRoaXMucG8uZGVsZXRlKHQpKSksIHRoaXMuY3VycmVudCA9IHQuY3VycmVudCk7XG4gICAgfVxuICAgIFNvKCkge1xuICAgICAgICAvLyBXZSBjYW4gb25seSBkZXRlcm1pbmUgbGltYm8gZG9jdW1lbnRzIHdoZW4gd2UncmUgaW4tc3luYyB3aXRoIHRoZSBzZXJ2ZXIuXG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50KSByZXR1cm4gW107XG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBEbyB0aGlzIGluY3JlbWVudGFsbHkgc28gdGhhdCBpdCdzIG5vdCBxdWFkcmF0aWMgd2hlblxuICAgICAgICAvLyB1cGRhdGluZyBtYW55IGRvY3VtZW50cy5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5FbztcbiAgICAgICAgdGhpcy5FbyA9IFBuKCksIHRoaXMuQW8uZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLkNvKHQua2V5KSAmJiAodGhpcy5FbyA9IHRoaXMuRW8uYWRkKHQua2V5KSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gRGlmZiB0aGUgbmV3IGxpbWJvIGRvY3Mgd2l0aCB0aGUgb2xkIGxpbWJvIGRvY3MuXG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLkVvLmhhcyh0KSB8fCBlLnB1c2gobmV3IFlvKHQpKTtcbiAgICAgICAgfSkpLCB0aGlzLkVvLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgdC5oYXMobikgfHwgZS5wdXNoKG5ldyBKbyhuKSk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBpbi1tZW1vcnkgc3RhdGUgb2YgdGhlIGN1cnJlbnQgdmlldyB3aXRoIHRoZSBzdGF0ZSByZWFkIGZyb21cbiAgICAgKiBwZXJzaXN0ZW5jZS5cbiAgICAgKlxuICAgICAqIFdlIHVwZGF0ZSB0aGUgcXVlcnkgdmlldyB3aGVuZXZlciBhIGNsaWVudCdzIHByaW1hcnkgc3RhdHVzIGNoYW5nZXM6XG4gICAgICogLSBXaGVuIGEgY2xpZW50IHRyYW5zaXRpb25zIGZyb20gcHJpbWFyeSB0byBzZWNvbmRhcnksIGl0IGNhbiBtaXNzXG4gICAgICogICBMb2NhbFN0b3JhZ2UgdXBkYXRlcyBhbmQgaXRzIHF1ZXJ5IHZpZXdzIG1heSB0ZW1wb3JhcmlseSBub3QgYmVcbiAgICAgKiAgIHN5bmNocm9uaXplZCB3aXRoIHRoZSBzdGF0ZSBvbiBkaXNrLlxuICAgICAqIC0gRm9yIHNlY29uZGFyeSB0byBwcmltYXJ5IHRyYW5zaXRpb25zLCB0aGUgY2xpZW50IG5lZWRzIHRvIHVwZGF0ZSB0aGUgbGlzdFxuICAgICAqICAgb2YgYHN5bmNlZERvY3VtZW50c2Agc2luY2Ugc2Vjb25kYXJ5IGNsaWVudHMgdXBkYXRlIHRoZWlyIHF1ZXJ5IHZpZXdzXG4gICAgICogICBiYXNlZCBwdXJlbHkgb24gc3ludGhlc2l6ZWQgUmVtb3RlRXZlbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHF1ZXJ5UmVzdWx0LmRvY3VtZW50cyAtIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGUgcXVlcnkgYWNjb3JkaW5nXG4gICAgICogdG8gdGhlIExvY2FsU3RvcmUuXG4gICAgICogQHBhcmFtIHF1ZXJ5UmVzdWx0LnJlbW90ZUtleXMgLSBUaGUga2V5cyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlXG4gICAgICogcXVlcnkgYWNjb3JkaW5nIHRvIHRoZSBiYWNrZW5kLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIFZpZXdDaGFuZ2UgdGhhdCByZXN1bHRlZCBmcm9tIHRoaXMgc3luY2hyb25pemF0aW9uLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgTm8odCkge1xuICAgICAgICB0aGlzLnBvID0gdC5HbiwgdGhpcy5FbyA9IFBuKCk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmJvKHQuZG9jdW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlDaGFuZ2VzKGUsIC8qdXBkYXRlTGltYm9Eb2N1bWVudHM9Ki8gITApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiB0aGlzIHF1ZXJ5IHdhcyBqdXN0IGxpc3RlbmVkIHRvLiBDb250YWluc1xuICAgICAqIGEgZG9jdW1lbnQgYWRkIGZvciBldmVyeSBleGlzdGluZyBkb2N1bWVudCBhbmQgdGhlIGBmcm9tQ2FjaGVgIGFuZFxuICAgICAqIGBoYXNQZW5kaW5nV3JpdGVzYCBzdGF0dXMgb2YgdGhlIGFscmVhZHkgZXN0YWJsaXNoZWQgdmlldy5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIHhvKCkge1xuICAgICAgICByZXR1cm4gRm8uZnJvbUluaXRpYWxEb2N1bWVudHModGhpcy5xdWVyeSwgdGhpcy5BbywgdGhpcy5tdXRhdGVkS2V5cywgMCAvKiBMb2NhbCAqLyA9PT0gdGhpcy5Ubyk7XG4gICAgfVxufVxuXG4vKipcbiAqIFF1ZXJ5VmlldyBjb250YWlucyBhbGwgb2YgdGhlIGRhdGEgdGhhdCBTeW5jRW5naW5lIG5lZWRzIHRvIGtlZXAgdHJhY2sgb2YgZm9yXG4gKiBhIHBhcnRpY3VsYXIgcXVlcnkuXG4gKi9cbmNsYXNzIFpvIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgcXVlcnkgaXRzZWxmLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgbnVtYmVyIGNyZWF0ZWQgYnkgdGhlIGNsaWVudCB0aGF0IGlzIHVzZWQgaW4gdGhlIHdhdGNoXG4gICAgICogc3RyZWFtIHRvIGlkZW50aWZ5IHRoaXMgcXVlcnkuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXRcbiAgICAgKiBkb2NzIGFyZSBpbiB0aGUgcXVlcnkuIEl0IGdldHMgbm90aWZpZWQgb2YgbG9jYWwgYW5kIHJlbW90ZSBjaGFuZ2VzLFxuICAgICAqIGFuZCBhcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3RcbiAgICAgKiBwb3NzaWJsZSByZXN1bHRzLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLnZpZXcgPSBuO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyBhIGxpbWJvIHJlc29sdXRpb24uICovIGNsYXNzIHRjIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdG8gdHJ1ZSBvbmNlIHdlJ3ZlIHJlY2VpdmVkIGEgZG9jdW1lbnQuIFRoaXMgaXMgdXNlZCBpblxuICAgICAgICAgKiBnZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KCkgYW5kIHVsdGltYXRlbHkgdXNlZCBieSBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IgdG9cbiAgICAgICAgICogZGVjaWRlIHdoZXRoZXIgaXQgbmVlZHMgdG8gbWFudWZhY3R1cmUgYSBkZWxldGUgZXZlbnQgZm9yIHRoZSB0YXJnZXQgb25jZVxuICAgICAgICAgKiB0aGUgdGFyZ2V0IGlzIENVUlJFTlQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmtvID0gITE7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIGBTeW5jRW5naW5lYCBjb29yZGluYXRpbmcgd2l0aCBvdGhlciBwYXJ0cyBvZiBTREsuXG4gKlxuICogVGhlIHBhcnRzIG9mIFN5bmNFbmdpbmUgdGhhdCBhY3QgYXMgYSBjYWxsYmFjayB0byBSZW1vdGVTdG9yZSBuZWVkIHRvIGJlXG4gKiByZWdpc3RlcmVkIGluZGl2aWR1YWxseS4gVGhpcyBpcyBkb25lIGluIGBzeW5jRW5naW5lV3JpdGUoKWAgYW5kXG4gKiBgc3luY0VuZ2luZUxpc3RlbigpYCAoYXMgd2VsbCBhcyBgYXBwbHlQcmltYXJ5U3RhdGUoKWApIGFzIHRoZXNlIG1ldGhvZHNcbiAqIHNlcnZlIGFzIGVudHJ5IHBvaW50cyB0byBSZW1vdGVTdG9yZSdzIGZ1bmN0aW9uYWxpdHkuXG4gKlxuICogTm90ZTogc29tZSBmaWVsZCBkZWZpbmVkIGluIHRoaXMgY2xhc3MgbWlnaHQgaGF2ZSBwdWJsaWMgYWNjZXNzIGxldmVsLCBidXRcbiAqIHRoZSBjbGFzcyBpcyBub3QgZXhwb3J0ZWQgc28gdGhleSBhcmUgb25seSBhY2Nlc3NpYmxlIGZyb20gdGhpcyBtb2R1bGUuXG4gKiBUaGlzIGlzIHVzZWZ1bCB0byBpbXBsZW1lbnQgb3B0aW9uYWwgZmVhdHVyZXMgKGxpa2UgYnVuZGxlcykgaW4gZnJlZVxuICogZnVuY3Rpb25zLCBzdWNoIHRoYXQgdGhleSBhcmUgdHJlZS1zaGFrZWFibGUuXG4gKi8gY2xhc3MgZWMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIFxuICAgIC8vIFBPUlRJTkcgTk9URTogTWFuYWdlcyBzdGF0ZSBzeW5jaHJvbml6YXRpb24gaW4gbXVsdGktdGFiIGVudmlyb25tZW50cy5cbiAgICBzLCBpLCByKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IHQsIHRoaXMucmVtb3RlU3RvcmUgPSBlLCB0aGlzLmV2ZW50TWFuYWdlciA9IG4sIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSBzLCBcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IGksIHRoaXMubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMgPSByLCB0aGlzLiRvID0ge30sIHRoaXMuT28gPSBuZXcgamkoKHQgPT4gUmUodCkpLCBBZSksIFxuICAgICAgICB0aGlzLkZvID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUga2V5cyBvZiBkb2N1bWVudHMgdGhhdCBhcmUgaW4gbGltYm8gZm9yIHdoaWNoIHdlIGhhdmVuJ3QgeWV0IHN0YXJ0ZWQgYVxuICAgICAgICAgKiBsaW1ibyByZXNvbHV0aW9uIHF1ZXJ5LiBUaGUgc3RyaW5ncyBpbiB0aGlzIHNldCBhcmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nXG4gICAgICAgICAqIGBrZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKWAgd2hlcmUgYGtleWAgaXMgYSBgRG9jdW1lbnRLZXlgIG9iamVjdC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGBTZXRgIHR5cGUgd2FzIGNob3NlbiBiZWNhdXNlIGl0IHByb3ZpZGVzIGVmZmljaWVudCBsb29rdXAgYW5kIHJlbW92YWxcbiAgICAgICAgICogb2YgYXJiaXRyYXJ5IGVsZW1lbnRzIGFuZCBpdCBhbHNvIG1haW50YWlucyBpbnNlcnRpb24gb3JkZXIsIHByb3ZpZGluZyB0aGVcbiAgICAgICAgICogZGVzaXJlZCBxdWV1ZS1saWtlIEZJRk8gc2VtYW50aWNzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5NbyA9IG5ldyBTZXQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIHRhcmdldCBJRCBmb3IgZWFjaCBkb2N1bWVudCB0aGF0IGlzIGluIGxpbWJvIHdpdGggYW5cbiAgICAgICAgICogYWN0aXZlIHRhcmdldC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuTG8gPSBuZXcgd24oUHQuY29tcGFyYXRvciksIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIGluZm9ybWF0aW9uIGFib3V0IGFuIGFjdGl2ZSBsaW1ibyByZXNvbHV0aW9uIGZvciBlYWNoXG4gICAgICAgICAqIGFjdGl2ZSB0YXJnZXQgSUQgdGhhdCB3YXMgc3RhcnRlZCBmb3IgdGhlIHB1cnBvc2Ugb2YgbGltYm8gcmVzb2x1dGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuQm8gPSBuZXcgTWFwLCB0aGlzLlVvID0gbmV3IGJyLCBcbiAgICAgICAgLyoqIFN0b3JlcyB1c2VyIGNvbXBsZXRpb24gaGFuZGxlcnMsIGluZGV4ZWQgYnkgVXNlciBhbmQgQmF0Y2hJZC4gKi9cbiAgICAgICAgdGhpcy5xbyA9IHt9LCBcbiAgICAgICAgLyoqIFN0b3JlcyB1c2VyIGNhbGxiYWNrcyB3YWl0aW5nIGZvciBhbGwgcGVuZGluZyB3cml0ZXMgdG8gYmUgYWNrbm93bGVkZ2VkLiAqL1xuICAgICAgICB0aGlzLktvID0gbmV3IE1hcCwgdGhpcy5qbyA9IE5pLmllKCksIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBVbmtub3duICovICwgXG4gICAgICAgIC8vIFRoZSBwcmltYXJ5IHN0YXRlIGlzIHNldCB0byBgdHJ1ZWAgb3IgYGZhbHNlYCBpbW1lZGlhdGVseSBhZnRlciBGaXJlc3RvcmVcbiAgICAgICAgLy8gc3RhcnR1cC4gSW4gdGhlIGludGVyaW0sIGEgY2xpZW50IHNob3VsZCBvbmx5IGJlIGNvbnNpZGVyZWQgcHJpbWFyeSBpZlxuICAgICAgICAvLyBgaXNQcmltYXJ5YCBpcyB0cnVlLlxuICAgICAgICB0aGlzLlFvID0gdm9pZCAwO1xuICAgIH1cbiAgICBnZXQgaXNQcmltYXJ5Q2xpZW50KCkge1xuICAgICAgICByZXR1cm4gITAgPT09IHRoaXMuUW87XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYXRlcyB0aGUgbmV3IGxpc3RlbiwgcmVzb2x2ZXMgcHJvbWlzZSB3aGVuIGxpc3RlbiBlbnF1ZXVlZCB0byB0aGVcbiAqIHNlcnZlci4gQWxsIHRoZSBzdWJzZXF1ZW50IHZpZXcgc25hcHNob3RzIG9yIGVycm9ycyBhcmUgc2VudCB0byB0aGVcbiAqIHN1YnNjcmliZWQgaGFuZGxlcnMuIFJldHVybnMgdGhlIGluaXRpYWwgc25hcHNob3QuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIG5jKHQsIGUpIHtcbiAgICBjb25zdCBuID0gQ2ModCk7XG4gICAgbGV0IHMsIGk7XG4gICAgY29uc3QgciA9IG4uT28uZ2V0KGUpO1xuICAgIGlmIChyKSBcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdpdGggTXVsdGktVGFiIFdlYiwgaXQgaXMgcG9zc2libGUgdGhhdCBhIHF1ZXJ5IHZpZXdcbiAgICAvLyBhbHJlYWR5IGV4aXN0cyB3aGVuIEV2ZW50TWFuYWdlciBjYWxscyB1cyBmb3IgdGhlIGZpcnN0IHRpbWUuIFRoaXNcbiAgICAvLyBoYXBwZW5zIHdoZW4gdGhlIHByaW1hcnkgdGFiIGlzIGFscmVhZHkgbGlzdGVuaW5nIHRvIHRoaXMgcXVlcnkgb25cbiAgICAvLyBiZWhhbGYgb2YgYW5vdGhlciB0YWIgYW5kIHRoZSB1c2VyIG9mIHRoZSBwcmltYXJ5IGFsc28gc3RhcnRzIGxpc3RlbmluZ1xuICAgIC8vIHRvIHRoZSBxdWVyeS4gRXZlbnRNYW5hZ2VyIHdpbGwgbm90IGhhdmUgYW4gYXNzaWduZWQgdGFyZ2V0IElEIGluIHRoaXNcbiAgICAvLyBjYXNlIGFuZCBjYWxscyBgbGlzdGVuYCB0byBvYnRhaW4gdGhpcyBJRC5cbiAgICBzID0gci50YXJnZXRJZCwgbi5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KHMpLCBpID0gci52aWV3LnhvKCk7IGVsc2Uge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgbXIobi5sb2NhbFN0b3JlLCBFZShlKSksIHIgPSBuLnNoYXJlZENsaWVudFN0YXRlLmFkZExvY2FsUXVlcnlUYXJnZXQodC50YXJnZXRJZCk7XG4gICAgICAgIHMgPSB0LnRhcmdldElkLCBpID0gYXdhaXQgc2MobiwgZSwgcywgXCJjdXJyZW50XCIgPT09IHIpLCBuLmlzUHJpbWFyeUNsaWVudCAmJiBjbyhuLnJlbW90ZVN0b3JlLCB0KTtcbiAgICB9XG4gICAgcmV0dXJuIGk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgdmlldyBmb3IgYSBwcmV2aW91c2x5IHVua25vd24gcXVlcnkgYW5kIGNvbXB1dGVzIGl0cyBpbml0aWFsXG4gKiBzbmFwc2hvdC5cbiAqLyBhc3luYyBmdW5jdGlvbiBzYyh0LCBlLCBuLCBzKSB7XG4gICAgLy8gUE9SVElORyBOT1RFOiBPbiBXZWIgb25seSwgd2UgaW5qZWN0IHRoZSBjb2RlIHRoYXQgcmVnaXN0ZXJzIG5ldyBMaW1ib1xuICAgIC8vIHRhcmdldHMgYmFzZWQgb24gdmlldyBjaGFuZ2VzLiBUaGlzIGFsbG93cyB1cyB0byBvbmx5IGRlcGVuZCBvbiBMaW1ib1xuICAgIC8vIGNoYW5nZXMgd2hlbiB1c2VyIGNvZGUgaW5jbHVkZXMgcXVlcmllcy5cbiAgICB0LldvID0gKGUsIG4sIHMpID0+IGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgbGV0IGkgPSBlLnZpZXcuYm8obik7XG4gICAgICAgIGkuTG4gJiYgKFxuICAgICAgICAvLyBUaGUgcXVlcnkgaGFzIGEgbGltaXQgYW5kIHNvbWUgZG9jcyB3ZXJlIHJlbW92ZWQsIHNvIHdlIG5lZWRcbiAgICAgICAgLy8gdG8gcmUtcnVuIHRoZSBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCBzdG9yZSB0byBtYWtlIHN1cmUgd2VcbiAgICAgICAgLy8gZGlkbid0IGxvc2UgYW55IGdvb2QgZG9jcyB0aGF0IGhhZCBiZWVuIHBhc3QgdGhlIGxpbWl0LlxuICAgICAgICBpID0gYXdhaXQgeXIodC5sb2NhbFN0b3JlLCBlLnF1ZXJ5LCBcbiAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMSkudGhlbigoKHtkb2N1bWVudHM6IHR9KSA9PiBlLnZpZXcuYm8odCwgaSkpKSk7XG4gICAgICAgIGNvbnN0IHIgPSBzICYmIHMudGFyZ2V0Q2hhbmdlcy5nZXQoZS50YXJnZXRJZCksIG8gPSBlLnZpZXcuYXBwbHlDaGFuZ2VzKGksIFxuICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gdC5pc1ByaW1hcnlDbGllbnQsIHIpO1xuICAgICAgICByZXR1cm4gbWModCwgZS50YXJnZXRJZCwgby5EbyksIG8uc25hcHNob3Q7XG4gICAgfSh0LCBlLCBuLCBzKTtcbiAgICBjb25zdCBpID0gYXdhaXQgeXIodC5sb2NhbFN0b3JlLCBlLCBcbiAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICEwKSwgciA9IG5ldyBYbyhlLCBpLkduKSwgbyA9IHIuYm8oaS5kb2N1bWVudHMpLCBjID0gRG4uY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKG4sIHMgJiYgXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyAhPT0gdC5vbmxpbmVTdGF0ZSksIGEgPSByLmFwcGx5Q2hhbmdlcyhvLCBcbiAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gdC5pc1ByaW1hcnlDbGllbnQsIGMpO1xuICAgIG1jKHQsIG4sIGEuRG8pO1xuICAgIGNvbnN0IHUgPSBuZXcgWm8oZSwgbiwgcik7XG4gICAgcmV0dXJuIHQuT28uc2V0KGUsIHUpLCB0LkZvLmhhcyhuKSA/IHQuRm8uZ2V0KG4pLnB1c2goZSkgOiB0LkZvLnNldChuLCBbIGUgXSksIGEuc25hcHNob3Q7XG59XG5cbi8qKiBTdG9wcyBsaXN0ZW5pbmcgdG8gdGhlIHF1ZXJ5LiAqLyBhc3luYyBmdW5jdGlvbiBpYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCksIHMgPSBuLk9vLmdldChlKSwgaSA9IG4uRm8uZ2V0KHMudGFyZ2V0SWQpO1xuICAgIGlmIChpLmxlbmd0aCA+IDEpIHJldHVybiBuLkZvLnNldChzLnRhcmdldElkLCBpLmZpbHRlcigodCA9PiAhQWUodCwgZSkpKSksIHZvaWQgbi5Pby5kZWxldGUoZSk7XG4gICAgLy8gTm8gb3RoZXIgcXVlcmllcyBhcmUgbWFwcGVkIHRvIHRoZSB0YXJnZXQsIGNsZWFuIHVwIHRoZSBxdWVyeSBhbmQgdGhlIHRhcmdldC5cbiAgICAgICAgaWYgKG4uaXNQcmltYXJ5Q2xpZW50KSB7XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gcmVtb3ZlIHRoZSBsb2NhbCBxdWVyeSB0YXJnZXQgZmlyc3QgdG8gYWxsb3cgdXMgdG8gdmVyaWZ5XG4gICAgICAgIC8vIHdoZXRoZXIgYW55IG90aGVyIGNsaWVudCBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoaXMgdGFyZ2V0LlxuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLnJlbW92ZUxvY2FsUXVlcnlUYXJnZXQocy50YXJnZXRJZCk7XG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaXNBY3RpdmVRdWVyeVRhcmdldChzLnRhcmdldElkKSB8fCBhd2FpdCBncihuLmxvY2FsU3RvcmUsIHMudGFyZ2V0SWQsIFxuICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmNsZWFyUXVlcnlTdGF0ZShzLnRhcmdldElkKSwgYW8obi5yZW1vdGVTdG9yZSwgcy50YXJnZXRJZCksIFxuICAgICAgICAgICAgd2Mobiwgcy50YXJnZXRJZCk7XG4gICAgICAgIH0pKS5jYXRjaChGaSk7XG4gICAgfSBlbHNlIHdjKG4sIHMudGFyZ2V0SWQpLCBhd2FpdCBncihuLmxvY2FsU3RvcmUsIHMudGFyZ2V0SWQsIFxuICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITApO1xufVxuXG4vKipcbiAqIEluaXRpYXRlcyB0aGUgd3JpdGUgb2YgbG9jYWwgbXV0YXRpb24gYmF0Y2ggd2hpY2ggaW52b2x2ZXMgYWRkaW5nIHRoZVxuICogd3JpdGVzIHRvIHRoZSBtdXRhdGlvbiBxdWV1ZSwgbm90aWZ5aW5nIHRoZSByZW1vdGUgc3RvcmUgYWJvdXQgbmV3XG4gKiBtdXRhdGlvbnMgYW5kIHJhaXNpbmcgZXZlbnRzIGZvciBhbnkgY2hhbmdlcyB0aGlzIHdyaXRlIGNhdXNlZC5cbiAqXG4gKiBUaGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGlzIGNhbGwgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgYWJvdmUgc3RlcHNcbiAqIGhhdmUgY29tcGxldGVkLCAqbm90KiB3aGVuIHRoZSB3cml0ZSB3YXMgYWNrZWQgYnkgdGhlIGJhY2tlbmQuIFRoZVxuICogdXNlckNhbGxiYWNrIGlzIHJlc29sdmVkIG9uY2UgdGhlIHdyaXRlIHdhcyBhY2tlZC9yZWplY3RlZCBieSB0aGVcbiAqIGJhY2tlbmQgKG9yIGZhaWxlZCBsb2NhbGx5IGZvciBhbnkgb3RoZXIgcmVhc29uKS5cbiAqLyBhc3luYyBmdW5jdGlvbiByYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IE5jKHQpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gcSh0KSwgcyA9IGl0Lm5vdygpLCBpID0gZS5yZWR1Y2UoKCh0LCBlKSA9PiB0LmFkZChlLmtleSkpLCBQbigpKTtcbiAgICAgICAgICAgIGxldCByO1xuICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJMb2NhbGx5IHdyaXRlIG11dGF0aW9uc1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBuLlFuLlBuKHQsIGkpLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgICAgIHIgPSBpO1xuICAgICAgICAgICAgICAgIC8vIEZvciBub24taWRlbXBvdGVudCBtdXRhdGlvbnMgKHN1Y2ggYXMgYEZpZWxkVmFsdWUuaW5jcmVtZW50KClgKSxcbiAgICAgICAgICAgICAgICAvLyB3ZSByZWNvcmQgdGhlIGJhc2Ugc3RhdGUgaW4gYSBzZXBhcmF0ZSBwYXRjaCBtdXRhdGlvbi4gVGhpcyBpc1xuICAgICAgICAgICAgICAgIC8vIGxhdGVyIHVzZWQgdG8gZ3VhcmFudGVlIGNvbnNpc3RlbnQgdmFsdWVzIGFuZCBwcmV2ZW50cyBmbGlja2VyXG4gICAgICAgICAgICAgICAgLy8gZXZlbiBpZiB0aGUgYmFja2VuZCBzZW5kcyB1cyBhbiB1cGRhdGUgdGhhdCBhbHJlYWR5IGluY2x1ZGVzIG91clxuICAgICAgICAgICAgICAgIC8vIHRyYW5zZm9ybS5cbiAgICAgICAgICAgICAgICBjb25zdCBvID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IFhlKHQsIHIuZ2V0KHQua2V5KSk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT0gZSAmJiBcbiAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogVGhlIGJhc2Ugc3RhdGUgc2hvdWxkIG9ubHkgYmUgYXBwbGllZCBpZiB0aGVyZSdzIHNvbWVcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RpbmcgZG9jdW1lbnQgdG8gb3ZlcnJpZGUsIHNvIHVzZSBhIFByZWNvbmRpdGlvbiBvZlxuICAgICAgICAgICAgICAgICAgICAvLyBleGlzdHM9dHJ1ZVxuICAgICAgICAgICAgICAgICAgICBvLnB1c2gobmV3IG5uKHQua2V5LCBlLCBxdChlLnZhbHVlLm1hcFZhbHVlKSwgR2UuZXhpc3RzKCEwKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbi5Jbi5hZGRNdXRhdGlvbkJhdGNoKHQsIHMsIG8sIGUpO1xuICAgICAgICAgICAgfSkpKSkudGhlbigodCA9PiAodC5hcHBseVRvTG9jYWxEb2N1bWVudFNldChyKSwge1xuICAgICAgICAgICAgICAgIGJhdGNoSWQ6IHQuYmF0Y2hJZCxcbiAgICAgICAgICAgICAgICBjaGFuZ2VzOiByXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KHMubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIHMuc2hhcmVkQ2xpZW50U3RhdGUuYWRkUGVuZGluZ011dGF0aW9uKHQuYmF0Y2hJZCksIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGxldCBzID0gdC5xb1t0LmN1cnJlbnRVc2VyLnRvS2V5KCldO1xuICAgICAgICAgICAgcyB8fCAocyA9IG5ldyB3bihldCkpO1xuICAgICAgICAgICAgcyA9IHMuaW5zZXJ0KGUsIG4pLCB0LnFvW3QuY3VycmVudFVzZXIudG9LZXkoKV0gPSBzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmVzb2x2ZXMgb3IgcmVqZWN0cyB0aGUgdXNlciBjYWxsYmFjayBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCB0aGVuIGRpc2NhcmRzXG4gKiBpdC5cbiAqLyAocywgdC5iYXRjaElkLCBuKSwgYXdhaXQgcGMocywgdC5jaGFuZ2VzKSwgYXdhaXQgRW8ocy5yZW1vdGVTdG9yZSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICAvLyBJZiB3ZSBjYW4ndCBwZXJzaXN0IHRoZSBtdXRhdGlvbiwgd2UgcmVqZWN0IHRoZSB1c2VyIGNhbGxiYWNrIGFuZFxuICAgICAgICAvLyBkb24ndCBzZW5kIHRoZSBtdXRhdGlvbi4gVGhlIHVzZXIgY2FuIHRoZW4gcmV0cnkgdGhlIHdyaXRlLlxuICAgICAgICBjb25zdCBlID0ga28odCwgXCJGYWlsZWQgdG8gcGVyc2lzdCB3cml0ZVwiKTtcbiAgICAgICAgbi5yZWplY3QoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgb25lIHJlbW90ZSBldmVudCB0byB0aGUgc3luYyBlbmdpbmUsIG5vdGlmeWluZyBhbnkgdmlld3Mgb2YgdGhlXG4gKiBjaGFuZ2VzLCBhbmQgcmVsZWFzaW5nIGFueSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXMgdGhhdCB3b3VsZCBiZWNvbWVcbiAqIHZpc2libGUgYmVjYXVzZSBvZiB0aGUgc25hcHNob3QgdmVyc2lvbiB0aGUgcmVtb3RlIGV2ZW50IGNvbnRhaW5zLlxuICovIGFzeW5jIGZ1bmN0aW9uIG9jKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgZHIobi5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgLy8gVXBkYXRlIGByZWNlaXZlZERvY3VtZW50YCBhcyBhcHByb3ByaWF0ZSBmb3IgYW55IGxpbWJvIHRhcmdldHMuXG4gICAgICAgICAgICAgICAgZS50YXJnZXRDaGFuZ2VzLmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gbi5Cby5nZXQoZSk7XG4gICAgICAgICAgICBzICYmIChcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgaXMgYSBsaW1ibyByZXNvbHV0aW9uIGxvb2t1cCwgaXQncyBmb3IgYSBzaW5nbGUgZG9jdW1lbnRcbiAgICAgICAgICAgIC8vIGFuZCBpdCBjb3VsZCBiZSBhZGRlZCwgbW9kaWZpZWQsIG9yIHJlbW92ZWQsIGJ1dCBub3QgYSBjb21iaW5hdGlvbi5cbiAgICAgICAgICAgIEIodC5hZGRlZERvY3VtZW50cy5zaXplICsgdC5tb2RpZmllZERvY3VtZW50cy5zaXplICsgdC5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPD0gMSksIFxuICAgICAgICAgICAgdC5hZGRlZERvY3VtZW50cy5zaXplID4gMCA/IHMua28gPSAhMCA6IHQubW9kaWZpZWREb2N1bWVudHMuc2l6ZSA+IDAgPyBCKHMua28pIDogdC5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPiAwICYmIChCKHMua28pLCBcbiAgICAgICAgICAgIHMua28gPSAhMSkpO1xuICAgICAgICB9KSksIGF3YWl0IHBjKG4sIHQsIGUpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgRmkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgYW4gT25saW5lU3RhdGUgY2hhbmdlIHRvIHRoZSBzeW5jIGVuZ2luZSBhbmQgbm90aWZpZXMgYW55IHZpZXdzIG9mXG4gKiB0aGUgY2hhbmdlLlxuICovIGZ1bmN0aW9uIGNjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gcSh0KTtcbiAgICAvLyBJZiB3ZSBhcmUgdGhlIHNlY29uZGFyeSBjbGllbnQsIHdlIGV4cGxpY2l0bHkgaWdub3JlIHRoZSByZW1vdGUgc3RvcmUnc1xuICAgIC8vIG9ubGluZSBzdGF0ZSAodGhlIGxvY2FsIGNsaWVudCBtYXkgZ28gb2ZmbGluZSwgZXZlbiB0aG91Z2ggdGhlIHByaW1hcnlcbiAgICAvLyB0YWIgcmVtYWlucyBvbmxpbmUpIGFuZCBvbmx5IGFwcGx5IHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZSBmcm9tXG4gICAgLy8gU2hhcmVkQ2xpZW50U3RhdGUuXG4gICAgICAgIGlmIChzLmlzUHJpbWFyeUNsaWVudCAmJiAwIC8qIFJlbW90ZVN0b3JlICovID09PSBuIHx8ICFzLmlzUHJpbWFyeUNsaWVudCAmJiAxIC8qIFNoYXJlZENsaWVudFN0YXRlICovID09PSBuKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcy5Pby5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHMudmlldy5pbyhlKTtcbiAgICAgICAgICAgIGkuc25hcHNob3QgJiYgdC5wdXNoKGkuc25hcHNob3QpO1xuICAgICAgICB9KSksIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgICAgICAgICAgbi5vbmxpbmVTdGF0ZSA9IGU7XG4gICAgICAgICAgICBsZXQgcyA9ICExO1xuICAgICAgICAgICAgbi5xdWVyaWVzLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIG4ubGlzdGVuZXJzKSBcbiAgICAgICAgICAgICAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cbiAgICAgICAgICAgICAgICB0LmlvKGUpICYmIChzID0gITApO1xuICAgICAgICAgICAgfSkpLCBzICYmIGpvKG4pO1xuICAgICAgICB9KHMuZXZlbnRNYW5hZ2VyLCBlKSwgdC5sZW5ndGggJiYgcy4kby5Scih0KSwgcy5vbmxpbmVTdGF0ZSA9IGUsIHMuaXNQcmltYXJ5Q2xpZW50ICYmIHMuc2hhcmVkQ2xpZW50U3RhdGUuc2V0T25saW5lU3RhdGUoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlamVjdHMgdGhlIGxpc3RlbiBmb3IgdGhlIGdpdmVuIHRhcmdldElELiBUaGlzIGNhbiBiZSB0cmlnZ2VyZWQgYnkgdGhlXG4gKiBiYWNrZW5kIGZvciBhbnkgYWN0aXZlIHRhcmdldC5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFRoZSBzeW5jIGVuZ2luZSBpbXBsZW1lbnRhdGlvbi5cbiAqIEBwYXJhbSB0YXJnZXRJZCAtIFRoZSB0YXJnZXRJRCBjb3JyZXNwb25kcyB0byBvbmUgcHJldmlvdXNseSBpbml0aWF0ZWQgYnkgdGhlXG4gKiB1c2VyIGFzIHBhcnQgb2YgVGFyZ2V0RGF0YSBwYXNzZWQgdG8gbGlzdGVuKCkgb24gUmVtb3RlU3RvcmUuXG4gKiBAcGFyYW0gZXJyIC0gQSBkZXNjcmlwdGlvbiBvZiB0aGUgY29uZGl0aW9uIHRoYXQgaGFzIGZvcmNlZCB0aGUgcmVqZWN0aW9uLlxuICogTmVhcmx5IGFsd2F5cyB0aGlzIHdpbGwgYmUgYW4gaW5kaWNhdGlvbiB0aGF0IHRoZSB1c2VyIGlzIG5vIGxvbmdlclxuICogYXV0aG9yaXplZCB0byBzZWUgdGhlIGRhdGEgbWF0Y2hpbmcgdGhlIHRhcmdldC5cbiAqLyBhc3luYyBmdW5jdGlvbiBhYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCk7XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVRdWVyeVN0YXRlKGUsIFwicmVqZWN0ZWRcIiwgbik7XG4gICAgY29uc3QgaSA9IHMuQm8uZ2V0KGUpLCByID0gaSAmJiBpLmtleTtcbiAgICBpZiAocikge1xuICAgICAgICAvLyBUT0RPKGtsaW10KTogV2UgcmVhbGx5IG9ubHkgc2hvdWxkIGRvIHRoZSBmb2xsb3dpbmcgb24gcGVybWlzc2lvblxuICAgICAgICAvLyBkZW5pZWQgZXJyb3JzLCBidXQgd2UgZG9uJ3QgaGF2ZSB0aGUgY2F1c2UgY29kZSBoZXJlLlxuICAgICAgICAvLyBJdCdzIGEgbGltYm8gZG9jLiBDcmVhdGUgYSBzeW50aGV0aWMgZXZlbnQgc2F5aW5nIGl0IHdhcyBkZWxldGVkLlxuICAgICAgICAvLyBUaGlzIGlzIGtpbmQgb2YgYSBoYWNrLiBJZGVhbGx5LCB3ZSB3b3VsZCBoYXZlIGEgbWV0aG9kIGluIHRoZSBsb2NhbFxuICAgICAgICAvLyBzdG9yZSB0byBwdXJnZSBhIGRvY3VtZW50LiBIb3dldmVyLCBpdCB3b3VsZCBiZSB0cmlja3kgdG8ga2VlcCBhbGwgb2ZcbiAgICAgICAgLy8gdGhlIGxvY2FsIHN0b3JlJ3MgaW52YXJpYW50cyB3aXRoIGFub3RoZXIgbWV0aG9kLlxuICAgICAgICBsZXQgdCA9IG5ldyB3bihQdC5jb21wYXJhdG9yKTtcbiAgICAgICAgdCA9IHQuaW5zZXJ0KHIsIEt0Lm5ld05vRG9jdW1lbnQociwgcnQubWluKCkpKTtcbiAgICAgICAgY29uc3QgbiA9IFBuKCkuYWRkKHIpLCBpID0gbmV3IFNuKHJ0Lm1pbigpLCBcbiAgICAgICAgLyogdGFyZ2V0Q2hhbmdlcz0gKi8gbmV3IE1hcCwgXG4gICAgICAgIC8qIHRhcmdldE1pc21hdGNoZXM9ICovIG5ldyBnbihldCksIHQsIG4pO1xuICAgICAgICBhd2FpdCBvYyhzLCBpKSwgXG4gICAgICAgIC8vIFNpbmNlIHRoaXMgcXVlcnkgZmFpbGVkLCB3ZSB3b24ndCB3YW50IHRvIG1hbnVhbGx5IHVubGlzdGVuIHRvIGl0LlxuICAgICAgICAvLyBXZSBvbmx5IHJlbW92ZSBpdCBmcm9tIGJvb2trZWVwaW5nIGFmdGVyIHdlIHN1Y2Nlc3NmdWxseSBhcHBsaWVkIHRoZVxuICAgICAgICAvLyBSZW1vdGVFdmVudC4gSWYgYGFwcGx5UmVtb3RlRXZlbnQoKWAgdGhyb3dzLCB3ZSB3YW50IHRvIHJlLWxpc3RlbiB0b1xuICAgICAgICAvLyB0aGlzIHF1ZXJ5IHdoZW4gdGhlIFJlbW90ZVN0b3JlIHJlc3RhcnRzIHRoZSBXYXRjaCBzdHJlYW0sIHdoaWNoIHNob3VsZFxuICAgICAgICAvLyByZS10cmlnZ2VyIHRoZSB0YXJnZXQgZmFpbHVyZS5cbiAgICAgICAgcy5MbyA9IHMuTG8ucmVtb3ZlKHIpLCBzLkJvLmRlbGV0ZShlKSwgeWMocyk7XG4gICAgfSBlbHNlIGF3YWl0IGdyKHMubG9jYWxTdG9yZSwgZSwgXG4gICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITEpLnRoZW4oKCgpID0+IHdjKHMsIGUsIG4pKSkuY2F0Y2goRmkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiB1Yyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCksIHMgPSBlLmJhdGNoLmJhdGNoSWQ7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGxyKG4ubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBtYXkgb3IgbWF5IG5vdCBiZSBhYmxlIHRvIGFwcGx5IHRoZSB3cml0ZSByZXN1bHQgYW5kXG4gICAgICAgIC8vIHJhaXNlIGV2ZW50cyBpbW1lZGlhdGVseSAoZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHdhdGNoZXIgaXMgY2F1Z2h0XG4gICAgICAgIC8vIHVwKSwgc28gd2UgcmFpc2UgdXNlciBjYWxsYmFja3MgZmlyc3Qgc28gdGhhdCB0aGV5IGNvbnNpc3RlbnRseSBoYXBwZW5cbiAgICAgICAgLy8gYmVmb3JlIGxpc3RlbiBldmVudHMuXG4gICAgICAgICAgICAgICAgZGMobiwgcywgLyplcnJvcj0qLyBudWxsKSwgZmMobiwgcyksIG4uc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZShzLCBcImFja25vd2xlZGdlZFwiKSwgXG4gICAgICAgIGF3YWl0IHBjKG4sIHQpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgRmkodCk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBoYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJSZWplY3QgYmF0Y2hcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4uSW4ubG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKS5uZXh0KChlID0+IChCKG51bGwgIT09IGUpLCBzID0gZS5rZXlzKCksIG4uSW4ucmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSkpKS5uZXh0KCgoKSA9PiBuLkluLnBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHQpKSkubmV4dCgoKCkgPT4gbi5Rbi5Qbih0LCBzKSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgbGFyZ2VzdCAobGF0ZXN0KSBiYXRjaCBpZCBpbiBtdXRhdGlvbiBxdWV1ZSB0aGF0IGlzIHBlbmRpbmdcbiAqIHNlcnZlciByZXNwb25zZS5cbiAqXG4gKiBSZXR1cm5zIGBCQVRDSElEX1VOS05PV05gIGlmIHRoZSBxdWV1ZSBpcyBlbXB0eS5cbiAqLyAocy5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIG1heSBvciBtYXkgbm90IGJlIGFibGUgdG8gYXBwbHkgdGhlIHdyaXRlIHJlc3VsdCBhbmRcbiAgICAgICAgLy8gcmFpc2UgZXZlbnRzIGltbWVkaWF0ZWx5IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgd2F0Y2hlciBpcyBjYXVnaHQgdXApLFxuICAgICAgICAvLyBzbyB3ZSByYWlzZSB1c2VyIGNhbGxiYWNrcyBmaXJzdCBzbyB0aGF0IHRoZXkgY29uc2lzdGVudGx5IGhhcHBlbiBiZWZvcmVcbiAgICAgICAgLy8gbGlzdGVuIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBkYyhzLCBlLCBuKSwgZmMocywgZSksIHMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZShlLCBcInJlamVjdGVkXCIsIG4pLCBcbiAgICAgICAgYXdhaXQgcGMocywgdCk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgICBhd2FpdCBGaShuKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgdXNlciBjYWxsYmFjayB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHBlbmRpbmcgbXV0YXRpb25zIGF0IHRoZSBtb21lbnQgb2YgY2FsbGluZ1xuICogYXJlIGFja25vd2xlZGdlZCAuXG4gKi8gYXN5bmMgZnVuY3Rpb24gbGModCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIHdvKG4ucmVtb3RlU3RvcmUpIHx8ICQoXCJTeW5jRW5naW5lXCIsIFwiVGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQuIFRoZSB0YXNrIHJldHVybmVkIGJ5ICdhd2FpdFBlbmRpbmdXcml0ZXMoKScgd2lsbCBub3QgY29tcGxldGUgdW50aWwgdGhlIG5ldHdvcmsgaXMgZW5hYmxlZC5cIik7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGUucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgaGlnaGVzdCB1bmFja25vd2xlZGdlZCBiYXRjaCBpZFwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGUuSW4uZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCh0KSkpO1xuICAgICAgICB9KG4ubG9jYWxTdG9yZSk7XG4gICAgICAgIGlmICgtMSA9PT0gdCkgXG4gICAgICAgIC8vIFRyaWdnZXIgdGhlIGNhbGxiYWNrIHJpZ2h0IGF3YXkgaWYgdGhlcmUgaXMgbm8gcGVuZGluZyB3cml0ZXMgYXQgdGhlIG1vbWVudC5cbiAgICAgICAgcmV0dXJuIHZvaWQgZS5yZXNvbHZlKCk7XG4gICAgICAgIGNvbnN0IHMgPSBuLktvLmdldCh0KSB8fCBbXTtcbiAgICAgICAgcy5wdXNoKGUpLCBuLktvLnNldCh0LCBzKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBrbyh0LCBcIkluaXRpYWxpemF0aW9uIG9mIHdhaXRGb3JQZW5kaW5nV3JpdGVzKCkgb3BlcmF0aW9uIGZhaWxlZFwiKTtcbiAgICAgICAgZS5yZWplY3Qobik7XG4gICAgfVxufVxuXG4vKipcbiAqIFRyaWdnZXJzIHRoZSBjYWxsYmFja3MgdGhhdCBhcmUgd2FpdGluZyBmb3IgdGhpcyBiYXRjaCBpZCB0byBnZXQgYWNrbm93bGVkZ2VkIGJ5IHNlcnZlcixcbiAqIGlmIHRoZXJlIGFyZSBhbnkuXG4gKi8gZnVuY3Rpb24gZmModCwgZSkge1xuICAgICh0LktvLmdldChlKSB8fCBbXSkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgIHQucmVzb2x2ZSgpO1xuICAgIH0pKSwgdC5Lby5kZWxldGUoZSk7XG59XG5cbi8qKiBSZWplY3QgYWxsIG91dHN0YW5kaW5nIGNhbGxiYWNrcyB3YWl0aW5nIGZvciBwZW5kaW5nIHdyaXRlcyB0byBjb21wbGV0ZS4gKi8gZnVuY3Rpb24gZGModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBxKHQpO1xuICAgIGxldCBpID0gcy5xb1tzLmN1cnJlbnRVc2VyLnRvS2V5KCldO1xuICAgIC8vIE5PVEU6IE11dGF0aW9ucyByZXN0b3JlZCBmcm9tIHBlcnNpc3RlbmNlIHdvbid0IGhhdmUgY2FsbGJhY2tzLCBzbyBpdCdzXG4gICAgLy8gb2theSBmb3IgdGhlcmUgdG8gYmUgbm8gY2FsbGJhY2sgZm9yIHRoaXMgSUQuXG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgIGNvbnN0IHQgPSBpLmdldChlKTtcbiAgICAgICAgdCAmJiAobiA/IHQucmVqZWN0KG4pIDogdC5yZXNvbHZlKCksIGkgPSBpLnJlbW92ZShlKSksIHMucW9bcy5jdXJyZW50VXNlci50b0tleSgpXSA9IGk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB3Yyh0LCBlLCBuID0gbnVsbCkge1xuICAgIHQuc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldChlKTtcbiAgICBmb3IgKGNvbnN0IHMgb2YgdC5Gby5nZXQoZSkpIHQuT28uZGVsZXRlKHMpLCBuICYmIHQuJG8uR28ocywgbik7XG4gICAgaWYgKHQuRm8uZGVsZXRlKGUpLCB0LmlzUHJpbWFyeUNsaWVudCkge1xuICAgICAgICB0LlVvLmNzKGUpLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5Vby5jb250YWluc0tleShlKSB8fCBcbiAgICAgICAgICAgIC8vIFdlIHJlbW92ZWQgdGhlIGxhc3QgcmVmZXJlbmNlIGZvciB0aGlzIGtleVxuICAgICAgICAgICAgX2ModCwgZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9jKHQsIGUpIHtcbiAgICB0Lk1vLmRlbGV0ZShlLnBhdGguY2Fub25pY2FsU3RyaW5nKCkpO1xuICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB0aGUgdGFyZ2V0IGFscmVhZHkgZ290IHJlbW92ZWQgYmVjYXVzZSB0aGUgcXVlcnkgZmFpbGVkLiBJbiB0aGF0IGNhc2UsXG4gICAgLy8gdGhlIGtleSB3b24ndCBleGlzdCBpbiBgbGltYm9UYXJnZXRzQnlLZXlgLiBPbmx5IGRvIHRoZSBjbGVhbnVwIGlmIHdlIHN0aWxsIGhhdmUgdGhlIHRhcmdldC5cbiAgICBjb25zdCBuID0gdC5Mby5nZXQoZSk7XG4gICAgbnVsbCAhPT0gbiAmJiAoYW8odC5yZW1vdGVTdG9yZSwgbiksIHQuTG8gPSB0LkxvLnJlbW92ZShlKSwgdC5Cby5kZWxldGUobiksIHljKHQpKTtcbn1cblxuZnVuY3Rpb24gbWModCwgZSwgbikge1xuICAgIGZvciAoY29uc3QgcyBvZiBuKSBpZiAocyBpbnN0YW5jZW9mIEpvKSB0LlVvLmFkZFJlZmVyZW5jZShzLmtleSwgZSksIGdjKHQsIHMpOyBlbHNlIGlmIChzIGluc3RhbmNlb2YgWW8pIHtcbiAgICAgICAgJChcIlN5bmNFbmdpbmVcIiwgXCJEb2N1bWVudCBubyBsb25nZXIgaW4gbGltYm86IFwiICsgcy5rZXkpLCB0LlVvLnJlbW92ZVJlZmVyZW5jZShzLmtleSwgZSk7XG4gICAgICAgIHQuVW8uY29udGFpbnNLZXkocy5rZXkpIHx8IFxuICAgICAgICAvLyBXZSByZW1vdmVkIHRoZSBsYXN0IHJlZmVyZW5jZSBmb3IgdGhpcyBrZXlcbiAgICAgICAgX2ModCwgcy5rZXkpO1xuICAgIH0gZWxzZSBMKCk7XG59XG5cbmZ1bmN0aW9uIGdjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZS5rZXksIHMgPSBuLnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgdC5Mby5nZXQobikgfHwgdC5Nby5oYXMocykgfHwgKCQoXCJTeW5jRW5naW5lXCIsIFwiTmV3IGRvY3VtZW50IGluIGxpbWJvOiBcIiArIG4pLCB0Lk1vLmFkZChzKSwgXG4gICAgeWModCkpO1xufVxuXG4vKipcbiAqIFN0YXJ0cyBsaXN0ZW5zIGZvciBkb2N1bWVudHMgaW4gbGltYm8gdGhhdCBhcmUgZW5xdWV1ZWQgZm9yIHJlc29sdXRpb24sXG4gKiBzdWJqZWN0IHRvIGEgbWF4aW11bSBudW1iZXIgb2YgY29uY3VycmVudCByZXNvbHV0aW9ucy5cbiAqXG4gKiBXaXRob3V0IGJvdW5kaW5nIHRoZSBudW1iZXIgb2YgY29uY3VycmVudCByZXNvbHV0aW9ucywgdGhlIHNlcnZlciBjYW4gZmFpbFxuICogd2l0aCBcInJlc291cmNlIGV4aGF1c3RlZFwiIGVycm9ycyB3aGljaCBjYW4gbGVhZCB0byBwYXRob2xvZ2ljYWwgY2xpZW50XG4gKiBiZWhhdmlvciBhcyBzZWVuIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzI2ODMuXG4gKi8gZnVuY3Rpb24geWModCkge1xuICAgIGZvciAoO3QuTW8uc2l6ZSA+IDAgJiYgdC5Mby5zaXplIDwgdC5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczsgKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lk1vLnZhbHVlcygpLm5leHQoKS52YWx1ZTtcbiAgICAgICAgdC5Nby5kZWxldGUoZSk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgUHQoaHQuZnJvbVN0cmluZyhlKSksIHMgPSB0LmpvLm5leHQoKTtcbiAgICAgICAgdC5Cby5zZXQocywgbmV3IHRjKG4pKSwgdC5MbyA9IHQuTG8uaW5zZXJ0KG4sIHMpLCBjbyh0LnJlbW90ZVN0b3JlLCBuZXcgaWkoRWUod2Uobi5wYXRoKSksIHMsIDIgLyogTGltYm9SZXNvbHV0aW9uICovICwgWC5UKSk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBwYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCksIGkgPSBbXSwgciA9IFtdLCBvID0gW107XG4gICAgcy5Pby5pc0VtcHR5KCkgfHwgKHMuT28uZm9yRWFjaCgoKHQsIGMpID0+IHtcbiAgICAgICAgby5wdXNoKHMuV28oYywgZSwgbikudGhlbigodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICAgIHMuaXNQcmltYXJ5Q2xpZW50ICYmIHMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZShjLnRhcmdldElkLCB0LmZyb21DYWNoZSA/IFwibm90LWN1cnJlbnRcIiA6IFwiY3VycmVudFwiKSwgXG4gICAgICAgICAgICAgICAgaS5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBvci5rbihjLnRhcmdldElkLCB0KTtcbiAgICAgICAgICAgICAgICByLnB1c2goZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSk7XG4gICAgfSkpLCBhd2FpdCBQcm9taXNlLmFsbChvKSwgcy4kby5ScihpKSwgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gcSh0KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJub3RpZnlMb2NhbFZpZXdDaGFuZ2VzXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IGpzLmZvckVhY2goZSwgKGUgPT4ganMuZm9yRWFjaChlLk5uLCAocyA9PiBuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZSh0LCBlLnRhcmdldElkLCBzKSkpLm5leHQoKCgpID0+IGpzLmZvckVhY2goZS54biwgKHMgPT4gbi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UodCwgZS50YXJnZXRJZCwgcykpKSkpKSkpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgaWYgKCFIcyh0KSkgdGhyb3cgdDtcbiAgICAgICAgICAgIC8vIElmIGBub3RpZnlMb2NhbFZpZXdDaGFuZ2VzYCBmYWlscywgd2UgZGlkIG5vdCBhZHZhbmNlIHRoZSBzZXF1ZW5jZVxuICAgICAgICAgICAgLy8gbnVtYmVyIGZvciB0aGUgZG9jdW1lbnRzIHRoYXQgd2VyZSBpbmNsdWRlZCBpbiB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgLy8gVGhpcyBtaWdodCB0cmlnZ2VyIHRoZW0gdG8gYmUgZGVsZXRlZCBlYXJsaWVyIHRoYW4gdGhleSBvdGhlcndpc2VcbiAgICAgICAgICAgIC8vIHdvdWxkIGhhdmUsIGJ1dCBpdCBzaG91bGQgbm90IGludmFsaWRhdGUgdGhlIGludGVncml0eSBvZiB0aGUgZGF0YS5cbiAgICAgICAgICAgICQoXCJMb2NhbFN0b3JlXCIsIFwiRmFpbGVkIHRvIHVwZGF0ZSBzZXF1ZW5jZSBudW1iZXJzOiBcIiArIHQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC50YXJnZXRJZDtcbiAgICAgICAgICAgIGlmICghdC5mcm9tQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbi5Vbi5nZXQoZSksIHMgPSB0LnNuYXBzaG90VmVyc2lvbiwgaSA9IHQud2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24ocyk7XG4gICAgICAgICAgICAgICAgLy8gQWR2YW5jZSB0aGUgbGFzdCBsaW1ibyBmcmVlIHNuYXBzaG90IHZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5VbiA9IG4uVW4uaW5zZXJ0KGUsIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfShzLmxvY2FsU3RvcmUsIHIpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gVGModCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIGlmICghbi5jdXJyZW50VXNlci5pc0VxdWFsKGUpKSB7XG4gICAgICAgICQoXCJTeW5jRW5naW5lXCIsIFwiVXNlciBjaGFuZ2UuIE5ldyB1c2VyOlwiLCBlLnRvS2V5KCkpO1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgaHIobi5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgbi5jdXJyZW50VXNlciA9IGUsIFxuICAgICAgICAvLyBGYWlscyB0YXNrcyB3YWl0aW5nIGZvciBwZW5kaW5nIHdyaXRlcyByZXF1ZXN0ZWQgYnkgcHJldmlvdXMgdXNlci5cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgdC5Lby5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0LnJlamVjdChuZXcgaihLLkNBTkNFTExFRCwgZSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgdC5Lby5jbGVhcigpO1xuICAgICAgICB9KG4sIFwiJ3dhaXRGb3JQZW5kaW5nV3JpdGVzJyBwcm9taXNlIGlzIHJlamVjdGVkIGR1ZSB0byBhIHVzZXIgY2hhbmdlLlwiKSwgXG4gICAgICAgIC8vIFRPRE8oYi8xMTQyMjY0MTcpOiBDb25zaWRlciBjYWxsaW5nIHRoaXMgb25seSBpbiB0aGUgcHJpbWFyeSB0YWIuXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaGFuZGxlVXNlckNoYW5nZShlLCB0LnJlbW92ZWRCYXRjaElkcywgdC5hZGRlZEJhdGNoSWRzKSwgYXdhaXQgcGMobiwgdC5Xbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBFYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCksIHMgPSBuLkJvLmdldChlKTtcbiAgICBpZiAocyAmJiBzLmtvKSByZXR1cm4gUG4oKS5hZGQocy5rZXkpO1xuICAgIHtcbiAgICAgICAgbGV0IHQgPSBQbigpO1xuICAgICAgICBjb25zdCBzID0gbi5Gby5nZXQoZSk7XG4gICAgICAgIGlmICghcykgcmV0dXJuIHQ7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBzKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gbi5Pby5nZXQoZSk7XG4gICAgICAgICAgICB0ID0gdC51bmlvbldpdGgocy52aWV3LlJvKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb25jaWxlIHRoZSBsaXN0IG9mIHN5bmNlZCBkb2N1bWVudHMgaW4gYW4gZXhpc3RpbmcgdmlldyB3aXRoIHRob3NlXG4gKiBmcm9tIHBlcnNpc3RlbmNlLlxuICovIGFzeW5jIGZ1bmN0aW9uIEljKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KSwgcyA9IGF3YWl0IHlyKG4ubG9jYWxTdG9yZSwgZS5xdWVyeSwgXG4gICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSBlLnZpZXcuTm8ocyk7XG4gICAgcmV0dXJuIG4uaXNQcmltYXJ5Q2xpZW50ICYmIG1jKG4sIGUudGFyZ2V0SWQsIGkuRG8pLCBpO1xufVxuXG4vKipcbiAqIFJldHJpZXZlcyBuZXdseSBjaGFuZ2VkIGRvY3VtZW50cyBmcm9tIHJlbW90ZSBkb2N1bWVudCBjYWNoZSBhbmQgcmFpc2VzXG4gKiBzbmFwc2hvdHMgaWYgbmVlZGVkLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gQWModCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIHJldHVybiBUcihlLmxvY2FsU3RvcmUpLnRoZW4oKHQgPT4gcGMoZSwgdCkpKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBtdXRhdGlvbiBzdGF0ZSB0byBhbiBleGlzdGluZyBiYXRjaC4gICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gUmModCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBxKHQpLCByID0gYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gcSh0KSwgcyA9IHEobi5Jbik7XG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiTG9va3VwIG11dGF0aW9uIGRvY3VtZW50c1wiLCBcInJlYWRvbmx5XCIsICh0ID0+IHMuWHQodCwgZSkubmV4dCgoZSA9PiBlID8gbi5Rbi5Qbih0LCBlKSA6IGpzLnJlc29sdmUobnVsbCkpKSkpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgIChpLmxvY2FsU3RvcmUsIGUpO1xuICAgIG51bGwgIT09IHIgPyAoXCJwZW5kaW5nXCIgPT09IG4gPyBcbiAgICAvLyBJZiB3ZSBhcmUgdGhlIHByaW1hcnkgY2xpZW50LCB3ZSBuZWVkIHRvIHNlbmQgdGhpcyB3cml0ZSB0byB0aGVcbiAgICAvLyBiYWNrZW5kLiBTZWNvbmRhcnkgY2xpZW50cyB3aWxsIGlnbm9yZSB0aGVzZSB3cml0ZXMgc2luY2UgdGhlaXIgcmVtb3RlXG4gICAgLy8gY29ubmVjdGlvbiBpcyBkaXNhYmxlZC5cbiAgICBhd2FpdCBFbyhpLnJlbW90ZVN0b3JlKSA6IFwiYWNrbm93bGVkZ2VkXCIgPT09IG4gfHwgXCJyZWplY3RlZFwiID09PSBuID8gKFxuICAgIC8vIE5PVEU6IEJvdGggdGhlc2UgbWV0aG9kcyBhcmUgbm8tb3BzIGZvciBiYXRjaGVzIHRoYXQgb3JpZ2luYXRlZCBmcm9tXG4gICAgLy8gb3RoZXIgY2xpZW50cy5cbiAgICBkYyhpLCBlLCBzIHx8IG51bGwpLCBmYyhpLCBlKSwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBxKHEodCkuSW4pLnRlKGUpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgIChpLmxvY2FsU3RvcmUsIGUpKSA6IEwoKSwgYXdhaXQgcGMoaSwgcikpIDogXG4gICAgLy8gQSB0aHJvdHRsZWQgdGFiIG1heSBub3QgaGF2ZSBzZWVuIHRoZSBtdXRhdGlvbiBiZWZvcmUgaXQgd2FzIGNvbXBsZXRlZFxuICAgIC8vIGFuZCByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLCBpbiB3aGljaCBjYXNlIHdlIHdvbid0IGhhdmUgY2FjaGVkXG4gICAgLy8gdGhlIGFmZmVjdGVkIGRvY3VtZW50cy4gSW4gdGhpcyBjYXNlIHdlIGNhbiBzYWZlbHkgaWdub3JlIHRoZSB1cGRhdGVcbiAgICAvLyBzaW5jZSB0aGF0IG1lYW5zIHdlIGRpZG4ndCBhcHBseSB0aGUgbXV0YXRpb24gbG9jYWxseSBhdCBhbGwgKGlmIHdlXG4gICAgLy8gaGFkLCB3ZSB3b3VsZCBoYXZlIGNhY2hlZCB0aGUgYWZmZWN0ZWQgZG9jdW1lbnRzKSwgYW5kIHNvIHdlIHdpbGwganVzdFxuICAgIC8vIHNlZSBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMgdmlhIG5vcm1hbCByZW1vdGUgZG9jdW1lbnQgdXBkYXRlc1xuICAgIC8vIGFzIGFwcGxpY2FibGUuXG4gICAgJChcIlN5bmNFbmdpbmVcIiwgXCJDYW5ub3QgYXBwbHkgbXV0YXRpb24gYmF0Y2ggd2l0aCBpZDogXCIgKyBlKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBxdWVyeSB0YXJnZXQgY2hhbmdlIGZyb20gYSBkaWZmZXJlbnQgdGFiLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIGJjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICBpZiAoQ2MobiksIE5jKG4pLCAhMCA9PT0gZSAmJiAhMCAhPT0gbi5Rbykge1xuICAgICAgICAvLyBTZWNvbmRhcnkgdGFicyBvbmx5IG1haW50YWluIFZpZXdzIGZvciB0aGVpciBsb2NhbCBsaXN0ZW5lcnMgYW5kIHRoZVxuICAgICAgICAvLyBWaWV3cyBpbnRlcm5hbCBzdGF0ZSBtYXkgbm90IGJlIDEwMCUgcG9wdWxhdGVkIChpbiBwYXJ0aWN1bGFyXG4gICAgICAgIC8vIHNlY29uZGFyeSB0YWJzIGRvbid0IHRyYWNrIHN5bmNlZERvY3VtZW50cywgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhlXG4gICAgICAgIC8vIHNlcnZlciBjb25zaWRlcnMgdG8gYmUgaW4gdGhlIHRhcmdldCkuIFNvIHdoZW4gYSBzZWNvbmRhcnkgYmVjb21lc1xuICAgICAgICAvLyBwcmltYXJ5LCB3ZSBuZWVkIHRvIG5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYWxsIHZpZXdzIGZvciBhbGwgdGFyZ2V0c1xuICAgICAgICAvLyBtYXRjaCB0aGUgc3RhdGUgb24gZGlzay5cbiAgICAgICAgY29uc3QgdCA9IG4uc2hhcmVkQ2xpZW50U3RhdGUuZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCksIGUgPSBhd2FpdCBQYyhuLCB0LnRvQXJyYXkoKSk7XG4gICAgICAgIG4uUW8gPSAhMCwgYXdhaXQgRG8obi5yZW1vdGVTdG9yZSwgITApO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkgY28obi5yZW1vdGVTdG9yZSwgdCk7XG4gICAgfSBlbHNlIGlmICghMSA9PT0gZSAmJiAhMSAhPT0gbi5Rbykge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGxldCBlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIG4uRm8uZm9yRWFjaCgoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaXNMb2NhbFF1ZXJ5VGFyZ2V0KGkpID8gdC5wdXNoKGkpIDogZSA9IGUudGhlbigoKCkgPT4gKHdjKG4sIGkpLCBcbiAgICAgICAgICAgIGdyKG4ubG9jYWxTdG9yZSwgaSwgXG4gICAgICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICEwKSkpKSwgYW8obi5yZW1vdGVTdG9yZSwgaSk7XG4gICAgICAgIH0pKSwgYXdhaXQgZSwgYXdhaXQgUGMobiwgdCksIFxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gcSh0KTtcbiAgICAgICAgICAgIGUuQm8uZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBhbyhlLnJlbW90ZVN0b3JlLCBuKTtcbiAgICAgICAgICAgIH0pKSwgZS5Vby51cygpLCBlLkJvID0gbmV3IE1hcCwgZS5MbyA9IG5ldyB3bihQdC5jb21wYXJhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlY29uY2lsZSB0aGUgcXVlcnkgdmlld3Mgb2YgdGhlIHByb3ZpZGVkIHF1ZXJ5IHRhcmdldHMgd2l0aCB0aGUgc3RhdGUgZnJvbVxuICogcGVyc2lzdGVuY2UuIFJhaXNlcyBzbmFwc2hvdHMgZm9yIGFueSBjaGFuZ2VzIHRoYXQgYWZmZWN0IHRoZSBsb2NhbFxuICogY2xpZW50IGFuZCByZXR1cm5zIHRoZSB1cGRhdGVkIHN0YXRlIG9mIGFsbCB0YXJnZXQncyBxdWVyeSBkYXRhLlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gVGhlIHN5bmMgZW5naW5lIGltcGxlbWVudGF0aW9uXG4gKiBAcGFyYW0gdGFyZ2V0cyAtIHRoZSBsaXN0IG9mIHRhcmdldHMgd2l0aCB2aWV3cyB0aGF0IG5lZWQgdG8gYmUgcmVjb21wdXRlZFxuICogQHBhcmFtIHRyYW5zaXRpb25Ub1ByaW1hcnkgLSBgdHJ1ZWAgaWZmIHRoZSB0YWIgdHJhbnNpdGlvbnMgZnJvbSBhIHNlY29uZGFyeVxuICogdGFiIHRvIGEgcHJpbWFyeSB0YWJcbiAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICAobiksIG4uUW8gPSAhMSwgYXdhaXQgRG8obi5yZW1vdGVTdG9yZSwgITEpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gUGModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBxKHQpLCBpID0gW10sIHIgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgY29uc3QgbiA9IHMuRm8uZ2V0KHQpO1xuICAgICAgICBpZiAobiAmJiAwICE9PSBuLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBoYXZlIGEgbG9jYWwgVmlldywgd2UgZmV0Y2ggdGhlaXIgY3VycmVudCBzdGF0ZVxuICAgICAgICAgICAgLy8gZnJvbSBMb2NhbFN0b3JlIChhcyB0aGUgcmVzdW1lIHRva2VuIGFuZCB0aGUgc25hcHNob3QgdmVyc2lvblxuICAgICAgICAgICAgLy8gbWlnaHQgaGF2ZSBjaGFuZ2VkKSBhbmQgcmVjb25jaWxlIHRoZWlyIHZpZXdzIHdpdGggdGhlIHBlcnNpc3RlZFxuICAgICAgICAgICAgLy8gc3RhdGUgKHRoZSBsaXN0IG9mIHN5bmNlZERvY3VtZW50cyBtYXkgaGF2ZSBnb3R0ZW4gb3V0IG9mIHN5bmMpLlxuICAgICAgICAgICAgZSA9IGF3YWl0IG1yKHMubG9jYWxTdG9yZSwgRWUoblswXSkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gcy5Pby5nZXQodCksIG4gPSBhd2FpdCBJYyhzLCBlKTtcbiAgICAgICAgICAgICAgICBuLnNuYXBzaG90ICYmIHIucHVzaChuLnNuYXBzaG90KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZvciBxdWVyaWVzIHRoYXQgbmV2ZXIgZXhlY3V0ZWQgb24gdGhpcyBjbGllbnQsIHdlIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIGFsbG9jYXRlIHRoZSB0YXJnZXQgaW4gTG9jYWxTdG9yZSBhbmQgaW5pdGlhbGl6ZSBhIG5ldyBWaWV3LlxuICAgICAgICAgICAgY29uc3QgbiA9IGF3YWl0IHByKHMubG9jYWxTdG9yZSwgdCk7XG4gICAgICAgICAgICBlID0gYXdhaXQgbXIocy5sb2NhbFN0b3JlLCBuKSwgYXdhaXQgc2MocywgdmMobiksIHQsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExKTtcbiAgICAgICAgfVxuICAgICAgICBpLnB1c2goZSk7XG4gICAgfVxuICAgIHJldHVybiBzLiRvLlJyKHIpLCBpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBgUXVlcnlgIG9iamVjdCBmcm9tIHRoZSBzcGVjaWZpZWQgYFRhcmdldGAuIFRoZXJlIGlzIG5vIHdheSB0b1xuICogb2J0YWluIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBzbyB3ZSBzeW50aGVzaXplIGEgYFF1ZXJ5YCBmcm9tIHRoZSBgVGFyZ2V0YFxuICogb2JqZWN0LlxuICpcbiAqIFRoZSBzeW50aGVzaXplZCByZXN1bHQgbWlnaHQgYmUgZGlmZmVyZW50IGZyb20gdGhlIG9yaWdpbmFsIGBRdWVyeWAsIGJ1dFxuICogc2luY2UgdGhlIHN5bnRoZXNpemVkIGBRdWVyeWAgc2hvdWxkIHJldHVybiB0aGUgc2FtZSByZXN1bHRzIGFzIHRoZVxuICogb3JpZ2luYWwgb25lIChvbmx5IHRoZSBwcmVzZW50YXRpb24gb2YgcmVzdWx0cyBtaWdodCBkaWZmZXIpLCB0aGUgcG90ZW50aWFsXG4gKiBkaWZmZXJlbmNlIHdpbGwgbm90IGNhdXNlIGlzc3Vlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIHZjKHQpIHtcbiAgICByZXR1cm4gZGUodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5vcmRlckJ5LCB0LmZpbHRlcnMsIHQubGltaXQsIFwiRlwiIC8qIEZpcnN0ICovICwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbn1cblxuLyoqIFJldHVybnMgdGhlIElEcyBvZiB0aGUgY2xpZW50cyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIFZjKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KTtcbiAgICByZXR1cm4gcShxKGUubG9jYWxTdG9yZSkucGVyc2lzdGVuY2UpLnBuKCk7XG59XG5cbi8qKiBBcHBsaWVzIGEgcXVlcnkgdGFyZ2V0IGNoYW5nZSBmcm9tIGEgZGlmZmVyZW50IHRhYi4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBTYyh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IHEodCk7XG4gICAgaWYgKGkuUW8pIFxuICAgIC8vIElmIHdlIHJlY2VpdmUgYSB0YXJnZXQgc3RhdGUgbm90aWZpY2F0aW9uIHZpYSBXZWJTdG9yYWdlLCB3ZSBhcmVcbiAgICAvLyBlaXRoZXIgYWxyZWFkeSBzZWNvbmRhcnkgb3IgYW5vdGhlciB0YWIgaGFzIHRha2VuIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgICQoXCJTeW5jRW5naW5lXCIsIFwiSWdub3JpbmcgdW5leHBlY3RlZCBxdWVyeSBzdGF0ZSBub3RpZmljYXRpb24uXCIpOyBlbHNlIGlmIChpLkZvLmhhcyhlKSkgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIFwiY3VycmVudFwiOlxuICAgICAgY2FzZSBcIm5vdC1jdXJyZW50XCI6XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCBUcihpLmxvY2FsU3RvcmUpLCBzID0gU24uY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UoZSwgXCJjdXJyZW50XCIgPT09IG4pO1xuICAgICAgICAgICAgYXdhaXQgcGMoaSwgdCwgcyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICBjYXNlIFwicmVqZWN0ZWRcIjpcbiAgICAgICAgYXdhaXQgZ3IoaS5sb2NhbFN0b3JlLCBlLCBcbiAgICAgICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITApLCB3YyhpLCBlLCBzKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIEwoKTtcbiAgICB9XG59XG5cbi8qKiBBZGRzIG9yIHJlbW92ZXMgV2F0Y2ggdGFyZ2V0cyBmb3IgcXVlcmllcyBmcm9tIGRpZmZlcmVudCB0YWJzLiAqLyBhc3luYyBmdW5jdGlvbiBEYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IENjKHQpO1xuICAgIGlmIChzLlFvKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICBpZiAocy5Gby5oYXModCkpIHtcbiAgICAgICAgICAgICAgICAvLyBBIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gYWRkZWQgaW4gYSBwcmV2aW91cyBhdHRlbXB0XG4gICAgICAgICAgICAgICAgJChcIlN5bmNFbmdpbmVcIiwgXCJBZGRpbmcgYW4gYWxyZWFkeSBhY3RpdmUgdGFyZ2V0IFwiICsgdCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgcHIocy5sb2NhbFN0b3JlLCB0KSwgbiA9IGF3YWl0IG1yKHMubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgICAgICBhd2FpdCBzYyhzLCB2YyhlKSwgbi50YXJnZXRJZCwgXG4gICAgICAgICAgICAvKmN1cnJlbnQ9Ki8gITEpLCBjbyhzLnJlbW90ZVN0b3JlLCBuKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgbikgXG4gICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUgc2luY2UgdGhlIHRhcmdldCBtaWdodCBoYXZlIGJlZW5cbiAgICAgICAgLy8gcmVtb3ZlZCBpZiBpdCBoYXMgYmVlbiByZWplY3RlZCBieSB0aGUgYmFja2VuZC5cbiAgICAgICAgcy5Gby5oYXModCkgJiYgXG4gICAgICAgIC8vIFJlbGVhc2UgcXVlcmllcyB0aGF0IGFyZSBzdGlsbCBhY3RpdmUuXG4gICAgICAgIGF3YWl0IGdyKHMubG9jYWxTdG9yZSwgdCwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBhbyhzLnJlbW90ZVN0b3JlLCB0KSwgd2MocywgdCk7XG4gICAgICAgIH0pKS5jYXRjaChGaSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBDYyh0KSB7XG4gICAgY29uc3QgZSA9IHEodCk7XG4gICAgcmV0dXJuIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQgPSBvYy5iaW5kKG51bGwsIGUpLCBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0ID0gRWMuYmluZChudWxsLCBlKSwgXG4gICAgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIucmVqZWN0TGlzdGVuID0gYWMuYmluZChudWxsLCBlKSwgZS4kby5SciA9IHFvLmJpbmQobnVsbCwgZS5ldmVudE1hbmFnZXIpLCBcbiAgICBlLiRvLkdvID0gS28uYmluZChudWxsLCBlLmV2ZW50TWFuYWdlciksIGU7XG59XG5cbmZ1bmN0aW9uIE5jKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KTtcbiAgICByZXR1cm4gZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuYXBwbHlTdWNjZXNzZnVsV3JpdGUgPSB1Yy5iaW5kKG51bGwsIGUpLCBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5yZWplY3RGYWlsZWRXcml0ZSA9IGhjLmJpbmQobnVsbCwgZSksIFxuICAgIGU7XG59XG5cbi8qKlxuICogTG9hZHMgYSBGaXJlc3RvcmUgYnVuZGxlIGludG8gdGhlIFNESy4gVGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMgd2hlblxuICogdGhlIGJ1bmRsZSBmaW5pc2hlZCBsb2FkaW5nLlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gU3luY0VuZ2luZSB0byB1c2UuXG4gKiBAcGFyYW0gYnVuZGxlUmVhZGVyIC0gQnVuZGxlIHRvIGxvYWQgaW50byB0aGUgU0RLLlxuICogQHBhcmFtIHRhc2sgLSBMb2FkQnVuZGxlVGFzayB1c2VkIHRvIHVwZGF0ZSB0aGUgbG9hZGluZyBwcm9ncmVzcyB0byBwdWJsaWMgQVBJLlxuICovIGZ1bmN0aW9uIHhjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gcSh0KTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIChhc3luYyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzID0gYXdhaXQgZS5nZXRNZXRhZGF0YSgpO1xuICAgICAgICAgICAgaWYgKGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gcSh0KSwgcyA9IGpuKGUuY3JlYXRlVGltZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJoYXNOZXdlckJ1bmRsZVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IG4uSmUuZ2V0QnVuZGxlTWV0YWRhdGEodCwgZS5pZCkpKS50aGVuKCh0ID0+ICEhdCAmJiB0LmNyZWF0ZVRpbWUuY29tcGFyZVRvKHMpID49IDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogU2F2ZXMgdGhlIGdpdmVuIGBCdW5kbGVNZXRhZGF0YWAgdG8gbG9jYWwgcGVyc2lzdGVuY2UuXG4gKi8gKHQubG9jYWxTdG9yZSwgcykpIHJldHVybiBhd2FpdCBlLmNsb3NlKCksIHZvaWQgbi5fY29tcGxldGVXaXRoKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0YXNrU3RhdGU6IFwiU3VjY2Vzc1wiLFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IHQudG90YWxEb2N1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzTG9hZGVkOiB0LnRvdGFsQnl0ZXMsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRG9jdW1lbnRzOiB0LnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbEJ5dGVzOiB0LnRvdGFsQnl0ZXNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfShzKSk7XG4gICAgICAgICAgICBuLl91cGRhdGVQcm9ncmVzcyhIbyhzKSk7XG4gICAgICAgICAgICBjb25zdCBpID0gbmV3IHpvKHMsIHQubG9jYWxTdG9yZSwgZS5OKTtcbiAgICAgICAgICAgIGxldCByID0gYXdhaXQgZS56bygpO1xuICAgICAgICAgICAgZm9yICg7cjsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGF3YWl0IGkubW8ocik7XG4gICAgICAgICAgICAgICAgdCAmJiBuLl91cGRhdGVQcm9ncmVzcyh0KSwgciA9IGF3YWl0IGUuem8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG8gPSBhd2FpdCBpLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAvLyBUT0RPKGIvMTYwODc2NDQzKTogVGhpcyBjdXJyZW50bHkgcmFpc2VzIHNuYXBzaG90cyB3aXRoXG4gICAgICAgICAgICAvLyBgZnJvbUNhY2hlPWZhbHNlYCBpZiB1c2VycyBhbHJlYWR5IGxpc3RlbiB0byBzb21lIHF1ZXJpZXMgYW5kIGJ1bmRsZXNcbiAgICAgICAgICAgIC8vIGhhcyBuZXdlciB2ZXJzaW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGModCwgby5FbiwgXG4gICAgICAgICAgICAvKiByZW1vdGVFdmVudCAqLyB2b2lkIDApLCBcbiAgICAgICAgICAgIC8vIFNhdmUgbWV0YWRhdGEsIHNvIGxvYWRpbmcgdGhlIHNhbWUgYnVuZGxlIHdpbGwgc2tpcC5cbiAgICAgICAgICAgIGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gcSh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgYnVuZGxlXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IG4uSmUuc2F2ZUJ1bmRsZU1ldGFkYXRhKHQsIGUpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFJldHVybnMgYSBwcm9taXNlIG9mIGEgYE5hbWVkUXVlcnlgIGFzc29jaWF0ZWQgd2l0aCBnaXZlbiBxdWVyeSBuYW1lLiBQcm9taXNlXG4gKiByZXNvbHZlcyB0byB1bmRlZmluZWQgaWYgbm8gcGVyc2lzdGVkIGRhdGEgY2FuIGJlIGZvdW5kLlxuICovICh0LmxvY2FsU3RvcmUsIHMpLCBuLl9jb21wbGV0ZVdpdGgoby5wcm9ncmVzcyk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIEYoXCJTeW5jRW5naW5lXCIsIGBMb2FkaW5nIGJ1bmRsZSBmYWlsZWQgd2l0aCAke3R9YCksIG4uX2ZhaWxXaXRoKHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIGluLW1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAqIFVzZXMgRWFnZXJHQyBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gKi8pKHMsIGUsIG4pLnRoZW4oKCgpID0+IHtcbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS5ub3RpZnlCdW5kbGVMb2FkZWQoKTtcbiAgICB9KSk7XG59XG5cbmNsYXNzIGtjIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIHRoaXMuTiA9IFlyKHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gdGhpcy5Ibyh0KSwgdGhpcy5wZXJzaXN0ZW5jZSA9IHRoaXMuSm8odCksIFxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnN0YXJ0KCksIHRoaXMuZ2NTY2hlZHVsZXIgPSB0aGlzLllvKHQpLCB0aGlzLmxvY2FsU3RvcmUgPSB0aGlzLlhvKHQpO1xuICAgIH1cbiAgICBZbyh0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBYbyh0KSB7XG4gICAgICAgIHJldHVybiB1cih0aGlzLnBlcnNpc3RlbmNlLCBuZXcgY3IsIHQuaW5pdGlhbFVzZXIsIHRoaXMuTik7XG4gICAgfVxuICAgIEpvKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDcih4ci5OcywgdGhpcy5OKTtcbiAgICB9XG4gICAgSG8odCkge1xuICAgICAgICByZXR1cm4gbmV3IEtyO1xuICAgIH1cbiAgICBhc3luYyB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuZ2NTY2hlZHVsZXIgJiYgdGhpcy5nY1NjaGVkdWxlci5zdG9wKCksIGF3YWl0IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc2h1dGRvd24oKSwgXG4gICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2Uuc2h1dGRvd24oKTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBJbmRleGVkREIgcGVyc2lzdGVuY2UuXG4gKi8gY2xhc3MgJGMgZXh0ZW5kcyBrYyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLlpvID0gdCwgdGhpcy5jYWNoZVNpemVCeXRlcyA9IGUsIHRoaXMuZm9yY2VPd25lcnNoaXAgPSBuLCB0aGlzLnN5bmNocm9uaXplVGFicyA9ICExO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKHQpIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuaW5pdGlhbGl6ZSh0KSwgYXdhaXQgRXIodGhpcy5sb2NhbFN0b3JlKSwgYXdhaXQgdGhpcy5aby5pbml0aWFsaXplKHRoaXMsIHQpLCBcbiAgICAgICAgLy8gRW5xdWV1ZSB3cml0ZXMgZnJvbSBhIHByZXZpb3VzIHNlc3Npb25cbiAgICAgICAgYXdhaXQgTmModGhpcy5aby5zeW5jRW5naW5lKSwgYXdhaXQgRW8odGhpcy5aby5yZW1vdGVTdG9yZSksIFxuICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xuICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLm5uKCgoKSA9PiAodGhpcy5nY1NjaGVkdWxlciAmJiAhdGhpcy5nY1NjaGVkdWxlci5zdGFydGVkICYmIHRoaXMuZ2NTY2hlZHVsZXIuc3RhcnQodGhpcy5sb2NhbFN0b3JlKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgIH1cbiAgICBYbyh0KSB7XG4gICAgICAgIHJldHVybiB1cih0aGlzLnBlcnNpc3RlbmNlLCBuZXcgY3IsIHQuaW5pdGlhbFVzZXIsIHRoaXMuTik7XG4gICAgfVxuICAgIFlvKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuZ2FyYmFnZUNvbGxlY3RvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBCaShlLCB0LmFzeW5jUXVldWUpO1xuICAgIH1cbiAgICBKbyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBzcih0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLCB0LmRhdGFiYXNlSW5mby5wZXJzaXN0ZW5jZUtleSksIG4gPSB2b2lkIDAgIT09IHRoaXMuY2FjaGVTaXplQnl0ZXMgPyBSaS53aXRoQ2FjaGVTaXplKHRoaXMuY2FjaGVTaXplQnl0ZXMpIDogUmkuREVGQVVMVDtcbiAgICAgICAgcmV0dXJuIG5ldyB0cih0aGlzLnN5bmNocm9uaXplVGFicywgZSwgdC5jbGllbnRJZCwgbiwgdC5hc3luY1F1ZXVlLCBIcigpLCBKcigpLCB0aGlzLk4sIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsICEhdGhpcy5mb3JjZU93bmVyc2hpcCk7XG4gICAgfVxuICAgIEhvKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBLcjtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBtdWx0aS10YWIgSW5kZXhlZERCXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBJbiB0aGUgbGVnYWN5IGNsaWVudCwgdGhpcyBwcm92aWRlciBpcyB1c2VkIHRvIHByb3ZpZGUgYm90aCBtdWx0aS10YWIgYW5kXG4gKiBub24tbXVsdGktdGFiIHBlcnNpc3RlbmNlIHNpbmNlIHdlIGNhbm5vdCB0ZWxsIGF0IGJ1aWxkIHRpbWUgd2hldGhlclxuICogYHN5bmNocm9uaXplVGFic2Agd2lsbCBiZSBlbmFibGVkLlxuICovIGNsYXNzIE9jIGV4dGVuZHMgJGMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgZSwgLyogZm9yY2VPd25lcnNoaXA9ICovICExKSwgdGhpcy5abyA9IHQsIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBlLCB0aGlzLnN5bmNocm9uaXplVGFicyA9ICEwO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKHQpIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuaW5pdGlhbGl6ZSh0KTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuWm8uc3luY0VuZ2luZTtcbiAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSBpbnN0YW5jZW9mIHFyICYmICh0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN5bmNFbmdpbmUgPSB7XG4gICAgICAgICAgICBfaTogUmMuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIG1pOiBTYy5iaW5kKG51bGwsIGUpLFxuICAgICAgICAgICAgZ2k6IERjLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICBwbjogVmMuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIHdpOiBBYy5iaW5kKG51bGwsIGUpXG4gICAgICAgIH0sIGF3YWl0IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc3RhcnQoKSksIFxuICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xuICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLm5uKChhc3luYyB0ID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGJjKHRoaXMuWm8uc3luY0VuZ2luZSwgdCksIHRoaXMuZ2NTY2hlZHVsZXIgJiYgKHQgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCA/IHRoaXMuZ2NTY2hlZHVsZXIuc3RhcnQodGhpcy5sb2NhbFN0b3JlKSA6IHQgfHwgdGhpcy5nY1NjaGVkdWxlci5zdG9wKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEhvKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEhyKCk7XG4gICAgICAgIGlmICghcXIuYnQoZSkpIHRocm93IG5ldyBqKEsuVU5JTVBMRU1FTlRFRCwgXCJJbmRleGVkREIgcGVyc2lzdGVuY2UgaXMgb25seSBhdmFpbGFibGUgb24gcGxhdGZvcm1zIHRoYXQgc3VwcG9ydCBMb2NhbFN0b3JhZ2UuXCIpO1xuICAgICAgICBjb25zdCBuID0gc3IodC5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCwgdC5kYXRhYmFzZUluZm8ucGVyc2lzdGVuY2VLZXkpO1xuICAgICAgICByZXR1cm4gbmV3IHFyKGUsIHQuYXN5bmNRdWV1ZSwgbiwgdC5jbGllbnRJZCwgdC5pbml0aWFsVXNlcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGFuZCB3aXJlcyB0aGUgY29tcG9uZW50cyB0aGF0IGFyZSBuZWVkZWQgdG8gaW50ZXJmYWNlIHdpdGggdGhlXG4gKiBuZXR3b3JrLlxuICovIGNsYXNzIEZjIHtcbiAgICBhc3luYyBpbml0aWFsaXplKHQsIGUpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlIHx8ICh0aGlzLmxvY2FsU3RvcmUgPSB0LmxvY2FsU3RvcmUsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSB0LnNoYXJlZENsaWVudFN0YXRlLCBcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSB0aGlzLmNyZWF0ZURhdGFzdG9yZShlKSwgdGhpcy5yZW1vdGVTdG9yZSA9IHRoaXMuY3JlYXRlUmVtb3RlU3RvcmUoZSksIFxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IHRoaXMuY3JlYXRlRXZlbnRNYW5hZ2VyKGUpLCB0aGlzLnN5bmNFbmdpbmUgPSB0aGlzLmNyZWF0ZVN5bmNFbmdpbmUoZSwgXG4gICAgICAgIC8qIHN0YXJ0QXNQcmltYXJ5PSovICF0LnN5bmNocm9uaXplVGFicyksIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUub25saW5lU3RhdGVIYW5kbGVyID0gdCA9PiBjYyh0aGlzLnN5bmNFbmdpbmUsIHQsIDEgLyogU2hhcmVkQ2xpZW50U3RhdGUgKi8pLCBcbiAgICAgICAgdGhpcy5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuaGFuZGxlQ3JlZGVudGlhbENoYW5nZSA9IFRjLmJpbmQobnVsbCwgdGhpcy5zeW5jRW5naW5lKSwgXG4gICAgICAgIGF3YWl0IERvKHRoaXMucmVtb3RlU3RvcmUsIHRoaXMuc3luY0VuZ2luZS5pc1ByaW1hcnlDbGllbnQpKTtcbiAgICB9XG4gICAgY3JlYXRlRXZlbnRNYW5hZ2VyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMbztcbiAgICB9XG4gICAgY3JlYXRlRGF0YXN0b3JlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFlyKHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCBuID0gKHMgPSB0LmRhdGFiYXNlSW5mbywgbmV3IHpyKHMpKTtcbiAgICAgICAgdmFyIHM7XG4gICAgICAgIC8qKiBSZXR1cm4gdGhlIFBsYXRmb3JtLXNwZWNpZmljIGNvbm5lY3Rpdml0eSBtb25pdG9yLiAqLyAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgbm8odCwgZSwgbik7XG4gICAgICAgIH0odC5jcmVkZW50aWFscywgbiwgZSk7XG4gICAgfVxuICAgIGNyZWF0ZVJlbW90ZVN0b3JlKHQpIHtcbiAgICAgICAgcmV0dXJuIGUgPSB0aGlzLmxvY2FsU3RvcmUsIG4gPSB0aGlzLmRhdGFzdG9yZSwgcyA9IHQuYXN5bmNRdWV1ZSwgaSA9IHQgPT4gY2ModGhpcy5zeW5jRW5naW5lLCB0LCAwIC8qIFJlbW90ZVN0b3JlICovKSwgXG4gICAgICAgIHIgPSBRci5idCgpID8gbmV3IFFyIDogbmV3IGpyLCBuZXcgaW8oZSwgbiwgcywgaSwgcik7XG4gICAgICAgIHZhciBlLCBuLCBzLCBpLCByO1xuICAgICAgICAvKiogUmUtZW5hYmxlcyB0aGUgbmV0d29yay4gSWRlbXBvdGVudC4gKi8gICAgfVxuICAgIGNyZWF0ZVN5bmNFbmdpbmUodCwgZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTWFuYWdlcyBzdGF0ZSBzeW5jaHJvbml6YXRpb24gaW4gbXVsdGktdGFiIGVudmlyb25tZW50cy5cbiAgICAgICAgcywgaSwgciwgbykge1xuICAgICAgICAgICAgY29uc3QgYyA9IG5ldyBlYyh0LCBlLCBuLCBzLCBpLCByKTtcbiAgICAgICAgICAgIHJldHVybiBvICYmIChjLlFvID0gITApLCBjO1xuICAgICAgICB9KHRoaXMubG9jYWxTdG9yZSwgdGhpcy5yZW1vdGVTdG9yZSwgdGhpcy5ldmVudE1hbmFnZXIsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsIHQuaW5pdGlhbFVzZXIsIHQubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMsIGUpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gcSh0KTtcbiAgICAgICAgICAgICQoXCJSZW1vdGVTdG9yZVwiLCBcIlJlbW90ZVN0b3JlIHNodXR0aW5nIGRvd24uXCIpLCBlLldyLmFkZCg1IC8qIFNodXRkb3duICovKSwgYXdhaXQgb28oZSksIFxuICAgICAgICAgICAgZS56ci5zaHV0ZG93bigpLCBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biAocmF0aGVyIHRoYW4gT2ZmbGluZSkgdG8gYXZvaWQgcG90ZW50aWFsbHlcbiAgICAgICAgICAgIC8vIHRyaWdnZXJpbmcgc3B1cmlvdXMgbGlzdGVuZXIgZXZlbnRzIHdpdGggY2FjaGVkIGRhdGEsIGV0Yy5cbiAgICAgICAgICAgIGUuSHIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pO1xuICAgICAgICB9KHRoaXMucmVtb3RlU3RvcmUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG93IG1hbnkgYnl0ZXMgdG8gcmVhZCBlYWNoIHRpbWUgd2hlbiBgUmVhZGFibGVTdHJlYW1SZWFkZXIucmVhZCgpYCBpc1xuICogY2FsbGVkLiBPbmx5IGFwcGxpY2FibGUgZm9yIGJ5dGUgc3RyZWFtcyB0aGF0IHdlIGNvbnRyb2wgKGUuZy4gdGhvc2UgYmFja2VkXG4gKiBieSBhbiBVSW50OEFycmF5KS5cbiAqL1xuLyoqXG4gKiBCdWlsZHMgYSBgQnl0ZVN0cmVhbVJlYWRlcmAgZnJvbSBhIFVJbnQ4QXJyYXkuXG4gKiBAcGFyYW0gc291cmNlIC0gVGhlIGRhdGEgc291cmNlIHRvIHVzZS5cbiAqIEBwYXJhbSBieXRlc1BlclJlYWQgLSBIb3cgbWFueSBieXRlcyBlYWNoIGByZWFkKClgIGZyb20gdGhlIHJldHVybmVkIHJlYWRlclxuICogICAgICAgIHdpbGwgcmVhZC5cbiAqL1xuZnVuY3Rpb24gTWModCwgZSA9IDEwMjQwKSB7XG4gICAgbGV0IG4gPSAwO1xuICAgIC8vIFRoZSBUeXBlU2NyaXB0IGRlZmluaXRpb24gZm9yIFJlYWRhYmxlU3RyZWFtUmVhZGVyIGNoYW5nZWQuIFdlIHVzZVxuICAgIC8vIGBhbnlgIGhlcmUgdG8gYWxsb3cgdGhpcyBjb2RlIHRvIGNvbXBpbGUgd2l0aCBkaWZmZXJlbnQgdmVyc2lvbnMuXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvNDI5NzBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBhc3luYyByZWFkKCkge1xuICAgICAgICAgICAgaWYgKG4gPCB0LmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0ge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdC5zbGljZShuLCBuICsgZSksXG4gICAgICAgICAgICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbiArPSBlLCBzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkb25lOiAhMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgY2FuY2VsKCkge30sXG4gICAgICAgIHJlbGVhc2VMb2NrKCkge30sXG4gICAgICAgIGNsb3NlZDogUHJvbWlzZS5yZWplY3QoXCJ1bmltcGxlbWVudGVkXCIpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogT24gd2ViLCBhIGBSZWFkYWJsZVN0cmVhbWAgaXMgd3JhcHBlZCBhcm91bmQgYnkgYSBgQnl0ZVN0cmVhbVJlYWRlcmAuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKlxuICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIE9ic2VydmVyPFQ+IHRoYXQgd2lsbCBkaXNwYXRjaCBldmVudHNcbiAqIGFzeW5jaHJvbm91c2x5LiBUbyBhbGxvdyBpbW1lZGlhdGUgc2lsZW5jaW5nLCBhIG11dGUgY2FsbCBpcyBhZGRlZCB3aGljaFxuICogY2F1c2VzIGV2ZW50cyBzY2hlZHVsZWQgdG8gbm8gbG9uZ2VyIGJlIHJhaXNlZC5cbiAqL1xuY2xhc3MgTGMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiBzZXQgdG8gdHJ1ZSwgd2lsbCBub3QgcmFpc2UgZnV0dXJlIGV2ZW50cy4gTmVjZXNzYXJ5IHRvIGRlYWwgd2l0aFxuICAgICAgICAgKiBhc3luYyBkZXRhY2htZW50IG9mIGxpc3RlbmVyLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tdXRlZCA9ICExO1xuICAgIH1cbiAgICBuZXh0KHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5uZXh0ICYmIHRoaXMudGModGhpcy5vYnNlcnZlci5uZXh0LCB0KTtcbiAgICB9XG4gICAgZXJyb3IodCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLmVycm9yID8gdGhpcy50Yyh0aGlzLm9ic2VydmVyLmVycm9yLCB0KSA6IGNvbnNvbGUuZXJyb3IoXCJVbmNhdWdodCBFcnJvciBpbiBzbmFwc2hvdCBsaXN0ZW5lcjpcIiwgdCk7XG4gICAgfVxuICAgIGVjKCkge1xuICAgICAgICB0aGlzLm11dGVkID0gITA7XG4gICAgfVxuICAgIHRjKHQsIGUpIHtcbiAgICAgICAgdGhpcy5tdXRlZCB8fCBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm11dGVkIHx8IHQoZSk7XG4gICAgICAgIH0pLCAwKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY2xhc3MgcmVwcmVzZW50aW5nIGEgYnVuZGxlLlxuICpcbiAqIFRha2VzIGEgYnVuZGxlIHN0cmVhbSBvciBidWZmZXIsIGFuZCBwcmVzZW50cyBhYnN0cmFjdGlvbnMgdG8gcmVhZCBidW5kbGVkXG4gKiBlbGVtZW50cyBvdXQgb2YgdGhlIHVuZGVybHlpbmcgY29udGVudC5cbiAqLyBjbGFzcyBCYyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSByZWFkZXIgdG8gcmVhZCBmcm9tIHVuZGVybHlpbmcgYmluYXJ5IGJ1bmRsZSBkYXRhIHNvdXJjZS4gKi9cbiAgICB0LCBlKSB7XG4gICAgICAgIHRoaXMubmMgPSB0LCB0aGlzLk4gPSBlLCBcbiAgICAgICAgLyoqIENhY2hlZCBidW5kbGUgbWV0YWRhdGEuICovXG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBuZXcgUSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnRlcm5hbCBidWZmZXIgdG8gaG9sZCBidW5kbGUgY29udGVudCwgYWNjdW11bGF0aW5nIGluY29tcGxldGUgZWxlbWVudFxuICAgICAgICAgKiBjb250ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5idWZmZXIgPSBuZXcgVWludDhBcnJheSwgdGhpcy5zYyA9IG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpLCBcbiAgICAgICAgLy8gUmVhZCB0aGUgbWV0YWRhdGEgKHdoaWNoIGlzIHRoZSBmaXJzdCBlbGVtZW50KS5cbiAgICAgICAgdGhpcy5pYygpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgdCAmJiB0LndvKCkgPyB0aGlzLm1ldGFkYXRhLnJlc29sdmUodC5wYXlsb2FkLm1ldGFkYXRhKSA6IHRoaXMubWV0YWRhdGEucmVqZWN0KG5ldyBFcnJvcihgVGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGJ1bmRsZSBpcyBub3QgYSBtZXRhZGF0YSwgaXQgaXNcXG4gICAgICAgICAgICAgJHtKU09OLnN0cmluZ2lmeShudWxsID09IHQgPyB2b2lkIDAgOiB0LnBheWxvYWQpfWApKTtcbiAgICAgICAgfSksICh0ID0+IHRoaXMubWV0YWRhdGEucmVqZWN0KHQpKSk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYy5jYW5jZWwoKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLnByb21pc2U7XG4gICAgfVxuICAgIGFzeW5jIHpvKCkge1xuICAgICAgICAvLyBNYWtlcyBzdXJlIG1ldGFkYXRhIGlzIHJlYWQgYmVmb3JlIHByb2NlZWRpbmcuXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldE1ldGFkYXRhKCksIHRoaXMuaWMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgaGVhZCBvZiBpbnRlcm5hbCBidWZmZXIsIGFuZCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tXG4gICAgICogdW5kZXJseWluZyBzdHJlYW0gaWYgYSBjb21wbGV0ZSBlbGVtZW50IGNhbm5vdCBiZSBmb3VuZCwgdW50aWwgYW5cbiAgICAgKiBlbGVtZW50KGluY2x1ZGluZyB0aGUgcHJlZml4ZWQgbGVuZ3RoIGFuZCB0aGUgSlNPTiBzdHJpbmcpIGlzIGZvdW5kLlxuICAgICAqXG4gICAgICogT25jZSBhIGNvbXBsZXRlIGVsZW1lbnQgaXMgcmVhZCwgaXQgaXMgZHJvcHBlZCBmcm9tIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgZWl0aGVyIHRoZSBidW5kbGVkIGVsZW1lbnQsIG9yIG51bGwgaWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgb2ZcbiAgICAgKiB0aGUgc3RyZWFtLlxuICAgICAqLyAgICBhc3luYyBpYygpIHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHRoaXMucmMoKTtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zYy5kZWNvZGUodCksIG4gPSBOdW1iZXIoZSk7XG4gICAgICAgIGlzTmFOKG4pICYmIHRoaXMub2MoYGxlbmd0aCBzdHJpbmcgKCR7ZX0pIGlzIG5vdCB2YWxpZCBudW1iZXJgKTtcbiAgICAgICAgY29uc3QgcyA9IGF3YWl0IHRoaXMuY2Mobik7XG4gICAgICAgIHJldHVybiBuZXcgV28oSlNPTi5wYXJzZShzKSwgdC5sZW5ndGggKyBuKTtcbiAgICB9XG4gICAgLyoqIEZpcnN0IGluZGV4IG9mICd7JyBmcm9tIHRoZSB1bmRlcmx5aW5nIGJ1ZmZlci4gKi8gICAgYWMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5maW5kSW5kZXgoKHQgPT4gdCA9PT0gXCJ7XCIuY2hhckNvZGVBdCgwKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGludGVybmFsIGJ1ZmZlciwgdW50aWwgdGhlIGZpcnN0ICd7JywgYW5kXG4gICAgICogcmV0dXJuIHRoZSBjb250ZW50LlxuICAgICAqXG4gICAgICogSWYgcmVhY2hlZCBlbmQgb2YgdGhlIHN0cmVhbSwgcmV0dXJucyBhIG51bGwuXG4gICAgICovICAgIGFzeW5jIHJjKCkge1xuICAgICAgICBmb3IgKDt0aGlzLmFjKCkgPCAwOyApIHtcbiAgICAgICAgICAgIGlmIChhd2FpdCB0aGlzLnVjKCkpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIEJyb2tlIG91dCBvZiB0aGUgbG9vcCBiZWNhdXNlIHVuZGVybHlpbmcgc3RyZWFtIGlzIGNsb3NlZCwgYW5kIHRoZXJlXG4gICAgICAgIC8vIGhhcHBlbnMgdG8gYmUgbm8gbW9yZSBkYXRhIHRvIHByb2Nlc3MuXG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IHRoaXMuYnVmZmVyLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmFjKCk7XG4gICAgICAgIC8vIEJyb2tlIG91dCBvZiB0aGUgbG9vcCBiZWNhdXNlIHVuZGVybHlpbmcgc3RyZWFtIGlzIGNsb3NlZCwgYnV0IHN0aWxsXG4gICAgICAgIC8vIGNhbm5vdCBmaW5kIGFuIG9wZW4gYnJhY2tldC5cbiAgICAgICAgICAgICAgICB0IDwgMCAmJiB0aGlzLm9jKFwiUmVhY2hlZCB0aGUgZW5kIG9mIGJ1bmRsZSB3aGVuIGEgbGVuZ3RoIHN0cmluZyBpcyBleHBlY3RlZC5cIik7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0KTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBpbnRlcm5hbCBidWZmZXIgdG8gZHJvcCB0aGUgcmVhZCBsZW5ndGguXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UodCksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gYSBzcGVjaWZpZWQgcG9zaXRpb24gZnJvbSB0aGUgaW50ZXJuYWwgYnVmZmVyLCBmb3IgYSBzcGVjaWZpZWRcbiAgICAgKiBudW1iZXIgb2YgYnl0ZXMsIHB1bGxpbmcgbW9yZSBkYXRhIGZyb20gdGhlIHVuZGVybHlpbmcgc3RyZWFtIGlmIG5lZWRlZC5cbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgZGVjb2RlZCBmcm9tIHRoZSByZWFkIGJ5dGVzLlxuICAgICAqLyAgICBhc3luYyBjYyh0KSB7XG4gICAgICAgIGZvciAoO3RoaXMuYnVmZmVyLmxlbmd0aCA8IHQ7ICkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy51YygpICYmIHRoaXMub2MoXCJSZWFjaGVkIHRoZSBlbmQgb2YgYnVuZGxlIHdoZW4gbW9yZSBpcyBleHBlY3RlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc2MuZGVjb2RlKHRoaXMuYnVmZmVyLnNsaWNlKDAsIHQpKTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBpbnRlcm5hbCBidWZmZXIgdG8gZHJvcCB0aGUgcmVhZCBqc29uIHN0cmluZy5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSh0KSwgZTtcbiAgICB9XG4gICAgb2ModCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRocm93IHRoaXMubmMuY2FuY2VsKCksIG5ldyBFcnJvcihgSW52YWxpZCBidW5kbGUgZm9ybWF0OiAke3R9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFB1bGxzIG1vcmUgZGF0YSBmcm9tIHVuZGVybHlpbmcgc3RyZWFtIHRvIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKiBSZXR1cm5zIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIHN0cmVhbSBpcyBmaW5pc2hlZC5cbiAgICAgKi8gICAgYXN5bmMgdWMoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLm5jLnJlYWQoKTtcbiAgICAgICAgaWYgKCF0LmRvbmUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlci5sZW5ndGggKyB0LnZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICBlLnNldCh0aGlzLmJ1ZmZlciksIGUuc2V0KHQudmFsdWUsIHRoaXMuYnVmZmVyLmxlbmd0aCksIHRoaXMuYnVmZmVyID0gZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdC5kb25lO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW50ZXJuYWwgdHJhbnNhY3Rpb24gb2JqZWN0IHJlc3BvbnNpYmxlIGZvciBhY2N1bXVsYXRpbmcgdGhlIG11dGF0aW9ucyB0b1xuICogcGVyZm9ybSBhbmQgdGhlIGJhc2UgdmVyc2lvbnMgZm9yIGFueSBkb2N1bWVudHMgcmVhZC5cbiAqL1xuY2xhc3MgVWMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSB0LCBcbiAgICAgICAgLy8gVGhlIHZlcnNpb24gb2YgZWFjaCBkb2N1bWVudCB0aGF0IHdhcyByZWFkIGR1cmluZyB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAgICB0aGlzLnJlYWRWZXJzaW9ucyA9IG5ldyBNYXAsIHRoaXMubXV0YXRpb25zID0gW10sIHRoaXMuY29tbWl0dGVkID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBkZWZlcnJlZCB1c2FnZSBlcnJvciB0aGF0IG9jY3VycmVkIHByZXZpb3VzbHkgaW4gdGhpcyB0cmFuc2FjdGlvbiB0aGF0XG4gICAgICAgICAqIHdpbGwgY2F1c2UgdGhlIHRyYW5zYWN0aW9uIHRvIGZhaWwgb25jZSBpdCBhY3R1YWxseSBjb21taXRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiB3cml0dGVuIGluIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogV2hlbiB0aGVyZSdzIG1vcmUgdGhhbiBvbmUgd3JpdGUgdG8gdGhlIHNhbWUga2V5IGluIGEgdHJhbnNhY3Rpb24sIGFueVxuICAgICAgICAgKiB3cml0ZXMgYWZ0ZXIgdGhlIGZpcnN0IGFyZSBoYW5kbGVkIGRpZmZlcmVudGx5LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53cml0dGVuRG9jcyA9IG5ldyBTZXQ7XG4gICAgfVxuICAgIGFzeW5jIGxvb2t1cCh0KSB7XG4gICAgICAgIGlmICh0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5sZW5ndGggPiAwKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiRmlyZXN0b3JlIHRyYW5zYWN0aW9ucyByZXF1aXJlIGFsbCByZWFkcyB0byBiZSBleGVjdXRlZCBiZWZvcmUgYWxsIHdyaXRlcy5cIik7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gcSh0KSwgcyA9IFluKG4uTikgKyBcIi9kb2N1bWVudHNcIiwgaSA9IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IGUubWFwKCh0ID0+IEduKG4uTiwgdCkpKVxuICAgICAgICAgICAgfSwgciA9IGF3YWl0IG4uS2koXCJCYXRjaEdldERvY3VtZW50c1wiLCBzLCBpKSwgbyA9IG5ldyBNYXA7XG4gICAgICAgICAgICByLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBlcyhuLk4sIHQpO1xuICAgICAgICAgICAgICAgIG8uc2V0KGUua2V5LnRvU3RyaW5nKCksIGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgYyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG8uZ2V0KHQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgQighIWUpLCBjLnB1c2goZSk7XG4gICAgICAgICAgICB9KSksIGM7XG4gICAgICAgIH0odGhpcy5kYXRhc3RvcmUsIHQpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHRoaXMucmVjb3JkVmVyc2lvbih0KSkpLCBlO1xuICAgIH1cbiAgICBzZXQodCwgZSkge1xuICAgICAgICB0aGlzLndyaXRlKGUudG9NdXRhdGlvbih0LCB0aGlzLnByZWNvbmRpdGlvbih0KSkpLCB0aGlzLndyaXR0ZW5Eb2NzLmFkZCh0LnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICB1cGRhdGUodCwgZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy53cml0ZShlLnRvTXV0YXRpb24odCwgdGhpcy5wcmVjb25kaXRpb25Gb3JVcGRhdGUodCkpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IHQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgdGhpcy53cml0ZShuZXcgY24odCwgdGhpcy5wcmVjb25kaXRpb24odCkpKSwgdGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgYXN5bmMgY29tbWl0KCkge1xuICAgICAgICBpZiAodGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5sYXN0V3JpdGVFcnJvcikgdGhyb3cgdGhpcy5sYXN0V3JpdGVFcnJvcjtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucmVhZFZlcnNpb25zO1xuICAgICAgICAvLyBGb3IgZWFjaCBtdXRhdGlvbiwgbm90ZSB0aGF0IHRoZSBkb2Mgd2FzIHdyaXR0ZW4uXG4gICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvbnMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LmRlbGV0ZShlLmtleS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpLCBcbiAgICAgICAgLy8gRm9yIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBidXQgbm90IHdyaXR0ZW4gdG8sIHdlIHdhbnQgdG8gcGVyZm9ybVxuICAgICAgICAvLyBhIGB2ZXJpZnlgIG9wZXJhdGlvbi5cbiAgICAgICAgdC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IFB0LmZyb21QYXRoKGUpO1xuICAgICAgICAgICAgdGhpcy5tdXRhdGlvbnMucHVzaChuZXcgYW4obiwgdGhpcy5wcmVjb25kaXRpb24obikpKTtcbiAgICAgICAgfSkpLCBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gcSh0KSwgcyA9IFluKG4uTikgKyBcIi9kb2N1bWVudHNcIiwgaSA9IHtcbiAgICAgICAgICAgICAgICB3cml0ZXM6IGUubWFwKCh0ID0+IHNzKG4uTiwgdCkpKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGF3YWl0IG4uTGkoXCJDb21taXRcIiwgcywgaSk7XG4gICAgICAgIH0odGhpcy5kYXRhc3RvcmUsIHRoaXMubXV0YXRpb25zKSwgdGhpcy5jb21taXR0ZWQgPSAhMDtcbiAgICB9XG4gICAgcmVjb3JkVmVyc2lvbih0KSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICBpZiAodC5pc0ZvdW5kRG9jdW1lbnQoKSkgZSA9IHQudmVyc2lvbjsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoIXQuaXNOb0RvY3VtZW50KCkpIHRocm93IEwoKTtcbiAgICAgICAgICAgIC8vIEZvciBkZWxldGVkIGRvY3MsIHdlIG11c3QgdXNlIGJhc2VWZXJzaW9uIDAgd2hlbiB3ZSBvdmVyd3JpdGUgdGhlbS5cbiAgICAgICAgICAgIGUgPSBydC5taW4oKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuID0gdGhpcy5yZWFkVmVyc2lvbnMuZ2V0KHQua2V5LnRvU3RyaW5nKCkpO1xuICAgICAgICBpZiAobikge1xuICAgICAgICAgICAgaWYgKCFlLmlzRXF1YWwobikpIFxuICAgICAgICAgICAgLy8gVGhpcyB0cmFuc2FjdGlvbiB3aWxsIGZhaWwgbm8gbWF0dGVyIHdoYXQuXG4gICAgICAgICAgICB0aHJvdyBuZXcgaihLLkFCT1JURUQsIFwiRG9jdW1lbnQgdmVyc2lvbiBjaGFuZ2VkIGJldHdlZW4gdHdvIHJlYWRzLlwiKTtcbiAgICAgICAgfSBlbHNlIHRoaXMucmVhZFZlcnNpb25zLnNldCh0LmtleS50b1N0cmluZygpLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmVyc2lvbiBvZiB0aGlzIGRvY3VtZW50IHdoZW4gaXQgd2FzIHJlYWQgaW4gdGhpcyB0cmFuc2FjdGlvbixcbiAgICAgKiBhcyBhIHByZWNvbmRpdGlvbiwgb3Igbm8gcHJlY29uZGl0aW9uIGlmIGl0IHdhcyBub3QgcmVhZC5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICByZXR1cm4gIXRoaXMud3JpdHRlbkRvY3MuaGFzKHQudG9TdHJpbmcoKSkgJiYgZSA/IEdlLnVwZGF0ZVRpbWUoZSkgOiBHZS5ub25lKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByZWNvbmRpdGlvbiBmb3IgYSBkb2N1bWVudCBpZiB0aGUgb3BlcmF0aW9uIGlzIGFuIHVwZGF0ZS5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uRm9yVXBkYXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICAvLyBUaGUgZmlyc3QgdGltZSBhIGRvY3VtZW50IGlzIHdyaXR0ZW4sIHdlIHdhbnQgdG8gdGFrZSBpbnRvIGFjY291bnQgdGhlXG4gICAgICAgIC8vIHJlYWQgdGltZSBhbmQgZXhpc3RlbmNlXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLndyaXR0ZW5Eb2NzLmhhcyh0LnRvU3RyaW5nKCkpICYmIGUpIHtcbiAgICAgICAgICAgIGlmIChlLmlzRXF1YWwocnQubWluKCkpKSBcbiAgICAgICAgICAgIC8vIFRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LCBzbyBmYWlsIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIC8vIFRoaXMgaGFzIHRvIGJlIHZhbGlkYXRlZCBsb2NhbGx5IGJlY2F1c2UgeW91IGNhbid0IHNlbmQgYVxuICAgICAgICAgICAgLy8gcHJlY29uZGl0aW9uIHRoYXQgYSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCB3aXRob3V0IGNoYW5naW5nIHRoZVxuICAgICAgICAgICAgLy8gc2VtYW50aWNzIG9mIHRoZSBiYWNrZW5kIHdyaXRlIHRvIGJlIGFuIGluc2VydC4gVGhpcyBpcyB0aGUgcmV2ZXJzZVxuICAgICAgICAgICAgLy8gb2Ygd2hhdCB3ZSB3YW50LCBzaW5jZSB3ZSB3YW50IHRvIGFzc2VydCB0aGF0IHRoZSBkb2N1bWVudCBkb2Vzbid0XG4gICAgICAgICAgICAvLyBleGlzdCBidXQgdGhlbiBzZW5kIHRoZSB1cGRhdGUgYW5kIGhhdmUgaXQgZmFpbC4gU2luY2Ugd2UgY2FuJ3RcbiAgICAgICAgICAgIC8vIGV4cHJlc3MgdGhhdCB0byB0aGUgYmFja2VuZCwgd2UgaGF2ZSB0byB2YWxpZGF0ZSBsb2NhbGx5LlxuICAgICAgICAgICAgLy8gTm90ZTogdGhpcyBjYW4gY2hhbmdlIG9uY2Ugd2UgY2FuIHNlbmQgc2VwYXJhdGUgdmVyaWZ5IHdyaXRlcyBpbiB0aGVcbiAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIkNhbid0IHVwZGF0ZSBhIGRvY3VtZW50IHRoYXQgZG9lc24ndCBleGlzdC5cIik7XG4gICAgICAgICAgICAvLyBEb2N1bWVudCBleGlzdHMsIGJhc2UgcHJlY29uZGl0aW9uIG9uIGRvY3VtZW50IHVwZGF0ZSB0aW1lLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEdlLnVwZGF0ZVRpbWUoZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRG9jdW1lbnQgd2FzIG5vdCByZWFkLCBzbyB3ZSBqdXN0IHVzZSB0aGUgcHJlY29uZGl0aW9ucyBmb3IgYSBibGluZFxuICAgICAgICAvLyB1cGRhdGUuXG4gICAgICAgIHJldHVybiBHZS5leGlzdHMoITApO1xuICAgIH1cbiAgICB3cml0ZSh0KSB7XG4gICAgICAgIHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubXV0YXRpb25zLnB1c2godCk7XG4gICAgfVxuICAgIGVuc3VyZUNvbW1pdE5vdENhbGxlZCgpIHt9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRyYW5zYWN0aW9uUnVubmVyIGVuY2Fwc3VsYXRlcyB0aGUgbG9naWMgbmVlZGVkIHRvIHJ1biBhbmQgcmV0cnkgdHJhbnNhY3Rpb25zXG4gKiB3aXRoIGJhY2tvZmYuXG4gKi9cbmNsYXNzIHFjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMuZGF0YXN0b3JlID0gZSwgdGhpcy51cGRhdGVGdW5jdGlvbiA9IG4sIHRoaXMuZGVmZXJyZWQgPSBzLCBcbiAgICAgICAgdGhpcy5oYyA9IDUsIHRoaXMuYXIgPSBuZXcgWHIodGhpcy5hc3luY1F1ZXVlLCBcInRyYW5zYWN0aW9uX3JldHJ5XCIgLyogVHJhbnNhY3Rpb25SZXRyeSAqLyk7XG4gICAgfVxuICAgIC8qKiBSdW5zIHRoZSB0cmFuc2FjdGlvbiBhbmQgc2V0cyB0aGUgcmVzdWx0IG9uIGRlZmVycmVkLiAqLyAgICBydW4oKSB7XG4gICAgICAgIHRoaXMuaGMgLT0gMSwgdGhpcy5sYygpO1xuICAgIH1cbiAgICBsYygpIHtcbiAgICAgICAgdGhpcy5hci5YaSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBVYyh0aGlzLmRhdGFzdG9yZSksIGUgPSB0aGlzLmZjKHQpO1xuICAgICAgICAgICAgZSAmJiBlLnRoZW4oKGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiB0LmNvbW1pdCgpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZlcnJlZC5yZXNvbHZlKGUpO1xuICAgICAgICAgICAgICAgIH0pKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGModCk7XG4gICAgICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICB9KSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZGModCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZmModCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMudXBkYXRlRnVuY3Rpb24odCk7XG4gICAgICAgICAgICByZXR1cm4gIUF0KGUpICYmIGUuY2F0Y2ggJiYgZS50aGVuID8gZSA6ICh0aGlzLmRlZmVycmVkLnJlamVjdChFcnJvcihcIlRyYW5zYWN0aW9uIGNhbGxiYWNrIG11c3QgcmV0dXJuIGEgUHJvbWlzZVwiKSksIFxuICAgICAgICAgICAgbnVsbCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIERvIG5vdCByZXRyeSBlcnJvcnMgdGhyb3duIGJ5IHVzZXIgcHJvdmlkZWQgdXBkYXRlRnVuY3Rpb24uXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZlcnJlZC5yZWplY3QodCksIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGModCkge1xuICAgICAgICB0aGlzLmhjID4gMCAmJiB0aGlzLndjKHQpID8gKHRoaXMuaGMgLT0gMSwgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLmxjKCksIFxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKSkgOiB0aGlzLmRlZmVycmVkLnJlamVjdCh0KTtcbiAgICB9XG4gICAgd2ModCkge1xuICAgICAgICBpZiAoXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSkge1xuICAgICAgICAgICAgLy8gSW4gdHJhbnNhY3Rpb25zLCB0aGUgYmFja2VuZCB3aWxsIGZhaWwgb3V0ZGF0ZWQgcmVhZHMgd2l0aCBGQUlMRURfUFJFQ09ORElUSU9OIGFuZFxuICAgICAgICAgICAgLy8gbm9uLW1hdGNoaW5nIGRvY3VtZW50IHZlcnNpb25zIHdpdGggQUJPUlRFRC4gVGhlc2UgZXJyb3JzIHNob3VsZCBiZSByZXRyaWVkLlxuICAgICAgICAgICAgY29uc3QgZSA9IHQuY29kZTtcbiAgICAgICAgICAgIHJldHVybiBcImFib3J0ZWRcIiA9PT0gZSB8fCBcImZhaWxlZC1wcmVjb25kaXRpb25cIiA9PT0gZSB8fCAhZm4oZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRmlyZXN0b3JlQ2xpZW50IGlzIGEgdG9wLWxldmVsIGNsYXNzIHRoYXQgY29uc3RydWN0cyBhbmQgb3ducyBhbGwgb2YgdGhlXG4gKiBwaWVjZXMgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlXG4gKiBhc3luYyBxdWV1ZSB0aGF0IGlzIHNoYXJlZCBieSBhbGwgb2YgdGhlIG90aGVyIGNvbXBvbmVudHMgaW4gdGhlIHN5c3RlbS5cbiAqL1xuY2xhc3MgS2Mge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91cyBxdWV1ZSByZXNwb25zaWJsZSBmb3IgYWxsIG9mIG91ciBpbnRlcm5hbCBwcm9jZXNzaW5nLiBXaGVuXG4gICAgICogd2UgZ2V0IGluY29taW5nIHdvcmsgZnJvbSB0aGUgdXNlciAodmlhIHB1YmxpYyBBUEkpIG9yIHRoZSBuZXR3b3JrXG4gICAgICogKGluY29taW5nIEdSUEMgbWVzc2FnZXMpLCB3ZSBzaG91bGQgYWx3YXlzIHNjaGVkdWxlIG9udG8gdGhpcyBxdWV1ZS5cbiAgICAgKiBUaGlzIGVuc3VyZXMgYWxsIG9mIG91ciB3b3JrIGlzIHByb3Blcmx5IHNlcmlhbGl6ZWQgKGUuZy4gd2UgZG9uJ3RcbiAgICAgKiBzdGFydCBwcm9jZXNzaW5nIGEgbmV3IG9wZXJhdGlvbiB3aGlsZSB0aGUgcHJldmlvdXMgb25lIGlzIHdhaXRpbmcgZm9yXG4gICAgICogYW4gYXN5bmMgSS9PIHRvIGNvbXBsZXRlKS5cbiAgICAgKi9cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSB0LCB0aGlzLmFzeW5jUXVldWUgPSBlLCB0aGlzLmRhdGFiYXNlSW5mbyA9IG4sIHRoaXMudXNlciA9IEQuVU5BVVRIRU5USUNBVEVELCBcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHR0LkkoKSwgdGhpcy5jcmVkZW50aWFsTGlzdGVuZXIgPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSwgdGhpcy5jcmVkZW50aWFscy5zdGFydChlLCAoYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICAkKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiUmVjZWl2ZWQgdXNlcj1cIiwgdC51aWQpLCBhd2FpdCB0aGlzLmNyZWRlbnRpYWxMaXN0ZW5lcih0KSwgXG4gICAgICAgICAgICB0aGlzLnVzZXIgPSB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGFzeW5jIGdldENvbmZpZ3VyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhc3luY1F1ZXVlOiB0aGlzLmFzeW5jUXVldWUsXG4gICAgICAgICAgICBkYXRhYmFzZUluZm86IHRoaXMuZGF0YWJhc2VJbmZvLFxuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBjcmVkZW50aWFsczogdGhpcy5jcmVkZW50aWFscyxcbiAgICAgICAgICAgIGluaXRpYWxVc2VyOiB0aGlzLnVzZXIsXG4gICAgICAgICAgICBtYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczogMTAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIHNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcih0KSB7XG4gICAgICAgIHRoaXMuY3JlZGVudGlhbExpc3RlbmVyID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRoYXQgdGhlIGNsaWVudCBoYXMgbm90IGJlZW4gdGVybWluYXRlZC4gRW5zdXJlcyB0aGF0IG90aGVyIG1ldGhvZHMgb25cbiAgICAgKiB0aGlzIGNsYXNzIGNhbm5vdCBiZSBjYWxsZWQgYWZ0ZXIgdGhlIGNsaWVudCBpcyB0ZXJtaW5hdGVkLlxuICAgICAqLyAgICB2ZXJpZnlOb3RUZXJtaW5hdGVkKCkge1xuICAgICAgICBpZiAodGhpcy5hc3luY1F1ZXVlLmlzU2h1dHRpbmdEb3duKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIHRlcm1pbmF0ZWQuXCIpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnRlclJlc3RyaWN0ZWRNb2RlKCk7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgUTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9ubGluZUNvbXBvbmVudHMgJiYgYXdhaXQgdGhpcy5vbmxpbmVDb21wb25lbnRzLnRlcm1pbmF0ZSgpLCB0aGlzLm9mZmxpbmVDb21wb25lbnRzICYmIGF3YWl0IHRoaXMub2ZmbGluZUNvbXBvbmVudHMudGVybWluYXRlKCksIFxuICAgICAgICAgICAgICAgIC8vIFRoZSBjcmVkZW50aWFscyBwcm92aWRlciBtdXN0IGJlIHRlcm1pbmF0ZWQgYWZ0ZXIgc2h1dHRpbmcgZG93biB0aGVcbiAgICAgICAgICAgICAgICAvLyBSZW1vdGVTdG9yZSBhcyBpdCB3aWxsIHByZXZlbnQgdGhlIFJlbW90ZVN0b3JlIGZyb20gcmV0cmlldmluZyBhdXRoXG4gICAgICAgICAgICAgICAgLy8gdG9rZW5zLlxuICAgICAgICAgICAgICAgIHRoaXMuY3JlZGVudGlhbHMuc2h1dGRvd24oKSwgdC5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGtvKGUsIFwiRmFpbGVkIHRvIHNodXRkb3duIHBlcnNpc3RlbmNlXCIpO1xuICAgICAgICAgICAgICAgIHQucmVqZWN0KG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHQucHJvbWlzZTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGpjKHQsIGUpIHtcbiAgICB0LmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCAkKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiSW5pdGlhbGl6aW5nIE9mZmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBuID0gYXdhaXQgdC5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgZS5pbml0aWFsaXplKG4pO1xuICAgIGxldCBzID0gbi5pbml0aWFsVXNlcjtcbiAgICB0LnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigoYXN5bmMgdCA9PiB7XG4gICAgICAgIHMuaXNFcXVhbCh0KSB8fCAoYXdhaXQgaHIoZS5sb2NhbFN0b3JlLCB0KSwgcyA9IHQpO1xuICAgIH0pKSwgXG4gICAgLy8gV2hlbiBhIHVzZXIgY2FsbHMgY2xlYXJQZXJzaXN0ZW5jZSgpIGluIG9uZSBjbGllbnQsIGFsbCBvdGhlciBjbGllbnRzXG4gICAgLy8gbmVlZCB0byBiZSB0ZXJtaW5hdGVkIHRvIGFsbG93IHRoZSBkZWxldGUgdG8gc3VjY2VlZC5cbiAgICBlLnBlcnNpc3RlbmNlLnNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCgoKSA9PiB0LnRlcm1pbmF0ZSgpKSksIHQub2ZmbGluZUNvbXBvbmVudHMgPSBlO1xufVxuXG5hc3luYyBmdW5jdGlvbiBRYyh0LCBlKSB7XG4gICAgdC5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKTtcbiAgICBjb25zdCBuID0gYXdhaXQgV2ModCk7XG4gICAgJChcIkZpcmVzdG9yZUNsaWVudFwiLCBcIkluaXRpYWxpemluZyBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBzID0gYXdhaXQgdC5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgZS5pbml0aWFsaXplKG4sIHMpLCBcbiAgICAvLyBUaGUgQ3JlZGVudGlhbENoYW5nZUxpc3RlbmVyIG9mIHRoZSBvbmxpbmUgY29tcG9uZW50IHByb3ZpZGVyIHRha2VzXG4gICAgLy8gcHJlY2VkZW5jZSBvdmVyIHRoZSBvZmZsaW5lIGNvbXBvbmVudCBwcm92aWRlci5cbiAgICB0LnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigodCA9PiBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgICAgICBuLmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCAkKFwiUmVtb3RlU3RvcmVcIiwgXCJSZW1vdGVTdG9yZSByZWNlaXZlZCBuZXcgY3JlZGVudGlhbHNcIik7XG4gICAgICAgIGNvbnN0IHMgPSB3byhuKTtcbiAgICAgICAgLy8gVGVhciBkb3duIGFuZCByZS1jcmVhdGUgb3VyIG5ldHdvcmsgc3RyZWFtcy4gVGhpcyB3aWxsIGVuc3VyZSB3ZSBnZXQgYVxuICAgICAgICAvLyBmcmVzaCBhdXRoIHRva2VuIGZvciB0aGUgbmV3IHVzZXIgYW5kIHJlLWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIHdpdGhcbiAgICAgICAgLy8gbmV3IG11dGF0aW9ucyBmcm9tIHRoZSBMb2NhbFN0b3JlIChzaW5jZSBtdXRhdGlvbnMgYXJlIHBlci11c2VyKS5cbiAgICAgICAgICAgICAgICBuLldyLmFkZCgzIC8qIENyZWRlbnRpYWxDaGFuZ2UgKi8pLCBhd2FpdCBvbyhuKSwgcyAmJiBcbiAgICAgICAgLy8gRG9uJ3Qgc2V0IHRoZSBuZXR3b3JrIHN0YXR1cyB0byBVbmtub3duIGlmIHdlIGFyZSBvZmZsaW5lLlxuICAgICAgICBuLkhyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKSwgYXdhaXQgbi5yZW1vdGVTeW5jZXIuaGFuZGxlQ3JlZGVudGlhbENoYW5nZShlKSwgXG4gICAgICAgIG4uV3IuZGVsZXRlKDMgLyogQ3JlZGVudGlhbENoYW5nZSAqLyksIGF3YWl0IHJvKG4pO1xuICAgIH0oZS5yZW1vdGVTdG9yZSwgdCkpKSwgdC5vbmxpbmVDb21wb25lbnRzID0gZTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gV2ModCkge1xuICAgIHJldHVybiB0Lm9mZmxpbmVDb21wb25lbnRzIHx8ICgkKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgZGVmYXVsdCBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IGpjKHQsIG5ldyBrYykpLCB0Lm9mZmxpbmVDb21wb25lbnRzO1xufVxuXG5hc3luYyBmdW5jdGlvbiBHYyh0KSB7XG4gICAgcmV0dXJuIHQub25saW5lQ29tcG9uZW50cyB8fCAoJChcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIGRlZmF1bHQgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IFFjKHQsIG5ldyBGYykpLCB0Lm9ubGluZUNvbXBvbmVudHM7XG59XG5cbmZ1bmN0aW9uIHpjKHQpIHtcbiAgICByZXR1cm4gV2ModCkudGhlbigodCA9PiB0LnBlcnNpc3RlbmNlKSk7XG59XG5cbmZ1bmN0aW9uIEhjKHQpIHtcbiAgICByZXR1cm4gV2ModCkudGhlbigodCA9PiB0LmxvY2FsU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gSmModCkge1xuICAgIHJldHVybiBHYyh0KS50aGVuKCh0ID0+IHQucmVtb3RlU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gWWModCkge1xuICAgIHJldHVybiBHYyh0KS50aGVuKCh0ID0+IHQuc3luY0VuZ2luZSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBYYyh0KSB7XG4gICAgY29uc3QgZSA9IGF3YWl0IEdjKHQpLCBuID0gZS5ldmVudE1hbmFnZXI7XG4gICAgcmV0dXJuIG4ub25MaXN0ZW4gPSBuYy5iaW5kKG51bGwsIGUuc3luY0VuZ2luZSksIG4ub25Vbmxpc3RlbiA9IGljLmJpbmQobnVsbCwgZS5zeW5jRW5naW5lKSwgXG4gICAgbjtcbn1cblxuLyoqIEVuYWJsZXMgdGhlIG5ldHdvcmsgY29ubmVjdGlvbiBhbmQgcmUtZW5xdWV1ZXMgYWxsIHBlbmRpbmcgb3BlcmF0aW9ucy4gKi8gZnVuY3Rpb24gWmModCkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgemModCksIG4gPSBhd2FpdCBKYyh0KTtcbiAgICAgICAgcmV0dXJuIGUuc2V0TmV0d29ya0VuYWJsZWQoITApLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gcSh0KTtcbiAgICAgICAgICAgIHJldHVybiBlLldyLmRlbGV0ZSgwIC8qIFVzZXJEaXNhYmxlZCAqLyksIHJvKGUpO1xuICAgICAgICB9KG4pO1xuICAgIH0pKTtcbn1cblxuLyoqIERpc2FibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24uIFBlbmRpbmcgb3BlcmF0aW9ucyB3aWxsIG5vdCBjb21wbGV0ZS4gKi8gZnVuY3Rpb24gdGEodCkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgemModCksIG4gPSBhd2FpdCBKYyh0KTtcbiAgICAgICAgcmV0dXJuIGUuc2V0TmV0d29ya0VuYWJsZWQoITEpLCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gcSh0KTtcbiAgICAgICAgICAgIGUuV3IuYWRkKDAgLyogVXNlckRpc2FibGVkICovKSwgYXdhaXQgb28oZSksIFxuICAgICAgICAgICAgLy8gU2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBPZmZsaW5lIHNvIGdldCgpcyByZXR1cm4gZnJvbSBjYWNoZSwgZXRjLlxuICAgICAgICAgICAgZS5Ici5zZXQoXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyk7XG4gICAgICAgIH0obik7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgd3JpdGVzIHRoYXQgd2VyZSBwZW5kaW5nIGF0IHRoZSB0aW1lXG4gKiB0aGlzIG1ldGhvZCB3YXMgY2FsbGVkIHJlY2VpdmVkIHNlcnZlciBhY2tub3dsZWRnZW1lbnQuIEFuIGFja25vd2xlZGdlbWVudFxuICogY2FuIGJlIGVpdGhlciBhY2NlcHRhbmNlIG9yIHJlamVjdGlvbi5cbiAqLyBmdW5jdGlvbiBlYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBRO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gcSh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcInJlYWQgZG9jdW1lbnRcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLlFuLkFuKHQsIGUpKSk7XG4gICAgICAgICAgICB9KHQsIGUpO1xuICAgICAgICAgICAgcy5pc0ZvdW5kRG9jdW1lbnQoKSA/IG4ucmVzb2x2ZShzKSA6IHMuaXNOb0RvY3VtZW50KCkgPyBuLnJlc29sdmUobnVsbCkgOiBuLnJlamVjdChuZXcgaihLLlVOQVZBSUxBQkxFLCBcIkZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBjYWNoZS4gKEhvd2V2ZXIsIHRoaXMgZG9jdW1lbnQgbWF5IGV4aXN0IG9uIHRoZSBzZXJ2ZXIuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgJ3NvdXJjZScgaW4gdGhlIEdldE9wdGlvbnMgdG8gYXR0ZW1wdCB0byByZXRyaWV2ZSB0aGUgZG9jdW1lbnQgZnJvbSB0aGUgc2VydmVyLilcIikpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBjb25zdCBzID0ga28odCwgYEZhaWxlZCB0byBnZXQgZG9jdW1lbnQgJyR7ZX0gZnJvbSBjYWNoZWApO1xuICAgICAgICAgICAgbi5yZWplY3Qocyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBSZXRyaWV2ZXMgYSBsYXRlbmN5LWNvbXBlbnNhdGVkIGRvY3VtZW50IGZyb20gdGhlIGJhY2tlbmQgdmlhIGFcbiAqIFNuYXBzaG90TGlzdGVuZXIuXG4gKi8gKGF3YWl0IEhjKHQpLCBlLCBuKSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIG5hKHQsIGUsIG4gPSB7fSkge1xuICAgIGNvbnN0IHMgPSBuZXcgUTtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBMYyh7XG4gICAgICAgICAgICBuZXh0OiByID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcXVlcnkgZmlyc3QgYmVmb3JlIHBhc3NpbmcgZXZlbnQgdG8gdXNlciB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cbiAgICAgICAgICAgICAgICBlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IFVvKHQsIG8pKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYyA9IHIuZG9jcy5oYXMobik7XG4gICAgICAgICAgICAgICAgIWMgJiYgci5mcm9tQ2FjaGUgPyBcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElmIHdlJ3JlIG9ubGluZSBhbmQgdGhlIGRvY3VtZW50IGRvZXNuJ3RcbiAgICAgICAgICAgICAgICAvLyBleGlzdCB0aGVuIHdlIHJlc29sdmUgd2l0aCBhIGRvYy5leGlzdHMgc2V0IHRvIGZhbHNlLiBJZlxuICAgICAgICAgICAgICAgIC8vIHdlJ3JlIG9mZmxpbmUgaG93ZXZlciwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBjYXNlLiBUd28gb3B0aW9uczogMSkgQ2FjaGUgdGhlIG5lZ2F0aXZlIHJlc3BvbnNlIGZyb21cbiAgICAgICAgICAgICAgICAvLyB0aGUgc2VydmVyIHNvIHdlIGNhbiBkZWxpdmVyIHRoYXQgZXZlbiB3aGVuIHlvdSdyZVxuICAgICAgICAgICAgICAgIC8vIG9mZmxpbmUgMikgQWN0dWFsbHkgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoZSBvbmxpbmUgY2FzZVxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICAgICAgICAgIGkucmVqZWN0KG5ldyBqKEsuVU5BVkFJTEFCTEUsIFwiRmFpbGVkIHRvIGdldCBkb2N1bWVudCBiZWNhdXNlIHRoZSBjbGllbnQgaXMgb2ZmbGluZS5cIikpIDogYyAmJiByLmZyb21DYWNoZSAmJiBzICYmIFwic2VydmVyXCIgPT09IHMuc291cmNlID8gaS5yZWplY3QobmV3IGooSy5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IGRvZXMgZXhpc3QgaW4gdGhlIGxvY2FsIGNhY2hlLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nIHNvdXJjZSB0byBcInNlcnZlclwiIHRvIHJldHJpZXZlIHRoZSBjYWNoZWQgZG9jdW1lbnQuKScpKSA6IGkucmVzb2x2ZShyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogdCA9PiBpLnJlamVjdCh0KVxuICAgICAgICB9KSwgbyA9IG5ldyBRbyh3ZShuLnBhdGgpLCByLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIGZvOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIEJvKHQsIG8pO1xuICAgIH0oYXdhaXQgWGModCksIHQuYXN5bmNRdWV1ZSwgZSwgbiwgcykpKSwgcy5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBzYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBRO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IHlyKHQsIGUsIFxuICAgICAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSBuZXcgWG8oZSwgcy5HbiksIHIgPSBpLmJvKHMuZG9jdW1lbnRzKSwgbyA9IGkuYXBwbHlDaGFuZ2VzKHIsIFxuICAgICAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovICExKTtcbiAgICAgICAgICAgIG4ucmVzb2x2ZShvLnNuYXBzaG90KTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGtvKHQsIGBGYWlsZWQgdG8gZXhlY3V0ZSBxdWVyeSAnJHtlfSBhZ2FpbnN0IGNhY2hlYCk7XG4gICAgICAgICAgICBuLnJlamVjdChzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIFJldHJpZXZlcyBhIGxhdGVuY3ktY29tcGVuc2F0ZWQgcXVlcnkgc25hcHNob3QgZnJvbSB0aGUgYmFja2VuZCB2aWEgYVxuICogU25hcHNob3RMaXN0ZW5lci5cbiAqLyAoYXdhaXQgSGModCksIGUsIG4pKSksIG4ucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gaWEodCwgZSwgbiA9IHt9KSB7XG4gICAgY29uc3QgcyA9IG5ldyBRO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gbmV3IExjKHtcbiAgICAgICAgICAgIG5leHQ6IG4gPT4ge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBxdWVyeSBmaXJzdCBiZWZvcmUgcGFzc2luZyBldmVudCB0byB1c2VyIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gdXNlciBhY3Rpb25zIGFmZmVjdGluZyB0aGUgbm93IHN0YWxlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gVW8odCwgbykpKSwgbi5mcm9tQ2FjaGUgJiYgXCJzZXJ2ZXJcIiA9PT0gcy5zb3VyY2UgPyBpLnJlamVjdChuZXcgaihLLlVOQVZBSUxBQkxFLCAnRmFpbGVkIHRvIGdldCBkb2N1bWVudHMgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGVzZSBkb2N1bWVudHMgbWF5IGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byByZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50cy4pJykpIDogaS5yZXNvbHZlKG4pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiB0ID0+IGkucmVqZWN0KHQpXG4gICAgICAgIH0pLCBvID0gbmV3IFFvKG4sIHIsIHtcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICEwLFxuICAgICAgICAgICAgZm86ICEwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gQm8odCwgbyk7XG4gICAgfShhd2FpdCBYYyh0KSwgdC5hc3luY1F1ZXVlLCBlLCBuLCBzKSkpLCBzLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIHJhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gbmV3IExjKGUpO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBxKHQpLnNvLmFkZChlKSwgXG4gICAgICAgIC8vIEltbWVkaWF0ZWx5IGZpcmUgYW4gaW5pdGlhbCBldmVudCwgaW5kaWNhdGluZyBhbGwgZXhpc3RpbmcgbGlzdGVuZXJzXG4gICAgICAgIC8vIGFyZSBpbi1zeW5jLlxuICAgICAgICBlLm5leHQoKTtcbiAgICB9KGF3YWl0IFhjKHQpLCBuKSkpLCAoKSA9PiB7XG4gICAgICAgIG4uZWMoKSwgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHEodCkuc28uZGVsZXRlKGUpO1xuICAgICAgICB9KGF3YWl0IFhjKHQpLCBuKSkpO1xuICAgIH07XG59XG5cbi8qKlxuICogVGFrZXMgYW4gdXBkYXRlRnVuY3Rpb24gaW4gd2hpY2ggYSBzZXQgb2YgcmVhZHMgYW5kIHdyaXRlcyBjYW4gYmUgcGVyZm9ybWVkXG4gKiBhdG9taWNhbGx5LiBJbiB0aGUgdXBkYXRlRnVuY3Rpb24sIHRoZSBjbGllbnQgY2FuIHJlYWQgYW5kIHdyaXRlIHZhbHVlc1xuICogdXNpbmcgdGhlIHN1cHBsaWVkIHRyYW5zYWN0aW9uIG9iamVjdC4gQWZ0ZXIgdGhlIHVwZGF0ZUZ1bmN0aW9uLCBhbGxcbiAqIGNoYW5nZXMgd2lsbCBiZSBjb21taXR0ZWQuIElmIGEgcmV0cnlhYmxlIGVycm9yIG9jY3VycyAoZXg6IHNvbWUgb3RoZXJcbiAqIGNsaWVudCBoYXMgY2hhbmdlZCBhbnkgb2YgdGhlIGRhdGEgcmVmZXJlbmNlZCksIHRoZW4gdGhlIHVwZGF0ZUZ1bmN0aW9uXG4gKiB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBhZnRlciBhIGJhY2tvZmYuIElmIHRoZSB1cGRhdGVGdW5jdGlvbiBzdGlsbCBmYWlsc1xuICogYWZ0ZXIgYWxsIHJldHJpZXMsIHRoZW4gdGhlIHRyYW5zYWN0aW9uIHdpbGwgYmUgcmVqZWN0ZWQuXG4gKlxuICogVGhlIHRyYW5zYWN0aW9uIG9iamVjdCBwYXNzZWQgdG8gdGhlIHVwZGF0ZUZ1bmN0aW9uIGNvbnRhaW5zIG1ldGhvZHMgZm9yXG4gKiBhY2Nlc3NpbmcgZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucy4gVW5saWtlIG90aGVyIGRhdGFzdG9yZSBhY2Nlc3MsIGRhdGFcbiAqIGFjY2Vzc2VkIHdpdGggdGhlIHRyYW5zYWN0aW9uIHdpbGwgbm90IHJlZmxlY3QgbG9jYWwgY2hhbmdlcyB0aGF0IGhhdmUgbm90XG4gKiBiZWVuIGNvbW1pdHRlZC4gRm9yIHRoaXMgcmVhc29uLCBpdCBpcyByZXF1aXJlZCB0aGF0IGFsbCByZWFkcyBhcmVcbiAqIHBlcmZvcm1lZCBiZWZvcmUgYW55IHdyaXRlcy4gVHJhbnNhY3Rpb25zIG11c3QgYmUgcGVyZm9ybWVkIHdoaWxlIG9ubGluZS5cbiAqLyBmdW5jdGlvbiBvYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBRO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBzID0gYXdhaXQgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIEdjKHQpLnRoZW4oKHQgPT4gdC5kYXRhc3RvcmUpKTtcbiAgICAgICAgfSh0KTtcbiAgICAgICAgbmV3IHFjKHQuYXN5bmNRdWV1ZSwgcywgZSwgbikucnVuKCk7XG4gICAgfSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGNhKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbiA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyAobmV3IFRleHRFbmNvZGVyKS5lbmNvZGUodCkgOiB0O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCYyh0LCBlKTtcbiAgICAgICAgfShmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHJldHVybiBNYyh0LCBlKTtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHJldHVybiBNYyhuZXcgVWludDhBcnJheSh0KSwgZSk7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFJlYWRhYmxlU3RyZWFtKSByZXR1cm4gdC5nZXRSZWFkZXIoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvdXJjZSBvZiBgdG9CeXRlU3RyZWFtUmVhZGVyYCBoYXMgdG8gYmUgYSBBcnJheUJ1ZmZlciBvciBSZWFkYWJsZVN0cmVhbVwiKTtcbiAgICAgICAgfShuKSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIChuLCBZcihlKSk7XG4gICAgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgeGMoYXdhaXQgWWModCksIGksIHMpO1xuICAgIH0pKTtcbn1cblxuZnVuY3Rpb24gYWEodCwgZSkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gcSh0KTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmFtZWQgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLkplLmdldE5hbWVkUXVlcnkodCwgZSkpKTtcbiAgICB9KGF3YWl0IEhjKHQpLCBlKSkpO1xufVxuXG5jbGFzcyB1YSB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIERhdGFiYXNlSW5mbyB1c2luZyB0aGUgcHJvdmlkZWQgaG9zdCwgZGF0YWJhc2VJZCBhbmRcbiAgICAgKiBwZXJzaXN0ZW5jZUtleS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIGRhdGFiYXNlIHRvIHVzZS5cbiAgICAgKiBAcGFyYW0gYXBwSWQgLSBUaGUgRmlyZWJhc2UgQXBwIElkLlxuICAgICAqIEBwYXJhbSBwZXJzaXN0ZW5jZUtleSAtIEEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgRmlyZXN0b3JlJ3MgbG9jYWxcbiAgICAgKiBzdG9yYWdlICh1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlIGRhdGFiYXNlSWQpLlxuICAgICAqIEBwYXJhbSBob3N0IC0gVGhlIEZpcmVzdG9yZSBiYWNrZW5kIGhvc3QgdG8gY29ubmVjdCB0by5cbiAgICAgKiBAcGFyYW0gc3NsIC0gV2hldGhlciB0byB1c2UgU1NMIHdoZW4gY29ubmVjdGluZy5cbiAgICAgKiBAcGFyYW0gZm9yY2VMb25nUG9sbGluZyAtIFdoZXRoZXIgdG8gdXNlIHRoZSBmb3JjZUxvbmdQb2xsaW5nIG9wdGlvblxuICAgICAqIHdoZW4gdXNpbmcgV2ViQ2hhbm5lbCBhcyB0aGUgbmV0d29yayB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIGF1dG9EZXRlY3RMb25nUG9sbGluZyAtIFdoZXRoZXIgdG8gdXNlIHRoZSBkZXRlY3RCdWZmZXJpbmdQcm94eVxuICAgICAqIG9wdGlvbiB3aGVuIHVzaW5nIFdlYkNoYW5uZWwgYXMgdGhlIG5ldHdvcmsgdHJhbnNwb3J0LlxuICAgICAqIEBwYXJhbSB1c2VGZXRjaFN0cmVhbXMgV2hldGhlciB0byB1c2UgdGhlIEZldGNoIEFQSSBpbnN0ZWFkIG9mXG4gICAgICogWE1MSFRUUFJlcXVlc3RcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByLCBvLCBjKSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IHQsIHRoaXMuYXBwSWQgPSBlLCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gbiwgdGhpcy5ob3N0ID0gcywgdGhpcy5zc2wgPSBpLCBcbiAgICAgICAgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID0gciwgdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSBvLCB0aGlzLnVzZUZldGNoU3RyZWFtcyA9IGM7XG4gICAgfVxufVxuXG4vKiogVGhlIGRlZmF1bHQgZGF0YWJhc2UgbmFtZSBmb3IgYSBwcm9qZWN0LiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBkYXRhYmFzZSBJRCBhIEZpcmVzdG9yZSBjbGllbnQgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIGhhIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucHJvamVjdElkID0gdCwgdGhpcy5kYXRhYmFzZSA9IGUgfHwgXCIoZGVmYXVsdClcIjtcbiAgICB9XG4gICAgZ2V0IGlzRGVmYXVsdERhdGFiYXNlKCkge1xuICAgICAgICByZXR1cm4gXCIoZGVmYXVsdClcIiA9PT0gdGhpcy5kYXRhYmFzZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgaGEgJiYgdC5wcm9qZWN0SWQgPT09IHRoaXMucHJvamVjdElkICYmIHQuZGF0YWJhc2UgPT09IHRoaXMuZGF0YWJhc2U7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBsYSA9IG5ldyBNYXA7XG5cbi8qKlxuICogQW4gaW5zdGFuY2UgbWFwIHRoYXQgZW5zdXJlcyBvbmx5IG9uZSBEYXRhc3RvcmUgZXhpc3RzIHBlciBGaXJlc3RvcmVcbiAqIGluc3RhbmNlLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gZmEodCwgZSwgbikge1xuICAgIGlmICghbikgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHt0fSgpIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBhbiBlbXB0eSAke2V9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IHR3byBib29sZWFuIG9wdGlvbnMgYXJlIG5vdCBzZXQgYXQgdGhlIHNhbWUgdGltZS5cbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIGRhKHQsIGUsIG4sIHMpIHtcbiAgICBpZiAoITAgPT09IGUgJiYgITAgPT09IHMpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYCR7dH0gYW5kICR7bn0gY2Fubm90IGJlIHVzZWQgdG9nZXRoZXIuYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYHBhdGhgIHJlZmVycyB0byBhIGRvY3VtZW50IChpbmRpY2F0ZWQgYnkgdGhlIGZhY3QgaXQgY29udGFpbnNcbiAqIGFuIGV2ZW4gbnVtYmVycyBvZiBzZWdtZW50cykuXG4gKi8gZnVuY3Rpb24gd2EodCkge1xuICAgIGlmICghUHQuaXNEb2N1bWVudEtleSh0KSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBkb2N1bWVudCByZWZlcmVuY2UuIERvY3VtZW50IHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJHt0fSBoYXMgJHt0Lmxlbmd0aH0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYHBhdGhgIHJlZmVycyB0byBhIGNvbGxlY3Rpb24gKGluZGljYXRlZCBieSB0aGUgZmFjdCBpdFxuICogY29udGFpbnMgYW4gb2RkIG51bWJlcnMgb2Ygc2VnbWVudHMpLlxuICovIGZ1bmN0aW9uIF9hKHQpIHtcbiAgICBpZiAoUHQuaXNEb2N1bWVudEtleSh0KSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBjb2xsZWN0aW9uIHJlZmVyZW5jZS4gQ29sbGVjdGlvbiByZWZlcmVuY2VzIG11c3QgaGF2ZSBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJHt0fSBoYXMgJHt0Lmxlbmd0aH0uYCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGl0J3MgYSBub24tbnVsbCBvYmplY3Qgd2l0aG91dCBhIGN1c3RvbSBwcm90b3R5cGVcbiAqIChpLmUuIGV4Y2x1ZGVzIEFycmF5LCBEYXRlLCBldGMuKS5cbiAqL1xuLyoqIFJldHVybnMgYSBzdHJpbmcgZGVzY3JpYmluZyB0aGUgdHlwZSAvIHZhbHVlIG9mIHRoZSBwcm92aWRlZCBpbnB1dC4gKi9cbmZ1bmN0aW9uIG1hKHQpIHtcbiAgICBpZiAodm9pZCAwID09PSB0KSByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuIFwibnVsbFwiO1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0KSByZXR1cm4gdC5sZW5ndGggPiAyMCAmJiAodCA9IGAke3Quc3Vic3RyaW5nKDAsIDIwKX0uLi5gKSwgXG4gICAgSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgaWYgKFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgfHwgXCJib29sZWFuXCIgPT0gdHlwZW9mIHQpIHJldHVybiBcIlwiICsgdDtcbiAgICBpZiAoXCJvYmplY3RcIiA9PSB0eXBlb2YgdCkge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gXCJhbiBhcnJheVwiO1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBlID0gXG4gICAgICAgICAgICAvKiogdHJ5IHRvIGdldCB0aGUgY29uc3RydWN0b3IgbmFtZSBmb3IgYW4gb2JqZWN0LiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGlmICh0LmNvbnN0cnVjdG9yKSByZXR1cm4gdC5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBDYXN0cyBgb2JqYCB0byBgVGAsIG9wdGlvbmFsbHkgdW53cmFwcGluZyBDb21wYXQgdHlwZXMgdG8gZXhwb3NlIHRoZVxuICogdW5kZXJseWluZyBpbnN0YW5jZS4gVGhyb3dzIGlmICBgb2JqYCBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgYFRgLlxuICpcbiAqIFRoaXMgY2FzdCBpcyB1c2VkIGluIHRoZSBMaXRlIGFuZCBGdWxsIFNESyB0byB2ZXJpZnkgaW5zdGFuY2UgdHlwZXMgZm9yXG4gKiBhcmd1bWVudHMgcGFzc2VkIHRvIHRoZSBwdWJsaWMgQVBJLlxuICogQGludGVybmFsXG4gKi8gKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGUgPyBgYSBjdXN0b20gJHtlfSBvYmplY3RgIDogXCJhbiBvYmplY3RcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gXCJmdW5jdGlvblwiID09IHR5cGVvZiB0ID8gXCJhIGZ1bmN0aW9uXCIgOiBMKCk7XG59XG5cbmZ1bmN0aW9uIGdhKHQsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmUpIHtcbiAgICBpZiAoXCJfZGVsZWdhdGVcIiBpbiB0ICYmIChcbiAgICAvLyBVbndyYXAgQ29tcGF0IHR5cGVzXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB0ID0gdC5fZGVsZWdhdGUpLCAhKHQgaW5zdGFuY2VvZiBlKSkge1xuICAgICAgICBpZiAoZS5uYW1lID09PSB0LmNvbnN0cnVjdG9yLm5hbWUpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUeXBlIGRvZXMgbm90IG1hdGNoIHRoZSBleHBlY3RlZCBpbnN0YW5jZS4gRGlkIHlvdSBwYXNzIGEgcmVmZXJlbmNlIGZyb20gYSBkaWZmZXJlbnQgRmlyZXN0b3JlIFNESz9cIik7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBtYSh0KTtcbiAgICAgICAgICAgIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEV4cGVjdGVkIHR5cGUgJyR7ZS5uYW1lfScsIGJ1dCBpdCB3YXM6ICR7bn1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24geWEodCwgZSkge1xuICAgIGlmIChlIDw9IDApIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7dH0oKSByZXF1aXJlcyBhIHBvc2l0aXZlIG51bWJlciwgYnV0IGl0IHdhczogJHtlfS5gKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIHNldHRpbmdzKCkgZGVmYXVsdHM6XG4vKipcbiAqIEEgY29uY3JldGUgdHlwZSBkZXNjcmliaW5nIGFsbCB0aGUgdmFsdWVzIHRoYXQgY2FuIGJlIGFwcGxpZWQgdmlhIGFcbiAqIHVzZXItc3VwcGxpZWQgYEZpcmVzdG9yZVNldHRpbmdzYCBvYmplY3QuIFRoaXMgaXMgYSBzZXBhcmF0ZSB0eXBlIHNvIHRoYXRcbiAqIGRlZmF1bHRzIGNhbiBiZSBzdXBwbGllZCBhbmQgdGhlIHZhbHVlIGNhbiBiZSBjaGVja2VkIGZvciBlcXVhbGl0eS5cbiAqL1xuY2xhc3MgcGEge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQuaG9zdCkge1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdC5zc2wpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCBwcm92aWRlIHNzbCBvcHRpb24gaWYgaG9zdCBvcHRpb24gaXMgbm90IHNldFwiKTtcbiAgICAgICAgICAgIHRoaXMuaG9zdCA9IFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIsIHRoaXMuc3NsID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHRoaXMuaG9zdCA9IHQuaG9zdCwgdGhpcy5zc2wgPSBudWxsID09PSAoZSA9IHQuc3NsKSB8fCB2b2lkIDAgPT09IGUgfHwgZTtcbiAgICAgICAgaWYgKHRoaXMuY3JlZGVudGlhbHMgPSB0LmNyZWRlbnRpYWxzLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSAhIXQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgXG4gICAgICAgIHZvaWQgMCA9PT0gdC5jYWNoZVNpemVCeXRlcykgdGhpcy5jYWNoZVNpemVCeXRlcyA9IDQxOTQzMDQwOyBlbHNlIHtcbiAgICAgICAgICAgIGlmICgtMSAhPT0gdC5jYWNoZVNpemVCeXRlcyAmJiB0LmNhY2hlU2l6ZUJ5dGVzIDwgMTA0ODU3NikgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlU2l6ZUJ5dGVzIG11c3QgYmUgYXQgbGVhc3QgMTA0ODU3NlwiKTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSB0LmNhY2hlU2l6ZUJ5dGVzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9ICEhdC5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9ICEhdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIFxuICAgICAgICB0aGlzLnVzZUZldGNoU3RyZWFtcyA9ICEhdC51c2VGZXRjaFN0cmVhbXMsIGRhKFwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZ1wiLCB0LmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIFwiZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nXCIsIHQuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhvc3QgPT09IHQuaG9zdCAmJiB0aGlzLnNzbCA9PT0gdC5zc2wgJiYgdGhpcy5jcmVkZW50aWFscyA9PT0gdC5jcmVkZW50aWFscyAmJiB0aGlzLmNhY2hlU2l6ZUJ5dGVzID09PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9PT0gdC5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nICYmIHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID09PSB0LmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyAmJiB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPT09IHQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyAmJiB0aGlzLnVzZUZldGNoU3RyZWFtcyA9PT0gdC51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgQ2xvdWQgRmlyZXN0b3JlIHNlcnZpY2UgaW50ZXJmYWNlLlxuICpcbiAqIERvIG5vdCBjYWxsIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkuIEluc3RlYWQsIHVzZSB7QGxpbmsgZ2V0RmlyZXN0b3JlfS5cbiAqLyBjbGFzcyBUYSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuX2NyZWRlbnRpYWxzID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIGl0J3MgYSBGaXJlc3RvcmUgb3IgRmlyZXN0b3JlIExpdGUgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImZpcmVzdG9yZS1saXRlXCIsIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gXCIobGl0ZSlcIiwgdGhpcy5fc2V0dGluZ3MgPSBuZXcgcGEoe30pLCBcbiAgICAgICAgdGhpcy5fc2V0dGluZ3NGcm96ZW4gPSAhMSwgdCBpbnN0YW5jZW9mIGhhID8gdGhpcy5fZGF0YWJhc2VJZCA9IHQgOiAodGhpcy5fYXBwID0gdCwgXG4gICAgICAgIHRoaXMuX2RhdGFiYXNlSWQgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuYXBwbHkodC5vcHRpb25zLCBbIFwicHJvamVjdElkXCIgXSkpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgJ1wicHJvamVjdElkXCIgbm90IHByb3ZpZGVkIGluIGZpcmViYXNlLmluaXRpYWxpemVBcHAuJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGhhKHQub3B0aW9ucy5wcm9qZWN0SWQpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogTW9kaWZ5IHRoaXMgaW5zdGFuY2UgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgQ2xvdWQgRmlyZXN0b3JlIGVtdWxhdG9yLlxuICpcbiAqIE5vdGU6IFRoaXMgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIHRoaXMgaW5zdGFuY2UgaGFzIGJlZW4gdXNlZCB0byBkbyBhbnlcbiAqIG9wZXJhdGlvbnMuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSBgRmlyZXN0b3JlYCBpbnN0YW5jZSB0byBjb25maWd1cmUgdG8gY29ubmVjdCB0byB0aGVcbiAqIGVtdWxhdG9yLlxuICogQHBhcmFtIGhvc3QgLSB0aGUgZW11bGF0b3IgaG9zdCAoZXg6IGxvY2FsaG9zdCkuXG4gKiBAcGFyYW0gcG9ydCAtIHRoZSBlbXVsYXRvciBwb3J0IChleDogOTAwMCkuXG4gKiBAcGFyYW0gb3B0aW9ucy5tb2NrVXNlclRva2VuIC0gdGhlIG1vY2sgYXV0aCB0b2tlbiB0byB1c2UgZm9yIHVuaXQgdGVzdGluZ1xuICogU2VjdXJpdHkgUnVsZXMuXG4gKi8gKHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBhc3NvY2lhdGVkIHdpdGggdGhpcyBgRmlyZXN0b3JlYCBzZXJ2aWNlXG4gICAgICogaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBhcHAoKSB7XG4gICAgICAgIGlmICghdGhpcy5fYXBwKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIHdhcyBub3QgaW5pdGlhbGl6ZWQgdXNpbmcgdGhlIEZpcmViYXNlIFNESy4gJ2FwcCcgaXMgbm90IGF2YWlsYWJsZVwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcDtcbiAgICB9XG4gICAgZ2V0IF9pbml0aWFsaXplZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzRnJvemVuO1xuICAgIH1cbiAgICBnZXQgX3Rlcm1pbmF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuX3Rlcm1pbmF0ZVRhc2s7XG4gICAgfVxuICAgIF9zZXRTZXR0aW5ncyh0KSB7XG4gICAgICAgIGlmICh0aGlzLl9zZXR0aW5nc0Zyb3plbikgdGhyb3cgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIGl0cyBzZXR0aW5ncyBjYW4gbm8gbG9uZ2VyIGJlIGNoYW5nZWQuIFlvdSBjYW4gb25seSBtb2RpZnkgc2V0dGluZ3MgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBuZXcgcGEodCksIHZvaWQgMCAhPT0gdC5jcmVkZW50aWFscyAmJiAodGhpcy5fY3JlZGVudGlhbHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBpZiAoIXQpIHJldHVybiBuZXcgRztcbiAgICAgICAgICAgIHN3aXRjaCAodC50eXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJnYXBpXCI6XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuY2xpZW50O1xuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGlzIHJlYWxseSBpcyBhIEdhcGkgY2xpZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQighKFwib2JqZWN0XCIgIT0gdHlwZW9mIGUgfHwgbnVsbCA9PT0gZSB8fCAhZS5hdXRoIHx8ICFlLmF1dGguZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eSkpLCBcbiAgICAgICAgICAgICAgICBuZXcgWShlLCB0LnNlc3Npb25JbmRleCB8fCBcIjBcIiwgdC5pYW1Ub2tlbiB8fCBudWxsKTtcblxuICAgICAgICAgICAgICBjYXNlIFwicHJvdmlkZXJcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5jbGllbnQ7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwibWFrZUNyZWRlbnRpYWxzUHJvdmlkZXIgZmFpbGVkIGR1ZSB0byBpbnZhbGlkIGNyZWRlbnRpYWwgdHlwZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSh0LmNyZWRlbnRpYWxzKSk7XG4gICAgfVxuICAgIF9nZXRTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzO1xuICAgIH1cbiAgICBfZnJlZXplU2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5nc0Zyb3plbiA9ICEwLCB0aGlzLl9zZXR0aW5ncztcbiAgICB9XG4gICAgX2RlbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rlcm1pbmF0ZVRhc2sgfHwgKHRoaXMuX3Rlcm1pbmF0ZVRhc2sgPSB0aGlzLl90ZXJtaW5hdGUoKSksIHRoaXMuX3Rlcm1pbmF0ZVRhc2s7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgRmlyZXN0b3JlYCBpbnN0YW5jZS4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXBwOiB0aGlzLl9hcHAsXG4gICAgICAgICAgICBkYXRhYmFzZUlkOiB0aGlzLl9kYXRhYmFzZUlkLFxuICAgICAgICAgICAgc2V0dGluZ3M6IHRoaXMuX3NldHRpbmdzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRlcm1pbmF0ZXMgYWxsIGNvbXBvbmVudHMgdXNlZCBieSB0aGlzIGNsaWVudC4gU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIG1ldGhvZCB0byBjbGVhbiB1cCB0aGVpciBvd24gZGVwZW5kZW5jaWVzLCBidXQgbXVzdCBhbHNvIGNhbGwgdGhpc1xuICAgICAqIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIE9ubHkgZXZlciBjYWxsZWQgb25jZS5cbiAgICAgKi8gICAgX3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgLyoqXG4gKiBSZW1vdmVzIGFsbCBjb21wb25lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWQgaW5zdGFuY2UuIE11c3QgYmUgY2FsbGVkXG4gKiB3aGVuIHRoZSBgRmlyZXN0b3JlYCBpbnN0YW5jZSBpcyB0ZXJtaW5hdGVkLlxuICovXG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbGEuZ2V0KHQpO1xuICAgICAgICAgICAgZSAmJiAoJChcIkNvbXBvbmVudFByb3ZpZGVyXCIsIFwiUmVtb3ZpbmcgRGF0YXN0b3JlXCIpLCBsYS5kZWxldGUodCksIGUudGVybWluYXRlKCkpO1xuICAgICAgICB9KHRoaXMpLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEVhKHQsIGUsIG4sIHMgPSB7fSkge1xuICAgIHZhciBpO1xuICAgIGNvbnN0IHIgPSAodCA9IGdhKHQsIFRhKSkuX2dldFNldHRpbmdzKCk7XG4gICAgaWYgKFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIgIT09IHIuaG9zdCAmJiByLmhvc3QgIT09IGUgJiYgRihcIkhvc3QgaGFzIGJlZW4gc2V0IGluIGJvdGggc2V0dGluZ3MoKSBhbmQgdXNlRW11bGF0b3IoKSwgZW11bGF0b3IgaG9zdCB3aWxsIGJlIHVzZWRcIiksIFxuICAgIHQuX3NldFNldHRpbmdzKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgciksIHtcbiAgICAgICAgaG9zdDogYCR7ZX06JHtufWAsXG4gICAgICAgIHNzbDogITFcbiAgICB9KSksIHMubW9ja1VzZXJUb2tlbikge1xuICAgICAgICBsZXQgZSwgbjtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHMubW9ja1VzZXJUb2tlbikgZSA9IHMubW9ja1VzZXJUb2tlbiwgbiA9IEQuTU9DS19VU0VSOyBlbHNlIHtcbiAgICAgICAgICAgIC8vIExldCBjcmVhdGVNb2NrVXNlclRva2VuIHZhbGlkYXRlIGZpcnN0IChjYXRjaGVzIGNvbW1vbiBtaXN0YWtlcyBsaWtlXG4gICAgICAgICAgICAvLyBpbnZhbGlkIGZpZWxkIFwidWlkXCIgYW5kIG1pc3NpbmcgZmllbGQgXCJzdWJcIiAvIFwidXNlcl9pZFwiLilcbiAgICAgICAgICAgIGUgPSBjcmVhdGVNb2NrVXNlclRva2VuKHMubW9ja1VzZXJUb2tlbiwgbnVsbCA9PT0gKGkgPSB0Ll9hcHApIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkub3B0aW9ucy5wcm9qZWN0SWQpO1xuICAgICAgICAgICAgY29uc3QgciA9IHMubW9ja1VzZXJUb2tlbi5zdWIgfHwgcy5tb2NrVXNlclRva2VuLnVzZXJfaWQ7XG4gICAgICAgICAgICBpZiAoIXIpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xuICAgICAgICAgICAgbiA9IG5ldyBEKHIpO1xuICAgICAgICB9XG4gICAgICAgIHQuX2NyZWRlbnRpYWxzID0gbmV3IHoobmV3IFcoZSwgbikpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgRG9jdW1lbnRSZWZlcmVuY2VgIHJlZmVycyB0byBhIGRvY3VtZW50IGxvY2F0aW9uIGluIGEgRmlyZXN0b3JlIGRhdGFiYXNlXG4gKiBhbmQgY2FuIGJlIHVzZWQgdG8gd3JpdGUsIHJlYWQsIG9yIGxpc3RlbiB0byB0aGUgbG9jYXRpb24uIFRoZSBkb2N1bWVudCBhdFxuICogdGhlIHJlZmVyZW5jZWQgbG9jYXRpb24gbWF5IG9yIG1heSBub3QgZXhpc3QuXG4gKi8gY2xhc3MgSWEge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqXG4gICAgICogSWYgcHJvdmlkZWQsIHRoZSBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5zdGFuY2UuXG4gICAgICovXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlciA9IGUsIHRoaXMuX2tleSA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImRvY3VtZW50XCIsIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgZ2V0IF9wYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBkb2N1bWVudCdzIGlkZW50aWZpZXIgd2l0aGluIGl0cyBjb2xsZWN0aW9uLlxuICAgICAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHBhdGggb2YgdGhlIHJlZmVyZW5jZWQgZG9jdW1lbnQgKHJlbGF0aXZlXG4gICAgICogdG8gdGhlIHJvb3Qgb2YgdGhlIGRhdGFiYXNlKS5cbiAgICAgKi8gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbGxlY3Rpb24gdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGJlbG9uZ3MgdG8uXG4gICAgICovICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmEodGhpcy5maXJlc3RvcmUsIHRoaXMuY29udmVydGVyLCB0aGlzLl9rZXkucGF0aC5wb3BMYXN0KCkpO1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJYSh0aGlzLmZpcmVzdG9yZSwgdCwgdGhpcy5fa2V5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlgIHJlZmVycyB0byBhIHF1ZXJ5IHdoaWNoIHlvdSBjYW4gcmVhZCBvciBsaXN0ZW4gdG8uIFlvdSBjYW4gYWxzb1xuICogY29uc3RydWN0IHJlZmluZWQgYFF1ZXJ5YCBvYmplY3RzIGJ5IGFkZGluZyBmaWx0ZXJzIGFuZCBvcmRlcmluZy5cbiAqLyBjbGFzcyBBYSB7XG4gICAgLy8gVGhpcyBpcyB0aGUgbGl0ZSB2ZXJzaW9uIG9mIHRoZSBRdWVyeSBjbGFzcyBpbiB0aGUgbWFpbiBTREsuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqXG4gICAgICogSWYgcHJvdmlkZWQsIHRoZSBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5zdGFuY2UuXG4gICAgICovXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlciA9IGUsIHRoaXMuX3F1ZXJ5ID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwicXVlcnlcIiwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBYSh0aGlzLmZpcmVzdG9yZSwgdCwgdGhpcy5fcXVlcnkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCBvYmplY3QgY2FuIGJlIHVzZWQgZm9yIGFkZGluZyBkb2N1bWVudHMsIGdldHRpbmdcbiAqIGRvY3VtZW50IHJlZmVyZW5jZXMsIGFuZCBxdWVyeWluZyBmb3IgZG9jdW1lbnRzICh1c2luZyB7QGxpbmsgcXVlcnl9KS5cbiAqLyBjbGFzcyBSYSBleHRlbmRzIEFhIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIodCwgZSwgd2UobikpLCB0aGlzLl9wYXRoID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiY29sbGVjdGlvblwiO1xuICAgIH1cbiAgICAvKiogVGhlIGNvbGxlY3Rpb24ncyBpZGVudGlmaWVyLiAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGF0aCBvZiB0aGUgcmVmZXJlbmNlZCBjb2xsZWN0aW9uIChyZWxhdGl2ZVxuICAgICAqIHRvIHRoZSByb290IG9mIHRoZSBkYXRhYmFzZSkuXG4gICAgICovICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSByZWZlcmVuY2UgdG8gdGhlIGNvbnRhaW5pbmcgYERvY3VtZW50UmVmZXJlbmNlYCBpZiB0aGlzIGlzIGFcbiAgICAgKiBzdWJjb2xsZWN0aW9uLiBJZiB0aGlzIGlzbid0IGEgc3ViY29sbGVjdGlvbiwgdGhlIHJlZmVyZW5jZSBpcyBudWxsLlxuICAgICAqLyAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5fcGF0aC5wb3BMYXN0KCk7XG4gICAgICAgIHJldHVybiB0LmlzRW1wdHkoKSA/IG51bGwgOiBuZXcgSWEodGhpcy5maXJlc3RvcmUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIG5ldyBQdCh0KSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IFJhKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9wYXRoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGJhKHQsIGUsIC4uLm4pIHtcbiAgICBpZiAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgZmEoXCJjb2xsZWN0aW9uXCIsIFwicGF0aFwiLCBlKSwgdCBpbnN0YW5jZW9mIFRhKSB7XG4gICAgICAgIGNvbnN0IHMgPSBodC5mcm9tU3RyaW5nKGUsIC4uLm4pO1xuICAgICAgICByZXR1cm4gX2EocyksIG5ldyBSYSh0LCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIHMpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBJYSB8fCB0IGluc3RhbmNlb2YgUmEpKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gY29sbGVjdGlvbigpIHRvIGJlIGEgQ29sbGVjdGlvblJlZmVyZW5jZSwgYSBEb2N1bWVudFJlZmVyZW5jZSBvciBGaXJlYmFzZUZpcmVzdG9yZVwiKTtcbiAgICAgICAgY29uc3QgcyA9IHQuX3BhdGguY2hpbGQoaHQuZnJvbVN0cmluZyhlLCAuLi5uKSk7XG4gICAgICAgIHJldHVybiBfYShzKSwgbmV3IFJhKHQuZmlyZXN0b3JlLCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBzKTtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JlbGl0ZSk6IENvbnNpZGVyIHVzaW5nIEVycm9yRmFjdG9yeSAtXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2Jsb2IvMDEzMWUxZi9wYWNrYWdlcy91dGlsL3NyYy9lcnJvcnMudHMjTDEwNlxuLyoqXG4gKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGBRdWVyeWAgaW5zdGFuY2UgdGhhdCBpbmNsdWRlcyBhbGwgZG9jdW1lbnRzIGluIHRoZVxuICogZGF0YWJhc2UgdGhhdCBhcmUgY29udGFpbmVkIGluIGEgY29sbGVjdGlvbiBvciBzdWJjb2xsZWN0aW9uIHdpdGggdGhlXG4gKiBnaXZlbiBgY29sbGVjdGlvbklkYC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gQSByZWZlcmVuY2UgdG8gdGhlIHJvb3QgYEZpcmVzdG9yZWAgaW5zdGFuY2UuXG4gKiBAcGFyYW0gY29sbGVjdGlvbklkIC0gSWRlbnRpZmllcyB0aGUgY29sbGVjdGlvbnMgdG8gcXVlcnkgb3Zlci4gRXZlcnlcbiAqIGNvbGxlY3Rpb24gb3Igc3ViY29sbGVjdGlvbiB3aXRoIHRoaXMgSUQgYXMgdGhlIGxhc3Qgc2VnbWVudCBvZiBpdHMgcGF0aFxuICogd2lsbCBiZSBpbmNsdWRlZC4gQ2Fubm90IGNvbnRhaW4gYSBzbGFzaC5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGBRdWVyeWAuXG4gKi8gZnVuY3Rpb24gUGEodCwgZSkge1xuICAgIGlmICh0ID0gZ2EodCwgVGEpLCBmYShcImNvbGxlY3Rpb25Hcm91cFwiLCBcImNvbGxlY3Rpb24gaWRcIiwgZSksIGUuaW5kZXhPZihcIi9cIikgPj0gMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBjb2xsZWN0aW9uIElEICcke2V9JyBwYXNzZWQgdG8gZnVuY3Rpb24gY29sbGVjdGlvbkdyb3VwKCkuIENvbGxlY3Rpb24gSURzIG11c3Qgbm90IGNvbnRhaW4gJy8nLmApO1xuICAgIHJldHVybiBuZXcgQWEodCwgXG4gICAgLyogY29udmVydGVyPSAqLyBudWxsLCBcbiAgICAvKipcbiAqIENyZWF0ZXMgYSBuZXcgUXVlcnkgZm9yIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50c1xuICogd2l0aGluIHRoZSBwcm92aWRlZCBjb2xsZWN0aW9uIGdyb3VwLlxuICovXG4gICAgZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IGZlKGh0LmVtcHR5UGF0aCgpLCB0KTtcbiAgICB9KGUpKTtcbn1cblxuZnVuY3Rpb24gdmEodCwgZSwgLi4ubikge1xuICAgIGlmICh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBcbiAgICAvLyBXZSBhbGxvdyBvbWlzc2lvbiBvZiAncGF0aFN0cmluZycgYnV0IGV4cGxpY2l0bHkgcHJvaGliaXQgcGFzc2luZyBpbiBib3RoXG4gICAgLy8gJ3VuZGVmaW5lZCcgYW5kICdudWxsJy5cbiAgICAxID09PSBhcmd1bWVudHMubGVuZ3RoICYmIChlID0gdHQuSSgpKSwgZmEoXCJkb2NcIiwgXCJwYXRoXCIsIGUpLCB0IGluc3RhbmNlb2YgVGEpIHtcbiAgICAgICAgY29uc3QgcyA9IGh0LmZyb21TdHJpbmcoZSwgLi4ubik7XG4gICAgICAgIHJldHVybiB3YShzKSwgbmV3IElhKHQsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIG5ldyBQdChzKSk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIElhIHx8IHQgaW5zdGFuY2VvZiBSYSkpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBjb2xsZWN0aW9uKCkgdG8gYmUgYSBDb2xsZWN0aW9uUmVmZXJlbmNlLCBhIERvY3VtZW50UmVmZXJlbmNlIG9yIEZpcmViYXNlRmlyZXN0b3JlXCIpO1xuICAgICAgICBjb25zdCBzID0gdC5fcGF0aC5jaGlsZChodC5mcm9tU3RyaW5nKGUsIC4uLm4pKTtcbiAgICAgICAgcmV0dXJuIHdhKHMpLCBuZXcgSWEodC5maXJlc3RvcmUsIHQgaW5zdGFuY2VvZiBSYSA/IHQuY29udmVydGVyIDogbnVsbCwgbmV3IFB0KHMpKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCByZWZlcmVuY2VzIGFyZSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgcmVmZXJlbmNlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIHJlZmVyZW5jZSB0byBjb21wYXJlLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlcyBwb2ludCB0byB0aGUgc2FtZSBsb2NhdGlvbiBpbiB0aGUgc2FtZVxuICogRmlyZXN0b3JlIGRhdGFiYXNlLlxuICovIGZ1bmN0aW9uIFZhKHQsIGUpIHtcbiAgICByZXR1cm4gdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSwgKHQgaW5zdGFuY2VvZiBJYSB8fCB0IGluc3RhbmNlb2YgUmEpICYmIChlIGluc3RhbmNlb2YgSWEgfHwgZSBpbnN0YW5jZW9mIFJhKSAmJiAodC5maXJlc3RvcmUgPT09IGUuZmlyZXN0b3JlICYmIHQucGF0aCA9PT0gZS5wYXRoICYmIHQuY29udmVydGVyID09PSBlLmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBxdWVyaWVzIHBvaW50IHRvIHRoZSBzYW1lIGNvbGxlY3Rpb24gYW5kIGFwcGx5XG4gKiB0aGUgc2FtZSBjb25zdHJhaW50cy5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgYFF1ZXJ5YCB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gQSBgUXVlcnlgIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2VzIHBvaW50IHRvIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBzYW1lXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UuXG4gKi8gZnVuY3Rpb24gU2EodCwgZSkge1xuICAgIHJldHVybiB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCB0IGluc3RhbmNlb2YgQWEgJiYgZSBpbnN0YW5jZW9mIEFhICYmICh0LmZpcmVzdG9yZSA9PT0gZS5maXJlc3RvcmUgJiYgQWUodC5fcXVlcnksIGUuX3F1ZXJ5KSAmJiB0LmNvbnZlcnRlciA9PT0gZS5jb252ZXJ0ZXIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBEYSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIFRoZSBsYXN0IHByb21pc2UgaW4gdGhlIHF1ZXVlLlxuICAgICAgICB0aGlzLl9jID0gUHJvbWlzZS5yZXNvbHZlKCksIFxuICAgICAgICAvLyBBIGxpc3Qgb2YgcmV0cnlhYmxlIG9wZXJhdGlvbnMuIFJldHJ5YWJsZSBvcGVyYXRpb25zIGFyZSBydW4gaW4gb3JkZXIgYW5kXG4gICAgICAgIC8vIHJldHJpZWQgd2l0aCBiYWNrb2ZmLlxuICAgICAgICB0aGlzLm1jID0gW10sIFxuICAgICAgICAvLyBJcyB0aGlzIEFzeW5jUXVldWUgYmVpbmcgc2h1dCBkb3duPyBPbmNlIGl0IGlzIHNldCB0byB0cnVlLCBpdCB3aWxsIG5vdFxuICAgICAgICAvLyBiZSBjaGFuZ2VkIGFnYWluLlxuICAgICAgICB0aGlzLmdjID0gITEsIFxuICAgICAgICAvLyBPcGVyYXRpb25zIHNjaGVkdWxlZCB0byBiZSBxdWV1ZWQgaW4gdGhlIGZ1dHVyZS4gT3BlcmF0aW9ucyBhcmVcbiAgICAgICAgLy8gYXV0b21hdGljYWxseSByZW1vdmVkIGFmdGVyIHRoZXkgYXJlIHJ1biBvciBjYW5jZWxlZC5cbiAgICAgICAgdGhpcy55YyA9IFtdLCBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICB0aGlzLlRjID0gbnVsbCwgXG4gICAgICAgIC8vIEZsYWcgc2V0IHdoaWxlIHRoZXJlJ3MgYW4gb3V0c3RhbmRpbmcgQXN5bmNRdWV1ZSBvcGVyYXRpb24sIHVzZWQgZm9yXG4gICAgICAgIC8vIGFzc2VydGlvbiBzYW5pdHktY2hlY2tzLlxuICAgICAgICB0aGlzLkVjID0gITEsIFxuICAgICAgICAvLyBFbmFibGVkIGR1cmluZyBzaHV0ZG93biBvbiBTYWZhcmkgdG8gcHJldmVudCBmdXR1cmUgYWNjZXNzIHRvIEluZGV4ZWREQi5cbiAgICAgICAgdGhpcy5JYyA9ICExLCBcbiAgICAgICAgLy8gTGlzdCBvZiBUaW1lcklkcyB0byBmYXN0LWZvcndhcmQgZGVsYXlzIGZvci5cbiAgICAgICAgdGhpcy5BYyA9IFtdLCBcbiAgICAgICAgLy8gQmFja29mZiB0aW1lciB1c2VkIHRvIHNjaGVkdWxlIHJldHJpZXMgZm9yIHJldHJ5YWJsZSBvcGVyYXRpb25zXG4gICAgICAgIHRoaXMuYXIgPSBuZXcgWHIodGhpcywgXCJhc3luY19xdWV1ZV9yZXRyeVwiIC8qIEFzeW5jUXVldWVSZXRyeSAqLyksIFxuICAgICAgICAvLyBWaXNpYmlsaXR5IGhhbmRsZXIgdGhhdCB0cmlnZ2VycyBhbiBpbW1lZGlhdGUgcmV0cnkgb2YgYWxsIHJldHJ5YWJsZVxuICAgICAgICAvLyBvcGVyYXRpb25zLiBNZWFudCB0byBzcGVlZCB1cCByZWNvdmVyeSB3aGVuIHdlIHJlZ2FpbiBmaWxlIHN5c3RlbSBhY2Nlc3NcbiAgICAgICAgLy8gYWZ0ZXIgcGFnZSBjb21lcyBpbnRvIGZvcmVncm91bmQuXG4gICAgICAgIHRoaXMuUmMgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gSnIoKTtcbiAgICAgICAgICAgIHQgJiYgJChcIkFzeW5jUXVldWVcIiwgXCJWaXNpYmlsaXR5IHN0YXRlIGNoYW5nZWQgdG8gXCIgKyB0LnZpc2liaWxpdHlTdGF0ZSksIHRoaXMuYXIudHIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdCA9IEpyKCk7XG4gICAgICAgIHQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0LmFkZEV2ZW50TGlzdGVuZXIgJiYgdC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLlJjKTtcbiAgICB9XG4gICAgZ2V0IGlzU2h1dHRpbmdEb3duKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nYztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBvcGVyYXRpb24gdG8gdGhlIHF1ZXVlIHdpdGhvdXQgd2FpdGluZyBmb3IgaXQgdG8gY29tcGxldGUgKGkuZS5cbiAgICAgKiB3ZSBpZ25vcmUgdGhlIFByb21pc2UgcmVzdWx0KS5cbiAgICAgKi8gICAgZW5xdWV1ZUFuZEZvcmdldCh0KSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhpcy5lbnF1ZXVlKHQpO1xuICAgIH1cbiAgICBlbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCh0KSB7XG4gICAgICAgIHRoaXMuYmMoKSwgXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhpcy5QYyh0KTtcbiAgICB9XG4gICAgZW50ZXJSZXN0cmljdGVkTW9kZSh0KSB7XG4gICAgICAgIGlmICghdGhpcy5nYykge1xuICAgICAgICAgICAgdGhpcy5nYyA9ICEwLCB0aGlzLkljID0gdCB8fCAhMTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBKcigpO1xuICAgICAgICAgICAgZSAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUucmVtb3ZlRXZlbnRMaXN0ZW5lciAmJiBlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuUmMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVucXVldWUodCkge1xuICAgICAgICBpZiAodGhpcy5iYygpLCB0aGlzLmdjKSBcbiAgICAgICAgLy8gUmV0dXJuIGEgUHJvbWlzZSB3aGljaCBuZXZlciByZXNvbHZlcy5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgoKSA9PiB7fSkpO1xuICAgICAgICAvLyBDcmVhdGUgYSBkZWZlcnJlZCBQcm9taXNlIHRoYXQgd2UgY2FuIHJldHVybiB0byB0aGUgY2FsbGVlLiBUaGlzXG4gICAgICAgIC8vIGFsbG93cyB1cyB0byByZXR1cm4gYSBcImhhbmdpbmcgUHJvbWlzZVwiIG9ubHkgdG8gdGhlIGNhbGxlZSBhbmQgc3RpbGxcbiAgICAgICAgLy8gYWR2YW5jZSB0aGUgcXVldWUgZXZlbiB3aGVuIHRoZSBvcGVyYXRpb24gaXMgbm90IHJ1bi5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IFE7XG4gICAgICAgIHJldHVybiB0aGlzLlBjKCgoKSA9PiB0aGlzLmdjICYmIHRoaXMuSWMgPyBQcm9taXNlLnJlc29sdmUoKSA6ICh0KCkudGhlbihlLnJlc29sdmUsIGUucmVqZWN0KSwgXG4gICAgICAgIGUucHJvbWlzZSkpKS50aGVuKCgoKSA9PiBlLnByb21pc2UpKTtcbiAgICB9XG4gICAgZW5xdWV1ZVJldHJ5YWJsZSh0KSB7XG4gICAgICAgIHRoaXMuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMubWMucHVzaCh0KSwgdGhpcy52YygpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW5zIHRoZSBuZXh0IG9wZXJhdGlvbiBmcm9tIHRoZSByZXRyeWFibGUgcXVldWUuIElmIHRoZSBvcGVyYXRpb24gZmFpbHMsXG4gICAgICogcmVzY2hlZHVsZXMgd2l0aCBiYWNrb2ZmLlxuICAgICAqLyAgICBhc3luYyB2YygpIHtcbiAgICAgICAgaWYgKDAgIT09IHRoaXMubWMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubWNbMF0oKSwgdGhpcy5tYy5zaGlmdCgpLCB0aGlzLmFyLnJlc2V0KCk7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFIcyh0KSkgdGhyb3cgdDtcbiAvLyBGYWlsdXJlIHdpbGwgYmUgaGFuZGxlZCBieSBBc3luY1F1ZXVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCJBc3luY1F1ZXVlXCIsIFwiT3BlcmF0aW9uIGZhaWxlZCB3aXRoIHJldHJ5YWJsZSBlcnJvcjogXCIgKyB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWMubGVuZ3RoID4gMCAmJiBcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBhZGRpdGlvbmFsIG9wZXJhdGlvbnMsIHdlIHJlLXNjaGVkdWxlIGByZXRyeU5leHRPcCgpYC5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIHJ1biByZXRyeWFibGUgb3BlcmF0aW9ucyB0aGF0IGZhaWxlZCBkdXJpbmdcbiAgICAgICAgICAgIC8vIHRoZWlyIGluaXRpYWwgYXR0ZW1wdCBzaW5jZSB3ZSBkb24ndCBrbm93IHdoZXRoZXIgdGhleSBhcmUgYWxyZWFkeVxuICAgICAgICAgICAgLy8gZW5xdWV1ZWQuIElmLCBmb3IgZXhhbXBsZSwgYG9wMWAsIGBvcDJgLCBgb3AzYCBhcmUgZW5xdWV1ZWQgYW5kIGBvcDFgXG4gICAgICAgICAgICAvLyBuZWVkcyB0byAgYmUgcmUtcnVuLCB3ZSB3aWxsIHJ1biBgb3AxYCwgYG9wMWAsIGBvcDJgIHVzaW5nIHRoZVxuICAgICAgICAgICAgLy8gYWxyZWFkeSBlbnF1ZXVlZCBjYWxscyB0byBgcmV0cnlOZXh0T3AoKWAuIGBvcDMoKWAgd2lsbCB0aGVuIHJ1biBpbiB0aGVcbiAgICAgICAgICAgIC8vIGNhbGwgc2NoZWR1bGVkIGhlcmUuXG4gICAgICAgICAgICAvLyBTaW5jZSBgYmFja29mZkFuZFJ1bigpYCBjYW5jZWxzIGFuIGV4aXN0aW5nIGJhY2tvZmYgYW5kIHNjaGVkdWxlcyBhXG4gICAgICAgICAgICAvLyBuZXcgYmFja29mZiBvbiBldmVyeSBjYWxsLCB0aGVyZSBpcyBvbmx5IGV2ZXIgYSBzaW5nbGUgYWRkaXRpb25hbFxuICAgICAgICAgICAgLy8gb3BlcmF0aW9uIGluIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgIHRoaXMuYXIuWGkoKCgpID0+IHRoaXMudmMoKSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFBjKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuX2MudGhlbigoKCkgPT4gKHRoaXMuRWMgPSAhMCwgdCgpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuVGMgPSB0LCB0aGlzLkVjID0gITE7XG4gICAgICAgICAgICBjb25zdCBlID0gXG4gICAgICAgICAgICAvKipcbiAqIENocm9tZSBpbmNsdWRlcyBFcnJvci5tZXNzYWdlIGluIEVycm9yLnN0YWNrLiBPdGhlciBicm93c2VycyBkbyBub3QuXG4gKiBUaGlzIHJldHVybnMgZXhwZWN0ZWQgb3V0cHV0IG9mIG1lc3NhZ2UgKyBzdGFjayB3aGVuIGF2YWlsYWJsZS5cbiAqIEBwYXJhbSBlcnJvciAtIEVycm9yIG9yIEZpcmVzdG9yZUVycm9yXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IHQubWVzc2FnZSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIHQuc3RhY2sgJiYgKGUgPSB0LnN0YWNrLmluY2x1ZGVzKHQubWVzc2FnZSkgPyB0LnN0YWNrIDogdC5tZXNzYWdlICsgXCJcXG5cIiArIHQuc3RhY2spO1xuICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQpO1xuICAgICAgICAgICAgLy8gUmUtdGhyb3cgdGhlIGVycm9yIHNvIHRoYXQgdGhpcy50YWlsIGJlY29tZXMgYSByZWplY3RlZCBQcm9taXNlIGFuZFxuICAgICAgICAgICAgLy8gYWxsIGZ1cnRoZXIgYXR0ZW1wdHMgdG8gY2hhaW4gKHZpYSAudGhlbikgd2lsbCBqdXN0IHNob3J0LWNpcmN1aXRcbiAgICAgICAgICAgIC8vIGFuZCByZXR1cm4gdGhlIHJlamVjdGVkIFByb21pc2UuXG4gICAgICAgICAgICB0aHJvdyBPKFwiSU5URVJOQUwgVU5IQU5ETEVEIEVSUk9SOiBcIiwgZSksIHQ7XG4gICAgICAgIH0pKS50aGVuKCh0ID0+ICh0aGlzLkVjID0gITEsIHQpKSkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9jID0gZSwgZTtcbiAgICB9XG4gICAgZW5xdWV1ZUFmdGVyRGVsYXkodCwgZSwgbikge1xuICAgICAgICB0aGlzLmJjKCksIFxuICAgICAgICAvLyBGYXN0LWZvcndhcmQgZGVsYXlzIGZvciB0aW1lcklkcyB0aGF0IGhhdmUgYmVlbiBvdmVycmlkZW4uXG4gICAgICAgIHRoaXMuQWMuaW5kZXhPZih0KSA+IC0xICYmIChlID0gMCk7XG4gICAgICAgIGNvbnN0IHMgPSB4by5jcmVhdGVBbmRTY2hlZHVsZSh0aGlzLCB0LCBlLCBuLCAodCA9PiB0aGlzLlZjKHQpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnljLnB1c2gocyksIHM7XG4gICAgfVxuICAgIGJjKCkge1xuICAgICAgICB0aGlzLlRjICYmIEwoKTtcbiAgICB9XG4gICAgdmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpIHt9XG4gICAgLyoqXG4gICAgICogV2FpdHMgdW50aWwgYWxsIGN1cnJlbnRseSBxdWV1ZWQgdGFza3MgYXJlIGZpbmlzaGVkIGV4ZWN1dGluZy4gRGVsYXllZFxuICAgICAqIG9wZXJhdGlvbnMgYXJlIG5vdCBydW4uXG4gICAgICovICAgIGFzeW5jIFNjKCkge1xuICAgICAgICAvLyBPcGVyYXRpb25zIGluIHRoZSBxdWV1ZSBwcmlvciB0byBkcmFpbmluZyBtYXkgaGF2ZSBlbnF1ZXVlZCBhZGRpdGlvbmFsXG4gICAgICAgIC8vIG9wZXJhdGlvbnMuIEtlZXAgZHJhaW5pbmcgdGhlIHF1ZXVlIHVudGlsIHRoZSB0YWlsIGlzIG5vIGxvbmdlciBhZHZhbmNlZCxcbiAgICAgICAgLy8gd2hpY2ggaW5kaWNhdGVzIHRoYXQgbm8gbW9yZSBuZXcgb3BlcmF0aW9ucyB3ZXJlIGVucXVldWVkIGFuZCB0aGF0IGFsbFxuICAgICAgICAvLyBvcGVyYXRpb25zIHdlcmUgZXhlY3V0ZWQuXG4gICAgICAgIGxldCB0O1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICB0ID0gdGhpcy5fYywgYXdhaXQgdDtcbiAgICAgICAgfSB3aGlsZSAodCAhPT0gdGhpcy5fYyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogRGV0ZXJtaW5lIGlmIGEgZGVsYXllZCBvcGVyYXRpb24gd2l0aCBhIHBhcnRpY3VsYXIgVGltZXJJZFxuICAgICAqIGV4aXN0cy5cbiAgICAgKi8gICAgRGModCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy55YykgaWYgKGUudGltZXJJZCA9PT0gdCkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogUnVucyBzb21lIG9yIGFsbCBkZWxheWVkIG9wZXJhdGlvbnMgZWFybHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGFzdFRpbWVySWQgLSBEZWxheWVkIG9wZXJhdGlvbnMgdXAgdG8gYW5kIGluY2x1ZGluZyB0aGlzIFRpbWVySWRcbiAgICAgKiB3aWxsIGJlIGRyYWluZWQuIFBhc3MgVGltZXJJZC5BbGwgdG8gcnVuIGFsbCBkZWxheWVkIG9wZXJhdGlvbnMuXG4gICAgICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSBhbGwgb3BlcmF0aW9ucyBoYXZlIGJlZW4gcnVuLlxuICAgICAqLyAgICBDYyh0KSB7XG4gICAgICAgIC8vIE5vdGUgdGhhdCBkcmFpbmluZyBtYXkgZ2VuZXJhdGUgbW9yZSBkZWxheWVkIG9wcywgc28gd2UgZG8gdGhhdCBmaXJzdC5cbiAgICAgICAgcmV0dXJuIHRoaXMuU2MoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBSdW4gb3BzIGluIHRoZSBzYW1lIG9yZGVyIHRoZXknZCBydW4gaWYgdGhleSByYW4gbmF0dXJhbGx5LlxuICAgICAgICAgICAgdGhpcy55Yy5zb3J0KCgodCwgZSkgPT4gdC50YXJnZXRUaW1lTXMgLSBlLnRhcmdldFRpbWVNcykpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMueWMpIGlmIChlLnNraXBEZWxheSgpLCBcImFsbFwiIC8qIEFsbCAqLyAhPT0gdCAmJiBlLnRpbWVySWQgPT09IHQpIGJyZWFrO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuU2MoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFNraXAgYWxsIHN1YnNlcXVlbnQgZGVsYXlzIGZvciBhIHRpbWVyIGlkLlxuICAgICAqLyAgICBOYyh0KSB7XG4gICAgICAgIHRoaXMuQWMucHVzaCh0KTtcbiAgICB9XG4gICAgLyoqIENhbGxlZCBvbmNlIGEgRGVsYXllZE9wZXJhdGlvbiBpcyBydW4gb3IgY2FuY2VsZWQuICovICAgIFZjKHQpIHtcbiAgICAgICAgLy8gTk9URTogaW5kZXhPZiAvIHNsaWNlIGFyZSBPKG4pLCBidXQgZGVsYXllZE9wZXJhdGlvbnMgaXMgZXhwZWN0ZWQgdG8gYmUgc21hbGwuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnljLmluZGV4T2YodCk7XG4gICAgICAgIHRoaXMueWMuc3BsaWNlKGUsIDEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQ2EodCkge1xuICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIG9iaiBpcyBhbiBvYmplY3QgYW5kIGNvbnRhaW5zIGF0IGxlYXN0IG9uZSBvZiB0aGUgc3BlY2lmaWVkXG4gKiBtZXRob2RzLlxuICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgIT0gdHlwZW9mIHQgfHwgbnVsbCA9PT0gdCkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBuID0gdDtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIGlmICh0IGluIG4gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBuW3RdKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKipcbiAqIFJlcHJlc2VudHMgdGhlIHRhc2sgb2YgbG9hZGluZyBhIEZpcmVzdG9yZSBidW5kbGUuIEl0IHByb3ZpZGVzIHByb2dyZXNzIG9mIGJ1bmRsZVxuICogbG9hZGluZywgYXMgd2VsbCBhcyB0YXNrIGNvbXBsZXRpb24gYW5kIGVycm9yIGV2ZW50cy5cbiAqXG4gKiBUaGUgQVBJIGlzIGNvbXBhdGlibGUgd2l0aCBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gKHQsIFsgXCJuZXh0XCIsIFwiZXJyb3JcIiwgXCJjb21wbGV0ZVwiIF0pO1xufVxuXG5jbGFzcyBOYSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIgPSB7fSwgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlciA9IG5ldyBRLCB0aGlzLl9sYXN0UHJvZ3Jlc3MgPSB7XG4gICAgICAgICAgICB0YXNrU3RhdGU6IFwiUnVubmluZ1wiLFxuICAgICAgICAgICAgdG90YWxCeXRlczogMCxcbiAgICAgICAgICAgIHRvdGFsRG9jdW1lbnRzOiAwLFxuICAgICAgICAgICAgYnl0ZXNMb2FkZWQ6IDAsXG4gICAgICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IDBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGZ1bmN0aW9ucyB0byBsaXN0ZW4gdG8gYnVuZGxlIGxvYWRpbmcgcHJvZ3Jlc3MgZXZlbnRzLlxuICAgICAqIEBwYXJhbSBuZXh0IC0gQ2FsbGVkIHdoZW4gdGhlcmUgaXMgYSBwcm9ncmVzcyB1cGRhdGUgZnJvbSBidW5kbGUgbG9hZGluZy4gVHlwaWNhbGx5IGBuZXh0YCBjYWxscyBvY2N1clxuICAgICAqICAgZWFjaCB0aW1lIGEgRmlyZXN0b3JlIGRvY3VtZW50IGlzIGxvYWRlZCBmcm9tIHRoZSBidW5kbGUuXG4gICAgICogQHBhcmFtIGVycm9yIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy4gVGhlIHRhc2sgYWJvcnRzIGFmdGVyIHJlcG9ydGluZyB0aGVcbiAgICAgKiAgIGVycm9yLCBhbmQgdGhlcmUgc2hvdWxkIGJlIG5vIG1vcmUgdXBkYXRlcyBhZnRlciB0aGlzLlxuICAgICAqIEBwYXJhbSBjb21wbGV0ZSAtIENhbGxlZCB3aGVuIHRoZSBsb2FkaW5nIHRhc2sgaXMgY29tcGxldGUuXG4gICAgICovICAgIG9uUHJvZ3Jlc3ModCwgZSwgbikge1xuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyID0ge1xuICAgICAgICAgICAgbmV4dDogdCxcbiAgICAgICAgICAgIGVycm9yOiBlLFxuICAgICAgICAgICAgY29tcGxldGU6IG5cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyB0aGUgYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz4uY2F0Y2hgIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvblJlamVjdGVkIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy5cbiAgICAgKi8gICAgY2F0Y2godCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLmNhdGNoKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIHRoZSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPi50aGVuYCBpbnRlcmZhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb25GdWxmaWxsZWQgLSBDYWxsZWQgb24gdGhlIGNvbXBsZXRpb24gb2YgdGhlIGxvYWRpbmcgdGFzayB3aXRoIGEgZmluYWwgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHVwZGF0ZS5cbiAgICAgKiAgIFRoZSB1cGRhdGUgd2lsbCBhbHdheXMgaGF2ZSBpdHMgYHRhc2tTdGF0ZWAgc2V0IHRvIGBcIlN1Y2Nlc3NcImAuXG4gICAgICogQHBhcmFtIG9uUmVqZWN0ZWQgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLlxuICAgICAqLyAgICB0aGVuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucHJvbWlzZS50aGVuKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhbGwgb2JzZXJ2ZXJzIHRoYXQgYnVuZGxlIGxvYWRpbmcgaGFzIGNvbXBsZXRlZCwgd2l0aCBhIHByb3ZpZGVkXG4gICAgICogYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF9jb21wbGV0ZVdpdGgodCkge1xuICAgICAgICB0aGlzLl91cGRhdGVQcm9ncmVzcyh0KSwgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5jb21wbGV0ZSAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmNvbXBsZXRlKCksIFxuICAgICAgICB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnJlc29sdmUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGFsbCBvYnNlcnZlcnMgdGhhdCBidW5kbGUgbG9hZGluZyBoYXMgZmFpbGVkLCB3aXRoIGEgcHJvdmlkZWRcbiAgICAgKiBgRXJyb3JgIGFzIHRoZSByZWFzb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfZmFpbFdpdGgodCkge1xuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3MudGFza1N0YXRlID0gXCJFcnJvclwiLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0KHRoaXMuX2xhc3RQcm9ncmVzcyksIFxuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmVycm9yICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IodCksIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVqZWN0KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhIHByb2dyZXNzIHVwZGF0ZSBvZiBsb2FkaW5nIGEgYnVuZGxlLlxuICAgICAqIEBwYXJhbSBwcm9ncmVzcyAtIFRoZSBuZXcgcHJvZ3Jlc3MuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfdXBkYXRlUHJvZ3Jlc3ModCkge1xuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3MgPSB0LCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBET01FeGNlcHRpb24gZXJyb3IgY29kZSBjb25zdGFudHMuICovIGNvbnN0IHhhID0gLTE7XG5cbi8qKlxuICogVGhlIENsb3VkIEZpcmVzdG9yZSBzZXJ2aWNlIGludGVyZmFjZS5cbiAqXG4gKiBEbyBub3QgY2FsbCB0aGlzIGNvbnN0cnVjdG9yIGRpcmVjdGx5LiBJbnN0ZWFkLCB1c2Uge0BsaW5rIGdldEZpcmVzdG9yZX0uXG4gKi9cbmNsYXNzIGthIGV4dGVuZHMgVGEge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBlKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIGl0J3MgYSB7QGxpbmsgRmlyZXN0b3JlfSBvciBGaXJlc3RvcmUgTGl0ZSBpbnN0YW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZmlyZXN0b3JlXCIsIHRoaXMuX3F1ZXVlID0gbmV3IERhLCB0aGlzLl9wZXJzaXN0ZW5jZUtleSA9IFwibmFtZVwiIGluIHQgPyB0Lm5hbWUgOiBcIltERUZBVUxUXVwiO1xuICAgIH1cbiAgICBfdGVybWluYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50IHx8IFxuICAgICAgICAvLyBUaGUgY2xpZW50IG11c3QgYmUgaW5pdGlhbGl6ZWQgdG8gZW5zdXJlIHRoYXQgYWxsIHN1YnNlcXVlbnQgQVBJXG4gICAgICAgIC8vIHVzYWdlIHRocm93cyBhbiBleGNlcHRpb24uXG4gICAgICAgIE1hKHRoaXMpLCB0aGlzLl9maXJlc3RvcmVDbGllbnQudGVybWluYXRlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHtAbGluayBGaXJlc3RvcmV9IHdpdGggdGhlIHByb3ZpZGVkIHNldHRpbmdzLlxuICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJlZm9yZSBhbnkgb3RoZXIgZnVuY3Rpb24sIGluY2x1ZGluZ1xuICoge0BsaW5rIGdldEZpcmVzdG9yZX0uIElmIHRoZSBjdXN0b20gc2V0dGluZ3MgYXJlIGVtcHR5LCB0aGlzIGZ1bmN0aW9uIGlzXG4gKiBlcXVpdmFsZW50IHRvIGNhbGxpbmcge0BsaW5rIGdldEZpcmVzdG9yZX0uXG4gKlxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gd2l0aCB3aGljaCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogYmUgYXNzb2NpYXRlZC5cbiAqIEBwYXJhbSBzZXR0aW5ncyAtIEEgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKiBAcmV0dXJucyBBIG5ld2x5IGluaXRpYWxpemVkIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICovIGZ1bmN0aW9uICRhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gX2dldFByb3ZpZGVyKHQsIFwiZmlyZXN0b3JlXCIpO1xuICAgIGlmIChuLmlzSW5pdGlhbGl6ZWQoKSkge1xuICAgICAgICBjb25zdCB0ID0gbi5nZXRJbW1lZGlhdGUoKSwgcyA9IG4uZ2V0T3B0aW9ucygpO1xuICAgICAgICBpZiAoZGVlcEVxdWFsKHMsIGUpKSByZXR1cm4gdDtcbiAgICAgICAgdGhyb3cgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcImluaXRpYWxpemVGaXJlc3RvcmUoKSBoYXMgYWxyZWFkeSBiZWVuIGNhbGxlZCB3aXRoIGRpZmZlcmVudCBvcHRpb25zLiBUbyBhdm9pZCB0aGlzIGVycm9yLCBjYWxsIGluaXRpYWxpemVGaXJlc3RvcmUoKSB3aXRoIHRoZSBzYW1lIG9wdGlvbnMgYXMgd2hlbiBpdCB3YXMgb3JpZ2luYWxseSBjYWxsZWQsIG9yIGNhbGwgZ2V0RmlyZXN0b3JlKCkgdG8gcmV0dXJuIHRoZSBhbHJlYWR5IGluaXRpYWxpemVkIGluc3RhbmNlLlwiKTtcbiAgICB9XG4gICAgaWYgKHZvaWQgMCAhPT0gZS5jYWNoZVNpemVCeXRlcyAmJiAtMSAhPT0gZS5jYWNoZVNpemVCeXRlcyAmJiBlLmNhY2hlU2l6ZUJ5dGVzIDwgMTA0ODU3NikgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlU2l6ZUJ5dGVzIG11c3QgYmUgYXQgbGVhc3QgMTA0ODU3NlwiKTtcbiAgICByZXR1cm4gbi5pbml0aWFsaXplKHtcbiAgICAgICAgb3B0aW9uczogZVxuICAgIH0pO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGV4aXN0aW5nIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRoYXQgaXMgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICogcHJvdmlkZWQge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9LiBJZiBubyBpbnN0YW5jZSBleGlzdHMsIGluaXRpYWxpemVzIGEgbmV3XG4gKiBpbnN0YW5jZSB3aXRoIGRlZmF1bHQgc2V0dGluZ3MuXG4gKlxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UgdGhhdCB0aGUgcmV0dXJuZWQge0BsaW5rIEZpcmVzdG9yZX1cbiAqIGluc3RhbmNlIGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqIEByZXR1cm5zIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBvZiB0aGUgcHJvdmlkZWQgYXBwLlxuICovIGZ1bmN0aW9uIE9hKGUgPSBnZXRBcHAoKSkge1xuICAgIHJldHVybiBfZ2V0UHJvdmlkZXIoZSwgXCJmaXJlc3RvcmVcIikuZ2V0SW1tZWRpYXRlKCk7XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gRmEodCkge1xuICAgIHJldHVybiB0Ll9maXJlc3RvcmVDbGllbnQgfHwgTWEodCksIHQuX2ZpcmVzdG9yZUNsaWVudC52ZXJpZnlOb3RUZXJtaW5hdGVkKCksIHQuX2ZpcmVzdG9yZUNsaWVudDtcbn1cblxuZnVuY3Rpb24gTWEodCkge1xuICAgIHZhciBlO1xuICAgIGNvbnN0IG4gPSB0Ll9mcmVlemVTZXR0aW5ncygpLCBzID0gZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICByZXR1cm4gbmV3IHVhKHQsIGUsIG4sIHMuaG9zdCwgcy5zc2wsIHMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIHMudXNlRmV0Y2hTdHJlYW1zKTtcbiAgICB9KHQuX2RhdGFiYXNlSWQsIChudWxsID09PSAoZSA9IHQuX2FwcCkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5vcHRpb25zLmFwcElkKSB8fCBcIlwiLCB0Ll9wZXJzaXN0ZW5jZUtleSwgbik7XG4gICAgdC5fZmlyZXN0b3JlQ2xpZW50ID0gbmV3IEtjKHQuX2NyZWRlbnRpYWxzLCB0Ll9xdWV1ZSwgcyk7XG59XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gZW5hYmxlIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuXG4gKlxuICogTXVzdCBiZSBjYWxsZWQgYmVmb3JlIGFueSBvdGhlciBmdW5jdGlvbnMgKG90aGVyIHRoYW5cbiAqIHtAbGluayBpbml0aWFsaXplRmlyZXN0b3JlfSwge0BsaW5rIGdldEZpcmVzdG9yZX0gb3JcbiAqIHtAbGluayBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlfS5cbiAqXG4gKiBJZiB0aGlzIGZhaWxzLCBgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgd2lsbCByZWplY3QgdGhlIHByb21pc2UgaXRcbiAqIHJldHVybnMuIE5vdGUgdGhhdCBldmVuIGFmdGVyIHRoaXMgZmFpbHVyZSwgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIHJlbWFpbiB1c2FibGUsIGhvd2V2ZXIgb2ZmbGluZSBwZXJzaXN0ZW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqIFRoZXJlIGFyZSBzZXZlcmFsIHJlYXNvbnMgd2h5IHRoaXMgY2FuIGZhaWwsIHdoaWNoIGNhbiBiZSBpZGVudGlmaWVkIGJ5XG4gKiB0aGUgYGNvZGVgIG9uIHRoZSBlcnJvci5cbiAqXG4gKiAgICogZmFpbGVkLXByZWNvbmRpdGlvbjogVGhlIGFwcCBpcyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciBicm93c2VyIHRhYi5cbiAqICAgKiB1bmltcGxlbWVudGVkOiBUaGUgYnJvd3NlciBpcyBpbmNvbXBhdGlibGUgd2l0aCB0aGUgb2ZmbGluZVxuICogICAgIHBlcnNpc3RlbmNlIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gZW5hYmxlIHBlcnNpc3RlbmNlIGZvci5cbiAqIEBwYXJhbSBwZXJzaXN0ZW5jZVNldHRpbmdzIC0gT3B0aW9uYWwgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZVxuICogcGVyc2lzdGVuY2UuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnQgc3RvcmFnZS5cbiAqLyBmdW5jdGlvbiBMYSh0LCBlKSB7XG4gICAgSGEodCA9IGdhKHQsIGthKSk7XG4gICAgY29uc3QgbiA9IEZhKHQpLCBzID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgaSA9IG5ldyBGYztcbiAgICByZXR1cm4gVWEobiwgaSwgbmV3ICRjKGksIHMuY2FjaGVTaXplQnl0ZXMsIG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuZm9yY2VPd25lcnNoaXApKTtcbn1cblxuLyoqXG4gKiBBdHRlbXB0cyB0byBlbmFibGUgbXVsdGktdGFiIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuIElmIGVuYWJsZWRcbiAqIGFjcm9zcyBhbGwgdGFicywgYWxsIG9wZXJhdGlvbnMgc2hhcmUgYWNjZXNzIHRvIGxvY2FsIHBlcnNpc3RlbmNlLCBpbmNsdWRpbmdcbiAqIHNoYXJlZCBleGVjdXRpb24gb2YgcXVlcmllcyBhbmQgbGF0ZW5jeS1jb21wZW5zYXRlZCBsb2NhbCBkb2N1bWVudCB1cGRhdGVzXG4gKiBhY3Jvc3MgYWxsIGNvbm5lY3RlZCBpbnN0YW5jZXMuXG4gKlxuICogSWYgdGhpcyBmYWlscywgYGVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgd2lsbCByZWplY3QgdGhlIHByb21pc2VcbiAqIGl0IHJldHVybnMuIE5vdGUgdGhhdCBldmVuIGFmdGVyIHRoaXMgZmFpbHVyZSwgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIHJlbWFpbiB1c2FibGUsIGhvd2V2ZXIgb2ZmbGluZSBwZXJzaXN0ZW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqIFRoZXJlIGFyZSBzZXZlcmFsIHJlYXNvbnMgd2h5IHRoaXMgY2FuIGZhaWwsIHdoaWNoIGNhbiBiZSBpZGVudGlmaWVkIGJ5XG4gKiB0aGUgYGNvZGVgIG9uIHRoZSBlcnJvci5cbiAqXG4gKiAgICogZmFpbGVkLXByZWNvbmRpdGlvbjogVGhlIGFwcCBpcyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciBicm93c2VyIHRhYiBhbmRcbiAqICAgICBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQuXG4gKiAgICogdW5pbXBsZW1lbnRlZDogVGhlIGJyb3dzZXIgaXMgaW5jb21wYXRpYmxlIHdpdGggdGhlIG9mZmxpbmVcbiAqICAgICBwZXJzaXN0ZW5jZSBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGVuYWJsZSBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnRcbiAqIHN0b3JhZ2UuXG4gKi8gZnVuY3Rpb24gQmEodCkge1xuICAgIEhhKHQgPSBnYSh0LCBrYSkpO1xuICAgIGNvbnN0IGUgPSBGYSh0KSwgbiA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIHMgPSBuZXcgRmM7XG4gICAgcmV0dXJuIFVhKGUsIHMsIG5ldyBPYyhzLCBuLmNhY2hlU2l6ZUJ5dGVzKSk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGJvdGggdGhlIGBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJgIGFuZCBgT25saW5lQ29tcG9uZW50UHJvdmlkZXJgLlxuICogSWYgdGhlIG9wZXJhdGlvbiBmYWlscyB3aXRoIGEgcmVjb3ZlcmFibGUgZXJyb3IgKHNlZVxuICogYGNhblJlY292ZXJGcm9tSW5kZXhlZERiRXJyb3IoKWAgYmVsb3cpLCB0aGUgcmV0dXJuZWQgUHJvbWlzZSBpcyByZWplY3RlZFxuICogYnV0IHRoZSBjbGllbnQgcmVtYWlucyB1c2FibGUuXG4gKi8gZnVuY3Rpb24gVWEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgUTtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGpjKHQsIG4pLCBhd2FpdCBRYyh0LCBlKSwgcy5yZXNvbHZlKCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGlmICghXG4gICAgICAgICAgICAvKipcbiAqIERlY2lkZXMgd2hldGhlciB0aGUgcHJvdmlkZWQgZXJyb3IgYWxsb3dzIHVzIHRvIGdyYWNlZnVsbHkgZGlzYWJsZVxuICogcGVyc2lzdGVuY2UgKGFzIG9wcG9zZWQgdG8gY3Jhc2hpbmcgdGhlIGNsaWVudCkuXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSkgcmV0dXJuIHQuY29kZSA9PT0gSy5GQUlMRURfUFJFQ09ORElUSU9OIHx8IHQuY29kZSA9PT0gSy5VTklNUExFTUVOVEVEO1xuICAgICAgICAgICAgICAgIGlmIChcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBET01FeGNlcHRpb24gJiYgdCBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikgXG4gICAgICAgICAgICAgICAgLy8gVGhlcmUgYXJlIGEgZmV3IGtub3duIGNpcmN1bXN0YW5jZXMgd2hlcmUgd2UgY2FuIG9wZW4gSW5kZXhlZERiIGJ1dFxuICAgICAgICAgICAgICAgIC8vIHRyeWluZyB0byByZWFkL3dyaXRlIHdpbGwgZmFpbCAoZS5nLiBxdW90YSBleGNlZWRlZCkuIEZvclxuICAgICAgICAgICAgICAgIC8vIHdlbGwtdW5kZXJzdG9vZCBjYXNlcywgd2UgYXR0ZW1wdCB0byBkZXRlY3QgdGhlc2UgYW5kIHRoZW4gZ3JhY2VmdWxseVxuICAgICAgICAgICAgICAgIC8vIGZhbGwgYmFjayB0byBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgICAgICAgICAgLy8gTk9URTogUmF0aGVyIHRoYW4gY29udGludWUgdG8gYWRkIHRvIHRoaXMgbGlzdCwgd2UgY291bGQgZGVjaWRlIHRvXG4gICAgICAgICAgICAgICAgLy8gYWx3YXlzIGZhbGwgYmFjaywgd2l0aCB0aGUgcmlzayB0aGF0IHdlIG1pZ2h0IGFjY2lkZW50YWxseSBoaWRlIGVycm9yc1xuICAgICAgICAgICAgICAgIC8vIHJlcHJlc2VudGluZyBhY3R1YWwgU0RLIGJ1Z3MuXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgYnJvd3NlciBpcyBvdXQgb2YgcXVvdGEgd2UgY291bGQgZ2V0IGVpdGhlciBxdW90YSBleGNlZWRlZFxuICAgICAgICAgICAgICAgIC8vIG9yIGFuIGFib3J0ZWQgZXJyb3IgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGVycm9yIGhhcHBlbmVkIGR1cmluZ1xuICAgICAgICAgICAgICAgIC8vIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgICAgICAgICAgICAgcmV0dXJuIDIyID09PSB0LmNvZGUgfHwgMjAgPT09IHQuY29kZSB8fCBcbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94IFByaXZhdGUgQnJvd3NpbmcgbW9kZSBkaXNhYmxlcyBJbmRleGVkRGIgYW5kIHJldHVybnNcbiAgICAgICAgICAgICAgICAvLyBJTlZBTElEX1NUQVRFIGZvciBhbnkgdXNhZ2UuXG4gICAgICAgICAgICAgICAgMTEgPT09IHQuY29kZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIENsZWFycyB0aGUgcGVyc2lzdGVudCBzdG9yYWdlLiBUaGlzIGluY2x1ZGVzIHBlbmRpbmcgd3JpdGVzIGFuZCBjYWNoZWRcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBNdXN0IGJlIGNhbGxlZCB3aGlsZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgaXMgbm90IHN0YXJ0ZWQgKGFmdGVyIHRoZSBhcHAgaXNcbiAqIHRlcm1pbmF0ZWQgb3Igd2hlbiB0aGUgYXBwIGlzIGZpcnN0IGluaXRpYWxpemVkKS4gT24gc3RhcnR1cCwgdGhpcyBmdW5jdGlvblxuICogbXVzdCBiZSBjYWxsZWQgYmVmb3JlIG90aGVyIGZ1bmN0aW9ucyAob3RoZXIgdGhhbiB7QGxpbmtcbiAqIGluaXRpYWxpemVGaXJlc3RvcmV9IG9yIHtAbGluayBnZXRGaXJlc3RvcmV9KSkuIElmIHRoZSB7QGxpbmsgRmlyZXN0b3JlfVxuICogaW5zdGFuY2UgaXMgc3RpbGwgcnVubmluZywgdGhlIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoIHRoZSBlcnJvciBjb2RlXG4gKiBvZiBgZmFpbGVkLXByZWNvbmRpdGlvbmAuXG4gKlxuICogTm90ZTogYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgaXMgcHJpbWFyaWx5IGludGVuZGVkIHRvIGhlbHAgd3JpdGVcbiAqIHJlbGlhYmxlIHRlc3RzIHRoYXQgdXNlIENsb3VkIEZpcmVzdG9yZS4gSXQgdXNlcyBhbiBlZmZpY2llbnQgbWVjaGFuaXNtIGZvclxuICogZHJvcHBpbmcgZXhpc3RpbmcgZGF0YSBidXQgZG9lcyBub3QgYXR0ZW1wdCB0byBzZWN1cmVseSBvdmVyd3JpdGUgb3JcbiAqIG90aGVyd2lzZSBtYWtlIGNhY2hlZCBkYXRhIHVucmVjb3ZlcmFibGUuIEZvciBhcHBsaWNhdGlvbnMgdGhhdCBhcmUgc2Vuc2l0aXZlXG4gKiB0byB0aGUgZGlzY2xvc3VyZSBvZiBjYWNoZWQgZGF0YSBpbiBiZXR3ZWVuIHVzZXIgc2Vzc2lvbnMsIHdlIHN0cm9uZ2x5XG4gKiByZWNvbW1lbmQgbm90IGVuYWJsaW5nIHBlcnNpc3RlbmNlIGF0IGFsbC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGNsZWFyIHBlcnNpc3RlbmNlIGZvci5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgcGVyc2lzdGVudCBzdG9yYWdlIGlzXG4gKiBjbGVhcmVkLiBPdGhlcndpc2UsIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIHdpdGggYW4gZXJyb3IuXG4gKi8gKHQpKSB0aHJvdyB0O1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRXJyb3IgZW5hYmxpbmcgb2ZmbGluZSBwZXJzaXN0ZW5jZS4gRmFsbGluZyBiYWNrIHRvIHBlcnNpc3RlbmNlIGRpc2FibGVkOiBcIiArIHQpLCBcbiAgICAgICAgICAgIHMucmVqZWN0KHQpO1xuICAgICAgICB9XG4gICAgfSkpLnRoZW4oKCgpID0+IHMucHJvbWlzZSkpO1xufVxuXG5mdW5jdGlvbiBxYSh0KSB7XG4gICAgaWYgKHQuX2luaXRpYWxpemVkICYmICF0Ll90ZXJtaW5hdGVkKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiUGVyc2lzdGVuY2UgY2FuIG9ubHkgYmUgY2xlYXJlZCBiZWZvcmUgYSBGaXJlc3RvcmUgaW5zdGFuY2UgaXMgaW5pdGlhbGl6ZWQgb3IgYWZ0ZXIgaXQgaXMgdGVybWluYXRlZC5cIik7XG4gICAgY29uc3QgZSA9IG5ldyBRO1xuICAgIHJldHVybiB0Ll9xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGlmICghV3MuYnQoKSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0ICsgXCJtYWluXCI7XG4gICAgICAgICAgICAgICAgYXdhaXQgV3MuZGVsZXRlKGUpO1xuICAgICAgICAgICAgfShzcih0Ll9kYXRhYmFzZUlkLCB0Ll9wZXJzaXN0ZW5jZUtleSkpLCBlLnJlc29sdmUoKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgZS5yZWplY3QodCk7XG4gICAgICAgIH1cbiAgICB9KSksIGUucHJvbWlzZTtcbn1cblxuLyoqXG4gKiBXYWl0cyB1bnRpbCBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGZvciB0aGUgYWN0aXZlIHVzZXIgaGF2ZSBiZWVuXG4gKiBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQuXG4gKlxuICogVGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMgaW1tZWRpYXRlbHkgaWYgdGhlcmUgYXJlIG5vIG91dHN0YW5kaW5nIHdyaXRlcy5cbiAqIE90aGVyd2lzZSwgdGhlIHByb21pc2Ugd2FpdHMgZm9yIGFsbCBwcmV2aW91c2x5IGlzc3VlZCB3cml0ZXMgKGluY2x1ZGluZ1xuICogdGhvc2Ugd3JpdHRlbiBpbiBhIHByZXZpb3VzIGFwcCBzZXNzaW9uKSwgYnV0IGl0IGRvZXMgbm90IHdhaXQgZm9yIHdyaXRlc1xuICogdGhhdCB3ZXJlIGFkZGVkIGFmdGVyIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQuIElmIHlvdSB3YW50IHRvIHdhaXQgZm9yXG4gKiBhZGRpdGlvbmFsIHdyaXRlcywgY2FsbCBgd2FpdEZvclBlbmRpbmdXcml0ZXMoKWAgYWdhaW4uXG4gKlxuICogQW55IG91dHN0YW5kaW5nIGB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpYCBwcm9taXNlcyBhcmUgcmVqZWN0ZWQgZHVyaW5nIHVzZXJcbiAqIGNoYW5nZXMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgd2hpY2ggcmVzb2x2ZXMgd2hlbiBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGhhdmUgYmVlblxuICogYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kLlxuICovIGZ1bmN0aW9uIEthKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IFE7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gbGMoYXdhaXQgWWModCksIGUpKSksIGUucHJvbWlzZTtcbiAgICB9KEZhKHQgPSBnYSh0LCBrYSkpKTtcbn1cblxuLyoqXG4gKiBSZS1lbmFibGVzIHVzZSBvZiB0aGUgbmV0d29yayBmb3IgdGhpcyB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBhZnRlciBhIHByaW9yXG4gKiBjYWxsIHRvIHtAbGluayBkaXNhYmxlTmV0d29ya30uXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGhhcyBiZWVuIGVuYWJsZWQuXG4gKi8gZnVuY3Rpb24gamEodCkge1xuICAgIHJldHVybiBaYyhGYSh0ID0gZ2EodCwga2EpKSk7XG59XG5cbi8qKlxuICogRGlzYWJsZXMgbmV0d29yayB1c2FnZSBmb3IgdGhpcyBpbnN0YW5jZS4gSXQgY2FuIGJlIHJlLWVuYWJsZWQgdmlhIHtAbGlua1xuICogZW5hYmxlTmV0d29ya30uIFdoaWxlIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkLCBhbnkgc25hcHNob3QgbGlzdGVuZXJzLFxuICogYGdldERvYygpYCBvciBgZ2V0RG9jcygpYCBjYWxscyB3aWxsIHJldHVybiByZXN1bHRzIGZyb20gY2FjaGUsIGFuZCBhbnkgd3JpdGVcbiAqIG9wZXJhdGlvbnMgd2lsbCBiZSBxdWV1ZWQgdW50aWwgdGhlIG5ldHdvcmsgaXMgcmVzdG9yZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGhhcyBiZWVuIGRpc2FibGVkLlxuICovIGZ1bmN0aW9uIFFhKHQpIHtcbiAgICByZXR1cm4gdGEoRmEodCA9IGdhKHQsIGthKSkpO1xufVxuXG4vKipcbiAqIFRlcm1pbmF0ZXMgdGhlIHByb3ZpZGVkIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgYHRlcm1pbmF0ZSgpYCBvbmx5IHRoZSBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCBmdW5jdGlvblxuICogbWF5IGJlIHVzZWQuIEFueSBvdGhlciBmdW5jdGlvbiB3aWxsIHRocm93IGEgYEZpcmVzdG9yZUVycm9yYC5cbiAqXG4gKiBUbyByZXN0YXJ0IGFmdGVyIHRlcm1pbmF0aW9uLCBjcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgRmlyZWJhc2VGaXJlc3RvcmUgd2l0aFxuICoge0BsaW5rIGdldEZpcmVzdG9yZX0uXG4gKlxuICogVGVybWluYXRpb24gZG9lcyBub3QgY2FuY2VsIGFueSBwZW5kaW5nIHdyaXRlcywgYW5kIGFueSBwcm9taXNlcyB0aGF0IGFyZVxuICogYXdhaXRpbmcgYSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIgd2lsbCBub3QgYmUgcmVzb2x2ZWQuIElmIHlvdSBoYXZlXG4gKiBwZXJzaXN0ZW5jZSBlbmFibGVkLCB0aGUgbmV4dCB0aW1lIHlvdSBzdGFydCB0aGlzIGluc3RhbmNlLCBpdCB3aWxsIHJlc3VtZVxuICogc2VuZGluZyB0aGVzZSB3cml0ZXMgdG8gdGhlIHNlcnZlci5cbiAqXG4gKiBOb3RlOiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgY2FsbGluZyBgdGVybWluYXRlKClgIGlzIG5vdCByZXF1aXJlZC4gVGhpc1xuICogZnVuY3Rpb24gaXMgdXNlZnVsIG9ubHkgd2hlbiB5b3Ugd2FudCB0byBmb3JjZSB0aGlzIGluc3RhbmNlIHRvIHJlbGVhc2UgYWxsXG4gKiBvZiBpdHMgcmVzb3VyY2VzIG9yIGluIGNvbWJpbmF0aW9uIHdpdGggYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgdG9cbiAqIGVuc3VyZSB0aGF0IGFsbCBsb2NhbCBzdGF0ZSBpcyBkZXN0cm95ZWQgYmV0d2VlbiB0ZXN0IHJ1bnMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBpbnN0YW5jZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHlcbiAqIHRlcm1pbmF0ZWQuXG4gKi8gZnVuY3Rpb24gV2EodCkge1xuICAgIHJldHVybiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKHQuYXBwLCBcImZpcmVzdG9yZVwiKSwgdC5fZGVsZXRlKCk7XG59XG5cbi8qKlxuICogTG9hZHMgYSBGaXJlc3RvcmUgYnVuZGxlIGludG8gdGhlIGxvY2FsIGNhY2hlLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gbG9hZCBidW5kbGVzIGZvciBmb3IuXG4gKiBAcGFyYW0gYnVuZGxlRGF0YSAtIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGJ1bmRsZSB0byBiZSBsb2FkZWQuIFZhbGlkIG9iamVjdHMgYXJlXG4gKiAgIGBBcnJheUJ1ZmZlcmAsIGBSZWFkYWJsZVN0cmVhbTxVaW50OEFycmF5PmAgb3IgYHN0cmluZ2AuXG4gKlxuICogQHJldHVybnNcbiAqICAgQSBgTG9hZEJ1bmRsZVRhc2tgIG9iamVjdCwgd2hpY2ggbm90aWZpZXMgY2FsbGVycyB3aXRoIHByb2dyZXNzIHVwZGF0ZXMsIGFuZCBjb21wbGV0aW9uXG4gKiAgIG9yIGVycm9yIGV2ZW50cy4gSXQgY2FuIGJlIHVzZWQgYXMgYSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gZnVuY3Rpb24gR2EodCwgZSkge1xuICAgIGNvbnN0IG4gPSBGYSh0ID0gZ2EodCwga2EpKSwgcyA9IG5ldyBOYTtcbiAgICByZXR1cm4gY2EobiwgdC5fZGF0YWJhc2VJZCwgZSwgcyksIHM7XG59XG5cbi8qKlxuICogUmVhZHMgYSBGaXJlc3RvcmUge0BsaW5rIFF1ZXJ5fSBmcm9tIGxvY2FsIGNhY2hlLCBpZGVudGlmaWVkIGJ5IHRoZSBnaXZlbiBuYW1lLlxuICpcbiAqIFRoZSBuYW1lZCBxdWVyaWVzIGFyZSBwYWNrYWdlZCAgaW50byBidW5kbGVzIG9uIHRoZSBzZXJ2ZXIgc2lkZSAoYWxvbmdcbiAqIHdpdGggcmVzdWx0aW5nIGRvY3VtZW50cyksIGFuZCBsb2FkZWQgdG8gbG9jYWwgY2FjaGUgdXNpbmcgYGxvYWRCdW5kbGVgLiBPbmNlIGluIGxvY2FsXG4gKiBjYWNoZSwgdXNlIHRoaXMgbWV0aG9kIHRvIGV4dHJhY3QgYSB7QGxpbmsgUXVlcnl9IGJ5IG5hbWUuXG4gKi8gZnVuY3Rpb24gemEodCwgZSkge1xuICAgIHJldHVybiBhYShGYSh0ID0gZ2EodCwga2EpKSwgZSkudGhlbigoZSA9PiBlID8gbmV3IEFhKHQsIG51bGwsIGUucXVlcnkpIDogbnVsbCkpO1xufVxuXG5mdW5jdGlvbiBIYSh0KSB7XG4gICAgaWYgKHQuX2luaXRpYWxpemVkIHx8IHQuX3Rlcm1pbmF0ZWQpIHRocm93IG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIGFuZCBwZXJzaXN0ZW5jZSBjYW4gbm8gbG9uZ2VyIGJlIGVuYWJsZWQuIFlvdSBjYW4gb25seSBlbmFibGUgcGVyc2lzdGVuY2UgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYEZpZWxkUGF0aGAgcmVmZXJzIHRvIGEgZmllbGQgaW4gYSBkb2N1bWVudC4gVGhlIHBhdGggbWF5IGNvbnNpc3Qgb2YgYVxuICogc2luZ2xlIGZpZWxkIG5hbWUgKHJlZmVycmluZyB0byBhIHRvcC1sZXZlbCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLCBvciBhXG4gKiBsaXN0IG9mIGZpZWxkIG5hbWVzIChyZWZlcnJpbmcgdG8gYSBuZXN0ZWQgZmllbGQgaW4gdGhlIGRvY3VtZW50KS5cbiAqXG4gKiBDcmVhdGUgYSBgRmllbGRQYXRoYCBieSBwcm92aWRpbmcgZmllbGQgbmFtZXMuIElmIG1vcmUgdGhhbiBvbmUgZmllbGRcbiAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAqL1xuY2xhc3MgSmEge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgRmllbGRQYXRoYCBmcm9tIHRoZSBwcm92aWRlZCBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxuICAgICAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZE5hbWVzIC0gQSBsaXN0IG9mIGZpZWxkIG5hbWVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKC4uLnQpIHtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0Lmxlbmd0aDsgKytlKSBpZiAoMCA9PT0gdFtlXS5sZW5ndGgpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIGZpZWxkIG5hbWUgYXQgYXJndW1lbnQgJChpICsgMSkuIEZpZWxkIG5hbWVzIG11c3Qgbm90IGJlIGVtcHR5LlwiKTtcbiAgICAgICAgdGhpcy5faW50ZXJuYWxQYXRoID0gbmV3IGZ0KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgRmllbGRQYXRoYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBGaWVsZFBhdGhgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEZpZWxkUGF0aGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbFBhdGguaXNFcXVhbCh0Ll9pbnRlcm5hbFBhdGgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCBzZW50aW5lbCBgRmllbGRQYXRoYCB0byByZWZlciB0byB0aGUgSUQgb2YgYSBkb2N1bWVudC5cbiAqIEl0IGNhbiBiZSB1c2VkIGluIHF1ZXJpZXMgdG8gc29ydCBvciBmaWx0ZXIgYnkgdGhlIGRvY3VtZW50IElELlxuICovIGZ1bmN0aW9uIFlhKCkge1xuICAgIHJldHVybiBuZXcgSmEoXCJfX25hbWVfX1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYW4gYXJyYXkgb2YgYnl0ZXMuXG4gKi8gY2xhc3MgWGEge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLl9ieXRlU3RyaW5nID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgQnl0ZXNgIG9iamVjdCBmcm9tIHRoZSBnaXZlbiBCYXNlNjQgc3RyaW5nLCBjb252ZXJ0aW5nIGl0IHRvXG4gICAgICogYnl0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmFzZTY0IC0gVGhlIEJhc2U2NCBzdHJpbmcgdXNlZCB0byBjcmVhdGUgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICBzdGF0aWMgZnJvbUJhc2U2NFN0cmluZyh0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhhKF90LmZyb21CYXNlNjRTdHJpbmcodCkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiRmFpbGVkIHRvIGNvbnN0cnVjdCBkYXRhIGZyb20gQmFzZTY0IHN0cmluZzogXCIgKyB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBCeXRlc2Agb2JqZWN0IGZyb20gdGhlIGdpdmVuIFVpbnQ4QXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXJyYXkgLSBUaGUgVWludDhBcnJheSB1c2VkIHRvIGNyZWF0ZSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHN0YXRpYyBmcm9tVWludDhBcnJheSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgWGEoX3QuZnJvbVVpbnQ4QXJyYXkodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIGJ5dGVzIGFzIGEgQmFzZTY0LWVuY29kZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIEJhc2U2NC1lbmNvZGVkIHN0cmluZyBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcudG9CYXNlNjQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyBieXRlcyBpbiBhIG5ldyBgVWludDhBcnJheWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVWludDhBcnJheSBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLnRvVWludDhBcnJheSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIkJ5dGVzKGJhc2U2NDogXCIgKyB0aGlzLnRvQmFzZTY0KCkgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEJ5dGVzYCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgQnl0ZXNgIG9iamVjdCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBCeXRlc2Agb2JqZWN0IGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy5pc0VxdWFsKHQuX2J5dGVTdHJpbmcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2VudGluZWwgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgd2hlbiB3cml0aW5nIGRvY3VtZW50IGZpZWxkcyB3aXRoIGBzZXQoKWBcbiAqIG9yIGB1cGRhdGUoKWAuXG4gKi8gY2xhc3MgWmEge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBfbWV0aG9kTmFtZSAtIFRoZSBwdWJsaWMgQVBJIGVuZHBvaW50IHRoYXQgcmV0dXJucyB0aGlzIGNsYXNzLlxuICAgICAqIEBoaWRlY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuX21ldGhvZE5hbWUgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYSBnZW9ncmFwaGljIGxvY2F0aW9uIGluIEZpcmVzdG9yZS4gVGhlXG4gKiBsb2NhdGlvbiBpcyByZXByZXNlbnRlZCBhcyBsYXRpdHVkZS9sb25naXR1ZGUgcGFpci5cbiAqXG4gKiBMYXRpdHVkZSB2YWx1ZXMgYXJlIGluIHRoZSByYW5nZSBvZiBbLTkwLCA5MF0uXG4gKiBMb25naXR1ZGUgdmFsdWVzIGFyZSBpbiB0aGUgcmFuZ2Ugb2YgWy0xODAsIDE4MF0uXG4gKi8gY2xhc3MgdHUge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW1tdXRhYmxlIGBHZW9Qb2ludGAgb2JqZWN0IHdpdGggdGhlIHByb3ZpZGVkIGxhdGl0dWRlIGFuZFxuICAgICAqIGxvbmdpdHVkZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIGxhdGl0dWRlIC0gVGhlIGxhdGl0dWRlIGFzIG51bWJlciBiZXR3ZWVuIC05MCBhbmQgOTAuXG4gICAgICogQHBhcmFtIGxvbmdpdHVkZSAtIFRoZSBsb25naXR1ZGUgYXMgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZSh0KSB8fCB0IDwgLTkwIHx8IHQgPiA5MCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIkxhdGl0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLCBidXQgd2FzOiBcIiArIHQpO1xuICAgICAgICBpZiAoIWlzRmluaXRlKGUpIHx8IGUgPCAtMTgwIHx8IGUgPiAxODApIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJMb25naXR1ZGUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIC0xODAgYW5kIDE4MCwgYnV0IHdhczogXCIgKyBlKTtcbiAgICAgICAgdGhpcy5fbGF0ID0gdCwgdGhpcy5fbG9uZyA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXRpdHVkZSBvZiB0aGlzIGBHZW9Qb2ludGAgaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBsYXRpdHVkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxvbmdpdHVkZSBvZiB0aGlzIGBHZW9Qb2ludGAgaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBsb25naXR1ZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb25nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgR2VvUG9pbnRgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEdlb1BvaW50YCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBHZW9Qb2ludGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYXQgPT09IHQuX2xhdCAmJiB0aGlzLl9sb25nID09PSB0Ll9sb25nO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgR2VvUG9pbnQuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiB0aGlzLl9sYXQsXG4gICAgICAgICAgICBsb25naXR1ZGU6IHRoaXMuX2xvbmdcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWN0dWFsbHkgcHJpdmF0ZSB0byBKUyBjb25zdW1lcnMgb2Ygb3VyIEFQSSwgc28gdGhpcyBmdW5jdGlvbiBpcyBwcmVmaXhlZFxuICAgICAqIHdpdGggYW4gdW5kZXJzY29yZS5cbiAgICAgKi8gICAgX2NvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiBldCh0aGlzLl9sYXQsIHQuX2xhdCkgfHwgZXQodGhpcy5fbG9uZywgdC5fbG9uZyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBldSA9IC9eX18uKl9fJC87XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgZG9jdW1lbnQgZGF0YSAoZS5nLiBmb3IgYSBzZXREYXRhIGNhbGwpLiAqLyBjbGFzcyBudSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmRhdGEgPSB0LCB0aGlzLmZpZWxkTWFzayA9IGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gbjtcbiAgICB9XG4gICAgdG9NdXRhdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmZpZWxkTWFzayA/IG5ldyBubih0LCB0aGlzLmRhdGEsIHRoaXMuZmllbGRNYXNrLCBlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcykgOiBuZXcgZW4odCwgdGhpcy5kYXRhLCBlLCB0aGlzLmZpZWxkVHJhbnNmb3Jtcyk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBwYXJzaW5nIFwidXBkYXRlXCIgZGF0YSAoaS5lLiBmb3IgYW4gdXBkYXRlRGF0YSBjYWxsKS4gKi8gY2xhc3Mgc3Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8vIFRoZSBmaWVsZE1hc2sgZG9lcyBub3QgaW5jbHVkZSBkb2N1bWVudCB0cmFuc2Zvcm1zLlxuICAgIGUsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhID0gdCwgdGhpcy5maWVsZE1hc2sgPSBlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IG47XG4gICAgfVxuICAgIHRvTXV0YXRpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IG5uKHQsIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGl1KHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGNhc2UgMCAvKiBTZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDIgLyogTWVyZ2VTZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDEgLyogVXBkYXRlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDMgLyogQXJndW1lbnQgKi8gOlxuICAgICAgY2FzZSA0IC8qIEFycmF5QXJndW1lbnQgKi8gOlxuICAgICAgICByZXR1cm4gITE7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG59XG5cbi8qKiBBIFwiY29udGV4dFwiIG9iamVjdCBwYXNzZWQgYXJvdW5kIHdoaWxlIHBhcnNpbmcgdXNlciBkYXRhLiAqLyBjbGFzcyBydSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBQYXJzZUNvbnRleHQgd2l0aCB0aGUgZ2l2ZW4gc291cmNlIGFuZCBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNldHRpbmdzIC0gVGhlIHNldHRpbmdzIGZvciB0aGUgcGFyc2VyLlxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIGRhdGFiYXNlIElEIG9mIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgc2VyaWFsaXplciB0byB1c2UgdG8gZ2VuZXJhdGUgdGhlIFZhbHVlIHByb3RvLlxuICAgICAqIEBwYXJhbSBpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzIC0gV2hldGhlciB0byBpZ25vcmUgdW5kZWZpbmVkIHByb3BlcnRpZXNcbiAgICAgKiByYXRoZXIgdGhhbiB0aHJvdy5cbiAgICAgKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gQSBtdXRhYmxlIGxpc3Qgb2YgZmllbGQgdHJhbnNmb3JtcyBlbmNvdW50ZXJlZFxuICAgICAqIHdoaWxlIHBhcnNpbmcgdGhlIGRhdGEuXG4gICAgICogQHBhcmFtIGZpZWxkTWFzayAtIEEgbXV0YWJsZSBsaXN0IG9mIGZpZWxkIHBhdGhzIGVuY291bnRlcmVkIHdoaWxlIHBhcnNpbmdcbiAgICAgKiB0aGUgZGF0YS5cbiAgICAgKlxuICAgICAqIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93LCBzbyBwYXRoIGNhbiBiZVxuICAgICAqIG51bGwgdG8gaW5kaWNhdGUgdGhlIGNvbnRleHQgcmVwcmVzZW50cyBhbnkgbG9jYXRpb24gd2l0aGluIGFuIGFycmF5IChpblxuICAgICAqIHdoaWNoIGNhc2UgY2VydGFpbiBmZWF0dXJlcyB3aWxsIG5vdCB3b3JrIGFuZCBlcnJvcnMgd2lsbCBiZSBzb21ld2hhdFxuICAgICAqIGNvbXByb21pc2VkKS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB0LCB0aGlzLmRhdGFiYXNlSWQgPSBlLCB0aGlzLk4gPSBuLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSBzLCBcbiAgICAgICAgLy8gTWlub3IgaGFjazogSWYgZmllbGRUcmFuc2Zvcm1zIGlzIHVuZGVmaW5lZCwgd2UgYXNzdW1lIHRoaXMgaXMgYW5cbiAgICAgICAgLy8gZXh0ZXJuYWwgY2FsbCBhbmQgd2UgbmVlZCB0byB2YWxpZGF0ZSB0aGUgZW50aXJlIHBhdGguXG4gICAgICAgIHZvaWQgMCA9PT0gaSAmJiB0aGlzLnhjKCksIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gaSB8fCBbXSwgdGhpcy5maWVsZE1hc2sgPSByIHx8IFtdO1xuICAgIH1cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MucGF0aDtcbiAgICB9XG4gICAgZ2V0IGtjKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5rYztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBuZXcgY29udGV4dCB3aXRoIHRoZSBzcGVjaWZpZWQgc2V0dGluZ3Mgb3ZlcndyaXR0ZW4uICovICAgICRjKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBydShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2V0dGluZ3MpLCB0KSwgdGhpcy5kYXRhYmFzZUlkLCB0aGlzLk4sIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgdGhpcy5maWVsZFRyYW5zZm9ybXMsIHRoaXMuZmllbGRNYXNrKTtcbiAgICB9XG4gICAgT2ModCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09IChlID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNoaWxkKHQpLCBzID0gdGhpcy4kYyh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgRmM6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcy5NYyh0KSwgcztcbiAgICB9XG4gICAgTGModCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09IChlID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNoaWxkKHQpLCBzID0gdGhpcy4kYyh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgRmM6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcy54YygpLCBzO1xuICAgIH1cbiAgICBCYyh0KSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93OyBzbyBtYWtlIHBhdGhcbiAgICAgICAgLy8gdW5kZWZpbmVkLlxuICAgICAgICByZXR1cm4gdGhpcy4kYyh7XG4gICAgICAgICAgICBwYXRoOiB2b2lkIDAsXG4gICAgICAgICAgICBGYzogITBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFVjKHQpIHtcbiAgICAgICAgcmV0dXJuIGJ1KHQsIHRoaXMuc2V0dGluZ3MubWV0aG9kTmFtZSwgdGhpcy5zZXR0aW5ncy5xYyB8fCAhMSwgdGhpcy5wYXRoLCB0aGlzLnNldHRpbmdzLktjKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgJ3RydWUnIGlmICdmaWVsZFBhdGgnIHdhcyB0cmF2ZXJzZWQgd2hlbiBjcmVhdGluZyB0aGlzIGNvbnRleHQuICovICAgIGNvbnRhaW5zKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5maWVsZE1hc2suZmluZCgoZSA9PiB0LmlzUHJlZml4T2YoZSkpKSB8fCB2b2lkIDAgIT09IHRoaXMuZmllbGRUcmFuc2Zvcm1zLmZpbmQoKGUgPT4gdC5pc1ByZWZpeE9mKGUuZmllbGQpKSk7XG4gICAgfVxuICAgIHhjKCkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBSZW1vdmUgbnVsbCBjaGVjayBvbmNlIHdlIGhhdmUgcHJvcGVyIHBhdGhzIGZvciBmaWVsZHNcbiAgICAgICAgLy8gd2l0aGluIGFycmF5cy5cbiAgICAgICAgaWYgKHRoaXMucGF0aCkgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLnBhdGgubGVuZ3RoOyB0KyspIHRoaXMuTWModGhpcy5wYXRoLmdldCh0KSk7XG4gICAgfVxuICAgIE1jKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSB0aHJvdyB0aGlzLlVjKFwiRG9jdW1lbnQgZmllbGRzIG11c3Qgbm90IGJlIGVtcHR5XCIpO1xuICAgICAgICBpZiAoaXUodGhpcy5rYykgJiYgZXUudGVzdCh0KSkgdGhyb3cgdGhpcy5VYygnRG9jdW1lbnQgZmllbGRzIGNhbm5vdCBiZWdpbiBhbmQgZW5kIHdpdGggXCJfX1wiJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciBmb3IgcGFyc2luZyByYXcgdXNlciBpbnB1dCAocHJvdmlkZWQgdmlhIHRoZSBBUEkpIGludG8gaW50ZXJuYWwgbW9kZWxcbiAqIGNsYXNzZXMuXG4gKi8gY2xhc3Mgb3Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gZSwgdGhpcy5OID0gbiB8fCBZcih0KTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdG9wLWxldmVsIHBhcnNlIGNvbnRleHQuICovICAgIGpjKHQsIGUsIG4sIHMgPSAhMSkge1xuICAgICAgICByZXR1cm4gbmV3IHJ1KHtcbiAgICAgICAgICAgIGtjOiB0LFxuICAgICAgICAgICAgbWV0aG9kTmFtZTogZSxcbiAgICAgICAgICAgIEtjOiBuLFxuICAgICAgICAgICAgcGF0aDogZnQuZW1wdHlQYXRoKCksXG4gICAgICAgICAgICBGYzogITEsXG4gICAgICAgICAgICBxYzogc1xuICAgICAgICB9LCB0aGlzLmRhdGFiYXNlSWQsIHRoaXMuTiwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGN1KHQpIHtcbiAgICBjb25zdCBlID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgbiA9IFlyKHQuX2RhdGFiYXNlSWQpO1xuICAgIHJldHVybiBuZXcgb3UodC5fZGF0YWJhc2VJZCwgISFlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIG4pO1xufVxuXG4vKiogUGFyc2UgZG9jdW1lbnQgZGF0YSBmcm9tIGEgc2V0KCkgY2FsbC4gKi8gZnVuY3Rpb24gYXUodCwgZSwgbiwgcywgaSwgciA9IHt9KSB7XG4gICAgY29uc3QgbyA9IHQuamMoci5tZXJnZSB8fCByLm1lcmdlRmllbGRzID8gMiAvKiBNZXJnZVNldCAqLyA6IDAgLyogU2V0ICovICwgZSwgbiwgaSk7XG4gICAgRXUoXCJEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOlwiLCBvLCBzKTtcbiAgICBjb25zdCBjID0gcHUocywgbyk7XG4gICAgbGV0IGEsIHU7XG4gICAgaWYgKHIubWVyZ2UpIGEgPSBuZXcgZHQoby5maWVsZE1hc2spLCB1ID0gby5maWVsZFRyYW5zZm9ybXM7IGVsc2UgaWYgKHIubWVyZ2VGaWVsZHMpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2Ygci5tZXJnZUZpZWxkcykge1xuICAgICAgICAgICAgY29uc3QgaSA9IEl1KGUsIHMsIG4pO1xuICAgICAgICAgICAgaWYgKCFvLmNvbnRhaW5zKGkpKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBGaWVsZCAnJHtpfScgaXMgc3BlY2lmaWVkIGluIHlvdXIgZmllbGQgbWFzayBidXQgbWlzc2luZyBmcm9tIHlvdXIgaW5wdXQgZGF0YS5gKTtcbiAgICAgICAgICAgIFB1KHQsIGkpIHx8IHQucHVzaChpKTtcbiAgICAgICAgfVxuICAgICAgICBhID0gbmV3IGR0KHQpLCB1ID0gby5maWVsZFRyYW5zZm9ybXMuZmlsdGVyKCh0ID0+IGEuY292ZXJzKHQuZmllbGQpKSk7XG4gICAgfSBlbHNlIGEgPSBudWxsLCB1ID0gby5maWVsZFRyYW5zZm9ybXM7XG4gICAgcmV0dXJuIG5ldyBudShuZXcgVXQoYyksIGEsIHUpO1xufVxuXG5jbGFzcyB1dSBleHRlbmRzIFphIHtcbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGlmICgyIC8qIE1lcmdlU2V0ICovICE9PSB0LmtjKSB0aHJvdyAxIC8qIFVwZGF0ZSAqLyA9PT0gdC5rYyA/IHQuVWMoYCR7dGhpcy5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBhcHBlYXIgYXQgdGhlIHRvcCBsZXZlbCBvZiB5b3VyIHVwZGF0ZSBkYXRhYCkgOiB0LlVjKGAke3RoaXMuX21ldGhvZE5hbWV9KCkgY2Fubm90IGJlIHVzZWQgd2l0aCBzZXQoKSB1bmxlc3MgeW91IHBhc3Mge21lcmdlOnRydWV9YCk7XG4gICAgICAgIC8vIE5vIHRyYW5zZm9ybSB0byBhZGQgZm9yIGEgZGVsZXRlLCBidXQgd2UgbmVlZCB0byBhZGQgaXQgdG8gb3VyXG4gICAgICAgIC8vIGZpZWxkTWFzayBzbyBpdCBnZXRzIGRlbGV0ZWQuXG4gICAgICAgIHJldHVybiB0LmZpZWxkTWFzay5wdXNoKHQucGF0aCksIG51bGw7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIHV1O1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgY2hpbGQgY29udGV4dCBmb3IgcGFyc2luZyBTZXJpYWxpemFibGVGaWVsZFZhbHVlcy5cbiAqXG4gKiBUaGlzIGlzIGRpZmZlcmVudCB0aGFuIGNhbGxpbmcgYFBhcnNlQ29udGV4dC5jb250ZXh0V2l0aGAgYmVjYXVzZSBpdCBrZWVwc1xuICogdGhlIGZpZWxkVHJhbnNmb3JtcyBhbmQgZmllbGRNYXNrIHNlcGFyYXRlLlxuICpcbiAqIFRoZSBjcmVhdGVkIGNvbnRleHQgaGFzIGl0cyBgZGF0YVNvdXJjZWAgc2V0IHRvIGBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudGAuXG4gKiBBbHRob3VnaCB0aGVzZSB2YWx1ZXMgYXJlIHVzZWQgd2l0aCB3cml0ZXMsIGFueSBlbGVtZW50cyBpbiB0aGVzZSBGaWVsZFZhbHVlc1xuICogYXJlIG5vdCBjb25zaWRlcmVkIHdyaXRlcyBzaW5jZSB0aGV5IGNhbm5vdCBjb250YWluIGFueSBGaWVsZFZhbHVlIHNlbnRpbmVscyxcbiAqIGV0Yy5cbiAqXG4gKiBAcGFyYW0gZmllbGRWYWx1ZSAtIFRoZSBzZW50aW5lbCBGaWVsZFZhbHVlIGZvciB3aGljaCB0byBjcmVhdGUgYSBjaGlsZFxuICogICAgIGNvbnRleHQuXG4gKiBAcGFyYW0gY29udGV4dCAtIFRoZSBwYXJlbnQgY29udGV4dC5cbiAqIEBwYXJhbSBhcnJheUVsZW1lbnQgLSBXaGV0aGVyIG9yIG5vdCB0aGUgRmllbGRWYWx1ZSBoYXMgYW4gYXJyYXkuXG4gKi8gZnVuY3Rpb24gaHUodCwgZSwgbikge1xuICAgIHJldHVybiBuZXcgcnUoe1xuICAgICAgICBrYzogMyAvKiBBcmd1bWVudCAqLyAsXG4gICAgICAgIEtjOiBlLnNldHRpbmdzLktjLFxuICAgICAgICBtZXRob2ROYW1lOiB0Ll9tZXRob2ROYW1lLFxuICAgICAgICBGYzogblxuICAgIH0sIGUuZGF0YWJhc2VJZCwgZS5OLCBlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpO1xufVxuXG5jbGFzcyBsdSBleHRlbmRzIFphIHtcbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgamUodC5wYXRoLCBuZXcgT2UpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBsdTtcbiAgICB9XG59XG5cbmNsYXNzIGZ1IGV4dGVuZHMgWmEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuUWMgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBodSh0aGlzLCB0LCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLlFjLm1hcCgodCA9PiB5dSh0LCBlKSkpLCBzID0gbmV3IEZlKG4pO1xuICAgICAgICByZXR1cm4gbmV3IGplKHQucGF0aCwgcyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbmNsYXNzIGR1IGV4dGVuZHMgWmEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuUWMgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBodSh0aGlzLCB0LCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLlFjLm1hcCgodCA9PiB5dSh0LCBlKSkpLCBzID0gbmV3IExlKG4pO1xuICAgICAgICByZXR1cm4gbmV3IGplKHQucGF0aCwgcyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbmNsYXNzIHd1IGV4dGVuZHMgWmEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuV2MgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgVWUodC5OLCBDZSh0Lk4sIHRoaXMuV2MpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBqZSh0LnBhdGgsIGUpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBJbXBsZW1lbnQgaXNFcXVhbHNcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IHQ7XG4gICAgfVxufVxuXG4vKiogUGFyc2UgdXBkYXRlIGRhdGEgZnJvbSBhbiB1cGRhdGUoKSBjYWxsLiAqLyBmdW5jdGlvbiBfdSh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IHQuamMoMSAvKiBVcGRhdGUgKi8gLCBlLCBuKTtcbiAgICBFdShcIkRhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6XCIsIGksIHMpO1xuICAgIGNvbnN0IHIgPSBbXSwgbyA9IFV0LmVtcHR5KCk7XG4gICAgY3QocywgKCh0LCBzKSA9PiB7XG4gICAgICAgIGNvbnN0IGMgPSBSdShlLCB0LCBuKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIHMgPSBnZXRNb2R1bGFySW5zdGFuY2Uocyk7XG4gICAgICAgIGNvbnN0IGEgPSBpLkxjKGMpO1xuICAgICAgICBpZiAocyBpbnN0YW5jZW9mIHV1KSBcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXG4gICAgICAgIHIucHVzaChjKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0geXUocywgYSk7XG4gICAgICAgICAgICBudWxsICE9IHQgJiYgKHIucHVzaChjKSwgby5zZXQoYywgdCkpO1xuICAgICAgICB9XG4gICAgfSkpO1xuICAgIGNvbnN0IGMgPSBuZXcgZHQocik7XG4gICAgcmV0dXJuIG5ldyBzdShvLCBjLCBpLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGEgbGlzdCBvZiBmaWVsZC92YWx1ZSBhcmd1bWVudHMuICovIGZ1bmN0aW9uIG11KHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICBjb25zdCBvID0gdC5qYygxIC8qIFVwZGF0ZSAqLyAsIGUsIG4pLCBjID0gWyBJdShlLCBzLCBuKSBdLCBhID0gWyBpIF07XG4gICAgaWYgKHIubGVuZ3RoICUgMiAhPSAwKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke2V9KCkgbmVlZHMgdG8gYmUgY2FsbGVkIHdpdGggYW4gZXZlbiBudW1iZXIgb2YgYXJndW1lbnRzIHRoYXQgYWx0ZXJuYXRlIGJldHdlZW4gZmllbGQgbmFtZXMgYW5kIHZhbHVlcy5gKTtcbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHIubGVuZ3RoOyB0ICs9IDIpIGMucHVzaChJdShlLCByW3RdKSksIGEucHVzaChyW3QgKyAxXSk7XG4gICAgY29uc3QgdSA9IFtdLCBoID0gVXQuZW1wdHkoKTtcbiAgICAvLyBXZSBpdGVyYXRlIGluIHJldmVyc2Ugb3JkZXIgdG8gcGljayB0aGUgbGFzdCB2YWx1ZSBmb3IgYSBmaWVsZCBpZiB0aGVcbiAgICAvLyB1c2VyIHNwZWNpZmllZCB0aGUgZmllbGQgbXVsdGlwbGUgdGltZXMuXG4gICAgZm9yIChsZXQgdCA9IGMubGVuZ3RoIC0gMTsgdCA+PSAwOyAtLXQpIGlmICghUHUodSwgY1t0XSkpIHtcbiAgICAgICAgY29uc3QgZSA9IGNbdF07XG4gICAgICAgIGxldCBuID0gYVt0XTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIG4gPSBnZXRNb2R1bGFySW5zdGFuY2Uobik7XG4gICAgICAgIGNvbnN0IHMgPSBvLkxjKGUpO1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIHV1KSBcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXG4gICAgICAgIHUucHVzaChlKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0geXUobiwgcyk7XG4gICAgICAgICAgICBudWxsICE9IHQgJiYgKHUucHVzaChlKSwgaC5zZXQoZSwgdCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGwgPSBuZXcgZHQodSk7XG4gICAgcmV0dXJuIG5ldyBzdShoLCBsLCBvLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKlxuICogUGFyc2UgYSBcInF1ZXJ5IHZhbHVlXCIgKGUuZy4gdmFsdWUgaW4gYSB3aGVyZSBmaWx0ZXIgb3IgYSB2YWx1ZSBpbiBhIGN1cnNvclxuICogYm91bmQpLlxuICpcbiAqIEBwYXJhbSBhbGxvd0FycmF5cyAtIFdoZXRoZXIgdGhlIHF1ZXJ5IHZhbHVlIGlzIGFuIGFycmF5IHRoYXQgbWF5IGRpcmVjdGx5XG4gKiBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlLmcuIHRoZSBvcGVyYW5kIG9mIGFuIGBpbmAgcXVlcnkpLlxuICovIGZ1bmN0aW9uIGd1KHQsIGUsIG4sIHMgPSAhMSkge1xuICAgIHJldHVybiB5dShuLCB0LmpjKHMgPyA0IC8qIEFycmF5QXJndW1lbnQgKi8gOiAzIC8qIEFyZ3VtZW50ICovICwgZSkpO1xufVxuXG4vKipcbiAqIFBhcnNlcyB1c2VyIGRhdGEgdG8gUHJvdG9idWYgVmFsdWVzLlxuICpcbiAqIEBwYXJhbSBpbnB1dCAtIERhdGEgdG8gYmUgcGFyc2VkLlxuICogQHBhcmFtIGNvbnRleHQgLSBBIGNvbnRleHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBwYXRoIGJlaW5nIHBhcnNlZCxcbiAqIHRoZSBzb3VyY2Ugb2YgdGhlIGRhdGEgYmVpbmcgcGFyc2VkLCBldGMuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlLCBvciBudWxsIGlmIHRoZSB2YWx1ZSB3YXMgYSBGaWVsZFZhbHVlIHNlbnRpbmVsXG4gKiB0aGF0IHNob3VsZCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3VsdGluZyBwYXJzZWQgZGF0YS5cbiAqLyBmdW5jdGlvbiB5dSh0LCBlKSB7XG4gICAgaWYgKFR1KFxuICAgIC8vIFVud3JhcCB0aGUgQVBJIHR5cGUgZnJvbSB0aGUgQ29tcGF0IFNESy4gVGhpcyB3aWxsIHJldHVybiB0aGUgQVBJIHR5cGVcbiAgICAvLyBmcm9tIGZpcmVzdG9yZS1leHAuXG4gICAgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkpIHJldHVybiBFdShcIlVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOlwiLCBlLCB0KSwgcHUodCwgZSk7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBaYSkgXG4gICAgLy8gRmllbGRWYWx1ZXMgdXN1YWxseSBwYXJzZSBpbnRvIHRyYW5zZm9ybXMgKGV4Y2VwdCBGaWVsZFZhbHVlLmRlbGV0ZSgpKVxuICAgIC8vIGluIHdoaWNoIGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gaW5jbHVkZSB0aGlzIGZpZWxkIGluIG91ciBwYXJzZWQgZGF0YVxuICAgIC8vIChhcyBkb2luZyBzbyB3aWxsIG92ZXJ3cml0ZSB0aGUgZmllbGQgZGlyZWN0bHkgcHJpb3IgdG8gdGhlIHRyYW5zZm9ybVxuICAgIC8vIHRyeWluZyB0byB0cmFuc2Zvcm0gaXQpLiBTbyB3ZSBkb24ndCBhZGQgdGhpcyBsb2NhdGlvbiB0b1xuICAgIC8vIGNvbnRleHQuZmllbGRNYXNrIGFuZCB3ZSByZXR1cm4gbnVsbCBhcyBvdXIgcGFyc2luZyByZXN1bHQuXG4gICAgLyoqXG4gKiBcIlBhcnNlc1wiIHRoZSBwcm92aWRlZCBGaWVsZFZhbHVlSW1wbCwgYWRkaW5nIGFueSBuZWNlc3NhcnkgdHJhbnNmb3JtcyB0b1xuICogY29udGV4dC5maWVsZFRyYW5zZm9ybXMuXG4gKi9cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBTZW50aW5lbHMgYXJlIG9ubHkgc3VwcG9ydGVkIHdpdGggd3JpdGVzLCBhbmQgbm90IHdpdGhpbiBhcnJheXMuXG4gICAgICAgIGlmICghaXUoZS5rYykpIHRocm93IGUuVWMoYCR7dC5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBiZSB1c2VkIHdpdGggdXBkYXRlKCkgYW5kIHNldCgpYCk7XG4gICAgICAgIGlmICghZS5wYXRoKSB0aHJvdyBlLlVjKGAke3QuX21ldGhvZE5hbWV9KCkgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW5zaWRlIGFycmF5c2ApO1xuICAgICAgICBjb25zdCBuID0gdC5fdG9GaWVsZFRyYW5zZm9ybShlKTtcbiAgICAgICAgbiAmJiBlLmZpZWxkVHJhbnNmb3Jtcy5wdXNoKG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEhlbHBlciB0byBwYXJzZSBhIHNjYWxhciB2YWx1ZSAoaS5lLiBub3QgYW4gT2JqZWN0LCBBcnJheSwgb3IgRmllbGRWYWx1ZSlcbiAqXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlXG4gKi8gKHQsIGUpLCBudWxsO1xuICAgIGlmICh2b2lkIDAgPT09IHQgJiYgZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKSBcbiAgICAvLyBJZiB0aGUgaW5wdXQgaXMgdW5kZWZpbmVkIGl0IGNhbiBuZXZlciBwYXJ0aWNpcGF0ZSBpbiB0aGUgZmllbGRNYXNrLCBzb1xuICAgIC8vIGRvbid0IGhhbmRsZSB0aGlzIGJlbG93LiBJZiBgaWdub3JlVW5kZWZpbmVkUHJvcGVydGllc2AgaXMgZmFsc2UsXG4gICAgLy8gYHBhcnNlU2NhbGFyVmFsdWVgIHdpbGwgcmVqZWN0IGFuIHVuZGVmaW5lZCB2YWx1ZS5cbiAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoXG4gICAgLy8gSWYgY29udGV4dC5wYXRoIGlzIG51bGwgd2UgYXJlIGluc2lkZSBhbiBhcnJheSBhbmQgd2UgZG9uJ3Qgc3VwcG9ydFxuICAgIC8vIGZpZWxkIG1hc2sgcGF0aHMgbW9yZSBncmFudWxhciB0aGFuIHRoZSB0b3AtbGV2ZWwgYXJyYXkuXG4gICAgZS5wYXRoICYmIGUuZmllbGRNYXNrLnB1c2goZS5wYXRoKSwgdCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IEluY2x1ZGUgdGhlIHBhdGggY29udGFpbmluZyB0aGUgYXJyYXkgaW4gdGhlIGVycm9yXG4gICAgICAgIC8vIG1lc3NhZ2UuXG4gICAgICAgIC8vIEluIHRoZSBjYXNlIG9mIElOIHF1ZXJpZXMsIHRoZSBwYXJzZWQgZGF0YSBpcyBhbiBhcnJheSAocmVwcmVzZW50aW5nXG4gICAgICAgIC8vIHRoZSBzZXQgb2YgdmFsdWVzIHRvIGJlIGluY2x1ZGVkIGZvciB0aGUgSU4gcXVlcnkpIHRoYXQgbWF5IGRpcmVjdGx5XG4gICAgICAgIC8vIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGVhY2ggcmVwcmVzZW50aW5nIGFuIGluZGl2aWR1YWwgZmllbGRcbiAgICAgICAgLy8gdmFsdWUpLCBzbyB3ZSBkaXNhYmxlIHRoaXMgdmFsaWRhdGlvbi5cbiAgICAgICAgaWYgKGUuc2V0dGluZ3MuRmMgJiYgNCAvKiBBcnJheUFyZ3VtZW50ICovICE9PSBlLmtjKSB0aHJvdyBlLlVjKFwiTmVzdGVkIGFycmF5cyBhcmUgbm90IHN1cHBvcnRlZFwiKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiB0KSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSB5dShpLCBlLkJjKHMpKTtcbiAgICAgICAgICAgICAgICBudWxsID09IHQgJiYgKFxuICAgICAgICAgICAgICAgIC8vIEp1c3QgaW5jbHVkZSBudWxscyBpbiB0aGUgYXJyYXkgZm9yIGZpZWxkcyBiZWluZyByZXBsYWNlZCB3aXRoIGFcbiAgICAgICAgICAgICAgICAvLyBzZW50aW5lbC5cbiAgICAgICAgICAgICAgICB0ID0ge1xuICAgICAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICAgICAgfSksIG4ucHVzaCh0KSwgcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCwgZSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmIChudWxsID09PSAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkpIHJldHVybiB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChcIm51bWJlclwiID09IHR5cGVvZiB0KSByZXR1cm4gQ2UoZS5OLCB0KTtcbiAgICAgICAgaWYgKFwiYm9vbGVhblwiID09IHR5cGVvZiB0KSByZXR1cm4ge1xuICAgICAgICAgICAgYm9vbGVhblZhbHVlOiB0XG4gICAgICAgIH07XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0KSByZXR1cm4ge1xuICAgICAgICAgICAgc3RyaW5nVmFsdWU6IHRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gaXQuZnJvbURhdGUodCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiBVbihlLk4sIG4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgaXQpIHtcbiAgICAgICAgICAgIC8vIEZpcmVzdG9yZSBiYWNrZW5kIHRydW5jYXRlcyBwcmVjaXNpb24gZG93biB0byBtaWNyb3NlY29uZHMuIFRvIGVuc3VyZVxuICAgICAgICAgICAgLy8gb2ZmbGluZSBtb2RlIHdvcmtzIHRoZSBzYW1lIHdpdGggcmVnYXJkcyB0byB0cnVuY2F0aW9uLCBwZXJmb3JtIHRoZVxuICAgICAgICAgICAgLy8gdHJ1bmNhdGlvbiBpbW1lZGlhdGVseSB3aXRob3V0IHdhaXRpbmcgZm9yIHRoZSBiYWNrZW5kIHRvIGRvIHRoYXQuXG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IGl0KHQuc2Vjb25kcywgMWUzICogTWF0aC5mbG9vcih0Lm5hbm9zZWNvbmRzIC8gMWUzKSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiBVbihlLk4sIG4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgdHUpIHJldHVybiB7XG4gICAgICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgbGF0aXR1ZGU6IHQubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiB0LmxvbmdpdHVkZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFhhKSByZXR1cm4ge1xuICAgICAgICAgICAgYnl0ZXNWYWx1ZTogcW4oZS5OLCB0Ll9ieXRlU3RyaW5nKVxuICAgICAgICB9O1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIElhKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5kYXRhYmFzZUlkLCBzID0gdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQ7XG4gICAgICAgICAgICBpZiAoIXMuaXNFcXVhbChuKSkgdGhyb3cgZS5VYyhgRG9jdW1lbnQgcmVmZXJlbmNlIGlzIGZvciBkYXRhYmFzZSAke3MucHJvamVjdElkfS8ke3MuZGF0YWJhc2V9IGJ1dCBzaG91bGQgYmUgZm9yIGRhdGFiYXNlICR7bi5wcm9qZWN0SWR9LyR7bi5kYXRhYmFzZX1gKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlVmFsdWU6IFFuKHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkIHx8IGUuZGF0YWJhc2VJZCwgdC5fa2V5LnBhdGgpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGUuVWMoYFVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOiAke21hKHQpfWApO1xuICAgIH1cbiAgICAvKipcbiAqIENoZWNrcyB3aGV0aGVyIGFuIG9iamVjdCBsb29rcyBsaWtlIGEgSlNPTiBvYmplY3QgdGhhdCBzaG91bGQgYmUgY29udmVydGVkXG4gKiBpbnRvIGEgc3RydWN0LiBOb3JtYWwgY2xhc3MvcHJvdG90eXBlIGluc3RhbmNlcyBhcmUgY29uc2lkZXJlZCB0byBsb29rIGxpa2VcbiAqIEpTT04gb2JqZWN0cyBzaW5jZSB0aGV5IHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gYSBzdHJ1Y3QgdmFsdWUuIEFycmF5cywgRGF0ZXMsXG4gKiBHZW9Qb2ludHMsIGV0Yy4gYXJlIG5vdCBjb25zaWRlcmVkIHRvIGxvb2sgbGlrZSBKU09OIG9iamVjdHMgc2luY2UgdGhleSBtYXBcbiAqIHRvIHNwZWNpZmljIEZpZWxkVmFsdWUgdHlwZXMgb3RoZXIgdGhhbiBPYmplY3RWYWx1ZS5cbiAqLyAodCwgZSk7XG59XG5cbmZ1bmN0aW9uIHB1KHQsIGUpIHtcbiAgICBjb25zdCBuID0ge307XG4gICAgcmV0dXJuIGF0KHQpID8gXG4gICAgLy8gSWYgd2UgZW5jb3VudGVyIGFuIGVtcHR5IG9iamVjdCwgd2UgZXhwbGljaXRseSBhZGQgaXQgdG8gdGhlIHVwZGF0ZVxuICAgIC8vIG1hc2sgdG8gZW5zdXJlIHRoYXQgdGhlIHNlcnZlciBjcmVhdGVzIGEgbWFwIGVudHJ5LlxuICAgIGUucGF0aCAmJiBlLnBhdGgubGVuZ3RoID4gMCAmJiBlLmZpZWxkTWFzay5wdXNoKGUucGF0aCkgOiBjdCh0LCAoKHQsIHMpID0+IHtcbiAgICAgICAgY29uc3QgaSA9IHl1KHMsIGUuT2ModCkpO1xuICAgICAgICBudWxsICE9IGkgJiYgKG5bdF0gPSBpKTtcbiAgICB9KSksIHtcbiAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgIGZpZWxkczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gVHUodCkge1xuICAgIHJldHVybiAhKFwib2JqZWN0XCIgIT0gdHlwZW9mIHQgfHwgbnVsbCA9PT0gdCB8fCB0IGluc3RhbmNlb2YgQXJyYXkgfHwgdCBpbnN0YW5jZW9mIERhdGUgfHwgdCBpbnN0YW5jZW9mIGl0IHx8IHQgaW5zdGFuY2VvZiB0dSB8fCB0IGluc3RhbmNlb2YgWGEgfHwgdCBpbnN0YW5jZW9mIElhIHx8IHQgaW5zdGFuY2VvZiBaYSk7XG59XG5cbmZ1bmN0aW9uIEV1KHQsIGUsIG4pIHtcbiAgICBpZiAoIVR1KG4pIHx8ICFmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiID09IHR5cGVvZiB0ICYmIG51bGwgIT09IHQgJiYgKE9iamVjdC5nZXRQcm90b3R5cGVPZih0KSA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fCBudWxsID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpO1xuICAgIH0obikpIHtcbiAgICAgICAgY29uc3QgcyA9IG1hKG4pO1xuICAgICAgICB0aHJvdyBcImFuIG9iamVjdFwiID09PSBzID8gZS5VYyh0ICsgXCIgYSBjdXN0b20gb2JqZWN0XCIpIDogZS5VYyh0ICsgXCIgXCIgKyBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRoYXQgY2FsbHMgZnJvbURvdFNlcGFyYXRlZFN0cmluZygpIGJ1dCB3cmFwcyBhbnkgZXJyb3IgdGhyb3duLlxuICovIGZ1bmN0aW9uIEl1KHQsIGUsIG4pIHtcbiAgICBpZiAoKFxuICAgIC8vIElmIHJlcXVpcmVkLCByZXBsYWNlIHRoZSBGaWVsZFBhdGggQ29tcGF0IGNsYXNzIHdpdGggd2l0aCB0aGUgZmlyZXN0b3JlLWV4cFxuICAgIC8vIEZpZWxkUGF0aC5cbiAgICBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSBpbnN0YW5jZW9mIEphKSByZXR1cm4gZS5faW50ZXJuYWxQYXRoO1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlKSByZXR1cm4gUnUodCwgZSk7XG4gICAgdGhyb3cgYnUoXCJGaWVsZCBwYXRoIGFyZ3VtZW50cyBtdXN0IGJlIG9mIHR5cGUgc3RyaW5nIG9yIEZpZWxkUGF0aC5cIiwgdCwgXG4gICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbn1cblxuLyoqXG4gKiBNYXRjaGVzIGFueSBjaGFyYWN0ZXJzIGluIGEgZmllbGQgcGF0aCBzdHJpbmcgdGhhdCBhcmUgcmVzZXJ2ZWQuXG4gKi8gY29uc3QgQXUgPSBuZXcgUmVnRXhwKFwiW35cXFxcKi9cXFxcW1xcXFxdXVwiKTtcblxuLyoqXG4gKiBXcmFwcyBmcm9tRG90U2VwYXJhdGVkU3RyaW5nIHdpdGggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCB0aGUgbWV0aG9kIHRoYXRcbiAqIHdhcyB0aHJvd24uXG4gKiBAcGFyYW0gbWV0aG9kTmFtZSAtIFRoZSBwdWJsaWNseSB2aXNpYmxlIG1ldGhvZCBuYW1lXG4gKiBAcGFyYW0gcGF0aCAtIFRoZSBkb3Qtc2VwYXJhdGVkIHN0cmluZyBmb3JtIG9mIGEgZmllbGQgcGF0aCB3aGljaCB3aWxsIGJlXG4gKiBzcGxpdCBvbiBkb3RzLlxuICogQHBhcmFtIHRhcmdldERvYyAtIFRoZSBkb2N1bWVudCBhZ2FpbnN0IHdoaWNoIHRoZSBmaWVsZCBwYXRoIHdpbGwgYmVcbiAqIGV2YWx1YXRlZC5cbiAqLyBmdW5jdGlvbiBSdSh0LCBlLCBuKSB7XG4gICAgaWYgKGUuc2VhcmNoKEF1KSA+PSAwKSB0aHJvdyBidShgSW52YWxpZCBmaWVsZCBwYXRoICgke2V9KS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiAnficsICcqJywgJy8nLCAnWycsIG9yICddJ2AsIHQsIFxuICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG5ldyBKYSguLi5lLnNwbGl0KFwiLlwiKSkuX2ludGVybmFsUGF0aDtcbiAgICB9IGNhdGNoIChzKSB7XG4gICAgICAgIHRocm93IGJ1KGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7ZX0pLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nYCwgdCwgXG4gICAgICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgICAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYnUodCwgZSwgbiwgcywgaSkge1xuICAgIGNvbnN0IHIgPSBzICYmICFzLmlzRW1wdHkoKSwgbyA9IHZvaWQgMCAhPT0gaTtcbiAgICBsZXQgYyA9IGBGdW5jdGlvbiAke2V9KCkgY2FsbGVkIHdpdGggaW52YWxpZCBkYXRhYDtcbiAgICBuICYmIChjICs9IFwiICh2aWEgYHRvRmlyZXN0b3JlKClgKVwiKSwgYyArPSBcIi4gXCI7XG4gICAgbGV0IGEgPSBcIlwiO1xuICAgIHJldHVybiAociB8fCBvKSAmJiAoYSArPSBcIiAoZm91bmRcIiwgciAmJiAoYSArPSBgIGluIGZpZWxkICR7c31gKSwgbyAmJiAoYSArPSBgIGluIGRvY3VtZW50ICR7aX1gKSwgXG4gICAgYSArPSBcIilcIiksIG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYyArIHQgKyBhKTtcbn1cblxuLyoqIENoZWNrcyBgaGF5c3RhY2tgIGlmIEZpZWxkUGF0aCBgbmVlZGxlYCBpcyBwcmVzZW50LiBSdW5zIGluIE8obikuICovIGZ1bmN0aW9uIFB1KHQsIGUpIHtcbiAgICByZXR1cm4gdC5zb21lKCh0ID0+IHQuaXNFcXVhbChlKSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXIgRmlyZXN0b3JlXG4gKiBkYXRhYmFzZS4gVGhlIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG9cbiAqIGdldCBhIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEZvciBhIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHBvaW50cyB0byBhIG5vbi1leGlzdGluZyBkb2N1bWVudCwgYW55IGRhdGFcbiAqIGFjY2VzcyB3aWxsIHJldHVybiAndW5kZWZpbmVkJy4gWW91IGNhbiB1c2UgdGhlIGBleGlzdHMoKWAgbWV0aG9kIHRvXG4gKiBleHBsaWNpdGx5IHZlcmlmeSBhIGRvY3VtZW50J3MgZXhpc3RlbmNlLlxuICovIGNsYXNzIHZ1IHtcbiAgICAvLyBOb3RlOiBUaGlzIGNsYXNzIGlzIHN0cmlwcGVkIGRvd24gdmVyc2lvbiBvZiB0aGUgRG9jdW1lbnRTbmFwc2hvdCBpblxuICAgIC8vIHRoZSBsZWdhY3kgU0RLLiBUaGUgY2hhbmdlcyBhcmU6XG4gICAgLy8gLSBObyBzdXBwb3J0IGZvciBTbmFwc2hvdE1ldGFkYXRhLlxuICAgIC8vIC0gTm8gc3VwcG9ydCBmb3IgU25hcHNob3RPcHRpb25zLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSBlLCB0aGlzLl9rZXkgPSBuLCB0aGlzLl9kb2N1bWVudCA9IHMsIFxuICAgICAgICB0aGlzLl9jb252ZXJ0ZXIgPSBpO1xuICAgIH1cbiAgICAvKiogUHJvcGVydHkgb2YgdGhlIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHByb3ZpZGVzIHRoZSBkb2N1bWVudCdzIElELiAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgYERvY3VtZW50UmVmZXJlbmNlYCBmb3IgdGhlIGRvY3VtZW50IGluY2x1ZGVkIGluIHRoZSBgRG9jdW1lbnRTbmFwc2hvdGAuXG4gICAgICovICAgIGdldCByZWYoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSWEodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIsIHRoaXMuX2tleSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNpZ25hbHMgd2hldGhlciBvciBub3QgdGhlIGRvY3VtZW50IGF0IHRoZSBzbmFwc2hvdCdzIGxvY2F0aW9uIGV4aXN0cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGRvY3VtZW50IGV4aXN0cy5cbiAgICAgKi8gICAgZXhpc3RzKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5fZG9jdW1lbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBvciBgdW5kZWZpbmVkYFxuICAgICAqIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqLyAgICBkYXRhKCkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb252ZXJ0ZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHRoZSBjb252ZXJ0ZXIgYW5kIGNyZWF0ZSBhIG5ldyBEb2N1bWVudFNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gaWYgYSBjb252ZXJ0ZXIgaGFzIGJlZW4gcHJvdmlkZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBWdSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCB0aGlzLl9rZXksIHRoaXMuX2RvY3VtZW50LCBcbiAgICAgICAgICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0ZXIuZnJvbUZpcmVzdG9yZSh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUodGhpcy5fZG9jdW1lbnQuZGF0YS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgYGZpZWxkUGF0aGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgb3IgZmllbGQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgcGF0aCAoZm9yIGV4YW1wbGUgJ2Zvbycgb3IgJ2Zvby5iYXInKSB0byBhIHNwZWNpZmljXG4gICAgICogZmllbGQuXG4gICAgICogQHJldHVybnMgVGhlIGRhdGEgYXQgdGhlIHNwZWNpZmllZCBmaWVsZCBsb2NhdGlvbiBvciB1bmRlZmluZWQgaWYgbm8gc3VjaFxuICAgICAqIGZpZWxkIGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgLy8gV2UgYXJlIHVzaW5nIGBhbnlgIGhlcmUgdG8gYXZvaWQgYW4gZXhwbGljaXQgY2FzdCBieSBvdXIgdXNlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZXQodCkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLl9kb2N1bWVudC5kYXRhLmZpZWxkKFN1KFwiRG9jdW1lbnRTbmFwc2hvdC5nZXRcIiwgdCkpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IGUpIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUoZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXJcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZSBhcyBwYXJ0IG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0XG4gKiBhbmQgaXRzIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG8gZ2V0IGFcbiAqIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgb2ZmZXJzIHRoZSBzYW1lIEFQSSBzdXJmYWNlIGFzIGFcbiAqIGBEb2N1bWVudFNuYXBzaG90YC4gU2luY2UgcXVlcnkgcmVzdWx0cyBjb250YWluIG9ubHkgZXhpc3RpbmcgZG9jdW1lbnRzLCB0aGVcbiAqIGBleGlzdHNgIHByb3BlcnR5IHdpbGwgYWx3YXlzIGJlIHRydWUgYW5kIGBkYXRhKClgIHdpbGwgbmV2ZXIgcmV0dXJuXG4gKiAndW5kZWZpbmVkJy5cbiAqLyBjbGFzcyBWdSBleHRlbmRzIHZ1IHtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGRhdGEoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5kYXRhKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0aGF0IGNhbGxzIGBmcm9tRG90U2VwYXJhdGVkU3RyaW5nKClgIGJ1dCB3cmFwcyBhbnkgZXJyb3IgdGhyb3duLlxuICovIGZ1bmN0aW9uIFN1KHQsIGUpIHtcbiAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IFJ1KHQsIGUpIDogZSBpbnN0YW5jZW9mIEphID8gZS5faW50ZXJuYWxQYXRoIDogZS5fZGVsZWdhdGUuX2ludGVybmFsUGF0aDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogTWV0YWRhdGEgYWJvdXQgYSBzbmFwc2hvdCwgZGVzY3JpYmluZyB0aGUgc3RhdGUgb2YgdGhlIHNuYXBzaG90LlxuICovIGNsYXNzIER1IHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5oYXNQZW5kaW5nV3JpdGVzID0gdCwgdGhpcy5mcm9tQ2FjaGUgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgU25hcHNob3RNZXRhZGF0YWAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgU25hcHNob3RNZXRhZGF0YWAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgU25hcHNob3RNZXRhZGF0YWAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc1BlbmRpbmdXcml0ZXMgPT09IHQuaGFzUGVuZGluZ1dyaXRlcyAmJiB0aGlzLmZyb21DYWNoZSA9PT0gdC5mcm9tQ2FjaGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91ciBGaXJlc3RvcmVcbiAqIGRhdGFiYXNlLiBUaGUgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0b1xuICogZ2V0IGEgc3BlY2lmaWMgZmllbGQuXG4gKlxuICogRm9yIGEgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcG9pbnRzIHRvIGEgbm9uLWV4aXN0aW5nIGRvY3VtZW50LCBhbnkgZGF0YVxuICogYWNjZXNzIHdpbGwgcmV0dXJuICd1bmRlZmluZWQnLiBZb3UgY2FuIHVzZSB0aGUgYGV4aXN0cygpYCBtZXRob2QgdG9cbiAqIGV4cGxpY2l0bHkgdmVyaWZ5IGEgZG9jdW1lbnQncyBleGlzdGVuY2UuXG4gKi8gY2xhc3MgQ3UgZXh0ZW5kcyB2dSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICBzdXBlcih0LCBlLCBuLCBzLCByKSwgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fZmlyZXN0b3JlSW1wbCA9IHQsIHRoaXMubWV0YWRhdGEgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBvZiB0aGUgYERvY3VtZW50U25hcHNob3RgIHRoYXQgc2lnbmFscyB3aGV0aGVyIG9yIG5vdCB0aGUgZGF0YVxuICAgICAqIGV4aXN0cy4gVHJ1ZSBpZiB0aGUgZG9jdW1lbnQgZXhpc3RzLlxuICAgICAqLyAgICBleGlzdHMoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5leGlzdHMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBgRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKWAgdmFsdWVzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW5cbiAgICAgKiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIGJ5IHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgZGF0YSBpcyByZXRyaWV2ZWQgZnJvbVxuICAgICAqIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzIHRoYXRcbiAgICAgKiBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgb3IgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKi8gICAgZGF0YSh0ID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29udmVydGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHVzZSB0aGUgY29udmVydGVyIGFuZCBjcmVhdGUgYSBuZXcgRG9jdW1lbnRTbmFwc2hvdFxuICAgICAgICAgICAgICAgIC8vIGlmIGEgY29udmVydGVyIGhhcyBiZWVuIHByb3ZpZGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgTnUodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fa2V5LCB0aGlzLl9kb2N1bWVudCwgdGhpcy5tZXRhZGF0YSwgXG4gICAgICAgICAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVydGVyLmZyb21GaXJlc3RvcmUoZSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHRoaXMuX2RvY3VtZW50LmRhdGEudmFsdWUsIHQuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgYGZpZWxkUGF0aGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgb3IgZmllbGQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGEgYEZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKClgIHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBzZXQgdG9cbiAgICAgKiBpdHMgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBieVxuICAgICAqIHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggKGZvciBleGFtcGxlICdmb28nIG9yICdmb28uYmFyJykgdG8gYSBzcGVjaWZpY1xuICAgICAqIGZpZWxkLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyB0aGUgZmllbGQgaXMgcmV0cmlldmVkXG4gICAgICogZnJvbSB0aGUgc25hcHNob3QgKGZvciBleGFtcGxlIHRoZSBkZXNpcmVkIGJlaGF2aW9yIGZvciBzZXJ2ZXIgdGltZXN0YW1wc1xuICAgICAqIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlKS5cbiAgICAgKiBAcmV0dXJucyBUaGUgZGF0YSBhdCB0aGUgc3BlY2lmaWVkIGZpZWxkIGxvY2F0aW9uIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoXG4gICAgICogZmllbGQgZXhpc3RzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdldCh0LCBlID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5fZG9jdW1lbnQuZGF0YS5maWVsZChTdShcIkRvY3VtZW50U25hcHNob3QuZ2V0XCIsIHQpKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBuKSByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKG4sIGUuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXJcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZSBhcyBwYXJ0IG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0XG4gKiBhbmQgaXRzIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG8gZ2V0IGFcbiAqIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgb2ZmZXJzIHRoZSBzYW1lIEFQSSBzdXJmYWNlIGFzIGFcbiAqIGBEb2N1bWVudFNuYXBzaG90YC4gU2luY2UgcXVlcnkgcmVzdWx0cyBjb250YWluIG9ubHkgZXhpc3RpbmcgZG9jdW1lbnRzLCB0aGVcbiAqIGBleGlzdHNgIHByb3BlcnR5IHdpbGwgYWx3YXlzIGJlIHRydWUgYW5kIGBkYXRhKClgIHdpbGwgbmV2ZXIgcmV0dXJuXG4gKiAndW5kZWZpbmVkJy5cbiAqLyBjbGFzcyBOdSBleHRlbmRzIEN1IHtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBgRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKWAgdmFsdWVzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW5cbiAgICAgKiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIGJ5IHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgZGF0YSBpcyByZXRyaWV2ZWQgZnJvbVxuICAgICAqIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzIHRoYXRcbiAgICAgKiBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgZGF0YSh0ID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRhdGEodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5U25hcHNob3RgIGNvbnRhaW5zIHplcm8gb3IgbW9yZSBgRG9jdW1lbnRTbmFwc2hvdGAgb2JqZWN0c1xuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHRzIG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudHMgY2FuIGJlIGFjY2Vzc2VkIGFzIGFuXG4gKiBhcnJheSB2aWEgdGhlIGBkb2NzYCBwcm9wZXJ0eSBvciBlbnVtZXJhdGVkIHVzaW5nIHRoZSBgZm9yRWFjaGAgbWV0aG9kLiBUaGVcbiAqIG51bWJlciBvZiBkb2N1bWVudHMgY2FuIGJlIGRldGVybWluZWQgdmlhIHRoZSBgZW1wdHlgIGFuZCBgc2l6ZWBcbiAqIHByb3BlcnRpZXMuXG4gKi8gY2xhc3MgeHUge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl91c2VyRGF0YVdyaXRlciA9IGUsIHRoaXMuX3NuYXBzaG90ID0gcywgdGhpcy5tZXRhZGF0YSA9IG5ldyBEdShzLmhhc1BlbmRpbmdXcml0ZXMsIHMuZnJvbUNhY2hlKSwgXG4gICAgICAgIHRoaXMucXVlcnkgPSBuO1xuICAgIH1cbiAgICAvKiogQW4gYXJyYXkgb2YgYWxsIHRoZSBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IGRvY3MoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB0LnB1c2goZSkpKSwgdDtcbiAgICB9XG4gICAgLyoqIFRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuICovICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc25hcHNob3QuZG9jcy5zaXplO1xuICAgIH1cbiAgICAvKiogVHJ1ZSBpZiB0aGVyZSBhcmUgbm8gZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuICovICAgIGdldCBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHRoaXMuc2l6ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW51bWVyYXRlcyBhbGwgb2YgdGhlIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgd2l0aCBhIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGZvclxuICAgICAqIGVhY2ggZG9jdW1lbnQgaW4gdGhlIHNuYXBzaG90LlxuICAgICAqIEBwYXJhbSB0aGlzQXJnIC0gVGhlIGB0aGlzYCBiaW5kaW5nIGZvciB0aGUgY2FsbGJhY2suXG4gICAgICovICAgIGZvckVhY2godCwgZSkge1xuICAgICAgICB0aGlzLl9zbmFwc2hvdC5kb2NzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgdC5jYWxsKGUsIG5ldyBOdSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCBuLmtleSwgbiwgbmV3IER1KHRoaXMuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhuLmtleSksIHRoaXMuX3NuYXBzaG90LmZyb21DYWNoZSksIHRoaXMucXVlcnkuY29udmVydGVyKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgZG9jdW1lbnRzIGNoYW5nZXMgc2luY2UgdGhlIGxhc3Qgc25hcHNob3QuIElmIHRoaXNcbiAgICAgKiBpcyB0aGUgZmlyc3Qgc25hcHNob3QsIGFsbCBkb2N1bWVudHMgd2lsbCBiZSBpbiB0aGUgbGlzdCBhcyAnYWRkZWQnXG4gICAgICogY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYFNuYXBzaG90TGlzdGVuT3B0aW9uc2AgdGhhdCBjb250cm9sIHdoZXRoZXIgbWV0YWRhdGEtb25seVxuICAgICAqIGNoYW5nZXMgKGkuZS4gb25seSBgRG9jdW1lbnRTbmFwc2hvdC5tZXRhZGF0YWAgY2hhbmdlZCkgc2hvdWxkIHRyaWdnZXJcbiAgICAgKiBzbmFwc2hvdCBldmVudHMuXG4gICAgICovICAgIGRvY0NoYW5nZXModCA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGUgPSAhIXQuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcztcbiAgICAgICAgaWYgKGUgJiYgdGhpcy5fc25hcHNob3QuZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUbyBpbmNsdWRlIG1ldGFkYXRhIGNoYW5nZXMgd2l0aCB5b3VyIGRvY3VtZW50IGNoYW5nZXMsIHlvdSBtdXN0IGFsc28gcGFzcyB7IGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6dHJ1ZSB9IHRvIG9uU25hcHNob3QoKS5cIik7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRDaGFuZ2VzICYmIHRoaXMuX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzID09PSBlIHx8ICh0aGlzLl9jYWNoZWRDaGFuZ2VzID0gXG4gICAgICAgIC8qKiBDYWxjdWxhdGVzIHRoZSBhcnJheSBvZiBgRG9jdW1lbnRDaGFuZ2VgcyBmb3IgYSBnaXZlbiBgVmlld1NuYXBzaG90YC4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKHQuX3NuYXBzaG90Lm9sZERvY3MuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiB0Ll9zbmFwc2hvdC5kb2NDaGFuZ2VzLm1hcCgobiA9PiAoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFkZGVkXCIsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogbmV3IE51KHQuX2ZpcmVzdG9yZSwgdC5fdXNlckRhdGFXcml0ZXIsIG4uZG9jLmtleSwgbi5kb2MsIG5ldyBEdSh0Ll9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMobi5kb2Mua2V5KSwgdC5fc25hcHNob3QuZnJvbUNhY2hlKSwgdC5xdWVyeS5jb252ZXJ0ZXIpLFxuICAgICAgICAgICAgICAgICAgICBvbGRJbmRleDogLTEsXG4gICAgICAgICAgICAgICAgICAgIG5ld0luZGV4OiBlKytcbiAgICAgICAgICAgICAgICB9KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIEEgYERvY3VtZW50U2V0YCB0aGF0IGlzIHVwZGF0ZWQgaW5jcmVtZW50YWxseSBhcyBjaGFuZ2VzIGFyZSBhcHBsaWVkIHRvIHVzZVxuICAgICAgICAgICAgICAgIC8vIHRvIGxvb2t1cCB0aGUgaW5kZXggb2YgYSBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICBsZXQgbiA9IHQuX3NuYXBzaG90Lm9sZERvY3M7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuX3NuYXBzaG90LmRvY0NoYW5nZXMuZmlsdGVyKCh0ID0+IGUgfHwgMyAvKiBNZXRhZGF0YSAqLyAhPT0gdC50eXBlKSkubWFwKChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBOdSh0Ll9maXJlc3RvcmUsIHQuX3VzZXJEYXRhV3JpdGVyLCBlLmRvYy5rZXksIGUuZG9jLCBuZXcgRHUodC5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKGUuZG9jLmtleSksIHQuX3NuYXBzaG90LmZyb21DYWNoZSksIHQucXVlcnkuY29udmVydGVyKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAtMSwgciA9IC0xO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCAvKiBBZGRlZCAqLyAhPT0gZS50eXBlICYmIChpID0gbi5pbmRleE9mKGUuZG9jLmtleSksIG4gPSBuLmRlbGV0ZShlLmRvYy5rZXkpKSwgXG4gICAgICAgICAgICAgICAgICAgIDEgLyogUmVtb3ZlZCAqLyAhPT0gZS50eXBlICYmIChuID0gbi5hZGQoZS5kb2MpLCByID0gbi5pbmRleE9mKGUuZG9jLmtleSkpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBrdShlLnR5cGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jOiBzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkSW5kZXg6IGksXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmRleDogclxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSh0aGlzLCBlKSwgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPSBlKSwgdGhpcy5fY2FjaGVkQ2hhbmdlcztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGt1KHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGNhc2UgMCAvKiBBZGRlZCAqLyA6XG4gICAgICAgIHJldHVybiBcImFkZGVkXCI7XG5cbiAgICAgIGNhc2UgMiAvKiBNb2RpZmllZCAqLyA6XG4gICAgICBjYXNlIDMgLyogTWV0YWRhdGEgKi8gOlxuICAgICAgICByZXR1cm4gXCJtb2RpZmllZFwiO1xuXG4gICAgICBjYXNlIDEgLyogUmVtb3ZlZCAqLyA6XG4gICAgICAgIHJldHVybiBcInJlbW92ZWRcIjtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEwoKTtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JlZXhwKTogQWRkIHRlc3RzIGZvciBzbmFwc2hvdEVxdWFsIHdpdGggZGlmZmVyZW50IHNuYXBzaG90XG4vLyBtZXRhZGF0YVxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHNuYXBzaG90cyBhcmUgZXF1YWwuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBBIHNuYXBzaG90IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIHNuYXBzaG90IHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBzbmFwc2hvdHMgYXJlIGVxdWFsLlxuICovIGZ1bmN0aW9uICR1KHQsIGUpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIEN1ICYmIGUgaW5zdGFuY2VvZiBDdSA/IHQuX2ZpcmVzdG9yZSA9PT0gZS5fZmlyZXN0b3JlICYmIHQuX2tleS5pc0VxdWFsKGUuX2tleSkgJiYgKG51bGwgPT09IHQuX2RvY3VtZW50ID8gbnVsbCA9PT0gZS5fZG9jdW1lbnQgOiB0Ll9kb2N1bWVudC5pc0VxdWFsKGUuX2RvY3VtZW50KSkgJiYgdC5fY29udmVydGVyID09PSBlLl9jb252ZXJ0ZXIgOiB0IGluc3RhbmNlb2YgeHUgJiYgZSBpbnN0YW5jZW9mIHh1ICYmICh0Ll9maXJlc3RvcmUgPT09IGUuX2ZpcmVzdG9yZSAmJiBTYSh0LnF1ZXJ5LCBlLnF1ZXJ5KSAmJiB0Lm1ldGFkYXRhLmlzRXF1YWwoZS5tZXRhZGF0YSkgJiYgdC5fc25hcHNob3QuaXNFcXVhbChlLl9zbmFwc2hvdCkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBPdSh0KSB7XG4gICAgaWYgKG1lKHQpICYmIDAgPT09IHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCkgdGhyb3cgbmV3IGooSy5VTklNUExFTUVOVEVELCBcImxpbWl0VG9MYXN0KCkgcXVlcmllcyByZXF1aXJlIHNwZWNpZnlpbmcgYXQgbGVhc3Qgb25lIG9yZGVyQnkoKSBjbGF1c2VcIik7XG59XG5cbi8qKlxuICogQSBgUXVlcnlDb25zdHJhaW50YCBpcyB1c2VkIHRvIG5hcnJvdyB0aGUgc2V0IG9mIGRvY3VtZW50cyByZXR1cm5lZCBieSBhXG4gKiBGaXJlc3RvcmUgcXVlcnkuIGBRdWVyeUNvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgd2hlcmV9LFxuICoge0BsaW5rIG9yZGVyQnl9LCB7QGxpbmsgKHN0YXJ0QXQ6MSl9LCB7QGxpbmsgKHN0YXJ0QWZ0ZXI6MSl9LCB7QGxpbmtcbiAqIGVuZEJlZm9yZToxfSwge0BsaW5rIChlbmRBdDoxKX0sIHtAbGluayBsaW1pdH0gb3Ige0BsaW5rIGxpbWl0VG9MYXN0fSBhbmRcbiAqIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgcXVlcnl9IHRvIGNyZWF0ZSBhIG5ldyBxdWVyeSBpbnN0YW5jZSB0aGF0XG4gKiBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5Q29uc3RyYWludGAuXG4gKi8gY2xhc3MgRnUge31cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGltbXV0YWJsZSBpbnN0YW5jZSBvZiB7QGxpbmsgUXVlcnl9IHRoYXQgaXMgZXh0ZW5kZWQgdG8gYWxzbyBpbmNsdWRlXG4gKiBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICpcbiAqIEBwYXJhbSBxdWVyeSAtIFRoZSB7QGxpbmsgUXVlcnl9IGluc3RhbmNlIHRvIHVzZSBhcyBhIGJhc2UgZm9yIHRoZSBuZXcgY29uc3RyYWludHMuXG4gKiBAcGFyYW0gcXVlcnlDb25zdHJhaW50cyAtIFRoZSBsaXN0IG9mIHtAbGluayBRdWVyeUNvbnN0cmFpbnR9cyB0byBhcHBseS5cbiAqIEB0aHJvd3MgaWYgYW55IG9mIHRoZSBwcm92aWRlZCBxdWVyeSBjb25zdHJhaW50cyBjYW5ub3QgYmUgY29tYmluZWQgd2l0aCB0aGVcbiAqIGV4aXN0aW5nIG9yIG5ldyBjb25zdHJhaW50cy5cbiAqLyBmdW5jdGlvbiBNdSh0LCAuLi5lKSB7XG4gICAgZm9yIChjb25zdCBuIG9mIGUpIHQgPSBuLl9hcHBseSh0KTtcbiAgICByZXR1cm4gdDtcbn1cblxuY2xhc3MgTHUgZXh0ZW5kcyBGdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLkdjID0gdCwgdGhpcy56YyA9IGUsIHRoaXMuSGMgPSBuLCB0aGlzLnR5cGUgPSBcIndoZXJlXCI7XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBjdSh0LmZpcmVzdG9yZSksIG4gPSBmdW5jdGlvbih0LCBlLCBuLCBzLCBpLCByLCBvKSB7XG4gICAgICAgICAgICBsZXQgYztcbiAgICAgICAgICAgIGlmIChpLmlzS2V5RmllbGQoKSkge1xuICAgICAgICAgICAgICAgIGlmIChcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gPT09IHIgfHwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IHIpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgUXVlcnkuIFlvdSBjYW4ndCBwZXJmb3JtICcke3J9JyBxdWVyaWVzIG9uIEZpZWxkUGF0aC5kb2N1bWVudElkKCkuYCk7XG4gICAgICAgICAgICAgICAgaWYgKFwiaW5cIiAvKiBJTiAqLyA9PT0gciB8fCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA9PT0gcikge1xuICAgICAgICAgICAgICAgICAgICB0aChvLCByKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgbykgZS5wdXNoKFp1KHMsIHQsIG4pKTtcbiAgICAgICAgICAgICAgICAgICAgYyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgYyA9IFp1KHMsIHQsIG8pO1xuICAgICAgICAgICAgfSBlbHNlIFwiaW5cIiAvKiBJTiAqLyAhPT0gciAmJiBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAhPT0gciAmJiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAhPT0gciB8fCB0aChvLCByKSwgXG4gICAgICAgICAgICBjID0gZ3UobiwgZSwgbywgXG4gICAgICAgICAgICAvKiBhbGxvd0FycmF5cz0gKi8gXCJpblwiIC8qIElOICovID09PSByIHx8IFwibm90LWluXCIgLyogTk9UX0lOICovID09PSByKTtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBKdC5jcmVhdGUoaSwgciwgYyk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLnYoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0geWUodCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBuICYmICFuLmlzRXF1YWwoZS5maWVsZCkpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIEFsbCB3aGVyZSBmaWx0ZXJzIHdpdGggYW4gaW5lcXVhbGl0eSAoPCwgPD0sICE9LCBub3QtaW4sID4sIG9yID49KSBtdXN0IGJlIG9uIHRoZSBzYW1lIGZpZWxkLiBCdXQgeW91IGhhdmUgaW5lcXVhbGl0eSBmaWx0ZXJzIG9uICcke24udG9TdHJpbmcoKX0nIGFuZCAnJHtlLmZpZWxkLnRvU3RyaW5nKCl9J2ApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gZ2UodCk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHMgJiYgZWgodCwgZS5maWVsZCwgcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmZpbHRlcnMpIGlmIChlLmluZGV4T2Yobi5vcCkgPj0gMCkgcmV0dXJuIG4ub3A7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH0odCwgXG4gICAgICAgICAgICAgICAgLyoqXG4gKiBHaXZlbiBhbiBvcGVyYXRvciwgcmV0dXJucyB0aGUgc2V0IG9mIG9wZXJhdG9ycyB0aGF0IGNhbm5vdCBiZSB1c2VkIHdpdGggaXQuXG4gKlxuICogT3BlcmF0b3JzIGluIGEgcXVlcnkgbXVzdCBhZGhlcmUgdG8gdGhlIGZvbGxvd2luZyBzZXQgb2YgcnVsZXM6XG4gKiAxLiBPbmx5IG9uZSBhcnJheSBvcGVyYXRvciBpcyBhbGxvd2VkLlxuICogMi4gT25seSBvbmUgZGlzanVuY3RpdmUgb3BlcmF0b3IgaXMgYWxsb3dlZC5cbiAqIDMuIGBOT1RfRVFVQUxgIGNhbm5vdCBiZSB1c2VkIHdpdGggYW5vdGhlciBgTk9UX0VRVUFMYCBvcGVyYXRvci5cbiAqIDQuIGBOT1RfSU5gIGNhbm5vdCBiZSB1c2VkIHdpdGggYXJyYXksIGRpc2p1bmN0aXZlLCBvciBgTk9UX0VRVUFMYCBvcGVyYXRvcnMuXG4gKlxuICogQXJyYXkgb3BlcmF0b3JzOiBgQVJSQVlfQ09OVEFJTlNgLCBgQVJSQVlfQ09OVEFJTlNfQU5ZYFxuICogRGlzanVuY3RpdmUgb3BlcmF0b3JzOiBgSU5gLCBgQVJSQVlfQ09OVEFJTlNfQU5ZYCwgYE5PVF9JTmBcbiAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiE9XCIgLyogTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovICwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluXCIgLyogSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcImluXCIgLyogSU4gKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gLCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIFwiaW5cIiAvKiBJTiAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogTk9UX0lOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyAsIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgXCJpblwiIC8qIElOICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gLCBcIiE9XCIgLyogTk9UX0VRVUFMICovIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfShlLm9wKSk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IG4pIFxuICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSB3aGVuIGl0J3MgYSBkdXBsaWNhdGUgb3AgdG8gZ2l2ZSBhIHNsaWdodGx5IGNsZWFyZXIgZXJyb3IgbWVzc2FnZS5cbiAgICAgICAgICAgICAgICB0aHJvdyBuID09PSBlLm9wID8gbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGNhbm5vdCB1c2UgbW9yZSB0aGFuIG9uZSAnJHtlLm9wLnRvU3RyaW5nKCl9JyBmaWx0ZXIuYCkgOiBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSAnJHtlLm9wLnRvU3RyaW5nKCl9JyBmaWx0ZXJzIHdpdGggJyR7bi50b1N0cmluZygpfScgZmlsdGVycy5gKTtcbiAgICAgICAgICAgIH0odCwgYSksIGE7XG4gICAgICAgIH0odC5fcXVlcnksIFwid2hlcmVcIiwgZSwgdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIHRoaXMuR2MsIHRoaXMuemMsIHRoaXMuSGMpO1xuICAgICAgICByZXR1cm4gbmV3IEFhKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZmlsdGVycy5jb25jYXQoWyBlIF0pO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBmZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCBuLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgbikpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH0gdGhhdCBlbmZvcmNlcyB0aGF0IGRvY3VtZW50cyBtdXN0IGNvbnRhaW4gdGhlXG4gKiBzcGVjaWZpZWQgZmllbGQgYW5kIHRoYXQgdGhlIHZhbHVlIHNob3VsZCBzYXRpc2Z5IHRoZSByZWxhdGlvbiBjb25zdHJhaW50XG4gKiBwcm92aWRlZC5cbiAqXG4gKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggdG8gY29tcGFyZVxuICogQHBhcmFtIG9wU3RyIC0gVGhlIG9wZXJhdGlvbiBzdHJpbmcgKGUuZyBcIiZsdDtcIiwgXCImbHQ7PVwiLCBcIj09XCIsIFwiJmx0O1wiLFxuICogICBcIiZsdDs9XCIsIFwiIT1cIikuXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgZm9yIGNvbXBhcmlzb25cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeX0uXG4gKi8gZnVuY3Rpb24gQnUodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBlLCBpID0gU3UoXCJ3aGVyZVwiLCB0KTtcbiAgICByZXR1cm4gbmV3IEx1KGksIHMsIG4pO1xufVxuXG5jbGFzcyBVdSBleHRlbmRzIEZ1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuR2MgPSB0LCB0aGlzLkpjID0gZSwgdGhpcy50eXBlID0gXCJvcmRlckJ5XCI7XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5zdGFydEF0KSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gWW91IG11c3Qgbm90IGNhbGwgc3RhcnRBdCgpIG9yIHN0YXJ0QWZ0ZXIoKSBiZWZvcmUgY2FsbGluZyBvcmRlckJ5KCkuXCIpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQuZW5kQXQpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBlbmRBdCgpIG9yIGVuZEJlZm9yZSgpIGJlZm9yZSBjYWxsaW5nIG9yZGVyQnkoKS5cIik7XG4gICAgICAgICAgICBjb25zdCBzID0gbmV3IGFlKGUsIG4pO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gZ2UodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgZmlyc3Qgb3JkZXIgYnkuIEl0IG11c3QgbWF0Y2ggYW55IGluZXF1YWxpdHkuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB5ZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gbiAmJiBlaCh0LCBuLCBlLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KHQsIHMpLCBzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQ3JlYXRlIGEgYEJvdW5kYCBmcm9tIGEgcXVlcnkgYW5kIGEgZG9jdW1lbnQuXG4gKlxuICogTm90ZSB0aGF0IHRoZSBgQm91bmRgIHdpbGwgYWx3YXlzIGluY2x1ZGUgdGhlIGtleSBvZiB0aGUgZG9jdW1lbnRcbiAqIGFuZCBzbyBvbmx5IHRoZSBwcm92aWRlZCBkb2N1bWVudCB3aWxsIGNvbXBhcmUgZXF1YWwgdG8gdGhlIHJldHVybmVkXG4gKiBwb3NpdGlvbi5cbiAqXG4gKiBXaWxsIHRocm93IGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBjb250YWluIGFsbCBmaWVsZHMgb2YgdGhlIG9yZGVyIGJ5XG4gKiBvZiB0aGUgcXVlcnkgb3IgaWYgYW55IG9mIHRoZSBmaWVsZHMgaW4gdGhlIG9yZGVyIGJ5IGFyZSBhbiB1bmNvbW1pdHRlZFxuICogc2VydmVyIHRpbWVzdGFtcC5cbiAqLyAodC5fcXVlcnksIHRoaXMuR2MsIHRoaXMuSmMpO1xuICAgICAgICByZXR1cm4gbmV3IEFhKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiB2YWxpZGF0ZSB0aGF0IG9yZGVyQnkgZG9lcyBub3QgbGlzdCB0aGUgc2FtZSBrZXkgdHdpY2UuXG4gICAgICAgICAgICBjb25zdCBuID0gdC5leHBsaWNpdE9yZGVyQnkuY29uY2F0KFsgZSBdKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgZmUodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgbiwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlDb25zdHJhaW50fSB0aGF0IHNvcnRzIHRoZSBxdWVyeSByZXN1bHQgYnkgdGhlXG4gKiBzcGVjaWZpZWQgZmllbGQsIG9wdGlvbmFsbHkgaW4gZGVzY2VuZGluZyBvcmRlciBpbnN0ZWFkIG9mIGFzY2VuZGluZy5cbiAqXG4gKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIGZpZWxkIHRvIHNvcnQgYnkuXG4gKiBAcGFyYW0gZGlyZWN0aW9uU3RyIC0gT3B0aW9uYWwgZGlyZWN0aW9uIHRvIHNvcnQgYnkgKCdhc2MnIG9yICdkZXNjJykuIElmXG4gKiBub3Qgc3BlY2lmaWVkLCBvcmRlciB3aWxsIGJlIGFzY2VuZGluZy5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeX0uXG4gKi8gZnVuY3Rpb24gcXUodCwgZSA9IFwiYXNjXCIpIHtcbiAgICBjb25zdCBuID0gZSwgcyA9IFN1KFwib3JkZXJCeVwiLCB0KTtcbiAgICByZXR1cm4gbmV3IFV1KHMsIG4pO1xufVxuXG5jbGFzcyBLdSBleHRlbmRzIEZ1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IHQsIHRoaXMuWWMgPSBlLCB0aGlzLlhjID0gbjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBYSh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIEllKHQuX3F1ZXJ5LCB0aGlzLlljLCB0aGlzLlhjKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlDb25zdHJhaW50fSB0aGF0IG9ubHkgcmV0dXJucyB0aGUgZmlyc3QgbWF0Y2hpbmcgZG9jdW1lbnRzLlxuICpcbiAqIEBwYXJhbSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byByZXR1cm4uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnl9LlxuICovIGZ1bmN0aW9uIGp1KHQpIHtcbiAgICByZXR1cm4geWEoXCJsaW1pdFwiLCB0KSwgbmV3IEt1KFwibGltaXRcIiwgdCwgXCJGXCIgLyogRmlyc3QgKi8pO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlDb25zdHJhaW50fSB0aGF0IG9ubHkgcmV0dXJucyB0aGUgbGFzdCBtYXRjaGluZyBkb2N1bWVudHMuXG4gKlxuICogWW91IG11c3Qgc3BlY2lmeSBhdCBsZWFzdCBvbmUgYG9yZGVyQnlgIGNsYXVzZSBmb3IgYGxpbWl0VG9MYXN0YCBxdWVyaWVzLFxuICogb3RoZXJ3aXNlIGFuIGV4Y2VwdGlvbiB3aWxsIGJlIHRocm93biBkdXJpbmcgZXhlY3V0aW9uLlxuICpcbiAqIEBwYXJhbSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byByZXR1cm4uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnl9LlxuICovIGZ1bmN0aW9uIFF1KHQpIHtcbiAgICByZXR1cm4geWEoXCJsaW1pdFRvTGFzdFwiLCB0KSwgbmV3IEt1KFwibGltaXRUb0xhc3RcIiwgdCwgXCJMXCIgLyogTGFzdCAqLyk7XG59XG5cbmNsYXNzIFd1IGV4dGVuZHMgRnUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gdCwgdGhpcy5aYyA9IGUsIHRoaXMudGEgPSBuO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gWHUodCwgdGhpcy50eXBlLCB0aGlzLlpjLCB0aGlzLnRhKTtcbiAgICAgICAgcmV0dXJuIG5ldyBBYSh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgZmUodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCBlLCB0LmVuZEF0KTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgZSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gR3UoLi4udCkge1xuICAgIHJldHVybiBuZXcgV3UoXCJzdGFydEF0XCIsIHQsIC8qYmVmb3JlPSovICEwKTtcbn1cblxuZnVuY3Rpb24genUoLi4udCkge1xuICAgIHJldHVybiBuZXcgV3UoXCJzdGFydEFmdGVyXCIsIHQsIFxuICAgIC8qYmVmb3JlPSovICExKTtcbn1cblxuY2xhc3MgSHUgZXh0ZW5kcyBGdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSB0LCB0aGlzLlpjID0gZSwgdGhpcy50YSA9IG47XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBYdSh0LCB0aGlzLnR5cGUsIHRoaXMuWmMsIHRoaXMudGEpO1xuICAgICAgICByZXR1cm4gbmV3IEFhKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBmZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgZSk7XG4gICAgICAgIH0odC5fcXVlcnksIGUpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEp1KC4uLnQpIHtcbiAgICByZXR1cm4gbmV3IEh1KFwiZW5kQmVmb3JlXCIsIHQsIC8qYmVmb3JlPSovICEwKTtcbn1cblxuZnVuY3Rpb24gWXUoLi4udCkge1xuICAgIHJldHVybiBuZXcgSHUoXCJlbmRBdFwiLCB0LCAvKmJlZm9yZT0qLyAhMSk7XG59XG5cbi8qKiBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGEgYm91bmQgZnJvbSBhIGRvY3VtZW50IG9yIGZpZWxkcyAqLyBmdW5jdGlvbiBYdSh0LCBlLCBuLCBzKSB7XG4gICAgaWYgKG5bMF0gPSBnZXRNb2R1bGFySW5zdGFuY2UoblswXSksIG5bMF0gaW5zdGFuY2VvZiB2dSkgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgaWYgKCFzKSB0aHJvdyBuZXcgaihLLk5PVF9GT1VORCwgYENhbid0IHVzZSBhIERvY3VtZW50U25hcHNob3QgdGhhdCBkb2Vzbid0IGV4aXN0IGZvciAke259KCkuYCk7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgLy8gQmVjYXVzZSBwZW9wbGUgZXhwZWN0IHRvIGNvbnRpbnVlL2VuZCBhIHF1ZXJ5IGF0IHRoZSBleGFjdCBkb2N1bWVudFxuICAgICAgICAvLyBwcm92aWRlZCwgd2UgbmVlZCB0byB1c2UgdGhlIGltcGxpY2l0IHNvcnQgb3JkZXIgcmF0aGVyIHRoYW4gdGhlIGV4cGxpY2l0XG4gICAgICAgIC8vIHNvcnQgb3JkZXIsIGJlY2F1c2UgaXQncyBndWFyYW50ZWVkIHRvIGNvbnRhaW4gdGhlIGRvY3VtZW50IGtleS4gVGhhdCB3YXlcbiAgICAgICAgLy8gdGhlIHBvc2l0aW9uIGJlY29tZXMgdW5hbWJpZ3VvdXMgYW5kIHRoZSBxdWVyeSBjb250aW51ZXMvZW5kcyBleGFjdGx5IGF0XG4gICAgICAgIC8vIHRoZSBwcm92aWRlZCBkb2N1bWVudC4gV2l0aG91dCB0aGUga2V5IChieSB1c2luZyB0aGUgZXhwbGljaXQgc29ydFxuICAgICAgICAvLyBvcmRlcnMpLCBtdWx0aXBsZSBkb2N1bWVudHMgY291bGQgbWF0Y2ggdGhlIHBvc2l0aW9uLCB5aWVsZGluZyBkdXBsaWNhdGVcbiAgICAgICAgLy8gcmVzdWx0cy5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgVGUodCkpIGlmIChuLmZpZWxkLmlzS2V5RmllbGQoKSkgci5wdXNoKGt0KGUsIHMua2V5KSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IHMuZGF0YS5maWVsZChuLmZpZWxkKTtcbiAgICAgICAgICAgIGlmIChUdCh0KSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gWW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgb3IgZW5kIGEgcXVlcnkgdXNpbmcgYSBkb2N1bWVudCBmb3Igd2hpY2ggdGhlIGZpZWxkIFwiJyArIG4uZmllbGQgKyAnXCIgaXMgYW4gdW5jb21taXR0ZWQgc2VydmVyIHRpbWVzdGFtcC4gKFNpbmNlIHRoZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIGlzIHVua25vd24sIHlvdSBjYW5ub3Qgc3RhcnQvZW5kIGEgcXVlcnkgd2l0aCBpdC4pJyk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCAnJHt0fScgKHVzZWQgYXMgdGhlIG9yZGVyQnkpIGRvZXMgbm90IGV4aXN0LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgci5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgb2UociwgaSk7XG4gICAgfVxuICAgIC8qKlxuICogQ29udmVydHMgYSBsaXN0IG9mIGZpZWxkIHZhbHVlcyB0byBhIGBCb3VuZGAgZm9yIHRoZSBnaXZlbiBxdWVyeS5cbiAqLyAodC5fcXVlcnksIHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCBlLCBuWzBdLl9kb2N1bWVudCwgcyk7XG4gICAge1xuICAgICAgICBjb25zdCBpID0gY3UodC5maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICAgICAgLy8gVXNlIGV4cGxpY2l0IG9yZGVyIGJ5J3MgYmVjYXVzZSBpdCBoYXMgdG8gbWF0Y2ggdGhlIHF1ZXJ5IHRoZSB1c2VyIG1hZGVcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0LmV4cGxpY2l0T3JkZXJCeTtcbiAgICAgICAgICAgIGlmIChpLmxlbmd0aCA+IG8ubGVuZ3RoKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBUb28gbWFueSBhcmd1bWVudHMgcHJvdmlkZWQgdG8gJHtzfSgpLiBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgbnVtYmVyIG9mIG9yZGVyQnkoKSBjbGF1c2VzYCk7XG4gICAgICAgICAgICBjb25zdCBjID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IGkubGVuZ3RoOyByKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gaVtyXTtcbiAgICAgICAgICAgICAgICBpZiAob1tyXS5maWVsZC5pc0tleUZpZWxkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgIT0gdHlwZW9mIGEpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIEV4cGVjdGVkIGEgc3RyaW5nIGZvciBkb2N1bWVudCBJRCBpbiAke3N9KCksIGJ1dCBnb3QgYSAke3R5cGVvZiBhfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXBlKHQpICYmIC0xICE9PSBhLmluZGV4T2YoXCIvXCIpKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBhbmQgb3JkZXJpbmcgYnkgRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHBhc3NlZCB0byAke3N9KCkgbXVzdCBiZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgJyR7YX0nIGNvbnRhaW5zIGEgc2xhc2guYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LnBhdGguY2hpbGQoaHQuZnJvbVN0cmluZyhhKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghUHQuaXNEb2N1bWVudEtleShuKSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYW5kIG9yZGVyaW5nIGJ5IEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwYXNzZWQgdG8gJHtzfSgpIG11c3QgcmVzdWx0IGluIGEgdmFsaWQgZG9jdW1lbnQgcGF0aCwgYnV0ICcke259JyBpcyBub3QgYmVjYXVzZSBpdCBjb250YWlucyBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLmApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpID0gbmV3IFB0KG4pO1xuICAgICAgICAgICAgICAgICAgICBjLnB1c2goa3QoZSwgaSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBndShuLCBzLCBhKTtcbiAgICAgICAgICAgICAgICAgICAgYy5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgb2UoYywgcik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBQYXJzZXMgdGhlIGdpdmVuIGBkb2N1bWVudElkVmFsdWVgIGludG8gYSBgUmVmZXJlbmNlVmFsdWVgLCB0aHJvd2luZ1xuICogYXBwcm9wcmlhdGUgZXJyb3JzIGlmIHRoZSB2YWx1ZSBpcyBhbnl0aGluZyBvdGhlciB0aGFuIGEgYERvY3VtZW50UmVmZXJlbmNlYFxuICogb3IgYHN0cmluZ2AsIG9yIGlmIHRoZSBzdHJpbmcgaXMgbWFsZm9ybWVkLlxuICovICh0Ll9xdWVyeSwgdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIGksIGUsIG4sIHMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gWnUodCwgZSwgbikge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiAobiA9IGdldE1vZHVsYXJJbnN0YW5jZShuKSkpIHtcbiAgICAgICAgaWYgKFwiXCIgPT09IG4pIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIHdpdGggRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHZhbGlkIGRvY3VtZW50IElELCBidXQgaXQgd2FzIGFuIGVtcHR5IHN0cmluZy5cIik7XG4gICAgICAgIGlmICghcGUoZSkgJiYgLTEgIT09IG4uaW5kZXhPZihcIi9cIikpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGJ5IEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSBwbGFpbiBkb2N1bWVudCBJRCwgYnV0ICcke259JyBjb250YWlucyBhICcvJyBjaGFyYWN0ZXIuYCk7XG4gICAgICAgIGNvbnN0IHMgPSBlLnBhdGguY2hpbGQoaHQuZnJvbVN0cmluZyhuKSk7XG4gICAgICAgIGlmICghUHQuaXNEb2N1bWVudEtleShzKSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYnkgRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHByb3ZpZGVkIG11c3QgcmVzdWx0IGluIGEgdmFsaWQgZG9jdW1lbnQgcGF0aCwgYnV0ICcke3N9JyBpcyBub3QgYmVjYXVzZSBpdCBoYXMgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cyAoJHtzLmxlbmd0aH0pLmApO1xuICAgICAgICByZXR1cm4ga3QodCwgbmV3IFB0KHMpKTtcbiAgICB9XG4gICAgaWYgKG4gaW5zdGFuY2VvZiBJYSkgcmV0dXJuIGt0KHQsIG4uX2tleSk7XG4gICAgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyB3aXRoIEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBzdHJpbmcgb3IgYSBEb2N1bWVudFJlZmVyZW5jZSwgYnV0IGl0IHdhczogJHttYShuKX0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIHBhc3NlZCBpbnRvIGEgZGlzanVuY3RpdmUgZmlsdGVyIHNhdGlzZmllcyBhbGxcbiAqIGFycmF5IHJlcXVpcmVtZW50cy5cbiAqLyBmdW5jdGlvbiB0aCh0LCBlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHQpIHx8IDAgPT09IHQubGVuZ3RoKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIFF1ZXJ5LiBBIG5vbi1lbXB0eSBhcnJheSBpcyByZXF1aXJlZCBmb3IgJyR7ZS50b1N0cmluZygpfScgZmlsdGVycy5gKTtcbiAgICBpZiAodC5sZW5ndGggPiAxMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gJyR7ZS50b1N0cmluZygpfScgZmlsdGVycyBzdXBwb3J0IGEgbWF4aW11bSBvZiAxMCBlbGVtZW50cyBpbiB0aGUgdmFsdWUgYXJyYXkuYCk7XG59XG5cbmZ1bmN0aW9uIGVoKHQsIGUsIG4pIHtcbiAgICBpZiAoIW4uaXNFcXVhbChlKSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGhhdmUgYSB3aGVyZSBmaWx0ZXIgd2l0aCBhbiBpbmVxdWFsaXR5ICg8LCA8PSwgIT0sIG5vdC1pbiwgPiwgb3IgPj0pIG9uIGZpZWxkICcke2UudG9TdHJpbmcoKX0nIGFuZCBzbyB5b3UgbXVzdCBhbHNvIHVzZSAnJHtlLnRvU3RyaW5nKCl9JyBhcyB5b3VyIGZpcnN0IGFyZ3VtZW50IHRvIG9yZGVyQnkoKSwgYnV0IHlvdXIgZmlyc3Qgb3JkZXJCeSgpIGlzIG9uIGZpZWxkICcke24udG9TdHJpbmcoKX0nIGluc3RlYWQuYCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENvbnZlcnRzIEZpcmVzdG9yZSdzIGludGVybmFsIHR5cGVzIHRvIHRoZSBKYXZhU2NyaXB0IHR5cGVzIHRoYXQgd2UgZXhwb3NlXG4gKiB0byB0aGUgdXNlci5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBuaCB7XG4gICAgY29udmVydFZhbHVlKHQsIGUgPSBcIm5vbmVcIikge1xuICAgICAgICBzd2l0Y2ggKHZ0KHQpKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIE51bGxWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgIGNhc2UgMSAvKiBCb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQuYm9vbGVhblZhbHVlO1xuXG4gICAgICAgICAgY2FzZSAyIC8qIE51bWJlclZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB5dCh0LmludGVnZXJWYWx1ZSB8fCB0LmRvdWJsZVZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgMyAvKiBUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0VGltZXN0YW1wKHQudGltZXN0YW1wVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA0IC8qIFNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRTZXJ2ZXJUaW1lc3RhbXAodCwgZSk7XG5cbiAgICAgICAgICBjYXNlIDUgLyogU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQuc3RyaW5nVmFsdWU7XG5cbiAgICAgICAgICBjYXNlIDYgLyogQmxvYlZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRCeXRlcyhwdCh0LmJ5dGVzVmFsdWUpKTtcblxuICAgICAgICAgIGNhc2UgNyAvKiBSZWZWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0UmVmZXJlbmNlKHQucmVmZXJlbmNlVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA4IC8qIEdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEdlb1BvaW50KHQuZ2VvUG9pbnRWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDkgLyogQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0QXJyYXkodC5hcnJheVZhbHVlLCBlKTtcblxuICAgICAgICAgIGNhc2UgMTAgLyogT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydE9iamVjdCh0Lm1hcFZhbHVlLCBlKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBMKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udmVydE9iamVjdCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB7fTtcbiAgICAgICAgcmV0dXJuIGN0KHQuZmllbGRzLCAoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIG5bdF0gPSB0aGlzLmNvbnZlcnRWYWx1ZShzLCBlKTtcbiAgICAgICAgfSkpLCBuO1xuICAgIH1cbiAgICBjb252ZXJ0R2VvUG9pbnQodCkge1xuICAgICAgICByZXR1cm4gbmV3IHR1KHl0KHQubGF0aXR1ZGUpLCB5dCh0LmxvbmdpdHVkZSkpO1xuICAgIH1cbiAgICBjb252ZXJ0QXJyYXkodCwgZSkge1xuICAgICAgICByZXR1cm4gKHQudmFsdWVzIHx8IFtdKS5tYXAoKHQgPT4gdGhpcy5jb252ZXJ0VmFsdWUodCwgZSkpKTtcbiAgICB9XG4gICAgY29udmVydFNlcnZlclRpbWVzdGFtcCh0LCBlKSB7XG4gICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgIGNhc2UgXCJwcmV2aW91c1wiOlxuICAgICAgICAgICAgY29uc3QgbiA9IEV0KHQpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gbiA/IG51bGwgOiB0aGlzLmNvbnZlcnRWYWx1ZShuLCBlKTtcblxuICAgICAgICAgIGNhc2UgXCJlc3RpbWF0ZVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRpbWVzdGFtcChJdCh0KSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udmVydFRpbWVzdGFtcCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBndCh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBpdChlLnNlY29uZHMsIGUubmFub3MpO1xuICAgIH1cbiAgICBjb252ZXJ0RG9jdW1lbnRLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gaHQuZnJvbVN0cmluZyh0KTtcbiAgICAgICAgQihUcyhuKSk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgaGEobi5nZXQoMSksIG4uZ2V0KDMpKSwgaSA9IG5ldyBQdChuLnBvcEZpcnN0KDUpKTtcbiAgICAgICAgcmV0dXJuIHMuaXNFcXVhbChlKSB8fCBcbiAgICAgICAgLy8gVE9ETyhiLzY0MTMwMjAyKTogU29tZWhvdyBzdXBwb3J0IGZvcmVpZ24gcmVmZXJlbmNlcy5cbiAgICAgICAgTyhgRG9jdW1lbnQgJHtpfSBjb250YWlucyBhIGRvY3VtZW50IHJlZmVyZW5jZSB3aXRoaW4gYSBkaWZmZXJlbnQgZGF0YWJhc2UgKCR7cy5wcm9qZWN0SWR9LyR7cy5kYXRhYmFzZX0pIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQuIEl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhIHJlZmVyZW5jZSBpbiB0aGUgY3VycmVudCBkYXRhYmFzZSAoJHtlLnByb2plY3RJZH0vJHtlLmRhdGFiYXNlfSkgaW5zdGVhZC5gKSwgXG4gICAgICAgIGk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb252ZXJ0cyBjdXN0b20gbW9kZWwgb2JqZWN0IG9mIHR5cGUgVCBpbnRvIGBEb2N1bWVudERhdGFgIGJ5IGFwcGx5aW5nIHRoZVxuICogY29udmVydGVyIGlmIGl0IGV4aXN0cy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgd2hlbiBjb252ZXJ0aW5nIHVzZXIgb2JqZWN0cyB0byBgRG9jdW1lbnREYXRhYFxuICogYmVjYXVzZSB3ZSB3YW50IHRvIHByb3ZpZGUgdGhlIHVzZXIgd2l0aCBhIG1vcmUgc3BlY2lmaWMgZXJyb3IgbWVzc2FnZSBpZlxuICogdGhlaXIgYHNldCgpYCBvciBmYWlscyBkdWUgdG8gaW52YWxpZCBkYXRhIG9yaWdpbmF0aW5nIGZyb20gYSBgdG9GaXJlc3RvcmUoKWBcbiAqIGNhbGwuXG4gKi8gZnVuY3Rpb24gc2godCwgZSwgbikge1xuICAgIGxldCBzO1xuICAgIC8vIENhc3QgdG8gYGFueWAgaW4gb3JkZXIgdG8gc2F0aXNmeSB0aGUgdW5pb24gdHlwZSBjb25zdHJhaW50IG9uXG4gICAgLy8gdG9GaXJlc3RvcmUoKS5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHJldHVybiBzID0gdCA/IG4gJiYgKG4ubWVyZ2UgfHwgbi5tZXJnZUZpZWxkcykgPyB0LnRvRmlyZXN0b3JlKGUsIG4pIDogdC50b0ZpcmVzdG9yZShlKSA6IGUsIFxuICAgIHM7XG59XG5cbmNsYXNzIGloIGV4dGVuZHMgbmgge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICBjb252ZXJ0Qnl0ZXModCkge1xuICAgICAgICByZXR1cm4gbmV3IFhhKHQpO1xuICAgIH1cbiAgICBjb252ZXJ0UmVmZXJlbmNlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29udmVydERvY3VtZW50S2V5KHQsIHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBJYSh0aGlzLmZpcmVzdG9yZSwgLyogY29udmVydGVyPSAqLyBudWxsLCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgd3JpdGUgYmF0Y2gsIHVzZWQgdG8gcGVyZm9ybSBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gKlxuICogQSBgV3JpdGVCYXRjaGAgb2JqZWN0IGNhbiBiZSBhY3F1aXJlZCBieSBjYWxsaW5nIHtAbGluayB3cml0ZUJhdGNofS4gSXRcbiAqIHByb3ZpZGVzIG1ldGhvZHMgZm9yIGFkZGluZyB3cml0ZXMgdG8gdGhlIHdyaXRlIGJhdGNoLiBOb25lIG9mIHRoZSB3cml0ZXNcbiAqIHdpbGwgYmUgY29tbWl0dGVkIChvciB2aXNpYmxlIGxvY2FsbHkpIHVudGlsIHtAbGluayBXcml0ZUJhdGNoLmNvbW1pdH0gaXNcbiAqIGNhbGxlZC5cbiAqLyBjbGFzcyByaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX2NvbW1pdEhhbmRsZXIgPSBlLCB0aGlzLl9tdXRhdGlvbnMgPSBbXSwgdGhpcy5fY29tbWl0dGVkID0gITEsIFxuICAgICAgICB0aGlzLl9kYXRhUmVhZGVyID0gY3UodCk7XG4gICAgfVxuICAgIHNldCh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBzID0gb2godCwgdGhpcy5fZmlyZXN0b3JlKSwgaSA9IHNoKHMuY29udmVydGVyLCBlLCBuKSwgciA9IGF1KHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC5zZXRcIiwgcy5fa2V5LCBpLCBudWxsICE9PSBzLmNvbnZlcnRlciwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMucHVzaChyLnRvTXV0YXRpb24ocy5fa2V5LCBHZS5ub25lKCkpKSwgdGhpcztcbiAgICB9XG4gICAgdXBkYXRlKHQsIGUsIG4sIC4uLnMpIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCk7XG4gICAgICAgIGNvbnN0IGkgPSBvaCh0LCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiByID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpIHx8IGUgaW5zdGFuY2VvZiBKYSA/IG11KHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC51cGRhdGVcIiwgaS5fa2V5LCBlLCBuLCBzKSA6IF91KHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC51cGRhdGVcIiwgaS5fa2V5LCBlKSwgXG4gICAgICAgIHRoaXMuX211dGF0aW9ucy5wdXNoKHIudG9NdXRhdGlvbihpLl9rZXksIEdlLmV4aXN0cyghMCkpKSwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgZGVsZXRlZC5cbiAgICAgKiBAcmV0dXJucyBUaGlzIGBXcml0ZUJhdGNoYCBpbnN0YW5jZS4gVXNlZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgZSA9IG9oKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMgPSB0aGlzLl9tdXRhdGlvbnMuY29uY2F0KG5ldyBjbihlLl9rZXksIEdlLm5vbmUoKSkpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21taXRzIGFsbCBvZiB0aGUgd3JpdGVzIGluIHRoaXMgd3JpdGUgYmF0Y2ggYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gICAgICpcbiAgICAgKiBUaGUgcmVzdWx0IG9mIHRoZXNlIHdyaXRlcyB3aWxsIG9ubHkgYmUgcmVmbGVjdGVkIGluIGRvY3VtZW50IHJlYWRzIHRoYXRcbiAgICAgKiBvY2N1ciBhZnRlciB0aGUgcmV0dXJuZWQgcHJvbWlzZSByZXNvbHZlcy4gSWYgdGhlIGNsaWVudCBpcyBvZmZsaW5lLCB0aGVcbiAgICAgKiB3cml0ZSBmYWlscy4gSWYgeW91IHdvdWxkIGxpa2UgdG8gc2VlIGxvY2FsIG1vZGlmaWNhdGlvbnMgb3IgYnVmZmVyIHdyaXRlc1xuICAgICAqIHVudGlsIHRoZSBjbGllbnQgaXMgb25saW5lLCB1c2UgdGhlIGZ1bGwgRmlyZXN0b3JlIFNESy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIG9uY2UgYWxsIG9mIHRoZSB3cml0ZXMgaW4gdGhlIGJhdGNoIGhhdmUgYmVlblxuICAgICAqIHN1Y2Nlc3NmdWxseSB3cml0dGVuIHRvIHRoZSBiYWNrZW5kIGFzIGFuIGF0b21pYyB1bml0IChub3RlIHRoYXQgaXQgd29uJ3RcbiAgICAgKiByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAgICAgKi8gICAgY29tbWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCksIHRoaXMuX2NvbW1pdHRlZCA9ICEwLCB0aGlzLl9tdXRhdGlvbnMubGVuZ3RoID4gMCA/IHRoaXMuX2NvbW1pdEhhbmRsZXIodGhpcy5fbXV0YXRpb25zKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBfdmVyaWZ5Tm90Q29tbWl0dGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY29tbWl0dGVkKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiQSB3cml0ZSBiYXRjaCBjYW4gbm8gbG9uZ2VyIGJlIHVzZWQgYWZ0ZXIgY29tbWl0KCkgaGFzIGJlZW4gY2FsbGVkLlwiKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG9oKHQsIGUpIHtcbiAgICBpZiAoKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCkpLmZpcmVzdG9yZSAhPT0gZSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlByb3ZpZGVkIGRvY3VtZW50IHJlZmVyZW5jZSBpcyBmcm9tIGEgZGlmZmVyZW50IEZpcmVzdG9yZSBpbnN0YW5jZS5cIik7XG4gICAgcmV0dXJuIHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUT0RPKG1yc2NobWlkdCkgQ29uc2lkZXIgdXNpbmcgYEJhc2VUcmFuc2FjdGlvbmAgYXMgdGhlIGJhc2UgY2xhc3MgaW4gdGhlXG4vLyBsZWdhY3kgU0RLLlxuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byBhIHRyYW5zYWN0aW9uLlxuICpcbiAqIFRoZSBgVHJhbnNhY3Rpb25gIG9iamVjdCBwYXNzZWQgdG8gYSB0cmFuc2FjdGlvbidzIGB1cGRhdGVGdW5jdGlvbmAgcHJvdmlkZXNcbiAqIHRoZSBtZXRob2RzIHRvIHJlYWQgYW5kIHdyaXRlIGRhdGEgd2l0aGluIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0LiBTZWVcbiAqIHtAbGluayBydW5UcmFuc2FjdGlvbn0uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAuXG4gKlxuICogTm90ZTogYGdldERvYygpYCBhdHRlbXB0cyB0byBwcm92aWRlIHVwLXRvLWRhdGUgZGF0YSB3aGVuIHBvc3NpYmxlIGJ5IHdhaXRpbmdcbiAqIGZvciBkYXRhIGZyb20gdGhlIHNlcnZlciwgYnV0IGl0IG1heSByZXR1cm4gY2FjaGVkIGRhdGEgb3IgZmFpbCBpZiB5b3UgYXJlXG4gKiBvZmZsaW5lIGFuZCB0aGUgc2VydmVyIGNhbm5vdCBiZSByZWFjaGVkLiBUbyBzcGVjaWZ5IHRoaXMgYmVoYXZpb3IsIGludm9rZVxuICoge0BsaW5rIGdldERvY0Zyb21DYWNoZX0gb3Ige0BsaW5rIGdldERvY0Zyb21TZXJ2ZXJ9LlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBUaGUgcmVmZXJlbmNlIG9mIHRoZSBkb2N1bWVudCB0byBmZXRjaC5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovXG5mdW5jdGlvbiBjaCh0KSB7XG4gICAgdCA9IGdhKHQsIElhKTtcbiAgICBjb25zdCBlID0gZ2EodC5maXJlc3RvcmUsIGthKTtcbiAgICByZXR1cm4gbmEoRmEoZSksIHQuX2tleSkudGhlbigobiA9PiBFaChlLCB0LCBuKSkpO1xufVxuXG5jbGFzcyBhaCBleHRlbmRzIG5oIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgY29udmVydEJ5dGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBYYSh0KTtcbiAgICB9XG4gICAgY29udmVydFJlZmVyZW5jZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleSh0LCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XG4gICAgICAgIHJldHVybiBuZXcgSWEodGhpcy5maXJlc3RvcmUsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgZnJvbSBjYWNoZS5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIGRvY3VtZW50IGlzIG5vdCBjdXJyZW50bHkgY2FjaGVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi8gZnVuY3Rpb24gdWgodCkge1xuICAgIHQgPSBnYSh0LCBJYSk7XG4gICAgY29uc3QgZSA9IGdhKHQuZmlyZXN0b3JlLCBrYSksIG4gPSBGYShlKSwgcyA9IG5ldyBhaChlKTtcbiAgICByZXR1cm4gZWEobiwgdC5fa2V5KS50aGVuKChuID0+IG5ldyBDdShlLCBzLCB0Ll9rZXksIG4sIG5ldyBEdShudWxsICE9PSBuICYmIG4uaGFzTG9jYWxNdXRhdGlvbnMsIFxuICAgIC8qIGZyb21DYWNoZT0gKi8gITApLCB0LmNvbnZlcnRlcikpKTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGZyb20gdGhlIHNlcnZlci5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIG5ldHdvcmsgaXMgbm90IGF2YWlsYWJsZS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovIGZ1bmN0aW9uIGhoKHQpIHtcbiAgICB0ID0gZ2EodCwgSWEpO1xuICAgIGNvbnN0IGUgPSBnYSh0LmZpcmVzdG9yZSwga2EpO1xuICAgIHJldHVybiBuYShGYShlKSwgdC5fa2V5LCB7XG4gICAgICAgIHNvdXJjZTogXCJzZXJ2ZXJcIlxuICAgIH0pLnRoZW4oKG4gPT4gRWgoZSwgdCwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAuXG4gKlxuICogTm90ZTogYGdldERvY3MoKWAgYXR0ZW1wdHMgdG8gcHJvdmlkZSB1cC10by1kYXRlIGRhdGEgd2hlbiBwb3NzaWJsZSBieVxuICogd2FpdGluZyBmb3IgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCBpdCBtYXkgcmV0dXJuIGNhY2hlZCBkYXRhIG9yIGZhaWwgaWZcbiAqIHlvdSBhcmUgb2ZmbGluZSBhbmQgdGhlIHNlcnZlciBjYW5ub3QgYmUgcmVhY2hlZC4gVG8gc3BlY2lmeSB0aGlzIGJlaGF2aW9yLFxuICogaW52b2tlIHtAbGluayBnZXREb2NzRnJvbUNhY2hlfSBvciB7QGxpbmsgZ2V0RG9jc0Zyb21TZXJ2ZXJ9LlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBsaCh0KSB7XG4gICAgdCA9IGdhKHQsIEFhKTtcbiAgICBjb25zdCBlID0gZ2EodC5maXJlc3RvcmUsIGthKSwgbiA9IEZhKGUpLCBzID0gbmV3IGFoKGUpO1xuICAgIHJldHVybiBPdSh0Ll9xdWVyeSksIGlhKG4sIHQuX3F1ZXJ5KS50aGVuKChuID0+IG5ldyB4dShlLCBzLCB0LCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIGNhY2hlLlxuICogUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgZG9jdW1lbnQgaXMgbm90IGN1cnJlbnRseSBjYWNoZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIGZoKHQpIHtcbiAgICB0ID0gZ2EodCwgQWEpO1xuICAgIGNvbnN0IGUgPSBnYSh0LmZpcmVzdG9yZSwga2EpLCBuID0gRmEoZSksIHMgPSBuZXcgYWgoZSk7XG4gICAgcmV0dXJuIHNhKG4sIHQuX3F1ZXJ5KS50aGVuKChuID0+IG5ldyB4dShlLCBzLCB0LCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIHRoZVxuICogc2VydmVyLiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBuZXR3b3JrIGlzIG5vdCBhdmFpbGFibGUuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIGRoKHQpIHtcbiAgICB0ID0gZ2EodCwgQWEpO1xuICAgIGNvbnN0IGUgPSBnYSh0LmZpcmVzdG9yZSwga2EpLCBuID0gRmEoZSksIHMgPSBuZXcgYWgoZSk7XG4gICAgcmV0dXJuIGlhKG4sIHQuX3F1ZXJ5LCB7XG4gICAgICAgIHNvdXJjZTogXCJzZXJ2ZXJcIlxuICAgIH0pLnRoZW4oKG4gPT4gbmV3IHh1KGUsIHMsIHQsIG4pKSk7XG59XG5cbmZ1bmN0aW9uIHdoKHQsIGUsIG4pIHtcbiAgICB0ID0gZ2EodCwgSWEpO1xuICAgIGNvbnN0IHMgPSBnYSh0LmZpcmVzdG9yZSwga2EpLCBpID0gc2godC5jb252ZXJ0ZXIsIGUsIG4pO1xuICAgIHJldHVybiBUaChzLCBbIGF1KGN1KHMpLCBcInNldERvY1wiLCB0Ll9rZXksIGksIG51bGwgIT09IHQuY29udmVydGVyLCBuKS50b011dGF0aW9uKHQuX2tleSwgR2Uubm9uZSgpKSBdKTtcbn1cblxuZnVuY3Rpb24gX2godCwgZSwgbiwgLi4ucykge1xuICAgIHQgPSBnYSh0LCBJYSk7XG4gICAgY29uc3QgaSA9IGdhKHQuZmlyZXN0b3JlLCBrYSksIHIgPSBjdShpKTtcbiAgICBsZXQgbztcbiAgICBvID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKFxuICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpIHx8IGUgaW5zdGFuY2VvZiBKYSA/IG11KHIsIFwidXBkYXRlRG9jXCIsIHQuX2tleSwgZSwgbiwgcykgOiBfdShyLCBcInVwZGF0ZURvY1wiLCB0Ll9rZXksIGUpO1xuICAgIHJldHVybiBUaChpLCBbIG8udG9NdXRhdGlvbih0Ll9rZXksIEdlLmV4aXN0cyghMCkpIF0pO1xufVxuXG4vKipcbiAqIERlbGV0ZXMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBzcGVjaWZpZWQgYERvY3VtZW50UmVmZXJlbmNlYC5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGRlbGV0ZS5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSByZXNvbHZlZCBvbmNlIHRoZSBkb2N1bWVudCBoYXMgYmVlbiBzdWNjZXNzZnVsbHlcbiAqIGRlbGV0ZWQgZnJvbSB0aGUgYmFja2VuZCAobm90ZSB0aGF0IGl0IHdvbid0IHJlc29sdmUgd2hpbGUgeW91J3JlIG9mZmxpbmUpLlxuICovIGZ1bmN0aW9uIG1oKHQpIHtcbiAgICByZXR1cm4gVGgoZ2EodC5maXJlc3RvcmUsIGthKSwgWyBuZXcgY24odC5fa2V5LCBHZS5ub25lKCkpIF0pO1xufVxuXG4vKipcbiAqIEFkZCBhIG5ldyBkb2N1bWVudCB0byBzcGVjaWZpZWQgYENvbGxlY3Rpb25SZWZlcmVuY2VgIHdpdGggdGhlIGdpdmVuIGRhdGEsXG4gKiBhc3NpZ25pbmcgaXQgYSBkb2N1bWVudCBJRCBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBBIHJlZmVyZW5jZSB0byB0aGUgY29sbGVjdGlvbiB0byBhZGQgdGhpcyBkb2N1bWVudCB0by5cbiAqIEBwYXJhbSBkYXRhIC0gQW4gT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGRhdGEgZm9yIHRoZSBuZXcgZG9jdW1lbnQuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50UmVmZXJlbmNlYCBwb2ludGluZyB0byB0aGVcbiAqIG5ld2x5IGNyZWF0ZWQgZG9jdW1lbnQgYWZ0ZXIgaXQgaGFzIGJlZW4gd3JpdHRlbiB0byB0aGUgYmFja2VuZCAoTm90ZSB0aGF0IGl0XG4gKiB3b24ndCByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAqLyBmdW5jdGlvbiBnaCh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGdhKHQuZmlyZXN0b3JlLCBrYSksIHMgPSB2YSh0KSwgaSA9IHNoKHQuY29udmVydGVyLCBlKTtcbiAgICByZXR1cm4gVGgobiwgWyBhdShjdSh0LmZpcmVzdG9yZSksIFwiYWRkRG9jXCIsIHMuX2tleSwgaSwgbnVsbCAhPT0gdC5jb252ZXJ0ZXIsIHt9KS50b011dGF0aW9uKHMuX2tleSwgR2UuZXhpc3RzKCExKSkgXSkudGhlbigoKCkgPT4gcykpO1xufVxuXG5mdW5jdGlvbiB5aCh0LCAuLi5lKSB7XG4gICAgdmFyIG4sIHMsIGk7XG4gICAgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KTtcbiAgICBsZXQgciA9IHtcbiAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogITFcbiAgICB9LCBvID0gMDtcbiAgICBcIm9iamVjdFwiICE9IHR5cGVvZiBlW29dIHx8IENhKGVbb10pIHx8IChyID0gZVtvXSwgbysrKTtcbiAgICBjb25zdCBjID0ge1xuICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiByLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXNcbiAgICB9O1xuICAgIGlmIChDYShlW29dKSkge1xuICAgICAgICBjb25zdCB0ID0gZVtvXTtcbiAgICAgICAgZVtvXSA9IG51bGwgPT09IChuID0gdC5uZXh0KSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmJpbmQodCksIGVbbyArIDFdID0gbnVsbCA9PT0gKHMgPSB0LmVycm9yKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmJpbmQodCksIFxuICAgICAgICBlW28gKyAyXSA9IG51bGwgPT09IChpID0gdC5jb21wbGV0ZSkgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5iaW5kKHQpO1xuICAgIH1cbiAgICBsZXQgYSwgdSwgaDtcbiAgICBpZiAodCBpbnN0YW5jZW9mIElhKSB1ID0gZ2EodC5maXJlc3RvcmUsIGthKSwgaCA9IHdlKHQuX2tleS5wYXRoKSwgYSA9IHtcbiAgICAgICAgbmV4dDogbiA9PiB7XG4gICAgICAgICAgICBlW29dICYmIGVbb10oRWgodSwgdCwgbikpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZVtvICsgMV0sXG4gICAgICAgIGNvbXBsZXRlOiBlW28gKyAyXVxuICAgIH07IGVsc2Uge1xuICAgICAgICBjb25zdCBuID0gZ2EodCwgQWEpO1xuICAgICAgICB1ID0gZ2Eobi5maXJlc3RvcmUsIGthKSwgaCA9IG4uX3F1ZXJ5O1xuICAgICAgICBjb25zdCBzID0gbmV3IGFoKHUpO1xuICAgICAgICBhID0ge1xuICAgICAgICAgICAgbmV4dDogdCA9PiB7XG4gICAgICAgICAgICAgICAgZVtvXSAmJiBlW29dKG5ldyB4dSh1LCBzLCBuLCB0KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGVbbyArIDFdLFxuICAgICAgICAgICAgY29tcGxldGU6IGVbbyArIDJdXG4gICAgICAgIH0sIE91KHQuX3F1ZXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBMYyhzKSwgciA9IG5ldyBRbyhlLCBpLCBuKTtcbiAgICAgICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBCbyhhd2FpdCBYYyh0KSwgcikpKSwgKCkgPT4ge1xuICAgICAgICAgICAgaS5lYygpLCB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gVW8oYXdhaXQgWGModCksIHIpKSk7XG4gICAgICAgIH07XG4gICAgfShGYSh1KSwgaCwgYywgYSk7XG59XG5cbmZ1bmN0aW9uIHBoKHQsIGUpIHtcbiAgICByZXR1cm4gcmEoRmEodCA9IGdhKHQsIGthKSksIENhKGUpID8gZSA6IHtcbiAgICAgICAgbmV4dDogZVxuICAgIH0pO1xufVxuXG4vKipcbiAqIExvY2FsbHkgd3JpdGVzIGBtdXRhdGlvbnNgIG9uIHRoZSBhc3luYyBxdWV1ZS5cbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIFRoKHQsIGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IFE7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gcmMoYXdhaXQgWWModCksIGUsIG4pKSksIG4ucHJvbWlzZTtcbiAgICB9KEZhKHQpLCBlKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHtAbGluayBWaWV3U25hcHNob3R9IHRoYXQgY29udGFpbnMgdGhlIHNpbmdsZSBkb2N1bWVudCBzcGVjaWZpZWQgYnkgYHJlZmBcbiAqIHRvIGEge0BsaW5rIERvY3VtZW50U25hcHNob3R9LlxuICovIGZ1bmN0aW9uIEVoKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbi5kb2NzLmdldChlLl9rZXkpLCBpID0gbmV3IGFoKHQpO1xuICAgIHJldHVybiBuZXcgQ3UodCwgaSwgZS5fa2V5LCBzLCBuZXcgRHUobi5oYXNQZW5kaW5nV3JpdGVzLCBuLmZyb21DYWNoZSksIGUuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBUaGUgYFRyYW5zYWN0aW9uYCBvYmplY3QgcGFzc2VkIHRvIGEgdHJhbnNhY3Rpb24ncyBgdXBkYXRlRnVuY3Rpb25gIHByb3ZpZGVzXG4gKiB0aGUgbWV0aG9kcyB0byByZWFkIGFuZCB3cml0ZSBkYXRhIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dC4gU2VlXG4gKiB7QGxpbmsgcnVuVHJhbnNhY3Rpb259LlxuICovIGNsYXNzIEloIGV4dGVuZHMgY2xhc3Mge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl90cmFuc2FjdGlvbiA9IGUsIHRoaXMuX2RhdGFSZWFkZXIgPSBjdSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVyZW5jZWQgYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgcmVhZC5cbiAgICAgKiBAcmV0dXJucyBBIGBEb2N1bWVudFNuYXBzaG90YCB3aXRoIHRoZSByZWFkIGRhdGEuXG4gICAgICovICAgIGdldCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBvaCh0LCB0aGlzLl9maXJlc3RvcmUpLCBuID0gbmV3IGloKHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5sb29rdXAoWyBlLl9rZXkgXSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICBpZiAoIXQgfHwgMSAhPT0gdC5sZW5ndGgpIHJldHVybiBMKCk7XG4gICAgICAgICAgICBjb25zdCBzID0gdFswXTtcbiAgICAgICAgICAgIGlmIChzLmlzRm91bmREb2N1bWVudCgpKSByZXR1cm4gbmV3IHZ1KHRoaXMuX2ZpcmVzdG9yZSwgbiwgcy5rZXksIHMsIGUuY29udmVydGVyKTtcbiAgICAgICAgICAgIGlmIChzLmlzTm9Eb2N1bWVudCgpKSByZXR1cm4gbmV3IHZ1KHRoaXMuX2ZpcmVzdG9yZSwgbiwgZS5fa2V5LCBudWxsLCBlLmNvbnZlcnRlcik7XG4gICAgICAgICAgICB0aHJvdyBMKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2V0KHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IG9oKHQsIHRoaXMuX2ZpcmVzdG9yZSksIGkgPSBzaChzLmNvbnZlcnRlciwgZSwgbiksIHIgPSBhdSh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnNldFwiLCBzLl9rZXksIGksIG51bGwgIT09IHMuY29udmVydGVyLCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLnNldChzLl9rZXksIHIpLCB0aGlzO1xuICAgIH1cbiAgICB1cGRhdGUodCwgZSwgbiwgLi4ucykge1xuICAgICAgICBjb25zdCBpID0gb2godCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIGxldCByO1xuICAgICAgICByZXR1cm4gciA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSB8fCBlIGluc3RhbmNlb2YgSmEgPyBtdSh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnVwZGF0ZVwiLCBpLl9rZXksIGUsIG4sIHMpIDogX3UodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi51cGRhdGVcIiwgaS5fa2V5LCBlKSwgXG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uLnVwZGF0ZShpLl9rZXksIHIpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFRyYW5zYWN0aW9uYCBpbnN0YW5jZS4gVXNlZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gb2godCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLmRlbGV0ZShlLl9rZXkpLCB0aGlzO1xuICAgIH1cbn0ge1xuICAgIC8vIFRoaXMgY2xhc3MgaW1wbGVtZW50cyB0aGUgc2FtZSBsb2dpYyBhcyB0aGUgVHJhbnNhY3Rpb24gQVBJIGluIHRoZSBMaXRlIFNES1xuICAgIC8vIGJ1dCBpcyBzdWJjbGFzc2VkIGluIG9yZGVyIHRvIHJldHVybiBpdHMgb3duIERvY3VtZW50U25hcHNob3QgdHlwZXMuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUpLCB0aGlzLl9maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlZCBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSByZWFkLlxuICAgICAqIEByZXR1cm5zIEEgYERvY3VtZW50U25hcHNob3RgIHdpdGggdGhlIHJlYWQgZGF0YS5cbiAgICAgKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG9oKHQsIHRoaXMuX2ZpcmVzdG9yZSksIG4gPSBuZXcgYWgodGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldCh0KS50aGVuKCh0ID0+IG5ldyBDdSh0aGlzLl9maXJlc3RvcmUsIG4sIGUuX2tleSwgdC5fZG9jdW1lbnQsIG5ldyBEdShcbiAgICAgICAgLyogaGFzUGVuZGluZ1dyaXRlcz0gKi8gITEsIFxuICAgICAgICAvKiBmcm9tQ2FjaGU9ICovICExKSwgZS5jb252ZXJ0ZXIpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBnaXZlbiBgdXBkYXRlRnVuY3Rpb25gIGFuZCB0aGVuIGF0dGVtcHRzIHRvIGNvbW1pdCB0aGUgY2hhbmdlc1xuICogYXBwbGllZCB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uLiBJZiBhbnkgZG9jdW1lbnQgcmVhZCB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uXG4gKiBoYXMgY2hhbmdlZCwgQ2xvdWQgRmlyZXN0b3JlIHJldHJpZXMgdGhlIGB1cGRhdGVGdW5jdGlvbmAuIElmIGl0IGZhaWxzIHRvXG4gKiBjb21taXQgYWZ0ZXIgNSBhdHRlbXB0cywgdGhlIHRyYW5zYWN0aW9uIGZhaWxzLlxuICpcbiAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB3cml0ZXMgYWxsb3dlZCBpbiBhIHNpbmdsZSB0cmFuc2FjdGlvbiBpcyA1MDAuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBGaXJlc3RvcmUgZGF0YWJhc2UgdG8gcnVuIHRoaXNcbiAqIHRyYW5zYWN0aW9uIGFnYWluc3QuXG4gKiBAcGFyYW0gdXBkYXRlRnVuY3Rpb24gLSBUaGUgZnVuY3Rpb24gdG8gZXhlY3V0ZSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uXG4gKiBjb250ZXh0LlxuICogQHJldHVybnMgSWYgdGhlIHRyYW5zYWN0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkgb3Igd2FzIGV4cGxpY2l0bHkgYWJvcnRlZFxuICogKHRoZSBgdXBkYXRlRnVuY3Rpb25gIHJldHVybmVkIGEgZmFpbGVkIHByb21pc2UpLCB0aGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGVcbiAqIGB1cGRhdGVGdW5jdGlvbiBgaXMgcmV0dXJuZWQgaGVyZS4gT3RoZXJ3aXNlLCBpZiB0aGUgdHJhbnNhY3Rpb24gZmFpbGVkLCBhXG4gKiByZWplY3RlZCBwcm9taXNlIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgZmFpbHVyZSBlcnJvciBpcyByZXR1cm5lZC5cbiAqLyBmdW5jdGlvbiBBaCh0LCBlKSB7XG4gICAgcmV0dXJuIG9hKEZhKHQgPSBnYSh0LCBrYSkpLCAobiA9PiBlKG5ldyBJaCh0LCBuKSkpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIHNlbnRpbmVsIGZvciB1c2Ugd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IG9yXG4gKiB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IHdpdGggYHttZXJnZTogdHJ1ZX1gIHRvIG1hcmsgYSBmaWVsZCBmb3IgZGVsZXRpb24uXG4gKi8gZnVuY3Rpb24gUmgoKSB7XG4gICAgcmV0dXJuIG5ldyB1dShcImRlbGV0ZUZpZWxkXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzZW50aW5lbCB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRvXG4gKiBpbmNsdWRlIGEgc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAgaW4gdGhlIHdyaXR0ZW4gZGF0YS5cbiAqLyBmdW5jdGlvbiBiaCgpIHtcbiAgICByZXR1cm4gbmV3IGx1KFwic2VydmVyVGltZXN0YW1wXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGlua1xuICogQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byB1bmlvbiB0aGUgZ2l2ZW4gZWxlbWVudHMgd2l0aCBhbnkgYXJyYXlcbiAqIHZhbHVlIHRoYXQgYWxyZWFkeSBleGlzdHMgb24gdGhlIHNlcnZlci4gRWFjaCBzcGVjaWZpZWQgZWxlbWVudCB0aGF0IGRvZXNuJ3RcbiAqIGFscmVhZHkgZXhpc3QgaW4gdGhlIGFycmF5IHdpbGwgYmUgYWRkZWQgdG8gdGhlIGVuZC4gSWYgdGhlIGZpZWxkIGJlaW5nXG4gKiBtb2RpZmllZCBpcyBub3QgYWxyZWFkeSBhbiBhcnJheSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggYW4gYXJyYXlcbiAqIGNvbnRhaW5pbmcgZXhhY3RseSB0aGUgc3BlY2lmaWVkIGVsZW1lbnRzLlxuICpcbiAqIEBwYXJhbSBlbGVtZW50cyAtIFRoZSBlbGVtZW50cyB0byB1bmlvbiBpbnRvIHRoZSBhcnJheS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYC5cbiAqLyBmdW5jdGlvbiBQaCguLi50KSB7XG4gICAgLy8gTk9URTogV2UgZG9uJ3QgYWN0dWFsbHkgcGFyc2UgdGhlIGRhdGEgdW50aWwgaXQncyB1c2VkIGluIHNldCgpIG9yXG4gICAgLy8gdXBkYXRlKCkgc2luY2Ugd2UnZCBuZWVkIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UgdG8gZG8gdGhpcy5cbiAgICByZXR1cm4gbmV3IGZ1KFwiYXJyYXlVbmlvblwiLCB0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIChzZXREb2M6MSl9IG9yIHtAbGlua1xuICogdXBkYXRlRG9jOjF9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byByZW1vdmUgdGhlIGdpdmVuIGVsZW1lbnRzIGZyb20gYW55XG4gKiBhcnJheSB2YWx1ZSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIuIEFsbCBpbnN0YW5jZXMgb2YgZWFjaCBlbGVtZW50XG4gKiBzcGVjaWZpZWQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGFycmF5LiBJZiB0aGUgZmllbGQgYmVpbmcgbW9kaWZpZWQgaXMgbm90XG4gKiBhbHJlYWR5IGFuIGFycmF5IGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCBhbiBlbXB0eSBhcnJheS5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudHMgLSBUaGUgZWxlbWVudHMgdG8gcmVtb3ZlIGZyb20gdGhlIGFycmF5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24gdmgoLi4udCkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxuICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlJ2QgbmVlZCB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIGRvIHRoaXMuXG4gICAgcmV0dXJuIG5ldyBkdShcImFycmF5UmVtb3ZlXCIsIHQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGlua1xuICogQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byBpbmNyZW1lbnQgdGhlIGZpZWxkJ3MgY3VycmVudCB2YWx1ZSBieVxuICogdGhlIGdpdmVuIHZhbHVlLlxuICpcbiAqIElmIGVpdGhlciB0aGUgb3BlcmFuZCBvciB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSB1c2VzIGZsb2F0aW5nIHBvaW50XG4gKiBwcmVjaXNpb24sIGFsbCBhcml0aG1ldGljIGZvbGxvd3MgSUVFRSA3NTQgc2VtYW50aWNzLiBJZiBib3RoIHZhbHVlcyBhcmVcbiAqIGludGVnZXJzLCB2YWx1ZXMgb3V0c2lkZSBvZiBKYXZhU2NyaXB0J3Mgc2FmZSBudW1iZXIgcmFuZ2VcbiAqIChgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJgIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmApIGFyZSBhbHNvIHN1YmplY3QgdG9cbiAqIHByZWNpc2lvbiBsb3NzLiBGdXJ0aGVybW9yZSwgb25jZSBwcm9jZXNzZWQgYnkgdGhlIEZpcmVzdG9yZSBiYWNrZW5kLCBhbGxcbiAqIGludGVnZXIgb3BlcmF0aW9ucyBhcmUgY2FwcGVkIGJldHdlZW4gLTJeNjMgYW5kIDJeNjMtMS5cbiAqXG4gKiBJZiB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSBpcyBub3Qgb2YgdHlwZSBgbnVtYmVyYCwgb3IgaWYgdGhlIGZpZWxkIGRvZXMgbm90XG4gKiB5ZXQgZXhpc3QsIHRoZSB0cmFuc2Zvcm1hdGlvbiBzZXRzIHRoZSBmaWVsZCB0byB0aGUgZ2l2ZW4gdmFsdWUuXG4gKlxuICogQHBhcmFtIG4gLSBUaGUgdmFsdWUgdG8gaW5jcmVtZW50IGJ5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24gVmgodCkge1xuICAgIHJldHVybiBuZXcgd3UoXCJpbmNyZW1lbnRcIiwgdCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENyZWF0ZXMgYSB3cml0ZSBiYXRjaCwgdXNlZCBmb3IgcGVyZm9ybWluZyBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGVcbiAqIGF0b21pYyBvcGVyYXRpb24uIFRoZSBtYXhpbXVtIG51bWJlciBvZiB3cml0ZXMgYWxsb3dlZCBpbiBhIHNpbmdsZSB7QGxpbmsgV3JpdGVCYXRjaH1cbiAqIGlzIDUwMC5cbiAqXG4gKiBVbmxpa2UgdHJhbnNhY3Rpb25zLCB3cml0ZSBiYXRjaGVzIGFyZSBwZXJzaXN0ZWQgb2ZmbGluZSBhbmQgdGhlcmVmb3JlIGFyZVxuICogcHJlZmVyYWJsZSB3aGVuIHlvdSBkb24ndCBuZWVkIHRvIGNvbmRpdGlvbiB5b3VyIHdyaXRlcyBvbiByZWFkIGRhdGEuXG4gKlxuICogQHJldHVybnMgQSB7QGxpbmsgV3JpdGVCYXRjaH0gdGhhdCBjYW4gYmUgdXNlZCB0byBhdG9taWNhbGx5IGV4ZWN1dGUgbXVsdGlwbGVcbiAqIHdyaXRlcy5cbiAqLyBmdW5jdGlvbiBTaCh0KSB7XG4gICAgcmV0dXJuIEZhKHQgPSBnYSh0LCBrYSkpLCBuZXcgcmgodCwgKGUgPT4gVGgodCwgZSkpKTtcbn1cblxuLyoqXG4gKiBDbG91ZCBGaXJlc3RvcmVcbiAqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqLyAhZnVuY3Rpb24odCwgZSA9ICEwKSB7XG4gICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgQyA9IHQ7XG4gICAgfShTREtfVkVSU0lPTiksIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KFwiZmlyZXN0b3JlXCIsICgodCwge29wdGlvbnM6IG59KSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSB0LmdldFByb3ZpZGVyKFwiYXBwXCIpLmdldEltbWVkaWF0ZSgpLCBpID0gbmV3IGthKHMsIG5ldyBIKHQuZ2V0UHJvdmlkZXIoXCJhdXRoLWludGVybmFsXCIpKSk7XG4gICAgICAgIHJldHVybiBuID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICB1c2VGZXRjaFN0cmVhbXM6IGVcbiAgICAgICAgfSwgbiksIGkuX3NldFNldHRpbmdzKG4pLCBpO1xuICAgIH0pLCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykpLCByZWdpc3RlclZlcnNpb24oUywgXCIzLjIuMFwiLCB0KSwgXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cbiAgICByZWdpc3RlclZlcnNpb24oUywgXCIzLjIuMFwiLCBcImVzbTIwMTdcIik7XG59KCk7XG5cbmV4cG9ydCB7IG5oIGFzIEFic3RyYWN0VXNlckRhdGFXcml0ZXIsIFhhIGFzIEJ5dGVzLCB4YSBhcyBDQUNIRV9TSVpFX1VOTElNSVRFRCwgUmEgYXMgQ29sbGVjdGlvblJlZmVyZW5jZSwgSWEgYXMgRG9jdW1lbnRSZWZlcmVuY2UsIEN1IGFzIERvY3VtZW50U25hcHNob3QsIEphIGFzIEZpZWxkUGF0aCwgWmEgYXMgRmllbGRWYWx1ZSwga2EgYXMgRmlyZXN0b3JlLCBqIGFzIEZpcmVzdG9yZUVycm9yLCB0dSBhcyBHZW9Qb2ludCwgTmEgYXMgTG9hZEJ1bmRsZVRhc2ssIEFhIGFzIFF1ZXJ5LCBGdSBhcyBRdWVyeUNvbnN0cmFpbnQsIE51IGFzIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCwgeHUgYXMgUXVlcnlTbmFwc2hvdCwgRHUgYXMgU25hcHNob3RNZXRhZGF0YSwgaXQgYXMgVGltZXN0YW1wLCBJaCBhcyBUcmFuc2FjdGlvbiwgcmggYXMgV3JpdGVCYXRjaCwgaGEgYXMgX0RhdGFiYXNlSWQsIFB0IGFzIF9Eb2N1bWVudEtleSwgRyBhcyBfRW1wdHlDcmVkZW50aWFsc1Byb3ZpZGVyLCBmdCBhcyBfRmllbGRQYXRoLCBnYSBhcyBfY2FzdCwgVSBhcyBfZGVidWdBc3NlcnQsIHd0IGFzIF9pc0Jhc2U2NEF2YWlsYWJsZSwgRiBhcyBfbG9nV2FybiwgZGEgYXMgX3ZhbGlkYXRlSXNOb3RVc2VkVG9nZXRoZXIsIGdoIGFzIGFkZERvYywgdmggYXMgYXJyYXlSZW1vdmUsIFBoIGFzIGFycmF5VW5pb24sIHFhIGFzIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UsIGJhIGFzIGNvbGxlY3Rpb24sIFBhIGFzIGNvbGxlY3Rpb25Hcm91cCwgRWEgYXMgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yLCBtaCBhcyBkZWxldGVEb2MsIFJoIGFzIGRlbGV0ZUZpZWxkLCBRYSBhcyBkaXNhYmxlTmV0d29yaywgdmEgYXMgZG9jLCBZYSBhcyBkb2N1bWVudElkLCBMYSBhcyBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSwgQmEgYXMgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSwgamEgYXMgZW5hYmxlTmV0d29yaywgWXUgYXMgZW5kQXQsIEp1IGFzIGVuZEJlZm9yZSwgRmEgYXMgZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCwgVGggYXMgZXhlY3V0ZVdyaXRlLCBjaCBhcyBnZXREb2MsIHVoIGFzIGdldERvY0Zyb21DYWNoZSwgaGggYXMgZ2V0RG9jRnJvbVNlcnZlciwgbGggYXMgZ2V0RG9jcywgZmggYXMgZ2V0RG9jc0Zyb21DYWNoZSwgZGggYXMgZ2V0RG9jc0Zyb21TZXJ2ZXIsIE9hIGFzIGdldEZpcmVzdG9yZSwgVmggYXMgaW5jcmVtZW50LCAkYSBhcyBpbml0aWFsaXplRmlyZXN0b3JlLCBqdSBhcyBsaW1pdCwgUXUgYXMgbGltaXRUb0xhc3QsIEdhIGFzIGxvYWRCdW5kbGUsIHphIGFzIG5hbWVkUXVlcnksIHloIGFzIG9uU25hcHNob3QsIHBoIGFzIG9uU25hcHNob3RzSW5TeW5jLCBxdSBhcyBvcmRlckJ5LCBNdSBhcyBxdWVyeSwgU2EgYXMgcXVlcnlFcXVhbCwgVmEgYXMgcmVmRXF1YWwsIEFoIGFzIHJ1blRyYW5zYWN0aW9uLCBiaCBhcyBzZXJ2ZXJUaW1lc3RhbXAsIHdoIGFzIHNldERvYywgayBhcyBzZXRMb2dMZXZlbCwgJHUgYXMgc25hcHNob3RFcXVhbCwgenUgYXMgc3RhcnRBZnRlciwgR3UgYXMgc3RhcnRBdCwgV2EgYXMgdGVybWluYXRlLCBfaCBhcyB1cGRhdGVEb2MsIEthIGFzIHdhaXRGb3JQZW5kaW5nV3JpdGVzLCBCdSBhcyB3aGVyZSwgU2ggYXMgd3JpdGVCYXRjaCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9pbmRleC5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2luZGV4LmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9ob21lLmNzc1wiO1xuICAgICAgXG4gICAgICBcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybSA9IHN0eWxlVGFnVHJhbnNmb3JtRm47XG5vcHRpb25zLnNldEF0dHJpYnV0ZXMgPSBzZXRBdHRyaWJ1dGVzO1xuXG4gICAgICBvcHRpb25zLmluc2VydCA9IGluc2VydEZuLmJpbmQobnVsbCwgXCJoZWFkXCIpO1xuICAgIFxub3B0aW9ucy5kb21BUEkgPSBkb21BUEk7XG5vcHRpb25zLmluc2VydFN0eWxlRWxlbWVudCA9IGluc2VydFN0eWxlRWxlbWVudDtcblxudmFyIHVwZGF0ZSA9IEFQSShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCAqIGZyb20gXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vaG9tZS5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vaXRlbS5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2l0ZW0uY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIiwiXG4gICAgICBpbXBvcnQgQVBJIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCI7XG4gICAgICBpbXBvcnQgZG9tQVBJIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRGbiBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanNcIjtcbiAgICAgIGltcG9ydCBzZXRBdHRyaWJ1dGVzIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0U3R5bGVFbGVtZW50IGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0U3R5bGVFbGVtZW50LmpzXCI7XG4gICAgICBpbXBvcnQgc3R5bGVUYWdUcmFuc2Zvcm1GbiBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzXCI7XG4gICAgICBpbXBvcnQgY29udGVudCwgKiBhcyBuYW1lZEV4cG9ydCBmcm9tIFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3Byb2plY3QuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9wcm9qZWN0LmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9mb3Jtcy5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2Zvcm1zLmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgc3R5bGVzSW5ET00gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRPTS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRPTVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4QnlJZGVudGlmaWVyID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdLFxuICAgICAgc3VwcG9ydHM6IGl0ZW1bNF0sXG4gICAgICBsYXllcjogaXRlbVs1XVxuICAgIH07XG5cbiAgICBpZiAoaW5kZXhCeUlkZW50aWZpZXIgIT09IC0xKSB7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleEJ5SWRlbnRpZmllcl0ucmVmZXJlbmNlcysrO1xuICAgICAgc3R5bGVzSW5ET01baW5kZXhCeUlkZW50aWZpZXJdLnVwZGF0ZXIob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHVwZGF0ZXIgPSBhZGRFbGVtZW50U3R5bGUob2JqLCBvcHRpb25zKTtcbiAgICAgIG9wdGlvbnMuYnlJbmRleCA9IGk7XG4gICAgICBzdHlsZXNJbkRPTS5zcGxpY2UoaSwgMCwge1xuICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxuICAgICAgICB1cGRhdGVyOiB1cGRhdGVyLFxuICAgICAgICByZWZlcmVuY2VzOiAxXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG5cbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xufVxuXG5mdW5jdGlvbiBhZGRFbGVtZW50U3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBhcGkgPSBvcHRpb25zLmRvbUFQSShvcHRpb25zKTtcbiAgYXBpLnVwZGF0ZShvYmopO1xuXG4gIHZhciB1cGRhdGVyID0gZnVuY3Rpb24gdXBkYXRlcihuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwICYmIG5ld09iai5zdXBwb3J0cyA9PT0gb2JqLnN1cHBvcnRzICYmIG5ld09iai5sYXllciA9PT0gb2JqLmxheWVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgYXBpLnVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBhcGkucmVtb3ZlKCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB1cGRhdGVyO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5ET01bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRE9NW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRE9NLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBtZW1vID0ge307XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuZnVuY3Rpb24gZ2V0VGFyZ2V0KHRhcmdldCkge1xuICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgfVxuXG4gIHJldHVybiBtZW1vW3RhcmdldF07XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG5mdW5jdGlvbiBpbnNlcnRCeVNlbGVjdG9yKGluc2VydCwgc3R5bGUpIHtcbiAgdmFyIHRhcmdldCA9IGdldFRhcmdldChpbnNlcnQpO1xuXG4gIGlmICghdGFyZ2V0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgfVxuXG4gIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW5zZXJ0QnlTZWxlY3RvcjsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgb3B0aW9ucy5zZXRBdHRyaWJ1dGVzKGVsZW1lbnQsIG9wdGlvbnMuYXR0cmlidXRlcyk7XG4gIG9wdGlvbnMuaW5zZXJ0KGVsZW1lbnQsIG9wdGlvbnMub3B0aW9ucyk7XG4gIHJldHVybiBlbGVtZW50O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluc2VydFN0eWxlRWxlbWVudDsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBzZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMoc3R5bGVFbGVtZW50KSB7XG4gIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gXCJ1bmRlZmluZWRcIiA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcblxuICBpZiAobm9uY2UpIHtcbiAgICBzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgbm9uY2UpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBcIlwiO1xuXG4gIGlmIChvYmouc3VwcG9ydHMpIHtcbiAgICBjc3MgKz0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChvYmouc3VwcG9ydHMsIFwiKSB7XCIpO1xuICB9XG5cbiAgaWYgKG9iai5tZWRpYSkge1xuICAgIGNzcyArPSBcIkBtZWRpYSBcIi5jb25jYXQob2JqLm1lZGlhLCBcIiB7XCIpO1xuICB9XG5cbiAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBvYmoubGF5ZXIgIT09IFwidW5kZWZpbmVkXCI7XG5cbiAgaWYgKG5lZWRMYXllcikge1xuICAgIGNzcyArPSBcIkBsYXllclwiLmNvbmNhdChvYmoubGF5ZXIubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChvYmoubGF5ZXIpIDogXCJcIiwgXCIge1wiKTtcbiAgfVxuXG4gIGNzcyArPSBvYmouY3NzO1xuXG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cblxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG5cbiAgaWYgKG9iai5zdXBwb3J0cykge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuXG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChzb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgb3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlRWxlbWVudC5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3R5bGVFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50KTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbmZ1bmN0aW9uIGRvbUFQSShvcHRpb25zKSB7XG4gIHZhciBzdHlsZUVsZW1lbnQgPSBvcHRpb25zLmluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgcmV0dXJuIHtcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShvYmopIHtcbiAgICAgIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRvbUFQSTsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBzdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCkge1xuICBpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdHlsZVRhZ1RyYW5zZm9ybTsiLCIvKiBlc2xpbnQtZGlzYWJsZSBsaW5lYnJlYWstc3R5bGUgKi9cclxuXHJcbmNvbnN0IGNvbmZpZyA9IHtcclxuICBhcGlLZXk6ICdBSXphU3lBclpuOEdFZEpLd29ORWZoNWw0dU5YVWhkOFhGdTQ4NzgnLFxyXG4gIGF1dGhEb21haW46ICdvZGluLXByb2plY3QtdG9kby5maXJlYmFzZWFwcC5jb20nLFxyXG4gIHByb2plY3RJZDogJ29kaW4tcHJvamVjdC10b2RvJyxcclxuICBzdG9yYWdlQnVja2V0OiAnb2Rpbi1wcm9qZWN0LXRvZG8uYXBwc3BvdC5jb20nLFxyXG4gIG1lc3NhZ2luZ1NlbmRlcklkOiAnNDIxMDU0MTQ4MjY3JyxcclxuICBhcHBJZDogJzE6NDIxMDU0MTQ4MjY3OndlYjo5NTliZDJmYzAxNjA1YjYyZWM5MWVlJyxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbmZpZztcclxuIiwiLyogZXNsaW50LWRpc2FibGUgbGluZWJyZWFrLXN0eWxlICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBsdXNwbHVzICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGVvbC1sYXN0ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVzZS1iZWZvcmUtZGVmaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG9iamVjdC1jdXJseS1uZXdsaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXNoYWRvdyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tY3ljbGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25hbWVkICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnQgKi9cclxuXHJcbmltcG9ydCB7IHNob3dJdGVtcywgc2hvd0hvbWUsIHN3aXRjaFByb2plY3RzVG9kb3MgfSBmcm9tICcuL3ZpZXcvY29tcG9uZW50cy9ob21lJztcclxuaW1wb3J0IHsgc2hvd0FkZEl0ZW0gfSBmcm9tICcuL3ZpZXcvZm9ybXMvYWRkSXRlbSc7XHJcbmltcG9ydCB7IHByb2plY3RzIH0gZnJvbSAnLi9tb2RlbC9maXJlc3RvcmUnO1xyXG5pbXBvcnQgJy4vaW5kZXguY3NzJztcclxuLy8gaW1wb3J0IHBvcHVsYXRlIGZyb20gJy4vb3RoZXJzL3BvcHVsYXRlJztcclxuLy8gcG9wdWxhdGUoJ3RvZG9zJyk7XHJcblxyXG5zaG93SG9tZSgncHJvamVjdCcsICdkdWVEYXRlJywgdHJ1ZSk7XHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob21lLWNvbnRyb2xzLXN3aXRjaCcpXHJcbiAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3dpdGNoUHJvamVjdHNUb2Rvcyk7XHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob21lLWNvbnRyb2xzLWFkZCcpXHJcbiAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd0FkZEl0ZW0pO1xyXG5cclxuc2hvd0l0ZW1zKHByb2plY3RzLmdldFByb2plY3RzKCksICdwcm9qZWN0JywgJ2R1ZURhdGUnLCB0cnVlKTtcclxuIiwiLyogZXNsaW50LWRpc2FibGUgbGluZWJyZWFrLXN0eWxlICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBsdXNwbHVzICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGVvbC1sYXN0ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVzZS1iZWZvcmUtZGVmaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG9iamVjdC1jdXJseS1uZXdsaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXNoYWRvdyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tY3ljbGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cclxuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xyXG5cclxuaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCB9IGZyb20gJ2ZpcmViYXNlL2FwcCc7XHJcbmltcG9ydCB7XHJcbiAgYWRkRG9jLCBnZXRGaXJlc3RvcmUsIGNvbGxlY3Rpb24sIGRlbGV0ZURvYywgZG9jLFxyXG4gIGdldERvY3MsIHF1ZXJ5LCBzZXREb2MsIHVwZGF0ZURvYywgd3JpdGVCYXRjaCxcclxufSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xyXG5pbXBvcnQgZmlyZWJhc2VDb25maWcgZnJvbSAnLi4vY29uZmlnL2ZpcmViYXNlJztcclxuaW1wb3J0IHsgUHJvamVjdHMgfSBmcm9tICcuL3Byb2plY3RzJztcclxuaW1wb3J0IHsgYXN5bmNGb3JFYWNoIH0gZnJvbSAnLi91dGlscydcclxuXHJcblxyXG5pbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcclxuY29uc3QgZGIgPSBnZXRGaXJlc3RvcmUoKTtcclxuY29uc3QgY29sID0gJ3RvZG9zJztcclxuXHJcbmNvbnN0IGdldFByb2plY3RzID0gYXN5bmMgKCkgPT4ge1xyXG4gIGNvbnN0IHByb2plY3RzID0gYXdhaXQgZmV0Y2hQcm9qZWN0cygpO1xyXG5cclxuICBhd2FpdCBhc3luY0ZvckVhY2gocHJvamVjdHMsIGFzeW5jIChwcm9qZWN0KSA9PiB7XHJcbiAgICBjb25zdCB0b2RvcyA9IGF3YWl0IGZldGNoUHJvamVjdFRvZG9zKHByb2plY3QuaWQsIHByb2plY3QudGl0bGUpO1xyXG4gICAgcHJvamVjdC50b2RvcyA9IHRvZG9zO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gcHJvamVjdHM7XHJcbn07XHJcblxyXG5jb25zdCBnZXRUb2RvcyA9IGFzeW5jICgpID0+IHtcclxuICBjb25zdCBwcm9qZWN0cyA9IGF3YWl0IGZldGNoUHJvamVjdHMoKTtcclxuICBjb25zdCB0b2RvcyA9IFtdO1xyXG5cclxuICBhd2FpdCBhc3luY0ZvckVhY2gocHJvamVjdHMsIGFzeW5jIChwcm9qZWN0KSA9PiB7XHJcbiAgICBjb25zdCBwcm9qZWN0VG9kb3MgPSBhd2FpdCBmZXRjaFByb2plY3RUb2Rvcyhwcm9qZWN0LmlkLCBwcm9qZWN0LnRpdGxlKTtcclxuICAgIHByb2plY3RUb2Rvcy5mb3JFYWNoKCh0b2RvKSA9PiB0b2Rvcy5wdXNoKHsgLi4udG9kbyB9KSk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiB0b2RvcztcclxufTtcclxuXHJcbmNvbnN0IGZldGNoUHJvamVjdFRvZG9zID0gYXN5bmMgKHByb2plY3RJZCwgcHJvamVjdFRpdGxlKSA9PiB7XHJcbiAgY29uc3QgY29sUmVmID0gY29sbGVjdGlvbihkYiwgYCR7Y29sfS8ke3Byb2plY3RJZH0vdG9kb3NgKTtcclxuICBjb25zdCB0b2RvcyA9IFtdO1xyXG4gIGF3YWl0IGdldERvY3MoY29sUmVmKS50aGVuKChzbmFwc2hvdCkgPT4ge1xyXG4gICAgc25hcHNob3QuZG9jcy5mb3JFYWNoKChkb2MpID0+IHtcclxuICAgICAgdG9kb3MucHVzaCh7IHR5cGU6ICd0b2RvJywgcHJvamVjdElkLCBwcm9qZWN0VGl0bGUsIGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIHRvZG9zO1xyXG59O1xyXG5cclxuY29uc3QgZmV0Y2hQcm9qZWN0cyA9IGFzeW5jICgpID0+IHtcclxuICBjb25zdCBjb2xSZWYgPSBjb2xsZWN0aW9uKGRiLCBjb2wpO1xyXG4gIGNvbnN0IHByb2plY3RzID0gW107XHJcbiAgYXdhaXQgZ2V0RG9jcyhjb2xSZWYpLnRoZW4oKHNuYXBzaG90KSA9PiB7XHJcbiAgICBzbmFwc2hvdC5mb3JFYWNoKChkb2MpID0+IHtcclxuICAgICAgcHJvamVjdHMucHVzaCh7IHR5cGU6ICdwcm9qZWN0JywgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSwgdG9kb3M6IFtdIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBwcm9qZWN0cztcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBkZWxldGVUb2RvRnJvbUZpcmVzdG9yZSA9IGFzeW5jIChwcm9qZWN0SWQsIHRvZG9JZCkgPT4ge1xyXG4gIGF3YWl0IGRlbGV0ZURvYyhkb2MoZGIsIGNvbCwgcHJvamVjdElkLCAndG9kb3MnLCB0b2RvSWQpKTtcclxuXHJcbiAgcmV0dXJuIHRvZG9JZDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBkZWxldGVQcm9qZWN0RnJvbUZpcmVzdG9yZSA9IGFzeW5jIChwcm9qZWN0SWQpID0+IHtcclxuICBjb25zdCBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgY29sLCBwcm9qZWN0SWQsICd0b2RvcycpKTtcclxuICBjb25zdCB0b2RvcyA9IGF3YWl0IGdldERvY3MocSk7XHJcbiAgdG9kb3MuZm9yRWFjaChhc3luYyAodG9kbykgPT4ge1xyXG4gICAgYXdhaXQgZGVsZXRlRG9jKGRvYyhkYiwgY29sLCBwcm9qZWN0SWQsICd0b2RvcycsIHRvZG8uaWQpKTtcclxuICB9KTtcclxuICBhd2FpdCBkZWxldGVEb2MoZG9jKGRiLCBjb2wsIHByb2plY3RJZCkpO1xyXG5cclxuICByZXR1cm4gcHJvamVjdElkO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGFkZEl0ZW1Ub0ZpcmVzdG9yZSA9IGFzeW5jICh0eXBlLCBwcm9qZWN0SWQgPSBudWxsLCBwcm9wcykgPT4ge1xyXG4gIGNvbnN0IGNvbFJlZiA9ICh0eXBlID09PSAncHJvamVjdCcpID8gY29sbGVjdGlvbihkYiwgY29sKSA6IGNvbGxlY3Rpb24oZGIsIGNvbCwgcHJvamVjdElkLCAndG9kb3MnKTtcclxuICBjb25zdCBkb2NSZWYgPSBhd2FpdCBhZGREb2MoY29sUmVmLCB7IC4uLnByb3BzIH0pO1xyXG5cclxuICByZXR1cm4gZG9jUmVmLmlkO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldFByb2plY3RQcm9wSW5GaXJlc3RvcmUgPSBhc3luYyAoaWQsIHByb3ApID0+IHtcclxuICBjb25zdCBwcm9qZWN0ID0gZG9jKGRiLCBjb2wsIGlkKTtcclxuXHJcbiAgYXdhaXQgdXBkYXRlRG9jKHByb2plY3QsIHByb3ApO1xyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZXRQcm9qZWN0UHJvcHNJbkZpcmVzdG9yZSA9IGFzeW5jIChpZCwgcHJvcHMpID0+IHtcclxuICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xyXG5cclxuICBjb25zdCBwcm9qZWN0ID0gZG9jKGRiLCBjb2wsIGlkKTtcclxuICBiYXRjaC51cGRhdGUocHJvamVjdCwgcHJvcHMpO1xyXG5cclxuICBhd2FpdCBiYXRjaC5jb21taXQoKTtcclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc2V0VG9kb1Byb3BJbkZpcmVzdG9yZSA9IGFzeW5jIChwcm9qZWN0SWQsIHRvZG9JZCwgcHJvcCkgPT4ge1xyXG4gIGNvbnN0IHRvZG8gPSBkb2MoZGIsIGNvbCwgcHJvamVjdElkLCAndG9kb3MnLCB0b2RvSWQpO1xyXG5cclxuICBhd2FpdCB1cGRhdGVEb2ModG9kbywgcHJvcCk7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldFRvZG9Qcm9wc0luRmlyZXN0b3JlID0gYXN5bmMgKHByb2plY3RJZCwgdG9kb0lkLCBwcm9wcykgPT4ge1xyXG4gIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XHJcblxyXG4gIGNvbnN0IHRvZG8gPSBkb2MoZGIsIGNvbCwgcHJvamVjdElkLCAndG9kb3MnLCB0b2RvSWQpO1xyXG4gIGJhdGNoLnVwZGF0ZSh0b2RvLCBwcm9wcyk7XHJcblxyXG4gIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZXRUb2Rvc1Byb3BJbkZpcmVzdG9yZSA9IGFzeW5jIChwcm9qZWN0SWQsIHByb3ApID0+IHtcclxuICBjb25zdCB0b2RvcyA9IGNvbGxlY3Rpb24oZGIsIGNvbCwgcHJvamVjdElkLCAndG9kb3MnKTtcclxuXHJcbiAgY29uc3QgZG9jcyA9IGF3YWl0IGdldERvY3ModG9kb3MpO1xyXG4gIGF3YWl0IGFzeW5jRm9yRWFjaChkb2NzLCBhc3luYyAoZG9jKSA9PiBhd2FpdCB1cGRhdGVEb2MoZG9jLCBwcm9wKSk7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGFkZFRvZG9XaXRoSWRUb0ZpcmVzdG9yZSA9IGFzeW5jIChwcm9qZWN0SWQsIHRvZG9JZCwgcHJvcHMpID0+IHtcclxuXHJcbiAgYXdhaXQgc2V0RG9jKGRvYyhkYiwgY29sLCBwcm9qZWN0SWQsICd0b2RvcycsIHRvZG9JZCksIHsgLi4ucHJvcHMgfSk7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2plY3RzID0gUHJvamVjdHMoLi4uYXdhaXQgZ2V0UHJvamVjdHMoKSk7IiwiLyogZXNsaW50LWRpc2FibGUgbGluZWJyZWFrLXN0eWxlICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBsdXNwbHVzICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGVvbC1sYXN0ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVzZS1iZWZvcmUtZGVmaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG9iamVjdC1jdXJseS1uZXdsaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXNoYWRvdyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tY3ljbGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgZGVmYXVsdC1jYXNlICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnQgKi9cclxuXHJcbmltcG9ydCB7IHByb2plY3RzIH0gZnJvbSAnLi9maXJlc3RvcmUnO1xyXG5pbXBvcnQgeyBhZGp1c3RIZWlnaHQgfSBmcm9tICcuLi92aWV3L3V0aWxzJztcclxuXHJcbmNvbnN0IHNob3dBbGVydEluRm9ybSA9IChmb3JtLCBlbGVtZW50LCB0ZXh0KSA9PiB7XHJcbiAgZWxlbWVudCA9IGZvcm0uZWxlbWVudHMubmFtZWRJdGVtKGVsZW1lbnQpO1xyXG4gIGNvbnN0IGFsZXJ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgYWxlcnQuaW5uZXJUZXh0ID0gdGV4dDtcclxuICBmb3JtLmluc2VydEJlZm9yZShhbGVydCwgZWxlbWVudCk7XHJcbiAgYWRqdXN0SGVpZ2h0KGFsZXJ0LCAnZm9ybScpO1xyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrVGl0bGUgPSAodGl0bGVzLCB0aXRsZSkgPT4gIXRpdGxlcy5pbmNsdWRlcyh0aXRsZSk7XHJcblxyXG5jb25zdCB2YWxpZGF0ZUZvcm1BZGRUb2RvVGl0bGUgPSAocHJvamVjdElkLCBlKSA9PiB7XHJcbiAgY29uc3QgdGl0bGVzID0gcHJvamVjdHMuZ2V0VG9kb3NQcm9wKHByb2plY3RJZCwgJ3RpdGxlJyk7XHJcbiAgaWYgKHRpdGxlcy5sZW5ndGggPT09IDApIHJldHVybiB0cnVlO1xyXG5cclxuICBjb25zdCB2YWxpZCA9IGNoZWNrVGl0bGUodGl0bGVzLCBlLnRhcmdldC50aXRsZS52YWx1ZSk7XHJcbiAgaWYgKHZhbGlkKSByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgc2hvd0FsZXJ0SW5Gb3JtKGUudGFyZ2V0LCAndGl0bGUnLCAnd3JvbmcgdGl0bGUnKTtcclxuXHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tUb2RvRHVlRGF0ZSA9IChwcm9qZWN0RHVlRGF0ZSwgVG9kb0R1ZURhdGUpID0+IHByb2plY3REdWVEYXRlID49IFRvZG9EdWVEYXRlO1xyXG5cclxuY29uc3QgdmFsaWRhdGVGb3JtQWRkVG9kb0RhdGUgPSAocHJvamVjdElkLCBlKSA9PiB7XHJcbiAgY29uc3QgcHJvamVjdER1ZURhdGUgPSBwcm9qZWN0cy5nZXRQcm9qZWN0UHJvcChwcm9qZWN0SWQsICdkdWVEYXRlJyk7XHJcblxyXG4gIGNvbnN0IHZhbGlkID0gY2hlY2tUb2RvRHVlRGF0ZShwcm9qZWN0RHVlRGF0ZS50b0RhdGUoKSwgbmV3IERhdGUoZS50YXJnZXQuZGF0ZS52YWx1ZSkpO1xyXG4gIGlmICh2YWxpZCkgcmV0dXJuIHRydWU7XHJcblxyXG4gIHNob3dBbGVydEluRm9ybShlLnRhcmdldCwgJ2RhdGUnLCAnd3JvbmcgZGF0ZScpO1xyXG5cclxuICByZXR1cm4gZmFsc2U7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGVGb3JtQWRkVG9kbyA9IChwcm9qZWN0SWQsIGUpID0+IHtcclxuICBjb25zdCBjaGVja3MgPSBbXTtcclxuXHJcbiAgY2hlY2tzLnB1c2godmFsaWRhdGVGb3JtQWRkVG9kb1RpdGxlKHByb2plY3RJZCwgZSkpO1xyXG4gIGNoZWNrcy5wdXNoKHZhbGlkYXRlRm9ybUFkZFRvZG9EYXRlKHByb2plY3RJZCwgZSkpO1xyXG5cclxuICByZXR1cm4gIWNoZWNrcy5pbmNsdWRlcyhmYWxzZSk7XHJcbn07XHJcblxyXG5jb25zdCB2YWxpZGF0ZUZvcm1BZGRQcm9qZWN0ID0gKGUpID0+IHtcclxuICBjb25zdCB0aXRsZXMgPSBwcm9qZWN0cy5nZXRQcm9qZWN0c1Byb3AoJ3RpdGxlJyk7XHJcblxyXG4gIGNvbnN0IHZhbGlkID0gY2hlY2tUaXRsZSh0aXRsZXMsIGUudGFyZ2V0LnRpdGxlLnZhbHVlKTtcclxuICBpZiAodmFsaWQpIHJldHVybiB0cnVlO1xyXG5cclxuICBzaG93QWxlcnRJbkZvcm0oZS50YXJnZXQsICd0aXRsZScsICd3cm9uZyB0aXRsZScpO1xyXG5cclxuICByZXR1cm4gZmFsc2U7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGVGb3JtID0gKHR5cGUsIGUpID0+IHtcclxuICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgIGNhc2UgJ2FkZC10b2RvLWhvbWUnOiB7XHJcbiAgICAgIGNvbnN0IHByb2plY3RJZCA9IHByb2plY3RzLmdldFByb2plY3RJZEJ5UHJvcCgndGl0bGUnLCBlLnRhcmdldC5wcm9qZWN0LnZhbHVlKTtcclxuICAgICAgcmV0dXJuIHZhbGlkYXRlRm9ybUFkZFRvZG8ocHJvamVjdElkLCBlKTtcclxuICAgIH1cclxuICAgIGNhc2UgJ2FkZC1wcm9qZWN0LWhvbWUnOiB7IHJldHVybiB2YWxpZGF0ZUZvcm1BZGRQcm9qZWN0KGUpOyB9XHJcbiAgICBjYXNlICdhZGQtdG9kby1wcm9qZWN0Jzoge1xyXG4gICAgICBjb25zdCBwcm9qZWN0SWQgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNsb3Nlc3QoJ2RpdltjbGFzc349cHJvamVjdF0nKS5pZDtcclxuICAgICAgcmV0dXJuIHZhbGlkYXRlRm9ybUFkZFRvZG8ocHJvamVjdElkLCBlKTtcclxuICAgIH1cclxuICAgIGRlZmF1bHQ6IGNvbnNvbGUubG9nKGB2YWxpZGF0ZUZvcm06IHNvcnJ5LCB3ZSBhcmUgb3V0IG9mICR7dHlwZX0uYCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZmFsc2U7XHJcbn07IiwiLyogZXNsaW50LWRpc2FibGUgbGluZWJyZWFrLXN0eWxlICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBsdXNwbHVzICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGVvbC1sYXN0ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVzZS1iZWZvcmUtZGVmaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG9iamVjdC1jdXJseS1uZXdsaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXNoYWRvdyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tY3ljbGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25hbWVkICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnQgKi9cclxuLyogZXNsaW50LWRpc2FibGUgZGVmYXVsdC1jYXNlICovXHJcblxyXG5pbXBvcnQgeyBkZWxldGVQcm9qZWN0IH0gZnJvbSAnLi9wcm9qZWN0JztcclxuaW1wb3J0IHsgZGVsZXRlVG9kbyB9IGZyb20gJy4vdG9kbyc7XHJcbmltcG9ydCB7XHJcbiAgaGlkZUFkZEVkaXRJdGVtRm9ybUZyb21Ib21lLCBoaWRlQWRkRWRpdFRvZG9Gb3JtRnJvbVByb2plY3QsXHJcbn0gZnJvbSAnLi4vdmlldy9mb3Jtcy91dGlscyc7XHJcbmltcG9ydCB7IGFkZEl0ZW1Ub0ZpcmVzdG9yZSwgcHJvamVjdHMgfSBmcm9tICcuL2ZpcmVzdG9yZSc7XHJcbmltcG9ydCB7IGFkZEl0ZW1Ub0l0ZW1zTGlzdCB9IGZyb20gJy4uL3ZpZXcvY29tcG9uZW50cy9pdGVtJztcclxuXHJcbmV4cG9ydCBjb25zdCBhZGRJdGVtID0gYXN5bmMgKHR5cGUsIGl0ZW0sIHByb2plY3RJZCA9IG51bGwpID0+IHtcclxuICBjb25zdCBpdGVtVHlwZSA9IHR5cGUubWF0Y2goLyg/PD0tKVxcdysoPz0tKS8pWzBdO1xyXG4gIGNvbnN0IGl0ZW1JZCA9IGF3YWl0IGFkZEl0ZW1Ub0ZpcmVzdG9yZShpdGVtVHlwZSwgcHJvamVjdElkLCBpdGVtKTtcclxuXHJcbiAgaXRlbSA9IHsgdHlwZSwgaWQ6IGl0ZW1JZCwgLi4uaXRlbSB9O1xyXG4gIGFkZEl0ZW1Ub0l0ZW1zTGlzdChpdGVtKTtcclxuXHJcbiAgaXRlbS50eXBlID0gaXRlbVR5cGU7XHJcbiAgc3dpdGNoIChpdGVtVHlwZSkge1xyXG4gICAgY2FzZSAncHJvamVjdCc6IHsgcHJvamVjdHMuYWRkUHJvamVjdChpdGVtKTsgYnJlYWs7IH1cclxuICAgIGNhc2UgJ3RvZG8nOiB7XHJcbiAgICAgIHByb2plY3RzLmFkZFRvZG8oXHJcbiAgICAgICAgcHJvamVjdElkLCB7IHByb2plY3RUaXRsZTogcHJvamVjdHMuZ2V0UHJvamVjdFByb3AocHJvamVjdElkLCAndGl0bGUnKSwgLi4uaXRlbSB9LFxyXG4gICAgICApO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGRlZmF1bHQ6IGNvbnNvbGUubG9nKGBBZGRJdGVtOiBzb3JyeSwgd2UgYXJlIG91dCBvZiAke2l0ZW1UeXBlfS5gKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBpdGVtSWQ7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZGVsZXRlSXRlbSA9IGFzeW5jIChlKSA9PiB7XHJcbiAgY29uc3QgeyBpZCwgdHlwZSB9ID0gZS50YXJnZXQ7XHJcblxyXG4gIHN3aXRjaCAodHlwZSkge1xyXG4gICAgY2FzZSAncHJvamVjdCc6IHsgYXdhaXQgZGVsZXRlUHJvamVjdChpZCk7IGJyZWFrOyB9XHJcbiAgICBjYXNlICd0b2RvJzogY2FzZSAncHJvamVjdC10b2RvJzoge1xyXG4gICAgICBjb25zdCB7IHByb2plY3RJZCB9ID0gZS50YXJnZXQ7IGF3YWl0IGRlbGV0ZVRvZG8ocHJvamVjdElkLCBpZCk7IGJyZWFrO1xyXG4gICAgfVxyXG4gICAgZGVmYXVsdDogY29uc29sZS5sb2coYGRlbGV0ZUl0ZW06IHNvcnJ5LCB3ZSBhcmUgb3V0IG9mICR7dHlwZX0uYCk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2l0ZW1pZD0ke2lkfV1gKTtcclxuICBpZiAoZm9ybSAhPT0gbnVsbCkge1xyXG4gICAgY29uc3QgbG9jYXRpb24gPSBmb3JtLmdldEF0dHJpYnV0ZSgnbG9jYXRpb24nKTtcclxuICAgIHN3aXRjaCAobG9jYXRpb24pIHtcclxuICAgICAgY2FzZSAnaG9tZSc6IHsgaGlkZUFkZEVkaXRJdGVtRm9ybUZyb21Ib21lKCk7IGJyZWFrOyB9XHJcbiAgICAgIGNhc2UgJ3Byb2plY3QnOiB7IGhpZGVBZGRFZGl0VG9kb0Zvcm1Gcm9tUHJvamVjdChlKTsgYnJlYWs7IH1cclxuICAgICAgZGVmYXVsdDogY29uc29sZS5sb2coYGRlbGV0ZUl0ZW06IHNvcnJ5LCB3ZSBhcmUgb3V0IG9mICR7bG9jYXRpb259LmApO1xyXG4gICAgfVxyXG4gIH1cclxuICBjb25zdCBpdGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gIGl0ZW0ucmVtb3ZlKCk7XHJcblxyXG4gIHJldHVybiBpZDtcclxufTsiLCIvKiBlc2xpbnQtZGlzYWJsZSBsaW5lYnJlYWstc3R5bGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tcGx1c3BsdXMgKi9cclxuLyogZXNsaW50LWRpc2FibGUgZW9sLWxhc3QgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tdXNlLWJlZm9yZS1kZWZpbmUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgb2JqZWN0LWN1cmx5LW5ld2xpbmUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tc2hhZG93ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1jeWNsZSAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBkZWZhdWx0LWNhc2UgKi9cclxuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xyXG5cclxuaW1wb3J0IHsgZGVsZXRlUHJvamVjdEZyb21GaXJlc3RvcmUsIHByb2plY3RzIH0gZnJvbSAnLi9maXJlc3RvcmUnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlbGV0ZVByb2plY3QgPSBhc3luYyAoaWQpID0+IHtcclxuICBhd2FpdCBkZWxldGVQcm9qZWN0RnJvbUZpcmVzdG9yZShpZCk7XHJcbiAgcHJvamVjdHMuZGVsZXRlUHJvamVjdChpZCk7XHJcblxyXG4gIHJldHVybiBpZDtcclxufTtcclxuIiwiLyogZXNsaW50LWRpc2FibGUgbGluZWJyZWFrLXN0eWxlICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBsdXNwbHVzICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGVvbC1sYXN0ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVzZS1iZWZvcmUtZGVmaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG9iamVjdC1jdXJseS1uZXdsaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXNoYWRvdyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tY3ljbGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZXJzY29yZS1kYW5nbGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xyXG5cclxuY29uc3QgZmluZEl0ZW1pbmRleCA9IChpdGVtcywgaWQpID0+IGl0ZW1zLmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbS5pZCA9PT0gaWQpO1xyXG5jb25zdCBwcm9qZWN0UHJvcHMgPSB7IHByb2plY3RJZDogJ2lkJywgcHJvamVjdFRpdGxlOiAndGl0bGUnIH07XHJcblxyXG5jb25zdCB3aXRoR2V0dGVyID0gKHByb2plY3RzKSA9PiAoe1xyXG4gIGdldDogKCkgPT4gcHJvamVjdHMsXHJcbn0pO1xyXG5cclxuY29uc3Qgd2l0aFNldHRlciA9IChwcm9qZWN0cykgPT4gKHtcclxuICBzZXQ6ICh2YWx1ZSkgPT4geyBwcm9qZWN0cyA9IHZhbHVlOyB9LFxyXG59KTtcclxuXHJcbmNvbnN0IHdpdGhQcm9qZWN0c0hhbmRsZXIgPSAocHJvamVjdHMpID0+ICh7XHJcbiAgZ2V0UHJvamVjdHM6ICgpID0+IHByb2plY3RzLFxyXG4gIGdldFByb2plY3RzUHJvcDogKGtleSkgPT4ge1xyXG4gICAgY29uc3QgcHJvcHMgPSBbXTtcclxuICAgIHByb2plY3RzLmZvckVhY2goKHByb2plY3QpID0+IHByb3BzLnB1c2gocHJvamVjdFtrZXldKSk7XHJcblxyXG4gICAgcmV0dXJuIHByb3BzO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3Qgd2l0aFByb2plY3RIYW5kbGVyID0gKHByb2plY3RzKSA9PiAoe1xyXG4gIGdldFByb2plY3Q6IChpZCkgPT4gcHJvamVjdHMuZmlsdGVyKChwcm9qZWN0KSA9PiBwcm9qZWN0LmlkID09PSBpZClbMF0sXHJcbiAgZ2V0UHJvamVjdFByb3A6IChpZCwga2V5KSA9PiB7XHJcbiAgICBjb25zdCBwcm9qZWN0ID0gcHJvamVjdHMuZmlsdGVyKChwcm9qZWN0KSA9PiBwcm9qZWN0LmlkID09PSBpZClbMF07XHJcblxyXG4gICAgcmV0dXJuIHByb2plY3Rba2V5XTtcclxuICB9LFxyXG4gIGdldFByb2plY3RJZEZyb21Qcm9wOiAoa2V5LCB2YWx1ZSkgPT4gcHJvamVjdHMuZmlsdGVyKChwcm9qZWN0KSA9PiBwcm9qZWN0W2tleV0gPT09IHZhbHVlKVswXS5pZCxcclxuICBnZXRQcm9qZWN0UHJvcEZyb21Ub2RvSWQ6ICh0b2RvSWQsIGtleSkgPT4ge1xyXG4gICAgY29uc3QgcHJvamVjdCA9IHByb2plY3RzLmZpbHRlcihcclxuICAgICAgKHByb2plY3QpID0+IHByb2plY3QudG9kb3MuZmlsdGVyKCh0b2RvKSA9PiB0b2RvLmlkID09PSB0b2RvSWQpLmxlbmd0aCA+IDAsXHJcbiAgICApWzBdO1xyXG5cclxuICAgIHJldHVybiBwcm9qZWN0W2tleV07XHJcbiAgfSxcclxuICBnZXRQcm9qZWN0UHJvcHNGcm9tVG9kb0lkOiAodG9kb0lkLCAuLi5rZXlzKSA9PiB7XHJcbiAgICBjb25zdCBwcm9qZWN0ID0gcHJvamVjdHMuZmlsdGVyKFxyXG4gICAgICAocHJvamVjdCkgPT4gcHJvamVjdC50b2Rvcy5maWx0ZXIoKHRvZG8pID0+IHRvZG8uaWQgPT09IHRvZG9JZCkubGVuZ3RoID4gMCxcclxuICAgIClbMF07XHJcblxyXG4gICAgY29uc3QgcHJvcHMgPSB7fTtcclxuICAgIGtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgIGlmIChPYmplY3Qua2V5cyhwcm9qZWN0UHJvcHMpLmluY2x1ZGVzKGtleSkpIHtcclxuICAgICAgICBwcm9wc1trZXldID0gcHJvamVjdFtwcm9qZWN0UHJvcHNba2V5XV07XHJcbiAgICAgIH0gZWxzZSB7IHByb3BzW2tleV0gPSBwcm9qZWN0W2tleV07IH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBwcm9wcztcclxuICB9LFxyXG4gIHNldFByb2plY3Q6IChpZCwgdmFsdWUpID0+IHtcclxuICAgIGNvbnN0IGluZGV4ID0gZmluZEl0ZW1pbmRleChwcm9qZWN0cywgaWQpO1xyXG4gICAgcHJvamVjdHNbaW5kZXhdID0gdmFsdWU7XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSxcclxuICBzZXRQcm9qZWN0UHJvcDogKGlkLCBrZXksIHZhbHVlKSA9PiB7XHJcbiAgICBjb25zdCBwcm9qZWN0SW5kZXggPSBmaW5kSXRlbWluZGV4KHByb2plY3RzLCBpZCk7XHJcbiAgICBwcm9qZWN0c1twcm9qZWN0SW5kZXhdW2tleV0gPSB2YWx1ZTtcclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9LFxyXG4gIHNldFByb2plY3RQcm9wczogKGlkLCBwcm9wcykgPT4ge1xyXG4gICAgY29uc3QgcHJvamVjdEluZGV4ID0gZmluZEl0ZW1pbmRleChwcm9qZWN0cywgaWQpO1xyXG4gICAgT2JqZWN0LmtleXMocHJvcHMpLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICBwcm9qZWN0c1twcm9qZWN0SW5kZXhdW2tleV0gPSBwcm9wc1trZXldO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSxcclxuICBkZWxldGVQcm9qZWN0OiAoaWQpID0+IHtcclxuICAgIGNvbnN0IHByb2plY3RJbmRleCA9IGZpbmRJdGVtaW5kZXgocHJvamVjdHMsIGlkKTtcclxuICAgIHByb2plY3RzLnNwbGljZShwcm9qZWN0SW5kZXgsIDEpO1xyXG5cclxuICAgIHJldHVybiBpZDtcclxuICB9LFxyXG4gIGFkZFByb2plY3Q6IChwcm9qZWN0KSA9PiB7IHByb2plY3RzLnB1c2gocHJvamVjdCk7IHJldHVybiBwcm9qZWN0LmlkOyB9LFxyXG59KTtcclxuXHJcbmNvbnN0IHdpdGhUb2Rvc0hhbmRsZXIgPSAocHJvamVjdHMpID0+ICh7XHJcbiAgZ2V0VG9kb3M6ICgpID0+IHtcclxuICAgIGNvbnN0IHRvZG9zID0gW107XHJcbiAgICBwcm9qZWN0cy5mb3JFYWNoKChwcm9qZWN0KSA9PiBwcm9qZWN0LnRvZG9zLmZvckVhY2goKHRvZG8pID0+IHRvZG9zLnB1c2godG9kbykpKTtcclxuXHJcbiAgICByZXR1cm4gdG9kb3M7XHJcbiAgfSxcclxuICBnZXRUb2Rvc1Byb3A6IChwcm9qZWN0SWQsIGtleSkgPT4ge1xyXG4gICAgY29uc3QgcHJvcHMgPSBbXTtcclxuICAgIGNvbnN0IHByb2plY3RJbmRleCA9IGZpbmRJdGVtaW5kZXgocHJvamVjdHMsIHByb2plY3RJZCk7XHJcbiAgICBjb25zdCBwcm9qZWN0ID0gcHJvamVjdHNbcHJvamVjdEluZGV4XTtcclxuICAgIHByb2plY3QudG9kb3MuZm9yRWFjaCgodG9kbykgPT4gcHJvcHMucHVzaCh0b2RvW2tleV0pKTtcclxuXHJcbiAgICByZXR1cm4gcHJvcHM7XHJcbiAgfSxcclxuICBnZXRUb2RvRnJvbUlkOiAodG9kb0lkKSA9PiB7XHJcbiAgICBjb25zdCB0b2RvID0gcHJvamVjdHMuZm9yRWFjaCgocHJvamVjdCkgPT4gcHJvamVjdC50b2Rvcy5mb3JFYWNoKCh0b2RvKSA9PiB0b2RvLmlkID09PSB0b2RvSWQpKTtcclxuXHJcbiAgICByZXR1cm4gdG9kbztcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IHdpdGhUb2RvSGFuZGxlciA9IChwcm9qZWN0cykgPT4gKHtcclxuICBnZXRUb2RvOiAocHJvamVjdElkLCB0b2RvSWQpID0+IHtcclxuICAgIGNvbnN0IHByb2plY3RJbmRleCA9IGZpbmRJdGVtaW5kZXgocHJvamVjdHMsIHByb2plY3RJZCk7XHJcbiAgICBjb25zdCBwcm9qZWN0ID0gcHJvamVjdHNbcHJvamVjdEluZGV4XTtcclxuICAgIGNvbnN0IHRvZG9JbmRleCA9IGZpbmRJdGVtaW5kZXgocHJvamVjdC50b2RvcywgdG9kb0lkKTtcclxuXHJcbiAgICByZXR1cm4gcHJvamVjdHNbcHJvamVjdEluZGV4XS50b2Rvc1t0b2RvSW5kZXhdO1xyXG4gIH0sXHJcbiAgZ2V0VG9kb1Byb3A6IChwcm9qZWN0SWQsIHRvZG9JZCwga2V5KSA9PiB7XHJcbiAgICBjb25zdCBwcm9qZWN0SW5kZXggPSBmaW5kSXRlbWluZGV4KHByb2plY3RzLCBwcm9qZWN0SWQpO1xyXG4gICAgY29uc3QgcHJvamVjdCA9IHByb2plY3RzW3Byb2plY3RJbmRleF07XHJcbiAgICBjb25zdCB0b2RvSW5kZXggPSBmaW5kSXRlbWluZGV4KHByb2plY3QudG9kb3MsIHRvZG9JZCk7XHJcblxyXG4gICAgcmV0dXJuIHByb2plY3RzW3Byb2plY3RJbmRleF0udG9kb3NbdG9kb0luZGV4XVtrZXldO1xyXG4gIH0sXHJcbiAgc2V0VG9kbzogKHByb2plY3RJZCwgdG9kb0lkLCB0b2RvKSA9PiB7XHJcbiAgICBjb25zdCBwcm9qZWN0SW5kZXggPSBmaW5kSXRlbWluZGV4KHByb2plY3RzLCBwcm9qZWN0SWQpO1xyXG4gICAgY29uc3QgcHJvamVjdCA9IHByb2plY3RzW3Byb2plY3RJbmRleF07XHJcbiAgICBjb25zdCB0b2RvSW5kZXggPSBmaW5kSXRlbWluZGV4KHByb2plY3QudG9kb3MsIHRvZG9JZCk7XHJcbiAgICBwcm9qZWN0c1twcm9qZWN0SW5kZXhdLnRvZG9zW3RvZG9JbmRleF0gPSB0b2RvO1xyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0sXHJcbiAgc2V0VG9kb1Byb3A6IChwcm9qZWN0SWQsIHRvZG9JZCwga2V5LCB2YWx1ZSkgPT4ge1xyXG4gICAgY29uc3QgcHJvamVjdEluZGV4ID0gZmluZEl0ZW1pbmRleChwcm9qZWN0cywgcHJvamVjdElkKTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0c1twcm9qZWN0SW5kZXhdO1xyXG4gICAgY29uc3QgdG9kb0luZGV4ID0gZmluZEl0ZW1pbmRleChwcm9qZWN0LnRvZG9zLCB0b2RvSWQpO1xyXG4gICAgcHJvamVjdHNbcHJvamVjdEluZGV4XS50b2Rvc1t0b2RvSW5kZXhdW2tleV0gPSB2YWx1ZTtcclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9LFxyXG4gIHNldFRvZG9zUHJvcDogKHByb2plY3RJZCwga2V5LCB2YWx1ZSkgPT4ge1xyXG4gICAgY29uc3QgcHJvamVjdEluZGV4ID0gZmluZEl0ZW1pbmRleChwcm9qZWN0cywgcHJvamVjdElkKTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0c1twcm9qZWN0SW5kZXhdO1xyXG4gICAgcHJvamVjdC50b2Rvcy5mb3JFYWNoKCh0b2RvKSA9PiB7IHRvZG9ba2V5XSA9IHZhbHVlOyB9KTtcclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9LFxyXG4gIHNldFRvZG9Qcm9wczogKHByb2plY3RJZCwgdG9kb0lkLCBwcm9wcykgPT4ge1xyXG4gICAgY29uc3QgcHJvamVjdEluZGV4ID0gZmluZEl0ZW1pbmRleChwcm9qZWN0cywgcHJvamVjdElkKTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0c1twcm9qZWN0SW5kZXhdO1xyXG4gICAgY29uc3QgdG9kb0luZGV4ID0gZmluZEl0ZW1pbmRleChwcm9qZWN0LnRvZG9zLCB0b2RvSWQpO1xyXG4gICAgT2JqZWN0LmtleXMocHJvcHMpLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICBwcm9qZWN0c1twcm9qZWN0SW5kZXhdLnRvZG9zW3RvZG9JbmRleF1ba2V5XSA9IHByb3BzW2tleV07XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9LFxyXG4gIGFkZFRvZG86IChwcm9qZWN0SWQsIHRvZG8pID0+IHtcclxuICAgIGNvbnN0IHByb2plY3RJbmRleCA9IGZpbmRJdGVtaW5kZXgocHJvamVjdHMsIHByb2plY3RJZCk7XHJcbiAgICB0b2RvLnByb2plY3RJZCA9IHByb2plY3RJZDtcclxuICAgIHByb2plY3RzW3Byb2plY3RJbmRleF0udG9kb3MucHVzaCh0b2RvKTtcclxuXHJcbiAgICByZXR1cm4gdG9kby5pZDtcclxuICB9LFxyXG4gIGRlbGV0ZVRvZG86IChwcm9qZWN0SWQsIHRvZG9JZCkgPT4ge1xyXG4gICAgY29uc3QgcHJvamVjdEluZGV4ID0gZmluZEl0ZW1pbmRleChwcm9qZWN0cywgcHJvamVjdElkKTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0c1twcm9qZWN0SW5kZXhdO1xyXG4gICAgY29uc3QgdG9kb3MgPSBwcm9qZWN0LnRvZG9zLmZpbHRlcigodG9kbykgPT4gdG9kby5pZCAhPT0gdG9kb0lkKTtcclxuICAgIHByb2plY3RzW3Byb2plY3RJbmRleF0udG9kb3MgPSB0b2RvcztcclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9LFxyXG5cclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgUHJvamVjdHMgPSAoLi4ucHJvamVjdHMpID0+IHtcclxuICBjb25zdCBfaW5zdGFuY2UgPSB7fTtcclxuICBjb25zdCBfZGF0YSA9IFsuLi5wcm9qZWN0c107XHJcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oXHJcbiAgICBfaW5zdGFuY2UsXHJcbiAgICB3aXRoR2V0dGVyKF9kYXRhKSxcclxuICAgIHdpdGhTZXR0ZXIoX2RhdGEpLFxyXG4gICAgd2l0aFByb2plY3RzSGFuZGxlcihfZGF0YSksXHJcbiAgICB3aXRoUHJvamVjdEhhbmRsZXIoX2RhdGEpLFxyXG4gICAgd2l0aFRvZG9zSGFuZGxlcihfZGF0YSksXHJcbiAgICB3aXRoVG9kb0hhbmRsZXIoX2RhdGEpLFxyXG4gICk7XHJcbn07XHJcbiIsIi8qIGVzbGludC1kaXNhYmxlIGxpbmVicmVhay1zdHlsZSAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wbHVzcGx1cyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBlb2wtbGFzdCAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11c2UtYmVmb3JlLWRlZmluZSAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBvYmplY3QtY3VybHktbmV3bGluZSAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1zaGFkb3cgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cclxuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWN5Y2xlICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGRlZmF1bHQtY2FzZSAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXHJcblxyXG5pbXBvcnQgeyBkZWxldGVUb2RvRnJvbUZpcmVzdG9yZSwgcHJvamVjdHMgfSBmcm9tIFwiLi9maXJlc3RvcmVcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBkZWxldGVUb2RvID0gYXN5bmMgKHByb2plY3RJZCwgaWQpID0+IHtcclxuICBhd2FpdCBkZWxldGVUb2RvRnJvbUZpcmVzdG9yZShwcm9qZWN0SWQsIGlkKTtcclxuICBwcm9qZWN0cy5kZWxldGVUb2RvKHByb2plY3RJZCwgaWQpO1xyXG5cclxuICByZXR1cm4gaWQ7XHJcbn07IiwiLyogZXNsaW50LWRpc2FibGUgbGluZWJyZWFrLXN0eWxlICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBsdXNwbHVzICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGVvbC1sYXN0ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVzZS1iZWZvcmUtZGVmaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG9iamVjdC1jdXJseS1uZXdsaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXNoYWRvdyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tY3ljbGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1iaXR3aXNlICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLWF3YWl0LWluLWxvb3AgKi9cclxuXHJcbmV4cG9ydCBjb25zdCBzb3J0ID0gKGFyciwgYnksIGRlc2MgPSB0cnVlKSA9PiB7XHJcbiAgc3dpdGNoIChkZXNjKSB7XHJcbiAgICBjYXNlIHRydWU6IHsgYXJyLnNvcnQoKGEsIGIpID0+IGFbYnldIC0gYltieV0pOyBicmVhazsgfVxyXG4gICAgY2FzZSBmYWxzZTogeyBhcnIuc29ydCgoYSwgYikgPT4gYltieV0gLSBhW2J5XSk7IGJyZWFrOyB9XHJcbiAgICBkZWZhdWx0OiBjb25zb2xlLmxvZygnc29ydDogc29tZXRoaW5nIHdlbnQgd3JvbmcuJyk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gYXJyO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGFzeW5jRm9yRWFjaCA9IGFzeW5jIChhcnJheSwgY2FsbGJhY2spID0+IHtcclxuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYXJyYXkubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICBhd2FpdCBjYWxsYmFjayhhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzb3J0ZWRJbmRleCA9IChhcnJheSwgdmFsdWUsIGRlc2MgPSBmYWxzZSkgPT4ge1xyXG4gIGxldCBsb3cgPSAwO1xyXG4gIGxldCBoaWdoID0gYXJyYXkubGVuZ3RoO1xyXG5cclxuICB3aGlsZSAobG93IDwgaGlnaCkge1xyXG4gICAgY29uc3QgbWlkID0gbG93ICsgaGlnaCA+Pj4gMTtcclxuICAgIHN3aXRjaCAoZGVzYykge1xyXG4gICAgICBjYXNlIHRydWU6IHsgaWYgKGFycmF5W21pZF0gPCB2YWx1ZSkgeyBsb3cgPSBtaWQgKyAxOyB9IGVsc2UgeyBoaWdoID0gbWlkOyB9IGJyZWFrOyB9XHJcbiAgICAgIGNhc2UgZmFsc2U6IHsgaWYgKGFycmF5W21pZF0gPiB2YWx1ZSkgeyBsb3cgPSBtaWQgKyAxOyB9IGVsc2UgeyBoaWdoID0gbWlkOyB9IGJyZWFrOyB9XHJcbiAgICAgIGRlZmF1bHQ6IGNvbnNvbGUubG9nKCdzb3J0ZWRJbmRleDogc29tZXRoaW5nIHdlbnQgd3JvbmcuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbG93O1xyXG59O1xyXG5cclxuY29uc3QgaW5zZXJ0SW5Tb3J0ZWRBcnJheSA9IChhcnJheSwgdmFsdWUpID0+IHtcclxuICBjb25zdCBpbmRleCA9IHNvcnRlZEluZGV4KGFycmF5LCB2YWx1ZSk7XHJcbiAgYXJyYXlbaW5kZXhdID0gdmFsdWU7XHJcblxyXG4gIHJldHVybiBhcnJheTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBpbnRlcnNlY3QgPSAoeCwgeSkgPT4gQXJyYXkuZnJvbSh4KS5maWx0ZXIoKHopID0+IHkuaW5jbHVkZXMoeikpO1xyXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBsaW5lYnJlYWstc3R5bGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tcGx1c3BsdXMgKi9cclxuLyogZXNsaW50LWRpc2FibGUgZW9sLWxhc3QgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tdXNlLWJlZm9yZS1kZWZpbmUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgb2JqZWN0LWN1cmx5LW5ld2xpbmUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tc2hhZG93ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1jeWNsZSAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbmFtZWQgKi9cclxuLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLWRlc3RydWN0dXJpbmcgKi9cclxuXHJcbmltcG9ydCB7IFRpbWVzdGFtcCB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XHJcbmltcG9ydCB7XHJcbiAgZ2V0SXRlbVNvcnRWYWx1ZSwgZ2V0SXRlbVNvcnRWYWx1ZXMsIGdldEl0ZW1Db21wb25lbnRQcm9wLFxyXG4gIG1ha2VOZXdJdGVtQ29udGFpbmVyLFxyXG4gIHNob3dJdGVtLFxyXG59IGZyb20gJy4vaXRlbSc7XHJcbmltcG9ydCB7IGNsZWFyQ29udGFpbmVyT2ZFbGVtZW50cyB9IGZyb20gJy4uL3V0aWxzJztcclxuaW1wb3J0IHsgc3dpdGNoSXRlbUNvbnRyb2wgfSBmcm9tICcuLi9mb3Jtcy91dGlscyc7XHJcbmltcG9ydCB7IHNvcnRJdGVtT3ZlcmR1ZVN0YXR1cyB9IGZyb20gJy4uL3N0YXRlL292ZXJkdWUnO1xyXG5pbXBvcnQgeyBzb3J0LCBzb3J0ZWRJbmRleCB9IGZyb20gJy4uLy4uL21vZGVsL3V0aWxzJztcclxuaW1wb3J0IHsgcHJvamVjdHMgfSBmcm9tICcuLi8uLi9tb2RlbC9maXJlc3RvcmUnO1xyXG5pbXBvcnQgJy4vaG9tZS5jc3MnO1xyXG5cclxuY29uc3QgdHlwZXMgPSBbJ3RvZG8nLCAncHJvamVjdCddO1xyXG5cclxuY29uc3QgbWFrZUhvbWVDb250cm9scyA9ICh0eXBlKSA9PiB7XHJcbiAgY29uc3QgY29udHJvbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBjb250cm9scy5jbGFzc0xpc3QuYWRkKCdob21lLWNvbnRyb2xzJyk7XHJcblxyXG4gIHR5cGUgPSB0eXBlcy5maWx0ZXIoKGVsZW1lbnQpID0+IGVsZW1lbnQgIT09IHR5cGUpWzBdO1xyXG4gIGNvbnN0IHR5cGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICB0eXBlRGl2LnRleHRDb250ZW50ID0gYCR7dHlwZX1zYDtcclxuICB0eXBlRGl2LmlkID0gJ2hvbWUtY29udHJvbHMtc3dpdGNoJztcclxuICB0eXBlRGl2LnR5cGUgPSB0eXBlO1xyXG4gIGNvbnRyb2xzLmFwcGVuZENoaWxkKHR5cGVEaXYpO1xyXG5cclxuICBjb25zdCBhZGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBhZGQudGV4dENvbnRlbnQgPSAnYWRkJztcclxuICBhZGQuaWQgPSAnaG9tZS1jb250cm9scy1hZGQnO1xyXG4gIGNvbnRyb2xzLmFwcGVuZENoaWxkKGFkZCk7XHJcblxyXG4gIHJldHVybiBjb250cm9scztcclxufTtcclxuXHJcbmNvbnN0IG1ha2VIb21lSXRlbXMgPSAoKSA9PiB7XHJcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgY29udGFpbmVyLmlkID0gJ2hvbWUtaXRlbXMnO1xyXG4gIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdob21lLWl0ZW1zJyk7XHJcbiAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGxpc3QuY2xhc3NMaXN0LmFkZCgnaG9tZS1pdGVtcy1saXN0Jyk7XHJcbiAgbGlzdC5pZCA9ICdob21lLWl0ZW1zLWxpc3QnO1xyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChsaXN0KTtcclxuXHJcbiAgcmV0dXJuIGNvbnRhaW5lcjtcclxufTtcclxuXHJcbmNvbnN0IG1ha2VIb21lID0gKHR5cGUpID0+IHtcclxuICBjb25zdCBob21lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgaG9tZS5pZCA9ICdob21lJztcclxuXHJcbiAgY29uc3QgY29udHJvbHMgPSBtYWtlSG9tZUNvbnRyb2xzKHR5cGUpO1xyXG4gIGhvbWUuYXBwZW5kQ2hpbGQoY29udHJvbHMpO1xyXG5cclxuICBjb25zdCBjb250ZW50ID0gbWFrZUhvbWVJdGVtcygpO1xyXG4gIGhvbWUuYXBwZW5kQ2hpbGQoY29udGVudCk7XHJcblxyXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaG9tZSk7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNob3dJdGVtcyA9IChpdGVtcywgdHlwZSwgLi4uc29ydEFyZ3MpID0+IHtcclxuICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvbWUtaXRlbXMtbGlzdCcpO1xyXG4gIGxpc3QuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gIGl0ZW1zID0gc29ydChpdGVtcywgLi4uc29ydEFyZ3MpO1xyXG5cclxuICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICBpdGVtLnR5cGUgPSB0eXBlO1xyXG4gICAgaXRlbSA9IHNob3dJdGVtKGl0ZW0pO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzaG93SG9tZSA9IGFzeW5jICh0eXBlLCAuLi5zb3J0QXJncykgPT4ge1xyXG4gIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gJyc7XHJcbiAgbWFrZUhvbWUodHlwZSk7XHJcbiAgY29uc3QgaG9tZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob21lJyk7XHJcbiAgaG9tZS50eXBlID0gdHlwZTtcclxuICBbaG9tZS5ieSwgaG9tZS5kZXNjXSA9IHNvcnRBcmdzO1xyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRIb21lVHlwZSA9ICgpID0+IHtcclxuICBjb25zdCBob21lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvbWUnKTtcclxuXHJcbiAgcmV0dXJuIGhvbWUudHlwZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRJdGVtU29ydFZhbHVlc0Zyb21Ib21lID0gKGtleSkgPT4ge1xyXG4gIGNvbnN0IGl0ZW1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvbWUtaXRlbXMtbGlzdCcpO1xyXG4gIGNvbnN0IHZhbHVlcyA9IFtdO1xyXG5cclxuICBBcnJheS5mcm9tKGl0ZW1zLmNoaWxkcmVuKS5mb3JFYWNoKChpdGVtKSA9PiB2YWx1ZXMucHVzaChnZXRJdGVtQ29tcG9uZW50UHJvcChpdGVtLCBrZXkpKSk7XHJcblxyXG4gIHJldHVybiB2YWx1ZXM7XHJcbn07XHJcblxyXG5jb25zdCBnZXRTb3J0UGFyYW1zRnJvbUhvbWUgPSAoKSA9PiB7XHJcbiAgY29uc3QgaG9tZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob21lJyk7XHJcbiAgcmV0dXJuIHsgYnk6IGhvbWUuYnksIGRlc2M6IGhvbWUuZGVzYyB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldEhvbWVUeXBlID0gKHR5cGUpID0+IHtcclxuICBjb25zdCBob21lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvbWUnKTtcclxuICBob21lLnR5cGUgPSB0eXBlO1xyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBhZGRJdGVtVG9Ib21lSXRlbXNMaXN0ID0gKGl0ZW0pID0+IHtcclxuICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvbWUtaXRlbXMtbGlzdCcpO1xyXG4gIGNvbnN0IHsgYnksIGRlc2MgfSA9IGdldFNvcnRQYXJhbXNGcm9tSG9tZSgpO1xyXG4gIGNvbnN0IGl0ZW1Tb3J0VmFsdWUgPSBnZXRJdGVtU29ydFZhbHVlKGl0ZW0sIGJ5KTtcclxuXHJcbiAgY29uc3QgdmFsdWVzID0gZ2V0SXRlbVNvcnRWYWx1ZXMoaXRlbS50eXBlLCBieSk7XHJcbiAgY29uc3QgaW5kZXggPSBzb3J0ZWRJbmRleCh2YWx1ZXMsIGl0ZW1Tb3J0VmFsdWUsIGRlc2MpO1xyXG4gIGNvbnN0IHJlZmVyZW5jZSA9IGxpc3QuY2hpbGRyZW5baW5kZXhdO1xyXG4gIGl0ZW0gPSBtYWtlTmV3SXRlbUNvbnRhaW5lcihpdGVtKTtcclxuXHJcbiAgbGlzdC5pbnNlcnRCZWZvcmUoaXRlbSwgcmVmZXJlbmNlKTtcclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZWRpdEl0ZW1PbkhvbWVMaXN0ID0gKGlkLCBwcm9wcykgPT4ge1xyXG4gIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XHJcbiAgY29uc3QgdHlwZSA9IGl0ZW0uY2xhc3NMaXN0WzFdO1xyXG5cclxuICBjb25zdCBrZXlzID0gWyd0aXRsZScsICdkZXNjcmlwdGlvbicsICdkdWVEYXRlJywgJ3ByaW9yaXR5J107XHJcbiAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGl0ZW0ucXVlcnlTZWxlY3RvcihgW2NsYXNzKj0ke2tleX1dYCk7XHJcbiAgICBjb250YWluZXIudGV4dENvbnRlbnQgPSBwcm9wc1trZXldO1xyXG4gIH0pO1xyXG5cclxuICBwcm9wcy5kdWVEYXRlID0gVGltZXN0YW1wLmZyb21EYXRlKG5ldyBEYXRlKHByb3BzLmR1ZURhdGUpKTtcclxuICBzb3J0SXRlbU92ZXJkdWVTdGF0dXMocHJvcHMsIGl0ZW0pO1xyXG5cclxuICBpZiAodHlwZSA9PT0gJ3RvZG8nKSB7XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ1tjbGFzcyo9cHJvamVjdF0nKTtcclxuICAgIGNvbnRhaW5lci50ZXh0Q29udGVudCA9IGBwcm9qZWN0OiAke3Byb3BzLnByb2plY3R9YDtcclxuICB9XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHN3aXRjaFByb2plY3RzVG9kb3MgPSBhc3luYyAoZSkgPT4ge1xyXG4gIGNvbnN0IHN3aXRjaERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob21lLWNvbnRyb2xzLXN3aXRjaCcpO1xyXG5cclxuICBsZXQgeyB0eXBlIH0gPSBlLnRhcmdldDtcclxuICBsZXQgaXRlbXMgPSBudWxsO1xyXG5cclxuICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvbWUtaXRlbXMnKTtcclxuICBjb25zdCBmb3JtID0gbGlzdC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XHJcbiAgaWYgKGZvcm0gIT09IG51bGwpIHtcclxuICAgIGNvbnN0IGNvbnRyb2wgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG9tZS1jb250cm9scy1hZGQnKTtcclxuICAgIGNvbnN0IHR5cGUgPSBmb3JtLmNsYXNzTGlzdFsxXS5tYXRjaCgvKD88PS0pXFx3KyQvKVswXTtcclxuICAgIHN3aXRjaEl0ZW1Db250cm9sKGNvbnRyb2wsIHR5cGUsIGZhbHNlKTtcclxuICAgIGNsZWFyQ29udGFpbmVyT2ZFbGVtZW50cyhsaXN0LCAnZm9ybScpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgeyBieSwgZGVzYyB9ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvbWUnKTtcclxuICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgIGNhc2UgJ3Byb2plY3QnOiB7IGl0ZW1zID0gcHJvamVjdHMuZ2V0UHJvamVjdHMoKTsgYnJlYWs7IH1cclxuICAgIGNhc2UgJ3RvZG8nOiB7IGl0ZW1zID0gcHJvamVjdHMuZ2V0VG9kb3MoKTsgYnJlYWs7IH1cclxuICAgIGRlZmF1bHQ6IGNvbnNvbGUubG9nKGBzd2l0Y2hQcm9qZWN0c1RvZG9zOiBzb3JyeSwgd2UgYXJlIG91dCBvZiAke3R5cGV9LmApO1xyXG4gIH1cclxuICBzaG93SXRlbXMoaXRlbXMsIHR5cGUsIC4uLltieSwgZGVzY10pO1xyXG4gIHNldEhvbWVUeXBlKHR5cGUpO1xyXG5cclxuICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgIGNhc2UgJ3Byb2plY3QnOiB7IHR5cGUgPSAndG9kbyc7IGJyZWFrOyB9IGNhc2UgJ3RvZG8nOiB7IHR5cGUgPSAncHJvamVjdCc7IGJyZWFrOyB9XHJcbiAgICBkZWZhdWx0OiBjb25zb2xlLmxvZyhgc3dpdGNoUHJvamVjdHNUb2Rvczogc29ycnksIHdlIGFyZSBvdXQgb2YgJHt0eXBlfS5gKTtcclxuICB9XHJcbiAgc3dpdGNoRGl2LnRleHRDb250ZW50ID0gYCR7dHlwZX1zYDtcclxuICBzd2l0Y2hEaXYudHlwZSA9IHR5cGU7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59OyIsIi8qIGVzbGludC1kaXNhYmxlIGxpbmVicmVhay1zdHlsZSAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wbHVzcGx1cyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11c2UtYmVmb3JlLWRlZmluZSAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1zaGFkb3cgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cclxuLyogZXNsaW50LWRpc2FibGUgb2JqZWN0LWN1cmx5LW5ld2xpbmUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgZW9sLWxhc3QgKi9cclxuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWN5Y2xlICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uYW1lZCAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBkZWZhdWx0LWNhc2UgKi9cclxuXHJcbmltcG9ydCB7IFRpbWVzdGFtcCB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XHJcbmltcG9ydCB7IGZvcm1hdCB9IGZyb20gJ2RhdGUtZm5zJztcclxuaW1wb3J0IHsgYWRkSXRlbVRvSG9tZUl0ZW1zTGlzdCwgZ2V0SXRlbVNvcnRWYWx1ZXNGcm9tSG9tZSB9IGZyb20gJy4vaG9tZSc7XHJcbmltcG9ydCB7IGFkZFRvZG9Ub1Byb2plY3RUb2Rvc0xpc3QsIGdldFRvZG9zRnJvbURPTVByb2plY3QsIG1ha2VUb2RvcyB9IGZyb20gJy4vcHJvamVjdCc7XHJcbmltcG9ydCB7XHJcbiAgYWRqdXN0SGVpZ2h0LCBtYWtlRGl2LCBtYWtlRWxlbWVudCxcclxuICB0b2dnbGVDb2xsYXBzZSwgdG9nZ2xlRWxlbWVudENsYXNzLCB0eXBlcyxcclxufSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCB7IHNob3dFZGl0SXRlbSB9IGZyb20gJy4uL2Zvcm1zL2VkaXRJdGVtJztcclxuaW1wb3J0IHsgZGVsZXRlSXRlbSB9IGZyb20gJy4uLy4uL21vZGVsL2l0ZW0nO1xyXG5pbXBvcnQgeyBpbnRlcnNlY3QgfSBmcm9tICcuLi8uLi9tb2RlbC91dGlscyc7XHJcbmltcG9ydCB7IGFkZEl0ZW1Ub0ZpcmVzdG9yZSwgcHJvamVjdHMgfSBmcm9tICcuLi8uLi9tb2RlbC9maXJlc3RvcmUnO1xyXG5pbXBvcnQgeyB0b2dnbGVTdGF0dXMgfSBmcm9tICcuLi9zdGF0ZS9zdGF0dXMnO1xyXG5pbXBvcnQge1xyXG4gIGNoZWNrSWZJdGVtT3ZlcmR1ZSwgY2hlY2tJZlByb2plY3RIYXNPdmVyZHVlVG9kbyxcclxuICBzaG93SXRlbUFzT3ZlcmR1ZSwgc2hvd1Byb2plY3RIYXNPdmVyZHVlLFxyXG59IGZyb20gJy4uL3N0YXRlL292ZXJkdWUnO1xyXG5pbXBvcnQgJy4vaXRlbS5jc3MnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbGxhcHNlSXRlbSA9IChpdGVtKSA9PiB7XHJcbiAgY29uc3QgdGl0bGUgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ1tjbGFzc349aXRlbS10aXRsZV0nKTtcclxuICB0b2dnbGVFbGVtZW50Q2xhc3ModGl0bGUsICd0aXRsZS1hY3RpdmUnLCBmYWxzZSk7XHJcbiAgY29uc3QgY29udGVudCA9IGl0ZW0ucXVlcnlTZWxlY3RvcignW2NsYXNzfj1pdGVtLWNvbnRlbnRdJyk7XHJcbiAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cclxuICBhZGp1c3RIZWlnaHQoY29udGVudCwgJ2RpdltjbGFzcyQ9Y29udGVudF0nKTtcclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgbWFrZVRpdGxlID0gKHRleHQpID0+IHtcclxuICBjb25zdCB0aXRsZSA9IG1ha2VFbGVtZW50KFxyXG4gICAgJ2J1dHRvbicsICdpdGVtLXRpdGxlJywgdGV4dCwgbnVsbCwgbnVsbCxcclxuICAgIHsgdHlwZTogJ2NsaWNrJywgY2FsbGJhY2s6IHRvZ2dsZUNvbGxhcHNlIH0sXHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIHRpdGxlO1xyXG59O1xyXG5cclxuY29uc3QgbWFrZUNvbnRyb2xzID0gKHR5cGUsIGlkLCBzdGF0dXMsIHByb2plY3RJZCkgPT4ge1xyXG4gIGNvbnN0IGNvbnRyb2xzID0gbWFrZURpdignaXRlbS1jb250cm9scycpO1xyXG5cclxuICBjb25zdCBlZGl0ID0gbWFrZURpdihcclxuICAgIGAke3R5cGV9LWVkaXRgLCAnZWRpdCcsIHR5cGUsIG51bGwsXHJcbiAgICB7IHR5cGU6ICdjbGljaycsIGNhbGxiYWNrOiBzaG93RWRpdEl0ZW0gfSxcclxuICApO1xyXG4gIGNvbnRyb2xzLmFwcGVuZENoaWxkKGVkaXQpO1xyXG5cclxuICBjb25zdCBzdGF0dXNFbGVtZW50ID0gbWFrZURpdihcclxuICAgIGAke3R5cGV9LXN0YXR1c2AsIHN0YXR1cywgbnVsbCwgbnVsbCxcclxuICAgIHsgdHlwZTogJ2NsaWNrJywgY2FsbGJhY2s6IHRvZ2dsZVN0YXR1cyB9LFxyXG4gICk7XHJcbiAgY29udHJvbHMuYXBwZW5kQ2hpbGQoc3RhdHVzRWxlbWVudCk7XHJcblxyXG4gIGNvbnN0IGRlbCA9IG1ha2VEaXYoXHJcbiAgICBgJHt0eXBlfS1kZWxldGVgLCAnZGVsZXRlJywgdHlwZSwgaWQsXHJcbiAgICB7IHR5cGU6ICdjbGljaycsIGNhbGxiYWNrOiBkZWxldGVJdGVtIH0sXHJcbiAgKTtcclxuICBkZWwucHJvamVjdElkID0gcHJvamVjdElkO1xyXG4gIGNvbnRyb2xzLmFwcGVuZENoaWxkKGRlbCk7XHJcblxyXG4gIHJldHVybiBjb250cm9scztcclxufTtcclxuXHJcbmNvbnN0IG1ha2VEZXRhaWxzID0gKHR5cGUsIGRhdGUsIHByaW9yaXR5KSA9PiB7XHJcbiAgY29uc3QgZGV0YWlscyA9IG1ha2VEaXYoJ2l0ZW0tZGV0YWlscycpO1xyXG4gIGRhdGUgPSBmb3JtYXQoZGF0ZS50b0RhdGUoKSwgJ3l5eXktTU0tZGQnKTtcclxuICBjb25zdCBkdWVEYXRlID0gbWFrZUVsZW1lbnQoJ2RpdicsIGAke3R5cGV9LWR1ZURhdGVgLCBkYXRlKTtcclxuICBkZXRhaWxzLmFwcGVuZENoaWxkKGR1ZURhdGUpO1xyXG4gIHByaW9yaXR5ID0gbWFrZUVsZW1lbnQoJ2RpdicsIGAke3R5cGV9LXByaW9yaXR5YCwgcHJpb3JpdHkpO1xyXG4gIGRldGFpbHMuYXBwZW5kQ2hpbGQocHJpb3JpdHkpO1xyXG5cclxuICByZXR1cm4gZGV0YWlscztcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlQ29udGVudChcclxuICB0eXBlLCBpZCwgZGVzY3JpcHRpb24sIHRvZG9zID0gbnVsbCwgZGF0ZSwgcHJpb3JpdHksIHN0YXR1cywgcHJvamVjdElkID0gbnVsbCxcclxuKSB7XHJcbiAgY29uc3QgY29udGVudCA9IG1ha2VEaXYoJ2l0ZW0tY29udGVudCcpO1xyXG4gIGRlc2NyaXB0aW9uID0gbWFrZURpdihgJHt0eXBlfS1kZXNjcmlwdGlvbmAsIGRlc2NyaXB0aW9uKTtcclxuICBjb250ZW50LmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKTtcclxuXHJcbiAgY29uc3QgZGV0YWlscyA9IG1ha2VEZXRhaWxzKHR5cGUsIGRhdGUsIHByaW9yaXR5KTtcclxuICBjb250ZW50LmFwcGVuZENoaWxkKGRldGFpbHMpO1xyXG5cclxuICBjb25zdCBjb250cm9scyA9IG1ha2VDb250cm9scyh0eXBlLCBpZCwgc3RhdHVzLCBwcm9qZWN0SWQpO1xyXG4gIGNvbnRlbnQuYXBwZW5kQ2hpbGQoY29udHJvbHMpO1xyXG5cclxuICBpZiAodHlwZSA9PT0gJ3Byb2plY3QnKSB7XHJcbiAgICB0b2RvcyA9IG1ha2VUb2Rvcyh0b2RvcywgJ3Byb2plY3QnKTtcclxuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQodG9kb3MpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNvbnRlbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBtYWtlSXRlbUNvbnRhaW5lciA9IChpdGVtLCB0eXBlKSA9PiB7XHJcbiAgY29uc3Qge1xyXG4gICAgaWQsIHRpdGxlLCBkZXNjcmlwdGlvbiwgdG9kb3MsIGR1ZURhdGUsIHByaW9yaXR5LCBzdGF0dXMsXHJcbiAgICBwcm9qZWN0SWQsIHByb2plY3RUaXRsZSxcclxuICB9ID0gaXRlbTtcclxuICBjb250YWluZXIuaWQgPSBpZDtcclxuICBjb25zdCBjb250YWluZXIgPSBtYWtlRGl2KCdpdGVtJywgbnVsbCwgbnVsbCwgaWQpO1xyXG4gIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKHR5cGUpO1xyXG5cclxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQobWFrZVRpdGxlKHRpdGxlLCB0eXBlKSk7XHJcblxyXG4gIGNvbnN0IGNvbnRlbnQgPSBtYWtlQ29udGVudChcclxuICAgIHR5cGUsIGlkLCBkZXNjcmlwdGlvbiwgKHRvZG9zICE9PSBudWxsKSA/IGl0ZW0udG9kb3MgOiBbXSxcclxuICAgIGR1ZURhdGUsIHByaW9yaXR5LCBzdGF0dXMsIHByb2plY3RJZCxcclxuICApO1xyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250ZW50KTtcclxuXHJcbiAgaWYgKGNoZWNrSWZJdGVtT3ZlcmR1ZShpdGVtKSkgeyBzaG93SXRlbUFzT3ZlcmR1ZShjb250YWluZXIpOyB9XHJcblxyXG4gIGlmICh0eXBlID09PSAndG9kbycpIHtcclxuICAgIGNvbnN0IHByb2plY3QgPSBtYWtlRGl2KCd0b2RvLXByb2plY3QnLCBgcHJvamVjdDogJHtwcm9qZWN0VGl0bGV9YCk7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gY29udGFpbmVyO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IG1ha2VOZXdJdGVtQ29udGFpbmVyID0gKGl0ZW0pID0+IHtcclxuICBjb25zdCB0eXBlID0gaXRlbS50eXBlLm1hdGNoKC8oPzw9LSlcXHcrKD89LSkvKVswXTtcclxuICBjb25zdCBsb2NhdGlvbiA9IGl0ZW0udHlwZS5tYXRjaCgvKD88PS0pXFx3KyQvKVswXTtcclxuICBjb25zdCB7XHJcbiAgICBpZCwgdGl0bGUsIGRlc2NyaXB0aW9uLCB0b2RvcywgZHVlRGF0ZSwgcHJpb3JpdHksIHN0YXR1cyxcclxuICAgIHByb2plY3RJZCwgcHJvamVjdFRpdGxlLFxyXG4gIH0gPSBpdGVtO1xyXG4gIGNvbnN0IGNvbnRhaW5lciA9IG1ha2VEaXYoJ2l0ZW0nLCBudWxsLCBudWxsLCBpZCk7XHJcbiAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQodHlwZSk7XHJcblxyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChtYWtlVGl0bGUodGl0bGUsIHR5cGUpKTtcclxuXHJcbiAgY29uc3QgY29udGVudCA9IG1ha2VDb250ZW50KFxyXG4gICAgdHlwZSwgaWQsIGRlc2NyaXB0aW9uLCAodG9kb3MgIT09IG51bGwpID8gaXRlbS50b2RvcyA6IFtdLFxyXG4gICAgZHVlRGF0ZSwgcHJpb3JpdHksIHN0YXR1cywgcHJvamVjdElkLFxyXG4gICk7XHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xyXG5cclxuICBpZiAoY2hlY2tJZkl0ZW1PdmVyZHVlKGl0ZW0pKSB7IHNob3dJdGVtQXNPdmVyZHVlKGNvbnRhaW5lcik7IH1cclxuXHJcbiAgaWYgKHR5cGUgPT09ICd0b2RvJyAmJiBsb2NhdGlvbiA9PT0gJ2hvbWUnKSB7XHJcbiAgICBjb25zdCBwcm9qZWN0ID0gbWFrZURpdigndG9kby1wcm9qZWN0JywgYHByb2plY3Q6ICR7cHJvamVjdFRpdGxlfWApO1xyXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3QpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNvbnRhaW5lcjtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzaG93SXRlbSA9IChpdGVtKSA9PiB7XHJcbiAgY29uc3QgeyBpZCwgcHJvamVjdElkLCB0eXBlIH0gPSBpdGVtO1xyXG4gIGNvbnN0IGNvbnRhaW5lciA9IG1ha2VEaXYoJ2l0ZW0nLCBudWxsLCBudWxsLCBpZCk7XHJcbiAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQodHlwZSk7XHJcblxyXG4gIGNvbnN0IHRpdGxlID0gbWFrZVRpdGxlKGl0ZW0udGl0bGUsIHR5cGUpO1xyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcblxyXG4gIGNvbnN0IGNvbnRlbnQgPSBtYWtlQ29udGVudChcclxuICAgIHR5cGUsIGlkLCBpdGVtLmRlc2NyaXB0aW9uLCAodHlwZSA9PT0gJ3Byb2plY3QnKSA/IGl0ZW0udG9kb3MgOiBbXSxcclxuICAgIGl0ZW0uZHVlRGF0ZSwgaXRlbS5wcmlvcml0eSwgaXRlbS5zdGF0dXMsIHByb2plY3RJZCxcclxuICApO1xyXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250ZW50KTtcclxuICB0b2dnbGVFbGVtZW50Q2xhc3MoY29udGFpbmVyLCAnZG9uZScsIGl0ZW0uc3RhdHVzID09PSAnZG9uZScpO1xyXG5cclxuICBpZiAoY2hlY2tJZkl0ZW1PdmVyZHVlKGl0ZW0pKSB7IHNob3dJdGVtQXNPdmVyZHVlKGNvbnRhaW5lcik7IH1cclxuXHJcbiAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICBjYXNlICdwcm9qZWN0Jzoge1xyXG4gICAgICBpZiAoY2hlY2tJZlByb2plY3RIYXNPdmVyZHVlVG9kbyhpdGVtKSkgeyBzaG93UHJvamVjdEhhc092ZXJkdWUoY29udGFpbmVyKTsgfVxyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGNhc2UgJ3RvZG8nOiB7XHJcbiAgICAgIGNvbnN0IHByb2plY3QgPSBtYWtlRGl2KCd0b2RvLXByb2plY3QnLCBgcHJvamVjdDogJHtpdGVtLnByb2plY3RUaXRsZX1gKTtcclxuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3QpOyBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN3aXRjaCAodHlwZSkge1xyXG4gICAgY2FzZSAncHJvamVjdCc6IGNhc2UgJ3RvZG8nOiB7XHJcbiAgICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvbWUtaXRlbXMtbGlzdCcpO1xyXG4gICAgICBkZXN0aW5hdGlvbi5hcHBlbmRDaGlsZChjb250YWluZXIpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBjb250YWluZXI7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYWRkSXRlbSA9IGFzeW5jICh0eXBlLCBpdGVtLCBwcm9qZWN0SWQgPSBudWxsKSA9PiB7XHJcbiAgY29uc3QgaXRlbVR5cGUgPSB0eXBlLm1hdGNoKC8oPzw9LSlcXHcrKD89LSkvKVswXTtcclxuICBjb25zdCBpdGVtSWQgPSBhd2FpdCBhZGRJdGVtVG9GaXJlc3RvcmUoaXRlbVR5cGUsIHByb2plY3RJZCwgaXRlbSk7XHJcblxyXG4gIGl0ZW0gPSB7IHR5cGUsIGlkOiBpdGVtSWQsIC4uLml0ZW0gfTtcclxuICBhZGRJdGVtVG9JdGVtc0xpc3QoaXRlbSk7XHJcblxyXG4gIGl0ZW0udHlwZSA9IGl0ZW1UeXBlO1xyXG4gIHN3aXRjaCAoaXRlbVR5cGUpIHtcclxuICAgIGNhc2UgJ3Byb2plY3QnOiB7IHByb2plY3RzLmFkZFByb2plY3QoaXRlbSk7IGJyZWFrOyB9XHJcbiAgICBjYXNlICd0b2RvJzoge1xyXG4gICAgICBwcm9qZWN0cy5hZGRUb2RvKFxyXG4gICAgICAgIHByb2plY3RJZCwgeyBwcm9qZWN0VGl0bGU6IHByb2plY3RzLmdldFByb2plY3RQcm9wKHByb2plY3RJZCwgJ3RpdGxlJyksIC4uLml0ZW0gfSxcclxuICAgICAgKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBkZWZhdWx0OiBjb25zb2xlLmxvZyhgQWRkSXRlbTogc29ycnksIHdlIGFyZSBvdXQgb2YgJHtpdGVtVHlwZX0uYCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gaXRlbUlkO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGFkZEl0ZW1Ub0l0ZW1zTGlzdCA9IChpdGVtKSA9PiB7XHJcbiAgY29uc3QgeyB0eXBlIH0gPSBpdGVtO1xyXG5cclxuICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgIGNhc2UgJ2FkZC10b2RvLWhvbWUnOiB7IGFkZEl0ZW1Ub0hvbWVJdGVtc0xpc3QoaXRlbSk7IGJyZWFrOyB9XHJcbiAgICBjYXNlICdhZGQtcHJvamVjdC1ob21lJzoge1xyXG4gICAgICBpdGVtLnRvZG9zID0gW107IGFkZEl0ZW1Ub0hvbWVJdGVtc0xpc3QoaXRlbSk7IGJyZWFrO1xyXG4gICAgfVxyXG4gICAgY2FzZSAnYWRkLXRvZG8tcHJvamVjdCc6IHsgYWRkVG9kb1RvUHJvamVjdFRvZG9zTGlzdChpdGVtKTsgYnJlYWs7IH1cclxuICAgIGRlZmF1bHQ6IGNvbnNvbGUubG9nKGBhZGRJdGVtVG9JdGVtc0xpc3Q6IHNvcnJ5LCB3ZSBhcmUgb3V0IG9mICR7dHlwZX0uYCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRJdGVtQ29tcG9uZW50UHJvcCA9IChpdGVtLCBrZXkpID0+IHtcclxuICBjb25zdCBjb250YWluZXIgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoYGRpdltjbGFzcyQ9JHtrZXl9YCk7XHJcbiAgbGV0IHByb3AgPSBjb250YWluZXIudGV4dENvbnRlbnQ7XHJcblxyXG4gIGlmICgvZGF0ZS9pLnRlc3Qoa2V5KSkgcHJvcCA9IE1hdGgucm91bmQobmV3IERhdGUocHJvcCkuZ2V0VGltZSgpIC8gMTAwMCk7XHJcblxyXG4gIHJldHVybiBwcm9wO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldEl0ZW1Tb3J0VmFsdWUgPSAoaXRlbSwga2V5KSA9PiB7XHJcbiAgbGV0IHZhbHVlID0gaXRlbVtrZXldO1xyXG5cclxuICBpZiAoL2RhdGUvaS50ZXN0KGtleSkpIHZhbHVlID0gdmFsdWUuc2Vjb25kcztcclxuXHJcbiAgcmV0dXJuIHZhbHVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldEl0ZW1Tb3J0VmFsdWVzID0gKHR5cGUsIGtleSkgPT4ge1xyXG4gIHN3aXRjaCAodHlwZSkge1xyXG4gICAgY2FzZSAnYWRkLXRvZG8taG9tZSc6IGNhc2UgJ2FkZC1wcm9qZWN0LWhvbWUnOiB7IHJldHVybiBnZXRJdGVtU29ydFZhbHVlc0Zyb21Ib21lKGtleSk7IH1cclxuICAgIGRlZmF1bHQ6IGNvbnNvbGUubG9nKGBnZXRJdGVtU29ydFZhbHVlczogc29ycnksIHdlIGFyZSBvdXQgb2YgJHt0eXBlfS5gKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBmYWxzZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRUeXBlRnJvbURPTUl0ZW0gPSAoaXRlbSkgPT4ge1xyXG4gIGNvbnN0IHR5cGUgPSBpbnRlcnNlY3QoaXRlbS5jbGFzc0xpc3QsIHR5cGVzKTtcclxuICBpZiAodHlwZS5sZW5ndGggPiAxKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYGdldFR5cGVGcm9tRE9NSXRlbTogbW9yZSB0aGFuIG9uZSBpdGVtIGZvdW5kOiAke3R5cGUuam9pbignLCAnKX0uYCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdHlwZVswXTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRQcm9wc0Zyb21ET01JdGVtID0gKGl0ZW0pID0+IHtcclxuICBsZXQgcHJvcHMgPSB7XHJcbiAgICB0aXRsZTogbnVsbCwgZGVzY3JpcHRpb246IG51bGwsIGR1ZURhdGU6IG51bGwsIHByaW9yaXR5OiBudWxsLCBzdGF0dXM6IG51bGwsXHJcbiAgfTtcclxuICBPYmplY3Qua2V5cyhwcm9wcykuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICBjb25zdCB2YWx1ZSA9IGl0ZW0ucXVlcnlTZWxlY3RvcihgW2NsYXNzKj0ke2tleX1dYCkudGV4dENvbnRlbnQ7XHJcbiAgICBwcm9wc1trZXldID0gdmFsdWU7XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHR5cGUgPSBnZXRUeXBlRnJvbURPTUl0ZW0oaXRlbSk7XHJcbiAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICBjYXNlICd0b2RvJzogY2FzZSAncHJvamVjdC10b2RvJzoge1xyXG4gICAgICBjb25zdCBwcm9qZWN0UHJvcHMgPSBwcm9qZWN0cy5nZXRQcm9qZWN0UHJvcHNGcm9tVG9kb0lkKGl0ZW0uaWQsICdwcm9qZWN0SWQnLCAncHJvamVjdFRpdGxlJyk7XHJcbiAgICAgIHByb3BzID0geyAuLi5wcm9wcywgLi4ucHJvamVjdFByb3BzIH07IGJyZWFrO1xyXG4gICAgfVxyXG4gICAgY2FzZSAncHJvamVjdCc6IHsgcHJvcHMudG9kb3MgPSBnZXRUb2Rvc0Zyb21ET01Qcm9qZWN0KGl0ZW0pOyBicmVhazsgfVxyXG4gICAgZGVmYXVsdDogY29uc29sZS5sb2coYGdldFByb3BzRnJvbURPTUl0ZW06IHNvcnJ5LCB3ZSBhcmUgb3V0IG9mICR7dHlwZX0uYCk7XHJcbiAgfVxyXG5cclxuICBpZiAocHJvcHMuZHVlRGF0ZSAhPT0gbnVsbCkgcHJvcHMuZHVlRGF0ZSA9IFRpbWVzdGFtcC5mcm9tRGF0ZShuZXcgRGF0ZShwcm9wcy5kdWVEYXRlKSk7XHJcbiAgcHJvcHMuaWQgPSBpdGVtLmlkO1xyXG5cclxuICByZXR1cm4gcHJvcHM7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdG9nZ2xlSXRlbUV2ZW50TGlzdGVuZXIgPSAoaXRlbSwgdHlwZSwgY2FsbGJhY2ssIHJlbW92ZSkgPT4ge1xyXG4gIGlmIChyZW1vdmUpIHtcclxuICAgIGl0ZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjayk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB0b2dnbGVJdGVtc0V2ZW50TGlzdGVuZXIgPSAoaXRlbXMsIHR5cGUsIGNhbGxiYWNrLCByZW1vdmUpID0+IHtcclxuICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB0b2dnbGVJdGVtRXZlbnRMaXN0ZW5lcihpdGVtLCB0eXBlLCBjYWxsYmFjaywgcmVtb3ZlKSk7XHJcbn07IiwiLyogZXNsaW50LWRpc2FibGUgbGluZWJyZWFrLXN0eWxlICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBsdXNwbHVzICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGVvbC1sYXN0ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVzZS1iZWZvcmUtZGVmaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG9iamVjdC1jdXJseS1uZXdsaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXNoYWRvdyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tY3ljbGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgZGVmYXVsdC1jYXNlICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnQgKi9cclxuXHJcbmltcG9ydCB7IFRpbWVzdGFtcCB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XHJcbmltcG9ydCB7IGdldFByb3BzRnJvbURPTUl0ZW0sIG1ha2VOZXdJdGVtQ29udGFpbmVyLCBzaG93SXRlbSB9IGZyb20gJy4vaXRlbSc7XHJcbmltcG9ydCB7IG1ha2VEaXYgfSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCB7XHJcbiAgc29ydEl0ZW1PdmVyZHVlU3RhdHVzLCBzb3J0UGFyZW50UHJvamVjdEhhc092ZXJkdWVTdGF0dXMsXHJcbn0gZnJvbSAnLi4vc3RhdGUvb3ZlcmR1ZSc7XHJcbmltcG9ydCB7IHNob3dBZGRJdGVtIH0gZnJvbSAnLi4vZm9ybXMvYWRkSXRlbSc7XHJcbmltcG9ydCAnLi9wcm9qZWN0LmNzcyc7XHJcblxyXG5jb25zdCBtYWtlVG9kb3NIZWFkZXIgPSAoKSA9PiB7XHJcbiAgY29uc3QgaGVhZGVyID0gbWFrZURpdigncHJvamVjdC10b2Rvcy1oZWFkZXInKTtcclxuICBjb25zdCBoZWFkbGluZSA9IG1ha2VEaXYoJ3Byb2plY3QtdG9kb3MtaGVhZGVyLXRleHQnLCAnSW4gdGhlIHBpcGU6Jyk7XHJcbiAgaGVhZGVyLmFwcGVuZENoaWxkKGhlYWRsaW5lKTtcclxuICBjb25zdCBhZGQgPSBtYWtlRGl2KFxyXG4gICAgJ3Byb2plY3QtdG9kb3MtaGVhZGVyLWJ1dHRvbicsICdhZGQnLCAndG9kbycsICdwcm9qZWN0LWFkZC10b2RvJyxcclxuICAgIHsgdHlwZTogJ2NsaWNrJywgY2FsbGJhY2s6IHNob3dBZGRJdGVtIH0sXHJcbiAgKTtcclxuICBoZWFkZXIuYXBwZW5kQ2hpbGQoYWRkKTtcclxuXHJcbiAgcmV0dXJuIGhlYWRlcjtcclxufTtcclxuXHJcbmNvbnN0IG1ha2VUb2Rvc0xpc3QgPSAodG9kb3MpID0+IHtcclxuICBjb25zdCBsaXN0ID0gbWFrZURpdigncHJvamVjdC10b2Rvcy1saXN0Jyk7XHJcbiAgdG9kb3MuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgaXRlbS50eXBlID0gJ3Byb2plY3QtdG9kbyc7XHJcbiAgICBpdGVtID0gc2hvd0l0ZW0oaXRlbSk7XHJcbiAgICBsaXN0LmFwcGVuZENoaWxkKGl0ZW0pO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gbGlzdDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBtYWtlVG9kb3MgPSAoaXRlbXMsIHR5cGUpID0+IHtcclxuICBjb25zdCB0b2RvcyA9IG1ha2VEaXYoJ3Byb2plY3QtdG9kb3MnKTtcclxuXHJcbiAgaWYgKHR5cGUgPT09ICdwcm9qZWN0Jykge1xyXG4gICAgY29uc3QgaGVhZGVyID0gbWFrZVRvZG9zSGVhZGVyKCk7XHJcbiAgICB0b2Rvcy5hcHBlbmRDaGlsZChoZWFkZXIpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgbGlzdCA9IG1ha2VUb2Rvc0xpc3QoaXRlbXMpO1xyXG4gIHRvZG9zLmFwcGVuZENoaWxkKGxpc3QpO1xyXG5cclxuICByZXR1cm4gdG9kb3M7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYWRkVG9kb1RvUHJvamVjdFRvZG9zTGlzdCA9IChpdGVtKSA9PiB7XHJcbiAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGl0ZW0ucHJvamVjdElkKTtcclxuICBjb25zdCBsaXN0ID0gcHJvamVjdC5xdWVyeVNlbGVjdG9yKCdkaXZbY2xhc3MkPWxpc3RdJyk7XHJcbiAgY29uc3QgcmVmZXJlbmNlID0gbGlzdC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC10b2RvJyk7XHJcbiAgaXRlbSA9IG1ha2VOZXdJdGVtQ29udGFpbmVyKGl0ZW0pO1xyXG4gIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgndG9kbycpO1xyXG4gIGl0ZW0uY2xhc3NMaXN0LmFkZCgncHJvamVjdC10b2RvJyk7XHJcblxyXG4gIGxpc3QuaW5zZXJ0QmVmb3JlKGl0ZW0sIHJlZmVyZW5jZSk7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRUb2RvT25Qcm9qZWN0TGlzdCA9IChpZCwgcHJvcHMpID0+IHtcclxuICBjb25zdCB0b2RvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG5cclxuICBjb25zdCBrZXlzID0gWyd0aXRsZScsICdkZXNjcmlwdGlvbicsICdkdWVEYXRlJywgJ3ByaW9yaXR5J107XHJcbiAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRvZG8ucXVlcnlTZWxlY3RvcihgW2NsYXNzKj0ke2tleX1dYCk7XHJcbiAgICBjb250YWluZXIudGV4dENvbnRlbnQgPSBwcm9wc1trZXldO1xyXG4gIH0pO1xyXG5cclxuICBwcm9wcy5kdWVEYXRlID0gVGltZXN0YW1wLmZyb21EYXRlKG5ldyBEYXRlKHByb3BzLmR1ZURhdGUpKTtcclxuICBzb3J0SXRlbU92ZXJkdWVTdGF0dXMocHJvcHMsIHRvZG8pO1xyXG4gIHNvcnRQYXJlbnRQcm9qZWN0SGFzT3ZlcmR1ZVN0YXR1cyhpZCwgcHJvcHMuZHVlRGF0ZSk7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuY29uc3QgZ2V0UHJvamVjdFByb3BGcm9tVG9kb0lkID0gKHRvZG9JZCwga2V5KSA9PiB7XHJcbiAgY29uc3QgdG9kbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRvZG9JZCk7XHJcbiAgY29uc3QgcHJvamVjdCA9IHRvZG8ucGFyZW50RWxlbWVudC5jbG9zZXN0KFwiW2NsYXNzJD0naXRlbSBwcm9qZWN0J11cIik7XHJcblxyXG4gIGNvbnN0IHByb3AgPSBwcm9qZWN0W2tleV07XHJcblxyXG4gIGlmIChwcm9wID09PSBudWxsKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgJHtrZXl9IG5vdCBmb3VuZCBpbiBwcm9qZWN0ICR7cHJvamVjdC5pZH1gKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIHJldHVybiBwcm9wO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldFRvZG9zRnJvbURPTVByb2plY3QgPSAoaXRlbSkgPT4ge1xyXG4gIGNvbnN0IHRvZG9zID0gW107XHJcbiAgQXJyYXkuZnJvbShpdGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9qZWN0LXRvZG8nKSlcclxuICAgIC5mb3JFYWNoKCh0b2RvKSA9PiB0b2Rvcy5wdXNoKGdldFByb3BzRnJvbURPTUl0ZW0odG9kbykpKTtcclxuXHJcbiAgcmV0dXJuIHRvZG9zO1xyXG59O1xyXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBsaW5lYnJlYWstc3R5bGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tcGx1c3BsdXMgKi9cclxuLyogZXNsaW50LWRpc2FibGUgZW9sLWxhc3QgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tdXNlLWJlZm9yZS1kZWZpbmUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgb2JqZWN0LWN1cmx5LW5ld2xpbmUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tc2hhZG93ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1jeWNsZSAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIHByZWZlci1kZXN0cnVjdHVyaW5nICovXHJcbi8qIGVzbGludC1kaXNhYmxlIHByZWZlci1jb25zdCAqL1xyXG5cclxuaW1wb3J0IHsgcHJvamVjdHMgfSBmcm9tICcuLi8uLi9tb2RlbC9maXJlc3RvcmUnO1xyXG5pbXBvcnQge1xyXG4gIGFkZFByb2plY3RJZFRvVG9kb0l0ZW0sXHJcbiAgaGlkZUFkZEVkaXRJdGVtRm9ybUZyb21Ib21lLCBoaWRlQWRkRWRpdFRvZG9Gb3JtRnJvbVByb2plY3QsXHJcbiAgbWFrZUZvcm1JbnB1dFRleHQsIG1ha2VGb3JtSW5wdXREYXRlLCBtYWtlRm9ybUlucHV0U2VsZWN0LCBtYWtlSXRlbUZvcm1TdWJtaXQsXHJcbiAgbWFrZUl0ZW1Gcm9tQWRkRWRpdEZvcm0sXHJcbiAgcHJpb3JpdHlMZXZlbHMsIHN3aXRjaEl0ZW1Db250cm9sLFxyXG59IGZyb20gJy4vdXRpbHMnO1xyXG5pbXBvcnQgeyBhZGp1c3RIZWlnaHQgfSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCB7IGFkZEl0ZW0gfSBmcm9tICcuLi8uLi9tb2RlbC9pdGVtJztcclxuaW1wb3J0IHsgdmFsaWRhdGVGb3JtIH0gZnJvbSAnLi4vLi4vbW9kZWwvZm9ybXMnO1xyXG5pbXBvcnQgeyBnZXRIb21lVHlwZSB9IGZyb20gJy4uL2NvbXBvbmVudHMvaG9tZSc7XHJcblxyXG5jb25zdCBtYWtlQWRkSXRlbUZyb21Ib21lRm9ybSA9ICh0eXBlKSA9PiB7XHJcbiAgY29uc3QgZm9ybSA9IG1ha2VBZGRJdGVtRm9ybSgncHJvamVjdCcpO1xyXG5cclxuICBpZiAodHlwZSA9PT0gJ3RvZG8nKSB7XHJcbiAgICBsZXQgcHJvamVjdFRpdGxlcyA9IHByb2plY3RzLmdldFByb2plY3RzUHJvcCgndGl0bGUnKTtcclxuICAgIHByb2plY3RUaXRsZXMgPSBtYWtlRm9ybUlucHV0U2VsZWN0KFxyXG4gICAgICAncHJvamVjdCcsICdwcm9qZWN0JywgJ3Byb2plY3Q6ICcsIHByb2plY3RUaXRsZXMsXHJcbiAgICApO1xyXG4gICAgZm9ybS5wcmVwZW5kKHByb2plY3RUaXRsZXMpO1xyXG4gIH1cclxuXHJcbiAgZm9ybS50eXBlID0gYGFkZC0ke3R5cGV9LWhvbWVgO1xyXG5cclxuICByZXR1cm4gZm9ybTtcclxufTtcclxuXHJcbmNvbnN0IG1ha2VBZGRUb2RvRnJvbVByb2plY3RGb3JtID0gKCkgPT4ge1xyXG4gIGNvbnN0IGZvcm0gPSBtYWtlQWRkSXRlbUZvcm0oJ3RvZG8nKTtcclxuICBmb3JtLnR5cGUgPSAnYWRkLXRvZG8tcHJvamVjdCc7XHJcblxyXG4gIHJldHVybiBmb3JtO1xyXG59O1xyXG5cclxuY29uc3QgbWFrZUFkZEl0ZW1Gb3JtQm9keSA9ICgpID0+IHtcclxuICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xyXG5cclxuICBjb25zdCB0aXRsZSA9IG1ha2VGb3JtSW5wdXRUZXh0KCdhZGQnLCAndGl0bGUnLCAndGl0bGUnLCAndGl0bGUnKTtcclxuICBmb3JtLmFwcGVuZENoaWxkKHRpdGxlKTtcclxuXHJcbiAgY29uc3QgZGVzY3JpcHRpb24gPSBtYWtlRm9ybUlucHV0VGV4dCgnYWRkJywgJ2Rlc2NyaXB0aW9uJywgJ2Rlc2NyaXB0aW9uJywgJ2Rlc2NyaXB0aW9uJyk7XHJcbiAgZm9ybS5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbik7XHJcblxyXG4gIGNvbnN0IGRhdGUgPSBtYWtlRm9ybUlucHV0RGF0ZSgnZGF0ZScsICdkYXRlJyk7XHJcbiAgZm9ybS5hcHBlbmRDaGlsZChkYXRlKTtcclxuXHJcbiAgY29uc3QgcHJpb3JpdHkgPSBtYWtlRm9ybUlucHV0U2VsZWN0KFxyXG4gICAgJ3ByaW9yaXR5JywgJ3ByaW9yaXR5JywgJ3ByaW9yaXR5OiAnLFxyXG4gICAgcHJpb3JpdHlMZXZlbHMsIHByaW9yaXR5TGV2ZWxzWzFdLFxyXG4gICk7XHJcbiAgZm9ybS5hcHBlbmRDaGlsZChwcmlvcml0eSk7XHJcblxyXG4gIGNvbnN0IHN1Ym1pdCA9IG1ha2VJdGVtRm9ybVN1Ym1pdCgnYWRkJywgJ2FkZCcsICdhZGQnKTtcclxuICBmb3JtLmFwcGVuZENoaWxkKHN1Ym1pdCk7XHJcblxyXG4gIHJldHVybiBmb3JtO1xyXG59O1xyXG5cclxuY29uc3QgbWFrZUFkZEl0ZW1Gb3JtID0gKHR5cGUpID0+IHtcclxuICBjb25zdCBmb3JtID0gbWFrZUFkZEl0ZW1Gb3JtQm9keSgpO1xyXG5cclxuICBmb3JtLm5hbWUgPSAnYWRkLWl0ZW0nO1xyXG4gIGZvcm0uY2xhc3NMaXN0LmFkZCgnZm9ybS1hZGQnKTtcclxuICBmb3JtLmNsYXNzTGlzdC5hZGQoYGZvcm0tYWRkLSR7dHlwZX1gKTtcclxuXHJcbiAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBwcm9jZXNzQWRkSXRlbSk7XHJcblxyXG4gIHJldHVybiBmb3JtO1xyXG59O1xyXG5cclxuY29uc3Qgc2hvd0FkZEl0ZW1Gb3JtRnJvbUhvbWUgPSAoZm9ybSkgPT4ge1xyXG4gIGNvbnN0IGl0ZW1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvbWUtaXRlbXMnKTtcclxuXHJcbiAgY29uc3QgY29udHJvbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob21lLWNvbnRyb2xzLWFkZCcpO1xyXG4gIHN3aXRjaEl0ZW1Db250cm9sKGNvbnRyb2wsICdob21lJywgdHJ1ZSk7XHJcblxyXG4gIGl0ZW1zLnByZXBlbmQoZm9ybSk7XHJcbiAgYWRqdXN0SGVpZ2h0KGZvcm0sICdkaXZbY2xhc3MkPWNvbnRlbnRdJyk7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuY29uc3Qgc2hvd0FkZFRvZG9Gcm9tUHJvamVjdCA9IChmb3JtLCBlKSA9PiB7XHJcbiAgY29uc3QgY29udGFpbmVyID0gZS50YXJnZXQucGFyZW50RWxlbWVudFxyXG4gICAgLmNsb3Nlc3QoJ2RpdltjbGFzcyQ9aGVhZGVyXScpLm5leHRTaWJsaW5nO1xyXG5cclxuICBjb25zdCBjb250cm9sID0gZS50YXJnZXQ7XHJcbiAgc3dpdGNoSXRlbUNvbnRyb2woY29udHJvbCwgJ3Byb2plY3QnLCB0cnVlKTtcclxuXHJcbiAgY29udGFpbmVyLnByZXBlbmQoZm9ybSk7XHJcbiAgYWRqdXN0SGVpZ2h0KGZvcm0sICdkaXZbY2xhc3MkPWNvbnRlbnRdJyk7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNob3dBZGRJdGVtID0gKGUpID0+IHtcclxuICBsZXQgeyB0eXBlIH0gPSBlLnRhcmdldDtcclxuICBjb25zdCBsb2NhdGlvbiA9IGUudGFyZ2V0LmlkLm1hdGNoKC9eXFx3Ky8pWzBdO1xyXG5cclxuICBzd2l0Y2ggKGxvY2F0aW9uKSB7XHJcbiAgICBjYXNlICdob21lJzoge1xyXG4gICAgICB0eXBlID0gZ2V0SG9tZVR5cGUoKTtcclxuICAgICAgY29uc3QgZm9ybSA9IG1ha2VBZGRJdGVtRnJvbUhvbWVGb3JtKHR5cGUpO1xyXG4gICAgICBzaG93QWRkSXRlbUZvcm1Gcm9tSG9tZShmb3JtKTsgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBjYXNlICdwcm9qZWN0Jzoge1xyXG4gICAgICBjb25zdCBmb3JtID0gbWFrZUFkZFRvZG9Gcm9tUHJvamVjdEZvcm0oKTtcclxuICAgICAgc2hvd0FkZFRvZG9Gcm9tUHJvamVjdChmb3JtLCBlKTsgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBkZWZhdWx0OiBjb25zb2xlLmxvZyhgc2hvd0FkZEl0ZW06IHNvcnJ5LCB3ZSBhcmUgb3V0IG9mICR7bG9jYXRpb259LmApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG5jb25zdCBwcm9jZXNzQWRkSXRlbSA9IGFzeW5jIChlKSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICBjb25zdCB7IHR5cGUgfSA9IGUudGFyZ2V0O1xyXG4gIGxldCBpdGVtID0gbWFrZUl0ZW1Gcm9tQWRkRWRpdEZvcm0oZSk7XHJcbiAgbGV0IHByb2plY3RJZCA9IG51bGw7XHJcblxyXG4gIGlmICghdmFsaWRhdGVGb3JtKHR5cGUsIGUpKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gIGNvbnN0IGxvY2F0aW9uID0gdHlwZS5tYXRjaCgvKD88PS0pXFx3KyQvKVswXTtcclxuXHJcbiAgaWYgKC90b2RvLy50ZXN0KHR5cGUpKSB7XHJcbiAgICBpdGVtID0gYWRkUHJvamVjdElkVG9Ub2RvSXRlbShlLCBsb2NhdGlvbiwgaXRlbSk7XHJcbiAgICBwcm9qZWN0SWQgPSBpdGVtLnByb2plY3RJZDtcclxuICB9XHJcblxyXG4gIGNvbnN0IGl0ZW1JZCA9IGF3YWl0IGFkZEl0ZW0odHlwZSwgaXRlbSwgcHJvamVjdElkKTtcclxuXHJcbiAgc3dpdGNoIChsb2NhdGlvbikge1xyXG4gICAgY2FzZSAnaG9tZSc6IHsgaGlkZUFkZEVkaXRJdGVtRm9ybUZyb21Ib21lKCk7IGJyZWFrOyB9XHJcbiAgICBjYXNlICdwcm9qZWN0JzogeyBoaWRlQWRkRWRpdFRvZG9Gb3JtRnJvbVByb2plY3QoZSk7IGJyZWFrOyB9XHJcbiAgICBkZWZhdWx0OiBjb25zb2xlLmxvZyhgcHJvY2Vzc0FkZEl0ZW06IHNvcnJ5LCB3ZSBhcmUgb3V0IG9mICR7bG9jYXRpb259LmApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGl0ZW1JZDtcclxufTsiLCIvKiBlc2xpbnQtZGlzYWJsZSBsaW5lYnJlYWstc3R5bGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tcGx1c3BsdXMgKi9cclxuLyogZXNsaW50LWRpc2FibGUgZW9sLWxhc3QgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tdXNlLWJlZm9yZS1kZWZpbmUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgb2JqZWN0LWN1cmx5LW5ld2xpbmUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tc2hhZG93ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1jeWNsZSAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIHByZWZlci1kZXN0cnVjdHVyaW5nICovXHJcbi8qIGVzbGludC1kaXNhYmxlIHByZWZlci1jb25zdCAqL1xyXG5cclxuaW1wb3J0IHsgVGltZXN0YW1wIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcclxuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAnZGF0ZS1mbnMnO1xyXG5pbXBvcnQge1xyXG4gIGFkZFRvZG9XaXRoSWRUb0ZpcmVzdG9yZSwgZGVsZXRlVG9kb0Zyb21GaXJlc3RvcmUsIHByb2plY3RzLFxyXG4gIHNldFByb2plY3RQcm9wc0luRmlyZXN0b3JlLCBzZXRUb2RvUHJvcHNJbkZpcmVzdG9yZSxcclxufSBmcm9tICcuLi8uLi9tb2RlbC9maXJlc3RvcmUnO1xyXG5pbXBvcnQge1xyXG4gIGdldEl0ZW1Qcm9wc0Zyb21Gb3JtLFxyXG4gIGhpZGVBZGRFZGl0SXRlbUZvcm1Gcm9tSG9tZSwgaGlkZUFkZEVkaXRUb2RvRm9ybUZyb21Qcm9qZWN0LFxyXG4gIG1ha2VGb3JtSW5wdXREYXRlLCBtYWtlRm9ybUlucHV0U2VsZWN0LCBtYWtlSXRlbUZvcm1TdWJtaXQsIG1ha2VGb3JtSW5wdXRUZXh0LFxyXG4gIHByaW9yaXR5TGV2ZWxzLCBzd2l0Y2hJdGVtQ29udHJvbCxcclxufSBmcm9tICcuL3V0aWxzJztcclxuaW1wb3J0IHsgYWRqdXN0SGVpZ2h0LCBjbGVhckNvbnRhaW5lck9mRWxlbWVudHMsIGluc2VydEFmdGVyIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5pbXBvcnQgeyBlZGl0SXRlbU9uSG9tZUxpc3QgfSBmcm9tICcuLi9jb21wb25lbnRzL2hvbWUnO1xyXG5pbXBvcnQgeyBlZGl0VG9kb09uUHJvamVjdExpc3QgfSBmcm9tICcuLi9jb21wb25lbnRzL3Byb2plY3QnO1xyXG5pbXBvcnQgeyB2YWxpZGF0ZUZvcm1BZGRUb2RvIH0gZnJvbSAnLi4vLi4vbW9kZWwvZm9ybXMnO1xyXG5cclxuY29uc3QgbWFrZUVkaXRJdGVtRm9ybUJvZHkgPSAodGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSkgPT4ge1xyXG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XHJcblxyXG4gIHRpdGxlID0gbWFrZUZvcm1JbnB1dFRleHQoJ2VkaXQnLCAndGl0bGUnLCAndGl0bGUnLCB0aXRsZSk7XHJcbiAgZm9ybS5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcblxyXG4gIGRlc2NyaXB0aW9uID0gbWFrZUZvcm1JbnB1dFRleHQoJ2VkaXQnLCAnZGVzY3JpcHRpb24nLCAnZGVzY3JpcHRpb24nLCBkZXNjcmlwdGlvbik7XHJcbiAgZm9ybS5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbik7XHJcblxyXG4gIHByaW9yaXR5ID0gbWFrZUZvcm1JbnB1dFNlbGVjdChcclxuICAgICdwcmlvcml0eScsICdwcmlvcml0eScsICdwcmlvcml0eTogJyxcclxuICAgIHByaW9yaXR5TGV2ZWxzLCBwcmlvcml0eSxcclxuICApO1xyXG4gIGZvcm0uYXBwZW5kQ2hpbGQocHJpb3JpdHkpO1xyXG5cclxuICBjb25zdCBzdWJtaXQgPSBtYWtlSXRlbUZvcm1TdWJtaXQoJ2VkaXQnLCAnc2F2ZScsICdzYXZlJyk7XHJcbiAgZm9ybS5hcHBlbmRDaGlsZChzdWJtaXQpO1xyXG5cclxuICByZXR1cm4gZm9ybTtcclxufTtcclxuXHJcbmNvbnN0IG1ha2VFZGl0UHJvamVjdEZvcm0gPSAoaWQpID0+IHtcclxuICBjb25zdCB0aXRsZSA9IHByb2plY3RzLmdldFByb2plY3RQcm9wKGlkLCAndGl0bGUnKTtcclxuICBjb25zdCBkZXNjcmlwdGlvbiA9IHByb2plY3RzLmdldFByb2plY3RQcm9wKGlkLCAnZGVzY3JpcHRpb24nKTtcclxuICBjb25zdCBwcmlvcml0eSA9IHByb2plY3RzLmdldFByb2plY3RQcm9wKGlkLCAncHJpb3JpdHknKTtcclxuICBjb25zdCBmb3JtID0gbWFrZUVkaXRJdGVtRm9ybUJvZHkodGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSk7XHJcblxyXG4gIGxldCBkYXRlID0gcHJvamVjdHMuZ2V0UHJvamVjdFByb3AoaWQsICdkdWVEYXRlJyk7XHJcbiAgZGF0ZSA9IG1ha2VGb3JtSW5wdXREYXRlKCdkYXRlJywgJ2RhdGUnLCBmb3JtYXQoZGF0ZS5zZWNvbmRzICogMTAwMCwgJ3l5eXktTU0tZGQnKSk7XHJcbiAgY29uc3QgcmVmID0gZm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFtpZD1kZXNjcmlwdGlvbl0nKTtcclxuICBpbnNlcnRBZnRlcihkYXRlLCByZWYpO1xyXG5cclxuICBmb3JtLnR5cGUgPSAncHJvamVjdCc7XHJcbiAgZm9ybS5pdGVtSWQgPSBpZDtcclxuXHJcbiAgcmV0dXJuIGZvcm07XHJcbn07XHJcblxyXG5jb25zdCBtYWtlRWRpdFRvZG9Gb3JtID0gKHRvZG9JZCkgPT4ge1xyXG4gIGNvbnN0IHByb2plY3RJZCA9IHByb2plY3RzLmdldFByb2plY3RQcm9wRnJvbVRvZG9JZCh0b2RvSWQsICdpZCcpO1xyXG5cclxuICBjb25zdCB0aXRsZSA9IHByb2plY3RzLmdldFRvZG9Qcm9wKHByb2plY3RJZCwgdG9kb0lkLCAndGl0bGUnKTtcclxuICBjb25zdCBkZXNjcmlwdGlvbiA9IHByb2plY3RzLmdldFRvZG9Qcm9wKHByb2plY3RJZCwgdG9kb0lkLCAnZGVzY3JpcHRpb24nKTtcclxuICBjb25zdCBwcmlvcml0eSA9IHByb2plY3RzLmdldFRvZG9Qcm9wKHByb2plY3RJZCwgdG9kb0lkLCAncHJpb3JpdHknKTtcclxuICBjb25zdCBmb3JtID0gbWFrZUVkaXRJdGVtRm9ybUJvZHkodGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSk7XHJcblxyXG4gIGxldCBwcm9qZWN0VGl0bGVzID0gcHJvamVjdHMuZ2V0UHJvamVjdHNQcm9wKCd0aXRsZScpO1xyXG4gIHByb2plY3RUaXRsZXMgPSBtYWtlRm9ybUlucHV0U2VsZWN0KFxyXG4gICAgJ3Byb2plY3QnLCAncHJvamVjdCcsICdwcm9qZWN0OiAnLCBwcm9qZWN0VGl0bGVzLFxyXG4gICAgcHJvamVjdHMuZ2V0UHJvamVjdFByb3BGcm9tVG9kb0lkKHRvZG9JZCwgJ3RpdGxlJyksXHJcbiAgKTtcclxuICBmb3JtLnByZXBlbmQocHJvamVjdFRpdGxlcyk7XHJcblxyXG4gIGxldCBkYXRlID0gcHJvamVjdHMuZ2V0VG9kb1Byb3AocHJvamVjdElkLCB0b2RvSWQsICdkdWVEYXRlJyk7XHJcblxyXG4gIGRhdGUgPSBtYWtlRm9ybUlucHV0RGF0ZSgnZGF0ZScsICdkYXRlJywgZm9ybWF0KGRhdGUuc2Vjb25kcyAqIDEwMDAsICd5eXl5LU1NLWRkJykpO1xyXG4gIGNvbnN0IHJlZiA9IGZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXRbaWQ9ZGVzY3JpcHRpb25dJyk7XHJcbiAgaW5zZXJ0QWZ0ZXIoZGF0ZSwgcmVmKTtcclxuXHJcbiAgZm9ybS50eXBlID0gJ3RvZG8nO1xyXG4gIGZvcm0uaXRlbUlkID0gdG9kb0lkO1xyXG5cclxuICByZXR1cm4gZm9ybTtcclxufTtcclxuXHJcbmNvbnN0IG1ha2VFZGl0SXRlbUZvcm0gPSAoaWQpID0+IHtcclxuICBjb25zdCBpdGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG5cclxuICBsZXQgbG9jYXRpb24gPSAnaG9tZSc7IGxldCB0eXBlID0gaXRlbS5jbGFzc0xpc3RbMV07XHJcbiAgaWYgKC8tLy50ZXN0KHR5cGUpKSB7XHJcbiAgICBsb2NhdGlvbiA9IHR5cGUubWF0Y2goL15cXHcrKD89LSkvKVswXTtcclxuICAgIHR5cGUgPSB0eXBlLm1hdGNoKC8oPzw9LSlcXHcrJC8pWzBdO1xyXG4gIH1cclxuXHJcbiAgbGV0IGZvcm0gPSBudWxsO1xyXG4gIHN3aXRjaCAodHlwZSkge1xyXG4gICAgY2FzZSAncHJvamVjdCc6IHsgZm9ybSA9IG1ha2VFZGl0UHJvamVjdEZvcm0oaWQpOyBicmVhazsgfVxyXG4gICAgY2FzZSAndG9kbyc6IHsgZm9ybSA9IG1ha2VFZGl0VG9kb0Zvcm0oaWQpOyBicmVhazsgfVxyXG4gICAgZGVmYXVsdDogY29uc29sZS5sb2coYG1ha2VFZGl0SXRlbUZvcm06IHNvcnJ5LCB3ZSBhcmUgb3V0IG9mICR7dHlwZX0uYCk7XHJcbiAgfVxyXG5cclxuICBPYmplY3QuZW50cmllcyh7IG5hbWU6ICdlZGl0LWl0ZW0nLCBsb2NhdGlvbiwgaXRlbUlkOiBpZCB9KVxyXG4gICAgLy8gLmZvckVhY2goKHgpID0+IHsgZm9ybVt4WzBdXSA9IHhbMV07IH0pO1xyXG4gICAgLmZvckVhY2goKHgpID0+IHsgZm9ybS5zZXRBdHRyaWJ1dGUoeFswXSwgeFsxXSk7IH0pO1xyXG4gIFsnZm9ybS1lZGl0JywgYGZvcm0tZWRpdC0ke2xvY2F0aW9ufWBdXHJcbiAgICAuZm9yRWFjaCgoeCkgPT4gZm9ybS5jbGFzc0xpc3QuYWRkKHgpKTtcclxuXHJcbiAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBwcm9jZXNzRWRpdEl0ZW0pO1xyXG5cclxuICByZXR1cm4gZm9ybTtcclxufTtcclxuXHJcbmNvbnN0IHNob3dFZGlJdGVtRnJvbUhvbWUgPSAoZm9ybSkgPT4ge1xyXG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob21lLWl0ZW1zJyk7XHJcblxyXG4gIGNvbnN0IGNvbnRyb2wgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG9tZS1jb250cm9scy1hZGQnKTtcclxuICBzd2l0Y2hJdGVtQ29udHJvbChjb250cm9sLCAnaG9tZScsIHRydWUpO1xyXG5cclxuICBjbGVhckNvbnRhaW5lck9mRWxlbWVudHMoY29udGFpbmVyLCAnZm9ybScpO1xyXG4gIGNvbnRhaW5lci5wcmVwZW5kKGZvcm0pO1xyXG4gIGFkanVzdEhlaWdodChmb3JtLCAnZGl2W2NsYXNzJD1jb250ZW50XScpO1xyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbmNvbnN0IHNob3dFZGl0VG9kb0Zyb21Qcm9qZWN0ID0gKGZvcm0pID0+IHtcclxuICBjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnRcclxuICAgIC5nZXRFbGVtZW50QnlJZChwcm9qZWN0cy5nZXRQcm9qZWN0UHJvcEZyb21Ub2RvSWQoZm9ybS5pdGVtSWQsICdpZCcpKTtcclxuICBjb25zdCBjb250YWluZXIgPSBwcm9qZWN0LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LXRvZG9zLWxpc3QnKTtcclxuXHJcbiAgY29uc3QgY29udHJvbCA9IHByb2plY3QucXVlcnlTZWxlY3RvcignI3Byb2plY3QtYWRkLXRvZG8nKTtcclxuICBzd2l0Y2hJdGVtQ29udHJvbChjb250cm9sLCAncHJvamVjdCcsIHRydWUpO1xyXG5cclxuICBjbGVhckNvbnRhaW5lck9mRWxlbWVudHMoY29udGFpbmVyLCAnZm9ybScpO1xyXG4gIGNvbnRhaW5lci5wcmVwZW5kKGZvcm0pO1xyXG4gIGFkanVzdEhlaWdodChmb3JtLCAnZGl2W2NsYXNzJD1jb250ZW50XScpO1xyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzaG93RWRpdEl0ZW0gPSAoZSkgPT4ge1xyXG4gIGNvbnN0IHsgdHlwZSB9ID0gZS50YXJnZXQ7XHJcblxyXG4gIGNvbnN0IHsgaWQgfSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xvc2VzdChgZGl2W2NsYXNzKj0ke3R5cGV9XWApO1xyXG4gIGNvbnN0IGZvcm0gPSBtYWtlRWRpdEl0ZW1Gb3JtKGlkKTtcclxuXHJcbiAgY29uc3QgbG9jYXRpb24gPSBmb3JtLmdldEF0dHJpYnV0ZSgnbG9jYXRpb24nKTtcclxuICBzd2l0Y2ggKGxvY2F0aW9uKSB7XHJcbiAgICBjYXNlICdob21lJzogeyBzaG93RWRpSXRlbUZyb21Ib21lKGZvcm0pOyBicmVhazsgfVxyXG4gICAgY2FzZSAncHJvamVjdCc6IHsgc2hvd0VkaXRUb2RvRnJvbVByb2plY3QoZm9ybSk7IGJyZWFrOyB9XHJcbiAgICBkZWZhdWx0OiBjb25zb2xlLmxvZyhgc2hvd0VkaXRJdGVtOiBzb3JyeSwgd2UgYXJlIG91dCBvZiAke2xvY2F0aW9ufS5gKTtcclxuICB9XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuY29uc3QgZWRpdFByb2plY3REYXRhID0gYXN5bmMgKGUsIGlkKSA9PiB7XHJcbiAgY29uc3QgcHJvcHMgPSBnZXRJdGVtUHJvcHNGcm9tRm9ybSgncHJvamVjdCcsIGUpO1xyXG5cclxuICBwcm9wcy5kdWVEYXRlID0gbmV3IERhdGUocHJvcHMuZHVlRGF0ZSk7XHJcbiAgYXdhaXQgc2V0UHJvamVjdFByb3BzSW5GaXJlc3RvcmUoaWQsIHByb3BzKTtcclxuXHJcbiAgcHJvcHMuZHVlRGF0ZSA9IFRpbWVzdGFtcC5mcm9tRGF0ZShwcm9wcy5kdWVEYXRlKTtcclxuICBwcm9qZWN0cy5zZXRQcm9qZWN0UHJvcHMoaWQsIHByb3BzKTtcclxuXHJcbiAgcmV0dXJuIGlkO1xyXG59O1xyXG5cclxuY29uc3QgZWRpdFRvZG9EYXRhID0gYXN5bmMgKGUsIHRvZG9JZCkgPT4ge1xyXG4gIGxldCB7IHByb2plY3QsIC4uLnByb3BzIH0gPSBnZXRJdGVtUHJvcHNGcm9tRm9ybSgndG9kbycsIGUpO1xyXG4gIGNvbnN0IG5ld1Byb2plY3RJZCA9IHByb2plY3RzLmdldFByb2plY3RJZEZyb21Qcm9wKCd0aXRsZScsIHByb2plY3QpO1xyXG4gIGNvbnN0IG9yaWdpbmFsUHJvamVjdElkID0gcHJvamVjdHMuZ2V0UHJvamVjdFByb3BGcm9tVG9kb0lkKHRvZG9JZCwgJ2lkJyk7XHJcblxyXG4gIGlmIChuZXdQcm9qZWN0SWQgIT09IG9yaWdpbmFsUHJvamVjdElkKSB7XHJcbiAgICBpZiAoIXZhbGlkYXRlRm9ybUFkZFRvZG8obmV3UHJvamVjdElkLCBlKSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIGNvbnN0IHN0YXR1cyA9IHByb2plY3RzLmdldFRvZG9Qcm9wKG9yaWdpbmFsUHJvamVjdElkLCB0b2RvSWQsICdzdGF0dXMnKTtcclxuICAgIHByb3BzID0geyBzdGF0dXMsIC4uLnByb3BzIH07XHJcbiAgICBwcm9wcy5kdWVEYXRlID0gbmV3IERhdGUocHJvcHMuZHVlRGF0ZSk7XHJcbiAgICBhd2FpdCBhZGRUb2RvV2l0aElkVG9GaXJlc3RvcmUobmV3UHJvamVjdElkLCB0b2RvSWQsIHByb3BzKTtcclxuICAgIHByb3BzID0geyBwcm9qZWN0VGl0bGU6IHByb2plY3QsIC4uLnByb3BzIH07XHJcbiAgICBwcm9wcy5kdWVEYXRlID0gVGltZXN0YW1wLmZyb21EYXRlKHByb3BzLmR1ZURhdGUpO1xyXG4gICAgcHJvamVjdHMuYWRkVG9kbyhuZXdQcm9qZWN0SWQsIHByb3BzKTtcclxuXHJcbiAgICBhd2FpdCBkZWxldGVUb2RvRnJvbUZpcmVzdG9yZShvcmlnaW5hbFByb2plY3RJZCwgdG9kb0lkKTtcclxuICAgIHByb2plY3RzLmRlbGV0ZVRvZG8ob3JpZ2luYWxQcm9qZWN0SWQsIHRvZG9JZCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHByb3BzLmR1ZURhdGUgPSBuZXcgRGF0ZShwcm9wcy5kdWVEYXRlKTtcclxuICAgIGF3YWl0IHNldFRvZG9Qcm9wc0luRmlyZXN0b3JlKG5ld1Byb2plY3RJZCwgdG9kb0lkLCBwcm9wcyk7XHJcblxyXG4gICAgcHJvcHMuZHVlRGF0ZSA9IFRpbWVzdGFtcC5mcm9tRGF0ZShwcm9wcy5kdWVEYXRlKTtcclxuICAgIHByb2plY3RzLnNldFRvZG9Qcm9wcyhuZXdQcm9qZWN0SWQsIHRvZG9JZCwgcHJvcHMpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRvZG9JZDtcclxufTtcclxuXHJcbmNvbnN0IGVkaXRQcm9qZWN0ID0gYXN5bmMgKGUsIGlkKSA9PiB7XHJcbiAgY29uc3QgcHJvcHMgPSBnZXRJdGVtUHJvcHNGcm9tRm9ybSgncHJvamVjdCcsIGUpO1xyXG5cclxuICBhd2FpdCBlZGl0UHJvamVjdERhdGEoZSwgaWQpO1xyXG4gIGVkaXRJdGVtT25Ib21lTGlzdChpZCwgcHJvcHMpO1xyXG5cclxuICBoaWRlQWRkRWRpdEl0ZW1Gb3JtRnJvbUhvbWUoZSk7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuY29uc3QgZWRpdFRvZG8gPSBhc3luYyAoZSwgaWQpID0+IHtcclxuICBjb25zdCBwcm9wcyA9IGdldEl0ZW1Qcm9wc0Zyb21Gb3JtKCd0b2RvJywgZSk7XHJcbiAgY29uc3QgbG9jYXRpb24gPSBlLnRhcmdldC5jbGFzc0xpc3RbMV0ubWF0Y2goLyg/PD0tKVxcdyskLylbMF07XHJcblxyXG4gIGF3YWl0IGVkaXRUb2RvRGF0YShlLCBpZCk7XHJcblxyXG4gIHN3aXRjaCAobG9jYXRpb24pIHtcclxuICAgIGNhc2UgJ2hvbWUnOiB7IGVkaXRJdGVtT25Ib21lTGlzdChpZCwgcHJvcHMpOyBoaWRlQWRkRWRpdEl0ZW1Gb3JtRnJvbUhvbWUoKTsgYnJlYWs7IH1cclxuICAgIGNhc2UgJ3Byb2plY3QnOiB7IGVkaXRUb2RvT25Qcm9qZWN0TGlzdChpZCwgcHJvcHMpOyBoaWRlQWRkRWRpdFRvZG9Gb3JtRnJvbVByb2plY3QoZSk7IGJyZWFrOyB9XHJcbiAgICBkZWZhdWx0OiBjb25zb2xlLmxvZyhgZWRpdFRvZG86IHNvcnJ5LCB3ZSBhcmUgb3V0IG9mICR7bG9jYXRpb259LmApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcHJvY2Vzc0VkaXRJdGVtID0gYXN5bmMgKGUpID0+IHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gIGNvbnN0IHsgdHlwZSB9ID0gZS50YXJnZXQ7XHJcbiAgY29uc3QgaWQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2l0ZW1JZCcpO1xyXG5cclxuICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgIGNhc2UgJ3Byb2plY3QnOiB7IGF3YWl0IGVkaXRQcm9qZWN0KGUsIGlkKTsgYnJlYWs7IH1cclxuICAgIGNhc2UgJ3RvZG8nOiB7IGVkaXRUb2RvKGUsIGlkKTsgYnJlYWs7IH1cclxuICAgIGRlZmF1bHQ6IGNvbnNvbGUubG9nKGBwcm9jZXNzQWRkSXRlbTogc29ycnksIHdlIGFyZSBvdXQgb2YgJHt0eXBlfS5gKTtcclxuICB9XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBsaW5lYnJlYWstc3R5bGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tcGx1c3BsdXMgKi9cclxuLyogZXNsaW50LWRpc2FibGUgZW9sLWxhc3QgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tdXNlLWJlZm9yZS1kZWZpbmUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgb2JqZWN0LWN1cmx5LW5ld2xpbmUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tc2hhZG93ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1jeWNsZSAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIHByZWZlci1kZXN0cnVjdHVyaW5nICovXHJcbi8qIGVzbGludC1kaXNhYmxlIHByZWZlci1jb25zdCAqL1xyXG5cclxuaW1wb3J0IHsgVGltZXN0YW1wIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcclxuaW1wb3J0IHsgYWRkWWVhcnMsIGZvcm1hdCB9IGZyb20gJ2RhdGUtZm5zJztcclxuaW1wb3J0IHsgcHJvamVjdHMgfSBmcm9tICcuLi8uLi9tb2RlbC9maXJlc3RvcmUnO1xyXG5pbXBvcnQgeyBzaG93QWRkSXRlbSB9IGZyb20gJy4vYWRkSXRlbSc7XHJcbmltcG9ydCB7IGNsZWFyQ29udGFpbmVyT2ZFbGVtZW50cyB9IGZyb20gJy4uL3V0aWxzJztcclxuaW1wb3J0ICcuL2Zvcm1zLmNzcyc7XHJcblxyXG5leHBvcnQgY29uc3QgcHJpb3JpdHlMZXZlbHMgPSBbJ2hpZ2gnLCAnbW9kZXJhdGUnLCAnbG93J107XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0SXRlbVByb3BzRnJvbUZvcm0gPSAodHlwZSwgZSkgPT4ge1xyXG4gIGNvbnN0IHByb3BzID0ge307XHJcbiAgaWYgKHR5cGUgPT09ICd0b2RvJykgcHJvcHMucHJvamVjdCA9IGUudGFyZ2V0LnByb2plY3QudmFsdWU7XHJcbiAgcHJvcHMuaWQgPSBlLnRhcmdldC5pdGVtSWQ7XHJcbiAgcHJvcHMudGl0bGUgPSBlLnRhcmdldC50aXRsZS52YWx1ZTtcclxuICBwcm9wcy5kZXNjcmlwdGlvbiA9IGUudGFyZ2V0LmRlc2NyaXB0aW9uLnZhbHVlO1xyXG4gIHByb3BzLmR1ZURhdGUgPSBlLnRhcmdldC5kYXRlLnZhbHVlO1xyXG4gIHByb3BzLnByaW9yaXR5ID0gZS50YXJnZXQucHJpb3JpdHkudmFsdWU7XHJcblxyXG4gIHJldHVybiBwcm9wcztcclxufTtcclxuXHJcbi8vIGNvbnN0IG1ha2VJdGVtID0gKGUpID0+ICh7XHJcbi8vICAgdGl0bGU6IGUudGFyZ2V0LnRpdGxlLnZhbHVlLFxyXG4vLyAgIGRlc2NyaXB0aW9uOiBlLnRhcmdldC5kZXNjcmlwdGlvbi52YWx1ZSxcclxuLy8gICBkdWVEYXRlOiBUaW1lc3RhbXAuZnJvbURhdGUobmV3IERhdGUoZS50YXJnZXQuZGF0ZS52YWx1ZSkpLFxyXG4vLyAgIHByaW9yaXR5OiBlLnRhcmdldC5wcmlvcml0eS52YWx1ZSxcclxuLy8gICBzdGF0dXM6ICdvcGVuJyxcclxuLy8gfSk7XHJcblxyXG5leHBvcnQgY29uc3QgbWFrZUZvcm1JbnB1dFRleHQgPSAodHlwZSwgaWQsIG5hbWUsIHRleHQpID0+IHtcclxuICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgaW5wdXQudHlwZSA9ICd0ZXh0JztcclxuICBpbnB1dC5pZCA9IGlkO1xyXG4gIGlucHV0Lm5hbWUgPSBuYW1lO1xyXG5cclxuICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgIGNhc2UgJ2FkZCc6IHsgaW5wdXQucGxhY2Vob2xkZXIgPSB0ZXh0OyBicmVhazsgfVxyXG4gICAgY2FzZSAnZWRpdCc6IHsgaW5wdXQudmFsdWUgPSB0ZXh0OyBicmVhazsgfVxyXG4gICAgZGVmYXVsdDogY29uc29sZS5sb2coYG1ha2VGb3JtSW5wdXRUZXh0OiBzb3JyeSwgd2UgYXJlIG91dCBvZiAke3R5cGV9LmApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGlucHV0O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IG1ha2VGb3JtSW5wdXRTZWxlY3QgPSAoaWQsIG5hbWUsIHRleHQsIGNob2ljZXMsIHNlbGVjdGVkID0gbnVsbCkgPT4ge1xyXG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XHJcbiAgaW5wdXQudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gIGlucHV0LmZvciA9IG5hbWU7XHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGlucHV0KTtcclxuICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTtcclxuICBzZWxlY3QuaWQgPSBpZDtcclxuICBzZWxlY3QubmFtZSA9IG5hbWU7XHJcbiAgY2hvaWNlcy5mb3JFYWNoKChjaG9pY2UpID0+IHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgb3B0aW9uLnZhbHVlID0gY2hvaWNlO1xyXG4gICAgaWYgKGNob2ljZSA9PT0gc2VsZWN0ZWQpIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICBvcHRpb24udGV4dENvbnRlbnQgPSBjaG9pY2U7XHJcbiAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICB9KTtcclxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZWN0KTtcclxuXHJcbiAgcmV0dXJuIGNvbnRhaW5lcjtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBtYWtlRm9ybUlucHV0RGF0ZSA9IChcclxuICBpZCwgbmFtZSwgdmFsdWUgPSBmb3JtYXQobmV3IERhdGUoKSwgJ3l5eXktTU0tZGQnKSxcclxuICBtaW4gPSBuZXcgRGF0ZSgpLCBtYXggPSBhZGRZZWFycyhuZXcgRGF0ZSgpLCAxKSxcclxuKSA9PiB7XHJcbiAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gIGlucHV0LnR5cGUgPSAnZGF0ZSc7XHJcbiAgaW5wdXQuaWQgPSBpZDtcclxuICBpbnB1dC5uYW1lID0gbmFtZTtcclxuICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xyXG4gIGlucHV0Lm1pbiA9IG1pbjtcclxuICBpbnB1dC5tYXggPSBtYXg7XHJcblxyXG4gIHJldHVybiBpbnB1dDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBtYWtlSXRlbUZvcm1TdWJtaXQgPSAodHlwZSwgaWQsIHRleHQpID0+IHtcclxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBjb250YWluZXIuaWQgPSBgc3VibWl0LSR7dHlwZX0tZm9ybWA7XHJcbiAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gIGlucHV0LnR5cGUgPSAnc3VibWl0JztcclxuICBpbnB1dC5pZCA9IGlkO1xyXG4gIGlucHV0LnZhbHVlID0gdGV4dDtcclxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG5cclxuICByZXR1cm4gY29udGFpbmVyO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IG1ha2VJdGVtRnJvbUFkZEVkaXRGb3JtID0gKGUpID0+ICh7XHJcbiAgdGl0bGU6IGUudGFyZ2V0LnRpdGxlLnZhbHVlLFxyXG4gIGRlc2NyaXB0aW9uOiBlLnRhcmdldC5kZXNjcmlwdGlvbi52YWx1ZSxcclxuICBkdWVEYXRlOiBUaW1lc3RhbXAuZnJvbURhdGUobmV3IERhdGUoZS50YXJnZXQuZGF0ZS52YWx1ZSkpLFxyXG4gIHByaW9yaXR5OiBlLnRhcmdldC5wcmlvcml0eS52YWx1ZSxcclxuICBzdGF0dXM6ICdvcGVuJyxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgYWRkUHJvamVjdElkVG9Ub2RvSXRlbSA9IChlLCBsb2NhdGlvbiwgaXRlbSkgPT4ge1xyXG4gIGxldCBwcm9qZWN0SWQgPSBudWxsO1xyXG4gIHN3aXRjaCAobG9jYXRpb24pIHtcclxuICAgIGNhc2UgJ2hvbWUnOiB7XHJcbiAgICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGUudGFyZ2V0LnByb2plY3QudmFsdWU7XHJcbiAgICAgIGl0ZW0gPSB7IHByb2plY3RUaXRsZSwgLi4uaXRlbSB9O1xyXG4gICAgICBwcm9qZWN0SWQgPSBwcm9qZWN0cy5nZXRQcm9qZWN0SWRCeVByb3AoJ3RpdGxlJywgcHJvamVjdFRpdGxlKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBjYXNlICdwcm9qZWN0Jzoge1xyXG4gICAgICBwcm9qZWN0SWQgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNsb3Nlc3QoJ2RpdltjbGFzc349cHJvamVjdF0nKS5pZDtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICBjb25zb2xlLmxvZyhgYWRkUHJvamVjdElkVG9Ub2RvSXRlbTogc29ycnksIHdlIGFyZSBvdXQgb2YgJHtsb2NhdGlvbn0uYCk7XHJcbiAgfVxyXG4gIGl0ZW0gPSB7IHByb2plY3RJZCwgLi4uaXRlbSB9O1xyXG5cclxuICByZXR1cm4gaXRlbTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBoaWRlQWRkRWRpdEl0ZW1Gb3JtRnJvbUhvbWUgPSAoKSA9PiB7XHJcbiAgY29uc3QgaXRlbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG9tZS1pdGVtcycpO1xyXG4gIGNvbnN0IGNvbnRyb2wgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG9tZS1jb250cm9scy1hZGQnKTtcclxuICBzd2l0Y2hJdGVtQ29udHJvbChjb250cm9sLCAnaG9tZScsIGZhbHNlKTtcclxuXHJcbiAgY2xlYXJDb250YWluZXJPZkVsZW1lbnRzKGl0ZW1zLCAnZm9ybScpO1xyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBoaWRlQWRkRWRpdFRvZG9Gb3JtRnJvbVByb2plY3QgPSAoZSkgPT4ge1xyXG4gIGNvbnN0IGNvbnRhaW5lciA9IGUudGFyZ2V0LmNsb3Nlc3QoXCJbY2xhc3N+PSdwcm9qZWN0J11cIilcclxuICAgIC5xdWVyeVNlbGVjdG9yKCdbY2xhc3MqPXByb2plY3QtdG9kb3MtbGlzdF0nKTtcclxuXHJcbiAgY29uc3QgY29udHJvbCA9IGNvbnRhaW5lci5wYXJlbnRFbGVtZW50XHJcbiAgICAucXVlcnlTZWxlY3RvcignLnByb2plY3QtdG9kb3MtaGVhZGVyLWJ1dHRvbicpO1xyXG4gIHN3aXRjaEl0ZW1Db250cm9sKGNvbnRyb2wsICdwcm9qZWN0JywgZmFsc2UpO1xyXG5cclxuICBjbGVhckNvbnRhaW5lck9mRWxlbWVudHMoY29udGFpbmVyLCAnZm9ybScpO1xyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzd2l0Y2hJdGVtQ29udHJvbCA9IChjb250cm9sLCB0eXBlLCBzaG93ID0gdHJ1ZSkgPT4ge1xyXG4gIGNvbnRyb2wudGV4dENvbnRlbnQgPSAoc2hvdykgPyAnY2FuY2VsJyA6ICdhZGQnO1xyXG5cclxuICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgIGNhc2UgJ2hvbWUnOiB7XHJcbiAgICAgIGNvbnRyb2wucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoc2hvdykgPyBzaG93QWRkSXRlbSA6IGhpZGVBZGRFZGl0SXRlbUZvcm1Gcm9tSG9tZSk7XHJcbiAgICAgIGNvbnRyb2wuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoc2hvdykgPyBoaWRlQWRkRWRpdEl0ZW1Gb3JtRnJvbUhvbWUgOiBzaG93QWRkSXRlbSk7IGJyZWFrO1xyXG4gICAgfVxyXG4gICAgY2FzZSAncHJvamVjdCc6IHtcclxuICAgICAgY29udHJvbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIChzaG93KSA/IHNob3dBZGRJdGVtIDogaGlkZUFkZEVkaXRUb2RvRm9ybUZyb21Qcm9qZWN0KTtcclxuICAgICAgY29udHJvbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChzaG93KSA/IGhpZGVBZGRFZGl0VG9kb0Zvcm1Gcm9tUHJvamVjdCA6IHNob3dBZGRJdGVtKTsgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBkZWZhdWx0OiBjb25zb2xlLmxvZyhgc3dpdGNoSXRlbUNvbnRyb2w6IHNvcnJ5LCB3ZSBhcmUgb3V0IG9mICR7dHlwZX0uYCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuIiwiLyogZXNsaW50LWRpc2FibGUgbGluZWJyZWFrLXN0eWxlICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBsdXNwbHVzICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGVvbC1sYXN0ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVzZS1iZWZvcmUtZGVmaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG9iamVjdC1jdXJseS1uZXdsaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXNoYWRvdyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tY3ljbGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBkZWZhdWx0LWNhc2UgKi9cclxuXHJcbmltcG9ydCB7IGdldFByb3BzRnJvbURPTUl0ZW0gfSBmcm9tICcuLi9jb21wb25lbnRzL2l0ZW0nO1xyXG5cclxuZXhwb3J0IGNvbnN0IG92ZXJkdWVDbGFzc2VzID0gWydvdmVyZHVlJywgJ2hhc092ZXJkdWUnXTtcclxuXHJcbmNvbnN0IGNoZWNrSWZEYXRlUGFzc2VkID0gKGRhdGUpID0+IHtcclxuICBkYXRlID0gZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcclxuICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XHJcblxyXG4gIHJldHVybiBkYXRlIDwgdG9kYXk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY2hlY2tJZkl0ZW1PdmVyZHVlID0gKGl0ZW0pID0+IHtcclxuICBjb25zdCBkdWVEYXRlID0gbmV3IERhdGUoaXRlbS5kdWVEYXRlLnNlY29uZHMgKiAxMDAwKTtcclxuXHJcbiAgcmV0dXJuIGNoZWNrSWZEYXRlUGFzc2VkKGR1ZURhdGUpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNoZWNrSWZQcm9qZWN0SGFzT3ZlcmR1ZVRvZG8gPSAocHJvamVjdCkgPT4ge1xyXG4gIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS5zZXRIb3VycygwLCAwLCAwLCAwKTtcclxuICBjb25zdCB0ZXN0cyA9IHByb2plY3QudG9kb3NcclxuICAgIC5tYXAoKHRvZG8pID0+IG5ldyBEYXRlKHRvZG8uZHVlRGF0ZS5zZWNvbmRzICogMTAwMCkuc2V0SG91cnMoMCwgMCwgMCwgMCkgPCB0b2RheSk7XHJcbiAgcmV0dXJuIHRlc3RzLmluY2x1ZGVzKHRydWUpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNob3dJdGVtQXNPdmVyZHVlID0gKGl0ZW0pID0+IGl0ZW0uY2xhc3NMaXN0LmFkZCgnb3ZlcmR1ZScpO1xyXG5leHBvcnQgY29uc3Qgc2hvd0l0ZW1Bc05vdE92ZXJkdWUgPSAoaXRlbSkgPT4gaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdvdmVyZHVlJyk7XHJcbmV4cG9ydCBjb25zdCBzaG93UHJvamVjdEhhc092ZXJkdWUgPSAoaXRlbSkgPT4gaXRlbS5jbGFzc0xpc3QuYWRkKCdoYXNPdmVyZHVlJyk7XHJcbmV4cG9ydCBjb25zdCBzaG93UHJvamVjdEhhc250T3ZlcmR1ZSA9IChpdGVtKSA9PiBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2hhc092ZXJkdWUnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBzb3J0SXRlbU92ZXJkdWVTdGF0dXMgPSAocHJvcHMsIGNvbnRhaW5lcikgPT4ge1xyXG4gIGNvbnN0IG92ZXJkdWUgPSBjaGVja0lmSXRlbU92ZXJkdWUocHJvcHMpO1xyXG4gIHN3aXRjaCAob3ZlcmR1ZSkge1xyXG4gICAgY2FzZSB0cnVlOiB7IHNob3dJdGVtQXNPdmVyZHVlKGNvbnRhaW5lcik7IGJyZWFrOyB9XHJcbiAgICBjYXNlIGZhbHNlOiB7IHNob3dJdGVtQXNOb3RPdmVyZHVlKGNvbnRhaW5lcik7IGJyZWFrOyB9XHJcbiAgICBkZWZhdWx0OiBjb25zb2xlLmxvZyhgc29ydEl0ZW1PdmVyZHVlU3RhdHVzOiBzb3JyeSwgd2UgYXJlIG91dCBvZiAke292ZXJkdWV9LmApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG5jb25zdCBzb3J0UHJvamVjdFRvZG9zT3ZlcmR1ZVN0YXR1cyA9ICh0b2RvcykgPT4ge1xyXG4gIHRvZG9zLmZvckVhY2goKHRvZG8pID0+IHtcclxuICAgIGNvbnN0IHByb3BzID0gZ2V0UHJvcHNGcm9tRE9NSXRlbSh0b2RvKTtcclxuICAgIHNvcnRJdGVtT3ZlcmR1ZVN0YXR1cyhwcm9wcywgdG9kbyk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNvcnRQcm9qZWN0SGFzT3ZlcmR1ZVN0YXR1cyA9IChwcm9wcywgY29udGFpbmVyKSA9PiB7XHJcbiAgY29uc3QgaGFzT3ZlcmR1ZSA9IGNoZWNrSWZQcm9qZWN0SGFzT3ZlcmR1ZVRvZG8ocHJvcHMpO1xyXG4gIHN3aXRjaCAoaGFzT3ZlcmR1ZSkge1xyXG4gICAgY2FzZSB0cnVlOiB7IHNob3dQcm9qZWN0SGFzT3ZlcmR1ZShjb250YWluZXIpOyBicmVhazsgfVxyXG4gICAgY2FzZSBmYWxzZTogeyBzaG93UHJvamVjdEhhc250T3ZlcmR1ZShjb250YWluZXIpOyBicmVhazsgfVxyXG4gICAgZGVmYXVsdDogY29uc29sZS5sb2coYHNvcnRJdGVtT3ZlcmR1ZVN0YXR1czogc29ycnksIHdlIGFyZSBvdXQgb2YgJHtoYXNPdmVyZHVlfS5gKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHRvZG9zID0gQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnW2NsYXNzfj1wcm9qZWN0LXRvZG9dJykpO1xyXG4gIGlmICh0b2Rvcy5sZW5ndGggPiAwKSBzb3J0UHJvamVjdFRvZG9zT3ZlcmR1ZVN0YXR1cyh0b2Rvcyk7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNvcnRQYXJlbnRQcm9qZWN0SGFzT3ZlcmR1ZVN0YXR1cyA9ICh0b2RvSWQsIHRvZG9EdWVEYXRlKSA9PiB7XHJcbiAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRvZG9JZCkucGFyZW50RWxlbWVudFxyXG4gICAgLmNsb3Nlc3QoJ1tjbGFzc349cHJvamVjdF0nKTtcclxuICBjb25zdCBvdmVyZHVlID0gY2hlY2tJZkRhdGVQYXNzZWQobmV3IERhdGUodG9kb0R1ZURhdGUuc2Vjb25kcyAqIDEwMDApKTtcclxuXHJcbiAgc3dpdGNoIChvdmVyZHVlKSB7XHJcbiAgICBjYXNlIHRydWU6IHsgc2hvd1Byb2plY3RIYXNPdmVyZHVlKHByb2plY3QpOyBicmVhazsgfVxyXG4gICAgY2FzZSBmYWxzZTogeyBzaG93UHJvamVjdEhhc250T3ZlcmR1ZShwcm9qZWN0KTsgYnJlYWs7IH1cclxuICAgIGRlZmF1bHQ6IGNvbnNvbGUubG9nKGBzb3J0UHJvamVjdE92ZXJkdWVTdGF0dXM6IHNvcnJ5LCB3ZSBhcmUgb3V0IG9mICR7b3ZlcmR1ZX0uYCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuIiwiLyogZXNsaW50LWRpc2FibGUgbGluZWJyZWFrLXN0eWxlICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBsdXNwbHVzICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGVvbC1sYXN0ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVzZS1iZWZvcmUtZGVmaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG9iamVjdC1jdXJseS1uZXdsaW5lICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXNoYWRvdyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tY3ljbGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25hbWVkICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnQgKi9cclxuLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLWRlc3RydWN0dXJpbmcgKi9cclxuLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLWNvbnN0ICovXHJcblxyXG5pbXBvcnQgeyBvdmVyZHVlQ2xhc3Nlcywgc29ydEl0ZW1PdmVyZHVlU3RhdHVzLCBzb3J0UHJvamVjdEhhc092ZXJkdWVTdGF0dXMgfSBmcm9tICcuL292ZXJkdWUnO1xyXG5pbXBvcnQgeyB0b2dnbGVDb2xsYXBzZSwgdG9nZ2xlRWxlbWVudENsYXNzLCB0b2dnbGVFbGVtZW50c0NsYXNzIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5pbXBvcnQge1xyXG4gIGNvbGxhcHNlSXRlbSxcclxuICBnZXRUeXBlRnJvbURPTUl0ZW0sIGdldFByb3BzRnJvbURPTUl0ZW0sXHJcbiAgdG9nZ2xlSXRlbUV2ZW50TGlzdGVuZXIsIHRvZ2dsZUl0ZW1zRXZlbnRMaXN0ZW5lcixcclxufSBmcm9tICcuLi9jb21wb25lbnRzL2l0ZW0nO1xyXG5pbXBvcnQgeyBzaG93QWRkSXRlbSB9IGZyb20gJy4uL2Zvcm1zL2FkZEl0ZW0nO1xyXG5pbXBvcnQgeyBzaG93RWRpdEl0ZW0gfSBmcm9tICcuLi9mb3Jtcy9lZGl0SXRlbSc7XHJcbmltcG9ydCB7IGhpZGVBZGRFZGl0SXRlbUZvcm1Gcm9tSG9tZSwgaGlkZUFkZEVkaXRUb2RvRm9ybUZyb21Qcm9qZWN0IH0gZnJvbSAnLi4vZm9ybXMvdXRpbHMnO1xyXG5pbXBvcnQgeyBkZWxldGVJdGVtIH0gZnJvbSAnLi4vLi4vbW9kZWwvaXRlbSc7XHJcbmltcG9ydCB7XHJcbiAgcHJvamVjdHMsXHJcbiAgc2V0UHJvamVjdFByb3BJbkZpcmVzdG9yZSwgc2V0VG9kb1Byb3BJbkZpcmVzdG9yZSwgc2V0VG9kb3NQcm9wSW5GaXJlc3RvcmUsXHJcbn0gZnJvbSAnLi4vLi4vbW9kZWwvZmlyZXN0b3JlJztcclxuXHJcbmNvbnN0IHRvZ2dsZVByb2plY3RUb2Rvc1N0YXR1c0V2ZW50TGlzdGVuZXJzID0gKHRvZG9zLCBkb25lKSA9PiB7XHJcbiAgdG9kb3MuZm9yRWFjaCgodG9kbykgPT4ge1xyXG4gICAgY29uc3QgdGl0bGUgPSB0b2RvLnF1ZXJ5U2VsZWN0b3IoJ1tjbGFzc349aXRlbS10aXRsZV0nKTtcclxuICAgIHRvZ2dsZUl0ZW1FdmVudExpc3RlbmVyKHRpdGxlLCAnY2xpY2snLCB0b2dnbGVDb2xsYXBzZSwgZG9uZSk7XHJcbiAgICBjb25zdCBzdGF0dXMgPSB0b2RvLnF1ZXJ5U2VsZWN0b3IoJ1tjbGFzcyo9c3RhdHVzXScpO1xyXG4gICAgdG9nZ2xlSXRlbUV2ZW50TGlzdGVuZXIoc3RhdHVzLCAnY2xpY2snLCB0b2dnbGVTdGF0dXMsIGRvbmUpO1xyXG4gICAgY29uc3QgZGVscyA9IHRvZG8ucXVlcnlTZWxlY3RvcignW2NsYXNzKj1kZWxldGVdJyk7XHJcbiAgICB0b2dnbGVJdGVtRXZlbnRMaXN0ZW5lcihkZWxzLCAnY2xpY2snLCBkZWxldGVJdGVtLCBkb25lKTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG5jb25zdCB0b2dnbGVJdGVtU3RhdHVzRXZlbnRMaXN0ZW5lcnMgPSAoaXRlbSwgdHlwZSwgZG9uZSkgPT4ge1xyXG4gIGNvbnN0IGFkZHMgPSBpdGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tpZCo9XCJhZGRcIl0nKTtcclxuICB0b2dnbGVJdGVtc0V2ZW50TGlzdGVuZXIoYWRkcywgJ2NsaWNrJywgc2hvd0FkZEl0ZW0sIGRvbmUpO1xyXG4gIGNvbnN0IGVkaXRzID0gaXRlbS5xdWVyeVNlbGVjdG9yQWxsKCdbY2xhc3MqPVwiZWRpdFwiXScpO1xyXG4gIHRvZ2dsZUl0ZW1zRXZlbnRMaXN0ZW5lcihlZGl0cywgJ2NsaWNrJywgc2hvd0VkaXRJdGVtLCBkb25lKTtcclxuXHJcbiAgaWYgKHR5cGUgPT09ICdwcm9qZWN0Jykge1xyXG4gICAgY29uc3QgdG9kb3MgPSBpdGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tjbGFzc149XCJpdGVtIHByb2plY3QtdG9kb1wiXScpO1xyXG4gICAgdG9nZ2xlUHJvamVjdFRvZG9zU3RhdHVzRXZlbnRMaXN0ZW5lcnModG9kb3MsIGRvbmUpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG5jb25zdCB0b2dnbGVEb25lT25ET00gPSAoZSwgaXRlbSwgdHlwZSkgPT4ge1xyXG4gIGNvbnN0IHRvZG9zID0gaXRlbS5xdWVyeVNlbGVjdG9yQWxsKCdbY2xhc3N+PWl0ZW1dJyk7XHJcbiAgZS50YXJnZXQudGV4dENvbnRlbnQgPSAnZG9uZSc7XHJcblxyXG4gIGhpZGVBZGRFZGl0SXRlbUZvcm1Gcm9tSG9tZSgpO1xyXG4gIHN3aXRjaCAodHlwZSkge1xyXG4gICAgY2FzZSAncHJvamVjdCc6IGNhc2UgJ3Byb2plY3QtdG9kbyc6IHtcclxuICAgICAgdG9kb3MuZm9yRWFjaCgodG9kbykgPT4gdG9nZ2xlRG9uZSh7IHRhcmdldDogdG9kby5xdWVyeVNlbGVjdG9yKCdbY2xhc3MkPXN0YXR1c10nKSB9KSk7XHJcbiAgICAgIGhpZGVBZGRFZGl0VG9kb0Zvcm1Gcm9tUHJvamVjdChlKTsgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBkZWZhdWx0OiBjb25zb2xlLmxvZyhgdG9nZ2xlRG9uZU9uRE9NOiBzb3JyeSwgd2UgYXJlIG91dCBvZiAke3R5cGV9LmApO1xyXG4gIH1cclxuXHJcbiAgb3ZlcmR1ZUNsYXNzZXMuZm9yRWFjaCgoaXRlbUNsYXNzKSA9PiB7XHJcbiAgICB0b2dnbGVFbGVtZW50Q2xhc3MoaXRlbSwgaXRlbUNsYXNzLCBmYWxzZSk7XHJcbiAgICB0b2dnbGVFbGVtZW50c0NsYXNzKHRvZG9zLCBpdGVtQ2xhc3MsIGZhbHNlKTtcclxuICB9KTtcclxuXHJcbiAgaXRlbS5jbGFzc0xpc3QuYWRkKCdkb25lJyk7XHJcblxyXG4gIHRvZ2dsZUl0ZW1TdGF0dXNFdmVudExpc3RlbmVycyhpdGVtLCB0eXBlLCB0cnVlKTtcclxuICBjb2xsYXBzZUl0ZW0oaXRlbSk7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuY29uc3QgdG9nZ2xlU3RhdHVzSW5GaXJlc290cmUgPSBhc3luYyAoaWQsIHR5cGUsIHN0YXR1cykgPT4ge1xyXG4gIHN3aXRjaCAodHlwZSkge1xyXG4gICAgY2FzZSAncHJvamVjdCc6IHtcclxuICAgICAgYXdhaXQgc2V0UHJvamVjdFByb3BJbkZpcmVzdG9yZShpZCwgc3RhdHVzKTtcclxuICAgICAgYXdhaXQgc2V0VG9kb3NQcm9wSW5GaXJlc3RvcmUoaWQsIHN0YXR1cyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgY2FzZSAndG9kbyc6XHJcbiAgICBjYXNlICdwcm9qZWN0LXRvZG8nOiB7XHJcbiAgICAgIGNvbnN0IHByb2plY3RJZCA9IHByb2plY3RzLmdldFByb2plY3RQcm9wRnJvbVRvZG9JZChpZCwgJ2lkJyk7XHJcbiAgICAgIGF3YWl0IHNldFRvZG9Qcm9wSW5GaXJlc3RvcmUocHJvamVjdElkLCBpZCwgc3RhdHVzKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBkZWZhdWx0OiBjb25zb2xlLmxvZyhgdG9nZ2xlU3RhdHVzSW5GaXJlc290cmU6IHNvcnJ5LCB3ZSBhcmUgb3V0IG9mICR7dHlwZX0uYCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbmNvbnN0IHRvZ2dsZVN0YXR1c0luUHJvamVjdHMgPSBhc3luYyAoaWQsIHR5cGUsIHN0YXR1cykgPT4ge1xyXG4gIHN3aXRjaCAodHlwZSkge1xyXG4gICAgY2FzZSAncHJvamVjdCc6IHtcclxuICAgICAgcHJvamVjdHMuc2V0UHJvamVjdFByb3AoaWQsICdzdGF0dXMnLCBzdGF0dXMpO1xyXG4gICAgICBwcm9qZWN0cy5zZXRUb2Rvc1Byb3AoaWQsICdzdGF0dXMnLCBzdGF0dXMpO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGNhc2UgJ3RvZG8nOlxyXG4gICAgY2FzZSAncHJvamVjdC10b2RvJzoge1xyXG4gICAgICBjb25zdCBwcm9qZWN0SWQgPSBwcm9qZWN0cy5nZXRQcm9qZWN0UHJvcEZyb21Ub2RvSWQoaWQsICdpZCcpO1xyXG4gICAgICBwcm9qZWN0cy5zZXRUb2RvUHJvcChwcm9qZWN0SWQsIGlkLCAnc3RhdHVzJywgc3RhdHVzKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBkZWZhdWx0OiBjb25zb2xlLmxvZyhgdG9nZ2xlU3RhdHVzSW5Qcm9qZWN0czogc29ycnksIHdlIGFyZSBvdXQgb2YgJHt0eXBlfS5gKTtcclxuICB9XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuY29uc3QgdG9nZ2xlRG9uZSA9IGFzeW5jIChlKSA9PiB7XHJcbiAgY29uc3QgaXRlbSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xvc2VzdCgnW2NsYXNzfj1pdGVtXScpO1xyXG4gIGNvbnN0IHR5cGUgPSBnZXRUeXBlRnJvbURPTUl0ZW0oaXRlbSk7XHJcblxyXG4gIHRvZ2dsZURvbmVPbkRPTShlLCBpdGVtLCB0eXBlKTtcclxuICB0b2dnbGVTdGF0dXNJblByb2plY3RzKGl0ZW0uaWQsIHR5cGUsICdkb25lJyk7XHJcbiAgYXdhaXQgdG9nZ2xlU3RhdHVzSW5GaXJlc290cmUoaXRlbS5pZCwgdHlwZSwgeyBzdGF0dXM6ICdkb25lJyB9KTtcclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG5jb25zdCB0b2dnbGVPcGVuT25ET00gPSAoZSwgaXRlbSwgdHlwZSkgPT4ge1xyXG4gIGNvbnN0IHByb3BzID0gZ2V0UHJvcHNGcm9tRE9NSXRlbShpdGVtKTtcclxuICBlLnRhcmdldC50ZXh0Q29udGVudCA9ICdvcGVuJztcclxuXHJcbiAgaGlkZUFkZEVkaXRJdGVtRm9ybUZyb21Ib21lKCk7XHJcbiAgaWYgKHR5cGUgPT09ICdwcm9qZWN0JyB8fCB0eXBlID09PSAncHJvamVjdC10b2RvJykgaGlkZUFkZEVkaXRUb2RvRm9ybUZyb21Qcm9qZWN0KGUpO1xyXG5cclxuICBzb3J0SXRlbU92ZXJkdWVTdGF0dXMocHJvcHMsIGl0ZW0pO1xyXG4gIGlmICh0eXBlID09PSAncHJvamVjdCcpIHtcclxuICAgIHNvcnRQcm9qZWN0SGFzT3ZlcmR1ZVN0YXR1cyhwcm9wcywgaXRlbSk7XHJcblxyXG4gICAgY29uc3QgdG9kb3MgPSBpdGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tjbGFzc349aXRlbV0nKTtcclxuICAgIHRvZG9zLmZvckVhY2goKHRvZG8pID0+IHRvZ2dsZU9wZW4oeyB0YXJnZXQ6IHRvZG8ucXVlcnlTZWxlY3RvcignW2NsYXNzJD1zdGF0dXNdJykgfSkpO1xyXG4gIH1cclxuXHJcbiAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdkb25lJyk7XHJcblxyXG4gIHRvZ2dsZUl0ZW1TdGF0dXNFdmVudExpc3RlbmVycyhpdGVtLCB0eXBlLCBmYWxzZSk7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuY29uc3QgdG9nZ2xlT3BlbiA9IGFzeW5jIChlKSA9PiB7XHJcbiAgY29uc3QgaXRlbSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xvc2VzdCgnW2NsYXNzfj1pdGVtXScpO1xyXG4gIGNvbnN0IHR5cGUgPSBnZXRUeXBlRnJvbURPTUl0ZW0oaXRlbSk7XHJcblxyXG4gIHRvZ2dsZU9wZW5PbkRPTShlLCBpdGVtLCB0eXBlKTtcclxuICB0b2dnbGVTdGF0dXNJblByb2plY3RzKGl0ZW0uaWQsIHR5cGUsICdvcGVuJyk7XHJcbiAgYXdhaXQgdG9nZ2xlU3RhdHVzSW5GaXJlc290cmUoaXRlbS5pZCwgdHlwZSwgeyBzdGF0dXM6ICdvcGVuJyB9KTtcclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdG9nZ2xlU3RhdHVzID0gKGUpID0+IHtcclxuICBjb25zdCBzdGF0dXMgPSBlLnRhcmdldC50ZXh0Q29udGVudDtcclxuXHJcbiAgc3dpdGNoIChzdGF0dXMpIHtcclxuICAgIGNhc2UgJ29wZW4nOiB7IHRvZ2dsZURvbmUoZSk7IGJyZWFrOyB9XHJcbiAgICBjYXNlICdkb25lJzogeyB0b2dnbGVPcGVuKGUpOyBicmVhazsgfVxyXG4gICAgZGVmYXVsdDogY29uc29sZS5sb2coYHRvZ2dsZVN0YXR1czogc29ycnksIHdlIGFyZSBvdXQgb2YgJHtzdGF0dXN9LmApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBsaW5lYnJlYWstc3R5bGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tcGx1c3BsdXMgKi9cclxuLyogZXNsaW50LWRpc2FibGUgZW9sLWxhc3QgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tdXNlLWJlZm9yZS1kZWZpbmUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgb2JqZWN0LWN1cmx5LW5ld2xpbmUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tc2hhZG93ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXHJcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1jeWNsZSAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBkZWZhdWx0LWNhc2UgKi9cclxuXHJcbmV4cG9ydCBjb25zdCB0eXBlcyA9IFsndG9kbycsICdwcm9qZWN0JywgJ3Byb2plY3QtdG9kbyddO1xyXG5cclxuZXhwb3J0IGNvbnN0IG1ha2VFbGVtZW50ID0gKFxyXG4gIGNvbnRhaW5lclR5cGUsIGNsYXNzTmFtZSA9IG51bGwsIGNvbnRlbnQgPSBudWxsLCB0eXBlQXR0cmlidXRlID0gbnVsbCwgaWRBdHRyaWJ1dGUgPSBudWxsLFxyXG4gIGV2ZW50TGlzdGVuZXIgPSB7IHR5cGU6IG51bGwsIGNhbGxiYWNrOiBudWxsIH0sXHJcbikgPT4ge1xyXG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGNvbnRhaW5lclR5cGUpO1xyXG4gIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xyXG4gIGlmIChjb250ZW50ICE9PSBudWxsKSBlbGVtZW50LmlubmVySFRNTCA9IGNvbnRlbnQ7XHJcbiAgaWYgKHR5cGVBdHRyaWJ1dGUgIT09IG51bGwpIGVsZW1lbnQudHlwZSA9IHR5cGVBdHRyaWJ1dGU7XHJcbiAgaWYgKGlkQXR0cmlidXRlICE9PSBudWxsKSBlbGVtZW50LmlkID0gaWRBdHRyaWJ1dGU7XHJcbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TGlzdGVuZXIudHlwZSwgZXZlbnRMaXN0ZW5lci5jYWxsYmFjayk7XHJcblxyXG4gIHJldHVybiBlbGVtZW50O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IG1ha2VEaXYgPSAoY2xhc3NOYW1lLCBjb250ZW50LCB0eXBlQXR0cmlidXRlLCBpZEF0dHJpYnV0ZSwgZXZlbnRMaXN0ZW5lcikgPT4ge1xyXG4gIGNvbnN0IGRpdiA9IG1ha2VFbGVtZW50KCdkaXYnLCBjbGFzc05hbWUsIGNvbnRlbnQsIHR5cGVBdHRyaWJ1dGUsIGlkQXR0cmlidXRlLCBldmVudExpc3RlbmVyKTtcclxuXHJcbiAgcmV0dXJuIGRpdjtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBhZGp1c3RIZWlnaHQgPSAoZWxlbWVudCwgcGFyZW50UmVnZXgpID0+IHtcclxuICBjb25zdCBwYXJlbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQuY2xvc2VzdChwYXJlbnRSZWdleCk7XHJcblxyXG4gIGlmIChlbGVtZW50LnN0eWxlLm1heEhlaWdodCA+IDApIHtcclxuICAgIGVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0ID0gbnVsbDtcclxuICB9IGVsc2Uge1xyXG4gICAgZWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSBgJHtlbGVtZW50LnNjcm9sbEhlaWdodH1weGA7XHJcbiAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgIHBhcmVudC5zdHlsZS5tYXhIZWlnaHQgPSBgJHtwYXJlbnQuc2Nyb2xsSGVpZ2h0ICsgZWxlbWVudC5zY3JvbGxIZWlnaHR9cHhgO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGVsZW1lbnQ7XHJcbn07XHJcblxyXG5jb25zdCBhZGRDb2xsYXBzaWJpbGl0eSA9IChlbGVtZW50KSA9PiB7XHJcbiAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gKGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9PT0gJ2Jsb2NrJykgPyAnbm9uZScgOiAnYmxvY2snO1xyXG5cclxuICByZXR1cm4gZWxlbWVudDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB0b2dnbGVDb2xsYXBzZSA9IChlKSA9PiB7XHJcbiAgZS50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgndGl0bGUtYWN0aXZlJyk7XHJcbiAgY29uc3QgY29udGVudCA9IGUudGFyZ2V0Lm5leHRFbGVtZW50U2libGluZztcclxuXHJcbiAgYWRkQ29sbGFwc2liaWxpdHkoY29udGVudCk7XHJcbiAgYWRqdXN0SGVpZ2h0KGNvbnRlbnQsICdkaXZbY2xhc3MkPWNvbnRlbnRdJyk7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGluc2VydEFmdGVyID0gKG5ld05vZGUsIGV4aXN0aW5nTm9kZSkgPT4ge1xyXG4gIGV4aXN0aW5nTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuZXdOb2RlLCBleGlzdGluZ05vZGUubmV4dFNpYmxpbmcpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNsZWFyQ29udGFpbmVyT2ZFbGVtZW50cyA9IChjb250YWluZXIsIHNlbGVjdG9yKSA9PiB7XHJcbiAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoYDpzY29wZSA+ICR7c2VsZWN0b3J9YCkuZm9yRWFjaCgoZWxlbWVudCkgPT4gZWxlbWVudC5yZW1vdmUoKSk7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHRvZ2dsZUVsZW1lbnRDbGFzcyA9IChlbGVtZW50LCBsYWJlbCwgYWRkKSA9PiB7XHJcbiAgKGFkZCkgPyBlbGVtZW50LmNsYXNzTGlzdC5hZGQobGFiZWwpIDogZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGxhYmVsKTtcclxuXHJcbiAgcmV0dXJuIGVsZW1lbnQ7XHJcbn07XHJcblxyXG5jb25zdCB0b2dnbGVFbGVtZW50Q2xhc3NlcyA9IChlbGVtZW50LCBsYWJlbHMsIGFkZCkgPT4ge1xyXG4gIGxhYmVscy5mb3JFYWNoKChsYWJlbCkgPT4gdG9nZ2xlRWxlbWVudENsYXNzKGVsZW1lbnQsIGxhYmVsLCBhZGQpKTtcclxuXHJcbiAgcmV0dXJuIGVsZW1lbnQ7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdG9nZ2xlRWxlbWVudHNDbGFzcyA9IChlbGVtZW50cywgbGFiZWwsIGFkZCkgPT4ge1xyXG4gIGVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IHRvZ2dsZUVsZW1lbnRDbGFzcyhlbGVtZW50LCBsYWJlbCwgYWRkKSk7XHJcblxyXG4gIHJldHVybiBlbGVtZW50cztcclxufTtcclxuXHJcbmNvbnN0IHRvZ2dsZUVsZW1lbnRzQ2xhc3NlcyA9IChlbGVtZW50cywgbGFiZWxzLCBhZGQpID0+IHtcclxuICBlbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB0b2dnbGVFbGVtZW50Q2xhc3NlcyhlbGVtZW50LCBsYWJlbHMsIGFkZCkpO1xyXG5cclxuICByZXR1cm4gZWxlbWVudHM7XHJcbn07IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSB1c2VkICdtb2R1bGUnIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzgpO1xuIl0sIm5hbWVzIjpbIndlYnBhY2tUaGVuIiwid2VicGFja0V4cG9ydHMiLCJjb21wbGV0ZVF1ZXVlIiwiY29tcGxldGVGdW5jdGlvbiIsInF1ZXVlRnVuY3Rpb24iLCJQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsIiwiY29uc3RydWN0b3IiLCJjb250YWluZXIiLCJ0aGlzIiwiZ2V0UGxhdGZvcm1JbmZvU3RyaW5nIiwiZ2V0UHJvdmlkZXJzIiwibWFwIiwicHJvdmlkZXIiLCJjb21wb25lbnQiLCJnZXRDb21wb25lbnQiLCJ0eXBlIiwiaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyIiwic2VydmljZSIsImdldEltbWVkaWF0ZSIsImxpYnJhcnkiLCJ2ZXJzaW9uIiwiZmlsdGVyIiwibG9nU3RyaW5nIiwiam9pbiIsIm5hbWUkbyIsInZlcnNpb24kMSIsImxvZ2dlciIsIlBMQVRGT1JNX0xPR19TVFJJTkciLCJfYXBwcyIsIk1hcCIsIl9jb21wb25lbnRzIiwiX2FkZENvbXBvbmVudCIsImFwcCIsImFkZENvbXBvbmVudCIsImUiLCJkZWJ1ZyIsIm5hbWUiLCJfcmVnaXN0ZXJDb21wb25lbnQiLCJjb21wb25lbnROYW1lIiwiaGFzIiwic2V0IiwidmFsdWVzIiwiX2dldFByb3ZpZGVyIiwiZ2V0UHJvdmlkZXIiLCJFUlJPUl9GQUNUT1JZIiwiRmlyZWJhc2VBcHBJbXBsIiwib3B0aW9ucyIsImNvbmZpZyIsIl9pc0RlbGV0ZWQiLCJfb3B0aW9ucyIsIk9iamVjdCIsImFzc2lnbiIsIl9jb25maWciLCJfbmFtZSIsIl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQiLCJhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQiLCJfY29udGFpbmVyIiwiY2hlY2tEZXN0cm95ZWQiLCJ2YWwiLCJpc0RlbGV0ZWQiLCJjcmVhdGUiLCJhcHBOYW1lIiwiU0RLX1ZFUlNJT04iLCJpbml0aWFsaXplQXBwIiwicmF3Q29uZmlnIiwiU3RyaW5nIiwiZXhpc3RpbmdBcHAiLCJnZXQiLCJuZXdBcHAiLCJnZXRBcHAiLCJERUZBVUxUX0VOVFJZX05BTUUiLCJyZWdpc3RlclZlcnNpb24iLCJsaWJyYXJ5S2V5T3JOYW1lIiwidmFyaWFudCIsIl9hIiwibGlicmFyeU1pc21hdGNoIiwibWF0Y2giLCJ2ZXJzaW9uTWlzbWF0Y2giLCJ3YXJuaW5nIiwicHVzaCIsIndhcm4iLCJfX3ZhbHVlcyIsIm8iLCJzIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJtIiwiaSIsImNhbGwiLCJsZW5ndGgiLCJuZXh0IiwidmFsdWUiLCJkb25lIiwiVHlwZUVycm9yIiwiX19yZWFkIiwibiIsInIiLCJhciIsImVycm9yIiwiX19zcHJlYWRBcnJheSIsInRvIiwiZnJvbSIsInBhY2siLCJhcmd1bWVudHMiLCJsIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNvbmNhdCIsIkNvbXBvbmVudCIsImluc3RhbmNlRmFjdG9yeSIsIm11bHRpcGxlSW5zdGFuY2VzIiwic2VydmljZVByb3BzIiwiaW5zdGFudGlhdGlvbk1vZGUiLCJvbkluc3RhbmNlQ3JlYXRlZCIsInNldEluc3RhbnRpYXRpb25Nb2RlIiwibW9kZSIsInNldE11bHRpcGxlSW5zdGFuY2VzIiwic2V0U2VydmljZVByb3BzIiwicHJvcHMiLCJzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayIsImNhbGxiYWNrIiwiUHJvdmlkZXIiLCJpbnN0YW5jZXMiLCJpbnN0YW5jZXNEZWZlcnJlZCIsImluc3RhbmNlc09wdGlvbnMiLCJvbkluaXRDYWxsYmFja3MiLCJpZGVudGlmaWVyIiwibm9ybWFsaXplZElkZW50aWZpZXIiLCJub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIiLCJkZWZlcnJlZCIsImlzSW5pdGlhbGl6ZWQiLCJzaG91bGRBdXRvSW5pdGlhbGl6ZSIsImluc3RhbmNlIiwiZ2V0T3JJbml0aWFsaXplU2VydmljZSIsImluc3RhbmNlSWRlbnRpZmllciIsInJlc29sdmUiLCJwcm9taXNlIiwib3B0aW9uYWwiLCJFcnJvciIsInNldENvbXBvbmVudCIsImVfMSIsImlzQ29tcG9uZW50RWFnZXIiLCJfYiIsImVudHJpZXMiLCJfYyIsIl9kIiwiaW5zdGFuY2VEZWZlcnJlZCIsImVfMV8xIiwicmV0dXJuIiwiY2xlYXJJbnN0YW5jZSIsImRlbGV0ZSIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiZ2VuZXJhdG9yIiwic2VydmljZXMiLCJib2R5IiwiZiIsInkiLCJ0IiwiZyIsIl8iLCJsYWJlbCIsInNlbnQiLCJ0cnlzIiwib3BzIiwidmVyYiIsInYiLCJvcCIsInBvcCIsInN0ZXAiLCJfX2dlbmVyYXRvciIsIlByb21pc2UiLCJhbGwiLCJJTlRFUk5BTCIsIl9kZWxldGUiLCJQIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJ0aGVuIiwiYXBwbHkiLCJpc0NvbXBvbmVudFNldCIsImdldE9wdGlvbnMiLCJpbml0aWFsaXplIiwib3B0cyIsImVfMiIsIl9lIiwiZV8yXzEiLCJvbkluaXQiLCJleGlzdGluZ0NhbGxiYWNrcyIsIlNldCIsImFkZCIsImV4aXN0aW5nSW5zdGFuY2UiLCJpbnZva2VPbkluaXRDYWxsYmFja3MiLCJlXzMiLCJjYWxsYmFja3MiLCJjYWxsYmFja3NfMSIsImNhbGxiYWNrc18xXzEiLCJlXzNfMSIsInVuZGVmaW5lZCIsIkNvbXBvbmVudENvbnRhaW5lciIsInByb3ZpZGVycyIsImFkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiTG9nTGV2ZWwiLCJsZXZlbFN0cmluZ1RvRW51bSIsIkRFQlVHIiwiVkVSQk9TRSIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJTSUxFTlQiLCJkZWZhdWx0TG9nTGV2ZWwiLCJDb25zb2xlTWV0aG9kIiwiZGVmYXVsdExvZ0hhbmRsZXIiLCJsb2dUeXBlIiwiYXJncyIsImxvZ0xldmVsIiwibm93IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibWV0aG9kIiwiY29uc29sZSIsIkxvZ2dlciIsIl9sb2dMZXZlbCIsIl9sb2dIYW5kbGVyIiwiX3VzZXJMb2dIYW5kbGVyIiwic2V0TG9nTGV2ZWwiLCJsb2dIYW5kbGVyIiwidXNlckxvZ0hhbmRsZXIiLCJsb2ciLCJpbmZvIiwiRGVmZXJyZWQiLCJ3cmFwQ2FsbGJhY2siLCJjYXRjaCIsImdldFVBIiwibmF2aWdhdG9yIiwiaXNNb2JpbGVDb3Jkb3ZhIiwid2luZG93IiwidGVzdCIsImlzQnJvd3NlckV4dGVuc2lvbiIsInJ1bnRpbWUiLCJjaHJvbWUiLCJicm93c2VyIiwiaWQiLCJpc1JlYWN0TmF0aXZlIiwiaXNFbGVjdHJvbiIsImluZGV4T2YiLCJpc0lFIiwidWEiLCJpc1VXUCIsIkZpcmViYXNlRXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsImN1c3RvbURhdGEiLCJzdXBlciIsInNldFByb3RvdHlwZU9mIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJFcnJvckZhY3RvcnkiLCJzZXJ2aWNlTmFtZSIsImVycm9ycyIsImRhdGEiLCJmdWxsQ29kZSIsInRlbXBsYXRlIiwicmVwbGFjZSIsIlBBVFRFUk4iLCJrZXkiLCJyZXBsYWNlVGVtcGxhdGUiLCJmdWxsTWVzc2FnZSIsImRlZXBFcXVhbCIsImEiLCJiIiwiYUtleXMiLCJrZXlzIiwiYktleXMiLCJrIiwiaW5jbHVkZXMiLCJhUHJvcCIsImJQcm9wIiwiaXNPYmplY3QiLCJ0aGluZyIsImdldE1vZHVsYXJJbnN0YW5jZSIsIl9kZWxlZ2F0ZSIsIl9fX0NTU19MT0FERVJfRVhQT1JUX19fIiwibW9kdWxlIiwiZXhwb3J0cyIsImNzc1dpdGhNYXBwaW5nVG9TdHJpbmciLCJsaXN0IiwidG9TdHJpbmciLCJpdGVtIiwiY29udGVudCIsIm5lZWRMYXllciIsIm1vZHVsZXMiLCJtZWRpYSIsImRlZHVwZSIsInN1cHBvcnRzIiwibGF5ZXIiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiX2kiLCJfaTIiLCJjc3NNYXBwaW5nIiwiYnRvYSIsImJhc2U2NCIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsInNvdXJjZU1hcHBpbmciLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJyZXF1aXJlZEFyZ3MiLCJyZXF1aXJlZCIsInRvSW50ZWdlciIsImRpcnR5TnVtYmVyIiwiTmFOIiwibnVtYmVyIiwiTnVtYmVyIiwiaXNOYU4iLCJNYXRoIiwiY2VpbCIsImZsb29yIiwiYWRkTW9udGhzIiwiZGlydHlEYXRlIiwiZGlydHlBbW91bnQiLCJkYXRlIiwidG9EYXRlIiwiYW1vdW50IiwiZGF5T2ZNb250aCIsImdldERhdGUiLCJlbmRPZkRlc2lyZWRNb250aCIsImdldFRpbWUiLCJzZXRNb250aCIsImdldE1vbnRoIiwiZGF5c0luTW9udGgiLCJzZXRGdWxsWWVhciIsImdldEZ1bGxZZWFyIiwiYWRkWWVhcnMiLCJpc0RhdGUiLCJpc1ZhbGlkIiwiZm9ybWF0RGlzdGFuY2VMb2NhbGUiLCJsZXNzVGhhblhTZWNvbmRzIiwib25lIiwib3RoZXIiLCJ4U2Vjb25kcyIsImhhbGZBTWludXRlIiwibGVzc1RoYW5YTWludXRlcyIsInhNaW51dGVzIiwiYWJvdXRYSG91cnMiLCJ4SG91cnMiLCJ4RGF5cyIsImFib3V0WFdlZWtzIiwieFdlZWtzIiwiYWJvdXRYTW9udGhzIiwieE1vbnRocyIsImFib3V0WFllYXJzIiwieFllYXJzIiwib3ZlclhZZWFycyIsImFsbW9zdFhZZWFycyIsImJ1aWxkRm9ybWF0TG9uZ0ZuIiwid2lkdGgiLCJkZWZhdWx0V2lkdGgiLCJmb3JtYXQiLCJmb3JtYXRzIiwiZm9ybWF0TG9uZyIsImZ1bGwiLCJsb25nIiwibWVkaXVtIiwic2hvcnQiLCJ0aW1lIiwiZGF0ZVRpbWUiLCJmb3JtYXRSZWxhdGl2ZUxvY2FsZSIsImxhc3RXZWVrIiwieWVzdGVyZGF5IiwidG9kYXkiLCJ0b21vcnJvdyIsIm5leHRXZWVrIiwiYnVpbGRMb2NhbGl6ZUZuIiwiZGlydHlJbmRleCIsImRpcnR5T3B0aW9ucyIsInZhbHVlc0FycmF5IiwiY29udGV4dCIsImZvcm1hdHRpbmdWYWx1ZXMiLCJkZWZhdWx0Rm9ybWF0dGluZ1dpZHRoIiwiX2RlZmF1bHRXaWR0aCIsIl93aWR0aCIsImFyZ3VtZW50Q2FsbGJhY2siLCJidWlsZE1hdGNoRm4iLCJzdHJpbmciLCJtYXRjaFBhdHRlcm4iLCJtYXRjaFBhdHRlcm5zIiwiZGVmYXVsdE1hdGNoV2lkdGgiLCJtYXRjaFJlc3VsdCIsIm1hdGNoZWRTdHJpbmciLCJwYXJzZVBhdHRlcm5zIiwiZGVmYXVsdFBhcnNlV2lkdGgiLCJpc0FycmF5IiwiZmluZEluZGV4IiwicGF0dGVybiIsImZpbmRLZXkiLCJ2YWx1ZUNhbGxiYWNrIiwicmVzdCIsIm9iamVjdCIsInByZWRpY2F0ZSIsImhhc093blByb3BlcnR5IiwiYXJyYXkiLCJmb3JtYXREaXN0YW5jZSIsInRva2VuIiwiY291bnQiLCJ0b2tlblZhbHVlIiwiYWRkU3VmZml4IiwiY29tcGFyaXNvbiIsImZvcm1hdFJlbGF0aXZlIiwiX2RhdGUiLCJfYmFzZURhdGUiLCJsb2NhbGl6ZSIsIm9yZGluYWxOdW1iZXIiLCJyZW0xMDAiLCJlcmEiLCJuYXJyb3ciLCJhYmJyZXZpYXRlZCIsIndpZGUiLCJxdWFydGVyIiwibW9udGgiLCJkYXkiLCJkYXlQZXJpb2QiLCJhbSIsInBtIiwibWlkbmlnaHQiLCJub29uIiwibW9ybmluZyIsImFmdGVybm9vbiIsImV2ZW5pbmciLCJuaWdodCIsInBhcnNlUGF0dGVybiIsInBhcnNlSW50IiwicGFyc2VSZXN1bHQiLCJhbnkiLCJpbmRleCIsIndlZWtTdGFydHNPbiIsImZpcnN0V2Vla0NvbnRhaW5zRGF0ZSIsImFkZE1pbGxpc2Vjb25kcyIsInRpbWVzdGFtcCIsInN1Yk1pbGxpc2Vjb25kcyIsImFkZExlYWRpbmdaZXJvcyIsInRhcmdldExlbmd0aCIsInNpZ24iLCJvdXRwdXQiLCJhYnMiLCJzaWduZWRZZWFyIiwiZ2V0VVRDRnVsbFllYXIiLCJ5ZWFyIiwiZ2V0VVRDTW9udGgiLCJnZXRVVENEYXRlIiwiZ2V0VVRDSG91cnMiLCJnZXRVVENNaW51dGVzIiwiZ2V0VVRDU2Vjb25kcyIsIm51bWJlck9mRGlnaXRzIiwibWlsbGlzZWNvbmRzIiwiZ2V0VVRDTWlsbGlzZWNvbmRzIiwicG93IiwiTUlMTElTRUNPTkRTX0lOX0RBWSIsInN0YXJ0T2ZVVENJU09XZWVrIiwiZ2V0VVRDRGF5IiwiZGlmZiIsInNldFVUQ0RhdGUiLCJzZXRVVENIb3VycyIsImdldFVUQ0lTT1dlZWtZZWFyIiwiZm91cnRoT2ZKYW51YXJ5T2ZOZXh0WWVhciIsInNldFVUQ0Z1bGxZZWFyIiwic3RhcnRPZk5leHRZZWFyIiwiZm91cnRoT2ZKYW51YXJ5T2ZUaGlzWWVhciIsInN0YXJ0T2ZUaGlzWWVhciIsInN0YXJ0T2ZVVENJU09XZWVrWWVhciIsImZvdXJ0aE9mSmFudWFyeSIsIk1JTExJU0VDT05EU19JTl9XRUVLIiwic3RhcnRPZlVUQ1dlZWsiLCJsb2NhbGUiLCJsb2NhbGVXZWVrU3RhcnRzT24iLCJkZWZhdWx0V2Vla1N0YXJ0c09uIiwiUmFuZ2VFcnJvciIsImdldFVUQ1dlZWtZZWFyIiwibG9jYWxlRmlyc3RXZWVrQ29udGFpbnNEYXRlIiwiZGVmYXVsdEZpcnN0V2Vla0NvbnRhaW5zRGF0ZSIsImZpcnN0V2Vla09mTmV4dFllYXIiLCJmaXJzdFdlZWtPZlRoaXNZZWFyIiwic3RhcnRPZlVUQ1dlZWtZZWFyIiwiZmlyc3RXZWVrIiwiZm9ybWF0VGltZXpvbmVTaG9ydCIsIm9mZnNldCIsImRpcnR5RGVsaW1pdGVyIiwiYWJzT2Zmc2V0IiwiaG91cnMiLCJtaW51dGVzIiwiZGVsaW1pdGVyIiwiZm9ybWF0VGltZXpvbmVXaXRoT3B0aW9uYWxNaW51dGVzIiwiZm9ybWF0VGltZXpvbmUiLCJHIiwidW5pdCIsImxpZ2h0Rm9ybWF0dGVycyIsIlkiLCJzaWduZWRXZWVrWWVhciIsIndlZWtZZWFyIiwiUiIsInUiLCJRIiwicSIsIk0iLCJMIiwidyIsIndlZWsiLCJyb3VuZCIsImdldFVUQ1dlZWsiLCJJIiwiaXNvV2VlayIsImdldFVUQ0lTT1dlZWsiLCJkIiwiRCIsImRheU9mWWVhciIsInNldFVUQ01vbnRoIiwic3RhcnRPZlllYXJUaW1lc3RhbXAiLCJkaWZmZXJlbmNlIiwiZ2V0VVRDRGF5T2ZZZWFyIiwiRSIsImRheU9mV2VlayIsImxvY2FsRGF5T2ZXZWVrIiwiYyIsImlzb0RheU9mV2VlayIsImRheVBlcmlvZEVudW1WYWx1ZSIsInRvTG93ZXJDYXNlIiwiQiIsImgiLCJIIiwiSyIsIlMiLCJYIiwiX2xvY2FsaXplIiwidGltZXpvbmVPZmZzZXQiLCJfb3JpZ2luYWxEYXRlIiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJ4IiwiTyIsInoiLCJvcmlnaW5hbERhdGUiLCJUIiwiZGF0ZUxvbmdGb3JtYXR0ZXIiLCJ0aW1lTG9uZ0Zvcm1hdHRlciIsImxvbmdGb3JtYXR0ZXJzIiwicCIsImRhdGVUaW1lRm9ybWF0IiwiZGF0ZVBhdHRlcm4iLCJ0aW1lUGF0dGVybiIsImdldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMiLCJ1dGNEYXRlIiwiVVRDIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsImdldE1pbGxpc2Vjb25kcyIsInByb3RlY3RlZERheU9mWWVhclRva2VucyIsInByb3RlY3RlZFdlZWtZZWFyVG9rZW5zIiwiaXNQcm90ZWN0ZWREYXlPZlllYXJUb2tlbiIsImlzUHJvdGVjdGVkV2Vla1llYXJUb2tlbiIsInRocm93UHJvdGVjdGVkRXJyb3IiLCJpbnB1dCIsImZvcm1hdHRpbmdUb2tlbnNSZWdFeHAiLCJsb25nRm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cCIsImVzY2FwZWRTdHJpbmdSZWdFeHAiLCJkb3VibGVRdW90ZVJlZ0V4cCIsInVuZXNjYXBlZExhdGluQ2hhcmFjdGVyUmVnRXhwIiwiZGlydHlGb3JtYXRTdHIiLCJmb3JtYXRTdHIiLCJmb3JtYXR0ZXJPcHRpb25zIiwic3Vic3RyaW5nIiwiZmlyc3RDaGFyYWN0ZXIiLCJsb25nRm9ybWF0dGVyIiwiY2xlYW5Fc2NhcGVkU3RyaW5nIiwiZm9ybWF0dGVyIiwidXNlQWRkaXRpb25hbFdlZWtZZWFyVG9rZW5zIiwidXNlQWRkaXRpb25hbERheU9mWWVhclRva2VucyIsImFyZ3VtZW50IiwiYXJnU3RyIiwic3RhY2siLCJjb21tb25qc0dsb2JhbCIsImdsb2JhbFRoaXMiLCJzZWxmIiwiZXNtIiwiZ29vZyIsImFhIiwiYmEiLCJlYSIsInJhbmRvbSIsImZhIiwiaGEiLCJiaW5kIiwiaWEiLCJ1bnNoaWZ0IiwiRnVuY3Rpb24iLCJqYSIsIloiLCJWYiIsImxhIiwibmEiLCJkYSIsInNoaWZ0IiwibWEiLCJmb3JFYWNoIiwic3BsaXQiLCJxYSIsInJhIiwic2EiLCJ0YSIsInRyaW0iLCJleGVjIiwidmEiLCJ3YSIsInVzZXJBZ2VudCIsInhhIiwieWEiLCJ6YSIsIkFhIiwiQ2EiLCJOYSIsIkhhIiwiSWEiLCJKYSIsIkthIiwiTGEiLCJNYSIsImRvY3VtZW50IiwiZG9jdW1lbnRNb2RlIiwiT2EiLCJQYSIsIlFhIiwicGFyc2VGbG9hdCIsIlNhIiwiR2EiLCJSYSIsIm1heCIsIlVhIiwiVmEiLCJhZGRFdmVudExpc3RlbmVyIiwiZGVmaW5lUHJvcGVydHkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiZGVmYXVsdFByZXZlbnRlZCIsIkEiLCJyZWxhdGVkVGFyZ2V0IiwiYnV0dG9uIiwic2NyZWVuWSIsInNjcmVlblgiLCJjbGllbnRZIiwiY2xpZW50WCIsIm1ldGFLZXkiLCJzaGlmdEtleSIsImFsdEtleSIsImN0cmxLZXkiLCJzdGF0ZSIsInBvaW50ZXJJZCIsInBvaW50ZXJUeXBlIiwiY2hhbmdlZFRvdWNoZXMiLCJzcmNFbGVtZW50Iiwibm9kZU5hbWUiLCJmcm9tRWxlbWVudCIsInRvRWxlbWVudCIsInBhZ2VYIiwicGFnZVkiLCJXYSIsInByZXZlbnREZWZhdWx0IiwicmV0dXJuVmFsdWUiLCJYYSIsIllhIiwibGlzdGVuZXIiLCJwcm94eSIsInNyYyIsImNhcHR1cmUiLCJjYSIsIlphIiwiJGEiLCJiYiIsInNwbGljZSIsImFiIiwiY2IiLCJkYiIsImZiIiwib25jZSIsImdiIiwiaGIiLCJOIiwiaWIiLCJqYiIsIm1iIiwia2IiLCJhdHRhY2hFdmVudCIsImxiIiwiYWRkTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsIm5iIiwib2IiLCJkZXRhY2hFdmVudCIsInBiIiwiaGFuZGxlRXZlbnQiLCJDIiwicWIiLCJyYiIsInNiIiwidGIiLCJBYiIsInZiIiwiaiIsIndiIiwicmVzZXQiLCJ5YiIsInNldFRpbWVvdXQiLCJ6YiIsIkRiIiwiQmIiLCJDYiIsIkViIiwiRmIiLCJjbGVhclRpbWVvdXQiLCJHYiIsIkhiIiwic3RhcnQiLCJJYiIsIkpiIiwiS2IiLCJMYiIsIk1iIiwiRiIsInBhcnNlIiwiUGIiLCJSYiIsIlNiIiwiVGIiLCJVYiIsIlNUQVRfRVZFTlQiLCJzdGF0IiwiSiIsInNpemUiLCJXYiIsIk5PX0VSUk9SIiwieGIiLCJUSU1FT1VUIiwiWGIiLCJZYiIsIlpiIiwiJGIiLCJjYyIsIk9QRU4iLCJhYyIsImJjIiwiZGMiLCJWIiwiZWMiLCJXIiwiJCIsIlUiLCJmYyIsIlhNTEh0dHBSZXF1ZXN0IiwiZ2MiLCJoYyIsImljIiwiamMiLCJrYyIsImxjIiwibWMiLCJuYyIsIk5iIiwicWMiLCJCYSIsInRjIiwidmMiLCJzYyIsIndjIiwicmMiLCJzdWJzdHIiLCJ4YyIsImViIiwicGMiLCJ1YyIsImFib3J0IiwieWMiLCJ6YyIsIkFjIiwiQmMiLCJDYyIsImthIiwiRGEiLCJFYSIsImdldFJlc3BvbnNlSGVhZGVyIiwiRGMiLCJvYSIsIkVjIiwiRmMiLCJHYyIsIkhjIiwiSWMiLCJLYyIsIkpjIiwiTGMiLCJnYSIsIm9jIiwiVGV4dERlY29kZXIiLCJkZWNvZGUiLCJzdHJlYW0iLCJPYiIsImNhbmNlbCIsIlFiIiwiTWMiLCJPYyIsIlBjIiwiUWMiLCJSYyIsIlNjIiwiVGMiLCJkZCIsIlpjIiwiVWMiLCIkYyIsImRlY29kZVVSSSIsImRlY29kZVVSSUNvbXBvbmVudCIsImVuY29kZVVSSSIsImNkIiwiY2hhckNvZGVBdCIsIlZjIiwiY2hhckF0IiwiV2MiLCJYYyIsIlljIiwiTmMiLCJlZCIsImdkIiwiaGQiLCJQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmciLCJwZXJmb3JtYW5jZSIsImdldEVudHJpZXNCeVR5cGUiLCJuZXh0SG9wUHJvdG9jb2wiLCJqZCIsImtkIiwibGQiLCJtZCIsIm9kIiwib25sb2FkIiwib25lcnJvciIsIm9uYWJvcnQiLCJvbnRpbWVvdXQiLCJwZCIsInFkIiwicmVhZHlTdGF0ZSIsInJkIiwic3RhdHVzIiwicmVzcG9uc2VUeXBlIiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2UiLCJzdGF0dXNUZXh0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwiSGVhZGVycyIsImNsZWFyIiwidWQiLCJyZWFkIiwidGQiLCJzZCIsIm9wZW4iLCJzZW5kIiwiaGVhZGVycyIsImNyZWRlbnRpYWxzIiwiY2FjaGUiLCJmZXRjaCIsIlJlcXVlc3QiLCJhcnJheUJ1ZmZlciIsIlRhIiwiUmVhZGFibGVTdHJlYW0iLCJnZXRSZWFkZXIiLCJ0ZXh0IiwiVWludDhBcnJheSIsInNldFJlcXVlc3RIZWFkZXIiLCJhcHBlbmQiLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJ2ZCIsIndkIiwieGQiLCJ5ZCIsInBhIiwiemQiLCJDZCIsIkRkIiwiRWQiLCJGYSIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJBZCIsIm1velJlc3BvbnNlQXJyYXlCdWZmZXIiLCJHZCIsIkZkIiwiSGQiLCJpbnRlcm5hbENoYW5uZWxQYXJhbXMiLCJJZCIsInhtbEh0dHBGYWN0b3J5Iiwic3VwcG9ydHNDcm9zc0RvbWFpblhociIsImNvbmN1cnJlbnRSZXF1ZXN0TGltaXQiLCJmYXN0SGFuZHNoYWtlIiwiZm9yY2VMb25nUG9sbGluZyIsImRldGVjdEJ1ZmZlcmluZ1Byb3h5IiwiSmQiLCJLZCIsInNlbmRCZWFjb24iLCJJbWFnZSIsIkxkIiwiTWQiLCJRZCIsIlBkIiwibWluIiwiT2QiLCJSZCIsIk5kIiwibmQiLCJhZCIsImJkIiwiaG9zdG5hbWUiLCJwb3J0IiwiU2QiLCJUZCIsIm1lc3NhZ2VVcmxQYXJhbXMiLCJtZXNzYWdlSGVhZGVycyIsImNsaWVudFByb3RvY29sSGVhZGVyUmVxdWlyZWQiLCJpbml0TWVzc2FnZUhlYWRlcnMiLCJtZXNzYWdlQ29udGVudFR5cGUiLCJodHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtIiwic2VuZFJhd0pzb24iLCJodHRwU2Vzc2lvbklkUGFyYW0iLCJVZCIsIl9fc21fXyIsIlZkIiwidG9VcHBlckNhc2UiLCJGb3JtRGF0YSIsIndpdGhDcmVkZW50aWFscyIsInRpbWVvdXQiLCJCZCIsIl9fZGF0YV9fIiwiY2xvc2UiLCJjcmVhdGVXZWJDaGFubmVsIiwiSFRUUF9FUlJPUiIsIkNPTVBMRVRFIiwiRXZlbnRUeXBlIiwiQ0xPU0UiLCJNRVNTQUdFIiwibGlzdGVuIiwibGlzdGVuT25jZSIsImdldExhc3RFcnJvciIsImdldExhc3RFcnJvckNvZGUiLCJnZXRTdGF0dXMiLCJnZXRSZXNwb25zZUpzb24iLCJnZXRSZXNwb25zZVRleHQiLCJjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0IiwiZ2V0U3RhdEV2ZW50VGFyZ2V0IiwiRXJyb3JDb2RlIiwiRXZlbnQiLCJTdGF0IiwidWIiLCJQUk9YWSIsIk5PUFJPWFkiLCJGZXRjaFhtbEh0dHBGYWN0b3J5IiwiV2ViQ2hhbm5lbCIsIlhocklvIiwidWlkIiwiaXNBdXRoZW50aWNhdGVkIiwidG9LZXkiLCJpc0VxdWFsIiwiVU5BVVRIRU5USUNBVEVEIiwiR09PR0xFX0NSRURFTlRJQUxTIiwiRklSU1RfUEFSVFkiLCJNT0NLX1VTRVIiLCJPSyIsIkNBTkNFTExFRCIsIlVOS05PV04iLCJJTlZBTElEX0FSR1VNRU5UIiwiREVBRExJTkVfRVhDRUVERUQiLCJOT1RfRk9VTkQiLCJBTFJFQURZX0VYSVNUUyIsIlBFUk1JU1NJT05fREVOSUVEIiwiUkVTT1VSQ0VfRVhIQVVTVEVEIiwiRkFJTEVEX1BSRUNPTkRJVElPTiIsIkFCT1JURUQiLCJPVVRfT0ZfUkFOR0UiLCJVTklNUExFTUVOVEVEIiwiVU5BVkFJTEFCTEUiLCJEQVRBX0xPU1MiLCJ1c2VyIiwiYXV0aEhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiZ2V0VG9rZW4iLCJpbnZhbGlkYXRlVG9rZW4iLCJlbnF1ZXVlUmV0cnlhYmxlIiwic2h1dGRvd24iLCJjdXJyZW50VXNlciIsImZvcmNlUmVmcmVzaCIsImF1dGgiLCJhZGRBdXRoVG9rZW5MaXN0ZW5lciIsImFjY2Vzc1Rva2VuIiwicmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIiLCJnZXRVaWQiLCJnZXRBdXRoSGVhZGVyVmFsdWVGb3JGaXJzdFBhcnR5IiwicHJldmlvdXNWYWx1ZSIsInNlcXVlbmNlTnVtYmVySGFuZGxlciIsIndyaXRlU2VxdWVuY2VOdW1iZXIiLCJjcnlwdG8iLCJtc0NyeXB0byIsImdldFJhbmRvbVZhbHVlcyIsInR0Iiwic3RhdGljIiwiZXQiLCJudCIsImV2ZXJ5IiwiaXQiLCJzZWNvbmRzIiwibmFub3NlY29uZHMiLCJmcm9tTWlsbGlzIiwidG9NaWxsaXMiLCJfY29tcGFyZVRvIiwidG9KU09OIiwidmFsdWVPZiIsInBhZFN0YXJ0IiwicnQiLCJjb21wYXJlVG8iLCJ0b01pY3Jvc2Vjb25kcyIsInRvVGltZXN0YW1wIiwib3QiLCJjdCIsImF0IiwidXQiLCJzZWdtZW50cyIsImxlbiIsImNvbXBhcmF0b3IiLCJjaGlsZCIsImxpbWl0IiwiY29uc3RydWN0IiwicG9wRmlyc3QiLCJwb3BMYXN0IiwiZmlyc3RTZWdtZW50IiwibGFzdFNlZ21lbnQiLCJpc0VtcHR5IiwiaXNQcmVmaXhPZiIsImlzSW1tZWRpYXRlUGFyZW50T2YiLCJ0b0FycmF5IiwiaHQiLCJjYW5vbmljYWxTdHJpbmciLCJsdCIsImZ0IiwiaXNWYWxpZElkZW50aWZpZXIiLCJpc0tleUZpZWxkIiwiZHQiLCJmaWVsZHMiLCJzb3J0IiwiY292ZXJzIiwiX3QiLCJiaW5hcnlTdHJpbmciLCJhdG9iIiwiZnJvbUNoYXJDb2RlIiwidG9CYXNlNjQiLCJ0b1VpbnQ4QXJyYXkiLCJhcHByb3hpbWF0ZUJ5dGVTaXplIiwiRU1QVFlfQllURV9TVFJJTkciLCJtdCIsIlJlZ0V4cCIsImd0IiwibmFub3MiLCJ5dCIsInB0IiwiZnJvbUJhc2U2NFN0cmluZyIsImZyb21VaW50OEFycmF5IiwiVHQiLCJtYXBWYWx1ZSIsIl9fdHlwZV9fIiwic3RyaW5nVmFsdWUiLCJFdCIsIl9fcHJldmlvdXNfdmFsdWVfXyIsIkl0IiwiX19sb2NhbF93cml0ZV90aW1lX18iLCJ0aW1lc3RhbXBWYWx1ZSIsIkF0IiwiUnQiLCJQdCIsInBhdGgiLCJmcm9tU3RyaW5nIiwiaGFzQ29sbGVjdGlvbklkIiwidnQiLCJWdCIsImJvb2xlYW5WYWx1ZSIsImJ5dGVzVmFsdWUiLCJyZWZlcmVuY2VWYWx1ZSIsImdlb1BvaW50VmFsdWUiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImludGVnZXJWYWx1ZSIsImRvdWJsZVZhbHVlIiwiYXJyYXlWYWx1ZSIsIlN0IiwiZmluZCIsIkR0IiwiQ3QiLCJOdCIsInh0IiwiZnJvbU5hbWUiLCIkdCIsIk90IiwiRnQiLCJNdCIsIkx0IiwiQnQiLCJVdCIsImZpZWxkIiwiZ2V0RmllbGRzTWFwIiwic2V0QWxsIiwiZW1wdHlQYXRoIiwiYXBwbHlDaGFuZ2VzIiwiY2xvbmUiLCJxdCIsIkt0IiwiZG9jdW1lbnRUeXBlIiwiZG9jdW1lbnRTdGF0ZSIsImVtcHR5IiwiY29udmVydFRvRm91bmREb2N1bWVudCIsImNvbnZlcnRUb05vRG9jdW1lbnQiLCJjb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQiLCJzZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJzZXRIYXNMb2NhbE11dGF0aW9ucyIsImhhc0xvY2FsTXV0YXRpb25zIiwiaGFzQ29tbWl0dGVkTXV0YXRpb25zIiwiaGFzUGVuZGluZ1dyaXRlcyIsImlzVmFsaWREb2N1bWVudCIsImlzRm91bmREb2N1bWVudCIsImlzTm9Eb2N1bWVudCIsImlzVW5rbm93bkRvY3VtZW50IiwianQiLCJjb2xsZWN0aW9uR3JvdXAiLCJvcmRlckJ5IiwiZmlsdGVycyIsInN0YXJ0QXQiLCJlbmRBdCIsIlF0IiwiV3QiLCJZdCIsImRpciIsImNlIiwienQiLCJ1ZSIsImxlIiwiSHQiLCJpc0RvY3VtZW50S2V5IiwiSnQiLCJYdCIsIm5lIiwic2UiLCJpZSIsInJlIiwiWnQiLCJ0ZSIsIm1hdGNoZXMiLCJlZSIsInNvbWUiLCJudWxsVmFsdWUiLCJvZSIsInBvc2l0aW9uIiwiYmVmb3JlIiwiYWUiLCJoZSIsImZlIiwiZXhwbGljaXRPcmRlckJ5IiwibGltaXRUeXBlIiwid2UiLCJtZSIsIlRlIiwieWUiLCJnZSIsImtleUZpZWxkIiwiRWUiLCJBZSIsIlJlIiwiYmUiLCJHdCIsIlBlIiwidmUiLCJWZSIsIlNlIiwiRGUiLCJDZSIsImlzSW50ZWdlciIsIk1BWF9TQUZFX0lOVEVHRVIiLCJNSU5fU0FGRV9JTlRFR0VSIiwiYnQiLCJOZSIsInhlIiwiT2UiLCJGZSIsIk1lIiwiTGUiLCJCZSIsIiRlIiwicWUiLCJrZSIsIlVlIiwiZWxlbWVudHMiLCJLZSIsIldlIiwidHJhbnNmb3JtUmVzdWx0cyIsIkdlIiwidXBkYXRlVGltZSIsImV4aXN0cyIsImlzTm9uZSIsInplIiwiSGUiLCJKZSIsImVuIiwicm4iLCJmaWVsZFRyYW5zZm9ybXMiLCJubiIsInByZWNvbmRpdGlvbiIsInNuIiwiWWUiLCJvbiIsInRuIiwiWGUiLCJ0cmFuc2Zvcm0iLCJaZSIsIlFlIiwiZmllbGRNYXNrIiwiY24iLCJhbiIsInVuIiwiaG4iLCJsbiIsImRuIiwid24iLCJyb290IiwibW4iLCJFTVBUWSIsImluc2VydCIsImNvcHkiLCJCTEFDSyIsInJlbW92ZSIsImxlZnQiLCJyaWdodCIsIm1pbktleSIsIm1heEtleSIsImlub3JkZXJUcmF2ZXJzYWwiLCJyZXZlcnNlVHJhdmVyc2FsIiwiZ2V0SXRlcmF0b3IiLCJfbiIsImdldEl0ZXJhdG9yRnJvbSIsImdldFJldmVyc2VJdGVyYXRvciIsImdldFJldmVyc2VJdGVyYXRvckZyb20iLCJpc1JldmVyc2UiLCJub2RlU3RhY2siLCJnZXROZXh0IiwiaGFzTmV4dCIsInBlZWsiLCJjb2xvciIsIlJFRCIsImZpeFVwIiwicmVtb3ZlTWluIiwiaXNSZWQiLCJtb3ZlUmVkTGVmdCIsInJvdGF0ZVJpZ2h0IiwibW92ZVJlZFJpZ2h0Iiwicm90YXRlTGVmdCIsImNvbG9yRmxpcCIsImNoZWNrTWF4RGVwdGgiLCJjaGVjayIsImduIiwiZmlyc3QiLCJsYXN0IiwiZm9yRWFjaEluUmFuZ2UiLCJmb3JFYWNoV2hpbGUiLCJmaXJzdEFmdGVyT3JFcXVhbCIsInluIiwidW5pb25XaXRoIiwiaXRlciIsInBuIiwiVG4iLCJFbiIsIkluIiwiQW4iLCJibiIsIlBuIiwidm4iLCJWbiIsIlNuIiwic25hcHNob3RWZXJzaW9uIiwidGFyZ2V0Q2hhbmdlcyIsInRhcmdldE1pc21hdGNoZXMiLCJkb2N1bWVudFVwZGF0ZXMiLCJyZXNvbHZlZExpbWJvRG9jdW1lbnRzIiwiRG4iLCJjcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UiLCJyZXN1bWVUb2tlbiIsImN1cnJlbnQiLCJhZGRlZERvY3VtZW50cyIsIm1vZGlmaWVkRG9jdW1lbnRzIiwicmVtb3ZlZERvY3VtZW50cyIsIkNuIiwicmVtb3ZlZFRhcmdldElkcyIsIk5uIiwidGFyZ2V0SWQiLCJ4biIsInRhcmdldElkcyIsImNhdXNlIiwia24iLCJGbiIsIiRuIiwic3QiLCJPbiIsImZvckVhY2hUYXJnZXQiLCJyZW1vdmVUYXJnZXQiLCJuZXdOb0RvY3VtZW50Iiwid3QiLCJwdXJwb3NlIiwiZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCIsIk1uIiwiYXNjIiwiZGVzYyIsIkxuIiwiaW4iLCJCbiIsImRhdGFiYXNlSWQiLCJVbiIsInFuIiwiS24iLCJqbiIsImZyb21UaW1lc3RhbXAiLCJRbiIsInByb2plY3RJZCIsImRhdGFiYXNlIiwiV24iLCJUcyIsIkduIiwiem4iLCJYbiIsIkhuIiwiWW4iLCJabiIsIm9zIiwiZG9jdW1lbnRzIiwiY3MiLCJzdHJ1Y3R1cmVkUXVlcnkiLCJwYXJlbnQiLCJjb2xsZWN0aW9uSWQiLCJhbGxEZXNjZW5kYW50cyIsInVuYXJ5RmlsdGVyIiwiX3MiLCJmaWVsZEZpbHRlciIsIndzIiwiY29tcG9zaXRlRmlsdGVyIiwid2hlcmUiLCJkaXJlY3Rpb24iLCJkcyIsImxzIiwiYXMiLCJKbiIsImhzIiwibXMiLCJmcyIsImRlIiwieXMiLCJncyIsInJlZHVjZSIsImZpZWxkUGF0aCIsImZyb21TZXJ2ZXJGb3JtYXQiLCJwcyIsImZpZWxkUGF0aHMiLCJFcyIsIkFzIiwiSXMiLCJQcyIsIm93bmVySWQiLCJhbGxvd1RhYlN5bmNocm9uaXphdGlvbiIsImxlYXNlVGltZXN0YW1wTXMiLCJzdG9yZSIsInZzIiwidXNlcklkIiwibGFzdEFja25vd2xlZGdlZEJhdGNoSWQiLCJsYXN0U3RyZWFtVG9rZW4iLCJrZXlQYXRoIiwiVnMiLCJiYXRjaElkIiwibG9jYWxXcml0ZVRpbWVNcyIsImJhc2VNdXRhdGlvbnMiLCJtdXRhdGlvbnMiLCJ1c2VyTXV0YXRpb25zSW5kZXgiLCJ1c2VyTXV0YXRpb25zS2V5UGF0aCIsIlNzIiwiUExBQ0VIT0xERVIiLCJOcyIsInVua25vd25Eb2N1bWVudCIsIm5vRG9jdW1lbnQiLCJyZWFkVGltZSIsInBhcmVudFBhdGgiLCJyZWFkVGltZUluZGV4IiwicmVhZFRpbWVJbmRleFBhdGgiLCJjb2xsZWN0aW9uUmVhZFRpbWVJbmRleCIsImNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCIsInhzIiwiYnl0ZVNpemUiLCJrcyIsImNhbm9uaWNhbElkIiwibGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIiwibGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsInF1ZXJ5IiwicXVlcnlUYXJnZXRzSW5kZXhOYW1lIiwicXVlcnlUYXJnZXRzS2V5UGF0aCIsIiRzIiwic2VxdWVuY2VOdW1iZXIiLCJkb2N1bWVudFRhcmdldHNJbmRleCIsImRvY3VtZW50VGFyZ2V0c0tleVBhdGgiLCJPcyIsImhpZ2hlc3RUYXJnZXRJZCIsImhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciIsImxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJ0YXJnZXRDb3VudCIsIkZzIiwiTXMiLCJjbGllbnRJZCIsInVwZGF0ZVRpbWVNcyIsIm5ldHdvcmtFbmFibGVkIiwiaW5Gb3JlZ3JvdW5kIiwiTHMiLCJidW5kbGVJZCIsImNyZWF0ZVRpbWUiLCJCcyIsImJ1bmRsZWRRdWVyeSIsImpzIiwibmV4dENhbGxiYWNrIiwiY2F0Y2hDYWxsYmFjayIsImlzRG9uZSIsImNhbGxiYWNrQXR0YWNoZWQiLCJ3cmFwRmFpbHVyZSIsIndyYXBTdWNjZXNzIiwidG9Qcm9taXNlIiwid3JhcFVzZXJGdW5jdGlvbiIsIndhaXRGb3IiLCJIcyIsIm5pIiwibG9jYWxXcml0ZVRpbWUiLCJhcHBseVRvUmVtb3RlRG9jdW1lbnQiLCJtdXRhdGlvblJlc3VsdHMiLCJhcHBseVRvTG9jYWxWaWV3IiwiYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQiLCJzaSIsImJhdGNoIiwiY29tbWl0VmVyc2lvbiIsImRvY1ZlcnNpb25zIiwiaWkiLCJ3aXRoU2VxdWVuY2VOdW1iZXIiLCJ3aXRoUmVzdW1lVG9rZW4iLCJ3aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsInJpIiwiSWUiLCJwaSIsIlRpIiwiYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgiLCJnZXRDb2xsZWN0aW9uUGFyZW50cyIsImdldEVudHJpZXMiLCJSaSIsImNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQiLCJwZXJjZW50aWxlVG9Db2xsZWN0IiwibWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCIsIkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFIiwiREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUIiwiREVGQVVMVCIsIkRJU0FCTEVEIiwiTmkiLCJhc3luYyIsIkZpIiwiamkiLCJtYXBLZXlGbiIsImVxdWFsc0ZuIiwiaW5uZXIiLCJyciIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5IiwiUm4iLCJnZXRFbnRyeSIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyIsImdldERvY3VtZW50c01hdGNoaW5nUXVlcnkiLCJwZSIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5IiwibmV3SW52YWxpZERvY3VtZW50Iiwib3IiLCJmcm9tQ2FjaGUiLCJkb2NDaGFuZ2VzIiwiZG9jIiwiY3IiLCJwZXJzaXN0ZW5jZSIsImdldE11dGF0aW9uUXVldWUiLCJnZXRSZW1vdGVEb2N1bWVudENhY2hlIiwiZ2V0VGFyZ2V0Q2FjaGUiLCJnZXRJbmRleE1hbmFnZXIiLCJnZXRCdW5kbGVDYWNoZSIsImNvbGxlY3RHYXJiYWdlIiwicnVuVHJhbnNhY3Rpb24iLCJjb2xsZWN0IiwiaHIiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXMiLCJyZW1vdmVkQmF0Y2hJZHMiLCJhZGRlZEJhdGNoSWRzIiwiZnIiLCJnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uIiwiX3IiLCJnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCIsImdyIiwicmVmZXJlbmNlRGVsZWdhdGUiLCJ5ciIsImdldFRhcmdldERhdGEiLCJnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsIlJyIiwiZ2V0QnVuZGxlTWV0YWRhdGEiLCJzYXZlQnVuZGxlTWV0YWRhdGEiLCJnZXROYW1lZFF1ZXJ5Iiwic2F2ZU5hbWVkUXVlcnkiLCJiciIsIlByIiwidHMiLCJlcyIsIm5zIiwiYWRkUmVmZXJlbmNlIiwic3MiLCJyZW1vdmVSZWZlcmVuY2UiLCJycyIsInVzIiwiY29udGFpbnNLZXkiLCJ2ciIsImNoZWNrRW1wdHkiLCJhZGRNdXRhdGlvbkJhdGNoIiwibG9va3VwTXV0YXRpb25CYXRjaCIsImdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQiLCJQT1NJVElWRV9JTkZJTklUWSIsInJlbW92ZU11dGF0aW9uQmF0Y2giLCJtYXJrUG90ZW50aWFsbHlPcnBoYW5lZCIsInBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrIiwiVnIiLCJkb2NzIiwiYWRkRW50cnkiLCJyZW1vdmVFbnRyeSIsIm5ld0NoYW5nZUJ1ZmZlciIsIlNyIiwiZ2V0U2l6ZSIsImNoYW5nZXMiLCJjaGFuZ2VzQXBwbGllZCIsImdldFJlYWRUaW1lIiwiYXNzZXJ0Tm90QXBwbGllZCIsImdldEZyb21DYWNoZSIsImdldEFsbEZyb21DYWNoZSIsIkRyIiwiUnMiLCJnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIiLCJhbGxvY2F0ZVRhcmdldElkIiwic2V0VGFyZ2V0c01ldGFkYXRhIiwiYWRkVGFyZ2V0RGF0YSIsInVwZGF0ZVRhcmdldERhdGEiLCJyZW1vdmVUYXJnZXREYXRhIiwicmVtb3ZlVGFyZ2V0cyIsInJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkIiwiZ2V0VGFyZ2V0Q291bnQiLCJhZGRNYXRjaGluZ0tleXMiLCJyZW1vdmVNYXRjaGluZ0tleXMiLCJDciIsImJzIiwic3RhcnRlZCIsInNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyIiwic2V0TmV0d29ya0VuYWJsZWQiLCJOciIsInJhaXNlT25Db21taXR0ZWRFdmVudCIsIm9uQ29tbWl0dGVkTGlzdGVuZXJzIiwiYWRkT25Db21taXR0ZWRMaXN0ZW5lciIsImN1cnJlbnRTZXF1ZW5jZU51bWJlciIsInhyIiwiRHMiLCJDcyIsImZyb21QYXRoIiwidXBkYXRlTGltYm9Eb2N1bWVudCIsIlVyIiwiYWN0aXZlVGFyZ2V0SWRzIiwiS3IiLCJ5aSIsIm9ubGluZVN0YXRlSGFuZGxlciIsImFkZFBlbmRpbmdNdXRhdGlvbiIsInVwZGF0ZU11dGF0aW9uU3RhdGUiLCJhZGRMb2NhbFF1ZXJ5VGFyZ2V0IiwidXBkYXRlUXVlcnlTdGF0ZSIsInJlbW92ZUxvY2FsUXVlcnlUYXJnZXQiLCJpc0xvY2FsUXVlcnlUYXJnZXQiLCJjbGVhclF1ZXJ5U3RhdGUiLCJnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMiLCJpc0FjdGl2ZVF1ZXJ5VGFyZ2V0IiwiaGFuZGxlVXNlckNoYW5nZSIsInNldE9ubGluZVN0YXRlIiwibm90aWZ5QnVuZGxlTG9hZGVkIiwianIiLCJRciIsIkVpIiwiSWkiLCJBaSIsImJpIiwiUGkiLCJXciIsIkJhdGNoR2V0RG9jdW1lbnRzIiwiQ29tbWl0IiwiUnVuUXVlcnkiLCJHciIsInZpIiwiVmkiLCJTaSIsIkRpIiwiQ2kiLCJvbk1lc3NhZ2UiLCJ4aSIsImtpIiwiJGkiLCJPaSIsInpyIiwiZGF0YWJhc2VJbmZvIiwic3NsIiwiaG9zdCIsIk1pIiwiTGkiLCJCaSIsIlVpIiwicWkiLCJLaSIsImFwcElkIiwiYXV0b0RldGVjdExvbmdQb2xsaW5nIiwidXNlRmV0Y2hTdHJlYW1zIiwiZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zIiwiSnIiLCJZciIsIlhyIiwidGltZXJJZCIsIlFpIiwiV2kiLCJHaSIsInppIiwiSGkiLCJKaSIsIllpIiwiWGkiLCJaaSIsImVucXVldWVBZnRlckRlbGF5IiwidHIiLCJza2lwRGVsYXkiLCJaciIsImVyIiwibnIiLCJzciIsImNyZWRlbnRpYWxzUHJvdmlkZXIiLCJpciIsInVyIiwibHIiLCJkciIsIndyIiwibXIiLCJwciIsIlRyIiwiRXIiLCJJciIsIkFyIiwiZW5xdWV1ZUFuZEZvcmdldCIsInRhcmdldENoYW5nZSIsInRhcmdldENoYW5nZVR5cGUiLCJkb2N1bWVudENoYW5nZSIsIm5ld0ZvdW5kRG9jdW1lbnQiLCJkb2N1bWVudERlbGV0ZSIsImRvY3VtZW50UmVtb3ZlIiwiYWRkVGFyZ2V0IiwibGFiZWxzIiwiZW8iLCJzdHJlYW1Ub2tlbiIsIndyaXRlUmVzdWx0cyIsImNvbW1pdFRpbWUiLCJ3cml0ZXMiLCJ1cGRhdGUiLCJ1cGRhdGVNYXNrIiwidmVyaWZ5IiwidXBkYXRlVHJhbnNmb3JtcyIsInNldFRvU2VydmVyVmFsdWUiLCJhcHBlbmRNaXNzaW5nRWxlbWVudHMiLCJyZW1vdmVBbGxGcm9tQXJyYXkiLCJpbmNyZW1lbnQiLCJjdXJyZW50RG9jdW1lbnQiLCJubyIsImtyIiwiJHIiLCJ0ZXJtaW5hdGUiLCJzbyIsImFzeW5jUXVldWUiLCJPciIsIkZyIiwiTXIiLCJMciIsIkJyIiwicXIiLCJpbyIsImxvY2FsU3RvcmUiLCJkYXRhc3RvcmUiLCJyZW1vdGVTeW5jZXIiLCJ3byIsIm9vIiwiSHIiLCJybyIsImNvIiwiZm8iLCJsbyIsIkNvIiwidW8iLCJhbyIsImhvIiwiX28iLCJtbyIsImdvIiwieW8iLCJyZWplY3RMaXN0ZW4iLCJwbyIsImFwcGx5UmVtb3RlRXZlbnQiLCJUbyIsIkVvIiwiTm8iLCJJbyIsIkFvIiwiUm8iLCJibyIsIlBvIiwidm8iLCJWbyIsImFwcGx5U3VjY2Vzc2Z1bFdyaXRlIiwiU28iLCJmbiIsInJlamVjdEZhaWxlZFdyaXRlIiwic3RvcCIsInhvIiwidGFyZ2V0VGltZU1zIiwicmVtb3ZhbENhbGxiYWNrIiwidGltZXJIYW5kbGUiLCJoYW5kbGVEZWxheUVsYXBzZWQiLCJrbyIsIiRvIiwia2V5ZWRNYXAiLCJzb3J0ZWRTZXQiLCJPbyIsInRyYWNrIiwiRm8iLCJvbGREb2NzIiwibXV0YXRlZEtleXMiLCJzeW5jU3RhdGVDaGFuZ2VkIiwiZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMiLCJlbXB0eVNldCIsIk1vIiwibGlzdGVuZXJzIiwiTG8iLCJxdWVyaWVzIiwib25saW5lU3RhdGUiLCJxbyIsImpvIiwiS28iLCJvbkVycm9yIiwiUW8iLCJpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwiZnJvbUluaXRpYWxEb2N1bWVudHMiLCJKbyIsIllvIiwiWG8iLCJzbmFwc2hvdCIsIkRvIiwiWm8iLCJ2aWV3IiwicmVtb3RlU3RvcmUiLCJldmVudE1hbmFnZXIiLCJzaGFyZWRDbGllbnRTdGF0ZSIsIm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zIiwiQm8iLCJVbyIsImlzUHJpbWFyeUNsaWVudCIsIkdvIiwiV28iLCJ0cmFja1JlbW92YWxzIiwic3luY2hyb25pemVUYWJzIiwiSG8iLCJnY1NjaGVkdWxlciIsImluaXRpYWxVc2VyIiwiY3JlYXRlRGF0YXN0b3JlIiwiY3JlYXRlUmVtb3RlU3RvcmUiLCJjcmVhdGVFdmVudE1hbmFnZXIiLCJzeW5jRW5naW5lIiwiY3JlYXRlU3luY0VuZ2luZSIsImhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UiLCJvYnNlcnZlciIsIm11dGVkIiwiY3JlZGVudGlhbExpc3RlbmVyIiwic2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyIiwidmVyaWZ5Tm90VGVybWluYXRlZCIsImlzU2h1dHRpbmdEb3duIiwiZW50ZXJSZXN0cmljdGVkTW9kZSIsImVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkIiwib25saW5lQ29tcG9uZW50cyIsIm9mZmxpbmVDb21wb25lbnRzIiwidmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcyIsImdldENvbmZpZ3VyYXRpb24iLCJvbkxpc3RlbiIsIm9uVW5saXN0ZW4iLCJwZXJzaXN0ZW5jZUtleSIsImlzRGVmYXVsdERhdGFiYXNlIiwiaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyIsImNhY2hlU2l6ZUJ5dGVzIiwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyIsImV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyIsIl9jcmVkZW50aWFscyIsIl9wZXJzaXN0ZW5jZUtleSIsIl9zZXR0aW5ncyIsIl9zZXR0aW5nc0Zyb3plbiIsIl9kYXRhYmFzZUlkIiwiX2FwcCIsIl9pbml0aWFsaXplZCIsIl90ZXJtaW5hdGVkIiwiX3Rlcm1pbmF0ZVRhc2siLCJfc2V0U2V0dGluZ3MiLCJjbGllbnQiLCJzZXNzaW9uSW5kZXgiLCJpYW1Ub2tlbiIsIl9nZXRTZXR0aW5ncyIsIl9mcmVlemVTZXR0aW5ncyIsIl90ZXJtaW5hdGUiLCJzZXR0aW5ncyIsImNvbnZlcnRlciIsIl9rZXkiLCJmaXJlc3RvcmUiLCJfcGF0aCIsIndpdGhDb252ZXJ0ZXIiLCJfcXVlcnkiLCJ2aXNpYmlsaXR5U3RhdGUiLCJlbnF1ZXVlIiwiY3JlYXRlQW5kU2NoZWR1bGUiLCJfcXVldWUiLCJfZmlyZXN0b3JlQ2xpZW50IiwiX2ludGVybmFsUGF0aCIsIl9ieXRlU3RyaW5nIiwiX21ldGhvZE5hbWUiLCJ0dSIsImlzRmluaXRlIiwiX2xhdCIsIl9sb25nIiwiZXUiLCJudSIsInRvTXV0YXRpb24iLCJzdSIsIml1IiwicnUiLCJidSIsIm1ldGhvZE5hbWUiLCJjb250YWlucyIsIm91IiwiY3UiLCJhdSIsIm1lcmdlIiwibWVyZ2VGaWVsZHMiLCJFdSIsInB1IiwiSXUiLCJQdSIsInV1IiwiX3RvRmllbGRUcmFuc2Zvcm0iLCJfdSIsIlJ1IiwieXUiLCJtdSIsIlR1IiwiZnJvbURhdGUiLCJnZXRQcm90b3R5cGVPZiIsIkF1Iiwic2VhcmNoIiwidnUiLCJfZmlyZXN0b3JlIiwiX3VzZXJEYXRhV3JpdGVyIiwiX2RvY3VtZW50IiwiX2NvbnZlcnRlciIsInJlZiIsIlZ1IiwiZnJvbUZpcmVzdG9yZSIsImNvbnZlcnRWYWx1ZSIsIlN1IiwiRHUiLCJDdSIsIl9maXJlc3RvcmVJbXBsIiwibWV0YWRhdGEiLCJOdSIsInNlcnZlclRpbWVzdGFtcHMiLCJ4dSIsIl9zbmFwc2hvdCIsIl9jYWNoZWRDaGFuZ2VzIiwiX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwib2xkSW5kZXgiLCJuZXdJbmRleCIsImt1IiwiTXUiLCJfYXBwbHkiLCJzaCIsInRvRmlyZXN0b3JlIiwicmgiLCJfY29tbWl0SGFuZGxlciIsIl9tdXRhdGlvbnMiLCJfY29tbWl0dGVkIiwiX2RhdGFSZWFkZXIiLCJfdmVyaWZ5Tm90Q29tbWl0dGVkIiwib2giLCJub25lIiwiY29tbWl0IiwiYWgiLCJjb252ZXJ0VGltZXN0YW1wIiwiY29udmVydFNlcnZlclRpbWVzdGFtcCIsImNvbnZlcnRCeXRlcyIsImNvbnZlcnRSZWZlcmVuY2UiLCJjb252ZXJ0R2VvUG9pbnQiLCJjb252ZXJ0QXJyYXkiLCJjb252ZXJ0T2JqZWN0IiwiY29udmVydERvY3VtZW50S2V5IiwibGgiLCJPdSIsIndoIiwiVGgiLCJfaCIsIm1oIiwiZ2giLCJTaCIsInN0eWxlVGFnVHJhbnNmb3JtIiwic2V0QXR0cmlidXRlcyIsImRvbUFQSSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlc0luRE9NIiwiZ2V0SW5kZXhCeUlkZW50aWZpZXIiLCJtb2R1bGVzVG9Eb20iLCJpZENvdW50TWFwIiwiaWRlbnRpZmllcnMiLCJiYXNlIiwiaW5kZXhCeUlkZW50aWZpZXIiLCJvYmoiLCJjc3MiLCJzb3VyY2VNYXAiLCJyZWZlcmVuY2VzIiwidXBkYXRlciIsImFkZEVsZW1lbnRTdHlsZSIsImJ5SW5kZXgiLCJhcGkiLCJuZXdPYmoiLCJsYXN0SWRlbnRpZmllcnMiLCJuZXdMaXN0IiwibmV3TGFzdElkZW50aWZpZXJzIiwiX2luZGV4IiwibWVtbyIsInN0eWxlIiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwiZ2V0VGFyZ2V0IiwiYXBwZW5kQ2hpbGQiLCJlbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImF0dHJpYnV0ZXMiLCJzdHlsZUVsZW1lbnQiLCJub25jZSIsInNldEF0dHJpYnV0ZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInJlbW92ZVN0eWxlRWxlbWVudCIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiZmlyc3RDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiYXBpS2V5IiwiYXV0aERvbWFpbiIsInN0b3JhZ2VCdWNrZXQiLCJtZXNzYWdpbmdTZW5kZXJJZCIsImdldEVsZW1lbnRCeUlkIiwiY29sIiwiZGVsZXRlVG9kb0Zyb21GaXJlc3RvcmUiLCJ0b2RvSWQiLCJkZWxldGVQcm9qZWN0RnJvbUZpcmVzdG9yZSIsInRvZG8iLCJhZGRJdGVtVG9GaXJlc3RvcmUiLCJjb2xSZWYiLCJzZXRQcm9qZWN0UHJvcEluRmlyZXN0b3JlIiwicHJvcCIsInByb2plY3QiLCJzZXRQcm9qZWN0UHJvcHNJbkZpcmVzdG9yZSIsInNldFRvZG9Qcm9wSW5GaXJlc3RvcmUiLCJzZXRUb2RvUHJvcHNJbkZpcmVzdG9yZSIsInNldFRvZG9zUHJvcEluRmlyZXN0b3JlIiwidG9kb3MiLCJhZGRUb2RvV2l0aElkVG9GaXJlc3RvcmUiLCJwcm9qZWN0cyIsImZldGNoUHJvamVjdHMiLCJwcm9qZWN0VGl0bGUiLCJmZXRjaFByb2plY3RUb2RvcyIsInRpdGxlIiwiZ2V0UHJvamVjdHMiLCJzaG93QWxlcnRJbkZvcm0iLCJmb3JtIiwibmFtZWRJdGVtIiwiYWxlcnQiLCJpbm5lclRleHQiLCJpbnNlcnRCZWZvcmUiLCJjaGVja1RpdGxlIiwidGl0bGVzIiwidmFsaWRhdGVGb3JtQWRkVG9kbyIsImNoZWNrcyIsInZhbGlkYXRlRm9ybUFkZFRvZG9UaXRsZSIsInZhbGlkYXRlRm9ybUFkZFRvZG9EYXRlIiwidmFsaWRhdGVGb3JtIiwidmFsaWRhdGVGb3JtQWRkUHJvamVjdCIsInBhcmVudEVsZW1lbnQiLCJjbG9zZXN0IiwiYWRkSXRlbSIsIml0ZW1UeXBlIiwiaXRlbUlkIiwiZGVsZXRlSXRlbSIsImdldEF0dHJpYnV0ZSIsImRlbGV0ZVByb2plY3QiLCJmaW5kSXRlbWluZGV4IiwiaXRlbXMiLCJwcm9qZWN0UHJvcHMiLCJQcm9qZWN0cyIsIl9kYXRhIiwid2l0aEdldHRlciIsImdldFByb2plY3RzUHJvcCIsIndpdGhQcm9qZWN0c0hhbmRsZXIiLCJnZXRQcm9qZWN0IiwiZ2V0UHJvamVjdFByb3AiLCJnZXRQcm9qZWN0SWRGcm9tUHJvcCIsImdldFByb2plY3RQcm9wRnJvbVRvZG9JZCIsImdldFByb2plY3RQcm9wc0Zyb21Ub2RvSWQiLCJzZXRQcm9qZWN0Iiwic2V0UHJvamVjdFByb3AiLCJwcm9qZWN0SW5kZXgiLCJzZXRQcm9qZWN0UHJvcHMiLCJhZGRQcm9qZWN0Iiwid2l0aFByb2plY3RIYW5kbGVyIiwiZ2V0VG9kb3MiLCJnZXRUb2Rvc1Byb3AiLCJnZXRUb2RvRnJvbUlkIiwid2l0aFRvZG9zSGFuZGxlciIsImdldFRvZG8iLCJ0b2RvSW5kZXgiLCJnZXRUb2RvUHJvcCIsInNldFRvZG8iLCJzZXRUb2RvUHJvcCIsInNldFRvZG9zUHJvcCIsInNldFRvZG9Qcm9wcyIsImFkZFRvZG8iLCJkZWxldGVUb2RvIiwid2l0aFRvZG9IYW5kbGVyIiwiYXJyIiwiYnkiLCJhc3luY0ZvckVhY2giLCJzb3J0ZWRJbmRleCIsImxvdyIsImhpZ2giLCJtaWQiLCJpbnRlcnNlY3QiLCJ0eXBlcyIsInNob3dJdGVtcyIsInNvcnRBcmdzIiwiaW5uZXJIVE1MIiwic2hvd0hvbWUiLCJob21lIiwiY29udHJvbHMiLCJjbGFzc0xpc3QiLCJ0eXBlRGl2IiwidGV4dENvbnRlbnQiLCJtYWtlSG9tZUNvbnRyb2xzIiwibWFrZUhvbWVJdGVtcyIsIm1ha2VIb21lIiwiZ2V0SG9tZVR5cGUiLCJnZXRJdGVtU29ydFZhbHVlc0Zyb21Ib21lIiwiY2hpbGRyZW4iLCJhZGRJdGVtVG9Ib21lSXRlbXNMaXN0IiwiZ2V0U29ydFBhcmFtc0Zyb21Ib21lIiwiaXRlbVNvcnRWYWx1ZSIsInJlZmVyZW5jZSIsImVkaXRJdGVtT25Ib21lTGlzdCIsImR1ZURhdGUiLCJzd2l0Y2hQcm9qZWN0c1RvZG9zIiwic3dpdGNoRGl2IiwiY29udHJvbCIsInNldEhvbWVUeXBlIiwiY29sbGFwc2VJdGVtIiwiZGlzcGxheSIsIm1ha2VUaXRsZSIsIm1ha2VDb250ZW50IiwiZGVzY3JpcHRpb24iLCJwcmlvcml0eSIsImRldGFpbHMiLCJtYWtlRGV0YWlscyIsImVkaXQiLCJzdGF0dXNFbGVtZW50IiwiZGVsIiwibWFrZUNvbnRyb2xzIiwibWFrZU5ld0l0ZW1Db250YWluZXIiLCJzaG93SXRlbSIsImFkZEl0ZW1Ub0l0ZW1zTGlzdCIsImdldEl0ZW1Db21wb25lbnRQcm9wIiwiZ2V0SXRlbVNvcnRWYWx1ZSIsImdldEl0ZW1Tb3J0VmFsdWVzIiwiZ2V0VHlwZUZyb21ET01JdGVtIiwiZ2V0UHJvcHNGcm9tRE9NSXRlbSIsInRvZ2dsZUl0ZW1FdmVudExpc3RlbmVyIiwidG9nZ2xlSXRlbXNFdmVudExpc3RlbmVyIiwibWFrZVRvZG9zIiwiaGVhZGVyIiwiaGVhZGxpbmUiLCJtYWtlVG9kb3NIZWFkZXIiLCJtYWtlVG9kb3NMaXN0IiwiYWRkVG9kb1RvUHJvamVjdFRvZG9zTGlzdCIsImVkaXRUb2RvT25Qcm9qZWN0TGlzdCIsImdldFRvZG9zRnJvbURPTVByb2plY3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwibWFrZUFkZEl0ZW1Gb3JtIiwic3VibWl0IiwibWFrZUFkZEl0ZW1Gb3JtQm9keSIsInByb2Nlc3NBZGRJdGVtIiwic2hvd0FkZEl0ZW0iLCJwcm9qZWN0VGl0bGVzIiwicHJlcGVuZCIsIm1ha2VBZGRJdGVtRnJvbUhvbWVGb3JtIiwic2hvd0FkZEl0ZW1Gb3JtRnJvbUhvbWUiLCJuZXh0U2libGluZyIsInNob3dBZGRUb2RvRnJvbVByb2plY3QiLCJtYWtlQWRkVG9kb0Zyb21Qcm9qZWN0Rm9ybSIsIm1ha2VFZGl0SXRlbUZvcm1Cb2R5Iiwic2hvd0VkaXRJdGVtIiwibWFrZUVkaXRQcm9qZWN0Rm9ybSIsIm1ha2VFZGl0VG9kb0Zvcm0iLCJwcm9jZXNzRWRpdEl0ZW0iLCJtYWtlRWRpdEl0ZW1Gb3JtIiwic2hvd0VkaUl0ZW1Gcm9tSG9tZSIsInNob3dFZGl0VG9kb0Zyb21Qcm9qZWN0IiwiZWRpdFByb2plY3REYXRhIiwiZWRpdFByb2plY3QiLCJuZXdQcm9qZWN0SWQiLCJvcmlnaW5hbFByb2plY3RJZCIsImVkaXRUb2RvRGF0YSIsImVkaXRUb2RvIiwicHJpb3JpdHlMZXZlbHMiLCJnZXRJdGVtUHJvcHNGcm9tRm9ybSIsIm1ha2VGb3JtSW5wdXRUZXh0IiwicGxhY2Vob2xkZXIiLCJtYWtlRm9ybUlucHV0U2VsZWN0IiwiY2hvaWNlcyIsInNlbGVjdGVkIiwiZm9yIiwic2VsZWN0IiwiY2hvaWNlIiwib3B0aW9uIiwibWFrZUZvcm1JbnB1dERhdGUiLCJtYWtlSXRlbUZvcm1TdWJtaXQiLCJtYWtlSXRlbUZyb21BZGRFZGl0Rm9ybSIsImFkZFByb2plY3RJZFRvVG9kb0l0ZW0iLCJoaWRlQWRkRWRpdEl0ZW1Gb3JtRnJvbUhvbWUiLCJzd2l0Y2hJdGVtQ29udHJvbCIsImhpZGVBZGRFZGl0VG9kb0Zvcm1Gcm9tUHJvamVjdCIsInNob3ciLCJvdmVyZHVlQ2xhc3NlcyIsImNoZWNrSWZEYXRlUGFzc2VkIiwic2V0SG91cnMiLCJjaGVja0lmSXRlbU92ZXJkdWUiLCJjaGVja0lmUHJvamVjdEhhc092ZXJkdWVUb2RvIiwic2hvd0l0ZW1Bc092ZXJkdWUiLCJzaG93UHJvamVjdEhhc092ZXJkdWUiLCJzaG93UHJvamVjdEhhc250T3ZlcmR1ZSIsInNvcnRJdGVtT3ZlcmR1ZVN0YXR1cyIsIm92ZXJkdWUiLCJzb3J0UHJvamVjdEhhc092ZXJkdWVTdGF0dXMiLCJoYXNPdmVyZHVlIiwic29ydFByb2plY3RUb2Rvc092ZXJkdWVTdGF0dXMiLCJzb3J0UGFyZW50UHJvamVjdEhhc092ZXJkdWVTdGF0dXMiLCJ0b2RvRHVlRGF0ZSIsInRvZ2dsZUl0ZW1TdGF0dXNFdmVudExpc3RlbmVycyIsImFkZHMiLCJlZGl0cyIsInRvZ2dsZVN0YXR1cyIsImRlbHMiLCJ0b2dnbGVQcm9qZWN0VG9kb3NTdGF0dXNFdmVudExpc3RlbmVycyIsInRvZ2dsZVN0YXR1c0luRmlyZXNvdHJlIiwidG9nZ2xlU3RhdHVzSW5Qcm9qZWN0cyIsInRvZ2dsZURvbmUiLCJpdGVtQ2xhc3MiLCJ0b2dnbGVEb25lT25ET00iLCJ0b2dnbGVPcGVuIiwidG9nZ2xlT3Blbk9uRE9NIiwibWFrZUVsZW1lbnQiLCJjb250YWluZXJUeXBlIiwiY2xhc3NOYW1lIiwidHlwZUF0dHJpYnV0ZSIsImlkQXR0cmlidXRlIiwiZXZlbnRMaXN0ZW5lciIsIm1ha2VEaXYiLCJhZGp1c3RIZWlnaHQiLCJwYXJlbnRSZWdleCIsIm1heEhlaWdodCIsInNjcm9sbEhlaWdodCIsInRvZ2dsZUNvbGxhcHNlIiwidG9nZ2xlIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiaW5zZXJ0QWZ0ZXIiLCJuZXdOb2RlIiwiZXhpc3RpbmdOb2RlIiwiY2xlYXJDb250YWluZXJPZkVsZW1lbnRzIiwic2VsZWN0b3IiLCJ0b2dnbGVFbGVtZW50Q2xhc3MiLCJ0b2dnbGVFbGVtZW50c0NsYXNzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInF1ZXVlIiwiaGFzQXdhaXQiLCJjdXJyZW50RGVwcyIsIm91dGVyUmVzb2x2ZSIsImlzRXZhbHVhdGluZyIsIm5lc3RlZCIsIndoZW5BbGwiLCJkZXBzIiwib25SZXNvbHZlIiwib25SZWplY3QiLCJkZXAiLCJyZWoiLCJyZWplY3RGbiIsInJldCIsIndyYXBEZXBzIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImRlZmluaXRpb24iLCJlbnVtZXJhYmxlIl0sInNvdXJjZVJvb3QiOiIifQ==